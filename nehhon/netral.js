var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(k){var q=0;return function(){return q<k.length?{done:!1,value:k[q++]}:{done:!0}}};$jscomp.arrayIterator=function(k){return{next:$jscomp.arrayIteratorImpl(k)}};$jscomp.makeIterator=function(k){var q="undefined"!=typeof Symbol&&Symbol.iterator&&k[Symbol.iterator];return q?q.call(k):$jscomp.arrayIterator(k)};
$jscomp.getGlobal=function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global&&null!=global?global:k};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(k,q,A){k!=Array.prototype&&k!=Object.prototype&&(k[q]=A.value)};
$jscomp.polyfill=function(k,q,A,D){if(q){A=$jscomp.global;k=k.split(".");for(D=0;D<k.length-1;D++){var B=k[D];B in A||(A[B]={});A=A[B]}k=k[k.length-1];D=A[k];q=q(D);q!=D&&null!=q&&$jscomp.defineProperty(A,k,{configurable:!0,writable:!0,value:q})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(k){function q(){this.batch_=null}function A(k){return k instanceof B?k:new B(function(q,ra){q(k)})}if(k&&!$jscomp.FORCE_POLYFILL_PROMISE)return k;q.prototype.asyncExecute=function(k){if(null==this.batch_){this.batch_=[];var q=this;this.asyncExecuteFunction(function(){q.executeBatch_()})}this.batch_.push(k)};var D=$jscomp.global.setTimeout;q.prototype.asyncExecuteFunction=function(k){D(k,0)};q.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var k=
this.batch_;this.batch_=[];for(var q=0;q<k.length;++q){var A=k[q];k[q]=null;try{A()}catch(yb){this.asyncThrow_(yb)}}}this.batch_=null};q.prototype.asyncThrow_=function(k){this.asyncExecuteFunction(function(){throw k;})};var B=function(k){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var q=this.createResolveAndReject_();try{k(q.resolve,q.reject)}catch(Ca){q.reject(Ca)}};B.prototype.createResolveAndReject_=function(){function k(k){return function(B){A||(A=!0,k.call(q,B))}}var q=this,
A=!1;return{resolve:k(this.resolveTo_),reject:k(this.reject_)}};B.prototype.resolveTo_=function(k){if(k===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(k instanceof B)this.settleSameAsPromise_(k);else{a:switch(typeof k){case "object":var q=null!=k;break a;case "function":q=!0;break a;default:q=!1}q?this.resolveToNonPromiseObj_(k):this.fulfill_(k)}};B.prototype.resolveToNonPromiseObj_=function(k){var q=void 0;try{q=k.then}catch(Ca){this.reject_(Ca);return}"function"==
typeof q?this.settleSameAsThenable_(q,k):this.fulfill_(k)};B.prototype.reject_=function(k){this.settle_(2,k)};B.prototype.fulfill_=function(k){this.settle_(1,k)};B.prototype.settle_=function(k,q){if(0!=this.state_)throw Error("Cannot settle("+k+", "+q+"): Promise already settled in state"+this.state_);this.state_=k;this.result_=q;this.executeOnSettledCallbacks_()};B.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var k=0;k<this.onSettledCallbacks_.length;++k)K.asyncExecute(this.onSettledCallbacks_[k]);
this.onSettledCallbacks_=null}};var K=new q;B.prototype.settleSameAsPromise_=function(k){var q=this.createResolveAndReject_();k.callWhenSettled_(q.resolve,q.reject)};B.prototype.settleSameAsThenable_=function(k,q){var A=this.createResolveAndReject_();try{k.call(q,A.resolve,A.reject)}catch(yb){A.reject(yb)}};B.prototype.then=function(k,q){function A(k,q){return"function"==typeof k?function(q){try{D(k(q))}catch(oa){ra(oa)}}:q}var D,ra,K=new B(function(k,q){D=k;ra=q});this.callWhenSettled_(A(k,D),A(q,
ra));return K};B.prototype.catch=function(k){return this.then(void 0,k)};B.prototype.callWhenSettled_=function(k,q){function A(){switch(B.state_){case 1:k(B.result_);break;case 2:q(B.result_);break;default:throw Error("Unexpected state: "+B.state_);}}var B=this;null==this.onSettledCallbacks_?K.asyncExecute(A):this.onSettledCallbacks_.push(A)};B.resolve=A;B.reject=function(k){return new B(function(q,A){A(k)})};B.race=function(k){return new B(function(q,B){for(var D=$jscomp.makeIterator(k),K=D.next();!K.done;K=
D.next())A(K.value).callWhenSettled_(q,B)})};B.all=function(k){var q=$jscomp.makeIterator(k),D=q.next();return D.done?A([]):new B(function(k,B){function K(q){return function(A){ra[q]=A;Ca--;0==Ca&&k(ra)}}var ra=[],Ca=0;do ra.push(void 0),Ca++,A(D.value).callWhenSettled_(K(ra.length-1),B),D=q.next();while(!D.done)})};return B},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(k,q){this.$jscomp$symbol$id_=k;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:q})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function k(A){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(A||"")+"_"+q++,A)}var q=0;return k}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.iterator;k||(k=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[k]&&$jscomp.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var k=$jscomp.global.Symbol.asyncIterator;k||(k=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(k){$jscomp.initSymbolIterator();k={next:k};k[$jscomp.global.Symbol.iterator]=function(){return this};return k};$jscomp.underscoreProtoCanBeSet=function(){var k={a:!0},q={};try{return q.__proto__=k,q.a}catch(A){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(k,q){k.__proto__=q;if(k.__proto__!==q)throw new TypeError(k+" is not extensible");return k}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(k){if(!(k instanceof Object))throw new TypeError("Iterator result "+k+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(k){this.yieldResult=k};$jscomp.generator.Context.prototype.throw_=function(k){this.abruptCompletion_={exception:k,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(k){this.abruptCompletion_={return:k};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(k){this.abruptCompletion_={jumpTo:k};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(k,q){this.nextAddress=q;return{value:k}};$jscomp.generator.Context.prototype.yieldAll=function(k,q){k=$jscomp.makeIterator(k);var A=k.next();$jscomp.generator.ensureIteratorResultIsObject_(A);if(A.done)this.yieldResult=A.value,this.nextAddress=q;else return this.yieldAllIterator_=k,this.yield(A.value,q)};
$jscomp.generator.Context.prototype.jumpTo=function(k){this.nextAddress=k};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(k,q){this.catchAddress_=k;void 0!=q&&(this.finallyAddress_=q)};$jscomp.generator.Context.prototype.setFinallyBlock=function(k){this.catchAddress_=0;this.finallyAddress_=k||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(k,q){this.nextAddress=k;this.catchAddress_=q||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(k){this.catchAddress_=k||0;k=this.abruptCompletion_.exception;this.abruptCompletion_=null;return k};$jscomp.generator.Context.prototype.enterFinallyBlock=function(k,q,A){A?this.finallyContexts_[A]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=k||0;this.finallyAddress_=q||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(k,q){q=this.finallyContexts_.splice(q||0)[0];if(q=this.abruptCompletion_=this.abruptCompletion_||q){if(q.isException)return this.jumpToErrorHandler_();void 0!=q.jumpTo&&this.finallyAddress_<q.jumpTo?(this.nextAddress=q.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=k};$jscomp.generator.Context.prototype.forIn=function(k){return new $jscomp.generator.Context.PropertyIterator(k)};
$jscomp.generator.Context.PropertyIterator=function(k){this.object_=k;this.properties_=[];for(var q in k)this.properties_.push(q);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var k=this.properties_.pop();if(k in this.object_)return k}return null};$jscomp.generator.Engine_=function(k){this.context_=new $jscomp.generator.Context;this.program_=k};
$jscomp.generator.Engine_.prototype.next_=function(k){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,k,this.context_.next_);this.context_.next_(k);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(k){this.context_.start_();var q=this.context_.yieldAllIterator_;if(q)return this.yieldAllStep_("return"in q?q["return"]:function(k){return{value:k,done:!0}},k,this.context_.return);this.context_.return(k);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(k){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],k,this.context_.next_);this.context_.throw_(k);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(k,q,A){try{var D=k.call(this.context_.yieldAllIterator_,q);$jscomp.generator.ensureIteratorResultIsObject_(D);if(!D.done)return this.context_.stop_(),D;var B=D.value}catch(K){return this.context_.yieldAllIterator_=null,this.context_.throw_(K),this.nextStep_()}this.context_.yieldAllIterator_=null;A.call(this.context_,B);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var k=this.program_(this.context_);if(k)return this.context_.stop_(),{value:k.value,done:!1}}catch(q){this.context_.yieldResult=void 0,this.context_.throw_(q)}this.context_.stop_();if(this.context_.abruptCompletion_){k=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(k.isException)throw k.exception;return{value:k.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(k){this.next=function(q){return k.next_(q)};this.throw=function(q){return k.throw_(q)};this.return=function(q){return k.return_(q)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(k,q){q=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(q));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(q,k.prototype);return q};
$jscomp.asyncExecutePromiseGenerator=function(k){function q(q){return k.next(q)}function A(q){return k.throw(q)}return new Promise(function(D,B){function K(k){k.done?D(k.value):Promise.resolve(k.value).then(q,A).then(K,B)}K(k.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(k){return $jscomp.asyncExecutePromiseGenerator(k())};$jscomp.asyncExecutePromiseGeneratorProgram=function(k){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(k)))};
$jscomp.iteratorFromArray=function(k,q){$jscomp.initSymbolIterator();k instanceof String&&(k+="");var A=0,D={next:function(){if(A<k.length){var B=A++;return{value:q(B,k[B]),done:!1}}D.next=function(){return{done:!0,value:void 0}};return D.next()}};D[Symbol.iterator]=function(){return D};return D};$jscomp.polyfill("Array.prototype.keys",function(k){return k?k:function(){return $jscomp.iteratorFromArray(this,function(k){return k})}},"es6","es3");
$jscomp.polyfill("Object.getOwnPropertySymbols",function(k){return k?k:function(){return[]}},"es6","es5");$jscomp.findInternal=function(k,q,A){k instanceof String&&(k=String(k));for(var D=k.length,B=0;B<D;B++){var K=k[B];if(q.call(A,K,B,k))return{i:B,v:K}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(k){return k?k:function(k,A){return $jscomp.findInternal(this,k,A).v}},"es6","es3");
$jscomp.polyfill("Math.log2",function(k){return k?k:function(k){return Math.log(k)/Math.LN2}},"es6","es3");$jscomp.polyfill("Math.sign",function(k){return k?k:function(k){k=Number(k);return 0===k||isNaN(k)?k:0<k?1:-1}},"es6","es3");$jscomp.owns=function(k,q){return Object.prototype.hasOwnProperty.call(k,q)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(k,q){for(var A=1;A<arguments.length;A++){var D=arguments[A];if(D)for(var B in D)$jscomp.owns(D,B)&&(k[B]=D[B])}return k};
$jscomp.polyfill("Object.assign",function(k){return k||$jscomp.assign},"es6","es3");
(function(){var k,q,A,D;function B(m,a,e){this.context=m;this.urlList=a;this.onload=e;this.loadCount=0}function K(m,a,e){a=a.split(".")[0].toLowerCase();Tb[a]=m;!e||e.music&&e.mid!==U.id||(Ka(a,e.x,e.y,e.k,e.music,e.date),e.date=0)}function ra(m){for(var a=m.length,e=0;e<a;h(m[e++]).style.display="none");}function Wd(m){for(var a=m.length,e=0;e<a;h(m[e++]).style.display="block");}function Ca(){location.href=""}function yb(m){x("setup:",m);m.toSend=[];m.orderList=[];var a=ea.roomName;a=a.substr(0,
a.length-1);m.id==a&&(m.admin=!0);m.superID=$d(m.id);m.sendDirectly("channelMessage","nehhof",{});x(m.channels.channelMessage);if(!r.adminOK)var e=setTimeout(Lf,3500);jb(n.mnameadd(),17,r.name);m.channels.channelMessage.onopen=function(){clearTimeout(e);aa.put(m);Ka("attack");Gc(1);x("DATACHANNEL OPEN");x(m);setTimeout(function(){m.admin&&(r.adminOK=!0,n.shareName(m.superID))},500)};m.channels.channelMessage.onerror=function(a){x("DATACHANNEL ERROR",a)};m.channels.channelMessage.onclose=function(a){Ub(m);
x("DATACHANNEL CLOSE",a)};m.pc.pc.onconnectionstatechange=function(a){x(a);"disconnected"==m.pc.pc.connectionState&&Ub(m)};m.pc.pc.oniceconnectionstatechange=function(a){x(a);"failed"!=m.pc.pc.iceConnectionState&&"disconnected"!=m.pc.pc.iceConnectionState||Ub(m)};m.pc.pc.onsignalingstatechange=function(a){x(a);"closed"==m.pc.pc.signalingState&&Ub(m)}}function Xd(){h("buttons").innerHTML="";h("gameName").innerHTML=""}function Fc(){""==h("Multiplayer").innerHTML&&(h("Multiplayer").innerHTML="<h2>"+
l.MAINSCR_MULTI.split("|")[0]+'</h2>\n<button id="createbutton">'+l.MP_SEARCH_CREATE.split("| ")[1]+'</button>\n<button id="refreshButton1" class="refreshButton">'+l.GENERAL_REFRESH+'</button>\n<table id="gameList">\n<tbody>\n<tr><td>'+l.MSG_GAME_LOAD+"</td></tr>\n</tbody>\n</table>",h("refreshButton1").onclick=Fc,h("createbutton").onclick=ae);W("returnmenu");r.p2p?(sa(),r.p2p.emit("getRooms")):(ea||fa(),fa.func=Fc)}function Yd(){var m=location,a=m.hash.substr(1);""===a&&(h("returnmenu").style.display=
"none");if("Room"===m.hash.substr(-4))Hc?be():Vb=be;else if(Ic[a])if(Hc)Ic[a]();else Vb=Ic[a];else m.hash=""}function Kf(m){return b.locateFile?b.locateFile(m,ta):ta+m}function Zd(m,a,e){var d=a+e;for(e=a;m[e]&&!(e>=d);)++e;if(16<e-a&&m.subarray&&ce)return ce.decode(m.subarray(a,e));for(d="";a<e;){var c=m[a++];if(c&128){var g=m[a++]&63;if(192==(c&224))d+=String.fromCharCode((c&31)<<6|g);else{var u=m[a++]&63;c=224==(c&240)?(c&15)<<12|g<<6|u:(c&7)<<18|g<<12|u<<6|m[a++]&63;65536>c?d+=String.fromCharCode(c):
(c-=65536,d+=String.fromCharCode(55296|c>>10,56320|c&1023))}}else d+=String.fromCharCode(c)}return d}function oa(m,a){return m?Zd(I,m,a):""}function Da(m,a,e,d){if(!(0<d))return 0;var c=e;d=e+d-1;for(var g=0;g<m.length;++g){var u=m.charCodeAt(g);if(55296<=u&&57343>=u){var b=m.charCodeAt(++g);u=65536+((u&1023)<<10)|b&1023}if(127>=u){if(e>=d)break;a[e++]=u}else{if(2047>=u){if(e+1>=d)break;a[e++]=192|u>>6}else{if(65535>=u){if(e+2>=d)break;a[e++]=224|u>>12}else{if(e+3>=d)break;a[e++]=240|u>>18;a[e++]=
128|u>>12&63}a[e++]=128|u>>6&63}a[e++]=128|u&63}}a[e]=0;return e-c}function Mf(m,a){0<m%a&&(m+=a-m%a);return m}function de(m){Wb=m;b.HEAP8=new Int8Array(m);b.HEAP16=new Int16Array(m);b.HEAP32=Va=new Int32Array(m);b.HEAPU8=I=new Uint8Array(m);b.HEAPU16=T=new Uint16Array(m);b.HEAPU32=G=new Uint32Array(m);b.HEAPF32=new Float32Array(m);b.HEAPF64=ee=new Float64Array(m)}function Xb(m){for(;0<m.length;){var a=m.shift();if("function"==typeof a)a();else{var e=a.func;"number"===typeof e?void 0===a.arg?b.dynCall_v(e):
b.dynCall_vi(e,a.arg):e(void 0===a.arg?null:a.arg)}}}function fe(m){Wa++;b.monitorRunDependencies&&b.monitorRunDependencies(Wa)}function Jc(m){Wa--;b.monitorRunDependencies&&b.monitorRunDependencies(Wa);0==Wa&&(null!==Kc&&(clearInterval(Kc),Kc=null),zb&&(m=zb,zb=null,m()))}function Xa(m){if(b.onAbort)b.onAbort(m);m+="";ge(m);La(m);Lc=!0;throw new WebAssembly.RuntimeError("abort("+m+"). Build with -s ASSERTIONS=1 for more info.");}function he(m){return String.prototype.startsWith?m.startsWith("data:application/octet-stream;base64,"):
0===m.indexOf("data:application/octet-stream;base64,")}function ie(){try{if(Ab)return new Uint8Array(Ab);if(Yb)return Yb(Ma);throw"both async and sync fetching of the wasm failed";}catch(m){Xa(m)}}function Nf(){return Ab||!Zb&&!Na||"function"!==typeof fetch?new Promise(function(m,a){m(ie())}):fetch(Ma,{credentials:"same-origin"}).then(function(m){if(!m.ok)throw"failed to load wasm binary file at '"+Ma+"'";return m.arrayBuffer()}).catch(function(){return ie()})}function je(){Xa()}function Mc(m,a,e,
d,c){var g=G[m+8>>2];if(g){var u=oa(g),b=m+112,p=oa(b);p||(p="GET");var z=G[b+52>>2],w=G[b+56>>2],y=!!G[b+60>>2],f=G[b+68>>2],v=G[b+72>>2];g=G[b+76>>2];var ya=G[b+80>>2],h=G[b+84>>2];b=G[b+88>>2];var k=!!(z&1),l=!!(z&2);z=!!(z&64);f=f?oa(f):void 0;v=v?oa(v):void 0;var n=ya?oa(ya):void 0,C=new XMLHttpRequest;C.withCredentials=y;C.open(p,u,!z,f,v);z||(C.timeout=w);C.url_=u;C.responseType="arraybuffer";ya&&C.overrideMimeType(n);if(g)for(;;){p=G[g>>2];if(!p)break;u=G[g+4>>2];if(!u)break;g+=8;p=oa(p);
u=oa(u);C.setRequestHeader(p,u)}N.xhrs.push(C);G[m+0>>2]=N.xhrs.length;g=h&&b?I.slice(h,h+b):null;C.onload=function(c){var g=C.response?C.response.byteLength:0,d=0,u=0;k&&!l&&(u=g,d=ac(u),I.set(new Uint8Array(C.response),d));G[m+12>>2]=d;N.setu64(m+16,u);N.setu64(m+24,0);g&&N.setu64(m+32,g);T[m+40>>1]=C.readyState;4===C.readyState&&0===C.status&&(C.status=0<g?200:404);T[m+42>>1]=C.status;C.statusText&&Da(C.statusText,I,m+44,64);200<=C.status&&300>C.status?a&&a(m,C,c):e&&e(m,C,c)};C.onerror=function(a){var c=
C.status;4===C.readyState&&0===c&&(c=404);G[m+12>>2]=0;N.setu64(m+16,0);N.setu64(m+24,0);N.setu64(m+32,0);T[m+40>>1]=C.readyState;T[m+42>>1]=c;e&&e(m,C,a)};C.ontimeout=function(a){e&&e(m,C,a)};C.onprogress=function(a){var c=k&&l&&C.response?C.response.byteLength:0,g=0;k&&l&&(g=ac(c),I.set(new Uint8Array(C.response),g));G[m+12>>2]=g;N.setu64(m+16,c);N.setu64(m+24,a.loaded-c);N.setu64(m+32,a.total);T[m+40>>1]=C.readyState;3<=C.readyState&&0===C.status&&0<a.loaded&&(C.status=200);T[m+42>>1]=C.status;
C.statusText&&Da(C.statusText,I,m+44,64);d&&d(m,C,a)};C.onreadystatechange=function(a){T[m+40>>1]=C.readyState;2<=C.readyState&&(T[m+42>>1]=C.status);c&&c(m,C,a)};try{C.send(g)}catch(Pc){e&&e(m,C,Pc)}}else e(m,0,"no url specified!")}function ke(m,a,e,d,c){if(m){var g=G[a+112+64>>2];g||(g=G[a+8>>2]);var u=oa(g);try{var b=m.transaction(["FILES"],"readwrite").objectStore("FILES").put(e,u);b.onsuccess=function(m){T[a+40>>1]=4;T[a+42>>1]=200;Da("OK",I,a+44,64);d(a,0,u)};b.onerror=function(m){T[a+40>>1]=
4;T[a+42>>1]=413;Da("Payload Too Large",I,a+44,64);c(a,0,m)}}catch(p){c(a,0,p)}}else c(a,0,"IndexedDB not available!")}function Of(m,a,e,d){if(m){var c=G[a+112+64>>2];c||(c=G[a+8>>2]);c=oa(c);try{var g=m.transaction(["FILES"],"readonly").objectStore("FILES").get(c);g.onsuccess=function(m){if(m.target.result){m=m.target.result;var c=m.byteLength||m.length,g=ac(c);I.set(new Uint8Array(m),g);G[a+12>>2]=g;N.setu64(a+16,c);N.setu64(a+24,0);N.setu64(a+32,c);T[a+40>>1]=4;T[a+42>>1]=200;Da("OK",I,a+44,64);
e(a,0,m)}else T[a+40>>1]=4,T[a+42>>1]=404,Da("Not Found",I,a+44,64),d(a,0,"no data")};g.onerror=function(m){T[a+40>>1]=4;T[a+42>>1]=404;Da("Not Found",I,a+44,64);d(a,0,m)}}catch(u){d(a,0,u)}}else d(a,0,"IndexedDB not available!")}function Pf(m,a,e,d){if(m){var c=G[a+112+64>>2];c||(c=G[a+8>>2]);c=oa(c);try{var g=m.transaction(["FILES"],"readwrite").objectStore("FILES").delete(c);g.onsuccess=function(m){m=m.target.result;G[a+12>>2]=0;N.setu64(a+16,0);N.setu64(a+24,0);N.setu64(a+32,0);T[a+40>>1]=4;T[a+
42>>1]=200;Da("OK",I,a+44,64);e(a,0,m)};g.onerror=function(m){T[a+40>>1]=4;T[a+42>>1]=404;Da("Not Found",I,a+44,64);d(a,0,m)}}catch(u){d(a,0,u)}}else d(a,0,"IndexedDB not available!")}function bc(m,a){bc.array||(bc.array=[]);var e=bc.array;e.length=0;for(var d;d=I[m++];)100===d||102===d?(a=a+7&-8,e.push(ee[a>>3]),a+=8):(a=a+3&-4,e.push(Va[a>>2]),a+=4);return e}function Rc(m){this.name="ExitStatus";this.message="Program terminated with exit("+m+")";this.status=m}function Sc(m){function a(){if(!cc&&
(cc=!0,!Lc)){Xb(le);Xb(Qf);if(b.onRuntimeInitialized)b.onRuntimeInitialized();if(me){var a=b._main;try{var m=a(0,0);if(!Ya||0!==m){if(!Ya&&(Lc=!0,b.onExit))b.onExit(m);Bb(m,new Rc(m))}}catch(c){c instanceof Rc||("unwind"==c?Ya=!0:((a=c)&&"object"===typeof c&&c.stack&&(a=[c,c.stack]),La("exception thrown: "+a),Bb(1,c)))}finally{}}if(b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;)ne.unshift(b.postRun.shift());Xb(ne)}}if(!(0<Wa)){if(b.preRun)for("function"==typeof b.preRun&&
(b.preRun=[b.preRun]);b.preRun.length;)oe.unshift(b.preRun.shift());Xb(oe);0<Wa||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1);a()},1)):a())}}function Rf(){var m,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(navigator.gpu.requestAdapter(),2);if(3!=e.nextAddress)return m=e.yieldResult,e.yield(m.requestDevice(),3);a=e.yieldResult;x(m,a);e.jumpToEnd()})}var Tf=function(){(function(m){"object"===
typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SimpleWebRTC=m()})(function(){return function c(a,e,d){function g(b,z){if(!e[b]){if(!a[b]){var p="function"==typeof require&&require;if(!z&&p)return p(b,!0);if(u)return u(b,!0);z=Error("Cannot find module '"+b+"'");throw z.code="MODULE_NOT_FOUND",z;}z=e[b]={exports:{}};a[b][0].call(z.exports,
function(c){var d=a[b][1][c];return g(d?d:c)},z,z.exports,c,a,e,d)}return e[b].exports}for(var u="function"==typeof require&&require,b=0;b<d.length;b++)g(d[b]);return g}({1:[function(a,e,d){function c(){}e.exports=function(a,d,e){function g(a,c){if(0>=g.count)throw Error("after called too many times");--g.count;a?(u=!0,d(a),d=e):0!==g.count||u||d(null,c)}var u=!1;e=e||c;g.count=a;return 0===a?d():g}},{}],2:[function(a,e,d){e.exports=function(a,g,d){var c=a.byteLength;g=g||0;d=d||c;if(a.slice)return a.slice(g,
d);0>g&&(g+=c);0>d&&(d+=c);d>c&&(d=c);if(g>=c||g>=d||0===c)return new ArrayBuffer(0);a=new Uint8Array(a);c=new Uint8Array(d-g);for(var e=0;g<d;g++,e++)c[e]=a[g];return c.buffer}},{}],3:[function(a,e,d){e.exports=function(a,g,d){var c,e=g;g={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(d)for(c in d)g[c]=d[c];e?"audio"===e.tagName.toLowerCase()&&(g.audio=!0):e=document.createElement(g.audio?"audio":"video");g.disableContextMenu&&(e.oncontextmenu=function(a){a.preventDefault()});
g.autoplay&&(e.autoplay="autoplay");g.muted&&(e.muted=!0);!g.audio&&g.mirror&&["","moz","webkit","o","ms"].forEach(function(a){e.style[a?a+"Transform":"transform"]="scaleX(-1)"});e.srcObject=a;return e}},{}],4:[function(a,e,d){function c(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}e.exports=c;c.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var c=Math.random(),
d=Math.floor(c*this.jitter*a);a=0==(Math.floor(10*c)&1)?a-d:a+d}return Math.min(a,this.max)|0};c.prototype.reset=function(){this.attempts=0};c.prototype.setMin=function(a){this.ms=a};c.prototype.setMax=function(a){this.max=a};c.prototype.setJitter=function(a){this.jitter=a}},{}],5:[function(a,e,d){(function(a){d.encode=function(c){c=new Uint8Array(c);var g,d=c.length,e="";for(g=0;g<d;g+=3)e+=a[c[g]>>2],e+=a[(c[g]&3)<<4|c[g+1]>>4],e+=a[(c[g+1]&15)<<2|c[g+2]>>6],e+=a[c[g+2]&63];2===d%3?e=e.substring(0,
e.length-1)+"=":1===d%3&&(e=e.substring(0,e.length-2)+"==");return e};d.decode=function(c){var d=.75*c.length,g=c.length,e=0;"="===c[c.length-1]&&(d--,"="===c[c.length-2]&&d--);var b=new ArrayBuffer(d),w=new Uint8Array(b);for(d=0;d<g;d+=4){var y=a.indexOf(c[d]);var f=a.indexOf(c[d+1]);var v=a.indexOf(c[d+2]);var ya=a.indexOf(c[d+3]);w[e++]=y<<2|f>>4;w[e++]=(f&15)<<4|v>>2;w[e++]=(v&3)<<6|ya&63}return b}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],6:[function(a,e,d){(function(a){function c(a){for(var c=
0;c<a.length;c++){var d=a[c];if(d.buffer instanceof ArrayBuffer){var g=d.buffer;if(d.byteLength!==g.byteLength){var e=new Uint8Array(d.byteLength);e.set(new Uint8Array(g,d.byteOffset,d.byteLength));g=e.buffer}a[c]=g}}}function d(a,d){d=d||{};var g=new p;c(a);for(var e=0;e<a.length;e++)g.append(a[e]);return d.type?g.getBlob(d.type):g.getBlob()}function b(a,d){c(a);return new Blob(a,d||{})}var p=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder;try{var z=2===(new Blob(["hi"])).size}catch(P){z=
!1}var w;if(w=z)try{w=2===(new Blob([new Uint8Array([1,2])])).size}catch(P){w=!1}var y=p&&p.prototype.append&&p.prototype.getBlob;a=z?w?a.Blob:b:y?d:void 0;e.exports=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],7:[function(a,e,d){var c=[].slice;e.exports=function(a,d){"string"==typeof d&&(d=a[d]);if("function"!=typeof d)throw Error("bind() requires a function");var g=c.call(arguments,2);return function(){return d.apply(a,
g.concat(c.call(arguments)))}}},{}],8:[function(a,e,d){function c(a){if(a){for(var d in c.prototype)a[d]=c.prototype[d];return a}}e.exports=c;c.prototype.on=c.prototype.addEventListener=function(a,c){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(c);return this};c.prototype.once=function(a,c){function d(){g.off(a,d);c.apply(this,arguments)}var g=this;this._callbacks=this._callbacks||{};d.fn=c;this.on(a,d);return this};c.prototype.off=c.prototype.removeListener=
c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,c){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks[a];if(!d)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var g,e=0;e<d.length;e++)if(g=d[e],g===c||g.fn===c){d.splice(e,1);break}return this};c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var c=[].slice.call(arguments,1),d=this._callbacks[a];if(d){d=d.slice(0);for(var g=
0,e=d.length;g<e;++g)d[g].apply(this,c)}return this};c.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],9:[function(a,e,d){e.exports=function(a,d){var c=function(){};c.prototype=d.prototype;a.prototype=new c;a.prototype.constructor=a}},{}],10:[function(a,e,d){function c(a){return c.enabled(a)?function(d){d instanceof Error&&(d=d.stack||d.message);var g=new Date,e=g-(c[a]||
g);c[a]=g;d=a+" "+d+" +"+c.humanize(e);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}e.exports=c;c.names=[];c.skips=[];c.enable=function(a){try{localStorage.debug=a}catch(z){}for(var d=(a||"").split(/[\s,]+/),g=d.length,e=0;e<g;e++)a=d[e].replace("*",".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$"))};c.disable=function(){c.enable("")};c.humanize=function(a){return 36E5<=a?(a/36E5).toFixed(1)+
"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=a?(a/1E3|0)+"s":a+"ms"};c.enabled=function(a){for(var d=0,g=c.skips.length;d<g;d++)if(c.skips[d].test(a))return!1;d=0;for(g=c.names.length;d<g;d++)if(c.names[d].test(a))return!0;return!1};try{window.localStorage&&c.enable(localStorage.debug)}catch(g){}},{}],11:[function(a,e,d){e.exports=a("./lib/")},{"./lib/":12}],12:[function(a,e,d){e.exports=a("./socket");e.exports.parser=a("engine.io-parser")},{"./socket":13,"engine.io-parser":24}],13:[function(a,e,d){(function(c){function d(a,
g){if(!(this instanceof d))return new d(a,g);g=g||{};a&&"object"==typeof a&&(g=a,a=null);a&&(a=y(a),g.host=a.host,g.secure="https"==a.protocol||"wss"==a.protocol,g.port=a.port,a.query&&(g.query=a.query));this.secure=null!=g.secure?g.secure:c.location&&"https:"==location.protocol;g.host&&(a=g.host.split(":"),g.hostname=a.shift(),a.length?g.port=a.pop():g.port||(g.port=this.secure?"443":"80"));this.agent=g.agent||!1;this.hostname=g.hostname||(c.location?location.hostname:"localhost");this.port=g.port||
(c.location&&location.port?location.port:this.secure?443:80);this.query=g.query||{};"string"==typeof this.query&&(this.query=v.decode(this.query));this.upgrade=!1!==g.upgrade;this.path=(g.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!g.forceJSONP;this.jsonp=!1!==g.jsonp;this.forceBase64=!!g.forceBase64;this.enablesXDR=!!g.enablesXDR;this.timestampParam=g.timestampParam||"t";this.timestampRequests=g.timestampRequests;this.transports=g.transports||["polling","websocket"];this.readyState=
"";this.writeBuffer=[];this.callbackBuffer=[];this.policyPort=g.policyPort||843;this.rememberUpgrade=g.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=g.onlyBinaryUpgrades;this.pfx=g.pfx||null;this.key=g.key||null;this.passphrase=g.passphrase||null;this.cert=g.cert||null;this.ca=g.ca||null;this.ciphers=g.ciphers||null;this.rejectUnauthorized=g.rejectUnauthorized||null;this.open()}var b=a("./transports"),f=a("component-emitter"),p=a("debug")("engine.io-client:socket"),z=a("indexof"),
w=a("engine.io-parser"),y=a("parseuri"),P=a("parsejson"),v=a("parseqs");e.exports=d;d.priorWebsocketSuccess=!1;f(d.prototype);d.protocol=w.protocol;d.Socket=d;d.Transport=a("./transport");d.transports=a("./transports");d.parser=a("engine.io-parser");d.prototype.createTransport=function(a){p('creating transport "%s"',a);var c=this.query,d={},g;for(g in c)c.hasOwnProperty(g)&&(d[g]=c[g]);d.EIO=w.protocol;d.transport=a;this.id&&(d.sid=this.id);return new b[a]({agent:this.agent,hostname:this.hostname,
port:this.port,secure:this.secure,path:this.path,query:d,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})};d.prototype.open=function(){if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))var a=
"websocket";else{if(0==this.transports.length){var c=this;setTimeout(function(){c.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(Nc){this.transports.shift();this.open();return}a.open();this.setTransport(a)};d.prototype.setTransport=function(a){p("setting transport %s",a.name);var c=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;
a.on("drain",function(){c.onDrain()}).on("packet",function(a){c.onPacket(a)}).on("error",function(a){c.onError(a)}).on("close",function(){c.onClose("transport close")})};d.prototype.probe=function(a){function c(){if(f.onlyBinaryUpgrades){var c=!this.supportsBinary&&f.transport.supportsBinary;y=y||c}y||(p('probe transport "%s" opened',a),z.send([{type:"ping",data:"probe"}]),z.once("packet",function(c){y||("pong"==c.type&&"probe"==c.data?(p('probe transport "%s" pong',a),f.upgrading=!0,f.emit("upgrading",
z),z&&(d.priorWebsocketSuccess="websocket"==z.name,p('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){y||"closed"==f.readyState||(p("changing transport and sending upgrade packet"),v(),f.setTransport(z),z.send([{type:"upgrade"}]),f.emit("upgrade",z),z=null,f.upgrading=!1,f.flush())}))):(p('probe transport "%s" failed',a),c=Error("probe error"),c.transport=z.name,f.emit("upgradeError",c)))}))}function g(){y||(y=!0,v(),z.close(),z=null)}function e(c){var d=Error("probe error: "+
c);d.transport=z.name;g();p('probe transport "%s" failed because of error: %s',a,c);f.emit("upgradeError",d)}function b(){e("transport closed")}function u(){e("socket closed")}function w(a){z&&a.name!=z.name&&(p('"%s" works - aborting "%s"',a.name,z.name),g())}function v(){z.removeListener("open",c);z.removeListener("error",e);z.removeListener("close",b);f.removeListener("close",u);f.removeListener("upgrading",w)}p('probing transport "%s"',a);var z=this.createTransport(a,{probe:1}),y=!1,f=this;d.priorWebsocketSuccess=
!1;z.once("open",c);z.once("error",e);z.once("close",b);this.once("close",u);this.once("upgrading",w);z.open()};d.prototype.onOpen=function(){p("socket open");this.readyState="open";d.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var a=0,c=this.upgrades.length;a<c;a++)this.probe(this.upgrades[a])}};d.prototype.onPacket=function(a){if("opening"==this.readyState||
"open"==this.readyState)switch(p('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(P(a.data));break;case "pong":this.setPing();break;case "error":var c=Error("server error");c.code=a.data;this.emit("error",c);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else p('packet received with socket readyState "%s"',this.readyState)};d.prototype.onHandshake=function(a){this.emit("handshake",a);
this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var c=this;c.pingTimeoutTimer=setTimeout(function(){if("closed"!=c.readyState)c.onClose("ping timeout")},a||c.pingInterval+c.pingTimeout)};
d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};d.prototype.ping=function(){this.sendPacket("ping")};d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)if(this.callbackBuffer[a])this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);
this.prevBufferLen=0;0==this.writeBuffer.length?this.emit("drain"):this.flush()};d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};d.prototype.write=d.prototype.send=function(a,c){this.sendPacket("message",a,c);return this};d.prototype.sendPacket=function(a,c,d){"closing"!=
this.readyState&&"closed"!=this.readyState&&(a={type:a,data:c},this.emit("packetCreate",a),this.writeBuffer.push(a),this.callbackBuffer.push(d),this.flush())};d.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){var a=function(){g.once("upgrade",c);g.once("upgradeError",c)},c=function(){g.removeListener("upgrade",c);g.removeListener("upgradeError",c);d()},d=function(){g.onClose("forced close");p("socket closing - telling transport to close");g.transport.close()};this.readyState=
"closing";var g=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?a():d()});else this.upgrading?a():d()}return this};d.prototype.onError=function(a){p("socket error %j",a);d.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};d.prototype.onClose=function(a,c){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){p('socket close with reason: "%s"',a);var d=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);
setTimeout(function(){d.writeBuffer=[];d.callbackBuffer=[];d.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",a,c)}};d.prototype.filterUpgrades=function(a){for(var c=[],d=0,g=a.length;d<g;d++)~z(this.transports,a[d])&&c.push(a[d]);return c}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./transport":14,
"./transports":15,"component-emitter":8,debug:21,"engine.io-parser":24,indexof:32,parsejson:40,parseqs:41,parseuri:23}],14:[function(a,e,d){function c(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;
this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized}var g=a("engine.io-parser");a=a("component-emitter");e.exports=c;a(c.prototype);c.timestamps=0;c.prototype.onError=function(a,c){a=Error(a);a.type="TransportError";a.description=c;this.emit("error",a);return this};c.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};c.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),
this.onClose();return this};c.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};c.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};c.prototype.onData=function(a){a=g.decodePacket(a,this.socket.binaryType);this.onPacket(a)};c.prototype.onPacket=function(a){this.emit("packet",a)};c.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":8,"engine.io-parser":24}],15:[function(a,
e,d){(function(c){var g=a("xmlhttprequest"),e=a("./polling-xhr"),b=a("./polling-jsonp"),p=a("./websocket");d.polling=function(a){var d=!1,p=!1,u=!1!==a.jsonp;c.location&&(p="https:"==location.protocol,(d=location.port)||(d=p?443:80),d=a.hostname!=location.hostname||d!=a.port,p=a.secure!=p);a.xdomain=d;a.xscheme=p;if("open"in new g(a)&&!a.forceJSONP)return new e(a);if(!u)throw Error("JSONP disabled");return new b(a)};d.websocket=p}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(a,e,d){(function(c){function d(){}function b(a){f.call(this,a);this.query=this.query||{};y||(c.___eio||(c.___eio=[]),y=c.___eio);this.index=y.length;var g=this;y.push(function(a){g.onData(a)});this.query.j=this.index;c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){g.script&&(g.script.onerror=d)},!1)}var f=a("./polling"),p=a("component-inherit");
e.exports=b;var z=/\n/g,w=/\\n/g,y;p(b,f);b.prototype.supportsBinary=!1;b.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);f.prototype.doClose.call(this)};b.prototype.doPoll=function(){var a=this,c=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);c.async=!0;c.src=this.uri();c.onerror=function(c){a.onError("jsonp poll error",
c)};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);this.script=c;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};b.prototype.doWrite=function(a,c){function d(){g();c()}function g(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(Qc){e.onError("jsonp polling iframe removal error",Qc)}try{v=document.createElement('<iframe src="javascript:0" name="'+
e.iframeId+'">')}catch(Qc){v=document.createElement("iframe"),v.name=e.iframeId,v.src="javascript:0"}v.id=e.iframeId;e.form.appendChild(v);e.iframe=v}var e=this;if(!this.form){var b=document.createElement("form"),p=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index,v;b.className="socketio";b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.target=u;b.method="POST";b.setAttribute("accept-charset","utf-8");p.name="d";b.appendChild(p);document.body.appendChild(b);
this.form=b;this.area=p}this.form.action=this.uri();g();a=a.replace(w,"\\\n");this.area.value=a.replace(z,"\\n");try{this.form.submit()}catch(Qc){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==e.iframe.readyState&&d()}:this.iframe.onload=d}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-inherit":9}],17:[function(a,e,d){(function(c){function d(){}function b(a){w.call(this,
a);if(c.location){var d="https:"==location.protocol,g=location.port;g||(g=d?443:80);this.xd=a.hostname!=c.location.hostname||g!=a.port;this.xs=a.secure!=d}}function f(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;
this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.create()}function p(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var z=a("xmlhttprequest"),w=a("./polling"),y=a("component-emitter"),P=a("component-inherit"),v=a("debug")("engine.io-client:polling-xhr");e.exports=b;e.exports.Request=f;P(b,w);b.prototype.supportsBinary=!0;b.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||!1;a.supportsBinary=
this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;return new f(a)};b.prototype.doWrite=function(a,c){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var d=this;a.on("success",c);a.on("error",function(a){d.onError("xhr post error",a)});this.sendXhr=a};b.prototype.doPoll=function(){v("xhr poll");var a=this.request(),
c=this;a.on("data",function(a){c.onData(a)});a.on("error",function(a){c.onError("xhr poll error",a)});this.pollXhr=a};y(f.prototype);f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new z(a),g=this;try{v("xhr open %s: %s",this.method,this.uri);d.open(this.method,this.uri,
this.async);this.supportsBinary&&(d.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Oc){}"withCredentials"in d&&(d.withCredentials=!0);this.hasXDR()?(d.onload=function(){g.onLoad()},d.onerror=function(){g.onError(d.responseText)}):d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status||1223==d.status)g.onLoad();else setTimeout(function(){g.onError(d.status)},
0)};v("xhr data %s",this.data);d.send(this.data)}catch(Oc){setTimeout(function(){g.onError(Oc)},0);return}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)};f.prototype.onSuccess=function(){this.emit("success");this.cleanup()};f.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};f.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=
d:this.xhr.onreadystatechange=d;if(a)try{this.xhr.abort()}catch($b){}c.document&&delete f.requests[this.index];this.xhr=null}};f.prototype.onLoad=function(){try{try{var a=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(Nc){}var c="application/octet-stream"===a?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(Nc){this.onError(Nc)}if(null!=c)this.onData(c)};f.prototype.hasXDR=function(){return"undefined"!==typeof c.XDomainRequest&&!this.xs&&this.enablesXDR};f.prototype.abort=
function(){this.cleanup()};c.document&&(f.requestsCount=0,f.requests={},c.attachEvent?c.attachEvent("onunload",p):c.addEventListener&&c.addEventListener("beforeunload",p,!1))}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-emitter":8,"component-inherit":9,debug:21,xmlhttprequest:20}],18:[function(a,e,d){function c(a){var c=a&&a.forceBase64;if(!z||c)this.supportsBinary=!1;g.call(this,a)}var g=a("../transport"),
b=a("parseqs"),f=a("engine.io-parser");d=a("component-inherit");var p=a("debug")("engine.io-client:polling");e.exports=c;var z=null!=(new (a("xmlhttprequest"))({xdomain:!1})).responseType;d(c,g);c.prototype.name="polling";c.prototype.doOpen=function(){this.poll()};c.prototype.pause=function(a){function c(){p("paused");d.readyState="paused";a()}var d=this;this.readyState="pausing";if(this.polling||!this.writable){var g=0;this.polling&&(p("we are currently polling - waiting to pause"),g++,this.once("pollComplete",
function(){p("pre-pause polling complete");--g||c()}));this.writable||(p("we are currently writing - waiting to pause"),g++,this.once("drain",function(){p("pre-pause writing complete");--g||c()}))}else c()};c.prototype.poll=function(){p("polling");this.polling=!0;this.doPoll();this.emit("poll")};c.prototype.onData=function(a){var c=this;p("polling got data %s",a);f.decodePayload(a,this.socket.binaryType,function(a,d,g){if("opening"==c.readyState)c.onOpen();if("close"==a.type)return c.onClose(),!1;
c.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))};c.prototype.doClose=function(){function a(){p("writing close packet");c.write([{type:"close"}])}var c=this;"open"==this.readyState?(p("transport open - closing"),a()):(p("transport not open - deferring close"),this.once("open",a))};c.prototype.write=function(a){var c=this;this.writable=!1;var d=function(){c.writable=!0;
c.emit("drain")};c=this;f.encodePayload(a,this.supportsBinary,function(a){c.doWrite(a,d)})};c.prototype.uri=function(){var a=this.query||{},c=this.secure?"https":"http",d="";!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+g.timestamps++);this.supportsBinary||a.sid||(a.b64=1);a=b.encode(a);this.port&&("https"==c&&443!=this.port||"http"==c&&80!=this.port)&&(d=":"+this.port);a.length&&(a="?"+a);return c+"://"+this.hostname+d+this.path+a}},{"../transport":14,"component-inherit":9,debug:21,
"engine.io-parser":24,parseqs:41,xmlhttprequest:20}],19:[function(a,e,d){function c(a){a&&a.forceBase64&&(this.supportsBinary=!1);g.call(this,a)}var g=a("../transport"),b=a("engine.io-parser"),f=a("parseqs");d=a("component-inherit");var p=a("debug")("engine.io-client:websocket"),z=a("ws");e.exports=c;d(c,g);c.prototype.name="websocket";c.prototype.supportsBinary=!0;c.prototype.doOpen=function(){if(this.check()){var a=this.uri(),c={agent:this.agent};c.pfx=this.pfx;c.key=this.key;c.passphrase=this.passphrase;
c.cert=this.cert;c.ca=this.ca;c.ciphers=this.ciphers;c.rejectUnauthorized=this.rejectUnauthorized;this.ws=new z(a,void 0,c);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.binaryType="arraybuffer";this.addEventListeners()}};c.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(c){a.onData(c.data)};this.ws.onerror=function(c){a.onError("websocket error",c)}};"undefined"!=typeof navigator&&
/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(c.prototype.onData=function(a){var c=this;setTimeout(function(){g.prototype.onData.call(c,a)},0)});c.prototype.write=function(a){var c=this;this.writable=!1;for(var d=0,g=a.length;d<g;d++)b.encodePacket(a[d],this.supportsBinary,function(a){try{c.ws.send(a)}catch($b){p("websocket closed before onclose event")}});setTimeout(function(){c.writable=!0;c.emit("drain")},0)};c.prototype.onClose=function(){g.prototype.onClose.call(this)};c.prototype.doClose=
function(){"undefined"!==typeof this.ws&&this.ws.close()};c.prototype.uri=function(){var a=this.query||{},c=this.secure?"wss":"ws",d="";this.port&&("wss"==c&&443!=this.port||"ws"==c&&80!=this.port)&&(d=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=+new Date);this.supportsBinary||(a.b64=1);a=f.encode(a);a.length&&(a="?"+a);return c+"://"+this.hostname+d+this.path+a};c.prototype.check=function(){return!!z&&!("__initialize"in z&&this.name===c.prototype.name)}},{"../transport":14,"component-inherit":9,
debug:21,"engine.io-parser":24,parseqs:41,ws:66}],20:[function(a,e,d){var c=a("has-cors");e.exports=function(a){var d=a.xdomain,g=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!d||c))return new XMLHttpRequest}catch(p){}try{if("undefined"!=typeof XDomainRequest&&!g&&a)return new XDomainRequest}catch(p){}if(!d)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(p){}}},{"has-cors":31}],21:[function(a,e,d){function c(){try{var a=localStorage.debug}catch(u){}return a}d=e.exports=
a("./debug");d.log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)};d.formatArgs=function(){var a=arguments,c=this.useColors;a[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+a[0]+(c?"%c ":" ")+"+"+d.humanize(this.diff);if(!c)return a;c="color: "+this.color;a=[a[0],c,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,b=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(b=e))});a.splice(b,
0,c);return a};d.save=function(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(u){}};d.load=c;d.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};d.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");d.formatters.j=function(a){return JSON.stringify(a)};d.enable(c())},
{"./debug":22}],22:[function(a,e,d){d=e.exports=function(a){function e(){}function b(){var a=+new Date;b.diff=a-(g||a);b.prev=g;g=b.curr=a;null==b.useColors&&(b.useColors=d.useColors());null==b.color&&b.useColors&&(b.color=d.colors[c++%d.colors.length]);var e=Array.prototype.slice.call(arguments);e[0]=d.coerce(e[0]);"string"!==typeof e[0]&&(e=["%o"].concat(e));var p=0;e[0]=e[0].replace(/%([a-z%])/g,function(a,c){if("%%"===a)return a;p++;c=d.formatters[c];"function"===typeof c&&(a=c.call(b,e[p]),e.splice(p,
1),p--);return a});"function"===typeof d.formatArgs&&(e=d.formatArgs.apply(b,e));(b.log||d.log||console.log.bind(console)).apply(b,e)}e.enabled=!1;b.enabled=!0;var u=d.enabled(a)?b:e;u.namespace=a;return u};d.coerce=function(a){return a instanceof Error?a.stack||a.message:a};d.disable=function(){d.enable("")};d.enable=function(a){d.save(a);for(var c=(a||"").split(/[\s,]+/),g=c.length,e=0;e<g;e++)c[e]&&(a=c[e].replace(/\*/g,".*?"),"-"===a[0]?d.skips.push(new RegExp("^"+a.substr(1)+"$")):d.names.push(new RegExp("^"+
a+"$")))};d.enabled=function(a){var c;var g=0;for(c=d.skips.length;g<c;g++)if(d.skips[g].test(a))return!1;g=0;for(c=d.names.length;g<c;g++)if(d.names[g].test(a))return!0;return!1};d.humanize=a("ms");d.names=[];d.skips=[];d.formatters={};var c=0,g},{ms:38}],23:[function(a,e,d){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(a){var d=a,e=a.indexOf("["),b=a.indexOf("]");-1!=e&&-1!=b&&(a=a.substring(0,e)+a.substring(e,b).replace(/:/g,";")+a.substring(b,a.length));a=c.exec(a||"");for(var f={},u=14;u--;)f[g[u]]=a[u]||"";-1!=e&&-1!=b&&(f.source=d,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=
!0);return f}},{}],24:[function(a,e,d){(function(c){function g(a,c,g){if(!c)return d.encodeBase64Packet(a,g);var e=new FileReader;e.onload=function(){a.data=e.result;d.encodePacket(a,c,!0,g)};return e.readAsArrayBuffer(a.data)}function e(a,c,d){var g=Array(a.length);d=y(a.length,d);for(var e=function(a,d,e){c(d,function(c,d){g[a]=d;e(c,g)})},b=0;b<a.length;b++)e(b,a[b],d)}var b=a("./keys"),p=a("has-binary"),f=a("arraybuffer.slice"),w=a("base64-arraybuffer"),y=a("after"),h=a("utf8"),v=navigator.userAgent.match(/Android/i),
ya=/PhantomJS/i.test(navigator.userAgent),k=v||ya;d.protocol=3;var l=d.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},n=b(l),ba={type:"error",data:"parser error"},C=a("blob");d.encodePacket=function(a,e,b,p){"function"==typeof e&&(p=e,e=!1);"function"==typeof b&&(p=b,b=null);var f=void 0===a.data?void 0:a.data.buffer||a.data;if(c.ArrayBuffer&&f instanceof ArrayBuffer){if(e){b=a.data;e=new Uint8Array(b);b=new Uint8Array(1+b.byteLength);b[0]=l[a.type];for(a=0;a<e.length;a++)b[a+1]=
e[a];a=p(b.buffer)}else a=d.encodeBase64Packet(a,p);return a}if(C&&f instanceof c.Blob)return e?k?a=g(a,e,p):(e=new Uint8Array(1),e[0]=l[a.type],a=new C([e.buffer,a.data]),a=p(a)):a=d.encodeBase64Packet(a,p),a;if(f&&f.base64)return p("b"+d.packets[a.type]+a.data.data);e=l[a.type];void 0!==a.data&&(e+=b?h.encode(String(a.data)):String(a.data));return p(""+e)};d.encodeBase64Packet=function(a,e){var g="b"+d.packets[a.type];if(C&&a.data instanceof C){var b=new FileReader;b.onload=function(){var a=b.result.split(",")[1];
e(g+a)};return b.readAsDataURL(a.data)}try{var p=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(Zg){a=new Uint8Array(a.data);p=Array(a.length);for(var f=0;f<a.length;f++)p[f]=a[f];p=String.fromCharCode.apply(null,p)}g+=c.btoa(p);return e(g)};d.decodePacket=function(a,c,g){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return d.decodeBase64Packet(a.substr(1),c);if(g)try{a=h.decode(a)}catch(Yg){return ba}g=a.charAt(0);return Number(g)==g&&n[g]?1<a.length?{type:n[g],data:a.substring(1)}:
{type:n[g]}:ba}g=(new Uint8Array(a))[0];a=f(a,1);C&&"blob"===c&&(a=new C([a]));return{type:n[g],data:a}};d.decodeBase64Packet=function(a,d){var g=n[a.charAt(0)];if(!c.ArrayBuffer)return{type:g,data:{base64:!0,data:a.substr(1)}};a=w.decode(a.substr(1));"blob"===d&&C&&(a=new C([a]));return{type:g,data:a}};d.encodePayload=function(a,c,g){"function"==typeof c&&(g=c,c=null);var b=p(a);if(c&&b)return C&&!k?d.encodePayloadAsBlob(a,g):d.encodePayloadAsArrayBuffer(a,g);if(!a.length)return g("0:");e(a,function(a,
g){d.encodePacket(a,b?c:!1,!0,function(a){g(null,a.length+":"+a)})},function(a,c){return g(c.join(""))})};d.decodePayload=function(a,c,g){if("string"!=typeof a)return d.decodePayloadAsBinary(a,c,g);"function"===typeof c&&(g=c,c=null);if(""==a)return g(ba,0,1);var e="";for(var b,p,f=0,u=a.length;f<u;f++)if(p=a.charAt(f),":"!=p)e+=p;else{if(""==e||e!=(b=Number(e)))return g(ba,0,1);p=a.substr(f+1,b);if(e!=p.length)return g(ba,0,1);if(p.length){e=d.decodePacket(p,c,!0);if(ba.type==e.type&&ba.data==e.data)return g(ba,
0,1);if(!1===g(e,f+b,u))return}f+=b;e=""}if(""!=e)return g(ba,0,1)};d.encodePayloadAsArrayBuffer=function(a,c){if(!a.length)return c(new ArrayBuffer(0));e(a,function(a,c){d.encodePacket(a,!0,!0,function(a){return c(null,a)})},function(a,d){a=d.reduce(function(a,c){c="string"===typeof c?c.length:c.byteLength;return a+c.toString().length+c+2},0);var g=new Uint8Array(a),e=0;d.forEach(function(a){var c="string"===typeof a,d=a;if(c){d=new Uint8Array(a.length);for(var b=0;b<a.length;b++)d[b]=a.charCodeAt(b);
d=d.buffer}c?g[e++]=0:g[e++]=1;a=d.byteLength.toString();for(b=0;b<a.length;b++)g[e++]=parseInt(a[b]);g[e++]=255;d=new Uint8Array(d);for(b=0;b<d.length;b++)g[e++]=d[b]});return c(g.buffer)})};d.encodePayloadAsBlob=function(a,c){e(a,function(a,c){d.encodePacket(a,!0,!0,function(a){var d=new Uint8Array(1);d[0]=1;if("string"===typeof a){for(var g=new Uint8Array(a.length),e=0;e<a.length;e++)g[e]=a.charCodeAt(e);a=g.buffer;d[0]=0}g=(a instanceof ArrayBuffer?a.byteLength:a.size).toString();var b=new Uint8Array(g.length+
1);for(e=0;e<g.length;e++)b[e]=parseInt(g[e]);b[g.length]=255;C&&(a=new C([d.buffer,b.buffer,a]),c(null,a))})},function(a,d){return c(new C(d))})};d.decodePayloadAsBinary=function(a,c,g){"function"===typeof c&&(g=c,c=null);for(var e=[],b=!1;0<a.byteLength;){for(var p=new Uint8Array(a),u=0===p[0],v="",w=1;255!=p[w];w++){if(310<v.length){b=!0;break}v+=p[w]}if(b)return g(ba,0,1);a=f(a,2+v.length);v=parseInt(v);p=f(a,0,v);if(u)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch($g){for(u=new Uint8Array(p),
p="",w=0;w<u.length;w++)p+=String.fromCharCode(u[w])}e.push(p);a=f(a,v)}var z=e.length;e.forEach(function(a,e){g(d.decodePacket(a,c,!0),e,z)})}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./keys":25,after:1,"arraybuffer.slice":2,"base64-arraybuffer":5,blob:6,"has-binary":30,utf8:60}],25:[function(a,e,d){e.exports=Object.keys||function(a){var c=[],d=Object.prototype.hasOwnProperty,e;for(e in a)d.call(a,e)&&c.push(e);return c}},
{}],26:[function(a,e,d){function c(a){b.call(this);a=a||{};this.config={chunksize:16384,pacing:0};for(var c in a)this.config[c]=a[c];this.channel=this.file=null}function g(){b.call(this);this.receiveBuffer=[];this.received=0;this.metadata={};this.channel=null}var b=a("wildemitter");a=a("util");a.inherits(c,b);c.prototype.send=function(a,c){var d=this;this.file=a;this.channel=c;var g="number"!==typeof c.bufferedAmountLowThreshold,e=0,b=function(){var p=new window.FileReader;p.onload=function(){return function(p){d.channel.send(p.target.result);
d.emit("progress",e,a.size,p.target.result);a.size>e+p.target.result.byteLength?g?window.setTimeout(b,d.config.pacing):c.bufferedAmount<=c.bufferedAmountLowThreshold&&window.setTimeout(b,0):(d.emit("progress",a.size,a.size,null),d.emit("sentFile"));e+=d.config.chunksize}}(a);var f=a.slice(e,e+d.config.chunksize);p.readAsArrayBuffer(f)};g||(c.bufferedAmountLowThreshold=8*this.config.chunksize,c.addEventListener("bufferedamountlow",b));window.setTimeout(b,0)};a.inherits(g,b);g.prototype.receive=function(a,
c){var d=this;a&&(this.metadata=a);this.channel=c;c.binaryType="arraybuffer";this.channel.onmessage=function(a){d.received+=a.data.byteLength;d.receiveBuffer.push(a.data);d.emit("progress",d.received,d.metadata.size,a.data);d.received===d.metadata.size?(d.emit("receivedFile",new window.Blob(d.receiveBuffer),d.metadata),d.receiveBuffer=[]):d.received>d.metadata.size&&(console.error("received more than expected, discarding..."),d.receiveBuffer=[])}};e.exports={};e.exports.support="undefined"!==typeof window&&
window&&window.File&&window.FileReader&&window.Blob;e.exports.Sender=c;e.exports.Receiver=g},{util:63,wildemitter:65}],27:[function(a,e,d){var c={};e.exports=function(a,d){var e=2===arguments.length,g=e?d:a;if("undefined"===typeof window||"http:"===window.location.protocol){var b=Error("NavigatorUserMediaError");b.name="HTTPS_REQUIRED";return g(b)}if(window.navigator.userAgent.match("Chrome")){var f=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),u=33,h=!window.chrome.webstore;window.navigator.userAgent.match("Linux")&&
(u=35);sessionStorage.getScreenMediaJSExtensionId?chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,function(c){c&&""!==c.sourceId?(a=e&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}},a.video.mandatory.chromeMediaSourceId=c.sourceId,window.navigator.mediaDevices.getUserMedia(a).then(function(a){g(null,a)}).catch(function(a){g(a)})):(c=Error("NavigatorUserMediaError"),
c.name="NotAllowedError",g(c))}):window.cefGetScreenMedia?window.cefGetScreenMedia(function(c){c?(a=e&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},a.video.mandatory.chromeMediaSourceId=c,window.navigator.mediaDevices.getUserMedia(a).then(function(a){g(null,a)}).catch(function(a){g(a)})):(c=Error("cefGetScreenMediaError"),c.name="CEF_GETSCREENMEDIA_CANCELED",
g(c))}):h||26<=f&&f<=u?(a=e&&a||{video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){g(null,a)}).catch(function(a){g(a)})):(f=window.setTimeout(function(){b=Error("NavigatorUserMediaError");b.name="EXTENSION_UNAVAILABLE";return g(b)},1E3),c[f]=[g,e?a:null],window.postMessage({type:"getScreen",id:f},"*"))}else window.navigator.userAgent.match("Firefox")&&
(33<=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10)?(a=e&&a||{video:{mozMediaSource:"window",mediaSource:"window"}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){g(null,a);var c=a.currentTime,d=window.setInterval(function(){a||window.clearInterval(d);if(a.currentTime==c&&(window.clearInterval(d),a.onended))a.onended();c=a.currentTime},500)}).catch(function(a){g(a)})):(b=Error("NavigatorUserMediaError"),b.name="EXTENSION_UNAVAILABLE"))};"undefined"!==typeof window&&
window.addEventListener("message",function(a){if(a.origin==window.location.origin)if("gotScreen"==a.data.type&&c[a.data.id]){var d=c[a.data.id],e=d[1],g=d[0];delete c[a.data.id];""===a.data.sourceId?(a=Error("NavigatorUserMediaError"),a.name="NotAllowedError",g(a)):(e=e||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},e.video.mandatory.chromeMediaSourceId=
a.data.sourceId,window.navigator.mediaDevices.getUserMedia(e).then(function(a){g(null,a)}).catch(function(a){g(a)}))}else"getScreenPending"==a.data.type&&window.clearTimeout(a.data.id)})},{}],28:[function(a,e,d){e.exports=function(){return this}()},{}],29:[function(a,e,d){var c=a("wildemitter"),g;"undefined"!==typeof window&&(g=window.AudioContext||window.webkitAudioContext);var b=null;e.exports=function(a,d){var e=new c;if(!g)return e;d=d||{};var f=d.smoothing||.1,p=d.interval||50,u=d.threshold,
v=d.play;d=d.history||10;var h=!0;b||(b=new g);var ia=b.createAnalyser();ia.fftSize=512;ia.smoothingTimeConstant=f;var k=new Float32Array(ia.frequencyBinCount);a.jquery&&(a=a[0]);if(a instanceof HTMLAudioElement||a instanceof HTMLVideoElement){var l=b.createMediaElementSource(a);"undefined"===typeof v&&(v=!0)}else l=b.createMediaStreamSource(a);u=u||-50;l.connect(ia);v&&ia.connect(b.destination);e.speaking=!1;e.setThreshold=function(a){u=a};e.setInterval=function(a){p=a};e.stop=function(){h=!1;e.emit("volume_change",
-100,u);e.speaking&&(e.speaking=!1,e.emit("stopped_speaking"));ia.disconnect();l.disconnect()};e.speakingHistory=[];for(a=0;a<d;a++)e.speakingHistory.push(0);var n=function(){setTimeout(function(){if(h){var a=-Infinity;ia.getFloatFrequencyData(k);for(var c=4,d=k.length;c<d;c++)k[c]>a&&0>k[c]&&(a=k[c]);e.emit("volume_change",a,u);c=0;if(a>u&&!e.speaking){for(d=e.speakingHistory.length-3;d<e.speakingHistory.length;d++)c+=e.speakingHistory[d];2<=c&&(e.speaking=!0,e.emit("speaking"))}else if(a<u&&e.speaking){for(d=
0;d<e.speakingHistory.length;d++)c+=e.speakingHistory[d];0==c&&(e.speaking=!1,e.emit("stopped_speaking"))}e.speakingHistory.shift();e.speakingHistory.push(0+(a>u));n()}},p)};n();return e}},{wildemitter:65}],30:[function(a,e,d){(function(c){var d=a("isarray");e.exports=function(a){function e(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(d(a))for(var g=0;g<a.length;g++){if(e(a[g]))return!0}else if(a&&
"object"==typeof a)for(g in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,g)&&e(a[g]))return!0;return!1}return e(a)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{isarray:33}],31:[function(a,e,d){a=a("global");try{e.exports="XMLHttpRequest"in a&&"withCredentials"in new a.XMLHttpRequest}catch(c){e.exports=!1}},{global:28}],32:[function(a,e,d){var c=[].indexOf;e.exports=function(a,d){if(c)return a.indexOf(d);
for(var e=0;e<a.length;++e)if(a[e]===d)return e;return-1}},{}],33:[function(a,e,d){e.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],34:[function(a,e,d){(function(a){function c(a){if(c[a]!==f)return c[a];if("bug-string-char-index"==a)var d=!1;else if("json"==a)d=c("json-stringify")&&c("json-parse");else{var g;if("json-stringify"==a){d=w.stringify;var b="function"==typeof d&&y;if(b){(g=function(){return 1}).toJSON=g;try{b="0"===d(0)&&"0"===d(new Number)&&
'""'==d(new String)&&d(e)===f&&d(f)===f&&d()===f&&"1"===d(g)&&"[1]"==d([g])&&"[null]"==d([f])&&"null"==d(null)&&"[null,null,null]"==d([f,e,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==d({a:[g,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===d(null,g)&&"[\n 1,\n 2\n]"==d([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==d(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==d(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==d(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==d(new Date(-1))}catch(Ea){b=
!1}}d=b}if("json-parse"==a){d=w.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){g=d('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var p=5==g.a.length&&1===g.a[0];if(p){try{p=!d('"\t"')}catch(Ea){}if(p)try{p=1!==d("01")}catch(Ea){}if(p)try{p=1!==d("1.")}catch(Ea){}}}}catch(Ea){p=!1}d=p}}return c[a]=!!d}var e={}.toString,b,f,z="object"==typeof JSON&&JSON,w="object"==typeof d&&d&&!d.nodeType&&d;w&&z?(w.stringify=z.stringify,w.parse=z.parse):w=a.JSON=z||{};var y=new Date(-0xc782b5b800cec);
try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(ah){}if(!c("json")){var h=c("bug-string-char-index");if(!y)var v=Math.floor,ya=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(a,c){return ya[c]+365*(a-1970)+v((a-1969+(c=+(1<c)))/4)-v((a-1901+c)/100)+v((a-1601+c)/400)};(b={}.hasOwnProperty)||(b=function(a){var c={};if((c.__proto__=null,c.__proto__={toString:1},c).toString!=
e)b=function(a){var c=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=c;return a};else{var d=c.constructor;b=function(a){var c=(this.constructor||d).prototype;return a in this&&!(a in c&&this[a]===c[a])}}c=null;return b.call(this,a)});var l={"boolean":1,number:1,string:1,undefined:1};var n=function(a,c){var d=0,g,f;(g=function(){this.valueOf=0}).prototype.valueOf=0;var p=new g;for(f in p)b.call(p,f)&&d++;g=p=null;d?n=2==d?function(a,c){var d={},g="[object Function]"==e.call(a),f;for(f in a)g&&
"prototype"==f||b.call(d,f)||!(d[f]=1)||!b.call(a,f)||c(f)}:function(a,c){var d="[object Function]"==e.call(a),g,f;for(g in a)d&&"prototype"==g||!b.call(a,g)||(f="constructor"===g)||c(g);(f||b.call(a,g="constructor"))&&c(g)}:(p="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),n=function(a,c){var d="[object Function]"==e.call(a),g,f;if(f=!d&&"function"!=typeof a.constructor)f=typeof a.hasOwnProperty,f="object"==f?!!a.hasOwnProperty:!l[f];f=
f?a.hasOwnProperty:b;for(g in a)d&&"prototype"==g||!f.call(a,g)||c(g);for(d=p.length;g=p[--d];f.call(a,g)&&c(g));});return n(a,c)};if(!c("json-stringify")){var ba={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(a,c){return("000000"+(c||0)).slice(-a)},q=function(a){var c='"',d=0,e=a.length,g=10<e&&h,b;for(g&&(b=a.split(""));d<e;d++){var f=a.charCodeAt(d);switch(f){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=ba[f];break;default:c=32>f?c+("\\u00"+C(2,f.toString(16))):
c+(g?b[d]:h?a.charAt(d):a[d])}}return c+'"'},r=function(a,c,d,g,p,u,w){var z;try{var h=c[a]}catch(ch){}if("object"==typeof h&&h){var y=e.call(h);if("[object Date]"!=y||b.call(h,"toJSON"))"function"==typeof h.toJSON&&("[object Number]"!=y&&"[object String]"!=y&&"[object Array]"!=y||b.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(k){var P=v(h/864E5);for(y=v(P/365.2425)+1970-1;k(y+1,0)<=P;y++);for(z=v((P-k(y,0))/30.42);k(y,z+1)<=P;z++);P=1+P-k(y,z);var ia=(h%864E5+864E5)%864E5;var ya=
v(ia/36E5)%24;var l=v(ia/6E4)%60;var $b=v(ia/1E3)%60;ia%=1E3}else y=h.getUTCFullYear(),z=h.getUTCMonth(),P=h.getUTCDate(),ya=h.getUTCHours(),l=h.getUTCMinutes(),$b=h.getUTCSeconds(),ia=h.getUTCMilliseconds();h=(0>=y||1E4<=y?(0>y?"-":"+")+C(6,0>y?-y:y):C(4,y))+"-"+C(2,z+1)+"-"+C(2,P)+"T"+C(2,ya)+":"+C(2,l)+":"+C(2,$b)+"."+C(3,ia)+"Z"}else h=null}d&&(h=d.call(c,a,h));if(null===h)return"null";y=e.call(h);if("[object Boolean]"==y)return""+h;if("[object Number]"==y)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==
y)return q(""+h);if("object"==typeof h){for(a=w.length;a--;)if(w[a]===h)throw TypeError();w.push(h);var Aa=[];c=u;u+=p;if("[object Array]"==y){z=0;for(a=h.length;z<a;z++)y=r(z,h,d,g,p,u,w),Aa.push(y===f?"null":y);a=Aa.length?p?"[\n"+u+Aa.join(",\n"+u)+"\n"+c+"]":"["+Aa.join(",")+"]":"[]"}else n(g||h,function(a){var c=r(a,h,d,g,p,u,w);c!==f&&Aa.push(q(a)+":"+(p?" ":"")+c)}),a=Aa.length?p?"{\n"+u+Aa.join(",\n"+u)+"\n"+c+"}":"{"+Aa.join(",")+"}":"{}";w.pop();return a}};w.stringify=function(a,c,d){var g;
if("function"==typeof c||"object"==typeof c&&c)if("[object Function]"==(g=e.call(c)))var b=c;else if("[object Array]"==g){var f={};for(var p=0,u=c.length,w;p<u;w=c[p++],(g=e.call(w),"[object String]"==g||"[object Number]"==g)&&(f[w]=1));}if(d)if("[object Number]"==(g=e.call(d))){if(0<(d-=d%1)){var v="";for(10<d&&(d=10);v.length<d;v+=" ");}}else"[object String]"==g&&(v=10>=d.length?d:d.slice(0,10));return r("",(w={},w[""]=a,w),b,f,v,"",[])}}if(!c("json-parse")){var t=String.fromCharCode,A={92:"\\",
34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},E,B,x=function(){E=B=null;throw SyntaxError();},D=function(){for(var a=B,c=a.length,d,e,g,b,f;E<c;)switch(f=a.charCodeAt(E),f){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return d=h?a.charAt(E):a[E],E++,d;case 34:d="@";for(E++;E<c;)if(f=a.charCodeAt(E),32>f)x();else if(92==f)switch(f=a.charCodeAt(++E),f){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:d+=A[f];E++;break;case 117:e=
++E;for(g=E+4;E<g;E++)f=a.charCodeAt(E),48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f||x();d+=t("0x"+a.slice(e,E));break;default:x()}else{if(34==f)break;f=a.charCodeAt(E);for(e=E;32<=f&&92!=f&&34!=f;)f=a.charCodeAt(++E);d+=a.slice(e,E)}if(34==a.charCodeAt(E))return E++,d;x();default:e=E;45==f&&(b=!0,f=a.charCodeAt(++E));if(48<=f&&57>=f){for(48==f&&(f=a.charCodeAt(E+1),48<=f&&57>=f)&&x();E<c&&(f=a.charCodeAt(E),48<=f&&57>=f);E++);if(46==a.charCodeAt(E)){for(g=++E;g<c&&(f=a.charCodeAt(g),48<=f&&57>=f);g++);
g==E&&x();E=g}f=a.charCodeAt(E);if(101==f||69==f){f=a.charCodeAt(++E);43!=f&&45!=f||E++;for(g=E;g<c&&(f=a.charCodeAt(g),48<=f&&57>=f);g++);g==E&&x();E=g}return+a.slice(e,E)}b&&x();if("true"==a.slice(E,E+4))return E+=4,!0;if("false"==a.slice(E,E+5))return E+=5,!1;if("null"==a.slice(E,E+4))return E+=4,null;x()}return"$"},F=function(a){var c,d;"$"==a&&x();if("string"==typeof a){if("@"==(h?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(c=[];;d||(d=!0)){a=D();if("]"==a)break;d&&(","==a?(a=D(),"]"==
a&&x()):x());","==a&&x();c.push(F(a))}return c}if("{"==a){for(c={};;d||(d=!0)){a=D();if("}"==a)break;d&&(","==a?(a=D(),"}"==a&&x()):x());","!=a&&"string"==typeof a&&"@"==(h?a.charAt(0):a[0])&&":"==D()||x();c[a.slice(1)]=F(D())}return c}x()}return a},G=function(a,c,d){d=H(a,c,d);d===f?delete a[c]:a[c]=d},H=function(a,c,d){var g=a[c],b;if("object"==typeof g&&g)if("[object Array]"==e.call(g))for(b=g.length;b--;)G(g,b,d);else n(g,function(a){G(g,a,d)});return d.call(a,c,g)};w.parse=function(a,c){var d;
E=0;B=""+a;a=F(D());"$"!=D()&&x();E=B=null;return c&&"[object Function]"==e.call(c)?H((d={},d[""]=a,d),"",c):a}}}})(this)},{}],35:[function(a,e,d){function c(a){var c=!0;a.getTracks().forEach(function(a){c="ended"===a.readyState&&c});return c}function g(){if("undefined"===typeof window||!window.navigator.mozGetUserMedia)return!1;var a=window.navigator.userAgent.match(/Firefox\/(\d+)\./);return 50>(a&&1<=a.length&&parseInt(a[1],10))}function b(a){h.call(this);var c=this.config={detectSpeakingEvents:!1,
audioFallback:!1,media:{audio:!0,video:!0},harkOptions:null,logger:w},d;for(d in a)a.hasOwnProperty(d)&&(this.config[d]=a[d]);this.logger=c.logger;this._log=this.logger.log.bind(this.logger,"LocalMedia:");this._logerror=this.logger.error.bind(this.logger,"LocalMedia:");this.localStreams=[];this.localScreens=[];navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||this._logerror("Your browser does not support local media capture.");this._audioMonitors=[];this.on("localStreamStopped",this._stopAudioMonitor.bind(this));
this.on("localScreenStopped",this._stopAudioMonitor.bind(this))}d=a("util");var f=a("hark"),p=a("getscreenmedia"),h=a("wildemitter"),w=a("mockconsole");d.inherits(b,h);b.prototype.start=function(a,d){var e=this,g=a||this.config.media;this.emit("localStreamRequested",g);navigator.mediaDevices.getUserMedia(g).then(function(a){g.audio&&e.config.detectSpeakingEvents&&e._setupAudioMonitor(a,e.config.harkOptions);e.localStreams.push(a);a.getTracks().forEach(function(d){d.addEventListener("ended",function(){c(a)&&
e._removeStream(a)})});e.emit("localStream",a);if(d)return d(null,a)}).catch(function(a){if(e.config.audioFallback&&"NotFoundError"===a.name&&!1!==g.video)g.video=!1,e.start(g,d);else if(e.emit("localStreamRequestFailed",g),d)return d(a,null)})};b.prototype.stop=function(a){this.stopStream(a);this.stopScreenShare(a)};b.prototype.stopStream=function(a){var c=this;a?-1<this.localStreams.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),g()&&this._removeStream(a)):this.localStreams.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});
g()&&c._removeStream(a)})};b.prototype.startScreenShare=function(a,c){var d=this;this.emit("localScreenRequested");"function"!==typeof a||c||(c=a,a=null);p(a,function(a,e){a?d.emit("localScreenRequestFailed"):(d.localScreens.push(e),e.getTracks().forEach(function(a){a.addEventListener("ended",function(){var a=!0;e.getTracks().forEach(function(c){a="ended"===c.readyState&&a});a&&d._removeStream(e)})}),d.emit("localScreen",e));if(c)return c(a,e)})};b.prototype.stopScreenShare=function(a){var c=this;
a?-1<this.localScreens.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),g()&&this._removeStream(a)):this.localScreens.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});g()&&c._removeStream(a)})};b.prototype.mute=function(){this._audioEnabled(!1);this.emit("audioOff")};b.prototype.unmute=function(){this._audioEnabled(!0);this.emit("audioOn")};b.prototype.pauseVideo=function(){this._videoEnabled(!1);this.emit("videoOff")};b.prototype.resumeVideo=function(){this._videoEnabled(!0);
this.emit("videoOn")};b.prototype.pause=function(){this.mute();this.pauseVideo()};b.prototype.resume=function(){this.unmute();this.resumeVideo()};b.prototype._audioEnabled=function(a){this.localStreams.forEach(function(c){c.getAudioTracks().forEach(function(c){c.enabled=!!a})})};b.prototype._videoEnabled=function(a){this.localStreams.forEach(function(c){c.getVideoTracks().forEach(function(c){c.enabled=!!a})})};b.prototype.isAudioEnabled=function(){var a=!0;this.localStreams.forEach(function(c){c.getAudioTracks().forEach(function(c){a=
a&&c.enabled})});return a};b.prototype.isVideoEnabled=function(){var a=!0;this.localStreams.forEach(function(c){c.getVideoTracks().forEach(function(c){a=a&&c.enabled})});return a};b.prototype._removeStream=function(a){var c=this.localStreams.indexOf(a);-1<c?(this.localStreams.splice(c,1),this.emit("localStreamStopped",a)):(c=this.localScreens.indexOf(a),-1<c&&(this.localScreens.splice(c,1),this.emit("localScreenStopped",a)))};b.prototype._setupAudioMonitor=function(a,c){this._log("Setup audio");c=
f(a,c);var d=this,e;c.on("speaking",function(){d.emit("speaking")});c.on("stopped_speaking",function(){e&&clearTimeout(e);e=setTimeout(function(){d.emit("stoppedSpeaking")},1E3)});c.on("volume_change",function(a,c){d.emit("volumeChange",a,c)});this._audioMonitors.push({audio:c,stream:a})};b.prototype._stopAudioMonitor=function(a){var c=-1;this._audioMonitors.forEach(function(d,e){d.stream===a&&(c=e)});-1<c&&(this._audioMonitors[c].audio.stop(),this._audioMonitors.splice(c,1))};e.exports=b},{getscreenmedia:27,
hark:29,mockconsole:37,util:63,wildemitter:65}],36:[function(a,e,d){(function(a){function c(a,c){a.set(c[0],c[1]);return a}function b(a,c){a.add(c);return a}function f(a,c){for(var d=-1,e=a?a.length:0;++d<e&&!1!==c(a[d],d,a););return a}function p(a,c,d,e){var g=-1,b=a?a.length:0;for(e&&b&&(d=a[++g]);++g<b;)d=c(d,a[g],g,a);return d}function h(a){var c=!1;if(null!=a&&"function"!=typeof a.toString)try{c=!!(a+"")}catch(eh){}return c}function w(a){var c=-1,d=Array(a.size);a.forEach(function(a,e){d[++c]=
[e,a]});return d}function y(a,c){return function(d){return a(c(d))}}function P(a){var c=-1,d=Array(a.size);a.forEach(function(a){d[++c]=a});return d}function v(a){var c=-1,d=a?a.length:0;for(this.clear();++c<d;){var e=a[c];this.set(e[0],e[1])}}function k(a){var c=-1,d=a?a.length:0;for(this.clear();++c<d;){var e=a[c];this.set(e[0],e[1])}}function l(a){var c=-1,d=a?a.length:0;for(this.clear();++c<d;){var e=a[c];this.set(e[0],e[1])}}function n(a){this.__data__=new k(a)}function q(a,c,d){var e=a[c];R.call(a,
c)&&(e===d||e!==e&&d!==d)&&(void 0!==d||c in a)||(a[c]=d)}function ba(a,c){for(var d=a.length;d--;){var e=a[d][0];if(e===c||e!==e&&c!==c)return d}return-1}function C(a,c){return a&&B(c,M(c),a)}function r(a,c,d,e,g,b,p){var w;e&&(w=b?e(a,g,b,p):e(a));if(void 0!==w)return w;if(!Ea(a))return a;if(g=ta(a)){if(w=H(a),!c)return E(a,w)}else{var u=fa(a),v="[object Function]"==u||"[object GeneratorFunction]"==u;if(za(a))return x(a,c);if("[object Object]"==u||"[object Arguments]"==u||v&&!b){if(h(a))return b?
a:{};w=L(v?{}:a);if(!c)return D(a,C(w,a))}else{if(!Q[u])return b?a:{};w=J(a,u,r,c)}}p||(p=new n);if(b=p.get(a))return b;p.set(a,w);if(!g)var z=d?t(a,M,va):M(a);f(z||a,function(g,b){z&&(b=g,g=a[b]);q(w,b,r(g,c,d,e,b,a,p))});return w}function t(a,c,d){c=c(a);if(!ta(a)){a=d(a);d=-1;for(var e=a.length,g=c.length;++d<e;)c[g+d]=a[d]}return c}function x(a,c){if(c)return a.slice();c=new a.constructor(a.length);a.copy(c);return c}function A(a){var c=new a.constructor(a.byteLength);(new ca(c)).set(new ca(a));
return c}function E(a,c){var d=-1,e=a.length;for(c||(c=Array(e));++d<e;)c[d]=a[d];return c}function B(a,c,d,e){d||(d={});for(var g=-1,b=c.length;++g<b;){var f=c[g],p=e?e(d[f],a[f],f,d,a):void 0;q(d,f,void 0===p?a[f]:p)}return d}function D(a,c){return B(a,va(a),c)}function F(a,c){a=a.__data__;var d=typeof c;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==c:null===c)?a["string"==typeof c?"string":"hash"]:a.map}function G(a,c){a=null==a?void 0:a[c];c=!Ea(a)||Y&&Y in a?!1:(qe(a)||
h(a)?ea:T).test(Za(a));return c?a:void 0}function H(a){var c=a.length,d=a.constructor(c);c&&"string"==typeof a[0]&&R.call(a,"index")&&(d.index=a.index,d.input=a.input);return d}function L(a){"function"!=typeof a.constructor||Aa(a)?a={}:(a=la(a),a=Ea(a)?ma(a):{});return a}function J(a,d,e,g){var f=a.constructor;switch(d){case "[object ArrayBuffer]":return A(a);case "[object Boolean]":case "[object Date]":return new f(+a);case "[object DataView]":return d=g?A(a.buffer):a.buffer,new a.constructor(d,
a.byteOffset,a.byteLength);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return d=g?A(a.buffer):a.buffer,new a.constructor(d,a.byteOffset,a.length);case "[object Map]":return d=g?e(w(a),!0):w(a),p(d,c,new a.constructor);case "[object Number]":case "[object String]":return new f(a);case "[object RegExp]":return d=
new a.constructor(a.source,O.exec(a)),d.lastIndex=a.lastIndex,d;case "[object Set]":return d=g?e(P(a),!0):P(a),p(d,b,new a.constructor);case "[object Symbol]":return ua?Object(ua.call(a)):{}}}function Aa(a){var c=a&&a.constructor;return a===("function"==typeof c&&c.prototype||V)}function Za(a){if(null!=a){try{return Z.call(a)}catch(dh){}return a+""}return""}function pe(a){var c;if(c=null!=a)c=a.length,c="number"==typeof c&&-1<c&&0==c%1&&9007199254740991>=c;return c&&!qe(a)}function qe(a){a=Ea(a)?
X.call(a):"";return"[object Function]"==a||"[object GeneratorFunction]"==a}function Ea(a){var c=typeof a;return!!a&&("object"==c||"function"==c)}function M(a){if(pe(a)){var c;(c=ta(a))||(c=!!a&&"object"==typeof a&&pe(a)&&R.call(a,"callee")&&(!na.call(a,"callee")||"[object Arguments]"==X.call(a)));if(c){c=a.length;for(var d=String,e=-1,g=Array(c);++e<c;)g[e]=d(e);c=g}else c=[];d=c.length;e=!!d;for(var b in a){if(!(g=!R.call(a,b))&&(g=e)&&!(g="length"==b)){g=b;var f=d;f=null==f?9007199254740991:f;g=
!!f&&("number"==typeof g||U.test(g))&&-1<g&&0==g%1&&g<f}g||c.push(b)}a=c}else if(Aa(a)){b=[];for(c in Object(a))R.call(a,c)&&"constructor"!=c&&b.push(c);a=b}else a=pa(a);return a}function Sf(){return[]}function N(){return!1}var O=/\w*$/,T=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,Q={};Q["[object Arguments]"]=Q["[object Array]"]=Q["[object ArrayBuffer]"]=Q["[object DataView]"]=Q["[object Boolean]"]=Q["[object Date]"]=Q["[object Float32Array]"]=Q["[object Float64Array]"]=Q["[object Int8Array]"]=
Q["[object Int16Array]"]=Q["[object Int32Array]"]=Q["[object Map]"]=Q["[object Number]"]=Q["[object Object]"]=Q["[object RegExp]"]=Q["[object Set]"]=Q["[object String]"]=Q["[object Symbol]"]=Q["[object Uint8Array]"]=Q["[object Uint8ClampedArray]"]=Q["[object Uint16Array]"]=Q["[object Uint32Array]"]=!0;Q["[object Error]"]=Q["[object Function]"]=Q["[object WeakMap]"]=!1;var I="object"==typeof self&&self&&self.Object===Object&&self;a="object"==typeof a&&a&&a.Object===Object&&a||I||Function("return this")();
var K=(I="object"==typeof d&&d&&!d.nodeType&&d)&&"object"==typeof e&&e&&!e.nodeType&&e;I=K&&K.exports===I;K=Array.prototype;var S=Function.prototype,V=Object.prototype,W=a["__core-js_shared__"],Y=function(){var a=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Z=S.toString,R=V.hasOwnProperty,X=V.toString,ea=RegExp("^"+Z.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");S=I?a.Buffer:void 0;I=
a.Symbol;var ca=a.Uint8Array,la=y(Object.getPrototypeOf,Object),ma=Object.create,na=V.propertyIsEnumerable,oa=K.splice;K=Object.getOwnPropertySymbols;S=S?S.isBuffer:void 0;var pa=y(Object.keys,Object),ha=G(a,"DataView"),aa=G(a,"Map"),ja=G(a,"Promise"),ka=G(a,"Set");a=G(a,"WeakMap");var da=G(Object,"create"),qa=Za(ha),ra=Za(aa),sa=Za(ja),wa=Za(ka),xa=Za(a),ua=(I=I?I.prototype:void 0)?I.valueOf:void 0;v.prototype.clear=function(){this.__data__=da?da(null):{}};v.prototype["delete"]=function(a){return this.has(a)&&
delete this.__data__[a]};v.prototype.get=function(a){var c=this.__data__;return da?(a=c[a],"__lodash_hash_undefined__"===a?void 0:a):R.call(c,a)?c[a]:void 0};v.prototype.has=function(a){var c=this.__data__;return da?void 0!==c[a]:R.call(c,a)};v.prototype.set=function(a,c){this.__data__[a]=da&&void 0===c?"__lodash_hash_undefined__":c;return this};k.prototype.clear=function(){this.__data__=[]};k.prototype["delete"]=function(a){var c=this.__data__;a=ba(c,a);if(0>a)return!1;a==c.length-1?c.pop():oa.call(c,
a,1);return!0};k.prototype.get=function(a){var c=this.__data__;a=ba(c,a);return 0>a?void 0:c[a][1]};k.prototype.has=function(a){return-1<ba(this.__data__,a)};k.prototype.set=function(a,c){var d=this.__data__,e=ba(d,a);0>e?d.push([a,c]):d[e][1]=c;return this};l.prototype.clear=function(){this.__data__={hash:new v,map:new (aa||k),string:new v}};l.prototype["delete"]=function(a){return F(this,a)["delete"](a)};l.prototype.get=function(a){return F(this,a).get(a)};l.prototype.has=function(a){return F(this,
a).has(a)};l.prototype.set=function(a,c){F(this,a).set(a,c);return this};n.prototype.clear=function(){this.__data__=new k};n.prototype["delete"]=function(a){return this.__data__["delete"](a)};n.prototype.get=function(a){return this.__data__.get(a)};n.prototype.has=function(a){return this.__data__.has(a)};n.prototype.set=function(a,c){var d=this.__data__;if(d instanceof k){d=d.__data__;if(!aa||199>d.length)return d.push([a,c]),this;d=this.__data__=new l(d)}d.set(a,c);return this};var va=K?y(K,Object):
Sf,fa=function(a){return X.call(a)};if(ha&&"[object DataView]"!=fa(new ha(new ArrayBuffer(1)))||aa&&"[object Map]"!=fa(new aa)||ja&&"[object Promise]"!=fa(ja.resolve())||ka&&"[object Set]"!=fa(new ka)||a&&"[object WeakMap]"!=fa(new a))fa=function(a){var c=X.call(a);if(a=(a="[object Object]"==c?a.constructor:void 0)?Za(a):void 0)switch(a){case qa:return"[object DataView]";case ra:return"[object Map]";case sa:return"[object Promise]";case wa:return"[object Set]";case xa:return"[object WeakMap]"}return c};
var ta=Array.isArray,za=S||N;e.exports=function(a){return r(a,!0,!0)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],37:[function(a,e,d){a="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd time timeEnd trace warn".split(" ");d=a.length;for(var c=function(){},g={};d--;)g[a[d]]=c;e.exports=g},{}],38:[function(a,e,d){function c(a){if(a=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a)){var c=
parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "y":return c*f;case "days":case "day":case "d":return c*b;case "hours":case "hour":case "h":return 36E5*c;case "minutes":case "minute":case "m":return 6E4*c;case "seconds":case "second":case "s":return 1E3*c;case "ms":return c}}}function g(a,c,d){if(!(a<c))return a<1.5*c?Math.floor(a/c)+" "+d:Math.ceil(a/c)+" "+d+"s"}var b=864E5,f=365.25*b;e.exports=function(a,d){d=d||{};return"string"==typeof a?c(a):d.long?g(a,b,"day")||
g(a,36E5,"hour")||g(a,6E4,"minute")||g(a,1E3,"second")||a+" ms":a>=b?Math.round(a/b)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],39:[function(a,e,d){var c=Object.prototype.hasOwnProperty;d.keys=Object.keys||function(a){var d=[],e;for(e in a)c.call(a,e)&&d.push(e);return d};d.values=function(a){var d=[],e;for(e in a)c.call(a,e)&&d.push(a[e]);return d};d.merge=function(a,d){for(var e in d)c.call(d,e)&&(a[e]=d[e]);return a};d.length=function(a){return d.keys(a).length};
d.isEmpty=function(a){return 0==d.length(a)}},{}],40:[function(a,e,d){(function(a){var c=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,b=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,h=/^\s+/,w=/\s+$/;e.exports=function(e){if("string"!=typeof e||!e)return null;e=e.replace(h,"").replace(w,"");if(a.JSON&&JSON.parse)return JSON.parse(e);if(c.test(e.replace(d,"@").replace(b,"]").replace(f,"")))return(new Function("return "+e))()}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],41:[function(a,e,d){d.encode=function(a){var c="",d;for(d in a)a.hasOwnProperty(d)&&(c.length&&(c+="&"),c+=encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return c};d.decode=function(a){var c={};a=a.split("&");for(var d=0,e=a.length;d<e;d++){var b=a[d].split("=");c[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}return c}},{}],42:[function(a,e,d){var c=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(a){a=c.exec(a||"");for(var d={},e=14;e--;)d[g[e]]=a[e]||"";return d}},{}],43:[function(a,e,d){function c(){throw Error("setTimeout has not been defined");}function g(){throw Error("clearTimeout has not been defined");}function b(a){if(P===setTimeout)return setTimeout(a,0);if((P===c||!P)&&setTimeout)return P=setTimeout,setTimeout(a,0);try{return P(a,0)}catch(C){try{return P.call(null,
a,0)}catch(Pc){return P.call(this,a,0)}}}function f(a){if(v===clearTimeout)return clearTimeout(a);if((v===g||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(a);try{return v(a)}catch(C){try{return v.call(null,a)}catch(Pc){return v.call(this,a)}}}function p(){l&&n&&(l=!1,n.length?k=n.concat(k):q=-1,k.length&&h())}function h(){if(!l){var a=b(p);l=!0;for(var c=k.length;c;){n=k;for(k=[];++q<c;)n&&n[q].run();q=-1;c=k.length}n=null;l=!1;f(a)}}function w(a,c){this.fun=a;this.array=c}function y(){}a=
e.exports={};try{var P="function"===typeof setTimeout?setTimeout:c}catch(ba){P=c}try{var v="function"===typeof clearTimeout?clearTimeout:g}catch(ba){v=g}var k=[],l=!1,n,q=-1;a.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)c[d-1]=arguments[d];k.push(new w(a,c));1!==k.length||l||b(h)};w.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=y;a.addListener=
y;a.once=y;a.off=y;a.removeListener=y;a.removeAllListeners=y;a.emit=y;a.prependListener=y;a.prependOnceListener=y;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],44:[function(a,e,d){function c(a,c){var d=this,e;b.call(this);a=a||{};a.iceServers=a.iceServers||[];this.enableChromeNativeSimulcast=!1;c&&c.optional&&
window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&c.optional.forEach(function(a){a.enableChromeNativeSimulcast&&(d.enableChromeNativeSimulcast=!0)});this.enableMultiStreamHacks=!1;c&&c.optional&&window.chrome&&c.optional.forEach(function(a){a.enableMultiStreamHacks&&(d.enableMultiStreamHacks=!0)});this.restrictBandwidth=0;c&&c.optional&&c.optional.forEach(function(a){a.andyetRestrictBandwidth&&(d.restrictBandwidth=a.andyetRestrictBandwidth)});this.batchIceCandidates=0;c&&c.optional&&
c.optional.forEach(function(a){a.andyetBatchIce&&(d.batchIceCandidates=a.andyetBatchIce)});this.batchedIceCandidates=[];c&&c.optional&&window.chrome&&c.optional.forEach(function(a){a.andyetFasterICE&&(d.eliminateDuplicateCandidates=a.andyetFasterICE)});c&&c.optional&&c.optional.forEach(function(a){a.andyetDontSignalCandidates&&(d.dontSignalCandidates=a.andyetDontSignalCandidates)});this.assumeSetLocalSuccess=!1;c&&c.optional&&c.optional.forEach(function(a){a.andyetAssumeSetLocalSuccess&&(d.assumeSetLocalSuccess=
a.andyetAssumeSetLocalSuccess)});window.navigator.mozGetUserMedia&&c&&c.optional&&(this.wtFirefox=0,c.optional.forEach(function(a){a.andyetFirefoxMakesMeSad&&(d.wtFirefox=a.andyetFirefoxMakesMeSad,0<d.wtFirefox&&(d.firefoxcandidatebuffer=[]))}));x(a);this.pc=new RTCPeerConnection(a,c);this.getLocalStreams="function"===typeof this.pc.getLocalStreams?this.pc.getLocalStreams.bind(this.pc):function(){return[]};this.getSenders="function"===typeof this.pc.getSenders?this.pc.getSenders.bind(this.pc):function(){return[]};
this.getRemoteStreams="function"===typeof this.pc.getRemoteStreams?this.pc.getRemoteStreams.bind(this.pc):function(){return[]};this.getReceivers="function"===typeof this.pc.getReceivers?this.pc.getReceivers.bind(this.pc):function(){return[]};this.addStream=this.pc.addStream.bind(this.pc);this.removeStream=function(a){"function"===typeof d.pc.removeStream?d.pc.removeStream.apply(d.pc,arguments):"function"===typeof d.pc.removeTrack&&a.getTracks().forEach(function(a){d.pc.removeTrack(a)})};"function"===
typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc));this.pc.onremovestream=this.emit.bind(this,"removeStream");this.pc.onremovetrack=this.emit.bind(this,"removeTrack");this.pc.onaddstream=this.emit.bind(this,"addStream");this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded");this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange");this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange");this.pc.onicecandidate=this._onIce.bind(this);
this.pc.ondatachannel=this._onDataChannel.bind(this);this.localDescription={contents:[]};this.remoteDescription={contents:[]};this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1};this.iceCredentials={local:{},remote:{}};for(e in a)this.config[e]=a[e];if(this.config.debug)this.on("*",function(){(a.logger||console).log("PeerConnection event:",arguments)});this.hadRemoteIPv6Candidate=this.hadLocalIPv6Candidate=this.hadRemoteRelayCandidate=this.hadLocalRelayCandidate=this.hadRemoteStunCandidate=
this.hadLocalStunCandidate=!1;this._remoteDataChannels=[];this._localDataChannels=[];this._candidateBuffer=[]}d=a("util");var g=a("sdp-jingle-json"),b=a("wildemitter"),f=a("lodash.clonedeep");d.inherits(c,b);Object.defineProperty(c.prototype,"signalingState",{get:function(){return this.pc.signalingState}});Object.defineProperty(c.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}});c.prototype._role=function(){return this.isInitiator?"initiator":"responder"};c.prototype.addStream=
function(a){this.localStream=a;this.pc.addStream(a)};c.prototype._checkLocalCandidate=function(a){a=g.toCandidateJSON(a);"srflx"==a.type?this.hadLocalStunCandidate=!0:"relay"==a.type&&(this.hadLocalRelayCandidate=!0);a&&a.ip&&-1!=a.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)};c.prototype._checkRemoteCandidate=function(a){a=g.toCandidateJSON(a);"srflx"==a.type?this.hadRemoteStunCandidate=!0:"relay"==a.type&&(this.hadRemoteRelayCandidate=!0);a&&a.ip&&-1!=a.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=
!0)};c.prototype.processIce=function(a,c){c=c||function(){};var d=this;if("closed"===this.pc.signalingState)return c();if(a.contents||a.jingle&&a.jingle.contents){var e=this.remoteDescription.contents.map(function(a){return a.name});(a.contents||a.jingle.contents).forEach(function(a){var b=a.transport||{},f=b.candidates||[],p=e.indexOf(a.name),w=a.name,h=d.remoteDescription.contents.find(function(c){return c.name===a.name}),u=function(){f.forEach(function(a){a=g.toCandidateSDP(a);d.pc.addIceCandidate(new RTCIceCandidate({candidate:a,
sdpMLineIndex:p,sdpMid:w}),function(){},function(a){d.emit("error",a)});d._checkRemoteCandidate(a)});c()};d.iceCredentials.remote[a.name]&&b.ufrag&&d.iceCredentials.remote[a.name].ufrag!==b.ufrag?h?(h.transport.ufrag=b.ufrag,h.transport.pwd=b.pwd,b={type:"offer",jingle:d.remoteDescription},b.sdp=g.toSessionSDP(b.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"incoming"}),d.pc.setRemoteDescription(new RTCSessionDescription(b),function(){u()},function(a){d.emit("error",a)})):d.emit("error",
"ice restart failed to find matching content"):u()})}else{a.candidate&&0!==a.candidate.candidate.indexOf("a=")&&(a.candidate.candidate="a="+a.candidate.candidate);if(this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(a.candidate),c();d.pc.addIceCandidate(new RTCIceCandidate(a.candidate),function(){},function(a){d.emit("error",a)});d._checkRemoteCandidate(a.candidate.candidate);c()}};c.prototype.offer=
function(a,c){var d=this,e=2===arguments.length,b=e&&a?a:{offerToReceiveAudio:1,offerToReceiveVideo:1};c=(c=e?c:a)||function(){};if("closed"===this.pc.signalingState)return c("Already closed");this.pc.createOffer(function(a){var e={type:"offer",sdp:a.sdp};d.assumeSetLocalSuccess&&(d.emit("offer",e),c(null,e));d._candidateBuffer=[];d.pc.setLocalDescription(a,function(){if(d.config.useJingle){var b=g.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"});b.sid=d.config.sid;d.localDescription=b;
b.contents.forEach(function(a){var c=a.transport||{};c.ufrag&&(d.iceCredentials.local[a.name]={ufrag:c.ufrag,pwd:c.pwd})});e.jingle=b}e.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d._checkLocalCandidate(a)});d.assumeSetLocalSuccess||(d.emit("offer",e),c(null,e))},function(a){d.emit("error",a);c(a)})},function(a){d.emit("error",a);c(a)},b)};c.prototype.handleOffer=function(a,c){c=c||function(){};var d=this;a.type="offer";if(a.jingle){this.enableChromeNativeSimulcast&&a.jingle.contents.forEach(function(a){"video"===
a.name&&(a.application.googConferenceFlag=!0)});this.enableMultiStreamHacks&&a.jingle.contents.forEach(function(a){if("video"===a.name){var c=a.application.sources||[];if(0===c.length||"3735928559"!==c[0].ssrc)c.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),a.application.sources=c}});if(0<d.restrictBandwidth&&2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name){var e=a.jingle.contents[1];e.application&&e.application.bandwidth&&
e.application.bandwidth.bandwidth||(a.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:d.restrictBandwidth.toString()},a.sdp=g.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"outgoing"}))}a.jingle.contents.forEach(function(a){var c=a.transport||{};c.ufrag&&(d.iceCredentials.remote[a.name]={ufrag:c.ufrag,pwd:c.pwd})});a.sdp=g.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"incoming"});d.remoteDescription=a.jingle}a.sdp.split("\r\n").forEach(function(a){0===
a.indexOf("a=candidate:")&&d._checkRemoteCandidate(a)});d.pc.setRemoteDescription(new RTCSessionDescription(a),function(){c()},c)};c.prototype.answerAudioOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},a)};c.prototype.answerBroadcastOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},a)};c.prototype.answer=function(a,c){var d=2===arguments.length;this._answer(d&&a?a:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},
d?c:a)};c.prototype.handleAnswer=function(a,c){c=c||function(){};var d=this;a.jingle&&(a.sdp=g.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"incoming"}),d.remoteDescription=a.jingle,a.jingle.contents.forEach(function(a){var c=a.transport||{};c.ufrag&&(d.iceCredentials.remote[a.name]={ufrag:c.ufrag,pwd:c.pwd})}));a.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d._checkRemoteCandidate(a)});d.pc.setRemoteDescription(new RTCSessionDescription(a),function(){d.wtFirefox&&
window.setTimeout(function(){d.firefoxcandidatebuffer.forEach(function(a){d.pc.addIceCandidate(new RTCIceCandidate(a),function(){},function(a){d.emit("error",a)});d._checkRemoteCandidate(a.candidate)});d.firefoxcandidatebuffer=null},d.wtFirefox);c(null)},c)};c.prototype.close=function(){this.pc.close();this._localDataChannels=[];this._remoteDataChannels=[];this.emit("close")};c.prototype._answer=function(a,c){c=c||function(){};var d=this;if(!this.pc.remoteDescription)throw Error("remoteDescription not set");
if("closed"===this.pc.signalingState)return c("Already closed");d.pc.createAnswer(function(a){var e=[];if(d.enableChromeNativeSimulcast&&(a.jingle=g.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"}),2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name)){var b=a.jingle.contents[1].application.sourceGroups||[],h=!1;b.forEach(function(a){"SIM"==a.semantics&&(h=!0)});if(!h&&a.jingle.contents[1].application.sources.length){var u=JSON.parse(JSON.stringify(a.jingle.contents[1].application.sources[0]));
u.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(u);e.push(a.jingle.contents[1].application.sources[0].ssrc);e.push(u.ssrc);b.push({semantics:"SIM",sources:e});e=JSON.parse(JSON.stringify(u));e.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(e);b.push({semantics:"FID",sources:[u.ssrc,e.ssrc]});a.jingle.contents[1].application.sourceGroups=b;a.sdp=g.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),
direction:"outgoing"})}}var p={type:"answer",sdp:a.sdp};d.assumeSetLocalSuccess&&(b=f(p),d.emit("answer",b),c(null,b));d._candidateBuffer=[];d.pc.setLocalDescription(a,function(){if(d.config.useJingle){var e=g.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"});e.sid=d.config.sid;d.localDescription=e;p.jingle=e}d.enableChromeNativeSimulcast&&(p.jingle||(p.jingle=g.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"})),p.jingle.contents[1].application.sources.forEach(function(a,c){a.parameters=
a.parameters.map(function(a){"msid"===a.key&&(a.value+="-"+Math.floor(c/2));return a})}),p.sdp=g.toSessionSDP(p.jingle,{sid:d.sdpSessionID,role:d._role(),direction:"outgoing"}));p.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d._checkLocalCandidate(a)});d.assumeSetLocalSuccess||(e=f(p),d.emit("answer",e),c(null,e))},function(a){d.emit("error",a);c(a)})},function(a){d.emit("error",a);c(a)},a)};c.prototype._onIce=function(a){var c=this;if(a.candidate){if(!this.dontSignalCandidates){a=
a.candidate;var d={candidate:{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex}};this._checkLocalCandidate(a.candidate);var e=g.toCandidateJSON(a.candidate);if(this.eliminateDuplicateCandidates&&"relay"===e.type){var b=this._candidateBuffer.filter(function(a){return"relay"===a.type}).map(function(a){return a.foundation+":"+a.component});var f=b.indexOf(e.foundation+":"+e.component);if(-1<f&&e.priority>>24>=b[f].priority>>24)return}if("max-bundle"===this.config.bundlePolicy&&(b=
this._candidateBuffer.filter(function(a){return e.type===a.type}).map(function(a){return a.address+":"+a.port}),f=b.indexOf(e.address+":"+e.port),-1<f))return;if("require"!==this.config.rtcpMuxPolicy||"2"!==e.component){this._candidateBuffer.push(e);if(c.config.useJingle&&(a.sdpMid||(a.sdpMid=c.pc.remoteDescription&&"offer"===c.pc.remoteDescription.type?c.remoteDescription.contents[a.sdpMLineIndex].name:c.localDescription.contents[a.sdpMLineIndex].name),c.iceCredentials.local[a.sdpMid]||g.toSessionJSON(c.pc.localDescription.sdp,
{role:c._role(),direction:"outgoing"}).contents.forEach(function(a){var d=a.transport||{};d.ufrag&&(c.iceCredentials.local[a.name]={ufrag:d.ufrag,pwd:d.pwd})}),d.jingle={contents:[{name:a.sdpMid,creator:c._role(),transport:{transportType:"iceUdp",ufrag:c.iceCredentials.local[a.sdpMid].ufrag,pwd:c.iceCredentials.local[a.sdpMid].pwd,candidates:[e]}}]},0<c.batchIceCandidates)){0===c.batchedIceCandidates.length&&window.setTimeout(function(){var a={};c.batchedIceCandidates.forEach(function(c){c=c.contents[0];
a[c.name]||(a[c.name]=c);a[c.name].transport.candidates.push(c.transport.candidates[0])});var d={jingle:{contents:[]}};Object.keys(a).forEach(function(c){d.jingle.contents.push(a[c])});c.batchedIceCandidates=[];c.emit("ice",d)},c.batchIceCandidates);c.batchedIceCandidates.push(d.jingle);return}this.emit("ice",d)}}}else this.emit("endOfCandidates")};c.prototype._onDataChannel=function(a){a=a.channel;this._remoteDataChannels.push(a);this.emit("addChannel",a)};c.prototype.createDataChannel=function(a,
c){a=this.pc.createDataChannel(a,c);this._localDataChannels.push(a);return a};c.prototype.getStats=function(){if("function"===typeof arguments[0]){var a=arguments[0];this.pc.getStats().then(function(c){a(null,c)},function(c){a(c)})}else return this.pc.getStats.apply(this.pc,arguments)};e.exports=c},{"lodash.clonedeep":36,"sdp-jingle-json":45,util:63,wildemitter:65}],45:[function(a,e,d){var c=a("./lib/tosdp"),g=a("./lib/tojson");d.toIncomingSDPOffer=function(a){return c.toSessionSDP(a,{role:"responder",
direction:"incoming"})};d.toOutgoingSDPOffer=function(a){return c.toSessionSDP(a,{role:"initiator",direction:"outgoing"})};d.toIncomingSDPAnswer=function(a){return c.toSessionSDP(a,{role:"initiator",direction:"incoming"})};d.toOutgoingSDPAnswer=function(a){return c.toSessionSDP(a,{role:"responder",direction:"outgoing"})};d.toIncomingMediaSDPOffer=function(a){return c.toMediaSDP(a,{role:"responder",direction:"incoming"})};d.toOutgoingMediaSDPOffer=function(a){return c.toMediaSDP(a,{role:"initiator",
direction:"outgoing"})};d.toIncomingMediaSDPAnswer=function(a){return c.toMediaSDP(a,{role:"initiator",direction:"incoming"})};d.toOutgoingMediaSDPAnswer=function(a){return c.toMediaSDP(a,{role:"responder",direction:"outgoing"})};d.toCandidateSDP=c.toCandidateSDP;d.toMediaSDP=c.toMediaSDP;d.toSessionSDP=c.toSessionSDP;d.toIncomingJSONOffer=function(a,c){return g.toSessionJSON(a,{role:"responder",direction:"incoming",creators:c})};d.toOutgoingJSONOffer=function(a,c){return g.toSessionJSON(a,{role:"initiator",
direction:"outgoing",creators:c})};d.toIncomingJSONAnswer=function(a,c){return g.toSessionJSON(a,{role:"initiator",direction:"incoming",creators:c})};d.toOutgoingJSONAnswer=function(a,c){return g.toSessionJSON(a,{role:"responder",direction:"outgoing",creators:c})};d.toIncomingMediaJSONOffer=function(a,c){return g.toMediaJSON(a,{role:"responder",direction:"incoming",creator:c})};d.toOutgoingMediaJSONOffer=function(a,c){return g.toMediaJSON(a,{role:"initiator",direction:"outgoing",creator:c})};d.toIncomingMediaJSONAnswer=
function(a,c){return g.toMediaJSON(a,{role:"initiator",direction:"incoming",creator:c})};d.toOutgoingMediaJSONAnswer=function(a,c){return g.toMediaJSON(a,{role:"responder",direction:"outgoing",creator:c})};d.toCandidateJSON=g.toCandidateJSON;d.toMediaJSON=g.toMediaJSON;d.toSessionJSON=g.toSessionJSON},{"./lib/tojson":48,"./lib/tosdp":49}],46:[function(a,e,d){d.lines=function(a){return a.split("\r\n").filter(function(a){return 0<a.length})};d.findLine=function(a,d,e){for(var c=a.length,g=0;g<d.length;g++)if(d[g].substr(0,
c)===a)return d[g];if(!e)return!1;for(d=0;d<e.length;d++)if(e[d].substr(0,c)===a)return e[d];return!1};d.findLines=function(a,d,e){for(var c=[],b=a.length,g=0;g<d.length;g++)d[g].substr(0,b)===a&&c.push(d[g]);if(c.length||!e)return c;for(d=0;d<e.length;d++)e[d].substr(0,b)===a&&c.push(e[d]);return c};d.mline=function(a){a=a.substr(2).split(" ");for(var c={media:a[0],port:a[1],proto:a[2],formats:[]},d=3;d<a.length;d++)a[d]&&c.formats.push(a[d]);return c};d.rtpmap=function(a){a=a.substr(9).split(" ");
var c={id:a.shift()};a=a[0].split("/");c.name=a[0];c.clockrate=a[1];c.channels=3==a.length?a[2]:"1";return c};d.sctpmap=function(a){a=a.substr(10).split(" ");return{number:a.shift(),protocol:a.shift(),streams:a.shift()}};d.fmtp=function(a){for(var c,d=a.substr(a.indexOf(" ")+1).split(";"),e=[],b=0;b<d.length;b++)c=d[b].split("="),a=c[0].trim(),c=c[1],a&&c?e.push({key:a,value:c}):a&&e.push({key:"",value:a});return e};d.crypto=function(a){a=a.substr(9).split(" ");return{tag:a[0],cipherSuite:a[1],keyParams:a[2],
sessionParams:a.slice(3).join(" ")}};d.fingerprint=function(a){a=a.substr(14).split(" ");return{hash:a[0],value:a[1]}};d.extmap=function(a){a=a.substr(9).split(" ");var c={},d=a.shift(),e=d.indexOf("/");0<=e?(c.id=d.substr(0,e),c.senders=d.substr(e+1)):(c.id=d,c.senders="sendrecv");c.uri=a.shift()||"";return c};d.rtcpfb=function(a){a=a.substr(10).split(" ");var c={};c.id=a.shift();c.type=a.shift();"trr-int"===c.type?c.value=a.shift():c.subtype=a.shift()||"";c.parameters=a;return c};d.candidate=function(a){a=
0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" ");for(var c={foundation:a[0],component:a[1],protocol:a[2]&&a[2].toLowerCase(),priority:a[3],ip:a[4],port:a[5],type:a[7],generation:"0"},d=8;d<a.length;d+=2)"raddr"===a[d]?c.relAddr=a[d+1]:"rport"===a[d]?c.relPort=a[d+1]:"generation"===a[d]?c.generation=a[d+1]:"tcptype"===a[d]&&(c.tcpType=a[d+1]);c.network="1";return c};d.sourceGroups=function(a){for(var c=[],d=0;d<a.length;d++){var e=a[d].substr(13).split(" ");c.push({semantics:e.shift(),
sources:e})}return c};d.sources=function(a){for(var c=[],d={},e=0;e<a.length;e++){var b=a[e].substr(7).split(" "),f=b.shift();if(!d[f]){var h={ssrc:f,parameters:[]};c.push(h);d[f]=h}b=b.join(" ").split(":");h=b.shift();b=b.join(":")||null;d[f].parameters.push({key:h,value:b})}return c};d.groups=function(a){for(var c=[],d,e=0;e<a.length;e++)d=a[e].substr(8).split(" "),c.push({semantics:d.shift(),contents:d});return c};d.bandwidth=function(a){a=a.substr(2).split(":");var c={};c.type=a.shift();c.bandwidth=
a.shift();return c};d.msid=function(a){a=a.substr(7);var c=a.split(" ");return{msid:a,mslabel:c[0],label:c[1]}}},{}],47:[function(a,e,d){e.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",
responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],48:[function(a,e,d){var c=a("./senders"),b=a("./parsers"),f=Math.random();d._setIdCounter=function(a){f=a};d.toSessionJSON=function(a,c){var e,g=c.creators||[],f=c.role||"initiator";c=c.direction||"outgoing";
var h=a.split("\r\nm=");for(e=1;e<h.length;e++)h[e]="m="+h[e],e!==h.length-1&&(h[e]+="\r\n");var p=h.shift()+"\r\n",u=b.lines(p);a={};var k=[];for(e=0;e<h.length;e++)k.push(d.toMediaJSON(h[e],p,{role:f,direction:c,creator:g[e]||"initiator"}));a.contents=k;g=b.findLines("a=group:",u);g.length&&(a.groups=b.groups(g));return a};d.toMediaJSON=function(a,e,g){var f=g.creator||"initiator",h=g.role||"initiator",p=g.direction||"outgoing",v=b.lines(a);a=b.lines(e);e=b.mline(v[0]);f={creator:f,name:e.media,
application:{applicationType:"rtp",media:e.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==e.media&&(f.application={applicationType:"datachannel"},f.transport.sctp=[]);var u=f.application,k=f.transport;if(e=b.findLine("a=mid:",v))f.name=e.substr(6);b.findLine("a=sendrecv",v,a)?f.senders="both":b.findLine("a=sendonly",v,a)?f.senders=c[h][p].sendonly:b.findLine("a=recvonly",v,a)?f.senders=c[h][p].recvonly:
b.findLine("a=inactive",v,a)&&(f.senders="none");if("rtp"==u.applicationType){if(e=b.findLine("b=",v))u.bandwidth=b.bandwidth(e);if(e=b.findLine("a=ssrc:",v))u.ssrc=e.substr(7).split(" ")[0];b.findLines("a=rtpmap:",v).forEach(function(a){var c=b.rtpmap(a);c.parameters=[];c.feedback=[];b.findLines("a=fmtp:"+c.id,v).forEach(function(a){c.parameters=b.fmtp(a)});b.findLines("a=rtcp-fb:"+c.id,v).forEach(function(a){c.feedback.push(b.rtcpfb(a))});u.payloads.push(c)});b.findLines("a=crypto:",v,a).forEach(function(a){u.encryption.push(b.crypto(a))});
b.findLine("a=rtcp-mux",v)&&(u.mux=!0);b.findLines("a=rtcp-fb:*",v).forEach(function(a){u.feedback.push(b.rtcpfb(a))});b.findLines("a=extmap:",v).forEach(function(a){a=b.extmap(a);a.senders=c[h][p][a.senders];u.headerExtensions.push(a)});e=b.findLines("a=ssrc-group:",v);u.sourceGroups=b.sourceGroups(e||[]);e=b.findLines("a=ssrc:",v);var z=u.sources=b.sources(e||[]);if(e=b.findLine("a=msid:",v)){var l=b.msid(e);["msid","mslabel","label"].forEach(function(a){for(var c=0;c<z.length;c++){for(var d=!1,
e=0;e<z[c].parameters.length;e++)z[c].parameters[e].key===a&&(d=!0);d||z[c].parameters.push({key:a,value:l[a]})}})}b.findLine("a=x-google-flag:conference",v,a)&&(u.googConferenceFlag=!0)}e=b.findLines("a=fingerprint:",v,a);var ia=b.findLine("a=setup:",v,a);e.forEach(function(a){a=b.fingerprint(a);ia&&(a.setup=ia.substr(8));k.fingerprints.push(a)});e=b.findLine("a=ice-ufrag:",v,a);g=b.findLine("a=ice-pwd:",v,a);e&&g&&(k.ufrag=e.substr(12),k.pwd=g.substr(10),k.candidates=[],b.findLines("a=candidate:",
v,a).forEach(function(a){k.candidates.push(d.toCandidateJSON(a))}));"datachannel"==u.applicationType&&b.findLines("a=sctpmap:",v).forEach(function(a){a=b.sctpmap(a);k.sctp.push(a)});return f};d.toCandidateJSON=function(a){a=b.candidate(a.split("\r\n")[0]);a.id=(f++).toString(36).substr(0,12);return a}},{"./parsers":46,"./senders":47}],49:[function(a,e,d){var c=a("./senders");d.toSessionSDP=function(a,c){var e=c.sid||a.sid||Date.now(),b=c.time||Date.now(),g=["v=0","o=- "+e+" "+b+" IN IP4 0.0.0.0",
"s=-","t=0 0"];e=a.contents||[];var f=!1;e.forEach(function(a){a.application.sources&&a.application.sources.length&&(f=!0)});f&&g.push("a=msid-semantic: WMS *");(a.groups||[]).forEach(function(a){g.push("a=group:"+a.semantics+" "+a.contents.join(" "))});e.forEach(function(a){g.push(d.toMediaSDP(a,c))});return g.join("\r\n")+"\r\n"};d.toMediaSDP=function(a,e){var b=[],g=e.role||"initiator",f=e.direction||"outgoing",h=a.application;e=a.transport;var u=h.payloads||[],k=e&&e.fingerprints||[],v=[];"datachannel"==
h.applicationType?(v.push("application"),v.push("1"),v.push("DTLS/SCTP"),e.sctp&&e.sctp.forEach(function(a){v.push(a.number)})):(v.push(h.media),v.push("1"),0<k.length?v.push("UDP/TLS/RTP/SAVPF"):h.encryption&&0<h.encryption.length?v.push("RTP/SAVPF"):v.push("RTP/AVPF"),u.forEach(function(a){v.push(a.id)}));b.push("m="+v.join(" "));b.push("c=IN IP4 0.0.0.0");h.bandwidth&&h.bandwidth.type&&h.bandwidth.bandwidth&&b.push("b="+h.bandwidth.type+":"+h.bandwidth.bandwidth);"rtp"==h.applicationType&&b.push("a=rtcp:1 IN IP4 0.0.0.0");
e&&(e.ufrag&&b.push("a=ice-ufrag:"+e.ufrag),e.pwd&&b.push("a=ice-pwd:"+e.pwd),k.forEach(function(a){b.push("a=fingerprint:"+a.hash+" "+a.value);a.setup&&b.push("a=setup:"+a.setup)}),e.sctp&&e.sctp.forEach(function(a){b.push("a=sctpmap:"+a.number+" "+a.protocol+" "+a.streams)}));"rtp"==h.applicationType&&b.push("a="+(c[g][f][a.senders]||"sendrecv"));b.push("a=mid:"+a.name);h.sources&&h.sources.length&&(h.sources[0].parameters||[]).forEach(function(a){"msid"===a.key&&b.push("a=msid:"+a.value)});h.mux&&
b.push("a=rtcp-mux");(h.encryption||[]).forEach(function(a){b.push("a=crypto:"+a.tag+" "+a.cipherSuite+" "+a.keyParams+(a.sessionParams?" "+a.sessionParams:""))});h.googConferenceFlag&&b.push("a=x-google-flag:conference");u.forEach(function(a){var c="a=rtpmap:"+a.id+" "+a.name+"/"+a.clockrate;a.channels&&"1"!=a.channels&&(c+="/"+a.channels);b.push(c);if(a.parameters&&a.parameters.length){c=["a=fmtp:"+a.id];var d=[];a.parameters.forEach(function(a){d.push((a.key?a.key+"=":"")+a.value)});c.push(d.join(";"));
b.push(c.join(" "))}a.feedback&&a.feedback.forEach(function(c){"trr-int"===c.type?b.push("a=rtcp-fb:"+a.id+" trr-int "+(c.value?c.value:"0")):b.push("a=rtcp-fb:"+a.id+" "+c.type+(c.subtype?" "+c.subtype:""))})});h.feedback&&h.feedback.forEach(function(a){"trr-int"===a.type?b.push("a=rtcp-fb:* trr-int "+(a.value?a.value:"0")):b.push("a=rtcp-fb:* "+a.type+(a.subtype?" "+a.subtype:""))});(h.headerExtensions||[]).forEach(function(a){b.push("a=extmap:"+a.id+(a.senders?"/"+c[g][f][a.senders]:"")+" "+a.uri)});
(h.sourceGroups||[]).forEach(function(a){b.push("a=ssrc-group:"+a.semantics+" "+a.sources.join(" "))});(h.sources||[]).forEach(function(a){for(var c=0;c<a.parameters.length;c++){var d=a.parameters[c];b.push("a=ssrc:"+(a.ssrc||h.ssrc)+" "+d.key+(d.value?":"+d.value:""))}});(e.candidates||[]).forEach(function(a){b.push(d.toCandidateSDP(a))});return b.join("\r\n")};d.toCandidateSDP=function(a){var c=[];c.push(a.foundation);c.push(a.component);c.push(a.protocol.toUpperCase());c.push(a.priority);c.push(a.ip);
c.push(a.port);var d=a.type;c.push("typ");c.push(d);("srflx"===d||"prflx"===d||"relay"===d)&&a.relAddr&&a.relPort&&(c.push("raddr"),c.push(a.relAddr),c.push("rport"),c.push(a.relPort));a.tcpType&&"TCP"==a.protocol.toUpperCase()&&(c.push("tcptype"),c.push(a.tcpType));c.push("generation");c.push(a.generation||"0");return"a=candidate:"+c.join(" ")}},{"./senders":47}],50:[function(a,e,d){e.exports=a("./lib/")},{"./lib/":51}],51:[function(a,e,d){function c(a,c){"object"==typeof a&&(c=a,a=void 0);c=c||
{};a=b(a);var d=a.source,e=a.id;c.forceNew||c["force new connection"]||!1===c.multiplex?(p("ignoring socket cache for %s",d),c=h(d,c)):(k[e]||(p("new io instance for %s",d),k[e]=h(d,c)),c=k[e]);return c.socket(a.path)}var b=a("./url"),f=a("socket.io-parser"),h=a("./manager"),p=a("debug")("socket.io-client");e.exports=d=c;var k=d.managers={};d.protocol=f.protocol;d.connect=c;d.Manager=a("./manager");d.Socket=a("./socket")},{"./manager":52,"./socket":54,"./url":55,debug:10,"socket.io-parser":57}],52:[function(a,
e,d){function c(a,d){if(!(this instanceof c))return new c(a,d);a&&"object"==typeof a&&(d=a,a=void 0);d=d||{};d.path=d.path||"/socket.io";this.nsps={};this.subs=[];this.opts=d;this.reconnection(!1!==d.reconnection);this.reconnectionAttempts(d.reconnectionAttempts||Infinity);this.reconnectionDelay(d.reconnectionDelay||1E3);this.reconnectionDelayMax(d.reconnectionDelayMax||5E3);this.randomizationFactor(d.randomizationFactor||.5);this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),
jitter:this.randomizationFactor()});this.timeout(null==d.timeout?2E4:d.timeout);this.readyState="closed";this.uri=a;this.connected=[];this.encoding=!1;this.packetBuffer=[];this.encoder=new h.Encoder;this.decoder=new h.Decoder;(this.autoConnect=!1!==d.autoConnect)&&this.open()}a("./url");var b=a("engine.io-client"),f=a("./socket");d=a("component-emitter");var h=a("socket.io-parser"),p=a("./on"),k=a("component-bind");a("object-component");var w=a("debug")("socket.io-client:manager"),y=a("indexof"),
l=a("backo2");e.exports=c;c.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)};c.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id};d(c.prototype);c.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};c.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=
a;return this};c.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};c.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};c.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&
this.backoff.setMax(a);return this};c.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};c.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};c.prototype.open=c.prototype.connect=function(a){w("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;w("opening %s",this.uri);var c=this.engine=b(this.uri,this.opts),d=this;this.readyState="opening";this.skipReconnect=
!1;var e=p(c,"open",function(){d.onopen();a&&a()}),g=p(c,"error",function(c){w("connect_error");d.cleanup();d.readyState="closed";d.emitAll("connect_error",c);if(a){var e=Error("Connection error");e.data=c;a(e)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var f=this._timeout;w("connect attempt will timeout after %d",f);var h=setTimeout(function(){w("connect attempt timed out after %d",f);e.destroy();c.close();c.emit("error","timeout");d.emitAll("connect_timeout",f)},f);this.subs.push({destroy:function(){clearTimeout(h)}})}this.subs.push(e);
this.subs.push(g);return this};c.prototype.onopen=function(){w("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(p(a,"data",k(this,"ondata")));this.subs.push(p(this.decoder,"decoded",k(this,"ondecoded")));this.subs.push(p(a,"error",k(this,"onerror")));this.subs.push(p(a,"close",k(this,"onclose")))};c.prototype.ondata=function(a){this.decoder.add(a)};c.prototype.ondecoded=function(a){this.emit("packet",a)};c.prototype.onerror=function(a){w("error",a);
this.emitAll("error",a)};c.prototype.socket=function(a){var c=this.nsps[a];if(!c){c=new f(this,a);this.nsps[a]=c;var d=this;c.on("connect",function(){c.id=d.engine.id;~y(d.connected,c)||d.connected.push(c)})}return c};c.prototype.destroy=function(a){a=y(this.connected,a);~a&&this.connected.splice(a,1);this.connected.length||this.close()};c.prototype.packet=function(a){w("writing packet %j",a);var c=this;c.encoding?c.packetBuffer.push(a):(c.encoding=!0,this.encoder.encode(a,function(a){for(var d=0;d<
a.length;d++)c.engine.write(a[d]);c.encoding=!1;c.processPacketQueue()}))};c.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};c.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.decoder.destroy()};c.prototype.close=c.prototype.disconnect=function(){this.skipReconnect=!0;this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};
c.prototype.onclose=function(a){w("close");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};c.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)w("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var c=this.backoff.duration();w("will wait %dms before reconnect attempt",
c);this.reconnecting=!0;var d=setTimeout(function(){a.skipReconnect||(w("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(c){c?(w("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",c.data)):(w("reconnect success"),a.onreconnect())}))},c);this.subs.push({destroy:function(){clearTimeout(d)}})}};c.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=
!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":53,"./socket":54,"./url":55,backo2:4,"component-bind":7,"component-emitter":8,debug:10,"engine.io-client":11,indexof:32,"object-component":39,"socket.io-parser":57}],53:[function(a,e,d){e.exports=function(a,d,e){a.on(d,e);return{destroy:function(){a.removeListener(d,e)}}}},{}],54:[function(a,e,d){function c(a,c){this.io=a;this.nsp=c;this.json=this;this.ids=0;this.acks={};this.io.autoConnect&&this.open();this.receiveBuffer=
[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0}var b=a("socket.io-parser");d=a("component-emitter");var f=a("to-array"),h=a("./on"),p=a("component-bind"),k=a("debug")("socket.io-client:socket"),w=a("has-binary");e.exports=c;var y={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},l=d.prototype.emit;d(c.prototype);c.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=
[h(a,"open",p(this,"onopen")),h(a,"packet",p(this,"onpacket")),h(a,"close",p(this,"onclose"))]}};c.prototype.open=c.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();return this};c.prototype.send=function(){var a=f(arguments);a.unshift("message");this.emit.apply(this,a);return this};c.prototype.emit=function(a){if(y.hasOwnProperty(a))return l.apply(this,arguments),this;var c=f(arguments),d=b.EVENT;w(c)&&(d=b.BINARY_EVENT);
d={type:d,data:c};"function"==typeof c[c.length-1]&&(k("emitting packet with ack id %d",this.ids),this.acks[this.ids]=c.pop(),d.id=this.ids++);this.connected?this.packet(d):this.sendBuffer.push(d);return this};c.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};c.prototype.onopen=function(){k("transport is open - connecting");"/"!=this.nsp&&this.packet({type:b.CONNECT})};c.prototype.onclose=function(a){k("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",
a)};c.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case b.CONNECT:this.onconnect();break;case b.EVENT:this.onevent(a);break;case b.BINARY_EVENT:this.onevent(a);break;case b.ACK:this.onack(a);break;case b.BINARY_ACK:this.onack(a);break;case b.DISCONNECT:this.ondisconnect();break;case b.ERROR:this.emit("error",a.data)}};c.prototype.onevent=function(a){var c=a.data||[];k("emitting event %j",c);null!=a.id&&(k("attaching ack callback to event"),c.push(this.ack(a.id)));this.connected?
l.apply(this,c):this.receiveBuffer.push(c)};c.prototype.ack=function(a){var c=this,d=!1;return function(){if(!d){d=!0;var e=f(arguments);k("sending ack %j",e);var g=w(e)?b.BINARY_ACK:b.ACK;c.packet({type:g,id:a,data:e})}}};c.prototype.onack=function(a){k("calling ack %s with %j",a.id,a.data);this.acks[a.id].apply(this,a.data);delete this.acks[a.id]};c.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};c.prototype.emitBuffered=function(){var a;
for(a=0;a<this.receiveBuffer.length;a++)l.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};c.prototype.ondisconnect=function(){k("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};c.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};c.prototype.close=c.prototype.disconnect=function(){this.connected&&
(k("performing disconnect (%s)",this.nsp),this.packet({type:b.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this}},{"./on":53,"component-bind":7,"component-emitter":8,debug:10,"has-binary":30,"socket.io-parser":57,"to-array":59}],55:[function(a,e,d){(function(c){var d=a("parseuri"),b=a("debug")("socket.io-client:url");e.exports=function(a,e){var g=a;e=e||c.location;null==a&&(a=e.protocol+"//"+e.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?
e.protocol+a:e.hostname+a),/^(https?|wss?):\/\//.test(a)||(b("protocol-less url %s",a),a="undefined"!=typeof e?e.protocol+"//"+a:"https://"+a),b("parse %s",a),g=d(a));g.port||(/^(http|ws)$/.test(g.protocol)?g.port="80":/^(http|ws)s$/.test(g.protocol)&&(g.port="443"));g.path=g.path||"/";g.id=g.protocol+"://"+g.host+":"+g.port;g.href=g.protocol+"://"+g.host+(e&&e.port==g.port?"":":"+g.port);return g}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{debug:10,parseuri:42}],56:[function(a,e,d){(function(c){var e=a("isarray"),b=a("./is-buffer");d.deconstructPacket=function(a){function c(a){if(!a)return a;if(b(a)){var g={_placeholder:!0,num:d.length};d.push(a);return g}if(e(a)){g=Array(a.length);for(var f=0;f<a.length;f++)g[f]=c(a[f]);return g}if("object"==typeof a&&!(a instanceof Date)){g={};for(f in a)g[f]=c(a[f]);return g}return a}var d=[];a.data=c(a.data);a.attachments=d.length;return{packet:a,buffers:d}};d.reconstructPacket=function(a,
c){function d(a){if(a&&a._placeholder)return c[a.num];if(e(a))for(var b=0;b<a.length;b++)a[b]=d(a[b]);else if(a&&"object"==typeof a)for(b in a)a[b]=d(a[b]);return a}a.data=d(a.data);a.attachments=void 0;return a};d.removeBlobs=function(a,d){function g(a,p,u){if(!a)return a;if(c.Blob&&a instanceof Blob||c.File&&a instanceof File){f++;var k=new FileReader;k.onload=function(){u?u[p]=this.result:h=this.result;--f||d(h)};k.readAsArrayBuffer(a)}else if(e(a))for(k=0;k<a.length;k++)g(a[k],k,a);else if(a&&
"object"==typeof a&&!b(a))for(k in a)g(a[k],k,a)}var f=0,h=a;g(h);f||d(h)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./is-buffer":58,isarray:33}],57:[function(a,e,d){function c(){}function b(a){var c=!1;var e=""+a.type;if(d.BINARY_EVENT==a.type||d.BINARY_ACK==a.type)e+=a.attachments,e+="-";a.nsp&&"/"!=a.nsp&&(c=!0,e+=a.nsp);null!=a.id&&(c&&(e+=",",c=!1),e+=a.id);null!=a.data&&(c&&(e+=","),e+=w.stringify(a.data));k("encoded %j as %s",
a,e);return e}function f(a,c){l.removeBlobs(a,function(a){var d=l.deconstructPacket(a);a=b(d.packet);d=d.buffers;d.unshift(a);c(d)})}function h(){this.reconstructor=null}function p(a){this.reconPack=a;this.buffers=[]}var k=a("debug")("socket.io-parser"),w=a("json3");a("isarray");e=a("component-emitter");var l=a("./binary"),n=a("./is-buffer");d.protocol=4;d.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");d.CONNECT=0;d.DISCONNECT=1;d.EVENT=2;d.ACK=3;d.ERROR=4;d.BINARY_EVENT=
5;d.BINARY_ACK=6;d.Encoder=c;d.Decoder=h;c.prototype.encode=function(a,c){k("encoding packet %j",a);d.BINARY_EVENT==a.type||d.BINARY_ACK==a.type?f(a,c):(a=b(a),c([a]))};e(h.prototype);h.prototype.add=function(a){if("string"==typeof a){a:{var c={},e=0;c.type=Number(a.charAt(0));if(null==d.types[c.type])a={type:d.ERROR,data:"parser error"};else{if(d.BINARY_EVENT==c.type||d.BINARY_ACK==c.type){for(var b="";"-"!=a.charAt(++e)&&(b+=a.charAt(e),e!=a.length););if(b!=Number(b)||"-"!=a.charAt(e))throw Error("Illegal attachments");
c.attachments=Number(b)}if("/"==a.charAt(e+1))for(c.nsp="";++e;){b=a.charAt(e);if(","==b)break;c.nsp+=b;if(e==a.length)break}else c.nsp="/";b=a.charAt(e+1);if(""!==b&&Number(b)==b){for(c.id="";++e;){b=a.charAt(e);if(null==b||Number(b)!=b){--e;break}c.id+=a.charAt(e);if(e==a.length)break}c.id=Number(c.id)}if(a.charAt(++e))try{c.data=w.parse(a.substr(e))}catch(Oc){a={type:d.ERROR,data:"parser error"};break a}k("decoded %s as %j",a,c);a=c}}d.BINARY_EVENT==a.type||d.BINARY_ACK==a.type?(this.reconstructor=
new p(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(n(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};h.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};p.prototype.takeBinaryData=function(a){this.buffers.push(a);
return this.buffers.length==this.reconPack.attachments?(a=l.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};p.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":56,"./is-buffer":58,"component-emitter":8,debug:10,isarray:33,json3:34}],58:[function(a,e,d){(function(a){e.exports=function(c){return a.Buffer&&a.Buffer.isBuffer(c)||a.ArrayBuffer&&c instanceof ArrayBuffer}}).call(this,"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{}],59:[function(a,e,d){e.exports=function(a,d){for(var c=[],e=(d=d||0)||0;e<a.length;e++)c[e-d]=a[e];return c}},{}],60:[function(a,e,d){(function(a){(function(c){function b(a){for(var c=[],d=0,e=a.length,b,g;d<e;)b=a.charCodeAt(d++),55296<=b&&56319>=b&&d<e?(g=a.charCodeAt(d++),56320==(g&64512)?c.push(((b&1023)<<10)+(g&1023)+65536):(c.push(b),d--)):c.push(b);return c}function g(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+
" is not a scalar value");}function f(){if(t>=r)throw Error("Invalid byte index");var a=q[t]&255;t++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function h(){if(t>r)throw Error("Invalid byte index");if(t==r)return!1;var a=q[t]&255;t++;if(0==(a&128))return a;if(192==(a&224)){var c=f();a=(a&31)<<6|c;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){c=f();var d=f();a=(a&15)<<12|c<<6|d;if(2048<=a)return g(a),a;throw Error("Invalid continuation byte");
}if(240==(a&248)){c=f();d=f();var e=f();a=(a&15)<<18|c<<12|d<<6|e;if(65536<=a&&1114111>=a)return a}throw Error("Invalid UTF-8 detected");}var k="object"==typeof d&&d,l="object"==typeof e&&e&&e.exports==k&&e,n="object"==typeof a&&a;if(n.global===n||n.window===n)c=n;var v=String.fromCharCode,q,r,t;n={version:"2.0.0",encode:function(a){a=b(a);for(var c=a.length,d=-1,e,f="";++d<c;){e=a[d];if(0==(e&4294967168))e=v(e);else{var h="";0==(e&4294965248)?h=v(e>>6&31|192):0==(e&4294901760)?(g(e),h=v(e>>12&15|
224),h+=v(e>>6&63|128)):0==(e&4292870144)&&(h=v(e>>18&7|240),h+=v(e>>12&63|128),h+=v(e>>6&63|128));e=h+=v(e&63|128)}f+=e}return f},decode:function(a){q=b(a);r=q.length;t=0;a=[];for(var c;!1!==(c=h());)a.push(c);c=a.length;for(var d=-1,e,g="";++d<c;)e=a[d],65535<e&&(e-=65536,g+=v(e>>>10&1023|55296),e=56320|e&1023),g+=v(e);return g}};if(k&&!k.nodeType)if(l)l.exports=n;else{c={}.hasOwnProperty;for(var x in n)c.call(n,x)&&(k[x]=n[x])}else c.utf8=n})(this)}).call(this,"undefined"!==typeof global?global:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],61:[function(a,e,d){e.exports="function"===typeof Object.create?function(a,d){a.super_=d;a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,d){a.super_=d;var c=function(){};c.prototype=d.prototype;a.prototype=new c;a.prototype.constructor=a}},{}],62:[function(a,e,d){e.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===
typeof a.fill&&"function"===typeof a.readUInt8}},{}],63:[function(a,e,d){(function(c,e){function b(a,c){var e={seen:[],stylize:f};3<=arguments.length&&(e.depth=arguments[2]);4<=arguments.length&&(e.colors=arguments[3]);x(c)?e.showHidden=c:c&&d._extend(e,c);B(e.showHidden)&&(e.showHidden=!1);B(e.depth)&&(e.depth=2);B(e.colors)&&(e.colors=!1);B(e.customInspect)&&(e.customInspect=!0);e.colors&&(e.stylize=g);return k(e,a,e.depth)}function g(a,c){return(c=b.styles[c])?"\u001b["+b.colors[c][0]+"m"+a+"\u001b["+
b.colors[c][1]+"m":a}function f(a,c){return a}function h(a){var c={};a.forEach(function(a,d){c[a]=!0});return c}function k(a,c,e){if(a.customInspect&&c&&H(c.inspect)&&c.inspect!==d.inspect&&(!c.constructor||c.constructor.prototype!==c)){var b=c.inspect(e,a);C(b)||(b=k(a,b,e));return b}if(b=l(a,c))return b;var g=Object.keys(c),f=h(g);a.showHidden&&(g=Object.getOwnPropertyNames(c));if(E(c)&&(0<=g.indexOf("message")||0<=g.indexOf("description")))return n(c);if(0===g.length){if(H(c))return a.stylize("[Function"+
(c.name?": "+c.name:"")+"]","special");if(D(c))return a.stylize(RegExp.prototype.toString.call(c),"regexp");if(G(c))return a.stylize(Date.prototype.toString.call(c),"date");if(E(c))return n(c)}b="";var p=!1,u=["{","}"];t(c)&&(p=!0,u=["[","]"]);H(c)&&(b=" [Function"+(c.name?": "+c.name:"")+"]");D(c)&&(b=" "+RegExp.prototype.toString.call(c));G(c)&&(b=" "+Date.prototype.toUTCString.call(c));E(c)&&(b=" "+n(c));if(0===g.length&&(!p||0==c.length))return u[0]+b+u[1];if(0>e)return D(c)?a.stylize(RegExp.prototype.toString.call(c),
"regexp"):a.stylize("[Object]","special");a.seen.push(c);g=p?v(a,c,e,f,g):g.map(function(d){return q(a,c,e,f,d,p)});a.seen.pop();return r(g,b,u)}function l(a,c){if(B(c))return a.stylize("undefined","undefined");if(C(c))return c="'"+JSON.stringify(c).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(c,"string");if(A(c))return a.stylize(""+c,"number");if(x(c))return a.stylize(""+c,"boolean");if(null===c)return a.stylize("null","null")}function n(a){return"["+Error.prototype.toString.call(a)+
"]"}function v(a,c,d,e,b){for(var g=[],f=0,h=c.length;f<h;++f)Object.prototype.hasOwnProperty.call(c,String(f))?g.push(q(a,c,d,e,String(f),!0)):g.push("");b.forEach(function(b){b.match(/^\d+$/)||g.push(q(a,c,d,e,b,!0))});return g}function q(a,c,d,e,b,g){var f,h;c=Object.getOwnPropertyDescriptor(c,b)||{value:c[b]};c.get?h=c.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):c.set&&(h=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(e,b)||(f="["+b+"]");h||
(0>a.seen.indexOf(c.value)?(h=null===d?k(a,c.value,null):k(a,c.value,d-1),-1<h.indexOf("\n")&&(h=g?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special"));if(B(f)){if(g&&b.match(/^\d+$/))return h;f=JSON.stringify(""+b);f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=a.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=a.stylize(f,
"string"))}return f+": "+h}function r(a,c,d){var e=0;return 60<a.reduce(function(a,c){e++;0<=c.indexOf("\n")&&e++;return a+c.replace(/\u001b\[\d\d?m/g,"").length+1},0)?d[0]+(""===c?"":c+"\n ")+" "+a.join(",\n  ")+" "+d[1]:d[0]+c+" "+a.join(", ")+" "+d[1]}function t(a){return Array.isArray(a)}function x(a){return"boolean"===typeof a}function A(a){return"number"===typeof a}function C(a){return"string"===typeof a}function B(a){return void 0===a}function D(a){return F(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}
function F(a){return"object"===typeof a&&null!==a}function G(a){return F(a)&&"[object Date]"===Object.prototype.toString.call(a)}function E(a){return F(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function H(a){return"function"===typeof a}function I(a){return 10>a?"0"+a.toString(10):a.toString(10)}function L(){var a=new Date,c=[I(a.getHours()),I(a.getMinutes()),I(a.getSeconds())].join(":");return[a.getDate(),N[a.getMonth()],c].join(" ")}var M=/%[sdj%]/g;d.format=
function(a){if(!C(a)){for(var c=[],d=0;d<arguments.length;d++)c.push(b(arguments[d]));return c.join(" ")}d=1;var e=arguments,g=e.length;c=String(a).replace(M,function(a){if("%%"===a)return"%";if(d>=g)return a;switch(a){case "%s":return String(e[d++]);case "%d":return Number(e[d++]);case "%j":try{return JSON.stringify(e[d++])}catch(bh){return"[Circular]"}default:return a}});for(var f=e[d];d<g;f=e[++d])c=null!==f&&F(f)?c+(" "+b(f)):c+(" "+f);return c};d.deprecate=function(a,b){if(B(e.process))return function(){return d.deprecate(a,
b).apply(this,arguments)};if(!0===c.noDeprecation)return a;var g=!1;return function(){if(!g){if(c.throwDeprecation)throw Error(b);c.traceDeprecation?console.trace(b):console.error(b);g=!0}return a.apply(this,arguments)}};var J={},K;d.debuglog=function(a){B(K)&&(K=c.env.NODE_DEBUG||"");a=a.toUpperCase();if(!J[a])if((new RegExp("\\b"+a+"\\b","i")).test(K)){var e=c.pid;J[a]=function(){var c=d.format.apply(d,arguments);console.error("%s %d: %s",a,e,c)}}else J[a]=function(){};return J[a]};d.inspect=b;
b.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};b.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};d.isArray=t;d.isBoolean=x;d.isNull=function(a){return null===a};d.isNullOrUndefined=function(a){return null==a};d.isNumber=A;d.isString=C;d.isSymbol=function(a){return"symbol"===
typeof a};d.isUndefined=B;d.isRegExp=D;d.isObject=F;d.isDate=G;d.isError=E;d.isFunction=H;d.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};d.isBuffer=a("./support/isBuffer");var N="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");d.log=function(){console.log("%s - %s",L(),d.format.apply(d,arguments))};d.inherits=a("inherits");d._extend=function(a,c){if(!c||!F(c))return a;for(var d=Object.keys(c),
e=d.length;e--;)a[d[e]]=c[d[e]];return a}}).call(this,a("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":62,_process:43,inherits:61}],64:[function(a,e,d){if(window.mozRTCPeerConnection||navigator.mozGetUserMedia){var c="moz";var b=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)}else if(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)c="webkit",b=navigator.userAgent.match(/Chrom(e|ium)/)&&
parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10);a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;d=window.mozRTCIceCandidate||window.RTCIceCandidate;var f=window.mozRTCSessionDescription||window.RTCSessionDescription,h=window.webkitMediaStream||window.MediaStream,k="https:"===window.location.protocol&&("webkit"===c&&26<=b||"moz"===c&&33<=b),l=window.AudioContext||window.webkitAudioContext,w=document.createElement("video");w=w&&w.canPlayType&&
"probably"===w.canPlayType('video/webm; codecs="vp8", vorbis');var y=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;e.exports={prefix:c,browserVersion:b,support:!!a&&!!y,supportRTCPeerConnection:!!a,supportVp8:w,supportGetUserMedia:!!y,supportDataChannel:!!(a&&a.prototype&&a.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!h||!h.prototype.removeTrack),supportScreenSharing:!!k,AudioContext:l,
PeerConnection:a,SessionDescription:f,IceCandidate:d,MediaStream:h,getUserMedia:y}},{}],65:[function(a,e,d){function c(){}e.exports=c;c.mixin=function(a){a=a.prototype||a;a.isWildEmitter=!0;a.on=function(a,c,d){this.callbacks=this.callbacks||{};var e=3===arguments.length,b=e?arguments[2]:arguments[1];b._groupName=e?arguments[1]:void 0;(this.callbacks[a]=this.callbacks[a]||[]).push(b);return this};a.once=function(a,c,d){function e(){b.off(a,e);f.apply(this,arguments)}var b=this,g=3===arguments.length,
f=g?arguments[2]:arguments[1];this.on(a,g?arguments[1]:void 0,e);return this};a.releaseGroup=function(a){this.callbacks=this.callbacks||{};var c,d;for(c in this.callbacks){var e=this.callbacks[c];var b=0;for(d=e.length;b<d;b++)e[b]._groupName===a&&(e.splice(b,1),b--,d--)}return this};a.off=function(a,c){this.callbacks=this.callbacks||{};var d=this.callbacks[a];if(!d)return this;if(1===arguments.length)return delete this.callbacks[a],this;var e=d.indexOf(c);d.splice(e,1);0===d.length&&delete this.callbacks[a];
return this};a.emit=function(a){this.callbacks=this.callbacks||{};var c=[].slice.call(arguments,1),d=this.callbacks[a],e=this.getWildcardCallbacks(a),b;if(d){var g=d.slice();d=0;for(b=g.length;d<b&&g[d];++d)g[d].apply(this,c)}if(e)for(g=e.slice(),d=0,b=g.length;d<b&&g[d];++d)g[d].apply(this,[a].concat(c));return this};a.getWildcardCallbacks=function(a){this.callbacks=this.callbacks||{};var c,d=[];for(c in this.callbacks){var e=c.split("*");if("*"===c||2===e.length&&a.slice(0,e[0].length)===e[0])d=
d.concat(this.callbacks[c])}return d}};c.mixin(c)},{}],66:[function(a,e,d){function c(a,c,d){return c?new b(a,c):new b(a)}a=window;var b=a.WebSocket||a.MozWebSocket;e.exports=b?c:null;b&&(c.prototype=b.prototype)},{}],67:[function(a,e,d){function c(a){var c=!0;a.getTracks().forEach(function(a){c="ended"===a.readyState&&c});return c}function b(a){var c=this;k.call(this);this.id=a.id;this.parent=a.parent;this.type=a.type||"video";this.oneway=a.oneway||!1;this.sharemyscreen=a.sharemyscreen||!1;this.browserPrefix=
a.prefix;this.stream=a.stream;this.enableDataChannels=void 0===a.enableDataChannels?this.parent.config.enableDataChannels:a.enableDataChannels;this.receiveMedia=a.receiveMedia||this.parent.config.receiveMedia;this.channels={};this.sid=a.sid||Date.now().toString();this.pc=new h(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionConstraints);this.pc.on("ice",this.onIceCandidate.bind(this));this.pc.on("endOfCandidates",function(a){c.send("endOfCandidates",a)});this.pc.on("offer",
function(a){c.parent.config.nick&&(a.nick=c.parent.config.nick);c.send("offer",a)});this.pc.on("answer",function(a){c.parent.config.nick&&(a.nick=c.parent.config.nick);c.send("answer",a)});this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this));this.pc.on("addChannel",this.handleDataChannelAdded.bind(this));this.pc.on("removeStream",this.handleStreamRemoved.bind(this));this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded"));this.pc.on("iceConnectionStateChange",this.emit.bind(this,
"iceConnectionStateChange"));this.pc.on("iceConnectionStateChange",function(){switch(c.pc.iceConnectionState){case "failed":"offer"===c.pc.pc.localDescription.type&&(c.parent.emit("iceFailed",c),c.send("connectivityError"))}});this.pc.on("signalingStateChange",this.emit.bind(this,"signalingStateChange"));this.logger=this.parent.logger;"screen"===a.type?this.parent.localScreens&&this.parent.localScreens[0]&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreens[0]),
this.broadcaster=a.broadcaster):this.parent.localStreams.forEach(function(a){c.pc.addStream(a)});this.on("channelOpen",function(a){"https://simplewebrtc.com/protocol/filetransfer#inband-v1"===a.protocol&&(a.onmessage=function(d){d=JSON.parse(d.data);var e=new l.Receiver;e.receive(d,a);c.emit("fileTransfer",d,e);e.on("receivedFile",function(a,c){e.channel.close()})})});this.on("*",function(){c.parent.emit.apply(c.parent,arguments)})}d=a("util");var f=a("webrtcsupport"),h=a("rtcpeerconnection"),k=a("wildemitter"),
l=a("filetransfer");d.inherits(b,k);b.prototype.handleMessage=function(a){var c=this;this.logger.log("getting",a.type,a);a.prefix&&(this.browserPrefix=a.prefix);"offer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleOffer(a.payload,function(a){a||c.pc.answer(function(a,c){})})):"answer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleAnswer(a.payload)):"candidate"===a.type?this.pc.processIce(a.payload):"connectivityError"===
a.type?this.parent.emit("connectivityError",c):"mute"===a.type?this.parent.emit("mute",{id:a.from,name:a.payload.name}):"unmute"===a.type&&this.parent.emit("unmute",{id:a.from,name:a.payload.name})};b.prototype.send=function(a,c){c={to:this.id,sid:this.sid,broadcaster:this.broadcaster,roomType:this.type,type:a,payload:c,prefix:f.prefix};this.logger.log("sending",a,c);this.parent.emit("message",c)};b.prototype.sendDirectly=function(a,c,d){this.logger.log("sending via datachannel",a,c,{type:c,payload:d});
a=this.getDataChannel(a);if("open"!=a.readyState)return!1;a.send(d);return!0};b.prototype._observeDataChannel=function(a){var c=this;a.binaryType="arraybuffer";a.onclose=this.emit.bind(this,"channelClose",a);a.onerror=this.emit.bind(this,"channelError",a);a.onmessage=function(d){var e=new Uint32Array(d.data);c.emit("channelMessage",c,a.label,e,a,d)};a.onopen=this.emit.bind(this,"channelOpen",a)};b.prototype.getDataChannel=function(a,c){if(!f.supportDataChannel)return this.emit("error",Error("createDataChannel not supported"));
var d=this.channels[a];c||(c={});if(d)return d;d=this.channels[a]=this.pc.createDataChannel(a,c);d.binaryType="arraybuffer";this._observeDataChannel(d);return d};b.prototype.onIceCandidate=function(a){if(!this.closed)if(a){var c=this.parent.config.peerConnectionConfig;"moz"===f.prefix&&c&&c.iceTransports&&a.candidate&&a.candidate.candidate&&0>a.candidate.candidate.indexOf(c.iceTransports)?this.logger.log("Ignoring ice candidate not matching pcConfig iceTransports type: ",c.iceTransports):this.send("candidate",
a)}else this.logger.log("End of candidates.")};b.prototype.start=function(){this.enableDataChannels&&this.getDataChannel("simplewebrtc");this.pc.offer(this.receiveMedia,function(a,c){})};b.prototype.icerestart=function(){var a=this.receiveMedia;a.mandatory.IceRestart=!0;this.pc.offer(a,function(a,c){})};b.prototype.end=function(){this.closed||(this.pc.close(),this.handleStreamRemoved())};b.prototype.handleRemoteStreamAdded=function(a){var d=this;this.stream?this.logger.warn("Already have a remote stream"):
(this.stream=a.stream,this.stream.getTracks().forEach(function(a){a.addEventListener("ended",function(){c(d.stream)&&d.end()})}),this.parent.emit("peerStreamAdded",this))};b.prototype.handleStreamRemoved=function(){var a=this.parent.peers.indexOf(this);-1<a&&(this.parent.peers.splice(a,1),this.closed=!0,this.parent.emit("peerStreamRemoved",this))};b.prototype.handleDataChannelAdded=function(a){this.channels[a.label]=a;this._observeDataChannel(a)};b.prototype.sendFile=function(a){var c=new l.Sender,
d=this.getDataChannel("filetransfer"+(new Date).getTime(),{protocol:"https://simplewebrtc.com/protocol/filetransfer#inband-v1"});d.onopen=function(){d.send(JSON.stringify({size:a.size,name:a.name}));c.send(a,d)};d.onclose=function(){console.log("sender received transfer");c.emit("complete")};return c};e.exports=b},{filetransfer:26,rtcpeerconnection:44,util:63,webrtcsupport:64,wildemitter:65}],68:[function(a,e,d){function c(a){var c=this,d=a||{},e=this.config={url:"https://sandbox.simplewebrtc.com:443/",
socketio:{},connection:null,debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!1,peerVolumeWhenSpeaking:.25,media:{video:!0,audio:!0},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},localVideo:{autoplay:!0,mirror:!0,muted:!0}},g;var p=a.debug?a.logger||console:a.logger||z;this.logger=p;for(g in d)d.hasOwnProperty(g)&&(this.config[g]=d[g]);this.capabilities=h;f.call(this);var u=null===this.config.connection?this.connection=
new w(this.config):this.connection=this.config.connection;u.on("connect",function(){c.emit("connectionReady",u.getSessionid());c.sessionReady=!0;c.testReadiness()});u.on("message",function(a){var d=c.webrtc.getPeers(a.from,a.roomType);if("offer"===a.type){d.length&&d.forEach(function(c){c.sid==a.sid&&(e=c)});if(!e){var e=c.webrtc.createPeer({id:a.from,sid:a.sid,type:a.roomType,enableDataChannels:c.config.enableDataChannels&&"screen"!==a.roomType,sharemyscreen:"screen"===a.roomType&&!a.broadcaster,
broadcaster:"screen"!==a.roomType||a.broadcaster?null:c.connection.getSessionid()});c.emit("createdPeer",e)}e.handleMessage(a)}else d.length&&d.forEach(function(c){a.sid?c.sid===a.sid&&c.handleMessage(a):c.handleMessage(a)})});u.on("remove",function(a){x("rem1");n.gstarted()||a.id===c.connection.getSessionid()||(x("rem11"),c.webrtc.removePeers(a.id,a.type))});a.logger=this.logger;a.debug=!1;this.webrtc=new b(a);"mute unmute pauseVideo resumeVideo pause resume sendToAll sendDirectlyToAll getPeers".split(" ").forEach(function(a){c[a]=
c.webrtc[a].bind(c.webrtc)});this.webrtc.on("*",function(){c.emit.apply(c,arguments)});if(e.debug)this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:"));this.webrtc.on("localStream",function(){c.testReadiness()});this.webrtc.on("message",function(a){c.connection.emit("message",a)});this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this));this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this));this.config.adjustPeerVolume&&(this.webrtc.on("speaking",
this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1)));u.on("stunservers",function(a){c.webrtc.config.peerConnectionConfig.iceServers=a;c.emit("stunservers",a)});u.on("turnservers",function(a){c.webrtc.config.peerConnectionConfig.iceServers=c.webrtc.config.peerConnectionConfig.iceServers.concat(a);c.emit("turnservers",a)});this.webrtc.on("iceFailed",function(a){});this.webrtc.on("connectivityError",function(a){});this.webrtc.on("audioOn",
function(){c.webrtc.sendToAll("unmute",{name:"audio"})});this.webrtc.on("audioOff",function(){c.webrtc.sendToAll("mute",{name:"audio"})});this.webrtc.on("videoOn",function(){c.webrtc.sendToAll("unmute",{name:"video"})});this.webrtc.on("videoOff",function(){c.webrtc.sendToAll("mute",{name:"video"})});this.webrtc.on("localScreen",function(a){var d=document.createElement("video"),e=c.getRemoteVideoContainer();d.oncontextmenu=function(){return!1};d.id="localScreen";k(a,d);e&&e.appendChild(d);c.emit("localScreenAdded",
d);c.connection.emit("shareScreen");c.webrtc.peers.forEach(function(a){"video"===a.type&&(a=c.webrtc.createPeer({id:a.id,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},broadcaster:c.connection.getSessionid()}),c.emit("createdPeer",a),a.start())})});this.webrtc.on("localScreenStopped",function(a){c.getLocalScreen()&&c.stopScreenShare()});this.webrtc.on("channelMessage",function(a,d,e){"volume"==e.type&&c.emit("remoteVolumeChange",a,e.volume)});
this.config.autoRequestMedia&&this.startLocalVideo()}var b=a("./webrtc"),f=a("wildemitter"),h=a("webrtcsupport"),k=a("attachmediastream"),z=a("mockconsole"),w=a("./socketioconnection");c.prototype=Object.create(f.prototype,{constructor:{value:c}});c.prototype.leaveRoom=function(){if(this.roomName){for(this.connection.emit("leave");this.webrtc.peers.length;)this.webrtc.peers[0].end();this.getLocalScreen()&&this.stopScreenShare();this.emit("leftRoom",this.roomName);this.roomName=void 0}};c.prototype.disconnect=
function(){this.connection.disconnect();delete this.connection};c.prototype.handlePeerStreamAdded=function(a){var c=this,d=this.getRemoteVideoContainer(),e=k(a.stream);a.videoEl=e;e.id=this.getDomId(a);d&&d.appendChild(e);this.emit("videoAdded",e,a);window.setTimeout(function(){c.webrtc.isAudioEnabled()||a.send("mute",{name:"audio"});c.webrtc.isVideoEnabled()||a.send("mute",{name:"video"})},250)};c.prototype.handlePeerStreamRemoved=function(a){var c=this.getRemoteVideoContainer(),d=a.videoEl;this.config.autoRemoveVideos&&
c&&d&&c.removeChild(d);d&&this.emit("videoRemoved",d,a)};c.prototype.getDomId=function(a){return[a.id,a.type,a.broadcaster?"broadcasting":"incoming"].join("_")};c.prototype.setVolumeForAll=function(a){this.webrtc.peers.forEach(function(c){c.videoEl&&(c.videoEl.volume=a)})};c.prototype.joinRoom=function(a,c){var d=this;this.roomName=a;this.connection.emit("join",a,function(e,b){console.log("join CB",e);if(e)d.emit("error",e);else{if(!b.xtra){sa();O("game");$a();Cb(l.ERR_GAMELOAD,"#ff0000");return}r.room=
b.xtra;var g,f;for(g in b.clients){var h=b.clients[g];for(f in h)if(h[f]){var k=d.webrtc.createPeer({id:g,type:f,enableDataChannels:d.config.enableDataChannels&&"screen"!==f,receiveMedia:{offerToReceiveAudio:"screen"!==f&&d.config.receiveMedia.offerToReceiveAudio?1:0,offerToReceiveVideo:d.config.receiveMedia.offerToReceiveVideo}});d.emit("createdPeer",k);k.start()}}}c&&c(e,b);d.emit("joinedRoom",a)})};c.prototype.getEl=function(a){return"string"===typeof a?document.getElementById(a):a};c.prototype.startLocalVideo=
function(){var a=this;this.webrtc.start(this.config.media,function(c,d){c?a.emit("localMediaError",c):k(d,a.getLocalVideoContainer(),a.config.localVideo)})};c.prototype.stopLocalVideo=function(){this.webrtc.stop()};c.prototype.getLocalVideoContainer=function(){var a=this.getEl(this.config.localVideoEl);if(a&&"VIDEO"===a.tagName)return a.oncontextmenu=function(){return!1},a;if(a){var c=document.createElement("video");c.oncontextmenu=function(){return!1};a.appendChild(c);return c}};c.prototype.getRemoteVideoContainer=
function(){return this.getEl(this.config.remoteVideosEl)};c.prototype.shareScreen=function(a){this.webrtc.startScreenShare(a)};c.prototype.getLocalScreen=function(){return this.webrtc.localScreens&&this.webrtc.localScreens[0]};c.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var a=document.getElementById("localScreen"),c=this.getRemoteVideoContainer();this.config.autoRemoveVideos&&c&&a&&c.removeChild(a);a&&this.emit("videoRemoved",a);this.getLocalScreen()&&this.webrtc.stopScreenShare();
this.webrtc.peers.forEach(function(a){a.broadcaster&&a.end()})};c.prototype.testReadiness=function(){this.sessionReady&&(this.config.media.video||this.config.media.audio?0<this.webrtc.localStreams.length&&this.emit("readyToCall",this.connection.getSessionid()):this.emit("readyToCall",this.connection.getSessionid()))};c.prototype.createRoom=function(a,c){this.roomName=a;this.connection.emit("create",r.room,c)};c.prototype.sendFile=function(){if(!h.dataChannel)return this.emit("error",Error("DataChannelNotSupported"))};
e.exports=c},{"./socketioconnection":69,"./webrtc":70,attachmediastream:3,mockconsole:37,webrtcsupport:64,wildemitter:65}],69:[function(a,e,d){function c(a){this.connection=b.connect(a.url,a.socketio)}var b=a("socket.io-client");c.prototype.on=function(a,c){this.connection.on(a,c)};c.prototype.emit=function(){this.connection.emit.apply(this.connection,arguments)};c.prototype.getSessionid=function(){return this.connection.id};c.prototype.disconnect=function(){return this.connection.disconnect()};e.exports=
c},{"socket.io-client":50}],70:[function(a,e,d){function c(a){var c=this,d=a||{};this.config={debug:!1,peerConnectionConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[]},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},enableDataChannels:!0};var e;a=a.debug?a.logger||console:a.logger||f;this.logger=a;for(e in d)d.hasOwnProperty(e)&&(this.config[e]=d[e]);b.support||this.logger.error("Your browser doesn't seem to support WebRTC");this.peers=[];
h.call(this,this.config);this.on("speaking",function(){c.hardMuted||c.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"speaking"})))})});this.on("stoppedSpeaking",function(){c.hardMuted||c.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"stoppedSpeaking"})))})});this.on("volumeChange",function(a,d){c.hardMuted||c.peers.forEach(function(c){c.enableDataChannels&&
(c=c.getDataChannel("hark"),"open"==c.readyState&&c.send(JSON.stringify({type:"volume",volume:a})))})});if(this.config.debug)this.on("*",function(a,d,e){(c.config.logger===f?console:c.logger).log("event:",a,d,e)})}d=a("util");var b=a("webrtcsupport"),f=a("mockconsole"),h=a("localmedia"),k=a("./peer");d.inherits(c,h);c.prototype.createPeer=function(a){a.parent=this;a=new k(a);this.peers.push(a);return a};c.prototype.removePeers=function(a,c){this.getPeers(a,c).forEach(function(a){a.end()})};c.prototype.getPeers=
function(a,c){return this.peers.filter(function(d){return(!a||d.id===a)&&(!c||d.type===c)})};c.prototype.sendToAll=function(a,c){this.peers.forEach(function(d){d.send(a,c)})};c.prototype.sendDirectlyToAll=function(a,c,d){this.peers.forEach(function(e){e.enableDataChannels&&e.sendDirectly(a,c,d)})};e.exports=c},{"./peer":67,localmedia:35,mockconsole:37,util:63,webrtcsupport:64}]},{},[68])(68)})},dc,l=NaN,L=function(b,a,e){void 0===localStorage[b]&&(localStorage[b]=a);e&&(h(e).value=localStorage[b])};
L("name","Guest"+~~(1E3*Math.random()));L("color","#0000bd");var r={name:localStorage.name,color:localStorage.color},ab=function(){};console.log("%c nehhon %c POWER ","background: #00ffd4; color: #000; font-size:20px","background: #000; color: #00ffd4; font-size:20px");console.log("%c webmaster@nehhon.com ","background: #00ffd4; color: #000; font-size:20px");console.log("%c @nehhon ","background: #000; color: #00ffd4; font-size:20px");var h=function(b){return document.getElementById(b)};void 0===
localStorage.fullscreen&&(localStorage.fullscreen=!0);L("favMusic","originalMusic");L("musicRange",75);L("soundRange",100);L("goldRes",5E3);L("foodRes",5E3);L("stoneRes",5E3);L("woodRes",5E3);L("nplayed",0);L("infinity","true");L("mapx",256);L("terrain",0);L("visibility",0);L("peons",5);L("freePop",100);L("maxPop",200);L("zoomMult",70);L("scrollSpeed",50);L("menuOpacity",72);L("nightcycle",!0);L("terrainRND",0);L("visits",0);L("gameType",0);L("AIlevel",100);L("scale",100);L("shadows",!0);L("fog",
0);L("deathsounds",!0);localStorage.visits++;console.log=ab;console.error=ab;console.warn=ab;console.info=ab;"tza.red"!==location.hostname&&(location.href="https://tza.red");var Tc=0;window.addEventListener("error",function(b,a,e){x(b);l=b.error&&b.error.stack?b.error.message+"-"+b.error.stack:b.lineno+":"+b.colno+" "+b.message;if(f){b=f.getExtension("WEBGL_debug_renderer_info");var d=f.getParameter(b.UNMASKED_VENDOR_WEBGL),c=f.getParameter(b.UNMASKED_RENDERER_WEBGL)}l+="\nvendor:"+d+"\nrenderer:"+
c+"\nRAM:"+navigator.deviceMemory+"\nplataform:"+navigator.platform+"\nnavigator:"+(r.navigator||"Chrome")+"\nversion:"+r.version+"\nprocessors:"+navigator.hardwareConcurrency+"\nerrnum:"+Tc+"\nlang:"+r.lang+"\ndate:"+(new Date).toString()+"\nplayed:"+re(t.now&&t.now()||0)+"\nonline:"+!!t.online+"\n-----------------------------------------------\n-------------------------\n----------\n";10>Tc&&(Tc++,fetch(atob("aHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9hcGkvd2ViaG9va3MvNjcwNjc1NDEwNzkwNjQ1NzYxL3p4V0hhSlFoWDZtQW9HRUZ2VnVEQ2MzZXoza2F2cjJHaGFNTExvdHB6cXp5b0JaaWFRNFJSYU9rTjFZU2xBNHRtLW5f"),
{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"error",content:l})}));kb(l,"Error")});var bb=function(b){b.parentNode.removeChild(b)},ca=function(b,a,e,d){b=document.createElement(b);a.appendChild(b);e&&(b.innerHTML=e);d&&(b.style.cssText=d);return b},Cb=function(b,a){h("notifybar")||(ca("div",document.getElementsByTagName("main")[0]).id="notifybar");var e=h("notifybar"),d=document.createElement("div");d.innerHTML=b;a&&(d.style.background=a);e.appendChild(d);
setTimeout(bb,11E3,d)},Uf=location;(function(){var b=!!window.opr||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),a="undefined"!==typeof InstallTrigger,e=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),d=!!document.documentMode,c=!d&&!!window.StyleMedia,g=!!window.chrome&&!!window.chrome.webstore,f;b?f="Opera":a?f="Firefox":e?f="Safari":d?f="IE":c?f="Edge":g&&(f="Chrome");r.navLang=localStorage.language||navigator.language||navigator.userLanguage;b=r.navLang.substr(0,
2);"es"==b?a=["Tzared","Juego de estrategia en tiempo real para navegadores web, juega solo o con amigos","tzared,jugar,multijugador,juego,online,navegador web,tzar"]:"it"==b?a=["Tzared","Gioco di strategia in tempo reale per browser web, giocare da soli o con gli amici","tzared,giocare,multigiocatore,gioco,online,navigatore,tzar,web"]:"pl"==b?a=["Tzared","Gra strategiczna w czasie rzeczywistym dla przegl\u0105darek internetowych, bawi\u0107 si\u0119 samotnie lub z przyjaci\u00f3\u0142mi","tzared,gra,multiplayer,online,tzar,przegl\u0105darka internetowa"]:
"ru"==b?a=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0434\u043b\u044f \u0432\u0435\u0431-\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u0432, \u0438\u0433\u0440\u0430\u0442\u044c \u0432 \u043e\u0434\u0438\u043d\u043e\u0447\u043a\u0443 \u0438\u043b\u0438 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438","\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u044c\u0442\u0438\u043f\u043b\u0435\u0435\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u0435\u0440,\u043e\u0433\u043d\u0451\u043c \u0438 \u043c\u0435\u0447\u043e\u043c"]:
"pt"==b?a=["Tzared","Jogo de estrat\u00e9gia em tempo real para navegadores da web, jogar sozinho ou com amigos","tzared,jogar,multiplayer,jogo,online,navegador web,tzar"]:"bg"==b?a=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0447\u0435\u0441\u043a\u0430 \u0438\u0433\u0440\u0430 \u0432 \u0440\u0435\u0430\u043b\u043d\u043e \u0432\u0440\u0435\u043c\u0435 \u0437\u0430 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0438, \u0438\u0433\u0440\u0430\u0439\u0442\u0435 \u0441\u0430\u043c\u0438 \u0438\u043b\u0438 \u0441 \u043f\u0440\u0438\u044f\u0442\u0435\u043b\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u0442\u0438\u043f\u043b\u0435\u0439\u044a\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u044a\u0440"]:"de"==b?a=["Tzared","Echtzeit-Strategiespiel f\u00fcr Webbrowser, alleine oder mit Freunden spielen","tzared,multiplayer,spiel,online,Webbrowser,tzar"]:"cz"==b?a=["Tzared","Strategick\u00e1 hra v re\u00e1ln\u00e9m \u010dase pro webov\u00e9 prohl\u00ed\u017ee\u010de, hr\u00e1t sama nebo s p\u0159\u00e1teli",
"tzared,play,multiplayer,hra,online,browser,tzar,web"]:"se"==b?a=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"]:(a=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"],b="en");document.getElementsByTagName("html")[0].lang=b;document.title=a[0];r.title=a[0];document.getElementsByTagName("meta").description=a[1];document.getElementsByTagName("meta").keywords=
a[2];a=new Date;a=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());r.versionInt=361;r.version="v"+r.versionInt/10;r.versionDate=a-1584372258447;localStorage.version!==r.version&&(localStorage.version=r.version,Cb("Updated to "+r.version));h("info").innerHTML="Work in progress - Beta "+r.version+" - Updated "+~~(r.versionDate/864E5)+" days ago";r.lang="en es it pt ru pl bg de cz".split(" ").indexOf(b);0>r.lang&&(r.lang=
0);r.langstr=b;r.team=0;r.race=0;r.navigator=f;r.mx=151;r.onlineID=null;r.temperature=0;r.cdn="nehhon/"})();var Uc=function(b){b--;var a=new XMLHttpRequest;a.open("GET",r.cdn+r.langstr+".json",!0);a.onload=function(){l=JSON.parse(a.response);Y=[l.SP_SETUPMAP_RACE_1.split("|")[0],l.SP_SETUPMAP_RACE_2.split("|")[0],l.SP_SETUPMAP_RACE_3.split("|")[0],l.ORDERS_NAMES_E_COMMON.toLocaleUpperCase()];for(var e=["mult0","<span>"+l.MAINSCR_MULTI.split("|")[0]+"</span>","rnd0","<span>"+l.MAINSCR_SINGLE.split("| ")[0]+
"</span>","load0","<span>"+l.SINGLESCR_LOAD.split("| ")[1]+"</span>","editor0","<span>"+l.MAPEDITOR+"</span>","settings0","<span>"+l.MP_MPLAYER_SETTINGS+"</span>","about",l.ABOUT,"multSection",l.MAINSCR_MULTI.split("|")[0],"offlineSection",l.MAINSCR_SINGLE.split("|")[0],"returnmenu",l.CAMPAIGN_BACK,"savelocal",l.SAVE_GAME_CONTENT,"help",l.GUIDE],d=0,c=e.length;d<c;d+=2)h(e[d])&&(h(e[d]).innerHTML=e[d+1])};a.send()};Uc(r.lang);Uc.translated=!0;var x=console.log,Vf=function(){O("alert");sa()},kb=function(b,
a,e,d){var c=h("alert");c||(Oa("alert"),c=h("alert"),x(d),c.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var m=h("alerttitle"),f=h("alerttext");h("alertok").onclick=Vf;c.style.display="block";m.innerHTML=a||l&&l.TZAREDIT_S2||"Warning";h("alertok").innerHTML=d||l&&l.DLG_BTNS_OK||"Ok";b&&(f.innerHTML=b);e?h("alertok").style.display=
"none":h("alertok").style.display="block";cb()},ja={size:512,load:0,xtra:[],common:1,xtraRes:[]},Vc=function(b){h("loadingtext").innerHTML=l.DOWNLOADING_GRAPHICS+" "+b+"%"};ja.check=function(){ja.load++;if(ja.load>=ja.images){if(Pa.updating)return Pa.updating();se();Fa.check()}};var Ga=function(b,a){this.address=b;this.size=a};Ga.prototype.viewU8=function(){return ec(this.address,this.size)};Ga.prototype.viewU32=function(){return new Uint32Array(ka.buffer,this.address,this.size)};Ga.prototype.viewF32=
function(){return Wc(this.address,this.size)};Ga.prototype.viewI32=function(){return new Int32Array(ka.buffer,this.address,this.size)};var Pa=function(b){Pa.updating=b;h("loadingtext").innerHTML=l.DOWNLOADING_GRAPHICS;ja.images=3;b&&ja.images--;ja.load=0;n.downloadGra("true"==localStorage.shadows);Vc.progress=0;Vc.total=0;Date.now();ja.check();h("loadingtext").innerHTML=l.DOWNLOADING_GRAPHICS;Pa.intvFunc()};Pa.intvFunc=function(){n.txtLoad()==ja.images-ja.load?(ja.load++,ja.check()):setTimeout(Pa.intvFunc,
15)};var Xc=[{name:"Grass"},{name:"Trenkorian"},{name:"Desert"},{name:"Snow"},{name:"Summer"},{name:"Rareland"},{name:"Jungle"}],te=function(){var b=localStorage.version,a=localStorage.name,e=localStorage.color,d=localStorage.lastVersion;localStorage.clear();localStorage.name=a;localStorage.color=e;localStorage.version=b;localStorage.lastVersion=d;localStorage.update=1;window.caches&&caches.keys().then(function(a){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())caches.delete(c.value)});
location.reload(!0)};localStorage.lastVersion!=r.versionInt&&(localStorage.lastVersion=r.versionInt,te());(function(){if(1==localStorage.update){delete localStorage.update;var b=indexedDB.deleteDatabase("emscripten_filesystem");b.onsuccess=function(a){x(a)};b=indexedDB.deleteDatabase("nh2019");b.onsuccess=function(a){x(a)}}else fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(a){return a.text().then(function(a){x(a);a!=r.versionInt&&te()})})})();(function(){"serviceWorker"in navigator&&
(navigator.serviceWorker.register("sworker.js").then(function(b){},function(b){x(b)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)})})();var la="GENERAL_DEFGAMENAME;GENERAL_GAMENAME;GENERAL_VERSION;GENERAL_NET_TITLE;GENERAL_CANCEL;GENERAL_OK;GENERAL_YES;GENERAL_NO;GENERAL_CLOSE;GENERAL_IGNORE;GENERAL_ABORT;GENERAL_YOUSURE;GENERAL_REFRESH;GENERAL_KICK;GENERAL_QLOAD;GENERAL_QSAVE;ADDS_MOREHOUSES;ADDS_AISEND;CHECK_INSERTCD;CHECK_INSERTCD2;CHECK_INSERTCD3;CHECK_NOCD;CHECK_BADEXE;ERR_CTFCANTSPAWN;ERR_DXFAILED;ERR_VMODE;ERR_OFFSCREEN;ERR_GPF;ERR_INCORRECTVER;ERR_GAMEFULL;ERR_BROWSEFAIL;ERR_NONET;ERR_SNDINIT;ERR_GAMECREATE;ERR_GAMELOAD;ERR_GAMELOAD2;ERR_DEMOVER;ERR_DEMORNDMAP;ERR_INVALIDCFG;ERR_INITMIDI;ERR_DSINIT;ERR_MCIINIT;ERR_BETACONNECT;ERR_SERVERCANCEL;ERR_SERVERKICK;ERR_ORDERROOM;ERR_MENUROOM;ERR_NETASYNC;ERR_NETASYNC2;ERR_NETASYNCBAD;ERR_NOTERRAIN;ERR_NOMAP;ERR_CLIENTSYNC;ERR_RULESLOAD;ERR_MAPWRONGVER;ERR_WRONGAI;ERR_WRONGOBJS;ERR_UNKNOWN;ERR_FATAL;ERR_NONFATAL;ERR_ERRORCODE;DEFMSG_MOVEDAVANCE;DEFMSG_MOVESNEAK;DEFMSG_ATTACK;DEFMSG_ATTACKTYPE;DEFMSG_ENTERHOLDER;DEFMSG_MINE;DEFMSG_BUILD;DEFMSG_REPAIR;DEFMSG_DIG;DEFMSG_CAPTURE;DEFMSG_CHOP;DEFMSG_ENTERSHIP;DEFMSG_FISHING;DEFMSG_PICKITEM;DEFMSG_PICKITEMINST;DEFMSG_GATHERRESITEMS;DEFMSG_TENDCOWS;DEFMSG_LEAVETRADE;DEFMSG_RETURNGOODS;DEFMSG_DUMMYTRAIN;DEFMSG_REMOVERALLYPOINT;DEFMSG_SETRALLYPOINT;DEFMSG_SETRALLYPOINTDA;DEFMSG_SETRALLYPOINTADV;DEFMSG_NOMAPTITLE;DEFMSG_NODECR;Q_QUIT_TITLE;Q_QUIT;Q_RESIGN;Q_DISCONNECT;MSG_CLIENT_QUIT;MSG_LOAD_OBJDEFS;MSG_LOAD_TERRAIN;MSG_LOAD_OBJECTS;MSG_LOAD_FINAL;MSG_LOAD_AI;MSG_LOAD_DONE;MSG_GAME_DESTROY;MSG_GAME_CREATE;MSG_GAME_RANDOM;MSG_GAME_RESTART;MSG_GAME_LOAD;MSG_GAME_LOAD_OBJ;MSG_GAME_INIT;MSG_RESADDED;MSG_NET_JOIN;MSG_NET_BROWSE;MSG_TREE;MSG_GAME_SPEED;MSG_GAME_SPEED_SLOWEST;MSG_GAME_SPEED_SLOW;MSG_GAME_SPEED_NORMAL;MSG_GAME_SPEED_FAST;MSG_GAME_SPEED_FASTEST;MSG_SYS_ERROR;MSG_SYS_TITLE;MSG_SYS_CONT;MSG_SYS_ABORT;MSG_SYS_YES;MSG_SYS_NO;MSG_SYS_IGNORE;MSG_DISCONNECT;VIEWMSG_POPLIMIT1;VIEWMSG_POPLIMIT2;VIEWMSG_NOTGOLD;VIEWMSG_NOTMANNA;VIEWMSG_NOTPOWER;VIEWMSG_MAGICGATEWAYCAP;VIEWMSG_QUICKSAVED;VIEWMSG_NOMPCHEAT;VIEWMSG_CHEATSENABLED;VIEWMSG_PLAYER_RESIGNED;VIEWMSG_PLAYER_DISCONECTED;VIEWMSG_PLAYER_DEFEATED;VIEWMSG_NEWQUEST;VIEWMSG_DEMO_END;VIEWMSG_NOTRES;VIEWMSG_GOLD;VIEWMSG_STONE;VIEWMSG_FOOD;VIEWMSG_WOOD;VIEWMSG_MANNA;VIEWMSG_SELL_ITEM;VIEWMSG_WAIT_PLAYERS;VIEWMSG_WAIT_RESPONSE;VIEWMSG_PLAYER_ENEMY;VIEWMSG_PLAYER_NEUTRAL;VIEWMSG_PLAYER_ALLY;VIEWMSG_PLAYER_WANT_ENEMY;VIEWMSG_PLAYER_WANT_NEUTRAL;VIEWMSG_PLAYER_WANT_ALLY;VIEWMSG_SPELL_LEARNED;VIEWMSG_PAUSE;NOTIFY_UNDER_ATTACK;NOTIFY_CAPTURED;NOTIFY_KILLED;NOTIFY_DESTROYED;NOTIFY_BUILT;NOTIFY_PRODUCED;NOTIFY_DISCOVERED;NOTIFY_UPGRADED;SELVIEW_UNITS;SELVIEW_BERSERKKINGDOM;MAINSCR_SINGLE;MAINSCR_MULTI;MAINSCR_PREF;MAINSCR_CREDITS;MAINSCR_QUIT;SINGLESCR_CAMPAIGN;SINGLESCR_CUSTOM;SINGLESCR_RANDOM;SINGLESCR_LOAD;SINGLESCR_BACK;SP_CHOOSEMAP_T_CUSTOMMAP;SP_CHOOSEMAP_T_MAP;SP_CHOOSEMAP_T_DESCRIPTION;SP_CHOOSEMAP_PLAY;SP_CHOOSEMAP_BACK;SP_SETUPMAP_T_NUM_PLAYERS;SP_SETUPMAP_T_GAME_TYPE;SP_SETUPMAP_T_VICT_COND;SP_SETUPMAP_T_SCORE_LIM;SP_SETUPMAP_T_TIME_LIM;SP_SETUPMAP_T_DIFF_LVL;SP_SETUPMAP_T_ST_RES;SP_SETUPMAP_T_MAP_DECR;SP_SETUPMAP_T_FOG;SP_SETUPMAP_T_EXPOLRE;SP_SETUPMAP_T_MAPDEF;SP_SETUPMAP_T_POPLIMIT;SP_SETUPMAP_BACK;SP_SETUPMAP_PLAY;SP_SETUPMAP_RACE_0;SP_SETUPMAP_RACE_1;SP_SETUPMAP_RACE_2;SP_SETUPMAP_RACE_3;SP_SETUPMAP_G_TYPE_0;SP_SETUPMAP_G_TYPE_1;SP_SETUPMAP_G_TYPE_2;SP_SETUPMAP_VCOND_0;SP_SETUPMAP_VCOND_1;SP_SETUPMAP_VCOND_2;SP_SETUPMAP_VCOND_3;SP_SETUPMAP_DIFFLVL_0;SP_SETUPMAP_DIFFLVL_1;SP_SETUPMAP_DIFFLVL_2;SP_SETUPMAP_RESURCS_0;SP_SETUPMAP_RESURCS_1;SP_SETUPMAP_RESURCS_2;SP_SETUPMAP_RESURCS_3;MP_SEARCH_T_PL_NAME;MP_SEARCH_T_IPX;MP_SEARCH_T_TCP;MP_SEARCH_T_IP;MP_SEARCH_T_LOBBY;MP_SEARCH_T_GAMES;MP_SEARCH_T_INFORM;MP_SEARCH_T_GAMENAME;MP_SEARCH_CREATE;MP_SEARCH_SEARCH;MP_SEARCH_JOIN;MP_SEARCH_BACK;MP_MPLAYER_PLAY;MP_MPLAYER_SETTINGS;MP_MPLAYER_DISCONNECT;MP_MPLAYER_RACE_0;MP_MPLAYER_RACE_1;MP_MPLAYER_RACE_2;MP_MPLAYER_RACE_3;MP_MPLAYER_NAME_0;MP_MPLAYER_NAME_1;MP_MPLAYER_NAME_2;MP_SETUPMAP_T_RANDOM;MP_SETUPMAP_T_CUSTOM;MP_SETUPMAP_T_CUSTOM_LIST;MP_SETUPMAP_T_MAP_DECR;MP_SETUPMAP_T_GAME_TYPE;MP_SETUPMAP_T_VICT_COND;MP_SETUPMAP_T_SCORE_LIM;MP_SETUPMAP_T_TIME_LIM;MP_SETUPMAP_T_DIFF_LVL;MP_SETUPMAP_T_ST_RES;MP_SETUPMAP_T_MAP_SIZE;MP_SETUPMAP_T_MAP_RES;MP_SETUPMAP_T_MAP_TYPE;MP_SETUPMAP_T_TERRAIN;MP_SETUPMAP_T_GSLOCATIONS;MP_SETUPMAP_T_ANIMALS;MP_SETUPMAP_T_RIVERS;MP_SETUPMAP_T_MITEMS;MP_SETUPMAP_T_CLIFFS;MP_SETUPMAP_T_FOG;MP_SETUPMAP_T_EXPOLRE;MP_SETUPMAP_T_WEATHER;MP_SETUPMAP_T_DAY;MP_SETUPMAP_T_POPLIMIT;MP_SETUPMAP_T_USEMAPSET;MP_SETUPMAP_T_GATEWAYS;MP_SETUPMAP_T_COMP;MP_SETUPMAP_T_OPEN;MP_SETUPMAP_T_DISABLE;MP_SETUPMAP_G_TYPE_0;MP_SETUPMAP_G_TYPE_1;MP_SETUPMAP_G_TYPE_2;MP_SETUPMAP_VCOND_0;MP_SETUPMAP_VCOND_1;MP_SETUPMAP_VCOND_2;MP_SETUPMAP_VCOND_3;MP_SETUPMAP_DIFFLVL_0;MP_SETUPMAP_DIFFLVL_1;MP_SETUPMAP_DIFFLVL_2;MP_SETUPMAP_RESURCS_0;MP_SETUPMAP_RESURCS_1;MP_SETUPMAP_RESURCS_2;MP_SETUPMAP_RESURCS_3;MP_SETUPMAP_CANCEL;MP_SETUPMAP_ACCEPT;MP_SETUPMAP_M_SIZE_0;MP_SETUPMAP_M_SIZE_1;MP_SETUPMAP_M_SIZE_2;MP_SETUPMAP_M_SIZE_3;MP_SETUPMAP_M_SIZE_4;MP_SETUPMAP_M_SIZE_5;MP_SETUPMAP_M_SIZE_6;MP_SETUPMAP_M_RES_0;MP_SETUPMAP_M_RES_1;MP_SETUPMAP_M_RES_2;MP_SETUPMAP_M_TYPE_0;MP_SETUPMAP_M_TYPE_1;MP_SETUPMAP_M_TYPE_2;MP_SETUPMAP_M_TYPE_3;MP_SETUPMAP_M_TYPE_4;MP_SETUPMAP_M_TYPE_5;MP_SETUPMAP_AI_ASSIST;GAME_SCR_MENU;GAME_SCR_DIPLOMACY;GAME_SCR_CHAT;DLG_BTNS_OK;DLG_BTNS_CANCEL;WND_QUESTS_CURQUEST;WND_QUESTS_CLOSE;WND_QUESTS_PAGE;WND_QUESTS_NONE;WND_MESSAGE_CLOSE;SP_SETUPRND_T_NUM_PLAYERS;SP_SETUPRND_T_GAME_TYPE;SP_SETUPRND_T_VICT_COND;SP_SETUPRND_T_SCORE_LIM;SP_SETUPRND_T_TIME_LIM;SP_SETUPRND_T_DIFF_LVL;SP_SETUPRND_T_ST_RES;SP_SETUPRND_T_FOG;SP_SETUPRND_T_EXPOLRE;SP_SETUPRND_T_MAP_SIZE;SP_SETUPRND_T_MAP_RES;SP_SETUPRND_T_MAP_TYPE;SP_SETUPRND_T_TERRAIN;SP_SETUPRND_T_GSLOCATIONS;SP_SETUPRND_T_ANIMALS;SP_SETUPRND_T_RIVERS;SP_SETUPRND_T_MITEMS;SP_SETUPRND_T_CLIFFS;SP_SETUPRND_T_POPLIMIT;SP_SETUPRND_T_GATEWAYS;SP_SETUPRND_BACK;SP_SETUPRND_PLAY;SP_SETUPRND_RACE_0;SP_SETUPRND_RACE_1;SP_SETUPRND_RACE_2;SP_SETUPRND_RACE_3;SP_SETUPRND_G_TYPE_0;SP_SETUPRND_G_TYPE_1;SP_SETUPRND_G_TYPE_2;SP_SETUPRND_VCOND_0;SP_SETUPRND_VCOND_1;SP_SETUPRND_VCOND_2;SP_SETUPRND_VCOND_3;SP_SETUPRND_DIFFLVL_0;SP_SETUPRND_DIFFLVL_1;SP_SETUPRND_DIFFLVL_2;SP_SETUPRND_RESURCS_0;SP_SETUPRND_RESURCS_1;SP_SETUPRND_RESURCS_2;SP_SETUPRND_RESURCS_3;SP_SETUPRND_M_SIZE_0;SP_SETUPRND_M_SIZE_1;SP_SETUPRND_M_SIZE_2;SP_SETUPRND_M_SIZE_3;SP_SETUPRND_M_SIZE_4;SP_SETUPRND_M_SIZE_5;SP_SETUPRND_M_SIZE_6;SP_SETUPRND_M_RES_0;SP_SETUPRND_M_RES_1;SP_SETUPRND_M_RES_2;SP_SETUPRND_M_TYPE_0;SP_SETUPRND_M_TYPE_1;SP_SETUPRND_M_TYPE_2;SP_SETUPRND_M_TYPE_3;SP_SETUPRND_M_TYPE_4;SP_SETUPRND_M_TYPE_5;OPTIONS_T_SOPT;OPTIONS_T_SVOL;OPTIONS_T_USP;OPTIONS_T_BS;OPTIONS_T_NS;OPTIONS_T_MOPT;OPTIONS_T_MV;OPTIONS_T_CD;OPTIONS_T_GOPT;OPTIONS_T_GS;OPTIONS_T_SS;OPTIONS_T_PD;OPTIONS_T_UINT;OPTIONS_T_HC;OPTIONS_T_ML;OPTIONS_T_WE;OPTIONS_T_DN;OPTIONS_OK;ENDGAMEDLG_QUIT;ENDGAMEDLG_LOAD;ENDGAMEDLG_SAVE;ENDGAMEDLG_NEXT;ENDGAMEDLG_STAT;ENDGAMEDLG_RESTART;ENDGAMEDLG_WIN1;ENDGAMEDLG_WIN2;ENDGAMEDLG_LOSE1;ENDGAMEDLG_LOSE2;PEONS_CHOP;PEONS_DIG;PEONS_MINE;PEONS_BUILD;PEONS_REPAIR;PEONS_TEND COWS;PEONS_EXPLORE;PEONS_CAPTURE;PEONS_ATTACK;PEONS_AI FAR BUILD;PEONS_GATHER RESOURCE ITEMS;PEONS_USE TRANSPORT;CHAT_T_CHAT;LOAD_T_LOAD;LOAD_TYPE_0;LOAD_TYPE_1;LOAD_TYPE_2;LOAD_LOAD;LOAD_DEL;LOAD_CANCEL;SAVE_T_SAVE;SAVE_NEW;SAVE_SAVE;SAVE_DEL;SAVE_CANCEL;CAMPAIGN_T_CAM;CAMPAIGN_T_DESCR;CAMPAIGN_T_EMISS;CAMPAIGN_T_EMISDES;CAMPAIGN_BACK;CAMPAIGN_PLAY;EDIT_T_GAMENAME;DIPLOMACY_T_TITLE;DIPLOMACY_TRIBUTE;DIPLOMACY_SHVICTORY;DIPLOMACY_ACCEPT;DIPLOMACY_CANCEL;TRIBUTE_T_TITLE;TRIBUTE_CANCEL;TRIBUTE_SEND;MENU_INST;MENU_LOAD;MENU_SAVE;MENU_OPTI;MENU_REST;MENU_QUIT;MENU_BACK;MENU_SURR;MENU_DISCONNECT;OBJECTS_ACADEMY;OBJECTS_ARCHER;OBJECTS_BALLISTA;OBJECTS_BARRACK;OBJECTS_BAT;OBJECTS_BEAR;OBJECTS_BIRD;OBJECTS_BLACKSMITH;OBJECTS_BRIDGE;OBJECTS_CARPET;OBJECTS_CASTLE;OBJECTS_CATAPULT;OBJECTS_CATHEDRAL;OBJECTS_CHARIOT;OBJECTS_CHURCH E;OBJECTS_CHURCH R;OBJECTS_CHURCH A;OBJECTS_COW;OBJECTS_CRUSADEANCHOR;OBJECTS_CRUSADER;OBJECTS_DRAGON;OBJECTS_DUMMY;OBJECTS_DWARF;OBJECTS_EAGLE;OBJECTS_ENICHAR;OBJECTS_FARM;OBJECTS_FIELD;OBJECTS_FISH;OBJECTS_FISHING_BOAT;OBJECTS_FISHPATCH;OBJECTS_FOOTMAN E;OBJECTS_FOOTMAN A;OBJECTS_FOOTMAN R;OBJECTS_GALLEON;OBJECTS_GATE_STONE;OBJECTS_GATE_WOOD;OBJECTS_GHOST;OBJECTS_GROUND_OBJECT;OBJECTS_GROUND_PATCH;OBJECTS_HARBOR;OBJECTS_HCATAPULT;OBJECTS_HEAVY_CAVALRY;OBJECTS_HORSE_ARCHER;OBJECTS_HORSE_SAMURAI;OBJECTS_HOUSE;OBJECTS_HULK;OBJECTS_ITEM;OBJECTS_ITEM_FLAG;OBJECTS_ITEM_HEALTH;OBJECTS_ITEM_MAGIC;OBJECTS_ITEM_PLUSPLUS;OBJECTS_ITEM_SCROLL;OBJECTS_ITEM_SOUL;OBJECTS_JIHAD_WARRIOR;OBJECTS_JINN;OBJECTS_KNIGHT;OBJECTS_LONGBOWMAN;OBJECTS_LUMBER;OBJECTS_MACEMAN E;OBJECTS_MACEMAN R;OBJECTS_MACEMAN A;OBJECTS_MAGE;OBJECTS_MAGETOWER;OBJECTS_MAGICWORKSHOP;OBJECTS_MARKET;OBJECTS_MONK;OBJECTS_MOSQUE;OBJECTS_NINJA;OBJECTS_ORK;OBJECTS_OUTPOST;OBJECTS_PEON;OBJECTS_PIKEMAN;OBJECTS_PRIEST;OBJECTS_RES_GOLD;OBJECTS_RES_STONE;OBJECTS_RESITEM;OBJECTS_RUIN;OBJECTS_SHAOLINN;OBJECTS_SKELETON;OBJECTS_SPY;OBJECTS_STABLE;OBJECTS_STORAGE;OBJECTS_TAVERN;OBJECTS_TCGUILD;OBJECTS_TOWER_STONE;OBJECTS_TOWER_STONE2;OBJECTS_TOWER_WOOD;OBJECTS_TOWER_WOOD2;OBJECTS_TOWER_ROCKET;OBJECTS_TRADER E;OBJECTS_TRADER R;OBJECTS_TROLL;OBJECTS_WALL_STONE;OBJECTS_WALL_WOOD;OBJECTS_WHIRLPOOL;OBJECTS_WORKSHOP;OBJECTS_XEBEC;OBJECTS_MAGICGATEWAY;OBJECTS_EVILCASTLE;ORDERS_NAMES_???;ORDERS_NAMES_FISHING_BOAT;ORDERS_NAMES_FISHING;ORDERS_NAMES_LOAN_RETURN;ORDERS_NAMES_LOAN;ORDERS_NAMES_LOAN_GOLD;ORDERS_NAMES_LOAN_STONE;ORDERS_NAMES_LOAN_IRON;ORDERS_NAMES_LOAN_FOOD;ORDERS_NAMES_LOAN_WOOD;ORDERS_NAMES_BRIBE;ORDERS_NAMES_REVEAL_SELF;ORDERS_NAMES_IMPERSONATE;ORDERS_NAMES_BECOME_JIHADW;ORDERS_NAMES_BECOME_PRIEST;ORDERS_NAMES_CLOAK;ORDERS_NAMES_UNCLOAK;ORDERS_NAMES_MURDER;ORDERS_NAMES_ITEM_USE;ORDERS_NAMES_ITEM_DROP;ORDERS_NAMES_ITEM_KILL;ORDERS_NAMES_ITEM_BERSERK;ORDERS_NAMES_MOVE;ORDERS_NAMES_REPAIR;ORDERS_NAMES_CAPTURE;ORDERS_NAMES_HARVEST;ORDERS_NAMES_ATTACK;ORDERS_NAMES_ATTACK_GROUND;ORDERS_NAMES_HOLD_STEADY;ORDERS_NAMES_SELECT_CRUSADERS;ORDERS_NAMES_STAND_GROUND;ORDERS_NAMES_ATTACK_TYPE;ORDERS_NAMES_EXORCISM;ORDERS_NAMES_PICK_ITEM;ORDERS_NAMES_GUARD;ORDERS_NAMES_PATROL;ORDERS_NAMES_GATEOPEN;ORDERS_NAMES_GATECLOSE;ORDERS_NAMES_GATE_SUBAI_ON;ORDERS_NAMES_GATE_SUBAI_OFF;ORDERS_NAMES_E_BARRACK;ORDERS_NAMES_DUMMY;ORDERS_NAMES_TCGUILD;ORDERS_NAMES_E_BLACKSMITH;ORDERS_NAMES_MAGETOWER;ORDERS_NAMES_WALL_STONE;ORDERS_NAMES_WALL_WOOD;ORDERS_NAMES_E_BUILD;ORDERS_NAMES_R_BUILD;ORDERS_NAMES_A_BUILD;ORDERS_NAMES_E_CASTLE;ORDERS_NAMES_MAGICWORKSHOP;ORDERS_NAMES_CATHEDRAL;ORDERS_NAMES_SHAOLINN;ORDERS_NAMES_MOSQUE;ORDERS_NAMES_E_CHURCH;ORDERS_NAMES_E_FARM;ORDERS_NAMES_E_FOOTMAN;ORDERS_NAMES_A_RHONIN;ORDERS_NAMES_R_JANISSARY;ORDERS_NAMES_ORK;ORDERS_NAMES_R_SATRAP;ORDERS_NAMES_R_FOOTMAN;ORDERS_NAMES_R_SPEARMAN;ORDERS_NAMES_JINN;ORDERS_NAMES_DWARF;ORDERS_NAMES_TROLL;ORDERS_NAMES_A_HORSEARCHER;ORDERS_NAMES_R_HORSEARCHER;ORDERS_NAMES_R_CAVALRY;ORDERS_NAMES_A_HORSESAMURAI;ORDERS_NAMES_E_ARCHER;ORDERS_NAMES_R_ARCHER;ORDERS_NAMES_A_ARCHER;ORDERS_NAMES_A_SAMURAI;ORDERS_NAMES_E_MAGE;ORDERS_NAMES_R_MAGE;ORDERS_NAMES_A_MAGE;ORDERS_NAMES_E_OUTPOST;ORDERS_NAMES_E_HARBOR;ORDERS_NAMES_E_LUMBER;ORDERS_NAMES_E_MARKET;ORDERS_NAMES_E_CARAVAN;ORDERS_NAMES_R_CARAVAN;ORDERS_NAMES_GATE_WOOD;ORDERS_NAMES_GATE_STONE;ORDERS_NAMES_FIELD;ORDERS_NAMES_E_PEON;ORDERS_NAMES_R_PEON;ORDERS_NAMES_A_PEON;ORDERS_NAMES_NINJA;ORDERS_NAMES_MONK;ORDERS_NAMES_E_MACEMAN;ORDERS_NAMES_E_PRIEST;ORDERS_NAMES_A_PRIEST;ORDERS_NAMES_R_PRIEST;ORDERS_NAMES_CHARIOT;ORDERS_NAMES_E_LONGBOWMAN;ORDERS_NAMES_E_KNIGHT;ORDERS_NAMES_E_STABLE;ORDERS_NAMES_STOP;ORDERS_NAMES_E_STORAGE;ORDERS_NAMES_E_TAVERN;ORDERS_NAMES_E_WORKSHOP;ORDERS_NAMES_EMERGE;ORDERS_NAMES_E_GALLEON;ORDERS_NAMES_E_HULK;ORDERS_NAMES_E_XEBEC;ORDERS_NAMES_BRIDGE;ORDERS_NAMES_E_ACADEMY;ORDERS_NAMES_E_TOWER_STONE;ORDERS_NAMES_E_TOWER_STONE2;ORDERS_NAMES_TOWER_ROCKET;ORDERS_NAMES_E_TOWER_WOOD;ORDERS_NAMES_E_TOWER_WOOD2;ORDERS_NAMES_VIEW_HEROES;ORDERS_NAMES_VIEW_SPYS;ORDERS_NAMES_VIEW_ITEMS;ORDERS_NAMES_E_HOUSE;ORDERS_NAMES_E_PIKEMAN;ORDERS_NAMES_E_SPY;ORDERS_NAMES_CATAPULT;ORDERS_NAMES_H_CATAPULT;ORDERS_NAMES_TO_WTOWER2;ORDERS_NAMES_TO_STOWER;ORDERS_NAMES_TO_STOWER2_1;ORDERS_NAMES_TO_STOWER2_2;ORDERS_NAMES_TO_SWALL;ORDERS_NAMES_TO_SGATE;ORDERS_NAMES_TE_ARROW_1;ORDERS_NAMES_TE_PLATEARMOR;ORDERS_NAMES_TE_FIELDS;ORDERS_NAMES_TE_LIVESTOCK;ORDERS_NAMES_TE_FEUDALISM;ORDERS_NAMES_TE_ARCHITECTURE;ORDERS_NAMES_TE_LONGBOW;ORDERS_NAMES_RAISEDEAD;ORDERS_NAMES_SPELL_HEAL;ORDERS_NAMES_SPELL_SPAWNDRAGON;ORDERS_NAMES_SPELL_RAISEEXP;ORDERS_NAMES_SPELL_FLAMEBOLT;ORDERS_NAMES_SPELL_BLESS;ORDERS_NAMES_SPELL_FREEZE;ORDERS_NAMES_SPELL_WHIRLPOOL;ORDERS_NAMES_SPELL_TURNTOSTONE;ORDERS_NAMES_SPELL_LIGHTNING;ORDERS_NAMES_SPELL_FIRERAIN;ORDERS_NAMES_SPELL_SPAWNBAT;ORDERS_NAMES_SPELL_SPAWNSTONEGOLEM;ORDERS_NAMES_SPELL_SPAWNCARPET;ORDERS_NAMES_SPELL_SPAWNJIN;ORDERS_NAMES_SPELL_MAGICVISION;ORDERS_NAMES_SPELL_RAISEDEAD;ORDERS_NAMES_SPELL_BERSERK;ORDERS_NAMES_SPELL_HYPNOTIZE;ORDERS_NAMES_SPELL_CLOAK;ORDERS_NAMES_UNLOAD;ORDERS_NAMES_TRADE;ORDERS_NAMES_BUILD_ITEM;ORDERS_NAMES_TRADE1;ORDERS_NAMES_TRADE_SHIP;ORDERS_NAMES_DIE;ORDERS_NAMES_DEFAULT;ORDERS_NAMES_MINE;ORDERS_NAMES_DIG;ORDERS_NAMES_CHOP;ORDERS_NAMES_SPELL;ORDERS_NAMES_PREACH_CRUSADE;ORDERS_NAMES_COW;ORDERS_NAMES_TO_SHIP_LEVEL2;ORDERS_NAMES_TO_SHIP_LEVEL3;ORDERS_NAMES_TO_SHIP_LEVEL4;ORDERS_NAMES_TO_SHIP_LEVEL5;ORDERS_NAMES_TO_SHIP_LEVEL6;ORDERS_NAMES_TO_CONVERTRES;ORDERS_NAMES_HOLDFIRE;ORDERS_NAMES_FIREATWILL;ORDERS_NAMES_EXPLORE;ORDERS_NAMES_BALLISTA;ORDERS_NAMES_TE_HALBERD;ORDERS_NAMES_TE_GOLDPLUS;ORDERS_NAMES_TE_STONEPLUS;ORDERS_NAMES_TE_WOODPLUS;ORDERS_NAMES_TE_LEARNING;ORDERS_NAMES_TE_TEMPERIRON;ORDERS_NAMES_TE_CROSSBOW;ORDERS_NAMES_TE_SCALEARMOR;ORDERS_NAMES_TE_CHAINMAIL;ORDERS_NAMES_TE_ENGINEERING;ORDERS_NAMES_TE_CANNONTOWER;ORDERS_NAMES_TE_HEROISM;ORDERS_NAMES_TE_NOBILITY;ORDERS_NAMES_TE_HONOR;ORDERS_NAMES_TE_WARFARE;ORDERS_NAMES_TE_TACTICS;ORDERS_NAMES_TE_MERCENARIES;ORDERS_NAMES_TE_HEROESQUEST;ORDERS_NAMES_TE_FAME;ORDERS_NAMES_TE_SIEGETACTICS;ORDERS_NAMES_TE_BODYBUILDING;ORDERS_NAMES_TE_FANATICISM;ORDERS_NAMES_TE_CRUSADE;ORDERS_NAMES_TE_ESPIONAGE;ORDERS_NAMES_TE_INQUISITION;ORDERS_NAMES_TE_HEALING;ORDERS_NAMES_TE_MEDICINE;ORDERS_NAMES_TE_TRADEROUTES;ORDERS_NAMES_TE_MAPMAKING;ORDERS_NAMES_TE_USURY;ORDERS_NAMES_TE_GAMBLING;ORDERS_NAMES_TE_SUPPLYSTORAGE;ORDERS_NAMES_TE_BRIBERY;ORDERS_NAMES_TE_BUDDHISM;ORDERS_NAMES_TE_TRADETAXES;ORDERS_NAMES_TE_BAT;ORDERS_NAMES_TE_STONEGOLEM;ORDERS_NAMES_TE_INVISIBILITY;ORDERS_NAMES_TE_LIGHTNING;ORDERS_NAMES_TE_FREEZE;ORDERS_NAMES_TE_BLESS;ORDERS_NAMES_TAVERN_MERC;ORDERS_NAMES_TAVERN_HERO;ORDERS_NAMES_MARKET_ITEMS;ORDERS_NAMES_MARKET_SELL;ORDERS_NAMES_TE_LANDINGTACTICS;ORDERS_NAMES_TE_COWPOACHING;ORDERS_NAMES_TE_SLAVERY;ORDERS_NAMES_TE_RIDINGHORSES;ORDERS_NAMES_TE_JANISSARY;ORDERS_NAMES_TE_JIHAD;ORDERS_NAMES_TE_MAGICCARPET;ORDERS_NAMES_TE_JIN;ORDERS_NAMES_TE_WITCHCRAFTS;ORDERS_NAMES_TE_RAINOFFIRE;ORDERS_NAMES_TE_MAGICVISION;ORDERS_NAMES_TE_NECROMANCY;ORDERS_NAMES_GAMBLE;ORDERS_NAMES_TE_HORSEMANSHIP;ORDERS_NAMES_TE_SCIMITAR;ORDERS_NAMES_TE_OREFLOATATION;ORDERS_NAMES_TE_JEWELRY;ORDERS_NAMES_TE_GREATWALL;ORDERS_NAMES_TE_BUDHISM;ORDERS_NAMES_TE_IRRIGATION;ORDERS_NAMES_TE_ARMOREDCHARIOT;ORDERS_NAMES_TE_BUSHIDO;ORDERS_NAMES_TE_SUNTZUBOOK;ORDERS_NAMES_TE_MEDITATION;ORDERS_NAMES_TE_PHILOSOPHY;ORDERS_NAMES_TE_KUNGFU;ORDERS_NAMES_TE_NINJAS;ORDERS_NAMES_TE_MASTERY;ORDERS_NAMES_TE_TOURNAMENTS;ORDERS_NAMES_TE_BANKING;ORDERS_NAMES_TE_CHEMISTRY;ORDERS_NAMES_TE_GUNPOWDER;ORDERS_NAMES_TE_ROCKETARROW;ORDERS_NAMES_TE_SEAFOOD;ORDERS_NAMES_TE_CONCENTRATION;ORDERS_NAMES_TE_BERSERK;ORDERS_NAMES_TE_WHIRLPOOL;ORDERS_NAMES_TE_DRAGON;ORDERS_NAMES_TE_TURNTOSTONE;ORDERS_NAMES_TE_FLAMEBOLT;ORDERS_NAMES_TE_ARTOFRIDING;ORDERS_NAMES_BUILD_ORC;ORDERS_NAMES_BUILD_DWARF;ORDERS_NAMES_BUILD_SKELETON;ORDERS_NAMES_BUILD_GHOST;ORDERS_NAMES_VIEW_QUESTS;ORDERS_NAMES_R_JIHAD_WARRIOR;ORDERS_NAMES_E_COMMON;ORDERS_NAMES_E_RARE;ORDERS_NAMES_E_GUILDS;ORDERS_NAMES_R_COMMON;ORDERS_NAMES_R_RARE;ORDERS_NAMES_R_GUILDS;ORDERS_NAMES_A_COMMON;ORDERS_NAMES_A_RARE;ORDERS_NAMES_A_GUILDS;ORDERS_NAMES_TR_TRADE;ORDERS_NAMES_TR_CANCEL;ORDERS_NAMES_TR_AMOUNT;ORDERS_NAMES_TR_SRCOBJ;ORDERS_NAMES_TR_SRCRES;ORDERS_NAMES_TR_DSTOBJ;ORDERS_NAMES_TR_DSTRES;ORDERS_NAMES_GM_RES;ORDERS_NAMES_GM_AMOUNT;ORDERS_NAMES_GM_PROP;ORDERS_NAMES_GM_GAMBLE;ORDERS_NAMES_GM_CANCEL;ORDERS_NAMES_BU_ITEM;ORDERS_NAMES_BU_AMOUNT;ORDERS_NAMES_BU_CANCEL;ORDERS_NAMES_BU_BUILD;ORDERS_NAMES_TR1_TRADE;ORDERS_NAMES_TR1_CANCEL;ORDERS_NAMES_TR1_AMOUNT1;ORDERS_NAMES_TR1_AMOUNT2;ORDERS_NAMES_TR1_SRCRES;ORDERS_NAMES_TR1_DSTRES;ORDERS_ADD_TE_SLAVERY;ORDERS_ADD_TE_STONEGOLEM;ORDERS_ADD_TE_FREEZE;ORDERS_ADD_TE_LIGHTNING;ORDERS_ADD_TE_INVISIBILITY;ORDERS_ADD_TE_BAT;ORDERS_ADD_TE_CRUSADE;ORDERS_ADD_TE_BLESS;ORDERS_ADD_TE_LONGBOW;ORDERS_ADD_TE_PLATEARMOR;ORDERS_ADD_TE_FIELDS;ORDERS_ADD_TE_LIVESTOCK;ORDERS_ADD_TE_FEUDALISM;ORDERS_ADD_TE_ARCHITECTURE;ORDERS_ADD_TE_LONGBOWMAN;ORDERS_ADD_TE_HALBERD;ORDERS_ADD_TE_GOLDPLUS;ORDERS_ADD_TE_STONEPLUS;ORDERS_ADD_TE_WOODPLUS;ORDERS_ADD_TE_LEARNING;ORDERS_ADD_TE_TEMPERIRON;ORDERS_ADD_TE_CROSSBOW;ORDERS_ADD_TE_SCALEARMOR;ORDERS_ADD_TE_CHAINMAIL;ORDERS_ADD_TE_ENGINEERING;ORDERS_ADD_TE_CANNONTOWER;ORDERS_ADD_TE_HEROISM;ORDERS_ADD_TE_NOBILITY;ORDERS_ADD_TE_HONOR;ORDERS_ADD_TE_WARFARE;ORDERS_ADD_TE_TACTICS;ORDERS_ADD_TE_MERCENARIES;ORDERS_ADD_TE_HEROESQUEST;ORDERS_ADD_TE_FAME;ORDERS_ADD_TE_SIEGETACTICS;ORDERS_ADD_TE_BODYBUILDING;ORDERS_ADD_TE_FANATICISM;ORDERS_ADD_TE_ESPIONAGE;ORDERS_ADD_TE_INQUISITION;ORDERS_ADD_TE_HEALING;ORDERS_ADD_TE_MEDICINE;ORDERS_ADD_TE_TRADETOUTES;ORDERS_ADD_TE_MAPMAKING;ORDERS_ADD_TE_PIRACY;ORDERS_ADD_TE_USURY;ORDERS_ADD_TE_SUPPLYSTORAGE;ORDERS_ADD_TE_BRIBERY;ORDERS_ADD_TE_BUDDHISM;ORDERS_ADD_TE_TRADETAXES;ORDERS_ADD_TE_LANDINGTACTICS;ORDERS_ADD_TE_BOARDINGRAM;ORDERS_ADD_TE_COWPOACHING;ORDERS_ADD_TE_RIDINGHORSES;ORDERS_ADD_TE_JANISSARY;ORDERS_ADD_TE_JIHAD;ORDERS_ADD_TE_MAGICCARPET;ORDERS_ADD_TE_JIN;ORDERS_ADD_TE_WITCHCRAFTS;ORDERS_ADD_TE_MAGICVISION;ORDERS_ADD_TE_NECROMANCY;ORDERS_ADD_TE_HORSEMANSHIP;ORDERS_ADD_TE_SCIMITAR;ORDERS_ADD_TE_OREFLOATATION;ORDERS_ADD_TE_JEWELRY;ORDERS_ADD_TE_GREATWALL;ORDERS_ADD_TE_BUDHISM;ORDERS_ADD_TE_IRRIGATION;ORDERS_ADD_TE_ARMOREDCHARIOT;ORDERS_ADD_TE_BUSHIDO;ORDERS_ADD_TE_SUNTZUBOOK;ORDERS_ADD_TE_MEDITATION;ORDERS_ADD_TE_PHILOSOPHY;ORDERS_ADD_TE_KUNGFU;ORDERS_ADD_TE_NINJAS;ORDERS_ADD_TE_MASTERY;ORDERS_ADD_TE_TOURNAMENTS;ORDERS_ADD_TE_BANKING;ORDERS_ADD_TE_CHEMISTRY;ORDERS_ADD_TE_GUNPOWDER;ORDERS_ADD_TE_ROCKETARROW;ORDERS_ADD_TE_SEAFOOD;ORDERS_ADD_TE_CONCENTRATION;ORDERS_ADD_TE_BERSERK;ORDERS_ADD_TE_WHIRLPOOL;ORDERS_ADD_TE_DRAGON;ORDERS_ADD_TE_TURNTOSTONE;ORDERS_ADD_TE_FLAMEBOLT;ORDERS_ADD_TE_ARTOFRIDING;ORDERS_ADD_TE_TRADEROUTES;ORDERS_ADD_TE_GAMBLE;SPELL_NAMES_SPELL_FIRERAIN;SPELL_NAMES_SPELL_LIGHTNING;SPELL_NAMES_SPELL_HEAL;SPELL_NAMES_SPELL_SPAWNCARPET;SPELL_NAMES_SPELL_SPAWNBAT;SPELL_NAMES_SPELL_BLESS;SPELL_NAMES_SPELL_FREEZE;SPELL_NAMES_SPELL_BERSERK;SPELL_NAMES_SPELL_SOULBIND;SPELL_NAMES_SPELL_CLOAK;SPELL_NAMES_SPELL_SPAWNSTONEGOLEM;SPELL_NAMES_SPELL_MAGICVISION;SPELL_NAMES_SPELL_RAISEDEAD;SPELL_NAMES_SPELL_TURNTOSTONE;SPELL_NAMES_SPELL_WHIRLPOOL;SPELL_NAMES_SPELL_SPAWNDRAGON;SPELL_NAMES_SPELL_FLAMEBOLT;SPELL_NAMES_SPELL_RAISEEXP;SPELL_NAMES_SPELL_SPAWNJIN;SPELL_NAMES_SPELL_CURSE;SPELL_NAMES_SPELL_HYPNOTIZE;IMAGES_FLAG_CAPTURE;IMAGES_ITEM_BOOK1;IMAGES_ITEM_BOOK2;IMAGES_ITEM_BOOK3;IMAGES_ITEM_BOW1;IMAGES_ITEM_BOW2;IMAGES_ITEM_BOW3;IMAGES_ITEM_FLAG;IMAGES_ITEM_FOOD;IMAGES_ITEM_GOLD;IMAGES_ITEM_IRON;IMAGES_ITEM_POTION1;IMAGES_ITEM_POTION2;IMAGES_ITEM_POTION3;IMAGES_ITEM_POTION4;IMAGES_ITEM_POTION5;IMAGES_ITEM_POTION6;IMAGES_ITEM_POTION7;IMAGES_ITEM_POTION8;IMAGES_ITEM_SCROLL1;IMAGES_ITEM_SHIELD1;IMAGES_ITEM_SHIELD2;IMAGES_ITEM_SHIELD3;IMAGES_ITEM_STONE;IMAGES_ITEM_SWORD;IMAGES_ITEM_SWORD1;IMAGES_ITEM_SWORD2;IMAGES_ITEM_SWORD3;IMAGES_ITEM_WOOD;TZAREDIT_S1;TZAREDIT_S2;HELP_???;HELP_SP_CAMPAIGN;HELP_SP_CUSTOM_MAP;HELP_SP_RANDOM_MAP;HELP_SP_LOAD_GAME;HELP_SP_BACK;HELP_CN_CAMPAIGNS;HELP_CN_CAMPAIGN_DESCRIPTION;HELP_CN_ENTRY_MISSONS;HELP_CN_ENTRY_MISSONS_DESCRIPTION;HELP_CN_BACK;HELP_CN_PLAY;HELP_CM_MAPS;HELP_CM_MAP_DECRIPTION;HELP_CM_PLAY;HELP_CM_BACK;HELP_RM_PLAYER_COLOR;HELP_RM_PLAYER_NAME;HELP_RM_PLAYER_CIVILIVIZATION;HELP_RM_PLAYER_TEAM;HELP_RM_NUMBER_OF_PLAYERS;HELP_RM_POP_LIMIT;HELP_RM_GAME_TYPE;HELP_RM_DIFFICULTY_LEVEL;HELP_RM_VICTORY_CONDITION;HELP_RM_STARTING_RESOURCES;HELP_RM_NO_FOG;HELP_RM_EXPLORE;HELP_RM_MAP_SIZE;HELP_RM_MAP_TYPE;HELP_RM_TERRAIN;HELP_RM_MAP_RESOURCES;HELP_RM_GUARDED_TOWN;HELP_RM_AMNIMALS;HELP_RM_MAGIC_ITEMS;HELP_RM_CLIFFS;HELP_RM_GATEWAYS;HELP_RM_PLAY;HELP_RM_BACK;HELP_RM_VALUE;HELP_LG_SELECT_GAME;HELP_LG_CHOOSE;HELP_LG_LOAD;HELP_LG_CANCEL;HELP_LG_DELETE;HELP_MP_PLAYER_NAME;HELP_MP_GAME_NAME;HELP_MP_IPX;HELP_MP_TCP/IP;HELP_MP_IP_ADDRESS;HELP_MP_CREATE;HELP_MP_SEARCH;HELP_MP_JOIN;HELP_MP_BACK;HELP_MP_GAMES_FOUND;HELP_MP_GAME_INFORMATION;HELP_MP_BETA;HELP_MPC_CHECK_BUTTON;HELP_MPC_PLAYER_COLOR;HELP_MPC_PLAYER_NAME;HELP_MPC_PLAYER_CIVILIVIZATION;HELP_MPC_PLAYER_TEAM;HELP_MPC_CHAT_BOX;HELP_MPC_CHAT_BOX_WRITE;HELP_MPC_SETTINGS;HELP_MPC_MAP;HELP_MPC_DISCONNECT;HELP_MPC_PLAY;HELP_MPS_RANDOM_MAP;HELP_MPS_CUSTOM_MAP;HELP_MPS_POP_LIMIT;HELP_MPS_GAME_TYPE;HELP_MPS_DIFFICULTY_LEVEL;HELP_MPS_VICTORY_CONDITION;HELP_MPS_STARTING_RESOURCES;HELP_MPS_MAP_SIZE;HELP_MPS_MAP_TYPE;HELP_MPS_TERRAIN;HELP_MPS_MAP_RESOURCES;HELP_MPS_TOWERS;HELP_MPS_AMNIMALS;HELP_MPS_MAGIC_ITEMS;HELP_MPS_CLIFFS;HELP_MPS_GATEWAYS;HELP_MPS_DAY_NIGTH;HELP_MPS_WEATHER;HELP_MPS_NO_FOG;HELP_MPS_EXPLORE;HELP_MPS_ACCEPT;HELP_MPS_CANCEL;HELP_MPS_MAPS_LIST;HELP_MPS_MAP_DECRIPTION;HELP_MPS_USE_MAP_SETTINGS;HELP_MPS_VALUE;HELP_SG_SAVE_GAME;HELP_SG_NEW;HELP_SG_SAVE;HELP_SG_DELETE;HELP_SG_CANCEL;HELP_SG_RESTART;HELP_SG_QUIT;HELP_SG_LIST;HELP_CH_BOX;HELP_CH_ALLIES;HELP_CH_ENEMIES;HELP_CH_ALL;HELP_CH_CUSTOM;HELP_CH_SELECT_PLAYER;HELP_CH_NAMES;HELP_CH_COLORS;HELP_D_ALLIES;HELP_D_ENEMIES;HELP_D_NEUTRAL;HELP_D_SHARED VISION;HELP_D_SHARED RESOURCES;HELP_D_SHARED UNIT CONTROL;HELP_D_SHARED_VICTORY;HELP_D_ACCEPT;HELP_D_CANCEL;HELP_D_TRIBUTE;HELP_T_AMOUNT;HELP_T_SEND;HELP_T_CANCEL;HELP_CM1_PLAYER_COLOR;HELP_CM1_PLAYER_NAME;HELP_CM1_PLAYER_CIVILIVIZATION;HELP_CM1_PLAYER_TEAM;HELP_CM1_NUMBER_OF_PLAYERS;HELP_CM1_POP_LIMIT;HELP_CM1_GAME_TYPE;HELP_CM1_DIFFICULTY_LEVEL;HELP_CM1_VICTORY_CONDITION;HELP_CM1_STARTING_RESOURCES;HELP_CM1_NO_FOG;HELP_CM1_EXPLORE;HELP_CM1_USE_MAP_SETTINGS;HELP_CM1_MAP_DECRIPTION;HELP_CM1_VALUE;HELP_CM1_BACK;HELP_CM1_PLAY;HELP_O_SOUND_VOLUME;HELP_O_CHK_VOLUME;HELP_O_UNIT_SPEECH;HELP_O_BUILDING_SOUND;HELP_O_NATURE_SOUND;HELP_O_GAME_SPEED;HELP_O_SCROLL_SPEED;HELP_O_PATH_DEPTH;HELP_O_DAY_NIGTH;HELP_O_WEATHER;HELP_O_MUSIC_VOLUME;HELP_O_CHK_MVOLUME;HELP_O_CD;HELP_O_H_CURS;HELP_O_MENU;HELP_O_OK;HELP_MPS_AI_ASSIST;HELP_MPS_SH_RES;HELP_MPS_TOWERS_POP;VM_LOC_SENT;VM_BOOKMARK_SET;VM_TIME_LIMIT_HIT;VM_TIME_LIMIT_REACHED;VM_SCORE_LIMIT_HIT;VM_SCORE_LIMIT_REACHED;VM_SAVING;VM_DISCON1;VM_DISCON2;TZAREDIT_DELETE;TZAREDIT_ANY;TZAREDIT_MILITARY_UNITS;TZAREDIT_DELAY;TZAREDIT_REMOVE;OBJECTS_MESSIAH;ERR_NOMAPS;ERR_FIRST;ERR_EXPLASYNC;ERR_OBJASYNC;ERR_BADKINGDOMSCRIPT;ORDERS_NAMES_TE_INVINSIBILITY;ORDERS_NAMES_TE_IRONPLUS;ORDERS_NAMES_TO_WALL_STONE;ORDERS_NAMES_TO_GATE_STONE;ORDERS_NAMES_VIEW_AI;ORDERS_NAMES_SET_AI_NONE;ORDERS_NAMES_SET_AI_FULL;ORDERS_NAMES_SET_AI_WAR;ORDERS_NAMES_SET_AI_ECO;CHOOSEAI_TITLE;CHOOSEAI_OK;CHOOSEAI_CANCEL;CHOOSEAI_DEFAULT;ENDGAMEDLG_HIDE;MISC_SELLITEM3;MISC_HERO3;MISC_KINGDOM3;MISC_QUICKSAVE3;MISC_AUTOSAVE3;MISC_NATURE3;MISC_RESCUE3;MISC_BUY3;MISC_PREVPAGE3;MISC_NEXTPAGE3;MISC_VIEW3;MISC_REQ3;MISC_INF3;MISC_HIRE3;MISC_RETLOAN3;MISC_GETLOAN3;MISC_WATOBJ3;MISC_RES3;MISC_TREES3;MISC_UNK3;MISC_RND3;MISC_UNKAUTHOR3;MISC_HEALTH3;MISC_EXP3;MISC_MANNA3;MISC_DEFENCE3;MISC_ATTACK3;MISC_SWORD3;MISC_SHIELD3;MISC_BOW3;MSG_GAME_CONNECT;MSG_GAME_SPEED_TURBO;MSG_AIFULL3;MSG_AIECO3;MSG_AIWAR3;MSG_AIOFF3;MSG_NET_JOIN_HEADOFF;MSG_GOLDREQ;MSG_GAME_SPEED2;ERR3_ERR_CONNECT;ERR3_RANKSLOST;ORDERS_NAMES_DESTROY;ORDERS_NAMES_ONLINEHELP;ORDERS_NAMES_NEXTIDLE;ORDERS_NAMES_BOOK_ITM;ORDERS_NAMES_POTION_ITM;ORDERS_NAMES_POWER_ITM;TZAREDIT_ANY_MAJOR_OBJECTS;DEFMSG_CAPTUREOWN;MP_SETUPMAP_SH_RES;MP_SETUPMAP_TOWERS_POP;VM_SENDRESULTS;VM_SENDRESULTS2;SYSTEM_LANGUAGE;DOWNLOADING_GRAPHICS;WEBAUDIO;CONNECTION_ERROR;DOWNLOAD_ALL;MAPEDITOR;TEAM;COLOUR;MAXHEALTH;PLAYING;WAITING;ADD;WATER;AUTOFULLSCREEN;FULLSCREEN;UP;DOWN;LANGUAGE;INITIAL_PEASANTS;ADD_AI;RACE;DATE;FREE_POP;ABOUT;PLAYED_TIME;ZOOMSPEED;CLICKJOIN;NO_GAMES_FOUND;SAVE_GAME_CONTENT;BUILDINGS;ITEMS;AUTHOR;GROUND;RND;CAPTUREMODE;PLAYERWON;CLEARMAP;RNDCASTLES".split(";"),
Ha,U,Ka,Tb={},Yc="ts1.mp3 ts2.mp3 ts3.mp3 ts4.mp3 ts5.mp3 ts6.mp3 ts7.mp3 ts8.mp3 ts9.mp3 ts10.mp3 sr1.mp3 sr2.mp3 sr3.mp3 sr4.mp3 sr5.mp3 sr6.mp3 sr7.mp3 sr8.mp3 sr9.mp3 sr10.mp3 o1.mp3 o2.mp3 o3.mp3 o4.mp3 o5.mp3 o6.mp3 o7.mp3 o8.mp3 o9.mp3 o10.mp3 INTRO.mp3 OUTRO.mp3 WIN1.mp3 WIN2.mp3 ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.WAV CAMEL2.WAV CARPETCMD.WAV CATAPULT.WAV CBEAR1.WAV CBEAR2.WAV CBEAR3.WAV CBEAR4.WAV COW1.WAV COW2.WAV COW3.WAV COW4.WAV DRAGON1.WAV DRAGON2.WAV FLY1.WAV FLY2.WAV FOOT1.WAV FOOT2.WAV FOOT3.WAV FOOT4.WAV FOOT5.WAV FOOT6.WAV FOOT7.WAV FOOT8.WAV GHOST1CMD.WAV GHOST2CMD.WAV GHOST3CMD.WAV GOLEMCMD.WAV H%20CMD%201.WAV H%20CMD%202.WAV H%20CMD%203.WAV H%20CMD%204.WAV HEAVY%20CATAPULT.WAV INF%20CMD%201.WAV INF%20CMD%202.WAV INF%20CMD%203.WAV INF%20CMD%204.WAV INF%20CMD%205.WAV MESSIAHCMD.WAV ORC%20CMD%201.WAV ORC%20CMD%202.WAV ORC%20CMD%203.WAV ORC%20CMD%204.WAV ORC%20CMD%205.WAV ORC%20CMD%206.WAV SHIP%20CMD%201.WAV SHIP%20CMD%202.WAV SKELETON1.WAV SKELETON2.WAV SHIP%20SELECT.WAV E_BARRACK1.WAV E_BLACKSMITH1.WAV FIRE1.WAV FIRE2.WAV FIRE3.WAV FIRE4.WAV FIRE5.WAV ROCKET.WAV pepe.mp3".split(" "),
Zc,Db,Eb,fc=function(){if(!Ha){B.prototype.loadBuffer=function(a,c){var d=this;Wf(r.cdn+a,function(e){d.context.decodeAudioData(e).then(function(d){d&&K(d,a,c)})})};for(var b=0,a=Yc.length;b<a;b++){var e=Yc[b];Tb[e.split(".")[0].toLowerCase()]=e}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,Ha=new AudioContext,Db=Ha.createGain(),Eb=Ha.createGain(),Zc=new B(Ha,void 0,K),Db.gain.value=parseInt(localStorage.musicRange)/100,Eb.gain.value=parseInt(localStorage.soundRange)/
100,Db.connect(Ha.destination),Eb.connect(Ha.destination));U=function(){if(!t.editor){h("musicSelect")&&(localStorage.favMusic=h("musicSelect").mversion.value);var a=U.list[localStorage.favMusic];U.id++;if(a){if(1==U.id)for(var c=a.length-1;0<c;c--){var e=Math.floor(Math.random()*(c+1)),b=$jscomp.makeIterator([a[e],a[c]]);a[c]=b.next().value;a[e]=b.next().value}Ka(a[U.id%a.length],0,0,void 0,1,0,U.id)}}};U.reset=function(){U.stop();U()};U.stop=function(){U.active&&(U.active.stop(),clearTimeout(U.intv))};
U.id=0;U.list={originalMusic1:"o1 o2 o3 o4 o5 o6 o7 o8 o9 o10 outro".split(" "),originalMusic:"ts1 ts2 ts3 ts4 ts5 ts6 ts7 ts8 ts9 ts10".split(" "),sharpRain:"sr1 sr2 sr3 sr4 sr5 sr6 sr7 sr8 sr9 sr10".split(" ")};Ka=function(a,c,e,b,m,f,h){if(Zc){"string"!==typeof a&&(a=Yc[a].split(".")[0].toLowerCase());var d=a;if((a=Tb[a])&&"loading"!==a&&!t.canceled){var g=-R+(window.innerWidth-r.mx)/2,k=-X+window.innerHeight/2;if(a.duration){if(t.started)if(64<t.now()-a.lastPlayed||!a.lastPlayed)a.lastPlayed=
t.now();else return;if(!(!m&&"attack"!=d&&f&&600<Date.now()-f)){if(c){if(c=(-g/32+c)/7,e=(-k/32+e)/7,k=M,c*c+e*e>Math.pow(64,2))return!1}else k=e=c=0;void 0!==b&&b!==r.kingdom||t.mute||(b=Ha.createBufferSource(),b.buffer=a,m?(b.connect(Db),U.active=b,U.intv=setTimeout(U,Math.floor(1E3*a.duration)+1E3)):(a=Ha.createPanner(),a.panningModel="HRTF",a.setPosition(c,e,k),a.refDistance=1,a.distanceModel="inverse",b.connect(a),a.connect(Eb)),b.start(0))}}else Tb[d]="loading",m={x:c,y:e,k:b,music:m,date:Date.now(),
mid:h},Zc.loadBuffer(a,m)}}}}},db,ue=function(){return Date.now()-Fb+25*n.gcycle()},eb=function(b){if(!(b&&t.online||eb.bySystem&&b))if(0===t.paused){t.paused=1;void 0!=db&&clearInterval(db);var a=t.now();t.pausedTime+=Date.now();b?kb("",l.VIEWMSG_PAUSE,0,l.GENERAL_CLOSE):eb.bySystem=1;t.now=function(){return a}}else t.pausedTime-=Date.now(),t.paused=0,eb.bySystem=0,b&&h("alert")&&O("alert"),db=setInterval(wa,wa.speed),t.now=ue};eb.bySystem=0;eb.fast=!0;var re=function(b){b/=1E3;var a=~~(b/60)%60,
e=~~(b/3600);b=~~(b%60);1===(b+"").length&&(b="0"+b);0!=e?(e+=":",10>a&&(a="0"+a)):e="";return e+a+":"+b},Fb=0,ve=0,Xf=function(){var b=this.value/100;x(b);wa.speed=25/(4*b+1);clearInterval(db);db=setInterval(wa,wa.speed)},wa=function(){t.cycle=n.gcycle();Fb&&(ve+=Date.now()-Fb-wa.speed);Fb=Date.now();var b=Date.now();n.movtablexe();t.cycle=n.gcycle();0===t.cycle%40&&we();$c+=Date.now()-b;0!==t.cycle%40||S||(h("topinfo").innerHTML="<span>CPU:"+($c/10).toFixed(2)+"%</span> <span>"+~~(ad/bd+.5)+"FPS</span> <span>"+
re(t.now())+"</span>",ad=bd=$c=0);!da.running&&ve>=wa.speed&&wa()};wa.speed=25;var $c=0,bd=0,ad=0,xe=-1,gc,hc,lb,ic,qa,cd,mb,xa,dd,ye,ze,Ae,Be,Ce,De,Ee,Gb,nb=function(){h("mgitem").style.backgroundPositionY=-48*n.mwicon()+"px";h("mgamount").innerHTML=n.amount()},ed=function(b){n.EDbuild(b)},fd=function(b,a){var e=b.nextMenu,d=document.createElement("div");d.className="contD";for(var c=0;c<e.length;c++){var m=document.createElement("button"),f=e[c];f.parent=b;m.innerHTML=f.name;m.onclick=ua.adminClick;
m.Dorigin=f;a.appendChild(m);f.nextMenu&&(f.container=d)}a.appendChild(d)};Element.prototype.hide=function(){this.style.display="none"};Element.prototype.show=function(){this.style.display="block"};var ua=function(b){var a=h(b.parent);fd(b,a,b)};ua.update=function(b,a){b.nextMenu=a;b.nextDiv.innerHTML="";fd(b,b.nextDiv)};ua.adminClick=function(){var b=this.Dorigin,a=b.parent;if(b.onclick)b.onclick(b.param1);ua.lastXtraShow&&a&&a.xtraShow!=ua.lastXtraShow&&ra(ua.lastXtraShow);b.xtraShow&&(Wd(b.xtraShow),
ua.lastXtraShow=b.xtraShow);b.lastClick&&b.lastClick.Dorigin&&b.lastClick.Dorigin.xtraShow&&(Wd(b.lastClick.Dorigin.xtraShow),ua.lastXtraShow=b.lastClick.Dorigin.xtraShow);if(b.nextMenu){a.lastClick&&(a.lastClick.className="");a.lastClick=this;this.className="clickD";b.nextDiv||(a=document.createElement("div"),b.container.appendChild(a),fd(b,a),b.nextDiv=a);a=b.container.children;for(var e=0;e<a.length;a[e++].hide());b.nextDiv.show();b.nextDiv.getElementsByTagName("button")}ua.last=b};var Hb=function(){var b=
n.myk();h("selectKingdom").innerHTML="";for(var a=0,e=n.nkingdom();a<e;a++){var d=a?pa(ma(n.kname(a),17)):l.MISC_NATURE3,c=gd(n.krgb(a));h("selectKingdom").innerHTML+='<option style="background:'+c+'" value="'+a+'" '+(a==b&&"selected"||"")+">"+d+"</option>"}h("selectKingdom").innerHTML+="<option value='"+(Math.pow(2,31)-1)+"'>"+l.CAPTURABLE+"</option>";h("selectKingdom").onchange(1)},Yf=function(b){n.EDbrush0(b,!0)},hd=function(b){h("brushSize").value=b;h("brushSize").onchange()},fb=function(b,a){var e=
" ("+fb.objs.length+")";fb.objs.put({name:"water"==Zf.arr[a]&&l.WATER+e||l.GROUND+e,onclick:Yf,param1:b})},Fe=function(b){fb.objs.length=0;n.EDgetTerrainInfo();return fb.objs},Ge=function(b,a){return b.name.localeCompare(a.name)},id,Ke=function(){if(S){fb.objs=[];var b=function(a,d){for(var c=[],e=0,b=n.nfolen();e<b;e++){var m=n.unitSearchValid(a,d,e);m&&c.put({name:l[la[m]].toUpperCase(),onclick:ed,param1:e,xtraShow:["brhSize","brhMargin"]})}c.sort(Ge);return c};h("content").innerHTML='<div id="mapeditorpanel">\n    <div id="mapeditorinfo">\n    </div>\n    </div>\n    <div id="mapeditorinfotop">\n    <button id="menueditor">'+
l.GAME_SCR_MENU+'</button>\n    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>\n    <button style="display:none" id="rotatebutton"></button>\n    <button id="mapProps">'+l.MENU_OPTI+'</button>\n    <button style="display:none" id="mapRules">'+l.rules+'</button>\n    <div id="brhSize" style="display:none"><span>Brush size: </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>\n    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>\n    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>\n    <div id="EDrndtree" style="display:none"><button id="rndtrees">'+
l.RND+'</button></div>\n    <div id="EDrndresgs" style="display:none"><button id="rndres">'+l.RND+'</button></div>\n    <div id="EDterr" style="display:none"><span>'+l.MP_SETUPMAP_T_TERRAIN+': </span><select id="EDtrrsel">'+jd(1)+'</select></div>\n    <div id="EDterrRND" style="display:none"><span>'+l.MP_SETUPMAP_T_TERRAIN+': </span><select id="EDtrrRND"><option value="0">'+l.MP_SETUPMAP_M_TYPE_5+'</option>\n    <option value="1">'+l.MP_SETUPMAP_M_TYPE_4+'</option>\n    <option value="2">'+l.MP_SETUPMAP_M_TYPE_3+
'</option>\n    <option value="3">'+l.MP_SETUPMAP_M_TYPE_2+'</option>\n    <option value="4">'+l.MP_SETUPMAP_M_TYPE_1+'</option>\n    <option value="5">'+l.MP_SETUPMAP_M_TYPE_0+'</option></select> <button id="rndtrbutton">'+l.MP_SETUPMAP_T_RANDOM+'</button></div>\n    <div><span>Active kingdom: </span>\n    <select id="selectKingdom">\n    </select>\n    </div>\n    <div><button id="clearMap">'+l.CLEARMAP+'</button></div>\n    <div><button id="castleRND">'+l.RNDCASTLES+'</button></div>\n\n    </div>\n    <div id="bigMap" style="display:none"></div>\n    <div id="minimap" style="box-shadow: 0px 0px 20px #000;position:absolute;top:31px;left:4px;z-index:75"></div>\n    <button id="playmapeditor">&#9654;</button>\n    ';
h("menueditor").onclick=He;h("castleRND").onclick=function(){n.fullRNDmap(0)};h("clearMap").onclick=function(){n.fullRNDmap(1)};h("rndtrees").onclick=n.rndforest;h("rndres").onclick=n.rndRes;h("playmapeditor").onclick=$f;h("brushDensity").onchange=function(){n.EDbrushchd(parseInt(h("brushDensity").value))};h("brushSize").onchange=function(){n.EDbrushchs(parseInt(h("brushSize").value))};h("brushMargin").onchange=function(){n.EDbrushMrg(parseInt(h("brushMargin").value))};h("rndtrbutton").onclick=function(){n.randomTerrain(parseInt(h("EDtrrRND").value)+
1);n.wtrcheck();ha.update=!0};h("brushDensity").onchange();h("brushSize").onchange();h("selectKingdom").onchange=function(){n.cmyk(parseInt(this.value));if(this.value!=Math.pow(2,31)-1){var a=n.krgb(parseInt(this.value)),d=a>>16&255,c=a>>8&255;a&=255}else a=c=d=0;this.style.background="rgba("+d+","+c+","+a+",0.6)"};h("EDtrrsel").onchange=function(){n.chterr(parseInt(this.value));h("EDtrrsel").innerHTML=l.MSG_GAME_LOAD;Pa(function(){n.EDbrushstop();ha.update=!0;n.adpterr();ua.update(id,Fe());h("EDtrrsel").innerHTML=
jd(1)})};h("mapProps").onclick=function(){cb();if(!h("mapPropsWindow")){var a=Oa("mapPropsWindow");a.className="fullwindow";var d=document.createElement("table");a.appendChild(d);d.style.marginBottom="40px";ca("span",a,l.SP_SETUPRND_T_MAP_SIZE+": ");d=ca("input",a);d.value=n.mapWidth();d.id="EDmapSize";d.type="number";d.min=0;d.onchange=0;d.style.width="130px";d.style.marginBottom="32px";var c=document.createElement("p");c.innerHTML=l.SP_CHOOSEMAP_T_MAP;d=document.createElement("input");d.value=l.MP_SETUPMAP_T_CUSTOM;
d.id="mapName";d.type="text";a.appendChild(c);a.appendChild(d);c=document.createElement("p");c.innerHTML=l.SP_CHOOSEMAP_T_DESCRIPTION;d=document.createElement("textarea");d.type="text";d.value="";d.id="mapDescription";a.appendChild(c);a.appendChild(d);c=document.createElement("p");c.innerHTML=l.AUTHOR;d=document.createElement("input");d.id="mapAuthor";d.value="";d.type="text";a.appendChild(c);a.appendChild(d);a.appendChild(document.createElement("p"));d=document.createElement("button");d.onclick=
ag;d.innerHTML=l.GENERAL_CLOSE;d.style.cssText="font-size:28px;margin-top:30px";a.appendChild(d)}W("mapPropsWindow");kd()};id={name:l.MP_SETUPMAP_T_TERRAIN,nextMenu:fb.objs,xtraShow:["brhSize","EDterr","EDterrRND"]};new ua({nextMenu:[{onclick:function(){return hd(1)},name:l.SELVIEW_UNITS.toUpperCase(),nextMenu:[{name:Y[0],nextMenu:b(0,0)},{name:Y[1],nextMenu:b(1,0)},{name:Y[2],nextMenu:b(2,0)},{name:Y[3],nextMenu:b(3,0).concat(b(3,4)).sort(Ge)}],xtraShow:["brhSize","brhMargin"]},{onclick:function(){return hd(1)},
xtraShow:["brhSize","brhMargin"],name:l.BUILDINGS.toUpperCase(),nextMenu:[{name:Y[0],nextMenu:b(0,1)},{name:Y[1],nextMenu:b(1,1)},{name:Y[2],nextMenu:b(2,1)},{name:Y[3],nextMenu:b(3,1)}]},{name:l.ITEMS.toUpperCase(),nextMenu:b(3,2)},{onclick:function(){return hd(8)},name:l.MP_SETUPMAP_T_TERRAIN.toUpperCase(),nextMenu:[id,{name:l.MISC_TREES3,nextMenu:[{name:l.MISC_TREES3,onclick:n.EDbrush0,param1:7}],xtraShow:["brhSize","brhDnst","EDrndtree"]},{name:l.MISC_RES3,nextMenu:[{name:l.OBJECTS_RES_GOLD,onclick:ed,
param1:21},{name:l.OBJECTS_RES_STONE,onclick:ed,param1:22}],xtraShow:["EDrndresgs","brhSize","brhMargin"]}]}],parent:"mapeditorinfo"})}else{h("content").innerHTML='<ul id="msgs1"></ul>\n    <div id="playersinfo"></div>\n    <div id="resources" style="display:block">\n    <div id="goldr"></div>\n    <div id="woodr"></div>\n    <div id="foodr"></div>\n    <div id="stoner"></div>\n    <div id="popr"></div>\n    <div id="resourcesbefore"></div>\n    <div id="gold"></div>\n    <div id="wood"></div>\n    <div id="food"></div>\n    <div id="stone"></div>\n    <div id="pop"></div>\n    <div id="temperature"></div>\n    </div>\n    <div id="enterwindow" class="displaynone">\n    <h2 id="sendMessageH2">'+
l.CHAT_T_CHAT+'</h2>\n    <input id="msginputGame" />\n    </div>\n    \n    <div id="msgButton"></div>\n    <div id="topinfo"></div>\n    <div id="bottominfo"></div>\n    \n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:99;"></div>\n    <div style="display:none" id="bigMap"></div>\n    <div id="menu" style="display:block">\n    <div id="menubefore"></div>\n    <div id="menuafter"></div>\n    <button id="gameMenu">'+l.GAME_SCR_MENU+'</button>\n\n    <div id="daynighticon"></div>\n    <div id="icons20">\n    <div id="attackmenu" style="display:none"></div>\n    <div id="defencemenu" style="display:none"></div>\n    <div id="levelmenu" style="display:none"></div>\n    <div id="manamenu" style="display:none"></div>\n    <div id="manamenu1" style="display:none"></div>\n    </div>\n    <div id="progressvalue"></div>\n    <div id="kingdom"></div>\n    <div id="unitname" contenteditable="true"></div>\n    <progress id="progressone" style="display:none"></progress>\n    <progress id="progressmana" style="display:none" max="100"></progress>\n    <input id="unitSpeed" min="1" max="100" type="range"/>\n    <div id="navigation">\n    <button id="aleft"></button>\n    <button id="stock"></button>\n    <button id="aright"></button>\n    </div>\n    <div id="orders">\n    <button id="order1"><progress class="loadingunit" style="display:none"></progress></button>\n    <button id="order2"></button>\n    <button id="order3"></button>\n    <button id="order4"></button>\n    <button id="order5"></button>\n    <button id="order6"></button>\n    <button id="order7"></button>\n    <button id="order8"></button>\n    </div>\n    <div id="magicworkshopmenu" style="display:none">\n    <button id="mgbook"></button>\n    <button id="mgpotion"></button>\n    <button id="mgsword"></button>\n    <button id="mgamount"></button>\n    <button id="mgitem"></button>\n    <button id="mgdecline"></button>\n    <button id="mgaccept"></button>\n    <div id="mgbak"></div>\n    </div>\n    </div>';
Gb=h("msgs1");Ie();k=8;q=h("aleft");A=h("aright");D=h("stock");q.onclick=function(){n.changePage(-1)};h("minimap");ze=h("unitSpeed");Ae=h("gold");Be=h("wood");Ce=h("food");De=h("stone");Ee=h("daynighticon");A.onclick=function(){n.changePage(1)};gc=h("attackmenu");hc=h("defencemenu");lb=h("levelmenu");ic=h("kingdom");qa=h("progressone");cd=h("unitname");mb=h("progressvalue");h("msgButton").onclick=Je;h("mgbook").onclick=function(){n.mwSelect(0);nb()};h("mgpotion").onclick=function(){n.mwSelect(1);
nb()};h("mgsword").onclick=function(){n.mwSelect(2);nb()};h("mgdecline").onclick=function(){h("magicworkshopmenu").style.display="none"};h("mgitem").onmousedown=function(a){var d=1;a.button&&(d*=-1);n.mwMore(d);nb()};h("mgaccept").onclick=function(){h("magicworkshopmenu").style.display="none";n.createItems()};h("mgamount").onmousedown=function(a){var d=1;a.button&&(d=-1);n.mwamount(d);nb()};xa=[h("order1"),h("order2"),h("order3"),h("order4"),h("order5"),h("order6"),h("order7"),h("order8")];dd=h("bottominfo");
b=0;for(var a=xa.length;b<a;b++)xa[b].addEventListener("mousedown",bg),xa[b].addEventListener("mouseup",cg),xa[b].ordid=b,xa[b].addEventListener("mouseenter",dg),xa[b].addEventListener("mouseout",eg);h("stock").addEventListener("click",function(a){n.checkStock()});ye={fish:{background:"0px -220px"},mana:{background:"0px -120px",progress:h("progressmana")},2:{background:"0px -240px"},milk:{background:"0px -280px"},0:{background:"0px -260px"},3:{background:"0px -320px"},1:{background:"0px -340px"}};
h("gameMenu").onclick=He}h("minimap").addEventListener("mousedown",function(a){var d=n.mapWidth(),c=a.pageX-4,e=a.pageY-31;x(d,c,e);0===a.button?(document.addEventListener("mouseup",function p(a){jc=!1;document.removeEventListener("mouseup",p);document.removeEventListener("mousemove",kc)}),jc=!0,kc(a),document.addEventListener("mousemove",kc)):2===a.button&&(d=n.mapWidth(),c=32*~~(d*(a.pageX-4)/Qa),e=32*~~(d*(a.pageY-31)/za),x(c,e),n.mouseUp(c,e,2,!0))})},lc=function(b,a,e,d,c,f,k,n,p,q,w,r,t,v){t=
f?lc.last:h("guideTable").getElementsByTagName("tr")[t].getElementsByTagName("td")[r];var m="";f||(m+="<span>"+Y[r]+"</span>");m+="<div "+(f&&"class='spchild'"||"")+'>\n    <div class="prevIcon" style="background-position-y:'+48*c+'px"></div>\n    <ul>\n    <li class="guiTitle">'+l[la[b]]+"</li>\n    "+(v&&'<li class="desc">'+l[la[v]]+"</li>"||"")+"\n    <li><span>"+(l.RESOURCE_COST+":</span> ")+(n&&n+"<img src='nehhon/gold.gif'>"||"")+" "+(p&&p+"<img src='nehhon/wood.gif'>"||"")+" "+(q&&q+"<img src='nehhon/food.gif'>"||
"")+"  "+(w&&w+"<img src='nehhon/stone.gif'>"||"")+" </li>\n    ";k&&1!=k||(m+="\n    <li><span>"+l.MISC_HEALTH3+":</span> "+a+"</li>");k||(m+="\n    <li><span>"+l.MISC_ATTACK3+":</span> "+e+"</li>\n    <li><span>"+l.MISC_DEFENCE3+":</span> "+d+"</li>");b=ca("div",t,m+"</ul>\n    </div>\n    ");f||(lc.last=b)},fg=function(b){cb();var a=ca("button",document.body);a.className="closeButton2";a.onclick=function(){bb(b);bb(a);sa();location.hash=""}},Le=function(){if(!h("guide")){var b=Oa("guide");h("guide").innerHTML=
"<table style='border-spacing: 37px;'><tbody id='guideTable'></tbody></table>";for(var a="",e=0;15>e;e++)a+="<tr><td></td><td></td><td></td></tr>";h("guideTable").innerHTML=a;n.setupGuide();fg(b)}},dg=function(){n.mouseEnter(this.ordid)},eg=function(){dd.innerHTML=""},cg=function(b){n.executeOrder(this.ordid,b.button);this.style.transform="translate(0px,0px)"},bg=function(){this.style.transform="translate(2px,2px)"},jc,Me=function(){history.pushState("",document.title,window.location.pathname)},$a=
function(){t.online=0;location.hash="";h("index").style.display="block";h("returnmenu").style.display="none";setTimeout(Me,200)},va=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1],we=function(){if(S||"false"===localStorage.nightcycle)e=
new Float32Array([1,1,1,1]);else{var b=(.025*t.cycle/t.daylength*24+t.initialhour)%24,a=~~b;b-=a;Ee.style.backgroundPosition="0 -"+36*a+"px";var e=new Float32Array([va[4*a],va[4*a+1],va[4*a+2],va[4*a+3]]);a=(a+1)%24;e[0]+=(-e[0]+va[4*a])*b;e[1]+=(-e[1]+va[4*a+1])*b;e[2]+=(-e[2]+va[4*a+2])*b;e[3]+=(-e[3]+va[4*a+3])*b}a=e;f.useProgram(H);f.uniform4fv(Ne,a);f.useProgram(F);f.uniform4fv(Oe,a)},R=0,X=0,gb=0,hb=0,ob=function(b,a){var e=window.innerWidth,d=window.innerHeight,c=n.mapWidth(),m=M*r.mx/32;b/=
32;a/=32;var f=M*e/32,h=M*d/32,k=e/32*J,l=d/32*J,w=b+.5*(k-f),q=a+.5*(l-h);k<c&&l<c&&(w<-m?b=.5*-(k-f)-m:w+f>c&&(b=c-f-(k-f)/2),0>q?a=.5*-(l-h):q+h>c&&(a=c-h-(l-h)/2),f>c&&(M=c/(e/32),x(M)),h>c&&(M=c/(d/32),x(M)));R=32*-b;X=32*-a;n.mouseMove(0,0,0)},kc=function(b){var a=n.mapWidth(),e=b.pageX-parseInt(h("minimap").style.left);b=b.pageY-parseInt(h("minimap").style.top);var d=h("tzar").width,c=h("tzar").height*za/(32*a);e=~~(.5+(e-d*Qa/(32*a)*.5)*a/Qa);b=~~(.5+(b-.5*c)*a/za);ob(32*e,32*b);0==jc&&document.removeEventListener("mousemove",
kc)},Je=function(b){b&&!S&&("displaynone"==h("enterwindow").className?(h("enterwindow").className="displayblock",h("msginputGame").focus(),pb.blocked=13):(ld(),h("enterwindow").className="displaynone",pb.blocked=null));!0===b&&n.runKey(13,!0)},md=0,nd=0,od=0,pd=0,pb={37:function(b){pd=b;gb=pd+od},40:function(b){md=-b;hb=md+nd},39:function(b){od=-b;gb=pd+od},38:function(b){nd=b;hb=md+nd},27:function(b){},13:Je,19:function(b){},48:function(b){b&&(M=1,Pe({deltaY:0}))},88:function(b){return qd=b},219:function(b){b&&
Qe(-1)},221:function(b){b&&Qe(1)},blocked:null};document.oncontextmenu=function(){return!1};var rd=function(){if(!S){O("magicworkshopmenu");gc.style.display="none";hc.style.display="none";lb.style.display="none";qa.style.display="none";h("manamenu").style.display="none";h("manamenu1").style.display="none";h("progressmana").style.display="none";cd.innerHTML="";gc.innerHTML="";hc.innerHTML="";h("manamenu").innerHTML="";lb.innerHTML="";ic.innerHTML="";mb.innerHTML="";qa.value="";mb.maxLength="";ze.style.display=
"none";for(var b=0;b<xa.length;xa[b++].innerHTML="");Re()}};document.onkeydown=function(b){if(b.ctrlKey&&b.shiftKey)return!1;var a=!0;({116:1,115:1,123:1})[b.keyCode]&&(a=!1);return a};var gg=function(b){if(pb[b.keyCode])pb[b.keyCode](1);b.target!=h("msginputGame")&&n.runKey(b.keyCode,!0)},hg=function(b){if(pb[b.keyCode])pb[b.keyCode](0);x(b.keyCode,"up");b.target!=h("msginputGame")&&n.runKey(b.keyCode,!1)},sd,td,ud,vd,Ib=!1,Jb=function(b,a){Jb.ilegal||(R=ud-(sd-b)*M,X=vd-(td-a)*M,ob(-R,-X),mc())},
Ra=function(b){b=Math.sqrt(Math.pow(b[0].screenX-b[1].screenX,2)+Math.pow(b[0].screenY-b[1].screenY,2));x(b);Ra.dist||(Ra.dist=b,Ra.valor=M,Jb.ilegal=!0);Se(Ra.valor-(b-Ra.dist)/Ra.dist)},ig=function(b){var a=b.touches[0].screenX;b=b.touches[0].screenY;ud=R;vd=X;sd=a;td=b},jg=function(b){if(2==b.touches.length)return Ra(b.touches);Jb(b.touches[0].screenX,b.touches[0].screenY)},kg=function(b){Ra.dist=void 0;x(b);0==b.touches.length&&(Jb.ilegal=!1)},wd=function(b){return!("li"==b.target.localName||
b.target==h("tzar")||b.target==h("resources")||b.target==h("playersinfo")||b.target==h("msgs1")||"span"==b.target.localName||b.target==h("resourcesbefore"))},lg=function(b){var a=window.innerWidth,e=window.innerHeight,d=b.pageX,c=b.pageY;if(!wd(b)){if(Ib)return Jb(d,c);n.mouseMove(b.pageX,b.pageY,1)}if(screen.height-10<=e){if(1.2===Math.abs(gb)||0===gb)gb=1.2*((10>d)-(d>a-10));if(1.2===Math.abs(hb)||0===hb)hb=1.2*((10>c)-(c>e-10))}},mg=function(b){if(!wd(b))if(b.altKey&&b.pageX>r.mx){Ib=!0;var a=
b.pageX;b=b.pageY;ud=R;vd=X;sd=a;td=b}else Ib=!1,n.mouseDown(b.pageX,b.pageY,b.button)},ng=function(b){if(!wd(b))if(Ib)Ib=!1;else return n.mouseUp(b.pageX,b.pageY,b.button)},Te=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){Te||(Te=!0,xd())});var og=function(b){return b.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,
function(a){return"(LINK HIDDEN DUE TO SAFETY)"})},Ue=function(b,a,e){b=l[la[b]];e&&(b=yd(b,pa(ma(a,e))));h("msgs1").innerHTML+="<li>"+b+"</li>";qb()},pa=function(b){for(var a,e="",d=0;a=b[d++];)e+=String.fromCharCode(a);return e},mc=function(){};new Float32Array(8);var zd,Ad,Bd,Cd,Ve,M=1;new Float32Array(12);var f,nc,Wc=function(b,a){return new Float32Array(ka.buffer,b,a)},ma=function(b,a){return new Uint16Array(ka.buffer,b,a)},ec=function(b,a){return new Uint8Array(ka.buffer,b,a)},Re=function(){if(!S){for(var b=
0,a=k;b<a;b++){var e=xa[b];e.className="blocked";e.style.backgroundPosition="48px 96px";e.innerHTML=""}A.className="blocked";q.className="blocked";D.className="blocked"}},Oe,F,H,Dd,Ne,We,Xe,Ed,Fd,oc,rb,Kb,Lb,pc,Gd,Hd,Ye,Nb=function(b,a){var e=4*Ve,d=f.createBuffer();d.size=a;d.len=e;f.bindBuffer(f.ARRAY_BUFFER,d);f.enableVertexAttribArray(b);f.vertexAttribPointer(b,a,f.FLOAT,!1,0,0);f.bufferData(f.ARRAY_BUFFER,e*a,f.STATIC_DRAW);V?Mb.vertexAttribDivisorANGLE(b,1):f.vertexAttribDivisor(b,1);return d};
Nb.jump=4E3;var qc=function(b,a){var e=a+1E4;a*=4;e*=4;if(V)f.bindBuffer(f.ARRAY_BUFFER,b),f.bufferData(f.ARRAY_BUFFER,e*b.size,f.STATIC_DRAW),n.resetGLbuffer();else{var d=f.createBuffer();f.bindBuffer(f.COPY_READ_BUFFER,b);f.bindBuffer(f.ARRAY_BUFFER,d);f.bufferData(f.ARRAY_BUFFER,a*b.size,f.STATIC_DRAW);f.copyBufferSubData(f.COPY_READ_BUFFER,f.ARRAY_BUFFER,0,0,a*b.size);f.bindBuffer(f.COPY_READ_BUFFER,d);f.bindBuffer(f.ARRAY_BUFFER,b);f.bufferData(f.ARRAY_BUFFER,e*b.size,f.STATIC_DRAW);f.copyBufferSubData(f.COPY_READ_BUFFER,
f.ARRAY_BUFFER,0,0,a*b.size);f.bindBuffer(f.COPY_READ_BUFFER,null);f.deleteBuffer(d)}},rc=function(){var b=ec(n.getColorTexture(),4*(n.nkingdom()+16));f.activeTexture(f.TEXTURE4);var a=f.createTexture();f.bindTexture(f.TEXTURE_2D,a);if(V){for(var e=new Uint8Array(4*Math.pow(64,2)),d=0;d<e.length;d++)e[d]=b[d];f.texImage2D(f.TEXTURE_2D,0,f.RGBA,64,64,0,f.RGBA,f.UNSIGNED_BYTE,e)}else f.texImage2D(f.TEXTURE_2D,0,f.RGBA,b.length/4,1,0,f.RGBA,f.UNSIGNED_BYTE,b);sb();f.bindTexture(f.TEXTURE_2D,null);f.bindTexture(f.TEXTURE_2D,
a);f.uniform1i(f.getUniformLocation(F,"colorArray"),4);f.activeTexture(f.TEXTURE2)},V,Z=function(b,a){if(!t.canceled){performance.now();da.running||requestAnimationFrame(Z);var e=Z.fp1000,d=Z.delta;b=Z.now;var c=Z.realnow,g=Z.delta,m=b;Z.frameCount++;b=a||Date.now()-Fb+25*t.cycle;Z.now=b;d=(d+(b-m))/1E3;Z.delta=d;a=c;c=Date.now();Z.realnow=c;g=(g+(c-a))/1E3;Z.realdelta=g;bd+=d;ad++;Z.fp1000=e+d;if(0!=gb||0!=hb)a=parseInt(localStorage.scrollSpeed)/100,R+=gb*g*1280*M*a,X+=hb*g*1280*M*a,ob(-R,-X);f.useProgram(F);
mc();f.uniform1f(We,b);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);Ze(b);tb(Hd);b=n.getBufferID();Id(b);$e(b);ha.update&&ha(1);da.running&&(0<db&&clearInterval(db),h("tzar").toBlob(function(a){var c=da.a;a=URL.createObjectURL(a);c.href=a;c.download=da.i++ +".png";c.click();window.URL.revokeObjectURL(a);setTimeout(function(){setTimeout(wa,9);Z(0,25*t.cycle+16)},20)}));sc.stream&&sc.stream.getVideoTracks()[0].requestFrame();f.finish()}},Jd=function(b){b?Jd.time=performance.now():x("c++",performance.now()-
Jd.time)},Id=function(b){b&&(f.enable(f.BLEND),f.blendEquation(f.FUNC_ADD),f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA),V?Mb.drawArraysInstancedANGLE(f.TRIANGLES,0,6,b):f.drawArraysInstanced(f.TRIANGLES,0,6,b),f.disable(f.BLEND))},qd=!1,tc,$e=function(b,a){var e=n.mapWidth();f.uniform2fv(Kb,[0,0]);f.uniform1f(nc,1);if(n.vsblt()&&b){var d=n.vsblt();f.uniform1i(rb,3);f.bindFramebuffer(f.FRAMEBUFFER,Ob);f.viewport(0,0,e,e);f.bindTexture(f.TEXTURE_2D,Dd);1<d&&(f.colorMask(!0,2<d,!1,!1),f.clearColor(0,
0,0,0),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.colorMask(!0,!0,!0,!0));V?Mb.drawArraysInstancedANGLE(f.TRIANGLES,0,6,b):f.drawArraysInstanced(f.TRIANGLES,0,6,b);f.bindTexture(f.TEXTURE_2D,ub);f.bindFramebuffer(f.FRAMEBUFFER,null)}f.uniform1i(rb,1);d=r.marx;var c=window.innerHeight-za-r.mary;e=Qa;var g=za;a&&(g=e=d=Math.min(window.innerWidth,window.innerHeight)-128,d=window.innerWidth/2-e/2,c=window.innerHeight/2-g/2);f.viewport(d*J,J*c,e*J,g*J);Id(b);f.uniform1i(rb,2);Id(1);f.uniform1i(rb,
0);f.uniform2fv(Kb,[R,X]);f.uniform1f(nc,J/M);f.viewport(0,0,f.canvas.width,f.canvas.height);qd&&!a&&$e(b,1)},uc,Ze=function(b,a){now=Math.floor(b/100)%5;f.useProgram(H);tb(Gd);f.uniform1f(Ed,now);f.drawArrays(f.TRIANGLES,0,6);var e=r.marx,d=window.innerHeight-za-r.mary,c=Qa,g=za;if(a){var m=Math.min(window.innerWidth,window.innerHeight)-128;g=c=m;e=window.innerWidth/2-c/2;d=window.innerHeight/2-g/2;f.uniform2fv(uc,[-e,-d]);W("bigMap");h("bigMap").style.width=m+"px";h("bigMap").style.height=m+"px"}else O("bigMap"),
f.uniform2fv(uc,tc);f.viewport(J*e,J*d,J*c,J*g);f.uniform1i(oc,1);f.uniform2fv(Lb,[0,0]);f.uniform1f(pc,J*c/32/n.mapWidth());f.drawArrays(f.TRIANGLES,0,6);f.uniform1i(oc,0);f.uniform2f(Fd,f.canvas.width,f.canvas.height);f.uniform2fv(Lb,[R,X]);f.uniform1f(pc,J/M);f.viewport(0,0,f.canvas.width,f.canvas.height);f.useProgram(F);qd&&!a&&Ze(b,1)},Kd=!1,Se=function(b){var a=n.mapWidth(),e=window.innerHeight;b*(window.innerWidth-r.mx)/32>a||b*e/32>a||(M=b,.08>M&&(M=.08),ob(-R,-X),n.setupZoom(M),af())},Pe=
function(b){Ld||!(b.clientX>r.menumx||jc)&&b.clientX||(b=Math.sign(b.deltaY)*parseFloat(localStorage.zoomMult)/1E3*M,Se(b+M))},af=function(){var b=window.innerWidth,a=window.innerHeight,e=-R+.5*(b*J-M*b)+r.mx,d=-X+.5*(a*J-M*a);b*=M;a*=M;var c=vb.viewF32();c[0]=e;c[1]=d;c[2]=-999999999;c[3]=0;c[4]=0;bf();c[0]=b;c[1]=a;c[2]=0;c[3]=0;c[4]=0;cf()},df,ef;mc=function(){var b=[R,X];if(R!=df||X!=ef)df=R,ef=X,n.setupTranslation(-R,-X),f.useProgram(H),f.uniform2fv(Lb,b),f.useProgram(F),f.uniform2fv(Kb,b),af()};
var sb=function(){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT)},Pb,pg=function(b){if(!Pb[b]){f.useProgram(F);var a=f.createTexture();f.activeTexture(f.TEXTURE6+b);Pb[b]=a;f.bindTexture(f.TEXTURE_2D,a);sb();f.texImage2D(f.TEXTURE_2D,0,vc,4096,4096,0,vc,f.UNSIGNED_BYTE,null);f.uniform1i(f.getUniformLocation(F,"img_common["+
b+"]"),6+b);f.useProgram(H);f.uniform1i(f.getUniformLocation(H,"img_common["+b+"]"),6+b)}return Pb[b]},vc,ub,Ob,J,wc=function(){var b=Math.round(window.innerWidth*J),a=Math.round(window.innerHeight*J);f.canvas.width=b;f.canvas.height=a;n.canvasSize(b,a);f.useProgram(H);f.uniform2f(Fd,b,a);f.useProgram(F);f.uniform2f(Xe,b,a);wc.changed=1;ob(-R,-X)},tb=function(b){if(V)return xc.bindVertexArrayOES(b);f.bindVertexArray(b)},xc,Mb,ff=function(){return V?(xc||(xc=f.getExtension("OES_vertex_array_object")),
xc.createVertexArrayOES()):f.createVertexArray()};Array.prototype.put=function(b){this[this.length]=b};Array.prototype.quit=function(b){b=this.indexOf(b);return-1<b?(this.splice(b,1),!0):!1};Array.prototype.add=function(b){0>this.indexOf(b)&&(this[this.length]=b)};var t={},bf=function(){var b=vb.viewF32(),a=gf.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Ad);f.bufferSubData(f.ARRAY_BUFFER,12*b[4],a)},cf=function(){var b=vb.viewF32(),a=yc.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Cd);f.bufferSubData(f.ARRAY_BUFFER,
16*b[4],a)},Y=["European","Arab","Asian"],yd=function(b,a,e){if(b)return e&&(b=b.replace("%d",e)),b.replace("%s",a)};Uc.translated=!0;var wb=function(b){t.infinity=void 0;b="mapx goldRes woodRes foodRes stoneRes infinity terrain terrainRND peons freePop maxPop gameType AIlevel fog".split(" ");var a=h("mapconfiguration")&&""!==h("mapconfiguration").innerHTML;h("mapconfiguration")||S||hf();for(var e=0,d=b.length;e<d;e++){var c=b[e];if(a){var f=h(b[e]+"Value");f="checkbox"==f.type?1==f.checked&&1||0:
parseInt(f.value);localStorage[c]=f;t[c]=f}else t[c]=parseInt(localStorage[c])}a&&(d=n.RNDobjexp(),b=(new Ga(n.shapoint(),d)).viewU32(),localStorage.rndObjs=b.join(","));t.daylength=2880;t.initialhour=12;t.infinity&&(t.goldRes=Math.pow(2,31)-1,t.foodRes=Math.pow(2,31)-1,t.woodRes=Math.pow(2,31)-1,t.stoneRes=Math.pow(2,31)-1);t.mapy=t.mapx;t.gravity=580.9/9.8*9.8;t.name="";t.arje=~~(555555*Math.random()+1);n.setupGame(t.peons,t.freePop,t.goldRes,t.woodRes,t.foodRes,t.stoneRes,t.water,t.terrain,t.fog,
t.gameType,t.mapx,t.arje,t.maxPop,t.terrainRND,t.AIlevel);return t},da=function(){da.arr=[];da.running=!0;da.a=document.createElement("a");da.a.hide();da.i=0};da.one=function(){h("tzar").toBlob(function(b){var a=document.createElement("a");b=URL.createObjectURL(b);a.href=b;a.download="tzared.png";a.click();window.URL.revokeObjectURL(b)})};da.stop=function(){da.running=!1};var sc=function(){var b=h("tzar").captureStream(0),a=new MediaRecorder(b,{audioBitsPerSecond:128E3,videoBitsPerSecond:25E6,mimeType:"video/webm;codecs=h264"});
sc.stream=b;a.addEventListener("dataavailable",function(a){sc.stream=void 0;a=new Blob([a.data],{type:"video/webm"});a=URL.createObjectURL(a);x(a)});a.start();setTimeout(function(){a.stop()},4E3)},se=function(){Gb&&(Gb.innerHTML="");h("loadingtext").innerHTML=l.MSG_GAME_LOAD;r.kingdom||(r.kingdom=1);t.online&&(qg(l.MSG_GAME_CREATE),t.editor=0);n.mapWidth()?(t.mapx=n.mapWidth(),t.mapy=t.mapx):wb();t.pausedTime=0;t.canceled=0;xb=h("msgs1");t.online||(location.hash="");W("content");O("playermenu");O("index");
t.cycle?t.deltaTime=25*t.cycle:(t.date=Date.now(),t.cycle=0,t.deltaTime=0);t.loadDate=Date.now();t.online||Me();t.now=ue;t.paused=0;t.pausedTime=0;t.zMax=96*t.mapy;eb();performance.now();t.allow14=!0;t.temperature=25;var b=t.temperature;0===r.temperature&&(b+="&deg;C");h("temperature")&&(h("temperature").innerHTML=b);M=1;n.preSetup(~~(1E4*Math.random()));ha(55);Fa.check();S&&(Fe(),Hb())},Fa=function(){ra(["loading","playermenu","index"]);h("playersinfo")&&(h("playersinfo").innerHTML="");rd();window.addEventListener("keydown",
gg);window.addEventListener("keyup",hg);window.addEventListener("mousemove",lg);window.addEventListener("touchstart",ig);window.addEventListener("touchmove",jg);window.addEventListener("touchend",kg);window.addEventListener("wheel",Pe,!1);window.addEventListener("mousedown",mg);window.addEventListener("mouseup",ng);n.sndCnf("true"==localStorage.deathsounds);dc=performance.now()-dc;x("FULL: ",dc);t.online?n.plready():Md();t.allow14=!1};Fa.check=function(){Fa.load++;Fa.load===Fa.target&&Fa()};Fa.target=
2;var jf=function(){return r.gl?!1:(kb("You can't run WEBGL 2<br>More info <a href='http://webglreport.com/?v=2'>here</a>","Error"),$a(),!0)},xd=function(){var b=document.documentElement;b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen()},Oa=function(b){var a=document.createElement("div");a.id=b;document.body.appendChild(a);return a},kf=function(){S?(r.marx=0,
r.mary=60,r.menumy=60,za=Qa=171,r.mx=171,r.menumx=171):(r.mx=151,za=Qa=128,r.menumx=151,r.menumy=0,r.marx=4,r.mary=31);n.stmenummx(r.mx);var b=h("minimap");b.style.width=Qa+"px";b.style.height=za+"px";b.style.left=r.marx+"px";b.style.top=r.mary+"px"},Qb=function(b){jf()||(Ke(),fc(),window.onbeforeunload=function(){return"Are you sure you want to quit?"},dc=performance.now(),Fa.load=0,Ka("bless"),b&&"true"==localStorage.fullscreen&&xd(),kf(),Oa("loading"),""==h("loading").innerHTML&&(h("loading").innerHTML=
'<p id="loadingtext"></p>\n<div>\n<div id=\'logo\' class="svgnehhon"></div>\n<span id="netral">NEHHON NETRAL-H3 ENGINE</span>\n</div>'),S?n.setupEditor():n.mapWidth()||wb(),Pa())},Qa=128,za=128,aa=[];window.addEventListener("offline",function(b){Cb("Offline","#ff0000")});window.addEventListener("online",function(b){Cb("Online","#00ff00")});(function(){for(var b=["returnmenu","index","Account","accountIframe"],a=0,e=b.length;a<e;h(b[a++]));})();var Nd=!1,rg=function(){Nd=!0;location.replace("#"+this.gameID+
"Room");Od(this.gameID)},Od=function(b){aa=[];lf();x("connecting to",b,l.MSG_GAME_LOAD);h("game").style.display="block";h("gameName").innerHTML=l.MSG_GAME_LOAD;h("returnmenu").style.display="none";h("index").style.display="none";xb.innerHTML="";Sa=[];r.p2p?(ea.joinRoom(b,Gc),fc()):(ea||fa(),fa.func=function(){Od(b)})},sg={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",
36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},mf=function(b){O("game");t.online=0;t.id=void 0;r.adminOK=!1;ea.leaveRoom();aa.length=0;$a();n.closeRoom();b.constructor==String&&kb(b)},Ie=function(){var b=localStorage.menuOpacity/100;h("menubefore").style.opacity=b;h("menuafter").style.opacity=b;h("resourcesbefore").style.opacity=b},He=function(){S||n.pause0();h("playingMenu")||
Oa("playingMenu");if(""==h("playingMenu").innerHTML){var b="";"true"===localStorage.nightcycle&&(b="checked");var a="";t.online||(a="<tr><td>"+l.OPTIONS_T_GS+' </td><td>\u00d71 <input type="range" id="gameSpeed" value="0"/> \u00d75</td></tr>');h("playingMenu").className="fullwindow";h("playingMenu").innerHTML='\n<ul>\n<li id="backToGame">'+l.MENU_BACK+'</li>\n<li id="saveGame">'+l.ENDGAMEDLG_SAVE+'</li>\n<li id="fullscreenmenu">'+l.FULLSCREEN+'</li>\n<li id="quitButton1">'+l.MENU_QUIT+"</li>\n</ul>\n<table>\n"+
a+"\n<tr><td>"+l.ZOOMSPEED+' </td><td><input type="range" id="zoomRange" value="'+localStorage.zoomMult+'"/></td></tr>\n<tr><td>'+l.OPTIONS_T_SS+' </td><td><input type="range" id="scrollRange" value="'+localStorage.scrollSpeed+'"/></td></tr>\n<tr><td>'+l.MENU_OPACITY+' </td><td><input type="range" id="opacityRange" value="'+localStorage.menuOpacity+'"/></td></tr>\n<tr><td>'+l.MP_SETUPMAP_T_DAY+' </td><td><label class="container"><input id="daynightvalue" type="checkbox" '+b+'><span class="checkmark"></span></label></td>\n</table>\n<div>\n<span>'+
l.OPTIONS_T_MV+'</span><br/><input type="range" id="musicRange" value="'+localStorage.musicRange+'"/><br/><br/>\n<form id="musicSelect">\n<input type="radio" name="mversion" value="originalMusic" checked /> Original<br/>\n<input type="radio" name="mversion" value="sharpRain" /> Original - <a href="https://www.youtube.com/user/rainheart666787/featured" target="_blank" rel="noopener noreferrer">Sharp Rain</a> Version<br/>\n<input type="radio" name="mversion" value="originalMusic1" /> Original - Alternative One<br/>\n<input type="radio" name="mversion" value="mute" /> Mute\n</form>\n<br />\n<span>'+
l.OPTIONS_T_SVOL+'</span><br/><input type="range" id="soundRange" value="'+localStorage.soundRange+'"/><br/>\n<table>\n<tr><td>'+l.DEATHSOUNDS+' </td><td><label class="container"><input id="deathsoundsValue" type="checkbox" '+("true"===localStorage.deathsounds&&"checked"||"")+'><span class="checkmark"></span></label></td>\n</table>\n</div>\n';h("quitButton1").onclick=Ca;h("saveGame").onclick=tg;h("backToGame").onclick=function(){O("playingMenu");S||n.resume0();sa()};h("deathsoundsValue").onchange=
function(){localStorage.deathsounds=this.checked;n.sndCnf("true"==localStorage.deathsounds)};h("daynightvalue").onchange=function(){localStorage.nightcycle=this.checked};h("fullscreenmenu").onclick=xd;h("musicRange").oninput=function(){Db.gain.value=parseInt(h("musicRange").value)/100;localStorage.musicRange=h("musicRange").value};h("zoomRange").oninput=function(){localStorage.zoomMult=h("zoomRange").value};h("gameSpeed")&&(h("gameSpeed").onchange=Xf);h("opacityRange").oninput=function(){localStorage.menuOpacity=
h("opacityRange").value;Ie()};h("scrollRange").oninput=function(){localStorage.scrollSpeed=h("scrollRange").value};h("soundRange").oninput=function(){Eb.gain.value=parseInt(h("soundRange").value)/100;localStorage.soundRange=h("soundRange").value};localStorage.favMusic&&(h("musicSelect").mversion.value=localStorage.favMusic);b=h("musicSelect").getElementsByTagName("input");a=0;for(var e=b.length;a<e;a++)b[a].onchange=U.reset}t.demo&&O("saveGame")||W("saveGame");h("playingMenu").style.display="block";
cb()},Sa,Lf=function(){location.reload()},nf=function(b){for(var a=0,e=aa.length;a<e;a++){var d=aa[a];if(d.id==b)return d}},ea,$d=function(b){for(var a=0,e=0;e<b.length;e++)a+=b.charCodeAt(e)*e+(a&e);x(a,"id");return a%4294967295},fa=function(){jf()||(r.name?(Tf(),ea=new SimpleWebRTC({localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},url:"https://gthsolar1.herokuapp.com/"}),ea.on("channelMessage",function(b,a,e){a=n.tempointeradd(e.length);
a=new Uint32Array(ka.buffer,a,e.length);for(var d=0;d<e.length;d++)a[d]=e[d];n.onldata(b.superID)}),ea.on("error",function(b){"full"==b&&($a(),Cb(l.ERR_GAMEFULL,"#ff0000"))}),ea.on("connectionReady",function(b){var a=ea.connection.connection;r.p2p=a;r.superID=$d(a.id);n.setupOnlID(r.superID);a.username=r.name;a.color=r.color;a.on("getRooms",function(a){var d=a.date,c=Object.keys(a),b=h("gameList");if(1<c.length){b.innerHTML="";for(var e=0,f=c.length;e<f;e++){var m=c[e],k=a[m];if("date"!=m){var n=
k.len;if(n){var q=document.createElement("tr"),r="";r=k.playing?r+("<td><div class='redCircle'></div>"+l.PLAYING+"</td>"):r+("<td><div class='redCircle' style=\"background:rgba(0,255,0,.8); box-shadow:0px 0px 20px rgba(0,255,0,.8)\"></div>"+l.WAITING+"</td></td>");r+="<td>"+Ta(k.description)+"</td><td>"+~~((d-k.date)/6E4)+" min ago</td><td>"+Ta(n)+"/"+Ta(k.max)+"</td>";q.innerHTML=r;q.gameID=m;k.playing||(q.onclick=rg);b.appendChild(q)}}}}else b.innerHTML="<tr><td>"+l.NO_GAMES_FOUND+"</td></tr>"});
r.onlineID=b;fa.func&&fa.func()}),ea.on("createdPeer",function(b){t.started||yb(b)})):(void 0)(fa))},ug=function(){fc();sa();lf();W("game");O("returnmenu");O("index");h("gameName").innerHTML=l.MSG_GAME_LOAD;xb.innerHTML="";aa=[];Xd();r.admin=1;r.room={description:h("gameFormName").value,max:parseInt(h("gameMax").value),public:!0};2>r.room.max&&(r.room.max=2);14<r.room.max&&(r.room.max=14);localStorage.gameDescription=r.room.description;ea.createRoom(r.onlineID+"b",Gc);t.online=1;document.body.removeChild(h("gameForm"));
Sa=[r.onlineID];r.adminOK=!0;wb();n.setupOnlTable(r.room.max+1);jb(n.onlADD(0,0,parseInt(localStorage.color.substr(1),16),r.superID,0),17,r.name);of()},ae=function(){ea||fa();if(r.onlineID){cb();var b=localStorage.gameDescription||r.name+"'s room",a=document.createElement("div");a.className="fullwindow";a.id="gameForm";a.innerHTML='\n<h2 style="margin-bottom: 21px">'+l.OPTIONS_T_GOPT+"</h2>\n"+l.EDIT_T_GAMENAME+': <input id=\'gameFormName\' type="text" spellcheck="false" value="'+b+'" maxlength="29" /><br />\n'+
l.SP_SETUPMAP_T_NUM_PLAYERS+': <input id="gameMax" type="number" value="6" max="14" min="2"/><br />\n';b=document.createElement("button");b.innerHTML=l.MSG_SYS_CONT;b.onclick=ug;a.appendChild(b);document.body.appendChild(a)}else setTimeout(function(){location.hash=""},200),fa.func=ae},tg=function(){var b=n.savegame(),a=Rb.viewI32(),e=ec(b,a[0]);a=a[1];x(e,b);b=new Blob([new Uint32Array([a]),e],{type:"application/octet-binary"});b=URL.createObjectURL(b);e=document.createElement("a");document.body.appendChild(e);
e.style="display: none";e.href=b;e.download="savegame.tzared";e.click()},vg=function(){if(aa.length){for(var b=document.getElementsByClassName("onlPlayer"),a=0;a<b.length;a++)bb(b[a]);wb();n.strOnl();r.p2p.emit("gameStarted")}},Md=function(){sa();h("alert")&&O("alert");h("waitList")&&bb(h("waitList"));t.started=1;t.date=Date.now();eb();S||U();n.startMovement();Z()};Md.fast=!0;var pf=document.getElementsByTagName("main")[0],Ld=!1,sa=function(){Ld=!1;pf.style.cssText=""},cb=function(){Ld=!0;pf.style.cssText=
"filter:blur(14px);pointer-events:none"};var qf=function(){O("game");t.id=void 0;t.online=0;t.compressed=void 0;t.arje=void 0;ea.leaveRoom();aa.length=0;$a();r.admin=0;n.closeRoom()};var wg=function(b,a){if(null==h(b)){var e=document.createElement("div");e.innerHTML=a;e.id=b;h("playermenu").appendChild(e);return!0}return!1},lf=function(){wg("game",'<h2 id="gameName"></h2>\n<p id="onlineTopInfo"></p>\n<div id="multi21">\n<table class="players" >\n<tbody id="multiplayertable">\n</tbody>\n</table>\n<div id="chat">\n<ul id="msgs">\n</ul>\n<input id="msginput" type="text" autocomplete="off" />\n<input id="sendmsg" type="submit" value="" />\n</div>\n</div>\n<div id="showGameInfo"></div>\n<div id="buttons"></div>')?
(xb=h("msgs"),zc=h("msginput"),zc.addEventListener("keyup",function(b){13===b.keyCode&&ld()}),h("sendmsg").onclick=ld):(O("multi21"),h("showGameInfo").innerHTML="")},Gc=function(b){if((r.admin||b)&&!t.id)if(W("game"),h("multi21").style.display="flex",b=ea.roomName,b+="Room",x("login"),sa(),0!==ea.getPeers().length||r.admin){var a=r.room||NaN;x(a);t.id=b;t.online=1;Xd();r.admin&&(h("onlineTopInfo").innerHTML=' <button id="addAI" style="padding: 6px;">'+l.ADD_AI+'</button><span style="float:right;display:none">'+
l.SP_SETUPMAP_T_NUM_PLAYERS+'<input style="display:none"  id="nplayersO" min="2" type="number" max="14" value="'+r.room.max+'" /></span>',h("nplayersO").onchange=function(){var a=this.value;a<Sa.length&&(a=Sa.length);x(Sa.length,a);Sa.length!=a||aa.length||a++;a=parseInt(a);if(2>a||!a)a=2;14<a&&(a=14);a!==r.room.max&&r.p2p.emit("maxPlayers",a-(Sa.length-aa.length-1));this.value=r.room.max},h("addAI").onclick=function(){n.onlCount()<r.room.max&&2!=r.room.max&&(jb(n.onlADD(0,0,16777216*Math.random(),
0,1),17,"AI"),r.p2p.emit("maxPlayers",r.room.max-n.nAIs()),n.sndNfo())});h("copyButton")&&(h("copyButton").onclick=function(){h("onlineID").select();document.execCommand("Copy")},h("onlineID").value=location.origin+"/#"+t.id);h("gameName").innerHTML=Ta(a.description)||"Online Game";O("returnmenu");r.admin?(location.replace("#"+t.id),h("buttons").innerHTML='<button id="startbutton">'+l.MP_MPLAYER_PLAY+' \u25b6</button><button id="optionbutton">'+l.MENU_OPTI+'</button><button id="closebutton">'+l.GENERAL_CLOSE+
'</button><br><input id="maploadOnline" type="file" /> <label style="display:none" for= "maploadOnline">'+l.strcusMap+'</label> <button id="deleteCusMap">'+l.randomMap+"</button>",h("startbutton").onclick=vg,h("optionbutton").onclick=rf,h("closebutton").onclick=qf,h("maploadOnline").accept=".tzared",O("deleteCusMap")):(h("buttons").innerHTML='<button id="quitbutton">'+l.MSG_DISCONNECT+"</button>",h("quitbutton").onclick=mf)}else location.hash="",$a()},Ub=function(b){x("rem2");b=nf(b.id);x(b);if(b){var a=
pa(ma(n.empName(n.pidkingdom(b.superID)),17));Pd(yd(l.VIEWMSG_PLAYER_DISCONECTED,a),0,5);aa.quit(b);n.deletePlayer(b.superID);b.admin&&!t.started&&mf(l.ERR_SERVERCANCEL)}},Qd=document.getElementsByClassName("ucolor"),sf=document.getElementsByClassName("username"),tf=document.getElementsByClassName("race"),Rd=document.getElementsByClassName("team"),Ba=function(b){if(r.admin&&"BUTTON"!=b.target.tagName){Ba.div&&(document.body.removeChild(Ba.div),Ba.div=void 0);var a=b.pageX;b=b.pageY;var e=this.i2;
x(e);var d=document.createElement("div");d.style.top=b+"px";d.style.left=a+"px";d.className="onlPlayer";Ba.div=d;x(this.peer,this.i2);if(this.peer.name)a=document.createElement("button"),a.onclick=function(){n.userKick(e);r.p2p.emit("maxPlayers",n.onlCount());document.body.removeChild(d);Ba.div=void 0},a.innerHTML=l.GENERAL_KICK,d.appendChild(a);else{var c=this.peer;a=document.createElement("button");a.onclick=function(){n.updown(e,-1);document.body.removeChild(d);Ba.div=void 0};a.innerHTML=l.UP;
d.appendChild(a);a=document.createElement("button");a.onclick=function(){n.updown(e,1);document.body.removeChild(d);Ba.div=void 0};a.innerHTML=l.DOWN;d.appendChild(a);r.onlineID!=c&&(a=document.createElement("button"),a.onclick=function(){x(22222,c);n.userKick(e);r.p2p.emit("maxPlayers",n.onlCount());document.body.removeChild(d);Ba.div=void 0},a.innerHTML=l.GENERAL_KICK,d.appendChild(a))}a=document.createElement("button");a.onclick=function(){document.body.removeChild(d);Ba.div=void 0};a.innerHTML=
l.GENERAL_CLOSE;d.appendChild(a);document.body.appendChild(d)}},of=function(){var b=h("multiplayertable"),a='<tr style="text-transform:uppercase"><td></td><td>'+l.MP_SEARCH_T_PL_NAME+"</td><td>"+l.RACE+"</td><td>"+l.TEAM+"</td></tr>",e=Sa,d=n.nkingdom()-1||14;x("LENGTH",d);e&&d<e.length&&(d=e.length);for(e=0;e<d;e++)a+='<tr><td class="ucolor"></td><td class="username">'+l.MP_MPLAYER_NAME_2+'</td><td class="race"></td><td class="team"></td></tr>';6>d&&(a+='<tr style="height: '+(260-46*d)+'px"></tr>');
b.innerHTML=a;h("multiplayertable").getElementsByTagName("tr");n.onlineKingdoms();h("msgs").style.height=b.clientHeight-87+"px"},Vb=ab,xg=function(){fc();document.body.removeChild(h("connectConfirm"));var b=location.hash.substr(1);Od(b.substr(0,b.length-4))},be=function(){if(Nd)Nd=!1;else if(!r.admin){var b=document.createElement("div");document.body.appendChild(b);b.id="connectConfirm";b.innerHTML="<button>"+(l.CLICKJOIN||"Join")+"</button>";b.onclick=xg;fa()}};window.onhashchange=Yd;var xb,zc,Pd=
function(b,a,e,d){Ka("chat");e&&(a=n.gstarted()?Gb:xb,5!==e?(b=Ta(pa(ma(b,d))),b=og(b),ca("li",a,"<span>"+Ta(pa(ma(e,17)))+" \u2014</span> "+b)):ca("li",a,b),a.scrollTop=a.scrollHeight,n.gstarted()&&qb())};Pd.fast=!0;var qb=function(){h("msgs1")&&(11==h("msgs1").children.length&&h("msgs1").removeChild(h("msgs1").children[0]),1==h("msgs1").children.length&&(qb.intv=setInterval(yg,16E3)))},yg=function(){h("msgs1")&&h("msgs1").children[0]&&h("msgs1").removeChild(h("msgs1").children[0]);h("msgs1")&&0==
h("msgs1").children.length&&clearInterval(qb.intv)},Ta=function(b){return String(b).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},ld=function(){if(t.started){var b=Gb;var a=h("msginputGame").value;h("msginputGame").value=""}else b=xb,a=zc.value,zc.value="";""!==a&&(a=Ta(a),b.innerHTML+="<li><span>"+r.name+" \u2014</span> "+a+"</li>",jb(n.tempstradd(),1024,a),n.liveChat(a.length),b.scrollTop=b.scrollHeight,t.started&&qb())},uf=document.getElementsByClassName("ucolor1"),zg=document.getElementsByClassName("username1"),
Ag=document.getElementsByClassName("race1"),Bg=document.getElementsByClassName("team1"),vf=function(b){var a=1;2===b.button&&(a=-1);this.innerHTML=n.chTeam(this.iteam,a)},wf=function(b){var a=1;2===b.button&&(a=-1);this.innerHTML=Y[n.changeRace(this.iteam,a)]},xf=function(){this.svg&&(r.color=this.value,localStorage.color=this.value);this.parentElement.style.background=this.value;n.changeColor(this.iteam,parseInt(this.value.substr(1),16))},Cg=function(){n.randomKingdoms(1)},Dg=function(){n.randomKingdoms(-1)},
yf=function(b,a,e,d,c,f,k){var g=gd(d);b=pa(ma(b,17));var m=h("multiplayertable").getElementsByTagName("tr"),l=f==r.superID,n=c+1;d=parseInt(g.substr(1),16);d=[d>>16&255,d>>8&255,d&255];Qd[c]&&(Qd[c].style.background="rgb("+d[0]+","+d[1]+","+d[2]+")",sf[c].innerHTML=b,k&&(sf[c].style.color="#fff900"),l||k&&r.admin?(Rd[c].innerHTML="",b=document.createElement("button"),b.onmousedown=vf,b.iteam=n,b.innerHTML=a,Rd[c].appendChild(b),k&&(b.style.color="#fff900"),b=document.createElement("button"),b.onmousedown=
wf,b.iteam=n,b.innerHTML=Y[e],tf[c].appendChild(b),k&&(b.style.color="#fff900"),a=document.createElement("input"),a.type="color",a.iteam=n,a.value=g,a.svg=!0,Qd[c].appendChild(a),a.onchange=xf):(Rd[c].innerHTML=a,tf[c].innerHTML=Y[e]),r.admin&&!l&&(m[c+1].onclick=Ba,m[c+1].peer=f,m[c+1].i2=c+1))},zf=function(){if(!r.name)return(void 0)(zf);""===h("RandomMap").innerHTML&&(h("RandomMap").innerHTML="<h2>"+l.MP_SETUPMAP_T_RANDOM+'</h2><div>\n            <table class="players" id="oneplayertable">\n                <tbody id="oneplayertbody" style="border-top: 1px solid #f3d300;">\n                </tbody>\n            </table>\n            <div style="text-align:center;margin-top:30px">\n            <button id="start2" class="start startButton">'+
l.MP_MPLAYER_PLAY+' \u25b6</button>\n            <button class="start optionsButton" id="start1" style="margin-left:60px;">'+l.MENU_OPTI+"</button>\n            </div>\n        </div>",h("start1").onclick=rf,h("start2").onclick=Qb);W("returnmenu");n.randomKingdoms()},Eg=function(b){b=b.target.result;var a=new Uint8Array(b,4);b=(new Uint32Array(b,0,1))[0];x(b,a);for(var e=a.length,d=n.readSavegame0(e),c=0;c<e;c++)I[d+c]=a[c];n.readSVG(4*b,e,!0);W("customMapcont");h("closeCustom").style.display="inline-table";
h("custombody").innerHTML="";n.customMapTable()},Wf=function(b,a,e){var d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onload=function(c){c=c.target.response;Fg({url:b,buffer:c});a(c)};e&&(d.onprogress=e);d.send()},qg=function(b,a,e){try{"granted"!=Notification.permission&&Notification.requestPermission(function(a){});var d=new Notification(b,{icon:"nehhon/807.png",body:a,requireInteraction:!1});e||(e=5550);setTimeout(function(){d.close()},e)}catch(c){}},Af=function(b){for(var a=
"",e=0,d=b.length;e<d;e++)a+=sg[b[e]];return a};Uf[Af([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]!==Af([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])&&(x("edge chrome firefox - compt"),se=ab);var ha=function(b){if(b){var a=n.mapWidth();b=Wc(n.configTerrain(55==b),a*a*4);if(V)var e=Math.pow(2,Math.ceil(Math.log2(a)));performance.now();f.useProgram(H);ha.texture?(f.bindTexture(f.TEXTURE_2D,ha.texture),V?(f.getExtension("OES_texture_float"),f.texImage2D(f.TEXTURE_2D,
0,f.RGBA,a,a,0,f.RGBA,f.FLOAT,b)):f.texImage2D(f.TEXTURE_2D,0,f.RGBA32F,a,a,0,f.RGBA,f.FLOAT,b)):(f.activeTexture(f.TEXTURE1),ha.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,ha.texture),V?(f.getExtension("OES_texture_float"),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,e,e,0,f.RGBA,f.FLOAT,null),f.texSubImage2D(f.TEXTURE_2D,0,0,0,a,a,f.RGBA,f.FLOAT,b)):f.texImage2D(f.TEXTURE_2D,0,f.RGBA32F,a,a,0,f.RGBA,f.FLOAT,b),sb(),f.uniform1i(f.getUniformLocation(H,"img_data"),1));f.useProgram(F);f.activeTexture(f.TEXTURE2);
performance.now();ha.update=!1}else ha.update=!0};ha.update=!1;var b="undefined"!==typeof b?b:{},Sb={},Ua;for(Ua in b)b.hasOwnProperty(Ua)&&(Sb[Ua]=b[Ua]);var Bb=function(b,a){throw a;},Zb=!1,Na=!1,Ac=!1,Bf=!1;Zb="object"===typeof window;Na="function"===typeof importScripts;Ac="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node;Bf=!Zb&&!Ac&&!Na;var ta="",Sd,Td;if(Ac){ta=Na?require("path").dirname(ta)+"/":"undefined/";var Ud=function(b,a){Sd||(Sd=
require("fs"));Td||(Td=require("path"));b=Td.normalize(b);return Sd.readFileSync(b,a?null:"utf8")};var Yb=function(b){b=Ud(b,!0);b.buffer||(b=new Uint8Array(b));b.buffer||Xa("Assertion failed: undefined");return b};1<process.argv.length&&process.argv[1].replace(/\\/g,"/");process.argv.slice(2);"undefined"!==typeof module&&(module.exports=b);process.on("uncaughtException",function(b){if(!(b instanceof Rc))throw b;});process.on("unhandledRejection",Xa);Bb=function(b){process.exit(b)};b.inspect=function(){return"[Emscripten Module object]"}}else if(Bf)"undefined"!=
typeof read&&(Ud=function(b){return read(b)}),Yb=function(b){if("function"===typeof readbuffer)return new Uint8Array(readbuffer(b));b=read(b,"binary");"object"===typeof b||Xa("Assertion failed: undefined");return b},"function"===typeof quit&&(Bb=function(b){quit(b)}),"undefined"!==typeof print&&("undefined"===typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!==typeof printErr?printErr:print);else if(Zb||Na)Na?ta=self.location.href:document.currentScript&&(ta=document.currentScript.src),
ta=0!==ta.indexOf("blob:")?ta.substr(0,ta.lastIndexOf("/")+1):"",Ud=function(b){var a=new XMLHttpRequest;a.open("GET",b,!1);a.send(null);return a.responseText},Na&&(Yb=function(b){var a=new XMLHttpRequest;a.open("GET",b,!1);a.responseType="arraybuffer";a.send(null);return new Uint8Array(a.response)});var ge=b.print||console.log.bind(console),La=b.printErr||console.warn.bind(console);for(Ua in Sb)Sb.hasOwnProperty(Ua)&&(b[Ua]=Sb[Ua]);Sb=null;b.quit&&(Bb=b.quit);var Ab;b.wasmBinary&&(Ab=b.wasmBinary);
var Ya;b.noExitRuntime&&(Ya=b.noExitRuntime);"object"!==typeof WebAssembly&&La("no native wasm support detected");var ka,Gg=new WebAssembly.Table({initial:161,maximum:161,element:"anyfunc"}),Lc=!1,ce="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var I,T,Va,G,ee,Cf=b.TOTAL_MEMORY||57671680;if(ka=b.wasmMemory?b.wasmMemory:new WebAssembly.Memory({initial:Cf/65536}))var Wb=ka.buffer;Cf=Wb.byteLength;de(Wb);Va[1045360]=9424496;
var oe=[],le=[],Qf=[],ne=[],Wa=0,Kc=null,zb=null;b.preloadedImages={};b.preloadedAudios={};var Ma="a.out.wasm";he(Ma)||(Ma=Kf(Ma));var Sg={1031:function(b,a,e,d){console.log(b,a,e,d)},1070:function(b,a,e,d){kb(a&&l[la[a]],l[la[b]],d,l[la[e]])},1097:function(b,a){ob(Math.floor(b-h("tzar").width/2),Math.floor(a-h("tzar").height/2));mc()},1118:function(b){Jd(b)},1130:function(b){b!==xe&&(xe=b,document.body.style.cursor='url("'+r.cdn+"cursor"+b+'.gif"),auto')},1147:function(b){Ue(b)},1166:function(b,
a,e){Ue(b,a,e)},1195:function(b,a){b=yd(l[la[b]],l[la[a]]);h("msgs1").innerHTML+="<li>"+b+"</li>";qb()},1218:function(b,a){setTimeout(n.removeAnim,b*wa.speed/25,a)},1237:function(b,a,e){a:{for(var d=0,c=aa.length;d<c;d++){var f=aa[d];if(f.superID===e){e=f;break a}}e=void 0}b=new Uint32Array(ka.buffer,b,a);e&&e.sendDirectly("channelMessage","nehhof",b)},1265:function(b,a,e,d,c,f,h){yf(b,a,e,d,c,f,h)},1312:function(){wb()},1333:function(b,a,e,d,c,f){yf(b,a,e,d,c,f)},1376:function(){of()},1396:function(b,
a,e){Pd(b,0,a,e)},1419:function(b){x(b);r.superID==b?(kb(l.ERR_SERVERKICK),qf()):(b=nf(b))&&b.end()},1438:function(){W("returnmenu");h("oneplayertbody").innerHTML='<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">-</button></td><td>'+l.RACE.toUpperCase()+"</td><td>"+l.TEAM.toUpperCase()+"</td></tr>";for(var b=0,a=n.nkingdom()-1;b<a;b++)h("oneplayertbody").innerHTML+='<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>';
h("addPlayer").onclick=Cg;h("removePlayer").onclick=Dg},1460:function(b,a,e,d,c){for(d=d.toString(16);6>d.length;)d="0"+d;d="#"+d;uf[c].style.background=d;zg[c].innerHTML=pa(ma(b,20));b=Bg[c].getElementsByTagName("button")[0];b.iteam=c+1;b.onmousedown=vf;b.innerHTML=a;a=Ag[c].getElementsByTagName("button")[0];a.iteam=c+1;a.onmousedown=wf;a.innerHTML=Y[e];e=document.createElement("input");e.type="color";e.iteam=c+1;e.value=d;e.svg=0==c;uf[c].appendChild(e);e.onchange=xf},1502:function(b){Ka(b)},1513:function(b,
a,e){Ka(b,a,e)},1534:function(){rd()},1548:function(){h("magicworkshopmenu").style.display="block";nb()},1567:function(){Re()},1587:function(){rc()},1604:function(b,a,e,d,c,f){var g=h("rndtable"),k=document.createElement("tr");g.appendChild(k);g=document.createElement("td");var m=document.createElement("select"),q=m;m.innerHTML='<option value="0">'+Y[0]+'</option><option value="1">'+Y[1]+'</option><option value="2">'+Y[2]+'</option><option value="3">'+Y[3]+"</option>";m.value=b;g.appendChild(m);k.appendChild(g);
g=document.createElement("td");m=document.createElement("select");m.innerHTML=Bc[b];m.value=a;m.rndid=f;m.onchange=Hg;q.types=m;q.onchange=Ig;g.appendChild(m);k.appendChild(g);g=document.createElement("td");m=document.createElement("input");m.value=e;m.onchange=Jg;m.type="number";m.rndid=f;g.appendChild(m);k.appendChild(g);g=document.createElement("td");b=document.createElement("label");b.className="container";a=document.createElement("input");a.type="checkbox";a.rndid=f;a.checked=d;a.onchange=Kg;
d=document.createElement("span");d.className="checkmark";b.appendChild(a);b.appendChild(d);g.appendChild(b);k.appendChild(g);d="<option value='"+(Math.pow(2,31)-1)+"'>"+l.CAPTURABLE+"</option>";g=0;for(b=n.nkingdom();g<b;g++)a=g?pa(ma(n.empName(g),17)):l.MISC_NATURE3,d+='<option value="'+g+'">'+a+"</option>";g=document.createElement("td");m=document.createElement("select");m.innerHTML=d;m.rndid=f;m.value=c;m.onchange=Lg;g.appendChild(m);k.appendChild(g);g=document.createElement("td");c=document.createElement("button");
c.className="closeIcon";c.onclick=Mg;c.rndid=f;g.appendChild(c);k.appendChild(g)},1642:function(b,a,e,d,c,f,h,k,l,n,q,r,t){lc(b,a,e,d,c,0,f,h,k,l,n,q,r,t)},1716:function(b,a,e,d,c,f,h,k,l,n,q,r,t){lc(b,a,e,d,c,1,f,h,k,l,n,q,r,t)},1790:function(b,a,e,d,c,f,k,n,p,q,r){k=d;n=[l.MP_SETUPMAP_M_TYPE_5,l.MP_SETUPMAP_M_TYPE_4,l.MP_SETUPMAP_M_TYPE_3,l.MP_SETUPMAP_M_TYPE_2,l.MP_SETUPMAP_M_TYPE_1,l.MP_SETUPMAP_M_TYPE_0];if(h("showGameInfo")){d="<table><tbody>";b==Math.pow(2,31)-1&&(b="***");a==Math.pow(2,31)-
1&&(a="***");e==Math.pow(2,31)-1&&(e="***");k==Math.pow(2,31)-1&&(k="***");c=[l.VIEWMSG_GOLD,b,l.MP_SETUPMAP_T_MAP_SIZE,p,l.VIEWMSG_WOOD,a,l.MP_SETUPMAP_T_TERRAIN,f,l.VIEWMSG_FOOD,e,l.INITIAL_PEASANTS,q,l.VIEWMSG_STONE,k,l.MP_SETUPMAP_T_MAP_TYPE,n[c],l.FREE_POP,r];f=c.length;for(p=0;p<f;p+=2)p%4||(p&&(d+="</tr>"),d+="<tr>"),d+="<td>"+c[p]+":</td><td>"+c[p+1]+"</td>";d+="</tbody></table>";h("showGameInfo").innerHTML=d}},1852:function(){Oa("waitList");h("waitList").style.cssText="\n    position: fixed;\n    z-index: 90;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background: url(nehhon/text.png);\n    border: solid;\n    border-image: url(nehhon/border.gif) 23 repeat;\n    border-width: 23px;\n    padding: 45px;\n    "},
1870:function(){Md()},1891:function(){if(h("waitList")){var b=Rb.viewU32(),a=n.nkingdom();h("waitList").innerHTML="";for(var e="<h1>"+l.VIEWMSG_WAIT_PLAYERS+'</h1>\n    <table style="margin-top:37px;font-size:21px"><tbody>',d=1;d<a;d++)if(b[3*d]){var c=n.empName(d);c=pa(ma(c,17));e+="<tr><td>"+c+" - "+b[3*d+1]+"%</td></tr>"}h("waitList").innerHTML+=e+"</tbody></table>"}},1905:function(){Qb()},1919:function(){h("playersinfo").innerHTML=""},1953:function(b,a,e,d,c,f){b=pa(ma(b,17));h("playersinfo").innerHTML+=
'<span style="'+(f&&"text-decoration: line-through;color:#ff0000"||"")+'">'+b+'</span><span style="display:none">'+a+"</span><div class='playercolor' style='background:rgb("+e+","+d+","+c+")'></div><span class='ping'></span><br>"},1997:function(){kd()},2020:function(){Hb();rc()},2058:function(){kd();Hb();rc()},2192:function(b,a,e,d,c){b=xa[b];b.style.backgroundPosition=48*c+"px "+48*a+"px";e&&(b.className="");0<d&&(b.innerHTML=d)},2272:function(b,a){vc=f.RGB;var e=performance.now();Pb||(Pb=[]);var d=
ec(n.crtStxt(),b),c=Math.floor(a/16777216);x(b,a);x(Math.floor(a/16777216*100)+"%");b=a/4096%4096;a=d.length/12288;var g=0;do{var h=a-g;4096<=b+h&&(h=4096-b);f.bindTexture(f.TEXTURE_2D,pg(c));var k=new Uint8Array(d.buffer,d.byteOffset+12288*g,12288*h);f.texSubImage2D(f.TEXTURE_2D,0,0,b,4096,h,vc,f.UNSIGNED_BYTE,k);g+=h;b=0;c++}while(g<a);f.activeTexture(f.TEXTURE2);f.bindTexture(f.TEXTURE_2D,ub);x("gl",performance.now()-e)},2296:function(b){x("limit",b);qc(zd,b);qc(Ad,b);qc(Bd,b);qc(Cd,b)},2319:function(){bf()},
2334:function(){var b=vb.viewF32(),a=yc.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Bd);f.bufferSubData(f.ARRAY_BUFFER,16*b[4],a)},2355:function(){cf()},2375:function(){var b=vb.viewF32(),a=yc.viewF32();f.bindBuffer(f.ARRAY_BUFFER,zd);f.bufferSubData(f.ARRAY_BUFFER,16*b[4],a)},2392:function(b,a,e,d,c,f){h("custombody").innerHTML+="<tr>\n<td style='background:rgb("+d+","+c+","+f+')\' class="ucolor1"></td>\n<td class="username1">'+pa(ma(b,20))+'</td>\n<td style="display:none" class="race1">'+e+'</td>\n<td class="team1">'+
a+"</td></tr>"},2544:function(b,a){fb(b,a)},2640:function(){Le()},2652:function(b,a){b&&(q.className="");8*(b+1)<a&&(A.className="")},2676:function(b,a,e,d,c,f,k,q,p,r,w,y,B,v,A){O("manamenu");O("manamenu1");O("progressmana");d=l[la[d]];b&&a?(h("stock").className="",h("manamenu1").style.display="block",h("manamenu1").style.backgroundPosition="0px -80px",h("manamenu1").innerHTML=b):h("stock").className="blocked";1==c&&e&&n.myk()==B&&(x(e),b=Math.floor(25*(e-t.cycle)/1E3),0<b&&(h("manamenu").style.display=
"block",h("manamenu").style.backgroundPosition="0px -200px",h("manamenu").innerHTML=b+"s"));ic.style.display="block";cd.innerHTML=d;f||0==c?(gc.innerHTML=f,W("attackmenu")):O("attackmenu");0==c||2==c&&k?(hc.innerHTML=k,W("defencemenu")):O("defencemenu");p&&(h("manamenu").style.display="block",h("manamenu").innerHTML=q,27===r?(h("manamenu1").style.backgroundPosition="0px -280px",W("manamenu1"),h("manamenu1").innerHTML=q,h("manamenu").style.backgroundPosition="0px -240px",h("manamenu").innerHTML=w):
(h("progressmana").value=~~(100*q/p),W("progressmana"),h("manamenu").style.backgroundPosition="0px -120px"));A&&(f=h("manamenu1"),x(v),74==r&&(v="fish"),f.style.display="block",f.style.backgroundPosition=ye[v].background,f.innerHTML=A);lb.innerHTML=y;lb.style.display="block";0!==y||2!=c&&1!=c||(lb.style.display="none");ic.innerHTML=pa(ma(n.empName(B),17));qa.style.display="block"},2768:function(b,a){-1===b?(qa.value=100,qa.max=100,mb.innerHTML=l.MISC_INF3):(qa.value=b,-1===a?(qa.max=100,qa.value=
1):qa.max=a,mb.innerHTML=~~b+"/"+a)},2792:function(b,a,e){qa.value=a;qa.max=e;mb.innerHTML=a+"/"+e;qa.style.display="block";h("kingdom").innerHTML=b+" "+l.SELVIEW_UNITS},2815:function(b,a,e,d,c,f,h,k,l,n){Ng(b,a,e,d,c,f,h,k,l,n)},2869:function(b,a,e,d,c,f,h,k){var g="";f&&(g+="<span>"+l[la[f]]+"</span>");h&&(g+="<span>"+l[la[h]]+"</span>");if(k){g+='<span class="red">'+l.MISC_REQ3+": ";f=n.shapoint();f=new Int32Array(ka.buffer,f,k);for(h=0;h<k;h++)g+=l[la[f[h]]],h+1<k&&(g+=", ");g+="</span>"}g+="<span>";
b&&(g+=b+"<img class='resource' src='nehhon/gold.gif' /> ");a&&(g+=a+"<img class='resource' src='nehhon/wood.gif' /> ");e&&(g+=e+"<img class='resource' src='nehhon/food.gif' /> ");d&&(g+=d+"<img class='resource' src='nehhon/stone.gif' /> ");g+="</span>";c&&(g+="<span class='shotcut'>"+String.fromCharCode(c).toUpperCase()+"</span>");dd.innerHTML=g},2968:function(){U()},3062:function(b){Vc(b)},3279:function(){ha.update=!0},3309:function(){f.getError()===f.CONTEXT_LOST_WEBGL&&(f=h("tzar").getContext("webgl2",
{antialias:!1,alpha:!1}),x("restored"));if(!Kd){var b=V?"precision highp float;\nattribute vec3 a_position;\nattribute vec4 a_texCoord;\nattribute vec4 a_physic;\nattribute vec4 a_margins;\nattribute float a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D u_image1;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\nuniform float mapSize;\n\nuniform float zMax;\nvarying highp vec2 vTextureCoord;\nvarying vec4 v_kcolor;\nvarying float width;\nvarying float rColor;\nvarying float oy;\n\n\nfloat delayr(float pos){\nhighp vec2 xy = vec2(mod(pos,128.0) ,   floor(pos/128.0) )/128.0;\nreturn (texture2D(delay, xy).r);\n}\n\n\nvoid main() {\n    const highp float TSIZE=4096.0;\n    float t;\n    highp float jump=0.0;\n\n    highp vec2 txtcord;\n    txtcord.y=floor(a_texCoord.x);\n    txtcord.x=a_texCoord.x-txtcord.y;\n    txtcord.y/=TSIZE;\n\n    vec2 sizes = vec2(a_margins[0],a_margins[1]);\n    float pack=floor(a_texCoord[3]);\n\n\n    float frames=floor((pack)/65536.0);\n    float fps=mod(pack,65536.0);\n\n    if(frames>100.0) {\n        if(frames<200.0) rColor=1.0; else rColor=2.0;\n        frames-=100.0;\n    }\n\n\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=floor(t * fps*0.001);         \n}else{\n\n    //fps=12.0;\n    //jump=floor(t * fps*0.001);  \n\n\n\n    float index=floor(fps-100.0);\n\n    float spt= mod(t,delayr(frames-1.0+index));\n    bool stop=false;\n        for(int i=0;i<55;i++){\n        if(!stop){\n        jump=float(i);\n        if(jump<frames) \n        if(delayr(jump+index)>spt)\n        stop=true;\n        }\n        }\n\n}\n\njump=mod(jump,frames);\ntxtcord.x+=jump*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n}\n\n\n    vec2 mxy=vec2(0.0);\n\n    if(miniMap==3){\n        if(a_margins[3]==0.0){\n            sizes=vec2(0.0);\n            return;\n        }else{\n        mxy=sizes/2.0;\n        sizes=vec2(a_margins[3]*32.0);\n        mxy+=-sizes;\n        sizes=sizes*2.0+1.0;\n        }\n    }\n\n    oy=txtcord.y*TSIZE;\n\n    \n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n        tsizes=vec2(64.0);\n    }\n    width=tsizes.x;\n\n    if(a_step==1.0||a_step==3.0){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2.0||a_step==3.0){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n    if(miniMap==3&&sizes==vec2(0.0)){\n        mxy=vec2(0.0);\n    }\n\n\tfloat z=a_position.z;\n\n\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\n    if(miniMap<2) mxy*=0.0;\n\t}\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n\n    mxy.y+=physicY;\n\nvec2 res=u_resolution;\nif(miniMap!=0){\n    z=0.0;\n    res=vec2(mapSize*32.0);\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\n}\n\n\n\n   gl_Position = vec4(((a_position.xy+mxy) / res * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\n\nvec4 outColor=texture2D(colorArray,vec2(a_texCoord.z/64.0,0));\n//outColor=vec4(1.0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n":
"#version 300 es\nprecision highp float;\n       \nin vec3 a_position;\nin vec4 a_texCoord;\nin vec4 a_physic;\nin vec4 a_margins;\nin uint a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\nuniform float mapSize;\n\nuniform float zMax;\nout highp vec2 vTextureCoord;\nout vec4 v_kcolor;\nout float oy;\nout float width;\nflat out int rColor;\n\nvec4 superArray(in highp int position) {\n     return vec4(0.0);\n}\n\nvoid main() {\nfloat t;\nconst highp float TSIZE=4096.0;\n\nhighp vec2 txtcord;\ntxtcord.y=floor(a_texCoord.x);\ntxtcord.x=a_texCoord.x-txtcord.y;\ntxtcord.y/=TSIZE;\n\nvec2 sizes = vec2(a_margins[0],a_margins[1]);\nint pack=int(floor(a_texCoord[3]));\n\nint frames=(pack>>16)&0xffff;\nfloat fps=float(pack&0xffff);\n\n\nif(frames>100) {\nif(frames<200) rColor=1; else rColor=2;\nframes-=100;\n}\n\nint jump=0;\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=int(floor(t * fps*0.001));         \n}else{\n\n\nint index=int(floor(fps-100.0));\n\nfloat spt= mod(t,texelFetch(delay, ivec2(frames-1+index, 0), 0).r);\n\nfor(jump=0;jump<frames;jump++)\nif(texelFetch(delay, ivec2(jump+index, 0), 0).r>spt){ \nbreak;\n}\n\n\n\n\n}\n\njump=(jump%frames);\n\n\ntxtcord.x+=float(jump)*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n\n\n\n}\n\nvec2 mxy=vec2(0.0);\n\n    if(miniMap==3){\n        if(a_margins[3]==0.0){\n            sizes=vec2(0.0);\n            return;\n        }else{\n        mxy=sizes/2.0;\n        sizes=vec2(a_margins[3]*32.0);\n        mxy+=-sizes;\n        sizes=sizes*2.0+1.0;\n        }\n    }\n\n    oy=txtcord.y*TSIZE;\n\n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n         tsizes=vec2(64.0);\n    }\n    width=tsizes.x;\n\n    if(a_step==1u||a_step==3u){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2u||a_step==3u){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n\n\tfloat z=a_position.z;\n\n\n    \n\nif(miniMap==3&&sizes==vec2(0.0)){\n    mxy=vec2(0.0);\n}\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\nif(miniMap!=2) mxy*=0.0;\n\t}\n\n\n\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n    mxy.y+=physicY;\n\n    vec2 res=u_resolution;\n\nif(miniMap!=0){\n    z=0.0;\n    res=vec2(mapSize*32.0);\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\n}\n\n\n   gl_Position = vec4(((a_position.xy+mxy) / res * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\nvec4 outColor=texelFetch(colorArray, ivec2(a_texCoord.z, 0), 0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n";
var a=f.createShader(f.VERTEX_SHADER);f.shaderSource(a,b);f.compileShader(a);var e=V?"precision highp float;\n        uniform float zoom;\n        uniform vec2 u_translation;\n        uniform float mapSize;\n        uniform sampler2D fogMap;\n\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform mediump int miniMap;\nvarying vec4 v_kcolor;\nvarying highp vec2 vTextureCoord;\nvarying float width;\nvarying float oy;\nvarying float rColor;\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture2D(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture2D(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture2D(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture2D(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture2D(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture2D(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture2D(img_common[6], coords);\n}\n\n\nvoid main() {\n    const highp float TSIZE=4096.0;\n\n    vec4 light = u_ambient;\n\n\n    if(miniMap!=3){\n\n        vec2 xy;\n        if(miniMap==1){\n        xy=vec2(gl_FragCoord.x-4.0,-(u_resolution.y-gl_FragCoord.y-31.0))/(128.0);\n        \n        }else{\n        xy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\n        xy.y*=-1.0;\n        xy/=(mapSize*32.0);\n        }\n        \n        \n        vec4 fog=texture2D(fogMap,xy);\n        if(fog.r==0.0){ \n        if(fog.g==0.0) light*=vec4(0.0,0.0,0.0,1.0);\n        else light*=vec4(0.5,0.5,0.5,1.0);\n            }\n        }\n        \n\nif(miniMap==0){\n\n\n    float dy=floor(vTextureCoord.y*4096.0-oy);\n    highp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/4096.0,oy/4096.0);\n    txtCoords.y+=floor(txtCoords.x)/4096.0;\n    \n    vec4 color=tcmm(txtCoords);\n    if(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\n    if(rColor==2.0) color.a=(color.r+color.g+color.b)/2.5;\n    if(color.a<0.1) discard;\n\nif(rColor==1.0 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)&&v4no(color,95)&&v4no(color,96)&&v4no(color,98)\n&&v4no(color,101)&&v4no(color,103)&&v4no(color,107)&&v4no(color,108)\n&&v4no(color,109)&&v4no(color,118)&&v4no(color,121)&&v4no(color,124)\n&&v4no(color,134)&&v4no(color,135)&&v4no(color,139)&&v4no(color,148)\n&&v4no(color,150)&&v4no(color,151)&&v4no(color,156)&&v4no(color,163)\n&&v4no(color,164)&&v4no(color,165)&&v4no(color,166)&&v4no(color,167)\n&&v4no(color,173)&&v4no(color,177)&&v4no(color,180)&&v4no(color,183)\n&&v4no(color,185)&&v4no(color,186)&&v4no(color,195)&&v4no(color,196)\n&&v4no(color,198)&&v4no(color,200)&&v4no(color,203)&&v4no(color,210)\n&&v4no(color,214)&&v4no(color,215)&&v4no(color,223)&&v4no(color,225)\n&&v4no(color,230)&&v4no(color,231)&&v4no(color,241)&&v4no(color,251)\n&&v4no(color,252)&&v4no(color,253)&&v4no(color,254)){\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0) color*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n\n\n\n\n\n//vec4 light=vec4(1.0);\n\ngl_FragColor=color*light;\n}else if(miniMap<3){\n\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\ngl_FragColor=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\ngl_FragColor=v_kcolor;\n\n\ngl_FragColor*=light;\n}else{\ngl_FragColor=vec4(1.0);  \n    }\n\n}":
"#version 300 es\nprecision highp float;\n\n\nuniform vec2 u_translation;\nuniform sampler2D fogMap;\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nuniform float mx;\nuniform float mapSize;\nuniform float zoom;\n\nin vec4 v_kcolor;\nin highp vec2 vTextureCoord;\nin float width;\nin float oy;\nflat in int rColor;\nout vec4 COLOR;\n\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture(img_common[6], coords);\n}\n\n\n\nvoid main() {\nconst highp float TSIZE=4096.0;\n\n\n\n\nvec4 light = u_ambient;\n\nif(miniMap!=3){\n\nvec2 xy;\nif(miniMap==1){\nxy=vec2(gl_FragCoord.x-4.0,-(u_resolution.y-gl_FragCoord.y-31.0))/(128.0);\n\n}else{\nxy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\nxy.y*=-1.0;\nxy/=(mapSize*32.0);\n}\n\n\nvec4 fog=texture(fogMap,xy);\nif(fog.r==0.0){ \nif(fog.g==0.0) light*=vec4(0.0,0.0,0.0,1.0);\nelse light*=vec4(0.5,0.5,0.5,1.0);\n    }\n}\n\n\n\nif(miniMap==0){\n\n\n\n\n\nfloat dy=floor(vTextureCoord.y*4096.0-oy);\nhighp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/4096.0,oy/4096.0);\ntxtCoords.y+=floor(txtCoords.x)/4096.0;\n\nvec4 color=tcmm(txtCoords);\nif(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\nif(rColor==2) color.a=(color.r+color.g+color.b)/2.5;\nif(color.a<0.1) discard;\n\n\nif(rColor==1 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)&&v4no(color,95)&&v4no(color,96)&&v4no(color,98)\n&&v4no(color,101)&&v4no(color,103)&&v4no(color,107)&&v4no(color,108)\n&&v4no(color,109)&&v4no(color,118)&&v4no(color,121)&&v4no(color,124)\n&&v4no(color,134)&&v4no(color,135)&&v4no(color,139)&&v4no(color,148)\n&&v4no(color,150)&&v4no(color,151)&&v4no(color,156)&&v4no(color,163)\n&&v4no(color,164)&&v4no(color,165)&&v4no(color,166)&&v4no(color,167)\n&&v4no(color,173)&&v4no(color,177)&&v4no(color,180)&&v4no(color,183)\n&&v4no(color,185)&&v4no(color,186)&&v4no(color,195)&&v4no(color,196)\n&&v4no(color,198)&&v4no(color,200)&&v4no(color,203)&&v4no(color,210)\n&&v4no(color,214)&&v4no(color,215)&&v4no(color,223)&&v4no(color,225)\n&&v4no(color,230)&&v4no(color,231)&&v4no(color,241)&&v4no(color,251)\n&&v4no(color,252)&&v4no(color,253)&&v4no(color,254))\n{\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0)\n{\ncolor*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n}\n\n\n\n\n\n\n\n\n\nCOLOR=color*light;\n}else if(miniMap<3){\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\nCOLOR=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\nCOLOR=v_kcolor;\n\n\nCOLOR*=light;\n}else{\n\nCOLOR=vec4(1.0);\n    \n}\n\n}";
b=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(b,e);f.compileShader(b);F=f.createProgram();f.attachShader(F,a);f.attachShader(F,b);f.linkProgram(F);f.useProgram(F);(a=f.getShaderInfoLog(a))&&console.log("Shader compiler log1: "+a);(a=f.getShaderInfoLog(b))&&console.log("Shader compiler log1: "+a);b=V?"precision highp float;\nattribute vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}":
"#version 300 es\nprecision highp float;\nin vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}";a=f.createShader(f.VERTEX_SHADER);f.shaderSource(a,b);f.compileShader(a);e=V?"precision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform vec2 u_translation;\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n#define TSIZE 4096.0;\n\nuniform sampler2D u_image1;\n\nhighp vec2 oneD2D(highp float xy,float sum){\n    float fl=floor(xy);\n    float x=xy-fl+sum/TSIZE;\n    float y=(fl+floor(x))/TSIZE;\n    return vec2(x, y);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture2D(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture2D(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture2D(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture2D(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture2D(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture2D(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture2D(img_common[6], coords);\n    }\nvoid main() {\nvec4 color;\n\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0) discard;\n\nvec4 coords=texture2D(img_data,xy/(mapSize*32.0));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,1.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nfloat wids=floor(coords[3]);\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=floor(wids/65536.0)*32.0;\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x+xym32.y*w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=mod(floor(wids/256.0),256.0);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=mod(wids,256.0);\n}\n\n\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,1.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n    w=512.0;\n    xym32.x+=w*w*u_fps;\n}\ncolor=tcmm(oneD2D(tid,xym32.x+xym32.y*w));  \n\n}\n\nif(miniMap==0) color*=u_ambient;\n\nvec4 fog=texture2D(fogMap,vec2(xy.x,-xy.y)/(mapSize*32.0));\nif(fog.r==0.0) {\n    if(fog.g==1.0) color*=vec4(0.5,0.5,0.5,1.0);\n    else\n    color=vec4(0.0,0.0,0.0,1.0);\n}\n\ngl_FragColor=color;\n}":
"#version 300 es\nprecision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform vec2 u_translation;\n\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nout vec4 COLOR;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n\n#define TSIZE 4096.0\n\nvec2 oneD2D(highp float xy,float sum){\n    float fl=floor(xy);\n    float x=xy-fl+sum/TSIZE;\n    float y=(fl+floor(x))/TSIZE;\n    return vec2(x, y);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture(img_common[6], coords);\n    }\n\nvoid main() {\nvec4 color;\n\n\nvec2 xy = vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\n\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0) discard;\n\nvec4 coords=texture(img_data,xy/(mapSize*32.0));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,1.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nint wids=int(floor(coords[3]));\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=float((wids>>16)&0xff)*32.0;\n\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x+xym32.y*w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=float((wids>>8)&0xff);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=float(wids&0xff);\n}\n\n\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,1.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n     w=512.0;\n     xym32.x+=w*w*u_fps;\n}\n\ncolor=tcmm(oneD2D(tid,xym32.x+xym32.y*w));  \n\n}\n\nif(miniMap==0) color*=u_ambient;\n\nvec4 fog=texture(fogMap,vec2(xy.x,-xy.y)/(mapSize*32.0));\nif(fog.r==0.0) {\n    if(fog.g==1.0) color*=vec4(0.5,0.5,0.5,1.0);\n    else\n    color=vec4(0.0,0.0,0.0,1.0);\n}\n\n//\nCOLOR=color;\n}";
b=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(b,e);f.compileShader(b);H=f.createProgram();f.attachShader(H,a);f.attachShader(H,b);f.linkProgram(H);(a=f.getShaderInfoLog(a))&&console.log("Shader1 compiler log T: "+a);(a=f.getShaderInfoLog(b))&&console.log("Shader compiler log T: "+a)}a=f.getAttribLocation(F,"a_position");b=f.getAttribLocation(F,"a_texCoord");var d=f.getAttribLocation(F,"a_step");e=f.getAttribLocation(F,"a_physic");var c=f.getAttribLocation(F,"a_margins");f.useProgram(H);uc=f.getUniformLocation(H,
"minimapMargin");Lb=f.getUniformLocation(H,"u_translation");Fd=f.getUniformLocation(H,"u_resolution");Ed=f.getUniformLocation(H,"u_fps");Ne=f.getUniformLocation(H,"u_ambient");pc=f.getUniformLocation(H,"zoom");f.getUniformLocation(H,"mx");f.getUniformLocation(H,"borderCoords");f.getUniformLocation(H,"waterBorder");oc=f.getUniformLocation(H,"miniMap");J=parseInt(localStorage.scale)/100;f.uniform1i(oc,0);f.uniform2fv(Lb,[0,0]);f.uniform1f(Ed,-1);f.uniform1f(pc,J);f.uniform1f(f.getUniformLocation(H,
"mx"),0);V?f.uniform1f(f.getUniformLocation(H,"mapSize"),Math.pow(2,Math.ceil(Math.log2(n.mapWidth())))):f.uniform1f(f.getUniformLocation(H,"mapSize"),n.mapWidth());tc=S?[0*J,-60*J]:[-4*J,-31*J];f.uniform2fv(uc,tc);var g=f.getAttribLocation(H,"a_position");Gd=ff();tb(Gd);var k=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,k);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),f.STATIC_DRAW);f.enableVertexAttribArray(g);f.vertexAttribPointer(g,2,f.FLOAT,!1,0,0);tb(null);f.useProgram(F);
f.bindBuffer(f.ARRAY_BUFFER,null);Hd=ff();tb(Hd);Ye=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,Ye);f.enableVertexAttribArray(d);V?(Mb=f.getExtension("ANGLE_instanced_arrays"),f.vertexAttribPointer(d,1,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),f.STATIC_DRAW),Mb.vertexAttribDivisorANGLE(d,0)):(f.vertexAttribIPointer(d,1,f.UNSIGNED_BYTE,0,0),f.bufferData(f.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),f.STATIC_DRAW),f.vertexAttribDivisor(d,0));d=n.mapWidth();Ve=Math.floor(d*
d/2);zd=Nb(b,4);Ad=Nb(a,3);Bd=Nb(e,4);Cd=Nb(c,4);tb(null);Xe=f.getUniformLocation(F,"u_resolution");Oe=f.getUniformLocation(F,"u_ambient");Kb=f.getUniformLocation(F,"u_translation");nc=f.getUniformLocation(F,"zoom");We=f.getUniformLocation(F,"now");rb=f.getUniformLocation(F,"miniMap");f.uniform1f(f.getUniformLocation(F,"zMax"),t.zMax);f.uniform1i(rb,0);f.useProgram(F);a=Wc(n.sharedDelayID(),1323);t.daylength||(t.daylength=2880);t.initialhour||(t.initialhour=12);b=0;for(e=va.length;b<e;b++).55>va[b]&&
(va[b]=.55);we();f.uniform1f(f.getUniformLocation(F,"mapSize"),n.mapWidth());f.uniform1f(f.getUniformLocation(F,"mx"),-r.mx*J);f.uniform1f(nc,J);f.uniform2fv(Kb,[0,0]);wc.changed=0;window.addEventListener("resize",wc,!1);wc();f.blendEquation(f.FUNC_ADD);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);f.disable(f.DITHER);f.disable(f.BLEND);performance.now();if(!Kd){rc();f.activeTexture(f.TEXTURE0);e=f.createTexture();f.bindTexture(f.TEXTURE_2D,e);if(V){f.getExtension("OES_texture_float");c=new Float32Array(65536);
for(b=0;b<c.length;b++)c[4*b]=a[b];f.texImage2D(f.TEXTURE_2D,0,f.RGBA,128,128,0,f.RGBA,f.FLOAT,c)}else f.texImage2D(f.TEXTURE_2D,0,f.R16F,a.length,1,0,f.RED,f.FLOAT,a);sb();f.bindTexture(f.TEXTURE_2D,null);f.bindTexture(f.TEXTURE_2D,e);f.uniform1i(f.getUniformLocation(F,"delay"),0);f.activeTexture(f.TEXTURE2)}a=n.mapWidth();f.activeTexture(f.TEXTURE2);Dd=f.createTexture();f.bindTexture(f.TEXTURE_2D,Dd);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));
sb();Ob=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,Ob);ub=f.createTexture();f.bindTexture(f.TEXTURE_2D,ub);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,a,a,0,f.RGBA,f.UNSIGNED_BYTE,null);sb();Ob.width=a;Ob.height=a;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,ub,0);n.vsblt()?f.clearColor(0,0,0,1):f.clearColor(1,1,1,1);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);f.clearColor(0,0,0,1);f.bindFramebuffer(f.FRAMEBUFFER,null);f.useProgram(H);f.uniform1i(f.getUniformLocation(H,
"fogMap"),2);f.useProgram(F);f.uniform1i(f.getUniformLocation(F,"fogMap"),2);f.activeTexture(f.TEXTURE2);n.setupGL(J);f.enable(f.DEPTH_TEST);f.depthFunc(f.LEQUAL);Z.fp1000=1E3;Z.delta=0;Z.now=0;Z.frameCount=0;f.bindTexture(f.TEXTURE_2D,ub);Kd=ja.setup=!0},3321:function(b,a,e,d,c,f,k,l,n){e=pa(ma(e,17));a=gd(a);var g=h("edpltbl").getElementsByTagName("input"),m=8*b;g[m].onchange=Og;g[m+1].onchange=Pg;g[m+2].oninput=Cc;g[m+3].oninput=Cc;g[m+4].oninput=Cc;g[m+5].oninput=Cc;g[m].value=a;g[m+1].value=
e;g[m+2].value=2147483647==c?"\u221e":c;g[m+3].value=2147483647==f?"\u221e":f;g[m+4].value=2147483647==k?"\u221e":k;g[m+5].value=2147483647==l?"\u221e":l;g[m+6].value=d;g[m+7].value=n;g[m+2].res=0;g[m+3].res=1;g[m+4].res=2;g[m+5].res=3;g[m+6].onchange=Qg;g[m+6].checked=d;g[m+7].onchange=Rg;g[m].team=b+1;g[m+1].team=b+1;g[m+2].team=b+1;g[m+3].team=b+1;g[m+4].team=b+1;g[m+5].team=b+1;g[m+6].team=b+1;g[m+7].team=b+1},3384:function(b){if(h("progressvalue")){var a=h("progressvalue").innerHTML.split("/");
a.length&&(h("progressone").value-=b,h("progressvalue").innerHTML=a[0]-b+"/"+a[1])}},3401:function(b,a){S||(h("pop").innerHTML=b+"/"+a)},3420:function(b,a,e,d){S||(b==Math.pow(2,31)-1&&(b="***"),a==Math.pow(2,31)-1&&(a="***"),e==Math.pow(2,31)-1&&(e="***"),d==Math.pow(2,31)-1&&(d="***"),Ae.innerHTML=b,Be.innerHTML=a,Ce.innerHTML=e,De.innerHTML=d)}};le.push({func:function(){Df()}});var N={xhrs:[],setu64:function(b,a){G[b>>2]=a;G[b+4>>2]=a/4294967296|0},openDatabase:function(b,a,e,d){try{var c=indexedDB.open(b,
a)}catch(g){return d(g)}c.onupgradeneeded=function(a){a=a.target.result;a.objectStoreNames.contains("FILES")&&a.deleteObjectStore("FILES");a.createObjectStore("FILES")};c.onsuccess=function(a){e(a.target.result)};c.onerror=function(a){d(a)}},staticInit:function(){N.openDatabase("emscripten_filesystem",1,function(b){N.dbInstance=b;Jc("library_fetch_init")},function(){N.dbInstance=!1;Jc("library_fetch_init")});"undefined"!==typeof ENVIRONMENT_IS_FETCH_WORKER&&ENVIRONMENT_IS_FETCH_WORKER||fe("library_fetch_init")}},
Ia={buffers:[null,[],[]],printChar:function(b,a){var e=Ia.buffers[b];0===a||10===a?((1===b?ge:La)(Zd(e,0)),e.length=0):e.push(a)},varargs:0,get:function(b){Ia.varargs+=4;return Va[Ia.varargs-4>>2]},getStr:function(){return oa(Ia.get())},get64:function(){var b=Ia.get();Ia.get();return b},getZero:function(){Ia.get()}};je=Ac?function(){var b=process.hrtime();return 1E3*b[0]+b[1]/1E6}:"undefined"!==typeof dateNow?dateNow:function(){return performance.now()};N.staticInit();var Ef={_emscripten_fetch_free:function(b){delete N.xhrs[b-
1]},emscripten_asm_const_iii:function(b,a,e){a=bc(a,e);return Sg[b].apply(null,a)},emscripten_get_now:je,emscripten_get_sbrk_ptr:function(){return 4181440},emscripten_is_main_browser_thread:function(){return!Na},emscripten_memcpy_big:function(b,a,e){I.set(I.subarray(a,a+e),b)},emscripten_resize_heap:function(b){var a=I.length;if(2147418112<b)return!1;for(var e=1;4>=e;e*=2){var d=a*(1+.2/e);d=Math.min(d,b+100663296);d=Math.min(2147418112,Mf(Math.max(16777216,b,d),65536));a:{try{ka.grow(d-Wb.byteLength+
65535>>16);de(ka.buffer);var c=1;break a}catch(g){}c=void 0}if(c)return!0}return!1},emscripten_start_fetch:function(b,a,e,d,c){"undefined"!==typeof Ya&&(Ya=!0);var f=b+112,h=oa(f),k=G[f+36>>2],l=G[f+40>>2],m=G[f+44>>2],n=G[f+48>>2],q=G[f+52>>2],r=!!(q&4),t=!!(q&32);q=!!(q&16);var x=function(b,c,d){k?ib(k,b):a&&a(b)},B=function(a,b,c){m?ib(m,a):d&&d(a)},A=function(a,b,c){l?ib(l,a):e&&e(a)},D=function(a,b,d){n?ib(n,a):c&&c(a)},F=function(a,b,c){Mc(a,x,A,B,D)},C=function(b,c,d){ke(N.dbInstance,b,c.response,
function(b,c,d){k?ib(k,b):a&&a(b)},function(b,c,d){k?ib(k,b):a&&a(b)})},H=function(a,b,c){Mc(a,C,A,B,D)};if("EM_IDB_STORE"===h)h=G[f+84>>2],ke(N.dbInstance,b,I.slice(h,h+G[f+88>>2]),x,A);else if("EM_IDB_DELETE"===h)Pf(N.dbInstance,b,x,A);else if(q){if(t)return 0;Mc(b,r?C:x,A,B,D)}else Of(N.dbInstance,b,x,t?A:r?H:F);return b},fd_write:function(b,a,e,d){try{for(var c=0,f=0;f<e;f++){for(var h=Va[a+8*f>>2],k=Va[a+(8*f+4)>>2],l=0;l<k;l++)Ia.printChar(b,I[h+l]);c+=k}Va[d>>2]=c;return 0}catch(z){return Xa(z),
z.errno}},memory:ka,setTempRet0:function(b){},table:Gg},Ff=function(){function f(a,d){b.asm=a.exports;Jc("wasm-instantiate")}function a(a){f(a.instance)}function e(a){return Nf().then(function(a){return WebAssembly.instantiate(a,d)}).then(a,function(a){La("failed to asynchronously prepare wasm: "+a);Xa(a)})}var d={env:Ef,wasi_snapshot_preview1:Ef};fe("wasm-instantiate");if(b.instantiateWasm)try{return b.instantiateWasm(d,f)}catch(c){return La("Module.instantiateWasm callback failed with error: "+
c),!1}(function(){if(Ab||"function"!==typeof WebAssembly.instantiateStreaming||he(Ma)||"function"!==typeof fetch)return e(a);fetch(Ma,{credentials:"same-origin"}).then(function(b){return WebAssembly.instantiateStreaming(b,d).then(a,function(b){La("wasm streaming compile failed: "+b);La("falling back to ArrayBuffer instantiation");e(a)})})})();return{}}();b.asm=Ff;var Df=b.___wasm_call_ctors=function(){return(Df=b.___wasm_call_ctors=b.asm.__wasm_call_ctors).apply(null,arguments)};b.__Z10canvasSizejj=
function(){return(b.__Z10canvasSizejj=b.asm._Z10canvasSizejj).apply(null,arguments)};b.__Z11setupRandomi=function(){return(b.__Z11setupRandomi=b.asm._Z11setupRandomi).apply(null,arguments)};b.__Z3rndi=function(){return(b.__Z3rndi=b.asm._Z3rndi).apply(null,arguments)};b.__Z9setupZoomf=function(){return(b.__Z9setupZoomf=b.asm._Z9setupZoomf).apply(null,arguments)};b.__Z16setupTranslationjj=function(){return(b.__Z16setupTranslationjj=b.asm._Z16setupTranslationjj).apply(null,arguments)};b.__Z9onLimits2ii=
function(){return(b.__Z9onLimits2ii=b.asm._Z9onLimits2ii).apply(null,arguments)};b.__Z6gcyclev=function(){return(b.__Z6gcyclev=b.asm._Z6gcyclev).apply(null,arguments)};b.__Z11Uint32Arrayj=function(){return(b.__Z11Uint32Arrayj=b.asm._Z11Uint32Arrayj).apply(null,arguments)};b.__Z11Uint16Arrayj=function(){return(b.__Z11Uint16Arrayj=b.asm._Z11Uint16Arrayj).apply(null,arguments)};b.__Z10Uint8Arrayj=function(){return(b.__Z10Uint8Arrayj=b.asm._Z10Uint8Arrayj).apply(null,arguments)};b.__Z9boolArrayt=function(){return(b.__Z9boolArrayt=
b.asm._Z9boolArrayt).apply(null,arguments)};b.__Z7empNamej=function(){return(b.__Z7empNamej=b.asm._Z7empNamej).apply(null,arguments)};b.__Z5empXYv=function(){return(b.__Z5empXYv=b.asm._Z5empXYv).apply(null,arguments)};b.__Z5knValjjj=function(){return(b.__Z5knValjjj=b.asm._Z5knValjjj).apply(null,arguments)};b.__Z7knAIValjj=function(){return(b.__Z7knAIValjj=b.asm._Z7knAIValjj).apply(null,arguments)};b.__Z6equalkj=function(){return(b.__Z6equalkj=b.asm._Z6equalkj).apply(null,arguments)};b.__Z12EDchangeTeamjj=
function(){return(b.__Z12EDchangeTeamjj=b.asm._Z12EDchangeTeamjj).apply(null,arguments)};b.__Z12EDchangeNamej=function(){return(b.__Z12EDchangeNamej=b.asm._Z12EDchangeNamej).apply(null,arguments)};b.__Z11EDchangeResjjj=function(){return(b.__Z11EDchangeResjjj=b.asm._Z11EDchangeResjjj).apply(null,arguments)};b.__Z6chTeamji=function(){return(b.__Z6chTeamji=b.asm._Z6chTeamji).apply(null,arguments)};b.__Z10changeRaceji=function(){return(b.__Z10changeRaceji=b.asm._Z10changeRaceji).apply(null,arguments)};
b.__Z11changeColorjj=function(){return(b.__Z11changeColorjj=b.asm._Z11changeColorjj).apply(null,arguments)};b.__Z13setupOnlTablej=function(){return(b.__Z13setupOnlTablej=b.asm._Z13setupOnlTablej).apply(null,arguments)};b.__Z13tempointeraddj=function(){return(b.__Z13tempointeraddj=b.asm._Z13tempointeraddj).apply(null,arguments)};b.__Z10setupOnlIDj=function(){return(b.__Z10setupOnlIDj=b.asm._Z10setupOnlIDj).apply(null,arguments)};b.__Z10pidkingdomj=function(){return(b.__Z10pidkingdomj=b.asm._Z10pidkingdomj).apply(null,
arguments)};b.__Z7onldataj=function(){return(b.__Z7onldataj=b.asm._Z7onldataj).apply(null,arguments)};b.__Z12setupVersionjbb=function(){return(b.__Z12setupVersionjbb=b.asm._Z12setupVersionjbb).apply(null,arguments)};b.__Z8mnameaddv=function(){return(b.__Z8mnameaddv=b.asm._Z8mnameaddv).apply(null,arguments)};b.__Z9shareNamej=function(){return(b.__Z9shareNamej=b.asm._Z9shareNamej).apply(null,arguments)};b.__Z6sndNfov=function(){return(b.__Z6sndNfov=b.asm._Z6sndNfov).apply(null,arguments)};b.__Z6updownji=
function(){return(b.__Z6updownji=b.asm._Z6updownji).apply(null,arguments)};b.__Z14onlineKingdomsv=function(){return(b.__Z14onlineKingdomsv=b.asm._Z14onlineKingdomsv).apply(null,arguments)};b.__Z8userKickj=function(){return(b.__Z8userKickj=b.asm._Z8userKickj).apply(null,arguments)};b.__Z6onlADDjjjjb=function(){return(b.__Z6onlADDjjjjb=b.asm._Z6onlADDjjjjb).apply(null,arguments)};b.__Z10nameSharedPjS_j=function(){return(b.__Z10nameSharedPjS_j=b.asm._Z10nameSharedPjS_j).apply(null,arguments)};b.__Z4nAIsv=
function(){return(b.__Z4nAIsv=b.asm._Z4nAIsv).apply(null,arguments)};b.__Z8onlCountv=function(){return(b.__Z8onlCountv=b.asm._Z8onlCountv).apply(null,arguments)};b.__Z9closeRoomv=function(){return(b.__Z9closeRoomv=b.asm._Z9closeRoomv).apply(null,arguments)};b.__Z12deletePlayerjb=function(){return(b.__Z12deletePlayerjb=b.asm._Z12deletePlayerjb).apply(null,arguments)};b.__Z10tempstraddv=function(){return(b.__Z10tempstraddv=b.asm._Z10tempstraddv).apply(null,arguments)};b.__Z8liveChatj=function(){return(b.__Z8liveChatj=
b.asm._Z8liveChatj).apply(null,arguments)};b.__Z8gstartedv=function(){return(b.__Z8gstartedv=b.asm._Z8gstartedv).apply(null,arguments)};b.__Z14randomKingdomsi=function(){return(b.__Z14randomKingdomsi=b.asm._Z14randomKingdomsi).apply(null,arguments)};b.__Z6nfolenv=function(){return(b.__Z6nfolenv=b.asm._Z6nfolenv).apply(null,arguments)};b.__Z9stmenummxi=function(){return(b.__Z9stmenummxi=b.asm._Z9stmenummxi).apply(null,arguments)};b.__Z10checkStockv=function(){return(b.__Z10checkStockv=b.asm._Z10checkStockv).apply(null,
arguments)};b.__Z11movtableADDjjjj=function(){return(b.__Z11movtableADDjjjj=b.asm._Z11movtableADDjjjj).apply(null,arguments)};b.__Z6amountv=function(){return(b.__Z6amountv=b.asm._Z6amountv).apply(null,arguments)};b.__Z8mwamounti=function(){return(b.__Z8mwamounti=b.asm._Z8mwamounti).apply(null,arguments)};b.__Z6mwiconv=function(){return(b.__Z6mwiconv=b.asm._Z6mwiconv).apply(null,arguments)};b.__Z8mwSelectj=function(){return(b.__Z8mwSelectj=b.asm._Z8mwSelectj).apply(null,arguments)};b.__Z6mwMorei=function(){return(b.__Z6mwMorei=
b.asm._Z6mwMorei).apply(null,arguments)};b.__Z11createItemsv=function(){return(b.__Z11createItemsv=b.asm._Z11createItemsv).apply(null,arguments)};b.__Z9ginfonamejj=function(){return(b.__Z9ginfonamejj=b.asm._Z9ginfonamejj).apply(null,arguments)};b.__Z9RNDobjexpv=function(){return(b.__Z9RNDobjexpv=b.asm._Z9RNDobjexpv).apply(null,arguments)};b.__Z9RNDdeletej=function(){return(b.__Z9RNDdeletej=b.asm._Z9RNDdeletej).apply(null,arguments)};b.__Z10stprndobjsj=function(){return(b.__Z10stprndobjsj=b.asm._Z10stprndobjsj).apply(null,
arguments)};b.__Z9addRNDobjv=function(){return(b.__Z9addRNDobjv=b.asm._Z9addRNDobjv).apply(null,arguments)};b.__Z13updateRNDtypejj=function(){return(b.__Z13updateRNDtypejj=b.asm._Z13updateRNDtypejj).apply(null,arguments)};b.__Z16updateRNDkingdomjj=function(){return(b.__Z16updateRNDkingdomjj=b.asm._Z16updateRNDkingdomjj).apply(null,arguments)};b.__Z15updateRNDnumberjj=function(){return(b.__Z15updateRNDnumberjj=b.asm._Z15updateRNDnumberjj).apply(null,arguments)};b.__Z16updateRNDeach256jj=function(){return(b.__Z16updateRNDeach256jj=
b.asm._Z16updateRNDeach256jj).apply(null,arguments)};b.__Z8EDbrush0ib=function(){return(b.__Z8EDbrush0ib=b.asm._Z8EDbrush0ib).apply(null,arguments)};b.__Z11EDbrushstopv=function(){return(b.__Z11EDbrushstopv=b.asm._Z11EDbrushstopv).apply(null,arguments)};b.__Z10EDbrushchsi=function(){return(b.__Z10EDbrushchsi=b.asm._Z10EDbrushchsi).apply(null,arguments)};b.__Z10EDbrushMrgi=function(){return(b.__Z10EDbrushMrgi=b.asm._Z10EDbrushMrgi).apply(null,arguments)};b.__Z10EDbrushchdi=function(){return(b.__Z10EDbrushchdi=
b.asm._Z10EDbrushchdi).apply(null,arguments)};b.__Z13EDchangeColorjj=function(){return(b.__Z13EDchangeColorjj=b.asm._Z13EDchangeColorjj).apply(null,arguments)};b.__Z11showrndobjsv=function(){return(b.__Z11showrndobjsv=b.asm._Z11showrndobjsv).apply(null,arguments)};b.__Z9getordersj=function(){return(b.__Z9getordersj=b.asm._Z9getordersj).apply(null,arguments)};b.__Z10setupGuidev=function(){return(b.__Z10setupGuidev=b.asm._Z10setupGuidev).apply(null,arguments)};b.__Z10userConfigj=function(){return(b.__Z10userConfigj=
b.asm._Z10userConfigj).apply(null,arguments)};b.__Z6prelddv=function(){return(b.__Z6prelddv=b.asm._Z6prelddv).apply(null,arguments)};b.__Z6chterrj=function(){return(b.__Z6chterrj=b.asm._Z6chterrj).apply(null,arguments)};b.__Z10getTerrainv=function(){return(b.__Z10getTerrainv=b.asm._Z10getTerrainv).apply(null,arguments)};b.__Z15setupOnlineGamePjS_j=function(){return(b.__Z15setupOnlineGamePjS_j=b.asm._Z15setupOnlineGamePjS_j).apply(null,arguments)};b.__Z15unitSearchValidjjj=function(){return(b.__Z15unitSearchValidjjj=
b.asm._Z15unitSearchValidjjj).apply(null,arguments)};b.__Z6strOnlv=function(){return(b.__Z6strOnlv=b.asm._Z6strOnlv).apply(null,arguments)};b.__Z7plreadyv=function(){return(b.__Z7plreadyv=b.asm._Z7plreadyv).apply(null,arguments)};b.__Z9setupGamejjjjjjjjjjjjjjj=function(){return(b.__Z9setupGamejjjjjjjjjjjjjjj=b.asm._Z9setupGamejjjjjjjjjjjjjjj).apply(null,arguments)};b.__Z15configRandomMapv=function(){return(b.__Z15configRandomMapv=b.asm._Z15configRandomMapv).apply(null,arguments)};b.__Z5knamej=function(){return(b.__Z5knamej=
b.asm._Z5knamej).apply(null,arguments)};b.__Z3mykv=function(){return(b.__Z3mykv=b.asm._Z3mykv).apply(null,arguments)};b.__Z4cmykj=function(){return(b.__Z4cmykj=b.asm._Z4cmykj).apply(null,arguments)};b.__Z7EDbuildj=function(){return(b.__Z7EDbuildj=b.asm._Z7EDbuildj).apply(null,arguments)};b.__Z16addEditorKingdomj=function(){return(b.__Z16addEditorKingdomj=b.asm._Z16addEditorKingdomj).apply(null,arguments)};b.__Z16delEditorKingdomj=function(){return(b.__Z16delEditorKingdomj=b.asm._Z16delEditorKingdomj).apply(null,
arguments)};b.__Z13startMovementv=function(){return(b.__Z13startMovementv=b.asm._Z13startMovementv).apply(null,arguments)};b.__Z10removeAnimjj=function(){return(b.__Z10removeAnimjj=b.asm._Z10removeAnimjj).apply(null,arguments)};b.__Z6dbgspdj=function(){return(b.__Z6dbgspdj=b.asm._Z6dbgspdj).apply(null,arguments)};b.__Z11synchroHashv=function(){return(b.__Z11synchroHashv=b.asm._Z11synchroHashv).apply(null,arguments)};b.__Z6pause0v=function(){return(b.__Z6pause0v=b.asm._Z6pause0v).apply(null,arguments)};
b.__Z7resume0v=function(){return(b.__Z7resume0v=b.asm._Z7resume0v).apply(null,arguments)};b.__Z10movtablexev=function(){return(b.__Z10movtablexev=b.asm._Z10movtablexev).apply(null,arguments)};b.__Z14setupResourcesjjjjt=function(){return(b.__Z14setupResourcesjjjjt=b.asm._Z14setupResourcesjjjjt).apply(null,arguments)};b.__Z10searchUnitth=function(){return(b.__Z10searchUnitth=b.asm._Z10searchUnitth).apply(null,arguments)};b.__Z6sndCnfb=function(){return(b.__Z6sndCnfb=b.asm._Z6sndCnfb).apply(null,arguments)};
b.__Z13sharedFloatIDv=function(){return(b.__Z13sharedFloatIDv=b.asm._Z13sharedFloatIDv).apply(null,arguments)};b.__Z13sharedDelayIDv=function(){return(b.__Z13sharedDelayIDv=b.asm._Z13sharedDelayIDv).apply(null,arguments)};b.__Z12bufferMarginfffjf=function(){return(b.__Z12bufferMarginfffjf=b.asm._Z12bufferMarginfffjf).apply(null,arguments)};b.__Z11getBufferIDv=function(){return(b.__Z11getBufferIDv=b.asm._Z11getBufferIDv).apply(null,arguments)};b.__Z8shapointv=function(){return(b.__Z8shapointv=b.asm._Z8shapointv).apply(null,
arguments)};b.__Z4testjj=function(){return(b.__Z4testjj=b.asm._Z4testjj).apply(null,arguments)};b.__Z5vsbltv=function(){return(b.__Z5vsbltv=b.asm._Z5vsbltv).apply(null,arguments)};b.__Z9setupOdinj=function(){return(b.__Z9setupOdinj=b.asm._Z9setupOdinj).apply(null,arguments)};b.__Z8nkingdomv=function(){return(b.__Z8nkingdomv=b.asm._Z8nkingdomv).apply(null,arguments)};b.__Z14customMapTablev=function(){return(b.__Z14customMapTablev=b.asm._Z14customMapTablev).apply(null,arguments)};b.__Z16EDgetTerrainInfov=
function(){return(b.__Z16EDgetTerrainInfov=b.asm._Z16EDgetTerrainInfov).apply(null,arguments)};b.__Z13resetGLbufferv=function(){return(b.__Z13resetGLbufferv=b.asm._Z13resetGLbufferv).apply(null,arguments)};b.__Z7adpterrv=function(){return(b.__Z7adpterrv=b.asm._Z7adpterrv).apply(null,arguments)};b.__Z13configTerrainb=function(){return(b.__Z13configTerrainb=b.asm._Z13configTerrainb).apply(null,arguments)};b.__Z9chmapsizei=function(){return(b.__Z9chmapsizei=b.asm._Z9chmapsizei).apply(null,arguments)};
b.__Z13randomTerrainj=function(){return(b.__Z13randomTerrainj=b.asm._Z13randomTerrainj).apply(null,arguments)};b.__Z6trraddv=function(){return(b.__Z6trraddv=b.asm._Z6trraddv).apply(null,arguments)};b.__Z5test3jj=function(){return(b.__Z5test3jj=b.asm._Z5test3jj).apply(null,arguments)};b.__Z7setupGLf=function(){return(b.__Z7setupGLf=b.asm._Z7setupGLf).apply(null,arguments)};b.__Z15getColorTexturev=function(){return(b.__Z15getColorTexturev=b.asm._Z15getColorTexturev).apply(null,arguments)};b.__Z12executeOrderjj=
function(){return(b.__Z12executeOrderjj=b.asm._Z12executeOrderjj).apply(null,arguments)};b.__Z10changePagei=function(){return(b.__Z10changePagei=b.asm._Z10changePagei).apply(null,arguments)};b.__Z7getPagev=function(){return(b.__Z7getPagev=b.asm._Z7getPagev).apply(null,arguments)};b.__Z7svpropsiiiiiii=function(){return(b.__Z7svpropsiiiiiii=b.asm._Z7svpropsiiiiiii).apply(null,arguments)};b.__Z9mouseMoveiib=function(){return(b.__Z9mouseMoveiib=b.asm._Z9mouseMoveiib).apply(null,arguments)};b.__Z9mouseDowniij=
function(){return(b.__Z9mouseDowniij=b.asm._Z9mouseDowniij).apply(null,arguments)};b.__Z10touchStartjj=function(){return(b.__Z10touchStartjj=b.asm._Z10touchStartjj).apply(null,arguments)};b.__Z9touchMovejj=function(){return(b.__Z9touchMovejj=b.asm._Z9touchMovejj).apply(null,arguments)};b.__Z8touchEndjj=function(){return(b.__Z8touchEndjj=b.asm._Z8touchEndjj).apply(null,arguments)};b.__Z10mouseEnterj=function(){return(b.__Z10mouseEnterj=b.asm._Z10mouseEnterj).apply(null,arguments)};b.__Z7mouseUpiijb=
function(){return(b.__Z7mouseUpiijb=b.asm._Z7mouseUpiijb).apply(null,arguments)};b.__Z6runKeyjb=function(){return(b.__Z6runKeyjb=b.asm._Z6runKeyjb).apply(null,arguments)};b.__Z6rndResv=function(){return(b.__Z6rndResv=b.asm._Z6rndResv).apply(null,arguments)};b.__Z9rndforestv=function(){return(b.__Z9rndforestv=b.asm._Z9rndforestv).apply(null,arguments)};b.__Z12plymapeditorv=function(){return(b.__Z12plymapeditorv=b.asm._Z12plymapeditorv).apply(null,arguments)};b.__Z5test2jjj=function(){return(b.__Z5test2jjj=
b.asm._Z5test2jjj).apply(null,arguments)};b.__Z8savegamev=function(){return(b.__Z8savegamev=b.asm._Z8savegamev).apply(null,arguments)};b.__Z7nh19addj=function(){return(b.__Z7nh19addj=b.asm._Z7nh19addj).apply(null,arguments)};b.__Z6nhcompv=function(){return(b.__Z6nhcompv=b.asm._Z6nhcompv).apply(null,arguments)};b.__Z7delTexsv=function(){return(b.__Z7delTexsv=b.asm._Z7delTexsv).apply(null,arguments)};b.__Z11sstextStartj=function(){return(b.__Z11sstextStartj=b.asm._Z11sstextStartj).apply(null,arguments)};
b.__Z6naddssj=function(){return(b.__Z6naddssj=b.asm._Z6naddssj).apply(null,arguments)};b.__Z7ss1textiiiiiiiii=function(){return(b.__Z7ss1textiiiiiiiii=b.asm._Z7ss1textiiiiiiiii).apply(null,arguments)};b.__Z7readSUPP18emscripten_fetch_t=function(){return(b.__Z7readSUPP18emscripten_fetch_t=b.asm._Z7readSUPP18emscripten_fetch_t).apply(null,arguments)};b.__Z11downloadGrab=function(){return(b.__Z11downloadGrab=b.asm._Z11downloadGrab).apply(null,arguments)};b.__Z7txtLoadv=function(){return(b.__Z7txtLoadv=
b.asm._Z7txtLoadv).apply(null,arguments)};b.__Z11setupEditorv=function(){return(b.__Z11setupEditorv=b.asm._Z11setupEditorv).apply(null,arguments)};b.__Z8wtrcheckv=function(){return(b.__Z8wtrcheckv=b.asm._Z8wtrcheckv).apply(null,arguments)};b.__Z8preSetupj=function(){return(b.__Z8preSetupj=b.asm._Z8preSetupj).apply(null,arguments)};b.__Z10fullRNDmapb=function(){return(b.__Z10fullRNDmapb=b.asm._Z10fullRNDmapb).apply(null,arguments)};b.__Z14editorKingdomsv=function(){return(b.__Z14editorKingdomsv=b.asm._Z14editorKingdomsv).apply(null,
arguments)};b.__Z4krgbj=function(){return(b.__Z4krgbj=b.asm._Z4krgbj).apply(null,arguments)};b.__Z7crtStxtv=function(){return(b.__Z7crtStxtv=b.asm._Z7crtStxtv).apply(null,arguments)};b.__Z8superLenv=function(){return(b.__Z8superLenv=b.asm._Z8superLenv).apply(null,arguments)};b.__Z5nhlenv=function(){return(b.__Z5nhlenv=b.asm._Z5nhlenv).apply(null,arguments)};b.__Z14finishSavegamev=function(){return(b.__Z14finishSavegamev=b.asm._Z14finishSavegamev).apply(null,arguments)};b.__Z8mapWidthv=function(){return(b.__Z8mapWidthv=
b.asm._Z8mapWidthv).apply(null,arguments)};b.__Z13readSavegame0j=function(){return(b.__Z13readSavegame0j=b.asm._Z13readSavegame0j).apply(null,arguments)};b.__Z7readSVGmmb=function(){return(b.__Z7readSVGmmb=b.asm._Z7readSVGmmb).apply(null,arguments)};b._main=function(){return(b._main=b.asm.main).apply(null,arguments)};var ac=b._malloc=function(){return(ac=b._malloc=b.asm.malloc).apply(null,arguments)};b._free=function(){return(b._free=b.asm.free).apply(null,arguments)};b.___errno_location=function(){return(b.___errno_location=
b.asm.__errno_location).apply(null,arguments)};b._setThrew=function(){return(b._setThrew=b.asm.setThrew).apply(null,arguments)};b.stackSave=function(){return(b.stackSave=b.asm.stackSave).apply(null,arguments)};b.stackAlloc=function(){return(b.stackAlloc=b.asm.stackAlloc).apply(null,arguments)};b.stackRestore=function(){return(b.stackRestore=b.asm.stackRestore).apply(null,arguments)};b.__growWasmMemory=function(){return(b.__growWasmMemory=b.asm.__growWasmMemory).apply(null,arguments)};b.dynCall_vii=
function(){return(b.dynCall_vii=b.asm.dynCall_vii).apply(null,arguments)};var ib=b.dynCall_vi=function(){return(ib=b.dynCall_vi=b.asm.dynCall_vi).apply(null,arguments)};b.dynCall_ii=function(){return(b.dynCall_ii=b.asm.dynCall_ii).apply(null,arguments)};b.dynCall_iiiii=function(){return(b.dynCall_iiiii=b.asm.dynCall_iiiii).apply(null,arguments)};b.dynCall_viii=function(){return(b.dynCall_viii=b.asm.dynCall_viii).apply(null,arguments)};b.dynCall_iiii=function(){return(b.dynCall_iiii=b.asm.dynCall_iiii).apply(null,
arguments)};b.dynCall_iii=function(){return(b.dynCall_iii=b.asm.dynCall_iii).apply(null,arguments)};b.dynCall_jiji=function(){return(b.dynCall_jiji=b.asm.dynCall_jiji).apply(null,arguments)};b.dynCall_iidiiii=function(){return(b.dynCall_iidiiii=b.asm.dynCall_iidiiii).apply(null,arguments)};b.asm=Ff;var cc;zb=function a(){cc||Sc();cc||(zb=a)};b.run=Sc;if(b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();var me=!0;b.noInitialRun&&(me=!1);Ya=!0;
Sc();var Hc=!1,n={};Vb=ab;var Rb,gf,yc,vb,Vd=function(){Hc=!0;for(var a=b,e=Object.keys(a),d=e.length,c="inspector71017 newUnit radar falseunit synchroHash rnd setupRandom randomTerrain unitMovement test setupInfo shapoint Uint16Array setupTech setupRequirements boolArray AIobjetive test2 searchUnit killUnit investigateTech AIprocess setupResources unitWorking movtablexe test3 unitParameter setupGL bufferColor getBufferID setupIMGinfo executeOrder shiftONOFF IMGdata Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove gManaMax setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen rdnh19 crtStxt configTerrain delTexs gName touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeAI EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf".split(" "),
g=0,k=c.length;g<k;g++)for(var l=c[g],p=0;p<d;p++){var q=e[p];if("__"==q.substr(0,2)&&-1<q.indexOf(l)){n[c[g]]=a[q];break}}Rb=new Ga(n.shapoint(),4096);vb=new Ga(n.sharedFloatID(),5);gf=new Ga(n.sharedFloatID(),3);yc=new Ga(n.sharedFloatID(),4);jb(n.userConfig(parseInt(localStorage.color.substr(1),16)),17,r.name||"Guest");n.setupVersion(r.versionInt,!1,!!window.indexedDB);a={antialias:!1,alpha:!1,depth:!0};localStorage.webgl&&"2"!=localStorage.webgl||(f=h("tzar").getContext("webgl2",a));f||(f=h("tzar").getContext("webgl",
a),V=!0);navigator.gpu&&Rf();r.gl=f;Vd.waiting&&Qb();Vb()},jb=function(a,b,d){a=ma(a,b);for(var c=0;c<b;c++)a[c]=d.charCodeAt(c)};Vd.waiting=!1;b.postRun=[Vd];if(window.indexedDB){var Dc=window.indexedDB.open("nh2019",r.versionInt),na;Dc.onsuccess=function(a){na=Dc.result;Tg("basic",function(a){})};Dc.onupgradeneeded=function(a){na=Dc.result;x(na);try{na.objectStoreNames.contains("basic")&&na.deleteObjectStore("basic"),na.objectStoreNames.contains("maps")||na.createObjectStore("maps",{keyPath:"id",
autoIncrement:!0}),na.objectStoreNames.contains("mapsBlobs")||na.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),na.objectStoreNames.contains("basic")||na.createObjectStore("basic",{keyPath:"url"})}catch(e){console.error(e)}}}var Fg=function(a){if(na)try{na.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){}}catch(e){console.error(e)}},Tg=function(a,b){if(na)try{var d=na.transaction([a],"readonly");if(d.objectStore(a).getAllKeys)var c=d.objectStore(a).getAllKeys();
else return b({target:{result:[]}});c.onsuccess=b}catch(g){}else b({target:{result:[]}})},S=!1;var Gf=function(a){S=!0;Qb(a)};var Ng=function(a,b,d,c,f,k,q,p,r,t){cb();var e=document.createElement("div");document.createElement("div");2==t&&(q=Math.pow(2,31)-1);e.id="unitProps";e.className="fullwindow";c='<button id="closeButton2" style="top:-89px;left:63px" class="closeIcon"></button><table>\n    <tr><td style="color:var(--color1);font-size:18px;padding-bottom:15px;text-shadow: 0px 0px 16px;">'+(l[la[r]]+
"</td><td></td></tr>\n    <tr><td>"+l.MISC_HEALTH3+' </td><td><input id="EEDhealth" type="number" value="'+c+'" /></td></tr>\n    <tr><td>'+l.MAXHEALTH+'</td> <td><input id="EEDmhealth" type="number" value="'+f+'" /></td></tr>\n');if(d)if(2==d){if(b||a)c+="\n<tr><td>"+l.MISC_ATTACK3+'</td><td><input id="EEDattack" type="number" value="'+b+'" /></td></tr>\n<tr><td>'+l.MISC_DEFENCE3+'</td> <td><input id="EEDdefence" type="number" value="'+a+'" /></td></tr>\n'}else q&&(c+="<tr><td>"+l.MISC_KINGDOM3+
' </td><td><select id="selectKingdom2">'+h("selectKingdom").innerHTML+"</select></td></tr>");else c+="\n<tr><td>"+l.MISC_ATTACK3+'</td><td><input id="EEDattack" type="number" value="'+b+'" /></td></tr>\n<tr><td>'+l.MISC_DEFENCE3+'</td> <td><input id="EEDdefence" type="number" value="'+a+'" /></td></tr>\n<tr><td>'+l.VIEWMSG_MANNA+' <td><input id="EEDmana" type="number" value="'+k+'" /></td></tr>\n<tr><td>'+l.MISC_KINGDOM3+' </td><td><select id="selectKingdom2">'+h("selectKingdom").innerHTML+"</select></td></tr>\n";
e.innerHTML=c+"</table>";a=document.createElement("button");a.innerHTML=l.SAVE_SAVE;a.onclick=function(){x(h("EDcapt")&&h("EDcapt").checked&&2||0);n.svprops(parseInt(h("EEDattack")&&parseInt(h("EEDattack").value)),parseInt(h("EEDdefence")&&parseInt(h("EEDdefence").value)),parseInt(h("EEDhealth").value),parseInt(h("EEDmhealth").value),parseInt(h("EEDmana")&&parseInt(h("EEDmana").value)),p,parseInt(h("selectKingdom2")&&parseInt(h("selectKingdom2").value)));document.body.removeChild(h("unitProps"));
sa()};e.appendChild(a);document.body.appendChild(e);h("closeButton2").onclick=function(){bb(h("unitProps"));sa()};h("selectKingdom2")&&(h("selectKingdom2").value=q)},O=function(a){h(a).style.display="none"},W=function(a){h(a).style.display="block"},Qe=function(a){S&&(a=parseInt(h("brushSize").value)+a,a>h("brushSize").max?h("brushSize").value=h("brushSize").max:1>a?h("brushSize").value=1:h("brushSize").value=a,h("brushSize").onchange())},ag=function(){x(this);this.parentElement.style.display="none";
sa();var a=parseInt(h("EDmapSize").value);a!=n.mapWidth()&&(f.useProgram(H),f.uniform1f(f.getUniformLocation(H,"mapSize"),a),f.useProgram(F),f.uniform1f(f.getUniformLocation(F,"mapSize"),a),f.uniform1f(f.getUniformLocation(F,"zMax"),96*a),n.chmapsize(a),ha())},gd=function(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a},Ug=function(){n.delEditorKingdom(this.team)},Vg=function(){var a=this.team,b=Oa("mapPropsXtra");b.className="fullwindow";ca("span",b,l.SP_SETUPRND_T_POPLIMIT);var d=ca("input",
b);d.type="number";d.onchange=function(){this.value=n.knVal(a,4,parseInt(this.value)+1)};d.value=n.knVal(a,4);ca("br",b);n.knAIVal(a)&&(ca("span",b,l.SP_SETUPRND_T_DIFF_LVL),d=ca("input",b),d.type="number",d.onchange=function(){x(this.value);this.value=n.knAIVal(a,parseInt(this.value)+1)},d.value=n.knAIVal(a),d.max=100,d.min=0);b=ca("div",b);b.style.cssText="text-align:center";d=ca("button",b,l.EQUALVALS,"display:block;margin:14px;");d.onclick=function(){return n.equalk(a)};d=ca("button",b,l.GENERAL_CLOSE,
"margin-top:30px");d.onclick=function(){return bb(h("mapPropsXtra"))}},kd=function(){var a=h("mapPropsWindow").getElementsByTagName("table")[0];a.id="edpltbl";a.innerHTML="";a.innerHTML+='<tr style="text-transform:uppercase;"><td>'+l.COLOUR+"</td><td>"+l.MP_SEARCH_T_PL_NAME+"</td><td>"+l.VIEWMSG_GOLD+"</td><td>"+l.VIEWMSG_WOOD+"</td><td>"+l.VIEWMSG_FOOD+"</td><td>"+l.VIEWMSG_STONE+"</td><td>"+l.MP_SETUPMAP_T_COMP+"</td><td>"+l.TEAM+"</td></tr>";for(var b=1,d=n.nkingdom();b<d;b++)a.innerHTML+='\n<tr><td><input type="color"/></td><td><input type="text"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><label class="container">\n  <input type="checkbox">\n  <span class="checkmark"></span>\n</label></td>\n<td><input type="number" min="0"></td>\n<td><button id="EDmore'+
b+'" class="morei">...</button></td>\n<td><button id="EDel'+b+'" class="closeIcon"></button></td></tr>';a.innerHTML+="<tr><td><button id='editorAdd'>+</button></td></tr>";b=1;for(d=n.nkingdom();b<d;b++)a=h("EDel"+b),a.team=b,a.onclick=Ug,a=h("EDmore"+b),a.team=b,a.onclick=Vg;h("editorAdd").onclick=function(){n.addEditorKingdom(1)};n.editorKingdoms()},Cc=function(){parseInt(this.value)?n.EDchangeRes(this.team,parseInt(this.value),this.res):(this.value="\u221e",n.EDchangeRes(this.team,Math.pow(2,31)-
1,this.res))},Og=function(){n.EDchangeColor(this.team,parseInt(this.value.substr(1),16));Hb()},Pg=function(){var a=17;this.value.length<a&&(a=this.value.length);for(var b=Rb.viewU32(),d=0;17>d;d++)b[d]=0;for(d=0;d<a;d++)b[d]=this.value.charCodeAt(d);n.EDchangeName(this.team);Hb()},Qg=function(){n.knAIVal(this.team,100*this.checked+1)},Rg=function(){n.EDchangeTeam(this.team,parseInt(this.value))},Ig=function(){this.types.innerHTML=Bc[this.value];this.types.value=""},Hg=function(){n.updateRNDtype(this.rndid,
this.value)},Lg=function(){n.updateRNDkingdom(this.rndid,this.value)},Jg=function(){n.updateRNDnumber(this.rndid,this.value)},Kg=function(){n.updateRNDeach256(this.rndid,this.checked)},Mg=function(){n.RNDdelete(this.rndid);Ec()},Wg=function(){n.addRNDobj();Ec()},Ec=function(){h("rndtable").innerHTML='<tr style="height: 57px"><td>Type</td><td>Object</td><td>Amount</td><td>Each 256\u00b2</td><td>'+l.MISC_KINGDOM3+"</td><td></td></tr>";n.showrndobjs();var a=document.createElement("tr"),b=document.createElement("td"),
d=document.createElement("button");d.innerHTML=l.ADD;d.onclick=Wg;d.style.cssText="background: rgba(255,255,255,0.1);font-size: 15px;margin-top: 22px;";b.appendChild(d);a.appendChild(b);h("rndtable").appendChild(a)},Xg=function(a,b){for(var d=0;d<a.length;d++)h(a[d]).style.cssText=b},Ja=function(){var a=parseInt(this.min),b=parseInt(this.max),d=parseInt(this.value);d>b?this.value=this.max:d<a&&(this.value=this.min)},jd=function(a){for(var b="",d=0,c=Xc.length;d<c;d++){var f=Xc[d];var h=a?d==n.getTerrain()?
"selected":"":d==localStorage.terrain?"selected":"";b+='<option value="'+d+'" '+h+">"+f.name+"</option>"}return b},Bc,$f=function(){confirm('You will play as "'+pa(ma(n.empName(n.myk()),17))+'", do you want continue? (CAUTION: IF YOU WANT SAVE CURRENT CUSTOM MAP, DO IT BEFORE ACCEPTING)')&&(S=!1,Ke(),rd(),kf(),f.useProgram(H),f.uniform1f(f.getUniformLocation(H,"mx"),0),tc=[-4*J,-31*J],f.useProgram(F),f.uniform1f(f.getUniformLocation(F,"mx"),-r.mx),n.plymapeditor())},hf=function(){var a=0;if(localStorage.rndObjs){var b=
localStorage.rndObjs.split(",");a=b.length;for(var d=Rb.viewU32(),c=0;c<a;d[c]=b[c++]);}n.stprndobjs(a)},rf=function(){h("mapconfiguration")||Oa("mapconfiguration");W("mapconfiguration");h("mapconfiguration").className="fullwindow";cb();if(""==h("mapconfiguration").innerHTML){hf();Bc=["","","",""];for(var a=0;4>a;a++){for(var b="",d=0,c=n.nfolen();d<c;d++){var f=n.ginfoname(d,a);f&&(b+='<option value="'+d+'">'+l[la[f]].toUpperCase()+"</option>")}Bc[a]=b}a="";1==localStorage.infinity&&(a="checked");
h("mapconfiguration").innerHTML='<button id="closeButton1" class="closeIcon"></button>\n\n<table>\n<tbody>\n<tr><td>'+l.MP_SETUPMAP_T_MAP_SIZE+'</td><td><input id="mapxValue" type="number" value="'+localStorage.mapx+'" step="32" min="96" max="2048" /></td></tr>\n<tr><td>'+l.MP_SETUPMAP_T_TERRAIN+'</td><td><select name="terrain" id="terrainValue">'+jd()+'</select></td><td><img id="terrainPreview"/></td></tr>\n<tr><td>'+l.MP_SETUPMAP_T_MAP_TYPE+'</td><td>\n<select name="terrain" id="terrainRNDValue">\n<option value="0">'+
l.MP_SETUPMAP_M_TYPE_5+'</option>\n<option value="1">'+l.MP_SETUPMAP_M_TYPE_4+'</option>\n<option value="2">'+l.MP_SETUPMAP_M_TYPE_3+'</option>\n<option value="3">'+l.MP_SETUPMAP_M_TYPE_2+'</option>\n<option value="4">'+l.MP_SETUPMAP_M_TYPE_1+'</option>\n<option value="5">'+l.MP_SETUPMAP_M_TYPE_0+"</option>\n</select></td></tr>\n<tr><td>"+l.SP_SETUPMAP_T_GAME_TYPE+'</td><td>\n<select id="gameTypeValue">\n<option value="0" selected>'+l.MP_SETUPMAP_G_TYPE_0.split("|")[0]+"</option>\n\n</select></td></tr>\n<tr><td>"+
l.SP_SETUPRND_T_DIFF_LVL+'</td><td><input id="AIlevelValue" type="number" value="'+localStorage.AIlevel+'" min="15" max="100" /></td></tr>\n<tr><td>'+l.VISIBILITY+' (BETA)</td><td>\n<select name="fog" id="fogValue">\n<option value="0">'+l.SP_SETUPMAP_T_FOG+'</option>\n<option value="1">'+l.TEMPFOG+'</option>\n<option style="display:none" value="2">'+l.FOGEXPLORE+'</option>\n<option value="3">'+l.EXTREMEFOG+'</option>\n</select></td></tr>\n</td></tr>\n\n<tr><td><hr></td></tr>\n</tbody>\n<tbody id="config2">\n<tr><td>'+
l.MP_SETUPMAP_T_ST_RES+"</td></tr>\n<tr><td><hr></td></tr>\n<tr><td>"+l.MISC_INF3+'</td><td><label class="container">\n  <input id="infinityValue" type="checkbox" '+a+'>\n  <span class="checkmark"></span>\n</label></td></tr>\n<tr><td>'+l.VIEWMSG_GOLD+'</td><td><input id="goldResValue" type="number" value="'+localStorage.goldRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+l.VIEWMSG_WOOD+'</td><td><input id="woodResValue" type="number" value="'+localStorage.woodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+
l.VIEWMSG_FOOD+'</td><td><input id="foodResValue" type="number" value="'+localStorage.foodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+l.VIEWMSG_STONE+'</td><td><input id="stoneResValue" type="number" value="'+localStorage.stoneRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td><hr></td></tr>\n\n</td>\n</tr>\n<tr><td>'+l.INITIAL_PEASANTS+'</td><td><input type="number" value="'+localStorage.peons+'" id="peonsValue" min="0" max="100"/></td></tr>\n<tr><td>'+l.FREE_POP+
'</td><td><input type="number" value="'+localStorage.freePop+'" id="freePopValue" min="0" /></td></tr>\n<tr><td>'+l.SP_SETUPMAP_T_POPLIMIT+'</td><td><input type="number" value="'+localStorage.maxPop+'" id="maxPopValue" min="100" max="50000" /></td></tr>\n</tbody>\n</table>\n<hr style="margin: 25px">\n<table>\n<tbody id="rndtable"></tbody>\n<table>\n';h("terrainValue").onchange=function(){x(this.value,h("terrainValue").value);h("terrainPreview").src=r.cdn+Xc[this.value].name.toLocaleLowerCase()+".png"};
h("terrainValue").onchange();h("gameTypeValue").onclick=function(){var a=parseInt(this.value);0==a?(h("rndtable").className="",h("config2").className=""):1==a&&(h("rndtable").className="hidetable",h("config2").className="hidetable")};h("gameTypeValue").value=localStorage.gameType;h("gameTypeValue").onclick();Ec();h("terrainRNDValue").value=localStorage.terrainRND;h("fogValue").value=localStorage.fog;h("maxPopValue").onchange=Ja;h("peonsValue").onchange=Ja;h("freePopValue").onchange=Ja;h("mapxValue").onchange=
Ja;h("goldResValue").onchange=Ja;h("woodResValue").onchange=Ja;h("foodResValue").onchange=Ja;h("stoneResValue").onchange=Ja;h("AIlevelValue").onchange=Ja;Xg(["goldResValue","woodResValue","foodResValue","stoneResValue"],"width: 158px");h("infinityValue").onchange=function(){var a=this.checked;h("goldResValue").disabled=a;h("stoneResValue").disabled=a;h("woodResValue").disabled=a;h("foodResValue").disabled=a};h("infinityValue").onchange();h("closeButton1").onclick=function(){t.online&&wb();h("mapconfiguration").style.display=
"none";sa()}}else Ec()};h("returnmenu").onclick=$a;var Hf=function(){x(this,this.checked);localStorage[this.localProp]=this.checked},If=function(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.localProp&&(a=Ta(a));r[this.localProp]=a;localStorage[this.localProp]=a;jb(n.userConfig(parseInt(localStorage.color.substr(1),16)),17,localStorage.name)},Ic={Multiplayer:Fc,RandomMap:zf,MapEditor:Gf,CustomMap:function(){""==h("CustomMap").innerHTML?(h("CustomMap").innerHTML="<h2>"+
l.SINGLESCR_LOAD.split("| ")[0]+'</h2>\n<input id="mapload" type="file" />\n<label for="mapload" id="maploadlabel">Choose a file</label>\n<table id="mapcache"></table>\n<div id="customMapcont" style="display:none">\n<table class="players" id="customaptable">\n<tbody id="custombody">\n</tbody>\n</table>\n<button style="margin-left:40px" id="startCustom" class="start startButton">'+l.MP_MPLAYER_PLAY+'</button>\n<button style = "margin-left:40px" id="editCustom" class="start"> '+l.MAPEDITOR+'</button>\n<button style="margin-left:40px" id="closeCustom" class="start">'+
l.GENERAL_CLOSE+"</button>\n</div>",h("closeCustom").onclick=function(){O("customMapcont");h("maploadlabel").style.display="inline-block";h("mapcache").style.display="table"},h("startCustom").onclick=function(){O("customMapcont");h("closeCustom").onclick();Qb()},h("editCustom").onclick=Gf,h("mapload").accept=".tzared",h("mapload").onchange=function(a){a=h("mapload").files[0];x(a);a.name.split(".");var b=new FileReader;b.onload=Eg;b.readAsArrayBuffer(a)}):O("customMapcont");W("returnmenu")},Settings:function(){var a=
h("Settings");if(""==a.innerHTML){var b=document.createElement("h2");b.innerHTML=l.MP_MPLAYER_SETTINGS;a.appendChild(b);b=document.createElement("div");var d=document.createElement("span");d.innerHTML=l.COLOUR;b.appendChild(d);var c=document.createElement("input");c.type="color";c.value=r.color;c.onchange=If;c.localProp="color";c.style.backgroundColor=r.color;b.appendChild(c);d=document.createElement("span");d.innerHTML=l.MP_SEARCH_T_PL_NAME;b.appendChild(d);c=document.createElement("input");c.type=
"text";c.value=String(r.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');c.onchange=If;c.localProp="name";c.spellcheck=!1;b.appendChild(c);d=document.createElement("span");d.innerHTML=l.LANGUAGE;b.appendChild(d);d=document.createElement("select");d.innerHTML='<option value="en">English</option>\n<option value="es">Espa\u00f1ol</option>\n<option value="it">Italiano</option>\n<option value="pt">Portugu\u00eas</option>\n<option value="pl">Polski</option>\n<option value="cz">\u010ce\u0161tina</option>\n<option value="de">Deutsch</option>\n<option value="ru">\u0420\u0443\u0441\u0441\u043a\u0438\u0439</option>\n<option value="bg">\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438</option>\n<option value="se">Svenska (beta)</option>\n';
d.value=r.langstr;d.onchange=function(){localStorage.language=this.value;location.href=""};b.appendChild(d);d=document.createElement("span");d.innerHTML=l.AUTOFULLSCREEN;b.appendChild(d);var f=document.createElement("label");f.className="container";d=document.createElement("span");d.className="checkmark";c=document.createElement("input");c.type="checkbox";var k="true"==localStorage.fullscreen?!0:!1;c.checked=k;c.onchange=Hf;c.localProp="fullscreen";f.appendChild(c);f.appendChild(d);b.appendChild(f);
d=document.createElement("span");d.innerHTML="GPU";b.appendChild(d);d.style.marginTop="65px";d=document.createElement("select");d.innerHTML='<option value="1">WebGL 1</option>\n<option value="2">WebGL 2 (recommended)</option>\n';d.value=V?1:2;d.onchange=function(){localStorage.webgl=this.value;location.href=""};b.appendChild(d);ca("span",b,l.SHADOWS);f=document.createElement("label");f.className="container";d=document.createElement("span");d.className="checkmark";c=document.createElement("input");
c.type="checkbox";k="true"==localStorage.shadows;c.checked=k;c.onchange=Hf;c.localProp="shadows";f.appendChild(c);f.appendChild(d);b.appendChild(f);a.appendChild(b)}W("returnmenu")},About:function(){var a=h("About");""==a.innerHTML&&(a.innerHTML='<div style="text-align:center;    user-select: text;"><div class="svgnehhon" style="background-repeat: no-repeat;height:342px;background-position: center;"></div>\nFully programmed by Donov<p>\n<p>Graphics, sound and game logic by Haemimont</p>\n<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url" target="_blank"><img src="nehhon/donate.gif" /></a><p>\nContact:</p>\n<a href=\'mailto:webmaster@nehhon.com\' target="_blank">webmaster@nehhon.com</a> <br> <a href="https://twitter.com/TzaredGame" target="_blank">@TzaredGame</a>\n<hr>\n<p style="margin-bottom:40px;">Special thanks to:</p>\n<div>\n<a href="https://www.crazygames.com/c/io" target="_blank">CRAZYGAMES.COM</a>\n<p>\n<img style="max-width:422px" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgODc0LjMgMzkzLjciIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDg3NC4zIDM5My43OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHN0eWxlIHR5cGU9InRleHQvY3NzIj4uc3Qwe2ZpbGw6I0ZGRkZGRjt9LnN0MXtmaWxsOiNGMzgwMjA7fS5zdDJ7ZmlsbDojRkFBRTQwO308L3N0eWxlPjxnPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik03OTAuNiwyNzEuOWMtMy40LDAtNi4xLTIuNy02LjEtNi4xYzAtMy4zLDIuNy02LjEsNi4xLTYuMWMzLjMsMCw2LjEsMi43LDYuMSw2LjFDNzk2LjcsMjY5LjEsNzkzLjksMjcxLjksNzkwLjYsMjcxLjkgTTc5MC42LDI2MC45Yy0yLjcsMC00LjksMi4yLTQuOSw0LjljMCwyLjcsMi4yLDQuOSw0LjksNC45YzIuNywwLDQuOS0yLjIsNC45LTQuOUM3OTUuNSwyNjMuMSw3OTMuMywyNjAuOSw3OTAuNiwyNjAuOSBNNzkzLjcsMjY5aC0xLjRsLTEuMi0yLjNoLTEuNnYyLjNoLTEuM3YtNi43aDMuMmMxLjQsMCwyLjMsMC45LDIuMywyLjJjMCwxLTAuNiwxLjctMS40LDJMNzkzLjcsMjY5eiBNNzkxLjMsMjY1LjVjMC41LDAsMS0wLjMsMS0xYzAtMC44LTAuNC0xLTEtMWgtMnYyTDc5MS4zLDI2NS41TDc5MS4zLDI2NS41eiIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMTU1LjEsMjU5LjEgMTcwLjcsMjU5LjEgMTcwLjcsMzAxLjYgMTk3LjgsMzAxLjYgMTk3LjgsMzE1LjIgMTU1LjEsMzE1LjIgIi8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTIxMy45LDI4Ny4zdi0wLjJjMC0xNi4xLDEzLTI5LjIsMzAuMy0yOS4yczMwLjEsMTIuOSwzMC4xLDI5djAuMmMwLDE2LjEtMTMsMjkuMi0zMC4zLDI5LjJDMjI2LjcsMzE2LjMsMjEzLjksMzAzLjQsMjEzLjksMjg3LjMgTTI1OC41LDI4Ny4zdi0wLjJjMC04LjEtNS44LTE1LjEtMTQuNC0xNS4xYy04LjUsMC0xNC4yLDYuOS0xNC4yLDE1djAuMmMwLDguMSw1LjgsMTUuMSwxNC4zLDE1LjFDMjUyLjgsMzAyLjMsMjU4LjUsMjk1LjQsMjU4LjUsMjg3LjMiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjkzLjQsMjkwLjZ2LTMxLjVoMTUuOHYzMS4yYzAsOC4xLDQuMSwxMS45LDEwLjMsMTEuOXMxMC4zLTMuNywxMC4zLTExLjV2LTMxLjZoMTUuOHYzMS4xYzAsMTguMS0xMC4zLDI2LTI2LjMsMjZDMzAzLjQsMzE2LjIsMjkzLjQsMzA4LjIsMjkzLjQsMjkwLjYiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzY5LjQsMjU5LjFIMzkxYzIwLDAsMzEuNywxMS41LDMxLjcsMjcuN3YwLjJjMCwxNi4yLTExLjgsMjguMi0zMiwyOC4yaC0yMS4zTDM2OS40LDI1OS4xTDM2OS40LDI1OS4xeiBNMzkxLjMsMzAxLjRjOS4zLDAsMTUuNS01LjEsMTUuNS0xNC4ydi0wLjJjMC05LTYuMi0xNC4yLTE1LjUtMTQuMkgzODV2MjguNUgzOTEuM3oiLz48cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjQ0NS4zLDI1OS4xIDQ5MC4yLDI1OS4xIDQ5MC4yLDI3Mi43IDQ2MC44LDI3Mi43IDQ2MC44LDI4Mi4zIDQ4Ny40LDI4Mi4zIDQ4Ny40LDI5NS4yIDQ2MC44LDI5NS4yIDQ2MC44LDMxNS4yIDQ0NS4zLDMxNS4yICIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNTExLjgsMjU5LjEgNTI3LjMsMjU5LjEgNTI3LjMsMzAxLjYgNTU0LjUsMzAxLjYgNTU0LjUsMzE1LjIgNTExLjgsMzE1LjIgIi8+PHBhdGggY2xhc3M9InN0MCIgZD0iTTU5NS4xLDI1OC43aDE1bDIzLjksNTYuNWgtMTYuN2wtNC4xLTEwaC0yMS42bC00LDEwaC0xNi4zTDU5NS4xLDI1OC43eiBNNjA4LjgsMjkzLjFsLTYuMi0xNS45bC02LjMsMTUuOUg2MDguOHoiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNNjU0LDI1OS4xaDI2LjVjOC42LDAsMTQuNSwyLjIsMTguMyw2LjFjMy4zLDMuMiw1LDcuNSw1LDEzLjF2MC4yYzAsOC42LTQuNiwxNC4zLTExLjUsMTcuMmwxMy40LDE5LjZoLTE4bC0xMS4zLTE3aC02Ljh2MTdINjU0TDY1NCwyNTkuMUw2NTQsMjU5LjF6IE02NzkuOCwyODZjNS4zLDAsOC4zLTIuNiw4LjMtNi42di0wLjJjMC00LjQtMy4yLTYuNi04LjQtNi42aC0xMC4yVjI4Nkw2NzkuOCwyODZMNjc5LjgsMjg2eiIvPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzI2LjIsMjU5LjEgNzcxLjMsMjU5LjEgNzcxLjMsMjcyLjMgNzQxLjYsMjcyLjMgNzQxLjYsMjgwLjggNzY4LjUsMjgwLjggNzY4LjUsMjkzLjEgNzQxLjYsMjkzLjEgNzQxLjYsMzAyIDc3MS43LDMwMiA3NzEuNywzMTUuMiA3MjYuMiwzMTUuMiAiLz48cGF0aCBjbGFzcz0ic3QwIiBkPSJNMTIxLjEsMjkzLjljLTIuMiw0LjktNi44LDguNC0xMi44LDguNGMtOC41LDAtMTQuMy03LjEtMTQuMy0xNS4xVjI4N2MwLTguMSw1LjctMTUsMTQuMi0xNWM2LjQsMCwxMS4zLDMuOSwxMy4zLDkuM2gxNi40Yy0yLjYtMTMuNC0xNC40LTIzLjMtMjkuNi0yMy4zYy0xNy4zLDAtMzAuMywxMy4xLTMwLjMsMjkuMnYwLjJjMCwxNi4xLDEyLjgsMjksMzAuMSwyOWMxNC44LDAsMjYuNC05LjYsMjkuNC0yMi40TDEyMS4xLDI5My45TDEyMS4xLDI5My45eiIvPjxnPjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iNzUyLjksMTY5LjYgNzEwLDE0NSA3MDIuNiwxNDEuOCA1MjcuMSwxNDMgNTI3LjEsMjMyLjEgNzUyLjksMjMyLjEgIi8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTY3NC44LDIyMy45YzIuMS03LjIsMS4zLTEzLjgtMi4yLTE4LjdjLTMuMi00LjUtOC42LTcuMS0xNS4xLTcuNGwtMTIzLjEtMS42Yy0wLjgsMC0xLjUtMC40LTEuOS0xYy0wLjQtMC42LTAuNS0xLjQtMC4zLTIuMmMwLjQtMS4yLDEuNi0yLjEsMi45LTIuMmwxMjQuMi0xLjZjMTQuNy0wLjcsMzAuNy0xMi42LDM2LjMtMjcuMmw3LjEtMTguNWMwLjMtMC44LDAuNC0xLjYsMC4yLTIuNGMtOC0zNi4yLTQwLjMtNjMuMi03OC45LTYzLjJjLTM1LjYsMC02NS44LDIzLTc2LjYsNTQuOWMtNy01LjItMTUuOS04LTI1LjUtNy4xYy0xNy4xLDEuNy0zMC44LDE1LjQtMzIuNSwzMi41Yy0wLjQsNC40LTAuMSw4LjcsMC45LDEyLjdjLTI3LjksMC44LTUwLjIsMjMuNi01MC4yLDUxLjdjMCwyLjUsMC4yLDUsMC41LDcuNWMwLjIsMS4yLDEuMiwyLjEsMi40LDIuMWwyMjcuMiwwYzEuMywwLDIuNS0wLjksMi45LTIuMkw2NzQuOCwyMjMuOXoiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNNzE0LDE0NC44Yy0xLjEsMC0yLjMsMC0zLjQsMC4xYy0wLjgsMC0xLjUsMC42LTEuOCwxLjRsLTQuOCwxNi43Yy0yLjEsNy4yLTEuMywxMy44LDIuMiwxOC43YzMuMiw0LjUsOC42LDcuMSwxNS4xLDcuNGwyNi4yLDEuNmMwLjgsMCwxLjUsMC40LDEuOSwxYzAuNCwwLjYsMC41LDEuNSwwLjMsMi4yYy0wLjQsMS4yLTEuNiwyLjEtMi45LDIuMmwtMjcuMywxLjZjLTE0LjgsMC43LTMwLjcsMTIuNi0zNi4zLDI3LjJsLTIsNS4xYy0wLjQsMSwwLjMsMiwxLjQsMmg5My44YzEuMSwwLDIuMS0wLjcsMi40LTEuOGMxLjYtNS44LDIuNS0xMS45LDIuNS0xOC4yQzc4MS4zLDE3NSw3NTEuMSwxNDQuOCw3MTQsMTQ0LjgiLz48L2c+PC9nPjwvc3ZnPg==" alt="cloudflare">\n<p>\n&\n<p>\n<a href="https://www.youtube.com/MayorceteGamingTV">Mayorcete</a>, Penetrenko, Remi Sluz, Edgaras, Hekas, <a href="https://www.youtube.com/user/rainheart666787">Sharp Rain</a>\n\n</div>\n</div>');
W("returnmenu")},Guide:Le};h("about").onclick=function(){location.hash="About"};h("discord").onclick=function(){window.open("https://discord.gg/ndxJHxT","_blank")};h("help").onclick=function(){location.hash="#Guide"};h("mult0").onclick=function(){location.hash="Multiplayer"};h("rnd0").onclick=function(){location.hash="RandomMap"};h("load0").onclick=function(){location.hash="CustomMap"};h("editor0").onclick=function(){location.hash="MapEditor"};h("settings0").onclick=function(){location.hash="Settings"};
Yd();(function(){var a=document.getElementsByTagName("head")[0],b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href="b.css";b.media="all";a.appendChild(b)})();(function(a,b,d,c,f,h,k){a.GoogleAnalyticsObject=f;a[f]=a[f]||function(){(a[f].q=a[f].q||[]).push(arguments)};a[f].l=1*new Date;h=b.createElement(d);k=b.getElementsByTagName(d)[0];h.async=1;h.src=c;k.parentNode.insertBefore(h,k)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create",
"UA-105062193-1","auto");ga("send","pageview");var Jf=function(a){this.arr=a};Jf.prototype.index=function(a){return this.arr.indexOf(a)};localStorage.lastVersion=r.versionInt;var Zf=new Jf("move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha".split(" "))})();
