function aa(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}}function ba(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):{next:aa(b)}}function ca(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}
var ea=ca(this),fa="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(b==Array.prototype||b==Object.prototype)return b;b[c]=d.value;return b};function ha(b,c){if(c){var d=ea;b=b.split(".");for(var e=0;e<b.length-1;e++){var f=b[e];f in d||(d[f]={});d=d[f]}b=b[b.length-1];e=d[b];c=c(e);c!=e&&null!=c&&fa(d,b,{configurable:!0,writable:!0,value:c})}}
ha("Promise",function(b){function c(k){this.c=0;this.A=void 0;this.a=[];var l=this.h();try{k(l.resolve,l.reject)}catch(t){l.reject(t)}}function d(){this.a=null}function e(k){return k instanceof c?k:new c(function(l){l(k)})}if(b)return b;d.prototype.c=function(k){if(null==this.a){this.a=[];var l=this;this.h(function(){l.A()})}this.a.push(k)};var f=ea.setTimeout;d.prototype.h=function(k){f(k,0)};d.prototype.A=function(){for(;this.a&&this.a.length;){var k=this.a;this.a=[];for(var l=0;l<k.length;++l){var t=
k[l];k[l]=null;try{t()}catch(q){this.m(q)}}}this.a=null};d.prototype.m=function(k){this.h(function(){throw k;})};c.prototype.h=function(){function k(q){return function(u){t||(t=!0,q.call(l,u))}}var l=this,t=!1;return{resolve:k(this.Nc),reject:k(this.m)}};c.prototype.Nc=function(k){if(k===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(k instanceof c)this.Tc(k);else{a:switch(typeof k){case "object":var l=null!=k;break a;case "function":l=!0;break a;default:l=!1}l?this.Cc(k):
this.ea(k)}};c.prototype.Cc=function(k){var l=void 0;try{l=k.then}catch(t){this.m(t);return}"function"==typeof l?this.Uc(l,k):this.ea(k)};c.prototype.m=function(k){this.Da(2,k)};c.prototype.ea=function(k){this.Da(1,k)};c.prototype.Da=function(k,l){if(0!=this.c)throw Error("Cannot settle("+k+", "+l+"): Promise already settled in state"+this.c);this.c=k;this.A=l;this.rb()};c.prototype.rb=function(){if(null!=this.a){for(var k=0;k<this.a.length;++k)g.c(this.a[k]);this.a=null}};var g=new d;c.prototype.Tc=
function(k){var l=this.h();k.lb(l.resolve,l.reject)};c.prototype.Uc=function(k,l){var t=this.h();try{k.call(l,t.resolve,t.reject)}catch(q){t.reject(q)}};c.prototype.then=function(k,l){function t(w,y){return"function"==typeof w?function(B){try{q(w(B))}catch(C){u(C)}}:y}var q,u,v=new c(function(w,y){q=w;u=y});this.lb(t(k,q),t(l,u));return v};c.prototype.catch=function(k){return this.then(void 0,k)};c.prototype.lb=function(k,l){function t(){switch(q.c){case 1:k(q.A);break;case 2:l(q.A);break;default:throw Error("Unexpected state: "+
q.c);}}var q=this;null==this.a?g.c(t):this.a.push(t)};c.resolve=e;c.reject=function(k){return new c(function(l,t){t(k)})};c.race=function(k){return new c(function(l,t){for(var q=ba(k),u=q.next();!u.done;u=q.next())e(u.value).lb(l,t)})};c.all=function(k){var l=ba(k),t=l.next();return t.done?e([]):new c(function(q,u){function v(B){return function(C){w[B]=C;y--;0==y&&q(w)}}var w=[],y=0;do w.push(void 0),y++,e(t.value).lb(v(w.length-1),u),t=l.next();while(!t.done)})};return c});
function ia(){ia=function(){};ea.Symbol||(ea.Symbol=ja)}function ka(b,c){this.a=b;fa(this,"description",{configurable:!0,writable:!0,value:c})}ka.prototype.toString=function(){return this.a};var ja=function(){function b(d){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new ka("jscomp_symbol_"+(d||"")+"_"+c++,d)}var c=0;return b}();
function la(){ia();var b=ea.Symbol.iterator;b||(b=ea.Symbol.iterator=ea.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&fa(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return ma(aa(this))}});la=function(){}}function ma(b){la();b={next:b};b[ea.Symbol.iterator]=function(){return this};return b}function na(){this.A=!1;this.h=null;this.c=void 0;this.a=1;this.rb=this.ea=0;this.m=null}function oa(b){if(b.A)throw new TypeError("Generator is already running");b.A=!0}
na.prototype.Da=function(b){this.c=b};function pa(b,c){b.m={Sb:c,xc:!0};b.a=b.ea||b.rb}na.prototype.return=function(b){this.m={return:b};this.a=this.rb};function qa(b,c,d){b.a=d;return{value:c}}function ra(b){this.a=new na;this.c=b}function sa(b,c){oa(b.a);var d=b.a.h;if(d)return ta(b,"return"in d?d["return"]:function(e){return{value:e,done:!0}},c,b.a.return);b.a.return(c);return ua(b)}
function ta(b,c,d,e){try{var f=c.call(b.a.h,d);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return b.a.A=!1,f;var g=f.value}catch(k){return b.a.h=null,pa(b.a,k),ua(b)}b.a.h=null;e.call(b.a,g);return ua(b)}function ua(b){for(;b.a.a;)try{var c=b.c(b.a);if(c)return b.a.A=!1,{value:c.value,done:!1}}catch(d){b.a.c=void 0,pa(b.a,d)}b.a.A=!1;if(b.a.m){c=b.a.m;b.a.m=null;if(c.xc)throw c.Sb;return{value:c.return,done:!0}}return{value:void 0,done:!0}}
function va(b){this.next=function(c){oa(b.a);b.a.h?c=ta(b,b.a.h.next,c,b.a.Da):(b.a.Da(c),c=ua(b));return c};this.throw=function(c){oa(b.a);b.a.h?c=ta(b,b.a.h["throw"],c,b.a.Da):(pa(b.a,c),c=ua(b));return c};this.return=function(c){return sa(b,c)};la();this[Symbol.iterator]=function(){return this}}
function wa(b){function c(e){return b.next(e)}function d(e){return b.throw(e)}return new Promise(function(e,f){function g(k){k.done?e(k.value):Promise.resolve(k.value).then(c,d).then(g,f)}g(b.next())})}function xa(b){return wa(new va(new ra(b)))}function ya(b,c){la();b instanceof String&&(b+="");var d=0,e={next:function(){if(d<b.length){var f=d++;return{value:c(f,b[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e}
ha("Array.prototype.keys",function(b){return b?b:function(){return ya(this,function(c){return c})}});ha("Math.sign",function(b){return b?b:function(c){c=Number(c);return 0===c||isNaN(c)?c:0<c?1:-1}});ha("Math.log2",function(b){return b?b:function(c){return Math.log(c)/Math.LN2}});var za,Aa={},Ba=NaN,h=window.localStorage;function Ca(b,c){void 0===h[b]&&(h[b]=c)}Ca("name","Guest"+~~(1E3*Math.random()));Ca("color","#0000bd");Ca("flag","eu");var m={name:h.name,color:h.color};function Da(){}
console.log("%c nehhon %c POWER ","background:#00ffd4;color:#000;font-size:25px","background:#000;color:#00ffd4;font-size:25px");var Ea=-1<navigator.userAgent.toLowerCase().indexOf(" electron/");function n(b){return document.getElementById(b)||NaN}window.gid=n;Ea&&(za=location.search.substr(1,location.search.length));void 0===h.fullscreen&&(h.fullscreen=!0);
var p,Fa=[256,5E3,5E3,5E3,5E3,0,0,0,0,500,400,80,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,20,0,21,1,0,20,0,22,1,0,1,1,-4,0,0,12,1,-1,11,0,4,1,32,16,0,1,1,21,20,0,1,1,22,20,0,3,2,43,1,0,5,0,234,1,0,15,0,88,1,0],Ga=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,44,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0],Ha=Ga.slice(0);
Ha[0]=192;
var Ia=[256,1500,1500,1500,1500,0,0,1,3,800,800,100,2,100,450,25,1,0,0,0,0,2,1E3,8,90,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,55,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0],Ja={Default:Fa,"Deiv 1500":Ga,"Battle Royale":[156,100,50,50,50,1,0,0,1,100,100,80,2,100,30,20,0,0,0,0,0,4,55,4,30,0,0,0,0,16,0,100,100,100,100,7,7,18,7,0,1,100,0,0,0,0,0,1,1,69,0,1,7,0,100,75,100,0,0,1,1,224,2,0,1,1,233,3,0,1,1,223,3,0,2,0,235,1,0,5,0,236,1,0,5,
0,237,1,0,5,0,238,1,0,5,0,239,1,0,10,0,221,1,0,10,0,222,1,0,10,0,242,1,0,30,0,226,1,0,15,0,228,1,0,10,0,230,1,0,15,0,229,1,0,1,2,44,1,0,1,1,244,4,0,1,1,222,4,0,50,2,80,1,0,50,2,66,1,0,50,2,0,1,0,50,2,4,1,0],BRx4:Ia,Diesel:[256,1500,1500,1500,1500,0,0,0,0,500,400,80,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,8,0,4,1,-31,16,0,12,1,-10,11,0,2,1,21,21,0,2,1,22,21,0,4,1,44,8,0,15,0,88,1,0],Classic:[256,400,400,400,400,
0,0,0,0,1,200,80,2,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,12,0,21,1,0,12,0,22,1,0,1,1,-4,0,0,3,1,-1,6,0,1,1,21,15,0,1,1,22,15,0,3,1,32,10,0,15,0,88,1,0]},Ka=Ga.slice(0);Ka[42]=1;Ka[7]=7;Ka[47]=34;var La=Ga.slice(0);La[16]=1;La[15]=80;La[47]=37;La[52]=37;La[77]=3;La[72]=3;var Ma=Ga.slice(0);Ma[8]=3;Ma[5]=1;Ma[14]=1800;Ma[21]=5;Ma[22]=55;Ma[23]=4;Ma[24]=15;var Na=Ma.slice(0);Na[14]=3600;var Oa=[Ga,Ha,Ia,Ka,La,Ma,Na];
function Pa(){var b;a:for(b in Ja){var c=Ja[b];if(c.length==p.length){for(var d=1;d<c.length;d++)if(6!=d&&46!=d&&(p[8]||14!=d&&21!=d&&22!=d)&&c[d]!=p[d])continue a;return b}}}function Qa(){try{p=h.mapConfig4&&JSON.parse(h.mapConfig4)||Fa}catch(b){p=Fa}}Qa();Ca("favMusic","originalMusic");Ca("musicRange",75);Ca("soundRange",100);Ca("nplayed",0);Ca("zoomMult",50);Ca("scrollSpeed",50);Ca("menuOpacity",75);Ca("nightcycle",!1);Ca("visits",0);Ca("shadows",!0);Ca("multithreading",!0);Ca("deathsounds",!0);
Ca("quality",1);Ca("antialiasing2",1);Ca("fogRefresh",2);Ca("zoomPointer",!0);Ca("unlimitedZoom",0);Ca("wasd",!1);Ca("theme",0);Ca("scrollmouse",1);h.visits++;var r;console.log=function(){};console.trace=function(){};r=function(){};var Ra=window[atob("bG9jYXRpb24=")];"dHphLnJlZA=="===btoa(Ra[atob("aG9zdG5hbWU=")])||Ea||(Ra[atob("aHJlZg==")]=atob("aHR0cHM6Ly90emEucmVk"));window.ms=r;
var Sa=(2<navigator.deviceMemory||!navigator.deviceMemory)&&2<navigator.hardwareConcurrency&&window.SharedArrayBuffer&&("true"==h.multithreading||!h.multithreading),Ta=document.createElement("script");Ta.src="nehhon/"+(Sa?"em2.js":"em.js")+"?v=486";document.body.appendChild(Ta);var Ua,Va={};
function Wa(b){if(Va[b]){if(Va[b]++,10<Va[b])return}else Va[b]=1;if(x){var c=x.getExtension("WEBGL_debug_renderer_info"),d=x.getParameter(c.UNMASKED_VENDOR_WEBGL);c=x.getParameter(c.UNMASKED_RENDERER_WEBGL)}var e=(z.now&&z.now()||0)/1E3,f=~~(e/60)%60,g=~~(e/3600);e=~~(e%60);1===(e+"").length&&(e="0"+e);10>f&&(f="0"+f);b=[b,z.f,g+":"+f+":"+e,Sa?1:0,A&&A[67]()?1:0,Xa?1:2,m.name,D.host?1:0,Ya,m.navigator||"Chrome",Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.language,h.visits,Ea?1:0,486,
navigator.hardwareConcurrency,navigator.deviceMemory,d,c,m.lang];for(d=0;d<b.length;d++)b[d]||(b[d]=0),b[d].replaceAll&&(b[d]=b[d].replaceAll(",",".|"));E(15,Za(" "+b.join(",")))}window.fstdD=function(b){Wa(b)};var $a=0;
window.addEventListener("error",function(b){b=b.error&&b.error.stack?b.error.message+"-"+b.error.stack:b.lineno+":"+b.colno+" "+b.message;if(x){var c=x.getExtension("WEBGL_debug_renderer_info"),d=x.getParameter(c.UNMASKED_VENDOR_WEBGL);c=x.getParameter(c.UNMASKED_RENDERER_WEBGL)}"0:0 Script error."==b&&$a++;4<$a&&"0:0 Script error."==b||Wa(b);b+="\nvendor:"+d+"\nrenderer:"+c+"\nRAM:"+navigator.deviceMemory+"\nplataform:"+navigator.platform+"\nnavigator:"+(m.navigator||"Chrome")+"\nversion:"+m.version+
"\nprocessors:"+navigator.hardwareConcurrency+"\nerrnum:0\nlang:"+m.Za+"\nfog:"+Ya+"\ndate:"+(new Date).toString()+"\nplayed:"+ab(z.now&&z.now()||0)+"\nonline:"+!!z.f+"\ndesk:"+Ea+"\nvisit:"+h.visits+"\nmult:"+Sa+"\nadmin:"+D.host+"\npre:"+A[67]()+"\nname:"+m.name+"\n-----------------------------------------------\n-------------------------\n----------\n";z.u&&bb('<span style="font-size:14px">'+b.substr(0,550)+"</span>","Error")});function F(b){b&&b.parentNode&&b.parentNode.removeChild(b)}
function G(b,c,d,e,f){b=document.createElement(b);f?c.prepend(b):c.appendChild(b);void 0!=d&&(b.innerHTML=d);e&&(b.style.cssText=e);return b}function cb(b,c){var d=document.createElement("div");b.appendChild(d);void 0!=c&&(d.textContent=c);d.style.cssText="color:#81ff81"}function db(b,c,d,e,f,g,k){b=H("input",b,f);b.value=c;b.onchange=d;void 0!=g&&(b.max=g);b.type=e||"text";void 0!=k&&(b.min=k);return b}
function eb(b,c){n("notifybar")&&F(n("notifybar"));G("div",document.body,b,c&&"color:"+c||"").id="notifybar";setTimeout(F,6E3,n("notifybar"))}var fb=location,gb="undefined"!==typeof InstallTrigger,hb=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),ib=!!document.documentMode,jb=!ib&&!!window.a,lb=window.chrome,mb;0<=navigator.userAgent.indexOf(" OPR/")?mb="Opera":gb?mb="Firefox":hb?mb="Safari":ib?mb="IE":jb?mb="Edge":lb&&(mb="Chrome");lb||Ea||eb("Partially supported browser, use Chrome/Opera/Desktop app instead");
m.cc=h.language||navigator.language||navigator.c;var nb={ca:"es",an:"es",gl:"es",eu:"es",ast:"es"}[m.cc.substr(0,2)]||m.cc.substr(0,2);m.version="v48.6";h.version!==m.version&&h.version&&(h.version=m.version,eb("Updated to "+m.version));var ob="en es it pt ru pl bg de cz".split(" ").indexOf(nb);0>ob&&(ob=0,nb="en");m.lang=ob;m.Za=nb;if(4==ob||6==ob)document.title="\u0426\u0430\u0440\u0435\u0434";m.cb=0;m.race=0;m.navigator=mb;m.G=151;m.nd=null;m.Ib=0;m.mb="nehhon/";
function pb(b){return xa(function(c){return c.return(b.split("\n"))})}function K(b){return Ba[b]||""}var qb,rb,sb=0;function tb(){sb++;if(3==sb){for(var b=0;4>b;b++){var c=K(698+b).split(","),d=c.length,e=ub(vb),f=0;c=ba(c);for(var g=c.next();!g.done;g=c.next()){g=g.value;for(var k=0;20>k;k++)e[f++]=g.length>k?g.charCodeAt(k):0}A[253](d,b)}window.onhashchange=wb;wb()}}function xb(){if(D.i&&1==D.i.readyState){var b=new Uint8Array(1);b[0]=24;D.i.send(b);setTimeout(xb,6E4)}}var yb=0,zb;
function Ab(){var b=Intl.DateTimeFormat().resolvedOptions().timeZone,c=navigator.hardwareConcurrency,d=navigator.deviceMemory;if(x){var e=x.getExtension(atob("V0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbw=="));e=x.getParameter(e.UNMASKED_RENDERER_WEBGL)}if(b==atob("QXNpYS9KZXJ1c2FsZW0=")&&(-1<e.indexOf(atob("R1RYIDk3MA=="))||-1<e.indexOf(atob("R1RYIDk4MA==")))||2==c&&4==d&&-1<e.indexOf("SwiftShader Device")||-1<e.indexOf(atob("VmlydHVhbEJveA=="))||(b==atob("QXNpYS9KZXJ1c2FsZW0=")||12==c&&8==d)&&-1<e.indexOf(atob("R1RYIDEwODAgVGk=")))zb=
1,D.close(1)}
function Bb(){this.active=!0;this.s=[];setTimeout(xb,6E4);this.i=new WebSocket("wss://hhh.tza.red:4333");this.i.binaryType="arraybuffer";this.i.onclose=function(b){this.i=null;for(var c=D.s.slice(0),d=0;d<c.length;d++){var e=c[d];e.F||e.close()}eb(K(803),"#ff0000");n("gameList")&&(Cb(n("gameList")),L("div",n("gameList"),803,"height:100%;text-align:center"));console.log(b)};this.i.onopen=function(){yb=1;h.sid&&E(21,Db(parseInt(h.sid),h.nm));zb&&D.close()};this.i.onerror=function(b){r("error",b)};this.i.onmessage=
function(b){if(b.data instanceof ArrayBuffer){b=new Uint8Array(b.data);var c=b[0];if(Eb[c])Eb[c](0,b)}}}if(Ea)window.require("electron").ipcRenderer.on("accountlog",function(b,c){console.log(c);E(12,Fb(1,c.code))});var D;D=new Bb;var Gb,Hb;window.onmessage=function(b){var c=new URLSearchParams(b.data);Gb&&c.has("code")&&(r(c,b.data),Gb.close(),E(12,Fb(Ea?1:0,c.get("code"))))};
window.opener&&(new URLSearchParams(window.location.search)).has("code")&&window.opener.postMessage(window.location.search,"*");
function Ib(){h.sid?Jb():(Hb=Math.floor(Math.random()*Math.pow(2,32)),Gb=window.open((Ea?"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F%3Fdesk%3D1&response_type=code&scope=identify%20email":"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F&response_type=code&scope=identify%20email")+"&state="+Hb,"Log In","toolbar=no, menubar=no, width=600, height=830, top=10, left=100"))}
var Kb=document.createElement("div");Kb.id="gameList";Lb=Kb.children;Mb=document.createElement("div");Nb=document.createElement("div");Ob=document.createElement("span");Nb.appendChild(Ob);Kb.appendChild(Mb);Kb.appendChild(Nb);var Pb;
function Qb(){Rb=[K(106).split("|")[0],K(107).split("|")[0],K(108).split("|")[0],K(109).toLocaleUpperCase()];for(var b=["rnd0",K(110).split("| ")[0],"returnmenu",K(112)],c=0,d=b.length;c<d;c+=2)n(b[c])&&(n(b[c]).innerHTML=b[c+1]);b=n("mult");G("div",b,"\u2b9c "+K(98).split("| ")[0]+" \u2b9e");b.appendChild(Kb);Ob.textContent="\u2bc6 "+K(83);Nb.id="rmply";H("div",Kb).id="rln";G("button",Kb,K(99).split("| ")[1]+" +").onclick=Pb;b=G("ul",n("index"),"<li id=about>"+K(111)+"</li><li id=chlog>"+K(536)+
'</li><li id="yt"><a href="https://youtube.com/c/Tzared" alt="youtube channel" target="blank_"><img src="nehhon/yt.webp" alt="youtube channel"></a></li><li id="discord"></li>'+(!Ea&&'<li id=tzdesk><svg width="24" height="24" viewBox="0 0 24 24" class="icon-nuGd5b"><g fill="currentColor"><path d="M17.707 10.708L16.293 9.29398L13 12.587V2.00098H11V12.587L7.70697 9.29398L6.29297 10.708L12 16.415L17.707 10.708Z"></path><path d="M18 18.001V20.001H6V18.001H4V20.001C4 21.103 4.897 22.001 6 22.001H18C19.104 22.001 20 21.103 20 20.001V18.001H18Z"></path></g></svg> <a id=\'tzdwd\' style=\'text-decoration:none;color:inherit\' href=\'download/\' target="_blank">'+
K(538)+"</a></li>"||"")+"<li id=help>"+K(114)+"</li>");b.id="topLinks";G("li",b,K(537)).onclick=function(){return location.hash="Ranking"};n("accb").innerHTML=h.sid?K(445):K(444);n("about").onclick=function(){location.hash="About"};n("help").onclick=function(){location.hash="#Guide"};n("chlog").onclick=function(){location.hash="#Changelog"};n("accb").onclick=Ib;if(Ea){b=G("span",n("mult"),"","position:absolute;right:0px");c=G("button",b,K(391).split("|")[0],"background:#00000085;color:#c3a447");var e=
G("input",b,"","background: #00000085;");e.placeholder="https://tza.red/##room";c.onclick=function(){var f=e.value.split("##")[1];f&&(Sb=!0,Tb("#"+f),Ub())}}Ea||(n("tzdesk").onclick=function(){n("tzdwd").click()});n("yt").onclick=function(){n("yt").children[0].click()};b=n("discord");b.$c="Discord";b.onclick=function(){window.open("https://discord.gg/ndxJHxT","_blank")}}
(function(){var b,c;return xa(function(d){switch(d.a){case 1:return qa(d,fetch(m.mb+m.Za+".nhl"),2);case 2:return b=d.c,c=pb,qa(d,b.text(),4);case 4:return qa(d,c(d.c),3);case 3:Ba=d.c,rb=[{name:K(547)},{name:K(548)},{name:K(549)},{name:K(550)},{name:K(551)},{name:K(552)},{name:K(553)},{name:K(554)},{name:K(555)}],Qb(),qb=1,tb(),d.a=0}})})();window.spAlert2=function(b,c,d,e){bb(c&&K(c),K(b),e,K(d))};function Vb(){M("alert")}
function Wb(){var b=Xb(K(441),1);b.style.fontSize="19px";G("button",b,K(444),"display:block;margin:auto;margin-top:28px;font-size:16px;background:#00ff0042;").onclick=function(){F(b.parentNode.parentNode);Ib()}}
function bb(b,c,d,e){var f=n("alert");f||(f=document.createElement("div"),f.id="alert",document.body.appendChild(f),f=n("alert"),r(e),f.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var g=n("alerttitle"),k=n("alerttext");n("alertok").onclick=Vb;f.style.display="block";g.innerHTML=c||Ba&&K(115)||"Warning";n("alertok").innerHTML=
e||Ba&&K(116)||"Ok";k.innerHTML=b||"";n("alertok").style.display=d?"none":"block"}window.spAlert=bb;var Yb=0,Zb;function $b(b){bc.innerHTML=K(117)+" "+b+"%"}window.showProgress=$b;function cc(){Yb++;Yb>=Zb&&(dc?dc():ec())}function fc(b,c){this.Kb=b;this.size=c}function ub(b){return gc(b.Kb,b.size)}function hc(){var b=vb;return ic(b.Kb,b.size)}
function jc(b){dc=b;bc.innerHTML=K(117);var c=1;O&&(c=1);kc=4096*c;Zb=3;b&&Zb--;Yb=0;A[134]("true"==h.shadows,c,kc);$b.progress=0;$b.total=0;Date.now();cc();bc.innerHTML=K(117);lc()}var dc;function lc(){A[136]()==Zb-Yb?(Yb++,cc()):setTimeout(lc,15)}function mc(){if(!Ea){h.update=1;if(window.caches){var b=window.caches;b.keys().then(function(c){c=ba(c);for(var d=c.next();!d.done;d=c.next())b.delete(d.value)})}setTimeout(function(){location.reload(!0)},250)}}
h.lastVersion&&486!=h.lastVersion&&(h.lastVersion=486,mc());var nc=n("index");function oc(){h.cache_v||(h.cache_v=3);if(1!=h.update||Ea)fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(c){return c.text().then(function(d){G("div",nc,m.version).id="info";486!=d&&mc()})});else if(delete h.update,3!=h.cache_v){h.cache_v=3;var b=indexedDB.deleteDatabase("emscripten_filesystem");b.onsuccess=function(c){r(c)};b=indexedDB.deleteDatabase("nh2019");b.onsuccess=function(c){r(c)}}}
Ea?G("div",nc,m.version+(" "+(za&&" - "+za||""))).id="info":oc();!Ea&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("sworker.js").then(function(){},function(b){r(b)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)});var pc,qc,rc={},sc="ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.mp3 CAMEL2.mp3 CARPETCMD.mp3 CATAPULT.mp3 CBEAR1.mp3 CBEAR2.mp3 CBEAR3.mp3 CBEAR4.mp3 COW1.mp3 COW2.mp3 COW3.mp3 COW4.mp3 DRAGON1.mp3 DRAGON2.mp3 FLY1.mp3 FLY2.mp3 FOOT1.mp3 FOOT2.mp3 FOOT3.mp3 FOOT4.mp3 FOOT5.mp3 FOOT6.mp3 FOOT7.mp3 FOOT8.mp3 GHOST1CMD.mp3 GHOST2CMD.mp3 GHOST3CMD.mp3 GOLEMCMD.mp3 H%20CMD%201.mp3 H%20CMD%202.mp3 H%20CMD%203.mp3 H%20CMD%204.mp3 HEAVY%20CATAPULT.mp3 INF%20CMD%201.mp3 INF%20CMD%202.mp3 INF%20CMD%203.mp3 INF%20CMD%204.mp3 INF%20CMD%205.mp3 MESSIAHCMD.mp3 ORC%20CMD%201.mp3 ORC%20CMD%202.mp3 ORC%20CMD%203.mp3 ORC%20CMD%204.mp3 ORC%20CMD%205.mp3 ORC%20CMD%206.mp3 SHIP%20CMD%201.mp3 SHIP%20CMD%202.mp3 SKELETON1.mp3 SKELETON2.mp3 SHIP%20SELECT.mp3 E_BARRACK1.mp3 E_BLACKSMITH1.mp3 FIRE1.mp3 FIRE2.mp3 FIRE3.mp3 FIRE4.mp3 FIRE5.mp3 ROCKET.mp3 pepe.mp3 A_MAGE.mp3".split(" "),
tc,uc;function vc(){var b=wc;this.context=pc;this.onload=b}function wc(b,c,d){c=c.split(".")[0].toLowerCase();rc[c]=b;d&&(qc(c,d.x,d.y,d.k,d.Ac,d.w),d.w=0)}
function Ub(){if(!pc){vc.prototype.zc=function(e,f){var g=this;xc(m.mb+e,function(k){g.context.decodeAudioData(k).then(function(l){l&&wc(l,e,f)})})};for(var b=0,c=sc.length;b<c;b++){var d=sc[b];rc[d.split(".")[0].toLowerCase()]=d}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,pc=new AudioContext,uc=pc.createGain(),tc=new vc,uc.gain.value=parseInt(h.soundRange)/100,uc.connect(pc.destination));qc=function(e,f,g,k,l,t,q){if(tc&&parseInt(h.soundRange)){"string"!==
typeof e&&(e=sc[e].split(".")[0].toLowerCase());var u=e;if((e=rc[e])&&"loading"!==e&&!z.Ob){var v=-P+(window.innerWidth-m.G)/2,w=-Q+window.innerHeight/2;if(e.duration){if(z.u)if(64<z.now()-e.Zb||!e.Zb)e.Zb=z.now();else return;if(!("attack"!=u&&t&&600<Date.now()-t)){if(f){if(l=(-v/32+f)/7,g=(-w/32+g)/7,w=yc,l*l+g*g>Math.pow(64,2))return!1}else w=g=l=0;void 0!==k&&k!==m.Xb||z.kd||(k=pc.createBufferSource(),k.buffer=e,f?(e=pc.createPanner(),e.panningModel="HRTF",e.setPosition(l,g,w),e.refDistance=1,
e.distanceModel="inverse",k.connect(e),e.connect(uc)):k.connect(uc),k.start(0))}}else rc[u]="loading",f={x:f,y:g,k:k,Ac:l,w:Date.now(),mid:q},tc.zc(e,f)}}};window.play=qc}}
var zc=[{name:"Tzar soundtrack",qa:"Kiril Busty Petrushev & Dimitar Sabev",volume:.7,va:[{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],Ua:[{sizes:"141x141",src:"nehhon/cover.png"}],ub:!0},{name:"Sharp Rain Tzar",qa:"Sharp Rain, Kiril Busty Petrushev & Dimitar Sabev",
volume:1,va:[{url:"sr1.mp3",name:"Track 1"},{url:"sr2.mp3",name:"Track 2"},{url:"sr3.mp3",name:"Track 3"},{url:"sr4.mp3",name:"Track 4"},{url:"sr5.mp3",name:"Track 5"},{url:"sr6.mp3",name:"Track 6"},{url:"sr7.mp3",name:"Track 7"},{url:"sr8.mp3",name:"Track 8"},{url:"sr9.mp3",name:"Track 9"},{url:"sr10.mp3",name:"Track 10"}],Ua:[{sizes:"141x141",src:"nehhon/shr.png"}],ub:!0},{name:"Tzar soundtrack",qa:"Kiril Busty Petrushev & Dimitar Sabev",volume:1,va:[{url:"tzaradp.mp3",name:"Tzar ADP",qa:"Diemiurgo"},
{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],Ua:[{sizes:"200x200",src:"nehhon/diemiurgo.jpg"}]},{name:"Tzar soundtrack remastered",volume:1,qa:"Kiril Busty Petrushev & Dimitar Sabev",va:[{url:"o1.mp3",name:"Track 1"},{url:"o2.mp3",name:"Track 2"},
{url:"o3.mp3",name:"Track 3"},{url:"o4.mp3",name:"Track 4"},{url:"o5.mp3",name:"Track 5"},{url:"o6.mp3",name:"Track 6"},{url:"o7.mp3",name:"Track 7"},{url:"o8.mp3",name:"Track 8"},{url:"o9.mp3",name:"Track 9"},{url:"o10.mp3",name:"Track 10"},{url:"outro.mp3",name:"Outro"}],Ua:[{sizes:"141x141",src:"nehhon/cover.png"}],ub:!0},{name:"Tzar soundtrack orchestral version",volume:1,qa:"Pau Garriga, Kiril Busty Petrushev & Dimitar Sabev",va:[{url:"oc1.mp3",name:"Track 1"},{url:"oc2.mp3",name:"Track 2"},
{url:"oc3.mp3",name:"Track 3"},{url:"oc4.mp3",name:"Track 4"},{url:"oc5.mp3",name:"Track 5"},{url:"oc6.mp3",name:"Track 6"},{url:"oc7.mp3",name:"Track 7"},{url:"oc8.mp3",name:"Track 8"},{url:"oc9.mp3",name:"Track 9"},{url:"oc10.mp3",name:"Track 10"}],Ua:[{sizes:"480x360",src:"nehhon/oc.jpg"}],ub:!0}],Ac;
function Bc(){"mute"!=h.favMusic&&Ac&&(Ac.src="nehhon/F.mp3",Ac.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:"Astronomia (Medieval Style)",artist:"Cornelius Link",artwork:[{sizes:"200x200",src:"nehhon/cornelius.jpg"}]})))}
function Cc(){this.value&&(h.favMusic=this.value);if("mute"!=h.favMusic){var b=zc[h.favMusic]||zc[0];if(b.ub){b=b.va;for(var c=b.length-1;0<c;c--){var d=Math.floor(Math.random()*(c+1)),e=ba([b[d],b[c]]);b[c]=e.next().value;b[d]=e.next().value}}}Dc.id=0;Dc()}
function Dc(){var b=h.favMusic;if("mute"==b)return Ac.src="";b=zc[b]||zc[0];0>Dc.id&&(Dc.id=0);var c=b.va[Dc.id++%b.va.length];Ac.src="nehhon/"+c.url;Ac.play();"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:c.name,artist:c.qa||b.qa,album:b.name,artwork:b.Ua}))}
function Ec(){Ac=new Audio;Ac.onended=Dc;Ac.volume=parseInt(h.musicRange)/100;if("mediaSession"in navigator){var b=navigator.mediaSession;b.setActionHandler("play",function(){Ac.play();b.playbackState="playing"});b.setActionHandler("pause",function(){Ac.pause();b.playbackState="paused"});b.setActionHandler("seekbackward",function(){});b.setActionHandler("seekforward",function(){});b.setActionHandler("previoustrack",function(){Dc.id-=2;Dc()});b.setActionHandler("nexttrack",Dc)}Cc()}
window.setupGameMusic=Ec;var Fc;function Gc(){return 25*A[48]()}function Hc(){if(0===z.paused){z.paused=1;void 0!=Fc&&clearInterval(Fc);var b=z.now();z.bb+=Date.now();z.now=function(){return b}}else z.bb-=Date.now(),z.paused=0,Fc=setInterval(Ic,Ic.speed),z.now=Gc}function ab(b){b/=1E3;var c=~~(b/60)%60,d=~~(b/3600);b=~~(b%60);1===(b+"").length&&(b="0"+b);0!=d?(d+=":",10>c&&(c="0"+c)):d="";return d+c+":"+b}var Jc=0,Kc=0;function Lc(){A[173](parseInt(this.value))}
window.invgtech=function(b){b=G("div",Mc,"","background-position-y:"+b+"px");b.className="techdone";setTimeout(F,4020,b)};window.synctm=function(){A[11]()};function Ic(){var b=!0;do{z.da=A[48]();b?Jc&&(Kc+=Date.now()-Jc-Ic.speed):Kc-=Ic.speed;Jc=Date.now();b=Date.now();A[11]();z.da=A[48]();var c=Nc;0===z.da%40&&c();Oc+=Date.now()-b;b=!1}while(!Pc&&Kc>=Ic.speed)}Ic.speed=25;function Qc(){this.nb=!this.nb;this.style.backgroundPositionY=-28*!this.nb+"px";A[182](this.uc,this.nb,this.Xa)}
function Rc(b){n("diplomacy")||O||(Xb('<table>\n    <tbody id="dpltable">\n    </tbody>\n    </table>\n    ',b).id="diplomacy",A[181]())}
function Sc(){var b=Tc('<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/gold.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/wood.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/food.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/stone.gif"></div>',1);b.className="sndRes";b=G("button",b,K(448),"padding:15px;margin-top:24px;background:#00ff001a");
b.Xa=this.Xa;b.onclick=Uc}function Uc(){var b=this.parentNode.getElementsByTagName("input");r(b,this);A[183](this.Xa,parseInt(b[0].value),parseInt(b[1].value),parseInt(b[2].value),parseInt(b[3].value));Vc(this.parentNode)}
window.shdiplomacyrow=function(b,c,d,e,f,g,k,l,t,q,u,v,w,y,B){c=Wc(q,c);var C=document.createElement("tr"),J=A[112]()==v;G("td",C,b);G("td",C,"","padding:0px;width:13px");G("td",C,'<div style="width:4px;background:'+Xc(e)+';border-radius:1px;height:16px;"></div>',"padding:0px");G("td",C,c+Yc(q),"color:#ffd75d;"+(k&&";text-decoration:line-through;color:#f00"||""));G("td",C,d);if(J)G("td",C,'<div class="shme" style="color:#ffb100">'+(A[246]()?"":B||"\ud83d\udec7")+"</div>","padding:0 5px;");else{G("td",
C,'<div class="'+(t?"shenemies":"shallies")+'">'+(A[246]()?"":B||"\ud83d\udec7")+"</div>","padding:0 5px;");Ya&&G("td",C,'<div class="shview" style="background-position-y:'+-28*!g+"px;"+(f&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||"")+'"></div>',"padding:0 5px;").children[0];b=H("td",C,"padding:0 5px;");for(c={N:0};4>c.N;c={N:c.N,ya:c.ya},c.N++)c.ya=H("div",b,"background-position-y:"+-28*!(u&1<<c.N)+"px;"+((y&1<<c.N?1:0)&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||"")),Zc(c.ya,c.N),c.ya.className=
"shres",t||(c.ya.onclick=function(I){return function(){u^=1<<I.N;I.ya.style.backgroundPositionY=-28*!(u&1<<I.N)+"px";r(u);A[182](1,u,v)}}(c));w=G("td",C,'<div class="shcontrol" style="background-position-y:'+-28*!l+"px;"+(w&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||"")+'"></div>',"padding:0 5px;").children[0];b.title="Share resources";w.title="Share control of units";t||(t=G("td",C,'<div class="shtrib"></div>',"padding:0 5px;").children[0],t.onclick=Sc,t.Xa=v,w.onclick=Qc,w.uc=2,w.nb=l,w.Xa=
v)}n("dpltable").appendChild(C)};var Oc=0,$c=0,ad=0,bd=[14,12,0,0,0,0,18,18,11,14,7,7,5,5,16,11,16,8,5,5,16,15],cd=-1;window.cursor=function(b,c){var d=bd[2*b]||0,e=bd[2*b+1]||0;c&&(b+="i");b!==cd&&(cd=b,document.body.style.cursor='url("'+m.mb+"cursor"+b+'.gif") '+d+" "+e+", auto")};var dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd;window.setupArrows=function(b,c,d){b&&(md.qb.className="");(b+1)*kd.length<c&&(md.Eb.className="");d&&(md.ic.className="")};var td=[20,15,14,22];
window.setupTradingmenu=function(b,c,d,e,f,g){r(c,d);n("tradingmenu")?ud("tradingmenu"):(G("div",vd?n("menbak2"):n("menu"),'<button id="tramount"></button>\n<button id="troriginres"></button>\n<button id="trdestres"></button>\n<button id="trorigin"></button>\n<button id="trdest"></button>\n<button id="trdecline" style="top:167px"></button>\n<button id="traccept" style="top:167px"></button>',"",vd).id="tradingmenu",n("tramount").onmouseup=function(k){A[159](k.button?-1:1)},n("troriginres").onmouseup=
function(k){this.style.backgroundPositionY=-48*td[A[160](k.button?-1:1)]+"px"},n("trdestres").onmouseup=function(k){this.style.backgroundPositionY=-48*td[A[160](k.button?-1:1,1)]+"px"},n("trorigin").onclick=function(){A[161]()},n("trdest").onclick=function(){A[161](1)},n("trdecline").onclick=function(){M("tradingmenu")},n("traccept").onclick=A[162]);n("traccept").disabled=!g;r(b);n("tramount").innerHTML=b+(" (+"+g+")");n("trorigin").style.cssText=d?"background:url(nehhon/iconunits.webp) 0px "+48*
-d+"px":"";n("trdest").style.cssText=c?"background:url(nehhon/iconunits.webp) 0px "+48*-c+"px":"";n("troriginres").style.backgroundPositionY=-48*td[f]+"px";n("trdestres").style.backgroundPositionY=-48*td[e]+"px"};var wd=navigator.a;function xd(){}wd&&wd.addEventListener("levelchange",xd);
window.setupMWmenu=function(){n("magicworkshopmenu")?ud("magicworkshopmenu"):(G("div",vd?n("menbak2"):n("menu"),'<button id="mgbook"></button>\n            <button id="mgpotion"></button>\n            <button id="mgsword"></button>\n            <button id="mgamount"></button>\n            <button id="mgitem"></button>\n            <button id="mgdecline"></button>\n            <button id="mgaccept"></button>',"",vd).id="magicworkshopmenu",n("mgbook").onclick=function(){A[36](0);yd()},n("mgpotion").onclick=
function(){A[36](1);yd()},n("mgsword").onclick=function(){A[36](2);yd()},n("mgdecline").onclick=function(){n("magicworkshopmenu").style.display="none"},n("mgitem").onmousedown=function(b){var c=1;b.button&&(c*=-1);A[37](c);yd()},n("mgaccept").onclick=function(){n("magicworkshopmenu").style.display="none";A[39]()},n("mgamount").onmousedown=function(b){var c=1;b.button&&(c=-1);A[38](c);yd()});yd()};
function yd(){n("mgitem").style.backgroundPositionY=-48*A[35]()+"px";n("mgamount").innerHTML=A[34]()}function zd(b,c){var d=b.U,e=document.createElement("div");e.className="contD";for(var f=0;f<d.length;f++){var g=document.createElement("button"),k=d[f];k.parent=b;g.innerHTML=k.name;g.onclick=Ad;g.Pa=k;c.appendChild(g);k.U&&(k.Pb=e)}c.appendChild(e)}function R(b){b.style.display="none"}Element.prototype.show=function(){this.style.display="block"};function Bd(b){b.style.display=""}
function Cd(b){zd(b,n(b.parent))}var Dd;function Ed(){var b=Fd,c=Gd();b.U=c;b.$a&&(b.$a.innerHTML="",zd(b,b.$a))}
function Ad(){var b=this.Pa,c=b.parent;if(b.onclick)b.onclick(b.ec);if(Dd&&c&&c.L!=Dd)for(var d=Dd,e=d.length,f=0;f<e;n(d[f++]).style.display="none");b.L&&(Hd(b.L),Dd=b.L);b.ua&&b.ua.Pa&&b.ua.Pa.L&&(Hd(b.ua.Pa.L),Dd=b.ua.Pa.L);if(b.U){c.ua&&(c.ua.className="");c.ua=this;this.className="clickD";b.$a||(c=document.createElement("div"),b.Pb.appendChild(c),zd(b,c),b.$a=c);c=b.Pb.children;for(d=0;d<c.length;R(c[d++]));b.$a.show()}}
function Id(){var b=A[112]();n("selectKingdom").innerHTML="";for(var c=0,d=A[28]();c<d;c++){var e=c?Jd(Kd(A[111](c),20)):K(23),f=Xc(A[132](c));n("selectKingdom").innerHTML+='<option style="background:'+f+'" value="'+c+'" '+(c==b&&"selected"||"")+">"+e+"</option>"}n("selectKingdom").innerHTML+="<option value='"+(Math.pow(2,31)-1)+"'>"+K(22)+"</option>";n("selectKingdom").onchange(1)}window.activeKingdomSetup=Id;function Ld(b){A[117](b,!0)}
function Md(b,c){var d=ub(vb),e=b.length;1024<e&&(e=1024);for(var f=0;f<e;f++)d[f]=b.charCodeAt(f);A[239](e,c)}function Nd(b){n("brushSize").value=b;n("brushSize").onchange()}function Od(b,c){var d=" ("+Od.a.length+")";Od.a.put({name:"water"==Pd.rc[c]&&K(45)+d||K(46)+d,onclick:Ld,ec:b})}window.EDterrainInfo=Od;function Gd(){Od.a.length=0;A[118]();return Od.a}var Qd;window.fstTXT=function(b,c){c?Qd=Jd(gc(b,c)):Qd=""};var Rd,Sd=1,Td,Fd;
function Ud(){vd="true"==h.theme||1020>window.innerWidth;n("content")||(G("div",Mc).id="content");if(O){Od.a=[];n("content").innerHTML='<div id="mapeditorpanel">\n    <div id="mapeditorinfo">\n    </div>\n    </div>\n    <div id="minimap" style="box-shadow:0px 0px 20px #000;position:absolute;top:31px;left:4px"></div>\n    <div id="mapeditorinfotop">\n   \n    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>\n    <button style="display:none" id="rotatebutton"></button>\n    <button id="mapProps" style="box-shadow:none"></button>\n    <button id="mapRules">'+
K(576)+'</button>\n    <button style="display:none" id="mapRules"></button>\n    <div id="brhSize" style="display:none"><span>'+K(728)+': </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>\n    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>\n    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>\n    <div id="EDrndtree" style="display:none"><button id="rndtrees">'+
K(49)+'</button></div>\n    <div id="EDterr" style="display:none"><span>'+K(26)+': </span><select id="EDtrrsel">'+Vd()+'</select></div>\n    <div id="EDterrRND" style="display:none"><button id="rndtrbutton">'+K(50)+'</button></div>\n    <div><span style="font-size:14px;color:#797979">'+K(670)+': </span>\n    <select id="selectKingdom">\n    </select>\n    </div>\n    <div><button id="castleRND">'+K(52)+'</button></div>\n    <div><button id="clearMap">'+K(51)+'</button></div>\n    </div>\n    <div id="bigMap" style="display:none"></div>\n    \n    ';
n("mapRules").onclick=Wd;var b=n("mapeditorinfotop");H("button",b,"box-shadow:none;background:url(nehhon/load.webp);opacity:.8;width:20px;height:26px;background-size:20px",1).onclick=function(){var d=document.createElement("input");d.type="file";d.accept=".tzared";d.onchange=Xd;d.click()};H("button",b,"box-shadow:none;margin-right:-6px;background:url(nehhon/dwn.webp);background-size:26px;opacity:.8;width:26px;height:26px",1).onclick=Yd;H("button",b,"box-shadow:none;margin-right:-6px;background:url(nehhon/exit.webp);background-size:30px;opacity:.8;width:30px;height:28px;margin-left:auto").onclick=
Zd;var c=G("button",b,"\u25a4");b.insertBefore(c,n("brhSize")).onclick=function(){var d=Tc("",1);L("div",d,678,"color:var(--color1);font-size:28px;margin-bottom:32px");var e=$d(d),f=ae(d),g=G("div",d),k=be(d,0,[624,598,586]),l,t;k.onchange=function(){l=void 0;Cb(g);if(1==k.value){g.className="unitProps";l=ce([0,0,0,0,0,0,0],de(e),g);G("span",g,K(676)+": ");var q=ee(function(u){return t=u},g,0);q.style.margin="20px";t=2147483646;L("option",q,677).value=t;q.value=t}};L("button",d,675,"margin-left:15px").onclick=
function(){for(var q=ub(vb),u=0;u<f.length;u++)q[u+1024]=f[u].checked;if(1==k.value){for(u=0;u<l.length;u++)l[u]&&(q[u]=parseInt(l[u].value));q[7]=t}A[247](de(e),de(k));Vc(d)}};n("castleRND").onclick=function(){A[133](0);fe.c=!0};n("clearMap").onclick=function(){A[133](1)};n("rndtrees").onclick=A[125];n("rndres").onclick=A[129];n("brushDensity").onchange=function(){A[116](parseInt(n("brushDensity").value))};n("brushSize").onchange=function(){A[115](parseInt(n("brushSize").value))};n("brushMargin").onchange=
function(){A[147](parseInt(n("brushMargin").value))};n("rndtrbutton").onclick=function(){A[3]();A[124]();fe.c=!0};n("brushDensity").onchange();n("brushSize").onchange();n("selectKingdom").onchange=function(){A[113](parseInt(this.value));if(this.value!=Math.pow(2,31)-1){var d=A[132](parseInt(this.value)),e=d>>16&255,f=d>>8&255;d&=255}else d=f=e=0;this.style.background="rgba("+e+","+f+","+d+",0.6)"};n("mapProps").onclick=function(){var d=Tc("",1);d.id="mapPropsWindow";d=G("div",d);ge=G("div",d);ge.id=
"edks";he();for(var e=H("div",d,"margin-bottom:24px;display:flex;justify-content:center;gap:33px"),f=[48,ie,463,je,702,function(){return ke()}],g=0;g<f.length;g+=2)L("button",e,f[g],"text-transform:uppercase").onclick=f[g+1];e=H("div",d,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;");L("p",e,54);var k=G("input",e);k.onchange=function(){return Md(k.value,0)};A[240](0);k.value=Qd;L("p",e,56);var l=H("textarea",e,"width:694px;height:152px");
l.onchange=function(){return Md(l.value,1)};A[240](1);l.value=Qd;L("p",e,57);var t=G("input",e);t.onchange=function(){return Md(t.value,2)};A[240](2);t.value=Qd;L("button",e,70,"display:block;margin-top:15px;margin-left:auto").onclick=function(){var q=Tc("",1),u=A[250]();L("span",q,691,"line-height:31px");var v=le(q,function(y){y?(w.show(),w.value="",w.focus()):(R(w),A[250](1,0),w.value=0)},u);v.style.cd="right";v.style.marginLeft="6px";var w=db(q,u,function(){me(w);A[250](1,de(w))},"number","display:block;margin:auto;margin-top:14px",
Math.pow(10,7)-1,0);u?w.focus():R(w)};e=H("div",d,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;margin-top:30px;width:max-content");G("span",e,K(457)+": ");f=G("input",e,"","display:block;margin-top:10px;background:none");f.onchange=ne;f.type="file";f.accept="image/*";G("div",e).id="mmimg";d=H("div",d,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;margin-top:30px;width:max-content");
L("span",d,721);d=G("input",d,"","display:block;margin-top:10px;background:none");d.onchange=oe;d.type="file";d.accept=".wmp"};Fd={name:K(26),U:Od.a,L:["brhSize"]};Rd=[{name:K(535),onclick:function(){return A[117](-1,!0)},L:["brhSize"]}];new Cd({U:[{name:K(730),onclick:function(){return Nd(1)},L:["brhSize","brhMargin"],U:[{name:K(729),onclick:function(){return pe(A[110])}}]},{onclick:function(){return Nd(8)},name:K(26).toUpperCase(),U:[Fd,{name:K(61),U:[{name:K(61),onclick:A[117],ec:7}],L:["brhSize",
"brhDnst","EDrndtree"]},{name:K(534),U:Rd,onclick:function(){Rd.length=1;for(var d=A[215](),e={za:0};e.za<d;e={za:e.za},e.za++)Rd.put({name:e.za,onclick:function(f){return function(){A[216](f.za)}}(e)})}}]}],parent:"mapeditorinfo"})}else vd?(n("content").className="nw",n("content").innerHTML='<ul id="msgs1"></ul>\n    <div id="playersinfo"></div>\n    <div id="pop"></div>\n    <div id="popr"></div>\n    <div id="resources">\n    <div><span id="gold"></span></div>\n    <div><span id="wood"></span></div>\n    <div><span id="food"></span></div>\n    <div><span id="stone"></span></div>\n    <div id="temperature"></div>\n    </div>\n    <div id="diplomacyButton"></div>\n    '+
(z.f&&'<div id="msgButton"></div>'||"")+'\n    <div id="topinfo">\n    <span id="tpCPU"> </span>\n    <span id="tpGPU"> </span>\n    <span id="tpTM"></span>\n    </div>\n    <div id="bottominfo"></div>\n\n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>\n    <div style="display:none" id="bigMap"></div>\n    <button id="minimapb"></button>\n    <button id="menuctrl"></button>\n    <div id="menu" style="display:block">\n    <div id="menbak0">\n    <div id="plavatar"></div>\n    '+
(!Ua&&'<div id="kingdom"></div>'||"")+'\n    </div>\n    <div id="menbak1"></div>\n    <div id="menbak1s"></div>\n\n    <div id="icons20">\n    <div id="attackmenu" style="display:none"></div>\n    <div id="defencemenu" style="display:none"></div>\n    <div id="levelmenu" style="display:none"></div>\n    <div id="manamenu" style="display:none"></div>\n    <div id="manamenu1" style="display:none"></div>\n    </div>\n\n    <div id="topmenuvals">\n    <div id="delunit">x</div>\n    <div id="progressvalue"></div>\n    <progress id="progressone" style="display:none"></progress>\n    <progress id="progressmana" style="display:none" max="100"></progress>\n    '+
(Ua&&'<div id="kingdom"></div>'||"")+'\n    <div id="unitname" contenteditable="true"></div>\n    </div>\n    <div id="menbak2">\n    <div id="navigation">\n    <button id="aleft"></button>\n    <button id="stock"></button>\n    <button id="aright"></button>\n    </div>\n    <div id="orders">\n    </div>\n    <button id="gameMenu">'+K(47)+"</button>\n    </div>\n    </div>"):(n("content").innerHTML='<ul id="msgs1"></ul>\n    <div id="playersinfo"></div>\n    <div id="pop"></div>\n    <div id="resources" style="display:block">\n    <div id="goldr"></div>\n    <div id="woodr"></div>\n    <div id="foodr"></div>\n    <div id="stoner"></div>\n    <div id="popr"></div>\n    <div id="resourcesbefore"></div>\n    <div id="gold"></div>\n    <div id="wood"></div>\n    <div id="food"></div>\n    <div id="stone"></div>\n\n    <div id="temperature"></div>\n    </div>\n    <div id="diplomacyButton"></div>\n    '+
(z.f&&'<div id="msgButton"></div>'||"")+'\n    <div id="topinfo">\n    <span id="tpCPU"></span>\n    <span id="tpGPU"></span>\n    <span id="tpTM"></span>\n    </div>\n    <div id="bottominfo"></div>\n\n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>\n    <div style="display:none" id="bigMap"></div>\n    <button id="minimapb"></button>\n    <button id="menuctrl"></button>\n    <div id="menu" style="display:block">\n    <div id="menubefore"></div>\n    <div id="menuafter"></div>\n    <button id="gameMenu">'+
K(47)+'</button>\n\n    <div id="daynighticon"></div>\n    <div id="topmenuvals">\n    <div id="icons20">\n    <div id="attackmenu" style="display:none"></div>\n    <div id="defencemenu" style="display:none"></div>\n    <div id="levelmenu" style="display:none"></div>\n    <div id="manamenu" style="display:none"></div>\n    <div id="manamenu1" style="display:none"></div>\n    </div>\n    <div id="delunit">\ud83d\udec7</div>\n    <div id="progressvalue"></div>\n    <div id="kingdom"></div>\n    <div id="unitname" contenteditable="true"></div>\n    <progress id="progressone" style="display:none"></progress>\n    <progress id="progressmana" style="display:none" max="100"></progress>\n    </div>\n    <div id="navigation">\n    <button id="aleft"></button>\n    <button id="stock"></button>\n    <button id="aright"></button>\n    </div>\n    <div id="orders">\n    </div>\n    </div>',
n("content").className="dfth"),sd=n("msgs1"),qe(),re=H("span",n("topinfo"),"display:none;font-size:8px;color:#00ffff"),!se&&z.f&&(setInterval(function(){1==te&&(ue=performance.now(),E(28))},15E3),ue=performance.now(),E(28)),md={page:0,qb:n("aleft"),Eb:n("aright"),ic:n("stock")},window.actionMenu=md,md.qb.onclick=function(){A[30](-1)},nd=n("gold"),od=n("wood"),pd=n("food"),qd=n("stone"),rd=n("daynighticon"),md.Eb.onclick=function(){A[30](1)},md.wc=[],dd=n("attackmenu"),ed=n("defencemenu"),fd=n("levelmenu"),
gd=n("kingdom"),hd=n("progressone"),id=n("unitname"),jd=n("progressvalue"),n("delunit").onclick=function(){A[32](8,0)},n("menuctrl").onclick=function(){(Sd=!Sd)?(n("menuctrl").style.cssText="",n("menu").style.cssText="",n("resources").style.cssText=""):(n("menuctrl").style.left="0px",n("menuctrl").style.backgroundPosition="100px",R(n("menu")),370>window.innerHeight&&(n("resources").style.cssText="width:100%;left:0px"));A[167](Sd)},n("minimapb").onclick=function(){if(ve=!ve)Td=Sd,Sd=!0,n("menuctrl").onclick(),
n("minimapb").style.filter="drop-shadow(0px 0px 2px #fff)";else{Td&&(Td=0,n("menuctrl").onclick());M("bigMap");n("minimapb").style.cssText="";for(var d=document.getElementsByClassName("alertdmg"),e=0;e<d.length;e++)R(d[e])}},n("teamchat").onchange=function(){n("msginputGame").focus()},n("msgButton")&&(n("msgButton").onclick=we),n("diplomacyButton").onclick=Rc,ld=n("bottominfo"),xe(),n("stock").onclick=A[31],n("gameMenu").onclick=ye;n("minimap").addEventListener("mousedown",ze);n("bigMap").addEventListener("mousedown",
ze);n("bigMap").addEventListener("touchstart",ze)}
function xe(){if(!O){var b=4;if(vd){var c=window.innerHeight;240>c?b=1:295>c?b=2:344>c?b=3:700<c&&1020<window.innerWidth&&(b=window.innerHeight-n("menbak2").getBoundingClientRect().y-132,b=Math.floor((b+5-24)/53),24<b&&(b=24))}b*=2;if(!kd||kd.length!=b){c=n("orders");c.innerHTML&&(c.innerHTML="");kd=[];for(var d=0;d<b;d++){var e=G("button",c);e.ontouchstart=Ae;e.ontouchend=Be;e.onmousedown=Ce;e.onmouseup=De;e.ab=d;e.onmouseenter=Ee;e.onmouseout=Fe;kd[d]=e}A[189](b)}}}var Ge,He;
function Ae(b){He=b.changedTouches[0].pageX;Ge=b.changedTouches[0].pageY}function Be(b){var c=b.changedTouches[0].pageX,d=b.changedTouches[0].pageY,e=Math.sign(d-Ge);r(e,d,Ge);48<e*(d-Ge)?(A[32](16,1),A[15](this.ab,0<e?2:0),A[32](16,0)):(55<Math.sign(c-He)*(c-He)&&(A[32](16,1),A[32](18,1),A[15](this.ab,0),A[32](16,0),A[32](18,0)),r(b))}window.clearleftar=function(){md.qb.className=""};var Ie;
function ze(b){A[47]();var c=b.offsetX,d=b.offsetY;Ie=this.getBoundingClientRect();var e="touchstart"==b.type;if(0===b.button||e)document.addEventListener(e&&"touchend"||"mouseup",function l(){Je=!1;document.removeEventListener("mouseup",l);document.removeEventListener("mousemove",Ke)}),Je=!0,Ke(b),document.addEventListener(e&&"touchmove"||"mousemove",Ke);else if(2===b.button){e=parseInt(b.target.style.width);var f=parseInt(b.target.style.height),g=A[47]();c=32*~~(g*c/e);d=32*~~(g*d/f);r(c,d);A[22](c,
d,2,0,!0,b.shiftKey)}}
function Le(b,c,d,e,f,g,k,l,t,q,u,v,w,y){w=g?Le.a:n("guideTable").getElementsByTagName("tr")[w].getElementsByTagName("td")[v];var B="";g||(B+="<span>"+Rb[v]+"</span>");B+="<div "+(g&&"class='spchild'"||"")+'>\n    <div class="prevIcon" style="background-position-y:'+48*f+'px"></div>\n    <ul>\n    <li class="guiTitle">'+K(b)+"</li>\n    "+(y&&'<li class="desc">'+K(y)+"</li>"||"")+"\n    <li><span>"+(K(66)+":</span> ")+(l&&l+"<img src='nehhon/gold.gif'>"||"")+" "+(t&&t+"<img src='nehhon/wood.gif'>"||"")+
" "+(q&&q+"<img src='nehhon/food.gif'>"||"")+"  "+(u&&u+"<img src='nehhon/stone.gif'>"||"")+" </li>\n    ";k&&1!=k||(B+="\n    <li><span>"+K(4)+":</span> "+c+"</li>");k||(B+="\n    <li><span>"+K(7)+":</span> "+d+"</li>\n    <li><span>"+K(5)+":</span> "+e+"</li>");b=G("div",w,B+"</ul>\n    </div>\n    ");g||(Le.a=b)}window.insertInfo=Le;
function Me(){var b,c,d,e,f,g,k,l,t,q,u,v,w,y,B,C,J,I,T,V;return xa(function(X){if(1==X.a){if(n("guide1")){X.a=0;return}b={es:1,it:1,pt:1,pl:1,bg:1};c=b[m.Za]&&m.Za||"en";return qa(X,fetch("nehhon/hl"+c+".json"),3)}if(4!=X.a)return d=X.c,qa(X,d.json(),4);e=X.c;f=e.BASICTR;g=Tc("",2);g.id="guide1";k=G("h2",g,"","color:var(--color1);font-size:18px;height:46px;margin-top:0px;text-align:left;text-shadow:0px 0px 10px");l=G("div",g);l.id="hxtrbtn";t=G("div",g);t.id="helpbtn";q=G("div",g);q.id="helpcnt";
u="tech unit building item order howto whatis hotkey".split(" ");v=function(N){N=e[N];var W=G("dl",q),da;for(da in N){var kb=N[da];r(kb);var ac=kb.icon.split(",");G("dt",W,""+kb.brief,"cursor:inherit;background-image:url(nehhon/H"+ac[0]+".webp); background-position:0px "+-48*(ac[1]-1)+"px");G("dd",W,""+kb.detail,"display:block")}};w=function(N){q.innerHTML="";q.scrollTop=0;for(var W=N.parentNode.children,da=0;da<W.length;da++)W[da].style.border=W[da]==N?"1px solid":""};y=function(N,W){w(W);N=e[N];
W=G("dl",q);for(var da in N){var kb=N[da],ac=kb.icon.split(",");G("dt",W,""+kb.brief,"cursor:inherit;background-image:url(nehhon/H"+ac[0]+".webp); background-position:0px "+-48*(ac[1]-1)+"px");G("dd",W,""+kb.detail.split("~ ")[1],"display:block")}};B=function(N){q.scrollTop=0;if("UNITS"==N){var W=G("button",l,f.table);W.onclick=function(){w(this);Ne(q)};W.onclick();G("button",l,f.bonuses).onclick=function(){w(this);Oe(q)};G("button",l,f.bonuses_inv).onclick=function(){w(this);Oe(q,1)}}"BUILDINGS"==
N&&(G("button",l,f.bonuses).onclick=function(){w(this);Oe(q,0,1)},G("button",l,f.bonuses_inv).onclick=function(){w(this);Oe(q,1,1)});var da="TECHNOLOGIES"==N;if(!da&&(W=G("button",l,""+f.common),W.onclick=function(){y(N+" (Common)",this)},"UNITS"!=N))W.onclick();W=G("button",l,""+f.euro);W.onclick=function(){y(N+(da&&" (European)"||" (Euro)"),this)};G("button",l,""+f.arab).onclick=function(){y(N+" (Arabian)",this)};G("button",l,""+f.asia).onclick=function(){y(N+" (Asian)",this)};if(da)W.onclick()};
C=function(N){N=e[N];var W=G("dl",q),da={},kb;for(kb in N){var ac=N[kb],jm=G("dt",W,"\u2b9e "+ac.brief,"padding-left:10px;height:auto");da.Ma=G("dd",W,""+ac.detail,"padding-left:10px;display:none;margin-top:4px;margin-left:21px;padding-bottom:6px");jm.onclick=function(Gg){return function(){"none"==Gg.Ma.style.display?Gg.Ma.show():R(Gg.Ma)}}(da);da={Ma:da.Ma}}};J=[function(){return B("TECHNOLOGIES")},function(){return B("UNITS")},function(){return B("BUILDINGS")},function(){return v("ITEMS")},function(){return v("COMMANDS")},
function(){return C("How to ...")},function(){return C("What is ...")},function(){var N=e.HOTKEYS,W="<br>",da;for(da in N)W+=da+' \ud83e\udc26<span style="color:#fff1c6;margin-left:7px">'+N[da]+"</span><p>";q.innerHTML=W}];I="";for(T={aa:0};T.aa<u.length;T={aa:T.aa},T.aa++)V=G("button",t,"","background-position-y:"+45*-T.aa+"px"),V.onclick=function(N){return function(){for(var W=t.children,da=0;da<W.length;da++)W[da]==this?this.className="active":W[da].className="";I=f[u[N.aa]];k.innerHTML=I;q.innerHTML=
"";l.innerHTML="";J[N.aa]()}}(T),V.onmouseenter=function(N){return function(){k.innerHTML=f[u[N.aa]]}}(T),V.onmouseout=function(){k.innerHTML=I};t.children[1].onclick();X.a=0})}window.showGuide=Me;
function Pe(){var b,c,d,e,f,g,k,l,t,q;return xa(function(u){if(1==u.a)return b=Tc("",2),b.id="changelog",L("p",b,536,"font-size:29px;margin-top:0px;border-bottom:1px solid"),qa(u,fetch("nehhon/changes.txt"),2);if(3!=u.a)return c=u.c,qa(u,c.text(),3);d=u.c;e=d.split("##");for(f=1;f<e.length;f++)for(g=e[f].split("\n"),k=g[0].substr(0,3),(l=g[0].split(" ")[1])&&(l=" - "+l),G("span",b,"v"+k/10+(l||"")),t=G("ul",b),q=1;q<g.length-1;q++)G("li",t,g[q]);u.a=0})}
window.writeProps=function(b,c,d,e,f,g,k,l,t){var q="";g&&(q+="<span>"+K(g)+"</span>");k&&(q+="<span>"+K(k)+"</span>");if(l){q+='<span class="red">'+K(67)+": ";g=ic(A[5](),l);for(k=0;k<l;k+=2)q+=K(g[k]),q+="<span class='icd1' style='background-position-y:"+48*g[k+1]+"px'></span>",k+2<l&&(q+=", ");q+="</span>"}if(b||c||d||e||t)q+="<span>",b&&(q+=b+"<img class='resource' src='nehhon/gold.gif' /> "),c&&(q+=c+"<img class='resource' src='nehhon/wood.gif' /> "),d&&(q+=d+"<img class='resource' src='nehhon/food.gif' /> "),
e&&(q+=e+"<img class='resource' src='nehhon/stone.gif' /> "),t&&(q+=t+"<img class='resource' src='nehhon/mana.webp' /> "),q+="</span>";f&&(q+="<span class='shotcut'>"+String.fromCharCode(f).toUpperCase()+"</span>");ld.innerHTML=q};function Ee(){if(!Ua)A[40](this.ab)}function Fe(){A[151](this.ab);ld.innerHTML=""}function De(b){A[15](this.ab,b.button);this.style.transform="translate(0px,0px)"}function Ce(){this.style.transform="translate(2px,2px)"}var Qe;
window.qmenu=function(b,c,d,e,f,g,k,l,t,q,u,v){if(!O)if(g=n("dataMenu"),void 0==b)g&&(Vc(g),clearInterval(Qe),Qe=0);else{if(g){var w=g;w.innerHTML=""}else w=Tc("",0,"font-size:15px"),w.id="dataMenu",Qe&&clearInterval(Qe),Qe=setInterval(function(){return A[238](1)},1E3);L("div",w,574,"margin-bottom:16px;color:var(--color1)");g=["gold","wood","food","stone","pop"];b=[b,c,d+f,e,k];c=H("div",w,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");
for(d=0;5>d;d++)G("div",c,b[d],"min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;background:url(nehhon/"+(g[d]+".gif) no-repeat;"));L("div",w,575,"margin-top:32px;margin-bottom:16px;color:var(--color1)");c=H("div",w,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");b=[l,t,q,u];for(l=0;4>l;l++)G("div",c,Re(b[l]/40,2)+"/s","min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;background: url(nehhon/"+
(g[l]+".gif) no-repeat;"));L("div",w,650,"margin-top:36px;margin-bottom:16px;color:var(--color1)");l=hc();t=H("div",w,"display: grid;\n    grid-template-columns: repeat(6,auto);\n    justify-items: center;\n    align-items: center;\n        padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");G("div",t);G("div",t);for(q=0;4>q;q++)G("img",t).src="nehhon/"+g[q]+".gif";for(g=0;g<v;g+=7)for(q=g%14?"color:#ffe9a5":"",
H("div",t,"width:4px;background:"+Xc(l[g])+";border-radius:1px;height:16px;"),G("div",t,Wc(l[g+2],l[g+1]),"margin-left:3px;min-width:152px;justify-self:left;"+q),u=0;4>u;u++)G("div",t,Se(l[g+3+u]),"text-align:center;min-width:68px;padding:6px 4px;"+q)}};function L(b,c,d,e){return G(b,c,K(d),e,void 0)}function H(b,c,d,e){return G(b,c,"",d,e)}var Je;function Te(){history.pushState("",document.title,window.location.pathname)}
function Ue(b){z.gd||z.u||(ud("index"),Ve(),this.parentNode&&(this.parentNode.style.display="none"),z.f=0,5!=b&&(location.hash="",setTimeout(Te,200)))}var We=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1];
window.waitingList=function(){if(n("waitList")){var b=ub(vb),c=A[28]();n("waitList").innerHTML="";for(var d='<h1 style="font-size: 22px;margin-bottom: 32px;">'+K(68)+'</h1>\n    <table style="font-size:16px;margin:auto;padding-top:12px"><tbody>',e=1;e<c;e++)if(55==b[3*e]){var f=A[29](e);f=Jd(Kd(f,20));d+="<tr><td>"+f+"</td><td>"+b[3*e+1]+"%</td></tr>"}n("waitList").innerHTML+=d+"</tbody></table>";n("waitList").style.textAlign="center";G("button",n("waitList"),K(91),"font-size:18px;margin-top:50px;").onclick=
Zd}};window.waitlistsetup=function(){Tc("").id="waitList"};function Nc(){if(O||"false"===h.nightcycle)d=new Float32Array([1,1,1,1]);else{var b=(.025*z.da/z.zb*24+z.Ab)%24,c=~~b;b-=c;rd&&(rd.style.backgroundPosition="0 -"+36*c+"px");var d=new Float32Array([We[4*c],We[4*c+1],We[4*c+2],We[4*c+3]]);c=(c+1)%24;d[0]+=(-d[0]+We[4*c])*b;d[1]+=(-d[1]+We[4*c+1])*b;d[2]+=(-d[2]+We[4*c+2])*b;d[3]+=(-d[3]+We[4*c+3])*b}c=d;x.useProgram(S);x.uniform4fv(Xe,c);x.useProgram(U);x.uniform4fv(Ye,c)}
var P=0,Q=0,Ze=0,$e=0,af,bf,cf,df,ef;function ff(b,c){var d=yc;if(0!=h.unlimitedZoom||O)P=-b,Q=-c;else{var e=window.innerWidth,f=window.innerHeight,g=A[47](),k=Ua?0:d*m.G/32;b/=32;c/=32;var l=d*e/32;d=d*f/32;e=e/32*Y;f=f/32*Y;var t=b+.5*(e-l),q=c+.5*(f-d);e<g&&f<g&&(t<-k?b=.5*-(e-l)-k:t+l>g&&(b=g-l-(e-l)/2),0>q?c=.5*-(f-d):q+d>g&&(c=g-d-(f-d)/2));P=32*-b;Q=32*-c}A[25](0,0,0)}
function Ke(b){if("touchmove"==b.type||"touchstart"==b.type)if(b.target==n("bigMap"))b=b.targetTouches[0];else return;var c=b.target==n("bigMap")?23:0,d=A[47](),e=b.pageX-Ie.x-c;b=b.pageY-Ie.y-c;var f=Ie.width-2*c;c=Ie.height-2*c;var g=x.canvas.height*c/(32*d);e-=x.canvas.width*f/(32*d)*.5;e=Math.round(.5+e*d/f);b=Math.round(.5+(b-.5*g)*d/c);ff(32*e,32*b);0==Je&&document.removeEventListener("mousemove",Ke)}var gf=0,hf=0,jf={};
function we(b){if(b&&!O&&!gf){var c=!1;if(!n("enterwindow")){var d=Tc('\n            <h2 id="sendMessageH2">'+K(65)+'</h2>\n            <input id="msginputGame" />\n           \n            ',2,"",1);d.parentNode.parentNode.className+=" nobackdrop";d.id="enterwindow";c=!0;var e=G("button",d,"GIF");e.className="gif";e.onclick=function(){R(n("enterwindow").parentNode.parentNode);kf()};G("p",d,K(405)+' <label class="container" style="margin-left:6px;display:inline"><input id="teamchat" type="checkbox"><span class="checkmark"></span></label>',
"text-align:right;color:#c79d45")}d=n("enterwindow").parentNode.parentNode;""!=d.style.cssText||c?(Ua&&n("msgButton")&&(n("msgButton").style.filter="drop-shadow(0px 0px 2px #fff)"),d.style.cssText="",n("msginputGame").focus(),lf.Nb=13):(mf(),R(d),lf.Nb=null,Ua&&n("msgButton")&&(n("msgButton").style.cssText=""))}if(!0===b&&A)A[32](13,!0)}var nf=0,of=0,pf=0,qf=0,rf;function sf(b){if(b||!jf[90])rf=b,x.uniform1i(x.getUniformLocation(U,"hideTrees"),b)}var te=0;function tf(){return"true"==h.wasd}
var lf={37:function(b){qf=b;Ze!=qf+pf&&(af=0,Ze=qf+pf,bf=Date.now(),cf=P)},40:function(b){nf=-b;$e!=nf+of&&(af=0,$e=nf+of,df=Date.now(),ef=Q)},39:function(b){pf=-b;Ze!=qf+pf&&(af=0,Ze=qf+pf,bf=Date.now(),cf=P)},38:function(b){of=b;$e!=nf+of&&(af=0,$e=nf+of,df=Date.now(),ef=Q)},27:function(b){if(b)if(n("playingMenu")&&"none"!=n("playingMenu").parentNode.parentNode.style.display)n("backToGame").onclick();else ye()},13:we,9:function(b){hf||(b?Rc():n("diplomacy")&&Vc(n("diplomacy")))},17:function(b){gf=
b},16:function(b){hf=b},19:function(){},48:function(b){b&&uf(1)},88:function(b){hf?b&&!O&&(b=parseInt(h.stdcolors)?0:1,vf(b),h.stdcolors=b):(ve=b)||M("bigMap")},219:function(b){b&&wf(-1)},221:function(b){b&&wf(1)},226:sf,220:sf,81:function(b){b&&O&&((b=n("rules")&&n("rules").parentNode.parentNode)?n("edsel")||(b.style.cssText?b.style.cssText="":R(b)):Wd())},87:function(b){if(tf())lf[38](b)},68:function(b){if(tf())lf[39](b)},83:function(b){if(tf())lf[40](b)},65:function(b){if(tf())lf[37](b)},120:function(b){b||
("none"==n("msgs1").style.display?ud("msgs1"):(M("msgs1"),eb("Chat hidden")))},115:function(b){b&&(te=(te+1)%4,A[190](te),2==te?M("playersinfo"):3==te?(M("playersinfo"),M("topinfo")):(Bd(n("playersinfo")),ud("topinfo")))},Nb:null};document.oncontextmenu=function(b){return"INPUT"==b.target.nodeName?!0:!1};
function xf(){if(!O){n("attackmenu")&&(M("magicworkshopmenu"),M("tradingmenu"),M("attackmenu"),M("defencemenu"),M("levelmenu"),M("progressone"),M("manamenu"),M("manamenu1"),M("progressmana"),M("plavatar"),id.innerHTML="",dd.innerHTML="",ed.innerHTML="",n("manamenu").innerHTML="",fd.innerHTML="",gd.innerHTML="",jd.innerHTML="",hd.value="",jd.maxLength="");Ua&&(n("delunit").style.display="none");for(var b=0;b<kd.length;kd[b++].innerHTML="");yf()}}window.menuDefect=xf;
function zf(b,c){Af&&(G("li",Af,b,"color:#"+c),Af.scrollTop=Af.scrollHeight)}window.lddsts=function(){var b=G("button",document.body,"STATS","\n    position: fixed;\n    background: #000;\n    padding: 8px;\n    font-size: 20px;\n    width: 209px;\n    text-align: left;\n    border-left: 3px solid #00ff00 !important;\n    top: 66px;\n    right: 0px;\n    box-shadow: 0px 0px 20px #9c0000;"),c=Bf();b.onclick=function(){c.parentNode.parentNode.style.display=""}};
function Re(b,c,d){b=Math.round(b*Math.pow(10,c))/Math.pow(10,c);if(d)return b;b=b.toString().split(".");return b[0]+(b[1]&&"<strong>.</strong>"+b[1]||"")}function Se(b,c){return 1E6<=b?Re(b/1E6,1,c)+"M":1E5<=b?Re(b/1E3,0,c)+"k":1E3<=b?Re(b/1E3,1,c)+"k":b}function Cf(b,c){var d;b?d=b&&Df[b]?Df[b].avatar||113:113:c&&(d=c==A[112]()?h.avatar||113:A[185](c));d||(d=113);return"nehhon/Q"+d+".webp"}var Ef;function Ff(){for(var b=n("stbutts").children,c=0;c<b.length;c++)b[c].className=""}var Gf;
function Hf(b){Ff();F(n("auxtab"));n("stats").style.display="table";b.className="a"}var If;function Jf(b,c){b.style.backgroundPositionY=c+"px"}
function Oe(b,c,d){b=G("div",b);var e=A[90]();b.id="bonustable";for(var f=hc(),g=0;g<e;g++){var k=A[199](g,c,!d);if(k){A[196](g);var l=G("div",b);l.dataset.title=K(Kf.name);Lf(l,Kf.T);l=G("div",b);for(var t={},q=0;q<k;q+=2){var u=f[q],v=f[q+1];t[v]||(t[v]=G("div",G("div",l,"<div>x"+v/100+"</div>",!c&&100>v||c&&100<v?"color:red":"")));v=G("div",t[v]);A[196](u);v.dataset.title=K(Kf.name);Lf(v,Kf.T)}}}}
function Ne(b){var c=A[198](),d=hc(),e=G("table",b);e.id="unittable";var f=[{name:""},{y:18},{y:1},{y:3},{y:6},{y:13},{y:12},{y:17},{y:10},{name:K(559)},{name:K(560)},{name:K(561)},{name:K(562)}];b=f.length;for(var g=G("tr",G("thead",e)),k={W:0};k.W<f.length;k={W:k.W,Oa:k.Oa},k.W++)k.Oa=G("td",g,f[k.W].name),f[k.W].y&&Jf(G("div",k.Oa),-20*f[k.W].y),k.Oa.onclick=function(u){return function(){var v=u.W,w=u.Oa,y,B=0;var C=!0;var J=1;var I=ba(w.parentNode.children);for(y=I.next();!y.done;y=I.next())y=
y.value,y.dataset.order&&(y.dataset.order="");for(r(J);C;){C=!1;I=e.rows;for(y=1;y<I.length-1;y++){var T=!1;var V=I[y].getElementsByTagName("TD")[v];var X=I[y+1].getElementsByTagName("TD")[v];if(0==J){if(V.Ta>X.Ta){T=!0;break}}else if(1==J&&V.Ta<X.Ta){T=!0;break}}T?(I[y].parentNode.insertBefore(I[y+1],I[y]),C=!0,B++):0==B&&1==J&&(J=0,C=!0)}w.dataset.order=J?"\u25b2":"\u25bc"}}(k);f=G("tbody",e);for(g=0;g<c;g+=b){k=G("tr",f);for(var l=0;l<b;l++){var t=G("td",k),q=d[g+l];0==l?(A[196](q),q=K(Kf.name),
t.dataset.title=q,Lf(t,Kf.T),t.Ta=q.charCodeAt(1)+256*q.charCodeAt(0)):(10==l&&(q/=10),t.Ta=q,t.innerHTML=q)}}}function Mf(b,c,d){c=document.createElementNS("http://www.w3.org/2000/svg",c);for(var e in d)c.setAttribute(e,d[e]);b.appendChild(c);return c}
function Nf(b,c,d,e,f){for(var g=Of,k=c.length/d,l=0,t=1024/(k-1),q=6*t,u=Math.ceil(70/q),v=0;v<c.length;v++){var w=c[v];w>l&&(l=w)}v=1E3<l?100:10;v=(l=Math.ceil(l/v)*v)?633/l:0;w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.style.width="1204px";w.style.height="693px";w.setAttribute("viewBox","-90 -30 1204 693");w.setAttribute("width","100%");w.setAttribute("height","100%");b.appendChild(w);G("style",w,"\n.p>line{\n    stroke-width:2;\n    opacity:0.5;\n    pointer-events: none;\n}\n.p>line:hover{\n    opacity:0.5\n}\ncircle{\n    stroke-width:12;\n    stroke:#ffffff00;\n    r:1.5\n}\n.p>text{\n    display:none;\n    text-shadow:0px 0px 3px #000;\n    fill:#52ffba\n}\ntext{\n    stroke:none;\n    font-size:16px;\n}\n\ng:not(.op0) .p:hover > text{\n    display:block;\n}\n.op0{\n    opacity:.15;\n\n}\n.stk>.p>line{\n    stroke-width:3;\n    opacity:1\n}\n.stk>.p>circle{\n    r:1;\n    opacity:1\n}\n");
Mf(w,"line",{stroke:"#fff",x1:0,x2:0,y1:0,y2:633,"stroke-width":1,opacity:.75});Mf(w,"line",{stroke:"#fff",x1:0,x2:1024,y1:633,y2:633,"stroke-width":1,opacity:.75});for(b=0;5>=b;b++){var y=633-126.6*b;b&&Mf(w,"line",{stroke:"#fff",x1:0,x2:1024,y1:y,y2:y,"stroke-width":1,opacity:.25});Mf(w,"text",{x:-8,y:y,fill:"#fff","text-anchor":"end","alignment-baseline":"middle"}).innerHTML=Se(Math.round(b/5*l),1)}l=1;for(b=Math.ceil(10*k/60);l<b;l++){y=l*q;var B=0==l%u;Mf(w,"line",{stroke:"#fff",x1:y,x2:y,y1:0,
y2:633,"stroke-width":1,opacity:B?.25:.1});B&&(Mf(w,"text",{x:y,y:655,fill:"#fff","text-anchor":"middle"}).innerHTML=l+":00")}for(q={S:0};q.S<d;q={S:q.S},q.S++)for(u=Mf(w,"g"),l=g[q.S],u.onmouseover=function(X){return function(){Of[X.S].style.color="#0f0"}}(q),u.onmouseout=function(X){return function(){Of[X.S].style.color=""}}(q),l.Gb=u,l.Sa&&u.setAttribute("class","op0"),l=0;l<k&&l<f;l++){b=q.S*k+l;y=633-c[b]*v;B=l*t;var C=Mf(u,"g");C.setAttribute("class","p");var J=e[q.S*If+If-1],I=J>>16&255,T=
J>>8&255;J&=255;I||(I=1);T||(T=1);J||(J=1);var V=(I+T+J)/3;90>V&&(I*=90/V,T*=90/V,J*=90/V);255<I&&(I=255);255<T&&(T=255);255<J&&(J=255);I="rgb("+I+","+T+","+J+")";Mf(C,"text",{x:B,y:y-15,"text-anchor":"middle"}).innerHTML=Math.round(c[b]);Mf(C,"circle",{cx:B,cy:y,fill:I,opacity:l%6?0:1});l<k-1&&l<f-1&&Mf(C,"line",{x1:B,x2:B+t,y1:y,y2:633-c[b+1]*v,stroke:I})}}
function Bf(){var b=If=55+(Pf?2:0),c=A[28]();Ef=new fc(A[184](b),c*b);var d=ub(Ef),e=Xb("",1,"",1);e.id="stsp";e.parentNode.style.cssText="vertical-align:top;padding-top:56px";R(e.parentNode.parentNode);var f=d[b-3],g=d[b-5],k=G("div",e);G("img",k,"","display:inline-block;vertical-align:middle;margin-right:16px;box-shadow:0px 0px 78px red;border:1px solid #ff000070").src=Cf(f,g);g=G("div",k,"","display:inline-block;vertical-align:middle;");G("span",g,"MVP","display:block;font-size:20px;color:#ffffffb3;");
G("span",g,Wc(f,d[b-2]),"font-size:30px;text-shadow:0px 0px 20px red");f=G("div",e);f.id="stbutts";G("button",f,K(466)).onclick=function(){Qf(this,8,1)};G("button",f,K(467)).onclick=function(){Qf(this,8,0,1)};G("button",f,K(465)).onclick=function(){Qf(this,9,0,1)};G("br",f);g=G("button",f,K(468));g.className="a";g.onclick=function(){Hf(this);n("stats").className=""};G("button",f,K(470)).onclick=function(){n("stats").style.minWidth=(Gf||n("stats").getBoundingClientRect().width)+"px";Hf(this);n("stats").className=
"a"};G("button",f,K(522)).onclick=function(){Rf(this)};G("button",f,K(469)).onclick=function(){Qf(this,7,0,0,1,!0)};G("button",f,K(521)).onclick=function(){Qf(this,7,0,1,0,!0)};G("button",f,K(452)).onclick=function(){Qf(this,6,1,1)};G("button",f,K(453)).onclick=function(){Qf(this,10,1,0)};G("button",f,K(464)).onclick=function(){Qf(this,9,1)};f=G("table",e);f.id="stats";var l=G("thead",f);g=G("tbody",f);var t=[{name:478},{name:21},{name:454},{name:455,ob:1},{name:464},{name:452,sub:[{name:58},{name:59}]},
{name:453,ob:1,sub:[{name:58},{name:59}]},{b:"gold.gif",sub:[{b:"gold.gif"},{b:"trade.gif"}]},{b:"wood.gif",sub:[{b:"wood.gif"},{b:"trade.gif"}]},{b:"food.gif",sub:[{b:"food.gif"},{b:"milk.gif"},{b:"food1.gif"},{b:"fish.gif"},{b:"trade.gif"}]},{b:"stone.gif",sub:[{b:"stone.gif"},{b:"trade.gif"}]},{b:"allicons.png",y:96,sa:48,title:477},{b:"icons2.webp",y:-5,sa:20,title:471},{b:"icons2.webp",y:-6,sa:20,title:476},{b:"icons2.webp",y:4,sa:20,title:479},{name:474},{name:475,ob:1},{name:472},{b:"sgold.webp",
title:473},{b:"swood.webp",title:473},{b:"sfood.webp",title:473},{b:"sstone.webp",title:473},{b:"allicons.png",y:95,sa:48,title:232}];Pf&&(t.unshift({name:732}),t.unshift({name:530}));k={};f={};var q=G("tr",l);l=G("tr",l);G("th",q,"","background:none;border:none;min-width:0px;").rowSpan=2;G("th",q,"","background:none;border:none").rowSpan=2;G("th",q,"","background:none").rowSpan=2;for(var u=0;u<t.length;u++){var v=t[u],w=v.name&&K(v.name).split(" ").join("\n")||v.y&&'<span style="background:url(nehhon/'+
v.b+") 0px "+v.y*v.sa+"px;width:"+(v.sd||v.sa)+"px;height:"+v.sa+'px"></span>'||'<img src="nehhon/'+v.b+'">';v.ob&&(f[q.children.length]=1);w=G("th",q,w,u+1==t.length?"width:100%":"");2>u&&Pf&&(G("div",w,"?","position:absolute;right:0px;left:0px;font-size:9px").dataset.title=u?K(734):K(733));v.title&&(w.dataset.title=K(v.title));if(v.sub){var y=G("td",l,"<- ->");y.onclick=Sf;y.Mc=q.children.length-1;y.Rb=v.sub.length+1;y.ra=1;y.Zc=w;for(w=0;w<v.sub.length;w++)y=v.sub[w],k[q.children.length+-3]=1,
v.ob&&(f[q.children.length]=1),G("th",q,y.name&&K(y.name)||'<img src="nehhon/'+y.b+'">',"display:none")}else w.rowSpan=2}t=1+(Pf?2:0);for(l=0;l<c-1;l++)for(u=G("tr",g),G("td",u,"<p>"+(l+1)+"</p>"),G("td",u,'<div style="background:'+Xc(d[l*b+b-1])+'"></div>'+Wc(d[l*b+b-3],d[l*b+b-2])),G("td",u,'<aside style="background-position-y:-'+20*d[l*b+b-4]+'px"></aside>').className="stsrace",v=0;v<q.children.length+-3;v++)w=Se(d[v+l*b]),v!=t||w||(w="\ud83d\udec7"),y=G("td",u,w,k[v]&&"display:none"||""),v==t&&
(y.style.color=A[256](d[v+l*b])?"#0f0":"#f00"),Pf&&!v&&(y.style.color="#0f0"),y.dc=d[v+l*b],d[v+l*b]!=w&&v!=t&&(y.dataset.title=y.dc);b=n("stats").children[0].children[0].children.length;--c;d=n("stats").children[1].getElementsByTagName("td");for(g=3+(Pf?1:0);g<b;g++)if(!(Pf&&6==g||!Pf&&4==g)){k=0;t=q=void 0;l=Infinity;for(u=0;u<c;u++)v=d[u*b+g],w=v.dc,w>k&&(k=w,q=v),w<l&&(l=w,t=v);u=f[g];k&&(q.style.background=u?"#ff000040":"#00ff0040");(l||k)&&q!=t&&(t.style.background=u?"#00ff0040":"#ff000040")}return e}
var Of;
function Rf(b){Ff();F(n("auxtab"));var c=G("div",n("stats").parentNode,"","width:1250px");c.id="auxtab";M("stats");b.className="a";var d=ub(Ef),e=A[28]()-1,f=[K(478),K(464),K(454),K(455),"Gold gathered","Wood gathered","Food gathered","Stone gathered","Population","Peasants",K(477),K(16),K(17),K(18),K(19)];b=G("div",c,"","white-space:break-spaces;margin-top:30px;text-align:left");var g=G("select",c,"","margin:auto;margin-top:15px;display:block;text-transform:uppercase"),k=G("span",c,"","float:right;margin-top:-25px;"),l=
d[0*If+If-13]/15,t=Math.floor(l/6),q=Tf(k,l);q.oninput=function(){var w=parseInt(this.value);10*w/60>=t&&(w=l-1);this.l.innerHTML=ab(1E4*w)};k=60*t/10;q.max=k;q.min=6;q.step=6;q.value=k;q.oninput();k=0;f=ba(f);for(var u=f.next();!u.done;u=f.next())G("option",g,u.value).value=k,k++;for(f=0;f<e;f++)k=G("span",b,Wc(d[f*If+If-3],d[f*If+If-2]),"cursor:url(nehhon/hand.gif),default;display:inline-block;background:#ffffff14;padding:2px 4px 2px 6px;margin-right:7px;margin-bottom:7px;border-left:4px solid "+
Xc(d[f*If+If-1])),k.onclick=Uf,k.onmouseenter=Vf,k.onmouseout=Wf;var v=G("div",c,"","text-align:center");Of=b.children;g.onchange=function(){var w=parseInt(this.value),y=parseInt(q.value)+1;q.value==q.max&&(y=l);for(var B=new Uint32Array(y*e),C=0;C<e;C++)for(var J=ub(new fc(d[C*If+If-11],15*y)),I=0;I<y;I++)B[I+C*y]=J[15*I+w];v.innerHTML="";Nf(v,B,e,d,l)};g.onchange();q.addEventListener("change",function(){return g.onchange()});for(c=0;c<e;c++)if(3<d[c*If+If-12]&&d[c*If+If-5]!=A[112]())Of[c].onclick()}
function Vf(){this.Gb.setAttribute("class","stk")}function Wf(){this.Gb.setAttribute("class",this.Sa?"op0":"")}function Uf(b){this.Sa=!this.Sa;this.style.opacity=this.Sa?"0.3":"";this.Gb.setAttribute("class",this.Sa?"op0":"");if(b)this.onmouseenter()}
function Qf(b,c,d,e,f,g){var k=8!=c&&!g&&6!=c&&10!=c,l=A[90]();Gf||(Gf=1200);var t=ub(Ef);Ff();F(n("auxtab"));var q=G("table",n("stats").parentNode,"","width:"+Gf+"px"),u=G("tbody",q);u.className="tbl2";q.id="auxtab";q=n("stats").children[1].getElementsByTagName("tr");for(var v=0;v<q.length;v++){var w=G("tr",u);G("img",G("td",w)).src=Cf(t[v*If+If-3],t[v*If+If-5]);w.appendChild(q[v].children[1].cloneNode(1))}t=u.children;b.className="a";M("stats");b=ub(Ef);for(u=0;u<t.length;u++){q=ub(new fc(b[u*If+
If-c],l));v=G("td",t[u]);w=0;var y,B={};do{var C=-1;if(g)for(y=0;y<l;y++)q[y]&&(q[y]<q[C]||0>C)&&!B[y]&&(C=y);else for(y=0;y<l;y++)(q[y]>q[C]||0>C)&&!B[y]&&(C=y);y=q[C];var J=q[C];if(!J)break;B[C]=1;var I=A[191](C,d,e,f);if(I){var T=g?ab(J):Se(J);I=G("span",v,"<span>"+T+"</span>",(0>I?"background:url(nehhon/iconunits.webp);":"")+("background-position-y:"+I+"px"));if(g){if(C=A[192](C))I.dataset.title=T+" -> "+ab(J+C)}else T!=J&&(I.dataset.title=J);k&&(w+=J)}}while(y);k&&G("td",t[u],"\u03a3 = "+w,"color:var(--color1)")}}
function Sf(){var b=A[28](),c=n("stats").children[0].children[0].children,d=c.length,e=n("stats").children[1].getElementsByTagName("td"),f=this.ra?"":"none";this.innerHTML=this.ra&&"-> &nbsp; <-"||"<- ->";this.colSpan=this.ra?this.Rb-1:1;for(var g=this.Mc,k=0;k<this.Rb;k++){k?c[g+k].style.display=f:this.ra?R(c[g+k]):c[g+k].style.display="";for(var l=0;l<b-1;l++)k?e[l*d+g+k].style.display=f:this.ra?R(e[l*d+g+k]):e[l*d+g+k].style.display=""}this.ra=!this.ra}var Xf,Yf;
window.popAlert=function(b){if(4==b){if(Xf&&8E3>Date.now()-Xf)return;Xf=Date.now()}else{if(Yf&&30>Date.now()-Yf)return;Yf=Date.now()}if(b=n(["gold","wood","food","stone","pop"][b]))b=b.getBoundingClientRect(),b=G("div",document.body,"","left:"+(b.x+b.width/2)+"px;top:"+b.y+"px;"),b.className="alertpop",setTimeout(F,3E3,b)};
window.dmgAlert=function(b,c){var d=m.fa,e=m.ga;qc("attack");Ua&&(ve||(setTimeout(function(){n("minimapb").style.cssText=""},8E3),n("minimapb").style.cssText="animation:dmganimdrop .15s alternate infinite;"),Zf=$f=d=ag(),e=(window.innerHeight-d)/2,d=(window.innerWidth-d)/2,"vibrate"in navigator&&window.navigator.vibrate([200,50,200,50,200]),r(d,e));var f=A[47]();b=G("div",document.body,"","left:"+(~~(b*$f/f)+d)+"px;top:"+(~~(c*$f/f)+e)+"px");b.className="alertdmg";Ua&&!ve&&R(b);setTimeout(F,12E3,
b)};window.locationAlert=function(b,c,d,e,f){var g=A[47]();if(!(0>b||0>c||b>=g||c>=g||6<document.body.getElementsByClassName("alertloc").length||Ua)){qc("chat%20location");var k=m.fa,l=m.ga;bg(0,1,d,0,e,f);d=G("div",document.body,"","left:"+(~~(b*$f/g)+k)+"px;top:"+(~~(c*$f/g)+l)+"px");d.className="alertloc";setTimeout(F,1E4,d);r(b,c)}};document.onkeydown=function(b){return b.ctrlKey&&b.shiftKey?!1:!(-1<[116,115,123].indexOf(b.keyCode))};var cg=[9,112,113,114,115,116,117,118,119,120,121,123];
function dg(){for(var b=Object.keys(jf),c=0;c<b.length;c++)jf[b[c]]&&eg({keyCode:b[c]})}
function fg(b){var c=b.keyCode,d=b.target==n("msginputGame");if("INPUT"!=b.target.tagName&&"TEXTAREA"!=b.target.tagName&&"true"!=b.target.contentEditable||d)if(d&&9==c&&(n("teamchat").checked=!n("teamchat").checked),(b.ctrlKey&&!d||b.altKey||0<=cg.indexOf(c))&&b.preventDefault(),!(!z.u||13!=c&&n("enterwindow")&&"displayblock"==n("enterwindow").className||d&&13!=c||8==c&&!parseInt(h.delkey))){jf[c]=1;if(lf[c]&&(lf[c](1),(87==c||83==c||68==c||65==c)&&tf()))return;A&&A[32](c,!0)}}
function eg(b){var c=b.keyCode;if(jf[c]){jf[c]=0;(b.ctrlKey||b.altKey||0<=cg.indexOf(c))&&b.preventDefault();r(b.keyCode);if(lf[c]&&(lf[c](0),(87==c||83==c||68==c||65==c)&&tf()))return;A&&A[32](c,!1)}}window.addEventListener("blur",function(){if(A&&A[32])A[32](16,!1)});var gg,hg,ig,jg,kg=!1;function lg(b,c){mg||(P=ig-(gg-b)*yc,Q=jg-(hg-c)*yc,ff(-P,-Q),ng())}var mg,og,pg,qg,rg,sg;function tg(b,c){return 30>Math.sqrt(Math.pow(b-gg,2)+Math.pow(c-hg,2))}
function ug(b){if(b.target==x.canvas){vg=wg=$e=Ze=0;var c=b.changedTouches[0],d=c.pageX;c=c.pageY;1==b.touches.length&&qg&&300>Date.now()-qg&&tg(d,c)?(A[21](d,c,0),rg=!0):(qg=Date.now(),1<b.touches.length?clearTimeout(sg):A[168]()||(clearTimeout(sg),sg=setTimeout(A[22],350,d,c,2,1,0,0,1),r(sg)),ig=P,jg=Q,gg=d,hg=c,b.preventDefault())}}var xg,yg,zg,wg,vg;
function Ag(b){var c=b.touches[0].pageX,d=b.touches[0].pageY;if(b.target==x.canvas){var e=A[168]();tg(c,d)||clearTimeout(sg);if(rg||e)return A[25](c,d,1);2==b.touches.length?(c=b.touches,d=Math.sqrt(Math.pow(c[0].pageX-c[1].pageX,2)+Math.pow(c[0].pageY-c[1].pageY,2)),og?uf(pg*og/d,(c[0].pageX+c[1].pageX)/2,(c[0].pageY+c[1].pageY)/2,1):(og=d,pg=yc,mg=!0)):(b=Date.now()-zg,r("t",b),wg=-(xg-c)/b,vg=-(yg-d)/b,xg=c,yg=d,zg=Date.now(),lg(c,d))}}
function Bg(b){if(b.target==x.canvas){var c=b.changedTouches[0].pageX,d=b.changedTouches[0].pageY;clearTimeout(sg);if(A[168]())A[25](c,d,1);var e=tg(c,d)&&300>Date.now()-qg;if(rg||e||A[168]())A[22](c,d,2*b.touches.length,rg?1:2),rg=!1;og=void 0;0==b.touches.length?Date.now()-zg&&(Ze=wg||0,$e=vg||0,cf=P,ef=Q,df=bf=Date.now(),af=1):(c=b.touches[0].pageX,b=b.touches[0].pageY,ig=P,jg=Q,gg=c,hg=b);mg=!1}}
function Cg(b){if(!Ua){var c=window.innerWidth,d=window.innerHeight,e=b.pageX,f=b.pageY;if(b.target==x.canvas){if(kg)return lg(e,f);A[25](b.pageX,b.pageY,1)}if(screen.height-10<=d&&1==h.scrollmouse){if(1.2===Math.abs(Ze)||0===Ze)Ze||(bf=Date.now(),cf=P),af=0,Ze=1.2*((10>e)-(e>c-10));if(1.2===Math.abs($e)||0===$e)$e||(df=Date.now(),ef=Q),af=0,$e=1.2*((10>f)-(f>d-10))}}}
function Dg(b){if(b.target==x.canvas)if(1==b.button&&b.pageX>m.G){kg=!0;var c=b.pageX;b=b.pageY;ig=P;jg=Q;gg=c;hg=b}else kg=!1,A[21](b.pageX,b.pageY,b.button)}function Eg(b){2<b.button&&b.preventDefault();if(b.target==x.canvas)if(kg)kg=!1;else return A[22](b.pageX,b.pageY,b.button,0,!1,b.shiftKey,b.ctrlKey,b.altKey)}window.addEventListener("mouseup",function(b){2<b.button&&b.preventDefault()});var Fg=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){Fg||(Fg=!0,Hg())});
window.fstordprop=function(){};
window.selectMulp=function(b,c,d,e,f,g,k,l,t){Ig(c,d);hd.style.display="block";n(vd?"unitname":"kingdom").innerHTML=b+" "+K(58);t?(fd.innerHTML=t,Jf(fd,-100),ud("levelmenu")):M("levelmenu");g?(dd.innerHTML=g,ud("attackmenu")):M("attackmenu");k?(ed.innerHTML=k,ud("defencemenu")):M("defencemenu");l&&(n("manamenu").style.backgroundPosition="0px -240px",n("manamenu").innerHTML=l,ud("manamenu"));vd&&e&&(gd.innerHTML=Wc(f,A[29](e)),n("plavatar").style.background="url("+Cf(f,e)+")",ud("plavatar"))};
window.updateHealth=function(b){if(n("progressvalue")){var c=n("progressvalue").innerHTML.split("/");c.length&&(n("progressone").value-=b,n("progressvalue").innerHTML=c[0]-b+"/"+c[1])}};
window.selectionOne0=function(b,c,d,e,f,g,k,l,t,q,u,v,w,y,B,C){M("manamenu");M("manamenu1");M("progressmana");e=K(e);b&&c?(n("stock").className="",n("manamenu1").style.display="block",n("manamenu1").style.backgroundPosition="0px -80px",n("manamenu1").innerHTML=b):n("stock").className="blocked";1==f&&d&&c&&(b=Math.floor(25*(d-z.da)/1E3),0<b&&(n("manamenu").style.display="block",n("manamenu").style.backgroundPosition="0px -200px",n("manamenu").innerHTML=b+"s"));gd.style.display="block";id.innerHTML=
e;g||0==f&&!vd?(dd.innerHTML=g,ud("attackmenu")):M("attackmenu");0==f&&!vd||vd&&k&&0===f||2==f&&k?(ed.innerHTML=k,ud("defencemenu")):M("defencemenu");u&&226==q&&(Jf(n("manamenu1"),-140),ud("manamenu1"),n("manamenu1").innerHTML=u);t&&(n("manamenu").style.display="block",n("manamenu").innerHTML=l,27===q?(n("manamenu1").style.backgroundPosition="0px -280px",ud("manamenu1"),n("manamenu1").innerHTML=l,n("manamenu").style.backgroundPosition="0px -240px",n("manamenu").innerHTML=u):(n("progressmana").value=
~~(100*l/t),ud("progressmana"),n("manamenu").style.backgroundPosition="0px -120px"));B&&(e=n("manamenu1"),74==q&&(y=4),e.style.display="block",e.style.backgroundPosition=["0px -260px","0px -340px","0px -240px","0px -320px","0px -220px"][y]||"",e.innerHTML=B);fd.innerHTML=v;fd.style.display="block";1==f?Jf(fd,-180):Jf(fd,-100);0===v&&(2==f||1==f||0==f&&vd)&&(fd.style.display="none");gd.innerHTML=Wc(C,A[29](w));w&&n("plavatar")&&(n("plavatar").style.background="url("+Cf(C,w)+")",ud("plavatar"));hd.style.display=
"block"};function Jg(b){return b.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,function(){return"*******"})}window.shresmsg=function(b,c,d){var e=K(b?451:533);b&&(e+=" -> ");if(d||c)e=Kg(e,Wc(d,c));c=G("li",n("msgs1"),e);for(d=0;4>d;d++)b&1<<d&&(Zc(c,d).style.cssText="margin-left:8px;margin-bottom:-1px");Lg()};
window.cnsoSPmsg=function(b,c,d){b=K(b);if(d||c)b=Kg(b,Wc(d,c));n("msgs1").innerHTML+="<li>"+b+"</li>";Lg()};window.cnsoSP2msg=function(){G("li",n("msgs1")).textContent=Qd;Lg()};function Jd(b){for(var c,d="",e=0;c=b[e++];)d+=String.fromCharCode(c);return d}function Ig(b,c){0>b?(hd.value=100,hd.max=100,jd.innerHTML=K(40)):(hd.value=b,0>c?(hd.max=100,hd.value=1):hd.max=c,jd.innerHTML=~~b+"/"+c)}window.showHealthOne=Ig;function ng(){}var Mg,Ng,Og,Pg,Qg,yc=1,x,Rg;function gc(b,c){return new Uint32Array(window.wasmMemory.buffer,b,c)}function Sg(b,c){return new Float32Array(window.wasmMemory.buffer,b,c)}function ic(b,c){return new Int32Array(window.wasmMemory.buffer,b,c)}function Tg(b,c){return new Int8Array(window.wasmMemory.buffer,b,c)}function Kd(b,c){return new Uint16Array(window.wasmMemory.buffer,b,c)}function Ug(b,c){return new Uint8Array(window.wasmMemory.buffer,b,c)}
function yf(){if(!O){for(var b=md.wc.length=0,c=kd.length;b<c;b++){var d=kd[b];d.className="blocked";d.style.background="none";d.innerHTML=""}md.Eb.className="blocked";md.qb.className="blocked";md.ic.className="blocked";md.qd=1}}window.cleanMenuIcons=yf;
window.buttonSetup=function(b,c,d,e,f){if(b=kd[b])b.style.cssText="background-position:0px "+48*c+"px;"+(f&&"background-image:url(nehhon/iconunits.webp)"||""),d&&(b.className=""),0<e&&(c="",1073741824<e&&(1073741825<e&&(c=e-1073741824+"x"),e="<span><span>"+c+"</span>\u221e</span>"),Vg(b,e))};var Ye,U,S,Wg,Xe,Xg,Yg,Zg,$g,ah,bh,ch,dh,eh,fh,gh,hh,ih,jh,kh,lh,mh,nh;
window.gameOver=function(){Bc();Tc('<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>F</h2><p>'+K(386)+" "+K(387)+"</p>",1).id="F"};window.playerWon=function(){Bc();Tc('<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>'+K(388)+" "+K(389)+"</h2>",1).id="F"};
function oh(b,c){var d=4*Qg,e=x.createBuffer();e.size=c;e.ed=d;x.bindBuffer(x.ARRAY_BUFFER,e);x.enableVertexAttribArray(b);x.vertexAttribPointer(b,c,x.FLOAT,!1,0,0);x.bufferData(x.ARRAY_BUFFER,d*c,x.STATIC_DRAW);Xa?ph.vertexAttribDivisorANGLE(b,1):x.vertexAttribDivisor(b,1);return e}
function qh(b,c){var d=c+4E4;c*=4;d*=4;if(Xa)x.bindBuffer(x.ARRAY_BUFFER,b),x.bufferData(x.ARRAY_BUFFER,d*b.size,x.STATIC_DRAW),A[146]();else{var e=x.createBuffer();x.bindBuffer(x.COPY_READ_BUFFER,b);x.bindBuffer(x.ARRAY_BUFFER,e);x.bufferData(x.ARRAY_BUFFER,c*b.size,x.STATIC_DRAW);x.copyBufferSubData(x.COPY_READ_BUFFER,x.ARRAY_BUFFER,0,0,c*b.size);x.bindBuffer(x.COPY_READ_BUFFER,e);x.bindBuffer(x.ARRAY_BUFFER,b);x.bufferData(x.ARRAY_BUFFER,d*b.size,x.STATIC_DRAW);x.copyBufferSubData(x.COPY_READ_BUFFER,
x.ARRAY_BUFFER,0,0,c*b.size);x.bindBuffer(x.COPY_READ_BUFFER,null);x.deleteBuffer(e)}}
function vf(b){b=Ug(A[17](b),4*(A[28]()+16));x.activeTexture(x.TEXTURE4);var c=x.createTexture();x.bindTexture(x.TEXTURE_2D,c);if(Xa){for(var d=new Uint8Array(4*Math.pow(64,2)),e=0;e<d.length;e++)d[e]=b[e];x.texImage2D(x.TEXTURE_2D,0,x.RGBA,64,64,0,x.RGBA,x.UNSIGNED_BYTE,d)}else x.texImage2D(x.TEXTURE_2D,0,x.RGBA,b.length/4,1,0,x.RGBA,x.UNSIGNED_BYTE,b);rh();x.bindTexture(x.TEXTURE_2D,null);x.bindTexture(x.TEXTURE_2D,c);x.uniform1i(x.getUniformLocation(U,"colorArray"),4);x.activeTexture(x.TEXTURE2)}
window.setupColorGL=vf;window.scrSetup=function(b,c){ff(Math.floor(b-x.canvas.width/2),Math.floor(c-x.canvas.height/2));ng()};
function sh(b,c){return p[8]?"if(u_circle0.z>0.0){\n     \n        float ct=(now-u_circle0.w);\n        if(ct>u_circle1.w) ct=1.0; else ct/=u_circle1.w;\n        if(ct<0.0) ct=0.0;\n        \n\n            \n    "+(c?"\n    {\n    vec2 cx=u_circle0.xy+u_circle1.xy;\n    float d=distance(xy,cx),r=u_circle0.z+u_circle1.z+32.0,g=32.0,g2=g/2.0;\n    if(d<r&&d>r-g) "+b+".rgb+=vec3(0.5*abs(cos(now*0.005)),0,0)*(1.0-abs(d-(r-g2))/(g2));\n        \n    }":"")+"\n\n\n\n    vec2 cx=vec2(u_circle0.xy+u_circle1.xy*ct);\n    float d=distance(xy,cx),r=u_circle0.z+u_circle1.z*ct,grad=128.0;\n    if(d>r){\n    \n        vec3 iv="+
b+".rgb;\n        float v=0.3*(1.0+cos("+(c?"d*0.08+now*0.005":"d*0.08+now*0.005+.9")+"))+.4;\n        vec3 v3=vec3(v,0.0,0.0);\n        float r=(d-r)/grad;\n        if(r>1.0) r=1.0;\n        "+b+".rgb=iv*v3*r+(1.0-r)*"+b+".rgb;\n    \n    }\n\n    }":""}function th(){var b=window.devicePixelRatio;1>b&&(b=1);return b}var Xa,Ya,uh;
window.setupGL=function(b,c){Ya=c;yc=1;x.getError()===x.CONTEXT_LOST_WEBGL&&(x=x.canvas.getContext("webgl2",{antialias:!1,alpha:!1}),r("restored"));var d=parseInt(h.fogRefresh);Xa&&3==d&&(d=2);uh=3==d&&c;if(!vh){Y=parseFloat(h.antialiasing2)||1;wh=1<Y;var e=Math.round(25*parseInt(h.pixelDensity1/25))/100||th();1>e&&(Y=1,wh=!1);e&&!wh&&(x.canvas.style.width="100%");Y*=e;U=x.createProgram();S=x.createProgram();e=p[8];var f=p[43];e&&(xh=1E3*p[14]);e=e?"\n    uniform vec4 u_circle0;\n    uniform vec4 u_circle1;\n    uniform float now;\n    ":
"";var g="texture";Xa&&(g="texture2D");f=c?"float fogval(vec2 xy){\n    float v="+g+"(fogMap,xy).r*255.0+"+g+"(fogMap,xy).a*2550.0;\n    "+(f?"if(v==0.0) v=1.0;":"")+"\n    return v;\n    }":"";g=Xa?"precision highp float;\nattribute vec3 a_position;\nattribute vec4 a_texCoord;\nattribute vec4 a_physic;\nattribute vec4 a_margins;\nattribute float a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D u_image1;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\nuniform float mapSize;\nuniform mediump int hideTrees;\nuniform float TSIZE;\n\nuniform float zMax;\nvarying highp vec2 vTextureCoord;\nvarying vec4 v_kcolor;\nvarying float WIDTH;\nvarying float rColor;\nvarying float oy;\n\n\nfloat delayr(float pos){\nhighp vec2 xy = vec2(mod(pos,128.0) ,   floor(pos/128.0) )/128.0;\nreturn (texture2D(delay, xy).r);\n}\n\n\nvoid main() {\n    float t;\n    highp float jump=0.0;\n\n    highp vec2 txtcord;\n    txtcord.y=floor(a_texCoord.x);\n    txtcord.x=a_texCoord.x-txtcord.y;\n    txtcord.y/=TSIZE;\n\n    float zcol=a_texCoord.z;\n    vec2 sizes = vec2(a_margins[0],a_margins[1]);\n    if(miniMap==1){\n        if(128.0*sizes.x/(32.0*mapSize)<1.0&&zcol!=4.0) sizes.x = 32.0*mapSize/128.0;\n        if(128.0*sizes.y/(32.0*mapSize)<1.0&&zcol!=4.0) sizes.y = 32.0*mapSize/128.0;\n    } \n\n    float pack=floor(a_texCoord[3]);\n\n\n    float frames=floor((pack)/65536.0);\n    float fps=mod(pack,65536.0);\n\n    if(frames>100.0) {\n        if(frames<200.0) rColor=1.0; else rColor=2.0;\n        frames-=100.0;\n    }\n\n\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=floor(t * fps*0.001);\n}else{\n\n    //fps=12.0;\n    //jump=floor(t * fps*0.001);\n\n\n\n    float index=floor(fps-100.0);\n\n    float spt= mod(t,delayr(frames-1.0+index));\n    bool stop=false;\n        for(int i=0;i<55;i++){\n        if(!stop){\n        jump=float(i);\n        if(jump<frames)\n        if(delayr(jump+index)>spt)\n        stop=true;\n        }\n        }\n\n}\n\njump=mod(jump,frames);\ntxtcord.x+=jump*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n}\n\n\n    vec2 mxy=vec2(0.0);\n\n    if(miniMap==3){\n        if(a_margins[3]==0.0){\n            sizes=vec2(0.0);\n            return;\n        }else{\n        mxy=sizes/2.0;\n        sizes=vec2(a_margins[3]*32.0);\n        mxy+=-sizes;\n        sizes=sizes*2.0+1.0;\n        }\n    }\n\n    float scale=1.0;\n    if(a_margins.z<-1.0){\n    scale=-a_margins.z;\n    }\n\n\n    oy=txtcord.y*TSIZE;\n\n\n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n        tsizes=vec2(64.0)*scale;\n    }else sizes/=scale;\n    WIDTH=tsizes.x;\n\n    if(a_step==1.0||a_step==3.0){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2.0||a_step==3.0){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n    if(miniMap==3&&sizes==vec2(0.0)){\n        mxy=vec2(0.0);\n    }\n\n\tfloat z=a_position.z;\n\n\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\n    if(miniMap<2) mxy*=0.0;\n\t}\n\n\n\nif(a_margins.z>0.0){\n\tfloat s = sin(a_margins.z-10.0);\n\tfloat c = cos(a_margins.z-10.0);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n\n    mxy.y+=physicY;\n\nvec2 res=u_resolution;\nif(miniMap!=0){\n    z=-1.0;\n    res=vec2(mapSize*32.0);\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\nWIDTH*=-1.0;\nmxy*="+
Y.toFixed(4)+";\n}\n\n    if(hideTrees==1&&(zcol==4.0||zcol==7.0)||miniMap==1&&zcol==15.0) return;\n\n   gl_Position = vec4(((a_position.xy+mxy) / res * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\n\n\n\nvec4 outColor=texture2D(colorArray,vec2(zcol/64.0,0));\n//outColor=vec4(1.0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n":"#version 300 es\nprecision highp float;\n\nin vec3 a_position;\nin vec4 a_texCoord;\nin vec4 a_physic;\nin vec4 a_margins;\nin uint a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform mediump int hideTrees;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\nuniform float mapSize;\nuniform float TSIZE;\n\n\nuniform float zMax;\nout highp vec2 vTextureCoord;\nout vec4 v_kcolor;\nout float oy;\nout float WIDTH;\n\n"+
(uh&&"out vec2 oriXY;"||"")+"\n\n\nflat out int rColor;\n\nvec4 superArray(in highp int position) {\n     return vec4(0.0);\n}\n\nvoid main() {\nfloat t;\n\nhighp vec2 txtcord;\ntxtcord.y=floor(a_texCoord.x);\ntxtcord.x=floor((a_texCoord.x-txtcord.y)*TSIZE);\n//txtcord.y/=TSIZE;\n\nfloat zcol=a_texCoord.z;\n\nvec2 sizes = vec2(a_margins[0],a_margins[1]);\nif(miniMap==1){\n    if(128.0*sizes.x/(32.0*mapSize)<1.0&&zcol!=4.0) sizes.x = 32.0*mapSize/128.0;\n    if(128.0*sizes.y/(32.0*mapSize)<1.0&&zcol!=4.0) sizes.y = 32.0*mapSize/128.0;\n} \nint pack=int(floor(a_texCoord[3]));\n\nint frames=(pack>>16)&0xffff;\nfloat fps=float(pack&0xffff);\n\n\nif(frames>100) {\nif(frames<200) rColor=1; else rColor=2;\nframes-=100;\n}\n\nint jump=0;\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=int(floor(t * fps*0.001));\n}else{\n\n\nint index=int(floor(fps-100.0));\n\nfloat spt= mod(t,texelFetch(delay, ivec2(frames-1+index, 0), 0).r);\n\nfor(jump=0;jump<frames;jump++)\nif(texelFetch(delay, ivec2(jump+index, 0), 0).r>spt){\nbreak;\n}\n\n\n\n\n}\n\njump=(jump%frames);\n\n\ntxtcord.x+=float(jump)*sizes.x*sizes.y;\ntxtcord.y+=floor(txtcord.x/TSIZE);\ntxtcord.x=mod(txtcord.x,TSIZE);\n}\n\n\n\n}\n\nvec2 mxy=vec2(0.0);\nvec2 posORI;\n"+
(uh&&"\n    if(miniMap==3){\n        if(a_margins[3]==0.0){\n            sizes=vec2(0.0);\n            return;\n        }else{\n        //mxy=sizes/2.0;\n        int sight=int(a_margins[3]);\n        sizes=vec2(32*(sight&0xff)"+(1==c&&"+16"||"")+");\n        float mg=float((sight>>8)&0xff);\n        float my=floor(mg/10.0);\n        posORI=+32.0*vec2(mg-my*10.0,my)+vec2(16)  -(a_position.xy-32.0*floor(a_position.xy/32.0));\n        mxy+=posORI;\n        mxy+=-sizes;\n        sizes=sizes*2.0;\n        }\n    }\n    "||
"")+"\n\n    float scale=1.0;\n    if(a_margins.z<-1.0){\n    scale=-a_margins.z;\n    }\n\n\n\n    oy=txtcord.y;\n\n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n         tsizes=vec2(64.0)*scale;\n    }\n    else sizes/=scale;\n\n    WIDTH=tsizes.x;\n\n    if(a_step==1u||a_step==3u){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x;\n    }\n\n    if(a_step==2u||a_step==3u){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y;\n    }\n\n\n\n\tfloat z=a_position.z;\n\n\n\n\nif(miniMap==3&&sizes==vec2(0.0)){\n    mxy=vec2(0.0);\n}\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\nif(miniMap!=2) mxy*=0.0;\n\t}\n\n\n\n\n\n\nif(a_margins.z>0.0){\n    float deg=a_margins.z-10.0;\n\tfloat s = sin(deg);\n\tfloat c = cos(deg);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n   \n    float physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n    vec2 vxy=vec2(a_physic.x * t,physicY);\n    mxy+=vxy;\n\n    vec2 res=u_resolution;\n\nif(miniMap==1||miniMap==2){\n    z=-1.0;\n    res=vec2(mapSize*32.0);\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nWIDTH*=-1.0;\nzm=vec2(1.0,-1.0);\nmxy*="+
Y.toFixed(4)+";\n}\n\n\nif(hideTrees==1&&(zcol==4.0||zcol==7.0)||miniMap==1&&zcol==15.0||zcol==8.0) return;\n\n   gl_Position = vec4(((a_position.xy+mxy) / res * 2.0 - 1.0)*zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\n\nvec4 outColor=texelFetch(colorArray, ivec2(zcol, 0), 0);\n\n\n"+(uh&&"oriXY=(a_position.xy)+posORI+vxy;"||"")+"\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n";var k=x.createShader(x.VERTEX_SHADER);x.shaderSource(k,g);x.compileShader(k);var l=x.createShader(x.FRAGMENT_SHADER);
x.shaderSource(l,Xa?"precision highp float;\n        uniform float zoom;\n        uniform vec2 u_translation;\n        uniform float mapSize;\n        uniform sampler2D fogMap;\n        uniform float TSIZE;\n\nuniform vec2 u_resolution;\nuniform sampler2D img_common[8];\nuniform vec4 u_ambient;\n"+(c&&"uniform float miniMapSize;"||"")+"\nuniform vec2 minimapMargin;\n\nuniform mediump int miniMap;\nvarying vec4 v_kcolor;\nvarying highp vec2 vTextureCoord;\nvarying float WIDTH;\nvarying float oy;\nvarying float rColor;\n\n"+
f+"\n\n"+e+"\n\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture2D(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture2D(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture2D(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture2D(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture2D(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture2D(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture2D(img_common[6], coords);\nelse if(coords.y<8.0)\nreturn texture2D(img_common[7], coords);\n}\n\n\nvoid main() {\n\n    bool free=false;\n    float width=WIDTH;\n    if(width<0.0) width*=-1.0,free=true;\n    vec4 light = u_ambient;\n\n    vec2 xy;\n    if(miniMap!=3){\n\n        \n        if(miniMap==1){\n            xy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n            xy+=minimapMargin/zoom;\n        }else{\n        xy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\n        //xy.y*=-1.0;\n        }\n\n        "+
(c&&"if(miniMap<2&&zoom>0.0&&!free){\n            float div= miniMap==0 ? mapSize*32.0 : miniMapSize;\n            float fog=fogval(xy/div);\n            if(fog==0.0) discard;\n            \n            float mulp=1.0,mulp2=1.0;\n\n            if(miniMap==0){\n            vec2 dec=xy/32.0, cnt=floor(dec)+.5;\n            float sq8[16];\n            sq8[0]=1.0;sq8[1]=0.0;sq8[2]=0.0;sq8[3]=-1.0;sq8[4]=-1.0;sq8[5]=0.0;sq8[6]=0.0;sq8[7]=1.0;sq8[8]=1.0;sq8[9]=1.0;sq8[10]=1.0;sq8[11]=-1.0;sq8[12]=-1.0;sq8[13]=-1.0;\n            sq8[14]=-1.0;sq8[15]=1.0;\n\n            for(int i=0;i<8;i++){\n            vec2 pos=dec+vec2(sq8[i*2],sq8[i*2+1]);\n            float g=fogval(pos/mapSize);\n            if(fog>0.0&&g==0.0||fog>1.0&&g==1.0){\n                vec2 ori=cnt+vec2(sq8[i*2],sq8[i*2+1])*.5;\n                vec2 dif=ori-dec;\n                if(sq8[i*2]==0.0)   dif.x=0.0;\n                if(sq8[i*2+1]==0.0) dif.y=0.0;\n                float dist=sqrt(dot(dif,dif));\n                if(dist<1.0){\n                    if(fog>0.0&&g==0.0) mulp*=dist;\n                    else mulp2*=dist;\n                }\n            }\n            }\n            \n            if(mulp2<1.0) mulp2+=.4;\n            if(mulp2>1.0) mulp2=1.0;\n        \n\n          \n            "+
(2==c&&"light.rgb*=mulp2;if(fog==1.0) light.rgb*=.4;"||"")+"\n        }\n            light.rgb*=mulp;\n            }"||"")+"\n\n\n\n        \n\n    }\n\n\nif(miniMap==0){\n\n\n    float dy=floor(vTextureCoord.y*TSIZE-oy);\n    highp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/TSIZE,oy/TSIZE);\n    txtCoords.y+=floor(txtCoords.x)/TSIZE;\n\n    vec4 color=tcmm(txtCoords);\n    //if(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\n    if(rColor==2.0) color.a=(color.r+color.g+color.b)/2.5;\n    if(color.a==0.0) discard;\n\nif(rColor==1.0 &&color.r==color.g&&color.r==color.b)\ncolor.rgb*=v_kcolor.rgb*1.4;\n\n\nif(v_kcolor.a>1.0) color*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n\nif(!free){\n"+
sh("light")+"\n    }\n\n//vec4 light=vec4(1.0);\n\ngl_FragColor=color*light;\n}else if(miniMap<3){\n\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\ngl_FragColor=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\ngl_FragColor=v_kcolor;\n\n\ngl_FragColor*=light;\n}else{\ngl_FragColor=vec4(1.0);\n    }\n\n}":"#version 300 es\nprecision highp float;\n\n\nuniform vec2 u_translation;\nuniform sampler2D fogMap;\n\n"+(uh&&"uniform sampler2D frmBUFFER;"||"")+"\n"+(uh&&"in vec2 oriXY;"||"")+
"\n\nuniform vec2 u_resolution;\nuniform sampler2D img_common[8];\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nuniform float mx;\n\n"+e+"\n\nuniform float mapSize;\nuniform float zoom;\n"+(c&&"uniform float miniMapSize;"||"")+"\nuniform float TSIZE;\nuniform vec2 minimapMargin;\n\nin vec4 v_kcolor;\n\nin highp vec2 vTextureCoord;\nin float WIDTH;\nin float oy;\nflat in int rColor;\nout vec4 COLOR;\n\n"+f+"\n\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords1){\n\nint TSIZEI=int(TSIZE);\n\nivec2 coords=ivec2(int(coords1[0])%TSIZEI,int(coords1[1]));\nint Y=coords.y;\ncoords.y%=TSIZEI;\n\nif(Y<TSIZEI)\nreturn texelFetch(img_common[0], coords,0);\nelse if(Y<2*TSIZEI)\nreturn texelFetch(img_common[1], coords,0);\nelse if(Y<3*TSIZEI)\nreturn texelFetch(img_common[2], coords,0);\nelse if(Y<4*TSIZEI)\nreturn texelFetch(img_common[3], coords,0);\nelse if(Y<5*TSIZEI)\nreturn texelFetch(img_common[4], coords,0);\nelse if(Y<6*TSIZEI)\nreturn texelFetch(img_common[5], coords,0);\nelse if(Y<7*TSIZEI)\nreturn texelFetch(img_common[6], coords,0);\nelse if(Y<8*TSIZEI)\nreturn texelFetch(img_common[7], coords,0);\n}\n\n\n\nvoid main() {\n\nvec4 light = u_ambient;\nbool free=false;\nfloat width=WIDTH;\nif(width<0.0) width*=-1.0,free=true;\n\nvec2 xy;\nif(miniMap==1){\nxy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\nxy+=minimapMargin/zoom;\n}else{\nxy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\n//xy.y*=-1.0;\n    }\n\n    "+
(uh&&"if(miniMap==3){\n    vec2 xy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\n\n    float dist=2.0*distance(xy,oriXY);\n    if(dist>width) discard;\n    const float tr=64.0;\n\n    if(width-dist<tr)\n    COLOR=vec4(width-dist)/tr;\n    else\n    COLOR=vec4(1.0);\n    \n    return;}"||"")+"\n\n\n\n"+(c&&"if(miniMap<2&&zoom>0.0&&!free){\nfloat div= miniMap==0 ? mapSize*32.0 : miniMapSize;\nfloat fog=fogval(xy/div);\n\n\n"+(uh&&"\nfloat Hfog;\n\nif(miniMap==0){\nHfog=texture(frmBUFFER,vec2(gl_FragCoord.x/u_resolution.x,(-u_resolution.y+gl_FragCoord.y)/u_resolution.y)).r;\n"+
(3==c&&"light*=Hfog,1.0;"||"")+"\nif(fog>1.0) fog=1.0;\n}\n"||"")+"\n\nif(fog==0.0"+(uh&&"&&Hfog==0.0"||"")+") discard;\n\n\nfloat mulp=1.0,mulp2=1.0;\nif(miniMap==0){\nvec2 dec=xy/32.0, cnt=floor(dec)+.5;\nconst float sq8[16]=float[](1.0,0.0, 0.0,-1.0, -1.0,0.0, 0.0,1.0, 1.0,1.0,1.0,-1.0, -1.0,-1.0,-1.0,1.0);\nfor(int i=0;i<8;i++){\nvec2 pos=dec+vec2(sq8[i*2],sq8[i*2+1]);\nfloat g=fogval(pos/mapSize);\nif(fog>0.0&&g==0.0||fog>1.0&&g==1.0){\n    vec2 ori=cnt+vec2(sq8[i*2],sq8[i*2+1])*.5;\n    vec2 dif=ori-dec;\n    if(sq8[i*2]==0.0)   dif.x=0.0;\n    if(sq8[i*2+1]==0.0) dif.y=0.0;\n    float dist=sqrt(dot(dif,dif));\n    if(dist<1.0){\n        if(fog>0.0&&g==0.0) mulp*=dist;\n        else mulp2*=dist;\n    }\n}\n}\n\nif(mulp2<1.0) mulp2+=.4;\nif(mulp2>1.0) mulp2=1.0;\n    }\n"+
(2==c&&"if(fog==1.0&&miniMap==0) mulp2*=.4; mulp*=mulp2;"||"")+"\n\n"+(uh&&"\nif(miniMap==0){\nif(Hfog>0.0) mulp=max(Hfog,mulp);\nif(Hfog>0.0&&fog==0.0) mulp=Hfog;\n}\n"||"")+"\n\nlight.rgb*=mulp;\n\n}"||"")+"\n\n\n\n\n\n\n\n\n\n\n//\n\n\n\nif(miniMap==0){\n\n\nfloat dy=floor(vTextureCoord.y-oy);\nhighp vec2 txtCoords=vec2(vTextureCoord.x+dy*width,oy);\ntxtCoords.y+=floor(txtCoords.x/TSIZE);\n\n\nvec4 color=tcmm(txtCoords);\n//if(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\nif(rColor==2) color.a=(color.r+color.g+color.b)/2.5;\nif(color.a==0.0) discard;\n\n\n\nif(rColor==1&&color.r==color.g&&color.r==color.b) color.rgb*=v_kcolor.rgb*1.4;\n\n\nif(v_kcolor.a>1.0)\n{\ncolor*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n}\n\n\n\nCOLOR=color*light;\n\n\nif(!free){\n"+
sh("COLOR")+"\n}\n\n}else if(miniMap<3){\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\nCOLOR=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\nCOLOR=v_kcolor;\n\n\n\nCOLOR*=light;\n}else{\n\nCOLOR=vec4(1.0);\n\n}\n\n\n\n\n}");x.compileShader(l);x.attachShader(U,k);x.attachShader(U,l);x.linkProgram(U);x.useProgram(U);(k=x.getShaderInfoLog(k))&&console.log("Shader compiler log1: "+k,g);(k=x.getShaderInfoLog(l))&&console.log("Shader compiler log1: "+k);l=x.createShader(x.VERTEX_SHADER);
x.shaderSource(l,Xa?"precision highp float;\nattribute vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=-0.9;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}":"#version 300 es\nprecision highp float;\nin vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=-0.9;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}");
x.compileShader(l);g=x.createShader(x.FRAGMENT_SHADER);x.shaderSource(g,Xa?"precision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform vec2 u_translation;\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\nuniform float mapSize2;\n\n"+f+"\n\n"+e+"\n\n\nuniform float TSIZE;\n\nuniform float scale;\n\nuniform sampler2D u_image1;\n\nvec2 oneD2D(highp float xy,float sumx, float sumy, float w){\n    float x=mod(xy,TSIZE)+sumx+sumy*w;\n    float y=floor(xy/TSIZE)+floor(x/TSIZE);\n    return vec2(x, y)/(TSIZE);\n}\n\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture2D(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture2D(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture2D(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture2D(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture2D(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture2D(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture2D(img_common[6], coords);\n    }\nvoid main() {\nvec4 color;\n\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize2*32.0||xy.y>mapSize2*32.0) discard;\n\nvec4 coords=texture2D(img_data,(floor(xy/32.0)+vec2(.5))/(mapSize));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,0.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nfloat wids=floor(coords[3]);\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=floor(wids/65536.0)*32.0;\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x,xym32.y,w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=mod(floor(wids/256.0),256.0);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=mod(wids,256.0);\n}\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,0.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\n color=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n    w=512.0;\n    xym32.x+=w*w*u_fps;\n}\ncolor=tcmm(oneD2D(tid,scale*xym32.x,scale*xym32.y,w));\n\n}\n\nif(miniMap==0) color*=u_ambient;\n\n"+
(c&&"\nfloat fog=fogval(xy/(mapSize2*32.0));\nif(fog==0.0) color.rgb*=0.0;\nelse{\nfloat mulp=1.0,mulp2=1.0;\n\n\nif(miniMap==0){\nvec2 dec=xy/32.0, cnt=floor(dec)+.5;\nfloat sq8[16];\nsq8[0]=1.0;sq8[1]=0.0;sq8[2]=0.0;sq8[3]=-1.0;sq8[4]=-1.0;sq8[5]=0.0;sq8[6]=0.0;sq8[7]=1.0;sq8[8]=1.0;sq8[9]=1.0;sq8[10]=1.0;sq8[11]=-1.0;sq8[12]=-1.0;sq8[13]=-1.0;\nsq8[14]=-1.0;sq8[15]=1.0;\n\n\nfor(int i=0;i<8;i++){\nvec2 pos=dec+vec2(sq8[i*2],sq8[i*2+1]);\nfloat g=fogval(pos/mapSize2);\nif(fog>0.0&&g==0.0||fog>1.0&&g==1.0){\n    vec2 ori=cnt+vec2(sq8[i*2],sq8[i*2+1])*.5;\n    vec2 dif=ori-dec;\n    if(sq8[i*2]==0.0)   dif.x=0.0;\n    if(sq8[i*2+1]==0.0) dif.y=0.0;\n    float dist=sqrt(dot(dif,dif));\n    if(dist<1.0){\n        if(fog>0.0&&g==0.0) mulp*=dist;\n        else mulp2*=dist;\n    }\n}\n}\n\nif(mulp2<1.0) mulp2+=.4;\nif(mulp2>1.0) mulp2=1.0;\n}\ncolor.rgb*=mulp;\n"+
(2==c&&"color.rgb*=mulp2;"||"")+"\n}\n\n"+(2==c&&"if(fog==1.0) color.rgb*=.4;"||"")+"\n"||"")+"\n\n\n"+sh("color",1)+"\n\n\ngl_FragColor=color;\n}":"#version 300 es\nprecision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform float TSIZE;\n"+e+"\n\nuniform vec2 u_translation;\n\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\n"+(uh&&"uniform sampler2D frmBUFFER;"||
"")+"\n\nout vec4 COLOR;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n\nuniform float scale;\n\n"+f+"\n\nvec2 oneD2D(highp float xy,float sumx, float sumy, float w){\n    float x=mod(xy,TSIZE)+sumx+sumy*w;\n    float y=floor(xy/TSIZE)+floor(x/TSIZE);\n    return vec2(x, y)/(TSIZE);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture(img_common[6], coords);\n    }\n\nvoid main() {\nvec4 color;\n\n\nvec2 xy = vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+(u_resolution-u_resolution/zoom)/2.0;\n}\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0){\n    COLOR=vec4(0.07,0.07,0.07,1.0);\n    return;\n}\n\nvec4 coords=texture(img_data,(floor(xy/32.0)+vec2(.5))/(mapSize));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,0.0);\n\nvec2 xym32=mod(floor(xy),32.0);\nint wids=int(floor(coords[3]));\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=float((wids>>16)&0xff)*32.0;\n    nrgb=tcmm(oneD2D(coords[2],xym32.x,xym32.y,w3));\n\n}\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=float((wids>>8)&0xff);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=float(wids&0xff);\n}\n\nif(nrgb!=vec4(0.0,0.0,0.0,0.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n     w=512.0;\n     xym32.x+=w*w*u_fps;\n}\n\ncolor=tcmm(oneD2D(tid,scale*xym32.x,scale*xym32.y,w));\n\n}\n\nif(miniMap==0) color*=u_ambient;\n\n"+
(c&&"\n\nfloat fog=fogval(xy/(32.0*mapSize));\n\n"+(uh&&"\nfloat Hfog;\n\nif(miniMap==0){\nHfog=texture(frmBUFFER,vec2(gl_FragCoord.x/u_resolution.x,(-u_resolution.y+gl_FragCoord.y)/u_resolution.y)).r;\n"+(3==c&&"COLOR=vec4(color.rgb*Hfog,1.0);"+sh("COLOR",1)+"return;"||"")+"\nif(fog>1.0) fog=1.0;\n}\n"||"")+"\n\n\n\nif(fog==0.0"+(uh&&"&&Hfog==0.0"||"")+") color.rgb*=0.0;\nelse {\nfloat mulp=1.0,mulp2=1.0;\n\nif(miniMap==0){\nvec2 dec=xy/32.0, cnt=floor(dec)+.5;\nconst float sq8[16]=float[](1.0,0.0, 0.0,-1.0, -1.0,0.0, 0.0,1.0, 1.0,1.0,1.0,-1.0, -1.0,-1.0,-1.0,1.0);\n\n\nfor(int i=0;i<8;i++){\nvec2 pos=dec+vec2(sq8[i*2],sq8[i*2+1]);\nfloat g=fogval(pos/mapSize);\nif(fog>0.0&&g==0.0||fog>1.0&&g==1.0){\n    vec2 ori=cnt+vec2(sq8[i*2],sq8[i*2+1])*.5;\n    vec2 dif=ori-dec;\n    if(sq8[i*2]==0.0)   dif.x=0.0;\n    if(sq8[i*2+1]==0.0) dif.y=0.0;\n    float dist=sqrt(dot(dif,dif));\n    if(dist<1.0){\n        if(fog>0.0&&g==0.0) mulp*=dist;\n        else mulp2*=dist;\n    }\n}\n}\n\nif(mulp2<1.0) mulp2+=.4;\nif(mulp2>1.0) mulp2=1.0;\n    }\n"+
(2==c&&"if(fog==1.0) mulp2*=.4; mulp*=mulp2;"||"")+"\n\n"+(uh&&"\nif(miniMap==0){\nif(Hfog>0.0) mulp=max(Hfog,mulp);\nif(Hfog>0.0&&fog==0.0) mulp=Hfog;\n}\n"||"")+"\ncolor.rgb*=mulp;\n}\n"||"")+"\n\n\n\n\nCOLOR=color;\n\n\n"+sh("COLOR",1)+"\n\n\n\n\n}");x.compileShader(g);x.attachShader(S,l);x.attachShader(S,g);x.linkProgram(S);(k=x.getShaderInfoLog(l))&&console.log("Shader1 compiler log T: "+k);(k=x.getShaderInfoLog(g))&&console.log("Shader compiler log T: "+k)}f=x.getAttribLocation(U,"a_position");
g=x.getAttribLocation(U,"a_texCoord");e=x.getAttribLocation(U,"a_step");l=x.getAttribLocation(U,"a_physic");k=x.getAttribLocation(U,"a_margins");x.useProgram(S);yh=x.getUniformLocation(S,"minimapMargin");fh=x.getUniformLocation(S,"u_translation");bh=x.getUniformLocation(S,"u_resolution");ah=x.getUniformLocation(S,"u_fps");$g=x.getUniformLocation(S,"now");kh=x.getUniformLocation(S,"u_circle0");lh=x.getUniformLocation(S,"u_circle1");Xe=x.getUniformLocation(S,"u_ambient");gh=x.getUniformLocation(S,"zoom");
ch=x.getUniformLocation(S,"miniMap");zh(yc);x.uniform1i(ch,0);x.uniform2fv(fh,[0,0]);x.uniform1f(ah,-1);x.uniform1f(gh,Y);x.uniform1f(x.getUniformLocation(S,"TSIZE"),kc);x.uniform1f(x.getUniformLocation(S,"mx"),0);Xa?(x.uniform1f(x.getUniformLocation(S,"mapSize"),Math.pow(2,Math.ceil(Math.log2(A[47]())))),x.uniform1f(x.getUniformLocation(S,"mapSize2"),A[47]())):x.uniform1f(x.getUniformLocation(S,"mapSize"),A[47]());x.uniform1f(x.getUniformLocation(S,"scale"),1);Ah=[-m.fa*Y,-m.ga*Y];x.uniform2fv(yh,
Ah);var t=x.getAttribLocation(S,"a_position");hh=Bh();Ch(hh);var q=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,q);x.bufferData(x.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),x.STATIC_DRAW);x.enableVertexAttribArray(t);x.vertexAttribPointer(t,2,x.FLOAT,!1,0,0);Ch(null);x.useProgram(U);x.uniform2fv(Dh,Ah);x.bindBuffer(x.ARRAY_BUFFER,null);ih=Bh();Ch(ih);jh=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,jh);x.enableVertexAttribArray(e);Xa?(ph=x.getExtension("ANGLE_instanced_arrays"),
x.vertexAttribPointer(e,1,x.FLOAT,!1,0,0),x.bufferData(x.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),x.STATIC_DRAW),ph.vertexAttribDivisorANGLE(e,0)):(x.vertexAttribIPointer(e,1,x.UNSIGNED_BYTE,0,0),x.bufferData(x.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),x.STATIC_DRAW),x.vertexAttribDivisor(e,0));e=A[47]();Qg=b&&b+4E4||Math.floor(e*e/2);Mg=oh(g,4);Ng=oh(f,3);Og=oh(l,4);Pg=oh(k,4);Ch(null);Yg=x.getUniformLocation(U,"u_resolution");Ye=x.getUniformLocation(U,"u_ambient");eh=x.getUniformLocation(U,
"u_translation");Rg=x.getUniformLocation(U,"zoom");Xg=x.getUniformLocation(U,"now");nh=x.getUniformLocation(U,"u_circle0");mh=x.getUniformLocation(U,"u_circle1");dh=x.getUniformLocation(U,"miniMap");Dh=x.getUniformLocation(U,"minimapMargin");c&&(Zg=x.getUniformLocation(U,"miniMapSize"));x.uniform1f(x.getUniformLocation(U,"zMax"),96*A[47]());x.uniform1i(dh,0);x.useProgram(U);b=Sg(A[33](),1323);z.zb||(z.zb=2880);z.Ab||(z.Ab=12);c=0;for(f=We.length;c<f;c++).55>We[c]&&(We[c]=.55);Nc();x.uniform1f(x.getUniformLocation(U,
"mapSize"),A[47]());x.uniform1f(x.getUniformLocation(U,"mx"),-m.G*Y);x.uniform1f(Rg,Y);x.uniform2fv(eh,[0,0]);x.uniform1f(x.getUniformLocation(U,"TSIZE"),kc);Eh.h=0;window.addEventListener("resize",Eh,!1);Eh();x.blendEquation(x.FUNC_ADD);x.blendFunc(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA);x.disable(x.DITHER);x.disable(x.BLEND);performance.now();if(!vh){vf(1==h.stdcolors);x.activeTexture(x.TEXTURE0);f=x.createTexture();x.bindTexture(x.TEXTURE_2D,f);if(Xa){x.getExtension("OES_texture_float");g=new Float32Array(65536);
for(c=0;c<g.length;c++)g[4*c]=b[c];x.texImage2D(x.TEXTURE_2D,0,x.RGBA,128,128,0,x.RGBA,x.FLOAT,g)}else x.texImage2D(x.TEXTURE_2D,0,x.R16F,b.length,1,0,x.RED,x.FLOAT,b);rh();x.bindTexture(x.TEXTURE_2D,null);x.bindTexture(x.TEXTURE_2D,f);x.uniform1i(x.getUniformLocation(U,"delay"),0);x.activeTexture(x.TEXTURE2)}Fh=x.createTexture();x.bindTexture(x.TEXTURE_2D,Fh);x.texImage2D(x.TEXTURE_2D,0,x.LUMINANCE_ALPHA,e,e,0,x.LUMINANCE_ALPHA,x.UNSIGNED_BYTE,null);Gh();x.useProgram(S);x.uniform1i(x.getUniformLocation(S,
"fogMap"),2);x.useProgram(U);x.uniform1i(x.getUniformLocation(U,"fogMap"),2);uh&&(x.activeTexture(x.TEXTURE3),Wg=x.createTexture(),x.bindTexture(x.TEXTURE_2D,Wg),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,1,1,0,x.RGBA,x.UNSIGNED_BYTE,new Uint8Array(4)),rh(),Hh=x.createFramebuffer(),x.bindFramebuffer(x.FRAMEBUFFER,Hh),Ih=x.createTexture(),x.bindTexture(x.TEXTURE_2D,Ih),b=x.canvas.width,c=x.canvas.height,x.texImage2D(x.TEXTURE_2D,0,x.RGBA,b,c,0,x.RGBA,x.UNSIGNED_BYTE,null),rh(),Hh.width=b,Hh.height=c,x.framebufferTexture2D(x.FRAMEBUFFER,
x.COLOR_ATTACHMENT0,x.TEXTURE_2D,Ih,0),x.bindFramebuffer(x.FRAMEBUFFER,null),x.useProgram(S),x.uniform1i(x.getUniformLocation(S,"frmBUFFER"),3),x.useProgram(U),x.uniform1i(x.getUniformLocation(U,"frmBUFFER"),3));x.activeTexture(x.TEXTURE2);A[13](Y,Qg,d,1!=h.nodecals);x.enable(x.DEPTH_TEST);x.depthFunc(x.LEQUAL);Jh.h=1E3;Jh.c=0;Jh.now=0;Jh.m=0;vh=!0};var Fh;
window.chFFg=function(b,c){performance.now();b=Ug(b,c*c*2);x.activeTexture(x.TEXTURE2);x.bindTexture(x.TEXTURE_2D,Fh);x.pixelStorei(x.UNPACK_ALIGNMENT,1);x.texImage2D(x.TEXTURE_2D,0,x.LUMINANCE_ALPHA,c,c,0,x.LUMINANCE_ALPHA,x.UNSIGNED_BYTE,b);Gh();x.pixelStorei(x.UNPACK_ALIGNMENT,4)};var Ih,Kh;window.shk=function(){Kh=!0};
function Lh(b){b&&(x.activeTexture(x.TEXTURE3),x.uniform1i(dh,3),x.bindFramebuffer(x.FRAMEBUFFER,Hh),x.viewport(0,0,x.canvas.width,x.canvas.height),x.bindTexture(x.TEXTURE_2D,Wg),x.clearColor(0,0,0,0),Kh&&x.clearColor(1,1,1,1),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT),Kh&&x.clearColor(0,0,0,0),x.enable(x.BLEND),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ONE),Xa?ph.drawArraysInstancedANGLE(x.TRIANGLES,0,6,b):x.drawArraysInstanced(x.TRIANGLES,0,6,b),x.bindTexture(x.TEXTURE_2D,Ih),x.bindFramebuffer(x.FRAMEBUFFER,
null),x.uniform1i(dh,0),x.enable(x.BLEND),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA))}
function Mh(){if(Nh){var b=Nh,c=b.w,d=b.Vc,e=b.Wc,f=b.Gc,g=b.Hc,k=b.Xc,l=b.Ic,t=Date.now()-c;150<t&&(t=150);var q=Oh(),u=q.x;q=q.y;var v=Date.now()-bf||0,w=Date.now()-df||0;150<v&&(v=150);150<w&&(w=150);u=bf<c?u*t:u*v;q=df<c?q*t:q*w;Math.sign(u)!=Math.sign(Ph)&&Ph?u+=Ph:Ph=u;Math.sign(q)!=Math.sign(Qh)&&Qh?q+=Qh:Qh=q;150>t?(yc=l+-(l-k)/150*t,b.bc?(b=Rh(d,e,l,f,g),d=Rh(d,e,yc,f,g),P=f-(b.x-d.x),Q=g-(b.y-d.y)):(P=f+-(f-d)/150*t,Q=g+-(g-e)/150*t)):(b.bc?(b=Rh(d,e,l,f,g),d=Rh(d,e,k,f,g),P=f-(b.x-d.x),
Q=g-(b.y-d.y)):(P=d,Q=e),df=bf=Date.now(),cf=P+u,ef=Q+q,yc=k,Nh=void 0);P+=u;Q+=q;ff(-P,-Q);x.getParameter(x.CURRENT_PROGRAM)==U&&x.uniform1f(Rg,Y/yc);A[19](yc)}}var Ph,Qh;function Oh(){var b=2.5*parseInt(h.scrollSpeed)/100;return{x:1680*Ze*yc*b/1E3,y:1680*$e*yc*b/1E3}}var Sh=0,xh,Th,Uh;window.brconf=function(b,c,d,e,f,g,k,l,t){xh=e;Th=l;x.useProgram(U);x.uniform4f(nh,b,c,d,e);x.uniform4f(mh,f,g,k,l);x.useProgram(S);x.uniform4f(kh,b,c,d,e);x.uniform4f(lh,f,g,k,l);Uh=t};
function Jh(b,c){if(!z.Ob){performance.now();Pc||requestAnimationFrame(Jh);b=Jh.h;var d=Jh.c,e=Jh.now,f=Jh.A,g=Jh.c,k=e;Jh.m++;e=c||Date.now()-Jc+25*A[48]();Jh.now=e;d=(d+(e-k))/1E3;Jh.c=d;c=f;f=Date.now();Jh.A=f;Jh.ea=(g+(f-c))/1E3;ad++;Jh.h=b+d;if(0!=Ze||0!=$e||Nh){b=Oh();c=b.x;d=b.y;f=Date.now()-bf;g=Date.now()-df;k=!1;b=af;var l=0,t=0;b&&(b=Math.sqrt(Math.pow(c,2)+Math.pow(d,2))/af,f>b&&(g=f=b,k=1),l=c/b,t=d/b);Nh?Mh():(c&&(P=cf+c*f-.5*l*Math.pow(f,2)),d&&(Q=ef+d*g-.5*t*Math.pow(g,2)),ff(-P,-Q),
k&&($e=Ze=0))}x.useProgram(U);ng();x.uniform1f(Xg,e);x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT);c=A[14]();uh&&Lh(c);Vh(e);Ch(ih);Wh(c);Xh(c);fe.c&&fe(1);Pc&&(0<Fc&&clearInterval(Fc),x.canvas.toBlob(function(v){var w=Yh;v=URL.createObjectURL(v);w.href=v;w.download=Zh++ +".png";w.click();window.URL.revokeObjectURL(v);setTimeout(function(){setTimeout(Ic,9);Jh(0,25*z.da+16)},20)}));$h&&$h.getVideoTracks()[0].pd();x.finish();if(!O&&100<=Date.now()-Sh&&(Sh=Date.now(),A[171](),3>te)){e=z.now()/6E4;c=
A[166]();if(c){var q=e/c;if(1>=q){var u=Math.round(510*q);q=Math.round(510*(1-q));255<u&&(u=255);255<q&&(q=255)}else u=255,q=0}1==te?(Vg(n("tpCPU"),"CPU:"+(Oc/10).toFixed(2)+"%"),Vg(n("tpGPU"),~~(1E3*ad/(Date.now()-$c)+.5)+"FPS"),re.show()):(R(n("tpCPU")),Vg(n("tpGPU"),""),R(re));Vg(n("tpTM"),ab(z.now()));ai&&(ai.style.color="rgb("+u+","+q+",0)",e>c+5&&F(ai));void 0!=xh&&(u=25*A[48](),q=p[21],u=1E3*Math.floor(u/1E3),xh>u?(c=K(506)+(" ("+(Uh||0)+"/"+q+") ")+ab(xh-u),e="#ff0"):(c=K(505)+(" ("+Uh+"/"+
q+") ")+ab(xh+Th-u),e="red"),Uh==q&&u>xh+Th&&(c=K(507),e="#f0f"),bi.style.color=e,Vg(bi,c));Oc=0;$c=Date.now();ad=0}}}function ci(b){b?ci.time=performance.now():r("c++",performance.now()-ci.time)}window.perfw=ci;function Xh(b){b&&(x.enable(x.BLEND),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA),Xa?ph.drawArraysInstancedANGLE(x.TRIANGLES,0,6,b):x.drawArraysInstanced(x.TRIANGLES,0,6,b),x.disable(x.BLEND))}var ve=!1,Ah;
function Wh(b,c){if(1020>window.innerWidth)if(ve)c=!0;else return;x.uniform2fv(eh,[0,0]);x.uniform1f(Rg,1);x.uniform1i(dh,1);var d=m.fa,e=window.innerHeight-Zf-m.ga,f=$f,g=Zf;c?(g=f=d=ag(),d=window.innerWidth/2-f/2,e=window.innerHeight/2-g/2,x.uniform2fv(Dh,[-Y*d,-Y*e])):x.uniform2fv(Dh,Ah);x.uniform1f(Zg,f*Y);x.viewport(d*Y,Y*e,f*Y,g*Y);Xh(b);x.uniform1i(dh,2);Xh(1);x.uniform1i(dh,0);x.uniform2fv(eh,[P,Q]);x.uniform1f(Rg,Y/yc);x.viewport(0,0,x.canvas.width,x.canvas.height);ve&&!c&&Wh(b,1)}
function ag(){return Math.min(window.innerWidth,window.innerHeight)-128}var yh,Dh;
function Vh(b,c){var d=Math.floor(b/100)%5;x.useProgram(S);x.uniform1f(gh,Y/yc);Ch(hh);x.uniform1f(ah,d);x.uniform1f($g,b);gf&&rf||x.drawArrays(x.TRIANGLES,0,6);d=m.fa;var e=window.innerHeight-Zf-m.ga,f=$f,g=Zf;if(1020>window.innerWidth)if(ve)c=!0;else{x.viewport(0,0,x.canvas.width,x.canvas.height);x.useProgram(U);return}if(c){var k=ag();g=f=k;d=window.innerWidth/2-f/2;e=window.innerHeight/2-g/2;x.uniform2fv(yh,[-Y*d,-Y*e]);if(Ua)for(var l=document.getElementsByClassName("alertdmg"),t=0;t<l.length;t++)l[t].show();
ud("bigMap");n("bigMap").style.width=k+"px";n("bigMap").style.height=k+"px"}else x.uniform2fv(yh,Ah);gf&&rf?(x.enable(x.SCISSOR_TEST),x.scissor(Y*d,Y*e,Y*f,Y*g),x.clearDepth(-.9),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT),x.clearDepth(1),x.disable(x.SCISSOR_TEST)):(x.viewport(Y*d,Y*e,Y*f,Y*g),x.uniform1i(ch,1),x.uniform2fv(fh,[0,0]),x.uniform1f(gh,Y*f/32/A[47]()),x.drawArrays(x.TRIANGLES,0,6),x.uniform1i(ch,0),x.uniform2f(bh,x.canvas.width,x.canvas.height),x.uniform2fv(fh,[P,Q]),x.viewport(0,
0,x.canvas.width,x.canvas.height));x.useProgram(U);ve&&!c&&Vh(b,1)}var vh=!1,wh;function zh(b){wh&&(1<b?(b=(b-1)/.5,1<b&&(b=1),b=.5*(1-b)):b=.5,di!=b&&(di=b,b="calc(-"+50*(Y-1)+"% + "+b+"px)",x.canvas.style.transform="scale("+1/Y+") translate("+b+","+b+")"))}var di;function Rh(b,c,d,e,f){var g=x.canvas.width,k=x.canvas.height;return{x:b*d+-e+(g-d*g/Y)/2,y:c*d+-f+(k-d*k/Y)/2}}var Nh;
function uf(b,c,d,e){var f=A[47](),g=window.innerWidth,k=window.innerHeight,l=0==h.unlimitedZoom&&!O;if(!(b*(g-(!Ua&&m.G||0))/32>f||b*k/32>f)||!l){zh(b);.25>b&&l&&(b=.25);0>b&&(b=0);Mh();if(!c||ve||!Ua&&c<m.G||"false"==h.zoomPointer)c=Math.floor(g/2),d=Math.floor(k/2);Qh=Ph=0;Nh={Vc:c,Wc:d,Gc:P,Hc:Q,w:Date.now(),Xc:b,Ic:yc,bc:1};e&&(Nh.w-=500,Mh());ei()}}
function fi(b){if(!gi&&(Je||b.target==x.canvas)&&(b.ctrlKey&&b.preventDefault(),b.clientX>m.Bb||Je||!b.clientX)){var c=b.deltaY/550,d=1+parseFloat(h.zoomMult)/200+Math.abs(c);uf((0<Math.sign(c)?d:1/d)*yc,b.clientX,b.clientY)}}function ei(){var b=window.innerWidth+m.G,c=window.innerHeight,d=yc*b,e=yc*c;hi(-P+(Y-yc)*b*.5,-Q+(Y-yc)*c*.5,-999999999,0);ii(d,e,0,0,0)}var ji,ki;
ng=function(){if(P!=ji||Q!=ki){ji=P;ki=Q;A[20](-P,-Q);var b=[P,Q];x.useProgram(S);x.uniform2fv(fh,b);x.useProgram(U);x.uniform2fv(eh,b);ei()}};function rh(){x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.REPEAT);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.REPEAT)}
function Gh(){x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE);x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE)}var li,kc;
function mi(b){x.activeTexture(x.TEXTURE6+b);if(!li[b]){b&&!li[b-1]&&mi(b-1);x.useProgram(U);var c=kc,d=x.createTexture();li[b]=d;x.bindTexture(x.TEXTURE_2D,d);rh();x.texImage2D(x.TEXTURE_2D,0,ni,c,c,0,ni,x.UNSIGNED_BYTE,null);x.uniform1i(x.getUniformLocation(U,"img_common["+b+"]"),6+b);x.useProgram(S);x.uniform1i(x.getUniformLocation(S,"img_common["+b+"]"),6+b)}return li[b]}var ni;
window.setup3Dtexture=function(b,c,d,e){performance.now();ni=x.RGBA;performance.now();var f=kc;li||(li=[]);b=Ug(d,b);d=Math.floor(c/(f*f));c=c/f%f;var g=b.length/(4*f),k=0;do{var l=g-k;c+l>=f&&(l=f-c);x.bindTexture(x.TEXTURE_2D,mi(d));var t=new Uint8Array(b.buffer,b.byteOffset+k*f*4,l*f*4);x.texSubImage2D(x.TEXTURE_2D,0,0,c,f,l,ni,x.UNSIGNED_BYTE,t);k+=l;c=0;d++}while(k<g);A[165](e)};var Hh,Y;
function Eh(){var b=Math.round(window.innerWidth*Y),c=Math.round(window.innerHeight*Y);x.canvas.width=b;x.canvas.height=c;var d=n("menbak1s")&&n("menbak1s").getBoundingClientRect();A[18](b,c,window.innerWidth,window.innerHeight,d.y);x.useProgram(S);x.uniform2f(bh,b,c);x.useProgram(U);Hh&&(Hh.width=b,Hh.height=c,x.bindTexture(x.TEXTURE_2D,Ih),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,b,c,0,x.RGBA,x.UNSIGNED_BYTE,null),rh());x.uniform2f(Yg,b,c);Eh.h=1;ff(-P,-Q);xe()}window.animTimer=function(){};
function Ch(b){Xa?oi.bindVertexArrayOES(b):x.bindVertexArray(b)}var oi,ph;function Bh(){return Xa?(oi||(oi=x.getExtension("OES_vertex_array_object")),oi.createVertexArrayOES()):x.createVertexArray()}Array.prototype.put=function(b){this[this.length]=b};Array.prototype.add=function(b){0>this.indexOf(b)&&(this[this.length]=b)};var z={},pi=new Float32Array(4),qi=new Float32Array(3),ri=new Float32Array(1);
function hi(b,c,d,e){qi[0]=b;qi[1]=c;qi[2]=d;x.bindBuffer(x.ARRAY_BUFFER,Ng);x.bufferSubData(x.ARRAY_BUFFER,12*e,qi)}window.bufferPos=hi;window.bufferPhysics=function(b,c,d,e,f){pi[0]=b;pi[1]=c;pi[2]=d;pi[3]=e;x.bindBuffer(x.ARRAY_BUFFER,Og);x.bufferSubData(x.ARRAY_BUFFER,16*f,pi)};window.bufferIMG=function(b,c,d,e,f){pi[0]=b;pi[1]=c;pi[2]=d;pi[3]=e;x.bindBuffer(x.ARRAY_BUFFER,Mg);x.bufferSubData(x.ARRAY_BUFFER,16*f,pi)};
function ii(b,c,d,e,f){pi[0]=b;pi[1]=c;pi[2]=d;pi[3]=e;x.bindBuffer(x.ARRAY_BUFFER,Pg);x.bufferSubData(x.ARRAY_BUFFER,16*f,pi)}window.bufferMargin=ii;window.bufferColor=function(b,c){ri[0]=b;x.bindBuffer(x.ARRAY_BUFFER,Mg);x.bufferSubData(x.ARRAY_BUFFER,16*c+8,ri)};window.sresizeBuffer=function(b){r("limit",b);qh(Mg,b);qh(Ng,b);qh(Og,b);qh(Pg,b)};var Rb=["European","Arab","Asian"];function si(b){return'<span class="raceIcon" style="background-position-y:-'+20*b+'px"></span>'}
function Kg(b,c,d){if(b)return d&&(b=b.replace("%d",d)),b.replace("%s",c)};function ti(){for(var b=0,c=ui.length;b<c;b++){var d=ui[b];d&&(p[b]="checkbox"==d.type?d.checked?1:0:parseInt(d.value))}return p}var vi,wi;z.zb=2880;z.Ab=12;function xi(){for(var b=ub(vb),c=0;c<p.length;c++)b[c]=p[c];A[24](p.length)}
function yi(){n("mapconfiguration")&&""!==n("mapconfiguration").innerHTML&&!A[67]()&&(ti(),1024<p.length&&(p.length=1024),h.mapConfig4="["+p.join()+"]");z.Mb=Math.round(555555*Math.random()+1);p[46]=z.Mb;p[0]=zi(p[0],p[16],p[29]);for(var b=ub(vb),c=0;c<p.length;c++)b[c]=p[c];A[24](p.length);return z}window.SetupGameConfig=yi;var Pc,Yh,Zh,$h;
function ec(){sd&&(sd.innerHTML="");bc.innerHTML=K(53);m.Xb||(m.Xb=1);z.f&&(Ai(),z.ad=0);A[47]()||yi();z.bb=0;z.Ob=0;Af=n("msgs1");z.f||(location.hash="");ud("content");z.da?z.tc=25*z.da:(z.w=Date.now(),z.da=0,z.tc=0);z.fd=Date.now();z.f||Te();z.now=Gc;z.paused=0;z.bb=0;Hc();performance.now();z.qc=!0;z.Ib=25;var b=z.Ib;0===m.Ib&&(b+="&deg;C");n("temperature")&&(n("temperature").innerHTML=b);yc=1;A[101](~~(1E4*Math.random()));fe(55);Bi.c();O&&(Gd(),Id())}function Vc(b){F(b.parentNode.parentNode)}
function Bi(){F(Ci);n("playersinfo")&&(n("playersinfo").innerHTML="");xf();window.addEventListener("keydown",fg);window.addEventListener("keyup",eg);window.addEventListener("mousemove",Cg);window.onblur=dg;window.addEventListener("touchstart",ug,{passive:!1});window.addEventListener("touchmove",Ag);window.addEventListener("touchend",Bg);window.addEventListener("wheel",fi,{passive:!1});window.addEventListener("mousedown",Dg);window.addEventListener("mouseup",Eg);Di();Aa.Tb=performance.now()-Aa.Tb;
z.f?(vi&&E(32),A[65]()):Ei();z.qc=!1}window.startGameStep0=Bi;Bi.c=function(){Bi.load++;Bi.load===Bi.target&&Bi()};Bi.check=Bi.c;Bi.target=2;function Hg(b){if(b||!Ea)b=document.documentElement,b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen()}var Fi=document.getElementsByTagName("main")[0];Ea||(window.onbeforeunload=function(){return"Are you sure to leave this page?"});
var Gi,Ci,bc;
function Hi(b){Gi=!0;Ud();Ub();if(!x)return bb("Your browser doesnt support webgl");Fi.appendChild(x.canvas);F(n("RandomMap"));F(n("CustomMap"));F(n("game"));F(n("bak"));F(n("index"));Aa={Tb:performance.now()};Bi.load=0;if(vi&&Ii){var c=A[70]();p[0]=Math.round(Math.sqrt(15600*c));c=ub(vb);for(var d=0;d<p.length;d++)c[d]=p[d];A[24](p.length)}qc(vi?"reveal":"bless");b&&"true"==h.fullscreen&&Hg();O?(m.fa=0,m.ga=0,m.ac=0,Zf=$f=171,m.G=171,m.Bb=171):vd?(Zf=$f=m.G=151,m.Bb=151,m.ac=0,m.fa=0,m.ga=0):(m.G=
151,Zf=$f=128,m.Bb=151,m.ac=0,m.fa=4,m.ga=31);A[119](m.G,vd);b=n("minimap");b.style.width=$f+"px";b.style.height=Zf+"px";b.style.left=m.fa+"px";b.style.top=m.ga+"px";Ci=G("div",document.body);Ci.id="loading";bc=G("div",Ci);G("div",Ci,"TZA.RED");b=G("div",Ci);G("div",b).className="svgnehhon";G("div",b,"NEHHON NETRAL ENGINE");if(O){if(!A[67]())for(p=Fa,b=ub(vb),c=0;c<p.length;c++)b[c]=p[c];A[102](p.length)}else A[47]()||yi();E(25);if(z.f)Wa("start game");else A[204]();n("mapconfiguration")&&Vc(n("mapconfiguration"));
jc()}window.startGame=Hi;var Ji,Ki;window.updKstate=function(b,c,d){Ji&&Ji[b]&&(Ji[b].className=""+(c&&"pldeath"||"")+(d&&" pldisc"||""));d&&Ki&&Ki[b]&&(Ki[b].innerHTML="")};window.updKping=function(b,c){if(te)if(Ki&&Ki[b])Ki[b].innerHTML=2147483647!=c&&c+"ms"||"host";else A[158]()};window.rstPLI=function(){n("playersinfo").innerHTML="";Ji=[];Ki=[]};
window.setupPlayerInfo=function(b,c,d,e,f,g,k,l,t,q,u){if(!(32<b)){c=Wc(t,c);t=n("playersinfo");var v=document.createElement("div");v.cb=u;k&&!q&&te&&(Ki[b]=G("span",v,2147483647!=k&&k+"ms"||"host","font-size:8px;color:#00ffb8"));c=G("span",v,c,"border-color:"+(l&&"#f00"||"#0f0"));c.className=""+(g&&"pldeath"||"")+(q&&" pldisc"||"");Ji[b]=c;G("div",v,"","background:rgb("+d+","+e+","+f+")");b=!0;d=ba(t.children);for(e=d.next();!e.done;e=d.next())if(e=e.value,e.cb<u){t.insertBefore(v,e);b=!1;break}b&&
t.appendChild(v)}};function Hd(b){for(var c=b.length,d=0;d<c;n(b[d++]).style.display="block");}var $f=128,Zf=128;window.popInfo=function(b,c){O||Vg(n("pop"),b+"/"+c)};window.addEventListener("offline",function(){eb("Offline","#ff0000")});window.addEventListener("online",function(){eb("Online","#00ff00")});var Sb=!1;function Li(b){if(!b||!b.target||"BUTTON"!=b.target.tagName){if(this.fc&&!h.sid)return Wb();z.f&&Mi(5);b=this.Ub;Sb=!0;Tb(b);Ub()}}function Ni(){var b=Tc(K(53));b.id="loadingOnline";L("button",b,3,"margin:auto;margin-top:19px;display:block").onclick=function(){location.href=""}}
function Oi(b,c){var d=1;do{var e=Pi(b,d);d+=3;var f=Pi(b,d);d+=3;var g=b[d++],k=b[d++],l=b[d++],t=b[d++],q=b[d++],u=b[d++],v=Pi(b,d);d+=3;var w=b[d++],y=b[d++],B=Qi(new Uint8Array(b.buffer,d,w));d+=w;w=Qi(new Uint8Array(b.buffer,d,y));d+=y;Df[e]={name:B,id:f,clan:w,avatar:g,role:k,team:l,race:q,rgb:v,state:t,flag:u};vi&&(Ri(A[56](0,q,v,e,0,f),17,B),Si());qc("unitdone");c&&zf(Kg(K(531),"<span>"+Wc(e)+"</span>"),"4bff4b")}while(d<b.length)}
var Ti={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},vd,Pf,Ii;
function Ui(){vi=0;Ii=Vi=Pf=m.g=0;Wi&&(F(Wi),Wi=void 0);n("mult").children&&n("mult").insertBefore(n("gameList"),n("mult").children[1]);n("gameList").show()}function Xi(b){n("mapconfiguration")&&Vc(n("mapconfiguration"));Ui();n("game")&&M("game");z.f=0;z.id=void 0;m.Lb=!1;D.close();Qa();Ue();A[69]();b.constructor==String&&bb(b)}
function qe(){if(n("menubefore")&&n("menuafter")&&n("resourcesbefore")){var b=h.menuOpacity/100;n("menubefore").style.opacity=b;n("menuafter").style.opacity=b;n("resourcesbefore").style.opacity=b}}function Di(){A[149]("true"==h.deathsounds)}function Tf(b,c){b=G("input",b);b.value=c;b.type="range";Yi(b);return b}function Yi(b){var c=G("span",b.parentNode);c.className="rangeval";b.l=c}
function ye(){if(z.u){if(!O)A[98]();gi=!0;if(!n("playingMenu")){var b="";"true"===h.nightcycle&&(b="checked");var c="";z.f||(c="<tr><td>"+K(71)+' </td><td><input type="range" step=1 id="gameSpeed"/></td></tr>');b=Tc('\n     <ul>\n     <li id="backToGame">'+K(72)+"</li>\n     "+(z.f&&Ya?"":"<li id='saveGame'>"+K(73)+"</li>")+"\n     "+((vd||Ua)&&!O&&'<li id="dipmenu">'+K(463)+"</li>"||"")+'\n     <li id="fullscreenmenu">'+(K(74)+"</li>\n     ")+(p&&!O&&'<li id="viewoptions">'+K(48)+"</li>"||"")+'\n     <li id="quitButton1">'+
K(75)+"</li>\n     </ul>\n     <table>\n     "+c+"\n     <tr><td>"+K(76)+' </td><td><input type="range" id="zoomRange" value="'+h.zoomMult+'"/></td></tr>\n     <tr><td>'+K(77)+' </td><td><input type="range" id="scrollRange" value="'+h.scrollSpeed+'"/></td></tr>\n     <tr><td>'+K(78)+' </td><td><input type="range" id="opacityRange" value="'+h.menuOpacity+'"/></td></tr>\n     <tr><td>'+K(79)+' </td><td><label class="container"><input id="daynightvalue" type="checkbox" '+b+'><span class="checkmark"></span></label></td>\n     <tr><td>'+
K(82)+' </td><td><label class="container"><input id="deathsoundsValue" type="checkbox" '+("true"===h.deathsounds&&"checked"||"")+'><span class="checkmark"></span></label></td>\n     '+(!Ua&&"<tr><td>"+K(397)+' </td><td><label class="container"><input id="zoomPointerValue" type="checkbox" '+("true"===h.zoomPointer&&"checked"||"")+'><span class="checkmark"></span></label></td>'||"")+"\n     <tr><td>"+K(404)+' </td><td><label class="container"><input id="unlimitedZoomValue" type="checkbox" '+(1==h.unlimitedZoom&&
"checked"||"")+'><span class="checkmark"></span></label></td>\n     '+(!Ua&&"<tr><td>"+K(406)+' </td><td><label class="container"><input id="wasdValue" type="checkbox" '+("true"==h.wasd&&"checked"||"")+'><span class="checkmark"></span></label></td>'||"")+"\n     <tr><td>"+K(446)+' </td><td><label class="container"><input id="ccolorsValue" type="checkbox" '+(1==h.stdcolors&&"checked"||"")+'><span class="checkmark"></span></label></td>\n     <tr><td>'+K(456)+' </td><td><label class="container"><input id="scrollmouseValue" type="checkbox" '+
(1==h.scrollmouse&&"checked"||"")+'><span class="checkmark"></span></label></td>\n     <tr><td>'+K(517)+' </td><td><label class="container"><input id="delkeyValue" type="checkbox" '+(1==h.delkey&&"checked"||"")+'><span class="checkmark"></span></label></td>\n     </table>\n     '+(!O&&"\n     <div>\n     <span><span>"+K(80)+'</span><br/><input type="range" id="musicRange" value="'+h.musicRange+'"/></span><br/><br/>\n     <form id="musicSelect">\n     <div><input type="radio" name="mversion" value="0" checked /> Original</div>\n     <div><input type="radio" name="mversion" value="4" /> <a href="https://www.youtube.com/watch?v=zNg7e1N7ZZo" target="_blank" rel="noopener noreferrer">Orchestral Version</a> by Pau Garriga</div>\n     <div><input type="radio" name="mversion" value="1" /> <a href="https://www.youtube.com/user/rainheart666787/featured" target="_blank" rel="noopener noreferrer">Sharp Rain</a> Version</div>\n     <div><input type="radio" name="mversion" value="2" /> <a href="https://soundcloud.com/diemiurgo/tzar-adp-final" target="_blank" rel="noopener noreferrer">Diemiurgo</a> additional track</div>\n     <div><input type="radio" name="mversion" value="3" /> Remastered</div>\n     <div><input type="radio" name="mversion" value="mute" /> Mute</div>\n     </form>\n     <br />\n     <span><span>'+
K(81)+'</span><br/><input type="range" id="soundRange" value="'+h.soundRange+'"/></span><br/>\n     </div>'||"")+"\n     ");b.id="playingMenu";n("quitButton1").onclick=Zd;n("saveGame")&&(n("saveGame").onclick=Yd);n("dipmenu")&&(n("dipmenu").onclick=Rc);n("backToGame").onclick=function(){R(n("playingMenu").parentNode.parentNode);if(!O)A[99]();gi=!1;Ve()};b=G("button",b);b.className="closeIcon";b.onclick=n("backToGame").onclick;n("scrollmouseValue").onchange=function(){h.scrollmouse=this.checked&&1||
0};n("delkeyValue").onchange=function(){h.delkey=this.checked&&1||0};n("ccolorsValue").onchange=function(){vf(this.checked);h.stdcolors=this.checked&&1||0};n("deathsoundsValue").onchange=function(){h.deathsounds=this.checked;Di()};n("zoomPointerValue")&&(n("zoomPointerValue").onchange=function(){h.zoomPointer=this.checked});n("unlimitedZoomValue").onchange=function(){h.unlimitedZoom=this.checked&&1||0};n("wasdValue")&&(n("wasdValue").onchange=function(){h.wasd=this.checked});n("daynightvalue").onchange=
function(){h.nightcycle=this.checked};n("viewoptions").onclick=Zi;Ea||(n("fullscreenmenu").onclick=Hg);O||(Yi(n("musicRange")),n("musicRange").oninput=function(e){this.l.innerHTML=this.value+"%";1!==e&&(Ac.volume=parseInt(n("musicRange").value)/100,h.musicRange=n("musicRange").value)},n("musicRange").oninput(1));Yi(n("zoomRange"));n("zoomRange").oninput=function(e){this.l.innerHTML=this.value+"%";1!==e&&(h.zoomMult=n("zoomRange").value)};n("zoomRange").oninput(1);n("gameSpeed")&&(n("gameSpeed").onchange=
Lc,Yi(n("gameSpeed")),n("gameSpeed").value=p[34]/100,n("gameSpeed").oninput=function(){this.l.innerHTML="x"+this.value},n("gameSpeed").oninput(1),n("gameSpeed").min=1,n("gameSpeed").max=10);Yi(n("opacityRange"));n("opacityRange").oninput=function(e){this.l.innerHTML=this.value+"%";1!==e&&(h.menuOpacity=this.value,qe())};n("opacityRange").oninput(1);Yi(n("scrollRange"));n("scrollRange").oninput=function(e){this.l.innerHTML=this.value+"%";1!==e&&(h.scrollSpeed=this.value)};n("scrollRange").oninput(1);
if(!O){Yi(n("soundRange"));n("soundRange").oninput=function(e){this.l.innerHTML=this.value+"%";1!==e&&(uc.gain.value=parseInt(this.value)/100,h.soundRange=this.value)};n("soundRange").oninput(1);h.favMusic&&(n("musicSelect").mversion.value=h.favMusic);b=n("musicSelect").getElementsByTagName("input");c=0;for(var d=b.length;c<d;c++)b[c].onchange=Cc}}n("playingMenu").parentNode.parentNode.style.display="table"}}function Zd(){location.href=""}function $i(){return parseInt(h.color.substr(1),16)}
function aj(b){for(var c=gc(A[59](b.length),b.length),d=0;d<b.length;d++)c[d]=b[d]}window.nlsndts=function(b,c,d){b=Ug(b,4*c);c=new Uint8Array(2+b.length);c[1]=d;c.set(b,2);r(c);E(33,c)};
function bj(){A&&(Ub(),Ve(),m.g=1,m.j={description:n("gameFormName").value.substr(0,30),max:parseInt(n("gameMax").value),Jc:n("gamePrivate").checked,Lc:n("onlyverified")&&n("onlyverified").checked},2>m.j.max&&(m.j.max=2),50<m.j.max&&(m.j.max=50),h.gameDescription=m.j.description,cj(),z.f=1,Vc(n("gameForm")),m.Lb=!0)}
Pb=function(){var b=h.gameDescription||Kg(K(563),m.name);b=Tc(K(86)+': <input id=\'gameFormName\' type="text" spellcheck="false" value="'+b+'" maxlength="29" /><br />\n    '+K(87)+': <input id="gameMax" type="number" value="8" max="50" min="2"/><p>\n    '+K(85)+':  <label style="display: inline;margin-left: 7px;" class="container"><input id="gamePrivate" type="checkbox"><span class="checkmark"></span></label>\n    '+(h.sid&&"<p>"+K(440)+':  <label style="display: inline;margin-left: 7px;" class="container"><input id="onlyverified" type="checkbox"><span class="checkmark"></span></label>'||
"")+"<br>\n    ",1);b.id="gameForm";b=G("button",b,K(2),"width:100%");b.id="cc1";b.onclick=bj};function Yd(){A[176]()}
window.svggme2=function(){var b=A[42](),c=hc(),d=Ug(b,c[0]);c=c[1];r(d,b);if("true"==h.multithreading){b=d;d=new Uint8Array(d.length);for(var e=0;e<d.length;e++)d[e]=b[e]}c=URL.createObjectURL(new Blob([new Uint32Array([c]),d],{type:"application/octet-binary"}));d=document.createElement("a");d.style="display: none";d.href=c;c="savegame";O&&(A[240](0),c=Qd||"map");d.download=c+".tzared";d.click()};
function dj(){if(1<A[70]()){for(var b=document.getElementsByClassName("onlPlayer"),c=0;c<b.length;c++)F(b[c]);z.Fc||yi();E(7);A[64](~~(1E4*Math.random()))}}var ej,Vi;function fj(){if(!Vi||z.u){if(gj){for(var b=ba(gj.children),c=b.next();!c.done;c=b.next())if(c=c.value)c.style.width="",c.style.opacity="";gj.style.cssText=""}clearInterval(fj.a);n("wtr")&&(n("wtr").textContent=K(526),n("quitbutton").dataset.title="")}else Vi--,9>=Vi&&1<=Vi&&qc("crusade"),ej.innerHTML=Vi}
window.hdpsnd=function(b,c,d){b=gc(b,c);(d=hj(d))&&(d.g||D.host)&&d.send(b)};var ai,bi;function Ei(){!se&&D.host&&E(27);if(!O){var b=A[166]();b&&(ai=G("span",n("topinfo"),"<span style='font-size:15px'>\u262e</span> "+b+":00"));p[8]&&(bi=G("span",n("topinfo"),"","",1))}Ve();n("alert")&&M("alert");n("waitList")&&Vc(n("waitList"));z.u=1;z.w=Date.now();Hc();O||Ec();Gi=!1;A[41]();Jh()}Ei.A=!0;window.startMovement0=Ei;
function kf(){function b(q){var u,v,w,y,B,C,J,I;return xa(function(T){if(1==T.a)return u="https://g.tenor.com/v1/search?q="+d.value+"&key=LIVDSRZULELA&limit=20",k?u+="&pos="+20*k:k=0,qa(T,fetch(u),2);if(3!=T.a)return v=T.c,qa(T,v.json(),3);w=T.c;r(q,l);if(q!=l)return T.return();r(w);y=1;B={};C=ba(w.results);for(J=C.next();!J.done;B={Na:B.Na},J=C.next())B.Na=J.value,I=G("img",y?g:f),I.src=B.Na.media[0].nanogif.url,I.onclick=function(V){return function(){r(V.Na);mf(V.Na.media[0].gif.url);F(c)}}(B),
y^=1;T.a=0})}var c=G("div",document.body);c.className="gifsearch";var d=G("input",c);d.type="text";d.placeholder="\ud83d\udd0e\ufe0e";d.focus();var e=G("div",c),f=G("div",e),g=G("div",e),k=0,l=0,t=G("button",c);t.className="closeIcon";t.onclick=function(){return F(c)};e.onscroll=function(){e.offsetHeight+e.scrollTop>=e.scrollHeight&&(k++,b(l))};d.oninput=function(){Cb(g);Cb(f);k=0;l++;b(l)}}var Mc=document.getElementsByTagName("main")[0],gi=!1;function Ve(){gi=!1;Mc.style.cssText=""}
function Mi(){M("game");Ui();for(var b=document.getElementsByClassName("onlPlayer"),c=0;c<b.length;c++)F(b[c]);ij.a=void 0;Qa();z.id=void 0;z.f=0;m.j=void 0;D.close();Ue(5);m.g=0;A[69]()}function jj(b){b=parseInt(b);if(2>b||!b)b=2;50<b&&(b=50);n("mmplayers").innerHTML=b;b!==m.j.max&&(m.j.max=b,kj());return b}window.updateMax=jj;
function lj(){var b='<p id="onlineTopInfo"></p>\n<h3 id="wtr"></h3>\n<div id="multi21">\n<table class="players">\n<thead>\n<tr style="font-size:16px;text-transform:uppercase;color:var(--color1);border-bottom:2px solid #6e6e6e3b;"><td></td><td></td><td style="padding:15px 11px;">'+((!A[67]()&&K(103)||"")+'</td><td id="onltms">'+K(21)+' <span id="teamlock"></span></td><td id="onlrd">'+K(543)+'</td></tr>\n</thead>\n<tbody id="multiplayertable">\n</tbody>\n</table>\n<div id="chat">\n<div id="rominfo" style="font-size:13px;margin-left:10px;color:#ad995f"></div>\n<ul id="msgs">\n</ul>\n<input id="msginput" type="text" autocomplete="off" placeholder="chat"/>\n</div>\n</div>\n<div id="showGameInfo"></div>\n<div id="buttons"></div>\n<div id="gvw"></div>\n');
return n("game")?!1:(b=G("div",document.getElementsByTagName("main")[0],b),b.id="game",b.className="playermenu",!0)}var mj,nj;function oj(){if(vi)if(2!=mj){var b=A[70](),c=1==pj?3:2==pj?4:5==pj?1:2,d=~~(b/c),e=1==c?K(717):d;b%=c;for(var f=0;f<c-1;f++)e+="v"+(d+(0<b?1:0)),b--;n("rominfo").innerHTML=e}else n("rominfo").innerHTML=K(717);else{c=ub(vb);d="";e=!0;for(b=1;64>b;b++)1<c[b]&&(e=!1),c[b]&&(d&&(d+="v"),d+=c[b]);if(!e)for(b=0;b<c[0];b++)d+="v1";n("rominfo").textContent=e?K(717):d}}
window.rminfo=oj;var qj;
function rj(){if(lj()){n("teamlock").onclick=sj;var b=G("div",n("gvw"),"\u25bc [- - -]"),c=G("button",n("chat"),"GIF");c.className="gif";c.onclick=kf;b.onclick=function(){qj?(b.innerHTML="\u25bc [- - -]",R(n("gameList"))):(b.innerHTML="\u25b2 [- - -]",n("gameList").show());qj=!qj};Af=n("msgs");n("msginput").addEventListener("keyup",function(d){13===d.keyCode&&mf()})}else M("multi21"),n("multiplayertable").innerHTML="",n("showGameInfo").innerHTML="";n("gvw").appendChild(n("gameList"));qj?n("gameList").show():
R(n("gameList"));n("onlrd").style.cssText=Ii?"text-align:center":"display:none";n("onltms").style.cssText=vi?"display:none":""}var tj,uj;function vj(b){return"*A minimum of "+b+" matches and at least 1 match played in the last 2 weeks is required"}
function wj(){yb?E(34,xj(0)):D.i.addEventListener("open",function(){return E(34,xj(0))});var b=Tc("",2);b.id="rank";b.style.width="630px";b.style.minHeight="900px";var c=G("p",b,"","margin-bottom:16px;text-align:right;margin-top:0px;");L("button",c,566,"color:#0ff");var d=H("span",b,"display:flex;gap:7px");c=[K(556)+" - "+K(715)+" ~ 1500",K(556)+" - 1"+(K(716)+"1 ~ 1500")];for(var e={X:0};e.X<c.length;e={xa:e.xa,X:e.X},e.X++)e.xa=G("button",d,c[e.X]),e.X||(e.xa.style.opacity=1),e.xa.onclick=function(f){return function(){if(1!=
f.xa.style.opacity){tj.style.visibility="hidden";for(var g=ba(d.children),k=g.next();!k.done;k=g.next())k.value.style.opacity="";f.xa.style.opacity=1;E(34,xj(f.X));uj.textContent=vj(2==f.X?2:4)}}}(e);tj=G("div",b,K(53));uj=G("span",tj.parentNode,vj(4))}function yj(b,c){c?c[0]=b:c=new Uint8Array([b]);return c}function E(b,c){c?c[0]=b:c=new Uint8Array([b]);yb&&D.i.send(c)}function xj(b){var c=new Uint8Array(2);c[1]=b;return c}var zj="AD AE AF AG AI AL AM AO AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CT CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EN ER ES ET EU FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NW NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SW SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS WW XK YE YT ZA ZM ZT ZW XX".split(" ");
(function(){var b,c,d,e;return xa(function(f){switch(f.a){case 1:if(h.CCID){b=parseInt(h.CCID);f.a=2;break}return qa(f,fetch("https://tza.red/cdn-cgi/trace",{mode:"cors"}),3);case 3:return c=f.c,qa(f,c.text(),4);case 4:d=f.c,e=d.split("loc=")[1].substr(0,2),b=zj.indexOf(e),h.CCID=b;case 2:yb?E(36,xj(b)):D.i.addEventListener("open",function(){return E(36,xj(b))}),f.a=0}})})();var se;function Aj(b,c,d){b[c]=d&255;b[c+1]=d>>8&255;b[c+2]=d>>16&255}
function Bj(b){var c=new Uint8Array(4);Aj(c,1,b);return c}function Fb(b,c){c=Za(c);var d=new ArrayBuffer(2+c.length);d=new Uint8Array(d);d[1]=b;d.set(c,2);return d}function Db(b,c){c=Za(c);var d=new ArrayBuffer(4+c.length);d=new Uint8Array(d);Aj(d,1,b);d.set(c,4);return d}function Qi(b){return(new TextDecoder).decode(b)}function Cj(b,c){b=new Uint8Array(b.buffer,c||1);return Qi(b)}function Dj(b,c,d){b=new Uint8Array(b.buffer,c,d);return Qi(b)}
function Pi(b,c){return b[c+2]+(b[c+1]<<8)+(b[c]<<16)}function Ej(b){return Pi(b,1)}function Fj(b){var c=h.name;b=Za(b);c=Za(c);var d=Za(""),e=new ArrayBuffer(3+b.length+c.length+d.length);e=new Uint8Array(e);e[1]=b.length;e[2]=c.length;e.set(b,3);e.set(c,3+b.length);e.set(d,3+b.length+c.length);return e}function Gj(b){var c=Za(h.name),d=Za(""),e=new ArrayBuffer(6+c.length+d.length);e=new Uint8Array(e);e[1]=0;e[2]=c.length;Aj(e,3,b);r(e);6<e.length&&(e.set(c,6),e.set(d,6+c.length));return e}
function Hj(b,c,d,e){var f=m.name;e=Za(e);f=Za(f);var g=new ArrayBuffer(5+e.length+f.length);g=new Uint8Array(g);g[1]=b;g[2]=c;g[3]=d;g[4]=e.length;g.set(e,5);g.set(f,5+e.length);return g}function Za(b){return(new TextEncoder).encode(b)}window.kllf5=function(b){setTimeout(A[203],8500,b)};function Ij(){for(var b=D,c=b.s.slice(0),d=0;d<c.length;d++){var e=c[d];e.closed=!0;e.F&&e.F.close()}r(b.i);b.i.close();Hc()}
Bb.prototype.close=function(b){for(var c=this.s.slice(0),d=0;d<c.length;d++)c[d].close(1),r(c[d].timeout),c[d].timeout&&clearTimeout(c[d].timeout);if(b&&D.i)return D.i.close();this.s.length=0;E(1);this.host=!1};function kj(){var b=m.j.max-A[68]();E(8,xj(b))}function Jj(b){try{return JSON.parse(b)}catch(c){return r(c),!1}}window.NHretransmit=function(b,c,d){if(D.host){b=gc(b,c);c=D.s;for(var e=0;e<c.length;e++)c[e].id!=d&&c[e].send(b);Kj()}};window.nhcleanclose=function(){Ij()};
var Eb=[function(b,c){var d,e,f;return xa(function(g){if(1==g.a){b=Ej(c);c=Cj(c,4);if(hj(b))return g.return();d=Jj(c);if(!d)return g.return();r(d);e=Lj(b);e.setRemoteDescription(new RTCSessionDescription(d));return qa(g,e.createAnswer(),2)}if(3!=g.a)return f=g.c,qa(g,e.setLocalDescription(f),3);r(f);E(4,Db(b,JSON.stringify(f)));g.a=0})},function(b,c){var d,e,f;return xa(function(g){b=Ej(c);c=Cj(c,4);d=Mj(b);if(!d)return g.return();e=Jj(c);if(!e)return g.return();r(e);f=new RTCSessionDescription(e);
return qa(g,d.setRemoteDescription(f),0)})},function(b,c){var d,e,f;return xa(function(g){if(1==g.a){b=Ej(c);c=Cj(c,4);d=Mj(b);if(!d)return g.return();e=Jj(c);if(!e)return g.return();r(e);g.ea=2;return qa(g,d.addIceCandidate(e),4)}if(2!=g.a)g.a=0,g.ea=0;else{g.ea=0;var k=g.m.Sb;g.m=null;f=k;console.error("Error adding received ice candidate",f);g.a=0}})},function(b,c){var d,e,f,g,k,l,t,q;return xa(function(u){if(1==u.a){d=Ej(c);b=Pi(c,4);m.tb="#"+Dj(c,8,c.length-(d?8:16));location.replace("#"+m.tb);
se=c[7];A[66](b);m.D=b;r("message",d,se);if(!d)return qc("e_barrack1"),se=0,vi=1,Nj=0,Pf=c[c.length-8],nj=c[c.length-7],Ii=c[c.length-6],Oj(1),e=c[c.length-2],f=c[c.length-1],wi=g=Pi(c,c.length-5),mj=e,A[204](0,1,Pf),A[55](f+1),p=Oa[e].slice(),r(p),e&&(p[46]=g+2E3*nj,k=[0,0,0,0,2,4,4,4,6],p[6]=k[nj%k.length]),xi(),u.return();vi=Pf=0;A[204](se);if(!se)return Nj=d,Pj(d),u.return();l=parseInt(d);t=Lj(l,!0);return qa(u,t.createOffer(),2)}if(3!=u.a)return q=u.c,qa(u,t.setLocalDescription(q),3);E(6,Db(l,
JSON.stringify(q)));u.a=0})},function(b,c){se=c[4];b=Ej(c);c=Cj(c,5);r(b,c);m.tb="#"+c;Oj();setTimeout(Qj,5E3);A[204](se);A[66](b,1);m.D=b;yi();A[55](m.j.max+1);Ri(A[56](0,h.civi||0,$i(),b,0),17,m.name);Si()},function(b,c){if(n("index")){var d=Ej(c);b=Math.floor(Date.now()/1E3);d&&G("div",n("index"),d,"font-size:12px;background:url(nehhon/pop.gif) no-repeat;padding-left:26px;text-shadow:0px 0px 12px #000;background-size:20px !important;position:absolute;filter:drop-shadow(0px 0px 3px #000);top:4px;left:5px;color:#ffffffc2;");
if(c&&4<c.length){d=740>window.innerWidth||650>window.innerHeight?n("index"):Kb;var e=d.scrollTop,f=4;do{var g=c[f++],k=c[f++],l=c[f++],t=(c[f++]<<8)+c[f++],q=c[f++],u=(c[f++]<<16)+(c[f++]<<8)+c[f++],v=c[f++],w=void 0,y=void 0;1==q?w=!0:2==q&&(y=!0);q=w?Nb:Mb;var B=document.createElement("div");l&&50==k&&(B.Hb=1,6>g?k=6:k=g+(2-g%2));if(B.Hb){var C=k/2;C=C+(K(716)||"v")+C+"+"}else C=Qi(new Uint8Array(c.buffer,f,v));f+=v;l&&qb&&!B.Hb&&(C={"BR 1500":K(484)+" 1500","1V1":1+(K(716)||"v")+1,"FAST 1V1":K(564)}[C]||
C);!w&&l&&(B.className="pbl");v=G("div",B);G("div",v,"",!w&&y&&"color:#00c8c8").className="redCircle"+(!w&&" rgr"||"");v=G("div",B,C?Rj(C):K(85),!u&&"color:red");1==h.sid&&(v=G("button",v,"X","margin-left: 20px; margin-top: -11px; background: rgba(255, 0, 0, 0.38); color: red; font-size: 23px; "),v.onclick=Sj,v.kc=u);G("div",B,l&&!w?y?K(556):K(557):~~(t/60)+" "+(K(558)||"min")).className="tbtime";G("div",B,"<span>"+g+"</span><span>/</span><span>"+k+"</span>").className="tbplyrs";l&&w&&2<k&&(B.style.filter=
"hue-rotate(311deg)");B.Ub=u;t=b-t;if(!l||w)B.w=t,B.Ra=t,w&&(B.Ra*=-1);B.fc=y;B.Kc=l;!w&&u&&(B.onclick=Li);u||(B.style.opacity=.5);l&&!w&&(B.Ra=2E9*k+(y?1:0));g=!0;k=ba(q.children);for(l=k.next();!l.done;l=k.next())if(l=l.value,l.Ra<=B.Ra){q.insertBefore(B,l);g=!1;break}g&&q.appendChild(B);q.offsetParent?B.Dc=Tj:B.style.animation="unset"}while(f<c.length);Ua||(d.scrollTop=e)}Uj.m||(Uj.m=!0,setTimeout(Uj,5E3))}},function(b,c){b=Ej(c);(b=hj(b))&&Vj(b,1)},function(b,c){b=Ej(c);se?(b=hj(b))&&b.close():
0==b?(Xi(K(95)),qc("ressurect")):(r("del",Nj,b),c=Wc(b),A[73](b),Vi=0,z.u||(Nj==b&&(Xi(K(95)),qc("ressurect")),c&&zf(Kg(K(94),"<span>"+c+"</span>"),"ff4b4b")))},function(){if(!Gi){eb("changing host...");D.ta&&(clearTimeout(D.ta),D.ta=void 0);Wa("change host");A[155]();A[66](m.D,0);E(11);D.host=!1;D.eb&&(clearTimeout(D.eb),D.eb=void 0);for(var b=0;b<D.s.length;b++)D.s[b].closed=!0,D.s[b].close(1);D.s.length=0;Wj=void 0}},function(b,c){var d,e;return xa(function(f){switch(f.a){case 1:b=Ej(c);c=c[4];
r("UPDATE",b,c);if(Gi)return f.return();if(b==m.D){r("HOST");D.sb=1;D.ta=setTimeout(Xj,1E4);D.Vb=parseInt(c);A[66](m.D,1);f.a=2;break}A[66](m.D,0,1);D.host=!1;d=Lj(b,!0);return qa(f,d.createOffer(),3);case 3:return e=f.c,qa(f,d.setLocalDescription(e),4);case 4:E(6,Db(b,JSON.stringify(e)));case 2:A[154](b),f.a=0}})},function(b,c){b=Ej(c);c=Cj(c,4);r(c);h.sid=b;h.nm=c.substr(0,24);h.name=c.substr(24);n("accb").innerHTML=K(445);m.name=h.name;Ri(A[53]($i()),17,m.name);window.onbeforeunload=void 0;location.reload()},
function(b,c){Df={};Oi(c);r(Df)},function(){h.sid="";h.nm=""},function(b,c){c=c[1];r(c);"string"==typeof c?(bb("","Name changed to "+c),h.name=c):bb(Kg(K(544),c))},function(){},function(b,c){c=c[1];r(c);Yj=c},function(b,c){c=c[1]-1;b=[96,69,441,519][c];Ve();Vc(n("loadingOnline"));Ue();Xb(K(b),1)},function(b,c){b=c[1];if(c=Zj(Pi(c,2)))b?(c.onclick=void 0,b=c.children[0].children[0],b.className="redCircle",b.style.cssText="",c.className="",c.w=Math.floor(Date.now()/1E3),c.Kc&&c.fc&&(c.style.filter=
"hue-rotate(311deg)"),c.style.height="0px",c.style.opacity="0",c.style.border="none",c.children[3].children[2].innerHTML=c.children[3].children[0].innerHTML,setTimeout(ak,1E3,c)):c.offsetParent?(c.style.height="0px",c.style.opacity="0",setTimeout(F,1E3,c)):F(c)},function(b,c){b=c[1];if(c=Zj(Pi(c,2))){if(c.onclick&&c.Hb){var d;6>b?d=6:d=b+(2-b%2);c.children[3].children[2].innerHTML=d}d=c.children[3].children[0];d.offsetParent&&(d.style.color=parseInt(d.innerHTML)<b?"#0f0":"red",setTimeout(bk,250,d));
d.innerHTML=b}},function(b,c){b=c[1];if(c=Zj(Pi(c,2)))c=c.children[3].children[2],c.offsetParent&&(c.style.color=parseInt(c.innerHTML)<b?"#0f0":"red",setTimeout(bk,250,c)),c.innerHTML=b},function(b,c){b=Cj(c);bb("","Name changed to "+b);h.name=b},function(b,c){b=Ej(c);var d=Pi(c,4),e=c[7],f=c[8],g=Dj(c,9,e);c=Dj(c,9+e,f);r(d,c,g);Wi||(Wi=G("div",n("game"),'<div style="margin-bottom:14px;color:var(--color1)">'+K(520)+"</div>","position: fixed; background: rgba(0, 0, 0, 0.55); padding: 17px 24px; box-shadow: var(--boxsp); text-align: center; z-index: 9; right: 0px; top: 81px; border: 1px solid #f3cd5a1f; border-right: none;"));
G("div",Wi,ck(c,g,d),"margin-top:6px").B=b},function(b,c){b=Ej(c);if(Wi){c=ba(Wi.children);for(var d=c.next();!d.done;d=c.next())if(d=d.value,d.B==b){F(d);break}1==Wi.children.length&&(F(Wi),Wi=void 0)}},function(b,c){b=Ej(c);var d=hj(b);if(!d||d.closed)return r(b,"errnopeer");d.F&&Vj(d);dk(d,b,new Uint32Array(c.buffer,4))},function(b,c){b=Ej(c);var d=Df[b];d&&dk(d,b,new Uint32Array(c.buffer,4))},function(){A[205]();performance.now()},function(){vi&&Ei();A[206]()},function(){Vg(re,Math.round(performance.now()-
ue)+"ms")},function(b,c){Oi(c,1)},function(b,c){b=Ej(c);c=c[4];r("race",b,ek);var d=A[207](b,c);r(d,c);d&&b!=m.D&&ek[d-1]&&(ek[d-1].innerHTML=si(c))},function(b,c){b=Ej(c);var d=c[4],e=c[5];c=c[6];r("rgb",b,d,e,c);var f=A[208](b,d,e,c);f&&b!=m.D&&fk[f-1]&&(fk[f-1].children[0].style.color="rgb("+d+","+e+","+c+")")},function(){if(gj){for(var b=0;b<gj.children.length;b++)b!=pj&&(gj.children[b].style.width="0px",gj.children[b].style.opacity="0");gj.style.dd="0px"}n("wtr").innerHTML=K(529);n("quitbutton").dataset.title=
K(736);ej=G("span",n("wtr"),10,"display:inline-block;width:16px;text-align:right;color:var(--color1)");fj.a&&clearInterval(fj.a);Vi=10;fj.a=setInterval(fj,1E3)},function(){if(Pf&&!mj){p=Oa[1==pj||2==pj?6:pj].slice();p[46]=wi+2E3*nj;var b=[0,0,0,0,2,4,4,4,6];p[6]=b[nj%b.length]}A[209]()},function(b,c){r(c,"teams");b=(c.length-1)/2;for(var d=1;d<b+1;d++)A[210](d,c[d],c[d+b])},function(b,c){b=1;Cb(tj);tj.style.visibility="";var d=G("div",tj);G("div",d);G("div",d);G("div",d);G("div",d,"<div>"+K(478)+
"</div>");d=1;if(1<c.length){do{var e=Pi(c,b);b+=3;var f=c[b+1]+(c[b+0]<<8);b+=2;var g=c[b+1]+(c[b+0]<<8);b+=2;var k=c[b++],l=c[b++],t=Dj(c,b,l);b+=l;l=c[b++];var q=Dj(c,b,l);b+=l;l=G("div",tj);var u=d;if(1==e){var v=l;d--;u=99}var w=G("div",l);var y=3>=u?"#f0f":10>=u?"#0f0":20>=u?"#ff0":"#fff";G("div",w,1<e&&u||"-",99<u&&"font-size:10px").className="pos";G("div",w,"","background:"+y).className="plc";G("div",l,ck(q,t,e));t=G("div",l);t.className="plshape";for(q=0;q<k;q++)G("div",t,"",g&1<<q&&"color:#0f0");
g="";1<e&&(g=(Math.round(10*f/k)/10).toString().split("."),g=g[0]+".<span style='font-size:10px'>"+(g[1]?g[1].charAt(0):0)+"</span>");G("div",l,"<div>"+g+"</div>");d++}while(b<c.length)}v&&tj.appendChild(v)},function(b,c){b=Ej(c);c=c[4];Df[b].state=c;b!=m.D&&(b=gk[Df[b].pb])&&(b.children[0].children[0].checked=c)},function(){Xb(K(714),1);Ij()},function(){Xb(K(711),1)},function(){Xb(K(710),1)},function(b,c){hk(c)},function(){hk()},function(b,c){ik.value=Cj(c,1)},function(b,c){b=0;for(var d=1;d<c.length;d++){if(jk){var e=
jk[d-1];e&&(e.textContent=c[d],e.style.color=c[d]?"":"#787878")}c[d]>c[b+1]&&(b=d-1)}pj=b;oj()}],pj,ue,re,Wi;function bk(b){b.style.color=""}var Yj,Df=NaN;window.clrNHtimer=function(){clearTimeout(D.eb);D.eb=void 0};function Xj(){clearTimeout(D.ta);D.ta=void 0;D.eb=setTimeout(A[179],3E4);D.host=!0;setTimeout(Qj,5E3);A[66](m.D,1,1);Qj()}window.checkAlive=function(b){hj(b)||(A[73](b),r("KILL",b))};function Mj(b){if(b=hj(b))return b.F}
function hj(b){for(var c=D,d=0,e=c.s.length;d<e;d++)if(c.s[d].id==b)return c.s[d]}function kk(b,c,d){this.id=b;this.Rc=[];c&&(this.g=c);if(d){this.F=d;r(c,565656);var e=this;c?(this.channel=d.createDataChannel("nehhof",{ordered:!0}),lk(e)):d.ondatachannel=function(f){e.channel=f.channel;lk(e)}}D.s.push(this);d||(E(9,Bj(this.id)),this.open())}function mk(b){if(!b.closed){if(12E3<Date.now()-b.Yb)return b.close(),r("TIMEOUT");b.timeout=setTimeout(mk,12E3,b)}}
function Pj(b){Ri(A[62](),20,m.name);A[61](b,h.civi||0);Oj(1)}kk.prototype.open=function(){this.sb=!0;this.Yb=Date.now();this.jc&&clearTimeout(this.jc);r("DATACHANNEL OPEN");r(this);this.timeout=setTimeout(mk,12E3,this);if(z.u){if(void 0==D.ta&&A[178]()||!A[163](this.id))return this.close();D.sb++;void 0!==D.ta&&(r(D.sb,D.Vb,this.id),D.sb==D.Vb&&Xj())}else this.g&&(m.Lb=!0,Pj(this.id))};var Wj;
kk.prototype.send=function(b){var c=new Uint32Array(b.length+1);c[0]=c.length;c.set(b,1);if(this.channel){if("open"==this.channel.readyState){b=0;for(var d=Math.ceil(c.length/4E3);b<d;b++){var e=4E3*b,f=c.length-e;4E3<f&&(f=4E3);e=new Uint32Array(c.buffer,4*e,f);this.channel.send(e)}}}else Wj=c};
function nk(b,c,d){for(var e=0,f=Math.ceil(b.length/4E3);e<f;e++){var g=b.length-4E3*e;4E3<g&&(g=4E3);g=new Uint32Array(b.buffer,16E3*e,g);var k=new Uint32Array(g.length+1),l=new Uint8Array(k.buffer);k.set(g,1);l[0]=c;l[1]=d||0;D.i.send(k)}}function Kj(){Wj&&(nk(Wj,22),Wj=void 0)}window.rlyCheck=Kj;window.nppsnd=function(b,c,d){b=gc(b,c);c=new Uint32Array(b.length+1);c[0]=c.length;c.set(b,1);nk(c,26,d)};kk.prototype.close=function(b){console.trace();if(this.F)return this.F.close();b||ok(this)};
function Vj(b,c){var d=b.F;if(d){var e=b.channel;e&&(e.onopen=null,e.onmessage=null,e.onclose=null,e.close());d.onicecandidate=null;d.onconnectionstatechange=null;d.oniceconnectionstatechange=null;d.onsignalingstatechange=null;d.md=null;d.close();r(b.id);r("ALT-8");b.F=null;b.channel=null;c||E(9,Bj(b.id));b.open()}}
function dk(b,c,d){!b.Ea&&4E3<d[0]&&(b.Ea=new Uint32Array(d[0]),b.Db=0);if(b.Ea)if(b.Ea.set(d,4E3*b.Db),b.Db++,4E3*b.Db>=b.Ea.length)d=b.Ea,b.Ea=void 0;else return;d=new Uint32Array(d.buffer,4+d.byteOffset);b.Yb=Date.now();aj(d);A[60](c)}
function lk(b){var c=b.id,d=b.channel;d.binaryType="arraybuffer";r(b,"SETUP");d.onopen=function(){b.open()};d.onmessage=function(e){"closed"==d.readyState||b.closed||(e=new Uint32Array(e.data),dk(b,c,e))};d.onclose=function(e){ok(b);d.onmessage=null;r("DATACHANNEL CLOSE",b.id,e)};d.onerror=function(e){r(e,"ONERROR")};d.onbufferedamountlow=function(){var e=b.Rc;e.length&&(e=e.shift(),d.send(e),r("SEND22",e))}}
function Lj(b,c){var d=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),e=new kk(b,c,d);e.jc=setTimeout(function(){Vj(e)},6E3);d.onicecandidate=function(f){r("ICE",f);f.candidate&&E(5,Db(b,JSON.stringify(f.candidate)))};d.onconnectionstatechange=function(f){r(f,d.connectionState,e.closed);e.closed||("connected"==d.connectionState&&(e.ready=!0),"disconnected"==d.connectionState&&ok(e))};d.oniceconnectionstatechange=function(f){r(f);if(!e.closed){r(d.iceConnectionState,e.id);
if(!e.ready&&"failed"==d.iceConnectionState)return Vj(e);"failed"!=d.iceConnectionState&&"disconnected"!=d.iceConnectionState||ok(e)}};d.onsignalingstatechange=function(f){r(f);e.closed||"closed"==d.signalingState&&ok(e)};return d}
function cj(){D.host=!0;var b=m.j;if(!h.poiss&&!zb){var c=yj(0,Hj(b.max,b.Jc,b.Lc,b.description));Wa("crt game: "+b.description);Yj?pk(c):(Ni(),D.i.send(c));b=b.description.toLowerCase();if(-1<b.indexOf(atob("ZG9ub3Y="))||-1<b.indexOf(atob("ZDBuMHY=")))setTimeout(function(){return D.close(1)},8E3*Math.random()+2E3),h.poiss=1}}Bb.prototype.send=function(b){this.i.send(JSON.stringify(b))};
function Tb(b){var c=D;if(1!=c.i.readyState)return c.i.addEventListener("open",function(){return Tb(b)});r("conww",b);c=new Uint8Array(5);c[1]=parseInt(h.civi)||0;Aj(c,2,$i());E(31,c);r(c);c=b.length?yj(3,Fj(b.substr(1))):yj(3,Gj(b));Yj?pk(c):(Ni(),D.i.send(c))}
function Uj(){if(!z.u){for(var b=Math.floor(Date.now()/1E3),c=0;2>c;c++)for(var d=ba(Lb[c].children),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.children[2];f&&void 0!=e.w&&(f.innerHTML=Math.floor((b-e.w)/60)+" "+K(558))}setTimeout(Uj,5E3)}}var Lb;function Zj(b){if(Lb&&!(2>Lb.length))for(var c=0;2>c;c++)for(var d=ba(Lb[c].children),e=d.next();!e.done;e=d.next())if(e=e.value,e.Ub==b)return e}var Nb,Mb,Ob;function Tj(){this.style.animation="unset";this.Dc=void 0}
function ak(b){Nb.appendChild(b);setTimeout(function(){b.style.height="";b.style.opacity="";b.style.border=""},250)}function qk(){var b=this.T;h.avatar=b;r(this.T);E(19,xj(b));R(this.parentNode);n("avtimg").src="nehhon/Q"+b+".webp"}
function Jb(){var b=Xb("",1);b.id="account";L("p",b,15,"color:var(--color1)");var c=db(b,h.name);c.jd=1;c.maxLength=32;var d=L("button",b,443,"margin-left:8px;margin-bottom:6px");L("div",b,545,"color:#ccc;font-size:9px");G("button",b,"{"+K(703)+"} >","margin-top:15px;color:#81ff81;font-size:16px;letter-spacing:1px;text-transform:uppercase").onclick=function(){Vc(b);var k=Tc("",1);rk=L("div",k,53,"gap:20px;display:flex;flex-direction:column;align-items:flex-start");E(43)};L("p",b,546,"color:var(--color1)");
var e=G("div",b),f=H("img",e,"cursor:url(nehhon/hand.gif),default;box-shadow:#ff00008f 0px 0px 38px;border:1px solid rgba(255, 0, 0, 0.48);");f.src="nehhon/Q"+(h.avatar||113)+".webp";f.id="avtimg";var g=G("div",G("div",e,"","max-height:216px;overflow-y:auto;width:57px;margin:9px"));g.id="avsel";f.onclick=function(){if(""==g.innerHTML)for(var k=0;199>=k;k++){var l=G("div",g,"");l.onclick=qk;l.T=k}g.show()};d.onclick=function(){var k=c.value;k&&E(13,Za(" "+k))};L("button",b,442,"display:block;margin-top:20px;background:#920000").onclick=
function(){h.sid="";h.nm="";location.reload()}}var rk,ik;
function hk(b){r(b);var c=rk;Cb(rk);if(b){var d=h.sid,e=b[1],f=Pi(b,2),g=d==f,k=g?Dj(b,8,24):0,l=Dj(b,8+(g?24:0),e);e=8+(g?24:0)+e;cb(c,l);if(g){l=G("div",c);G("span",l,K(704)+" -> ","color:var(--color1)");ik=db(l,k);ik.style.width="216px";ik.style.fontSize="11px";ik.readOnly=!0;var t=H("button",l,"margin-left:9px;width:16px;height:16px;background:url(nehhon/refresh.webp);background-size:cover");t.onclick=function(){E(42);t.style.visibility="hidden"}}k=G("div",c);G("div",k,K(707)+":","font-size:12px;");
k=H("div",k,"border-left:2px solid rgba(255, 255, 255, 0.19);padding:4px;margin-top:9px;min-width:185px;display:grid;grid-template-columns:repeat(2,max-content);align-items:center;gap:2px 10px");l={};do{l.ma=Pi(b,e);e+=3;var q=b[e++],u=Dj(b,e,q);e+=q;l.wb=G("div",k,ck("",u,l.ma),(l.ma==f?"color:var(--color1);":"")+"font-size:11px");d==f&&l.ma!=f?(l.fb=G("div",k,"\u00d7","color:red;cursor:url(nehhon/hand.gif),default"),l.fb.onclick=function(y){return function(){E(44,Bj(y.ma));F(y.fb);F(y.wb)}}(l)):
G("div",k);r(u,l.ma);l={ma:l.ma,fb:l.fb,wb:l.wb}}while(e<b.length);L("button",c,g?706:712).onclick=function(){confirm(K(713))&&(E(41),hk())}}else{L("div",c,703,"color:var(--color1)");b=G("div",c);var v=db(b,"");v.style.width="159px";v.placeholder=K(704);v.maxLength=32;L("button",b,708,"margin-left:8px").onclick=function(){var y=v.value;r(y);y&&E(39,Za(" "+y))};c=H("div",c,"border-top:2px solid #ffffff45;padding-top:20px");var w=db(c,"");w.style.width="105px";w.style.textTransform="uppercase";w.placeholder=
K(709);w.maxLength=5;L("button",c,705,"margin-left:8px;margin-bottom:6px").onclick=function(){var y=w.value;y&&E(40,Za(" "+y))}}}
function Oj(b){if((m.g||b)&&!z.id){rj();Af.innerHTML="";M("index");Ve();Vc(n("loadingOnline"));ud("game");n("multi21").style.display="flex";Ve();b=m.tb;r(m.j||NaN);z.id=b;z.f=1;n("buttons").innerHTML="";vi?(ud("wtr"),n("wtr").innerHTML=K(526)):M("wtr");b='<span style="margin-left:80px;"><input id="onlineID" type="text" value="https://tza.red/#'+m.tb+'" /><button id="copyButton">'+K(385)+"</button></span>";if(m.g){var c=function(d){var e=A[70](),f=!D.s.length&&se?1:0;d<e+f&&(d=e+f);r(d,e);d=jj(d);
A[150](d+1);A[58]()};n("onlineTopInfo").innerHTML=' <button id="addAI" style="padding:6px;margin-right:26px;align-self:center;">'+K(90)+"</button>"+b+'<span id="spnpld" style="margin-left:auto"><div id="nplayersO"><img src="nehhon/pop.gif" /><span id="mmplayers">'+m.j.max+'</span><div id="rmmxctrl"><div id="sumpl">&#9650;</div><div id="respl">&#9660;</div></div></div></span>';n("sumpl").onclick=function(){A[67]()||c(m.j.max+1)};n("respl").onclick=function(){A[67]()||c(m.j.max-1)};n("addAI").onclick=
function(){if(!A[67]()){var d=A[70]();50>d+1&&(d+(D.s.length?0:1)>=m.j.max&&c(m.j.max+1),Ri(A[56](0,0,16777216*Math.random(),0,1),17,"AI"),kj(),A[58]())}}}else n("onlineTopInfo").innerHTML=b;n("copyButton")&&(n("copyButton").onclick=function(){n("onlineID").select();document.execCommand("Copy")},n("onlineID").value="http://tza.red/#"+z.id);m.g?(location.replace("#"+z.id),n("buttons").innerHTML='<button id="startbutton">'+K(92)+' \u25b6</button><button style="display:none" id="rndmapreturn">'+K(50)+
'</button><button id="optionbutton">'+K(48)+'</button><button id="maploadOnline"/>'+K(93).split("|")[0].toUpperCase()+'</button><button id="closebutton">'+K(13)+"</button>",n("startbutton").onclick=dj,n("optionbutton").onclick=ie,n("closebutton").onclick=Mi,n("maploadOnline").onclick=sk,n("rndmapreturn").onclick=function(){ud("addAI");n("optionbutton").style.display="inline-table";M("rndmapreturn");A[152](m.j.Wb);yi();c(m.j.Wb)}):(n("buttons").innerHTML='<button id="quitbutton">'+K(91)+"</button>",
n("quitbutton").onclick=Xi)}}var Nj;function ok(b){r(b);console.trace();var c=hj(b.id);if(c&&!c.closed&&b==c)if(c.closed=!0,!c.g||m.g||z.u){r(c);if(D.host){b=D.s;var d=b.indexOf(c);-1<d&&b.splice(d,1);A[73](c.id)}r(c.g,z.u,"admindel");E(14,Bj(c.id));c.g&&z.u&&!Gi&&E(10,Bj(c.id));z.u||(c=Wc(c.id))&&G("li",Af,Kg(K(94),c),"color:#ff4b4b")}else Xi(K(95)),qc("ressurect")}
function Sj(){if(confirm("AUSB")){var b=new Uint8Array(5),c=this.kc;b[1]=c&255;b[2]=c>>8&255;b[3]=c>>16&255;b[4]=c>>24&255;E(16,b)}}window.thereIsAnIdiot=function(b){r(b);if(m.D==b)return bb(K(97)),Mi();(b=hj(b))&&b.close()};function tk(b,c){b=G("a",b,K(112));b.className="returnmenu";b.onclick=Ue;c&&b.addEventListener("click",c)}var fk=document.getElementsByClassName("ucolor"),uk=document.getElementsByClassName("username"),ek=document.getElementsByClassName("race"),vk=document.getElementsByClassName("team");
function Qj(){D.host&&se&&(A[156](),Qj.w=Date.now(),setTimeout(Qj,5500))}window.pong=function(b){var c=Date.now()-Qj.w;hj(b)&&(A[157](b,c),r("pong"),n("game")&&Si())};
function ij(b){if(m.g&&"BUTTON"!=b.target.tagName&&"DIV"!=b.target.tagName&&"ucolor"!=b.target.className){ij.a&&(document.body.removeChild(ij.a),ij.a=void 0);var c=b.pageX;b=b.pageY;var d=this.pb;r(d);var e=document.createElement("div");e.style.top=b+"px";e.style.left=c+"px";e.className="onlPlayer";ij.a=e;r(this.Cb,this.pb);if(this.Cb.name)L("button",e,100).onclick=function(){A[71](d);m.od.bd("maxPlayers",A[70]());document.body.removeChild(e);ij.a=void 0};else{var f=this.Cb;c=document.createElement("button");
c.onclick=function(){A[74](d,-1);document.body.removeChild(e);ij.a=void 0};c.innerHTML=K(101);e.appendChild(c);c=document.createElement("button");c.onclick=function(){A[74](d,1);document.body.removeChild(e);ij.a=void 0};c.innerHTML=K(102);e.appendChild(c);this.yc||(c=document.createElement("button"),c.onclick=function(){r(22222,f);A[71](d);kj();document.body.removeChild(e);ij.a=void 0},c.innerHTML=K(100),e.appendChild(c),f&&(G("button",e,"BAN").onclick=function(){r(22222,f);E(18,Bj(f));A[71](d);document.body.removeChild(e);
ij.a=void 0}))}c=document.createElement("button");c.onclick=function(){document.body.removeChild(e);ij.a=void 0};c.innerHTML=K(13);e.appendChild(c);document.body.appendChild(e)}}
function Si(){var b=n("multiplayertable");if(b){var c=A[28]()-1||14;A[180]();var d=58;if(vi){6<c&&(c=6);var e=A[70]();6<=e&&(c=e+2-e%2,e=A[28]()-1,c>e&&(c=e))}7<c&&(d=54);8<c&&(d=49);9<c&&(d=44);10<c&&(d=42);11<c&&(d=39);12<c&&(d=37);14<c&&(d=35);15<c&&(d=33);16<c&&(d=32);26<c&&(d=31);27<c&&(d=30);28<c&&(d=29);29<c&&(d=28);30<c&&(d=27);31<c&&(d=26);32<c&&(d=25);33<c&&(d=24);34<c&&(d=23);35<c&&(d=22);b.innerHTML="";for(e=gk.length=0;e<c;e++){var f=H("tr",b,!1);G("td",f,"<div></div>","height:"+d+"px").className=
"ucolor";G("td",f,"  <span style='color:#ffffff73'>&horbar;</span> ").className="username";G("td",f).className="race";vi||(G("td",f).className="team");Ii&&gk.push(G("td",f,"","text-align:center"))}6>c&&G("tr",b,"","height:"+(260-46*c)+"px");A[54]();b=b.clientHeight-67;525<b&&(b=525);n("msgs").style.height=b+"px";n("msgs").scrollTop=n("msgs").scrollHeight}}window.setupPlayermenu=Si;function sj(){if(m.g)A[188]("\ud83d\udd12"!=this.innerHTML)}
window.mapWindow=function(){var b=n("showGameInfo");b&&(Cb(b),b=H("span",b,"display:block;width:516px;padding:4px 19px"),L("div",b,55,"color:var(--color1);text-align:center;border-bottom:2px solid #ffffff38;padding-bottom:3px"),A[240](0),G("div",b,Rj(Qd),"margin-top:19px;color:#fff"),A[240](1),G("div",b,Rj(Qd),"color:#ecd078;margin-left:4px;margin-top:11px;font-size:12px"),A[240](2),Qd&&G("div",b,"<span style='color:#fff'>"+K(57)+":</span> "+Rj(Qd),"margin-top:11px;font-size:12px"))};var wk;
function pk(b){wk?(wk=b,window.grecaptcha.reset(),n("nrobotdiv").parentNode.parentNode.parentNode.style.cssText=""):(wk=b,b=document.createElement("script"),b.src="https://www.google.com/recaptcha/api.js?onload=cllrobot&render=explicit",document.body.appendChild(b))}window.cllrobot=function(){Tc('<div class="g-recaptcha" id="nrobotdiv"></div>');r(window.grecaptcha);window.grecaptcha.render("nrobotdiv",{callback:xk,theme:"dark",sitekey:"6Lcw5wAaAAAAAC8nGPdUK8dE8LE2BcOFXI7lVtyM"})};
function xk(b){b=Za(b);var c=new Uint8Array(2+b.length+wk.length);c[0]=23;c[1]=wk.length;c.set(b,2);c.set(wk,2+b.length);D.i.send(c);wk=1;Ni();R(n("nrobotdiv").parentNode.parentNode.parentNode)}var jk,gj;function Zi(){ie(5)}
window.multiOptions=function(b,c){var d=n("showGameInfo");if(d){d.innerHTML="";var e=ic(b,c);b=e[1];var f=e[2],g=e[3],k=e[4],l=e[7],t=e[6],q=e[12],u=e[0],v=e[9],w=e[10],y=e[18],B=e[19];if(!m.g){p=[];for(var C=0;C<c;C++)p[C]=e[C]}if(Pf&&!mj)for(d.style.background="none",d.style.padding="0px",d.style.boxShadow="unset",d.style.width="unset",d.style.border="unset",d.style.backdropFilter="unset",b=[0,Kg(K(735),2),0,Kg(K(735),3)+"<br>"+K(484),0,Kg(K(735),4)+"<br>"+K(484),3,Kg(K(735),2)+"<br>"+K(523),4,
Kg(K(735),2)+"<br>"+K(394),5,K(717)+"<br>"+K(484)],gj=d=G("section",d),jk=[],f={},g=0;g<b.length;f={hb:f.hb},g+=2)f.hb=g/2,k=b[g+1],c=G("div",d),Jf(c,84*-f.hb),l=G("div",c),G("div",l,k),jk.put(G("span",l)),c.onclick=function(J){return function(){E(45,xj(J.hb))}}(f);else{d.style.cssText="";c=[K(28),K(29),K(30),K(31),K(32),K(33),K(525),K(524)];1E9<=b&&(b="***");1E9<=f&&(f="***");1E9<=g&&(g="***");1E9<=k&&(k="***");Ii&&(u="Auto");c=[K(1),u,K(26),rb[t]&&rb[t].name,K(42),w,K(27),c[l],K(11),v,K(35),K([36,
37,38,39][q]),K(396),y+" "+K(558),K(398),K([399,400,401][B])];G("span",d,b+"<img class='resource' src='nehhon/gold.gif' /> "+f+"<img class='resource' src='nehhon/wood.gif' /> "+g+"<img class='resource' src='nehhon/food.gif' /> "+k+"<img class='resource' src='nehhon/stone.gif' />","text-align:center;width:100%;display:block;border-bottom:2px solid rgb(156 137 79 / 27%);margin-bottom:9px;padding-bottom:9px");b=G("div",d);f=ba(c);for(g=f.next();!g.done;g=f.next())G("div",b,g.value);m.g||(G("span",d,
"+ "+K(461)+"...","cursor:url(nehhon/hand.gif),default;color:#ffd75dd1;font-size:11px;margin-top:12px;display:block").onclick=Zi);b=Pa();r("PR",b);b&&G("span",d,"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714 </span>"+b,"color:rgb(203,255,238);position:absolute;top:20px;right:21px")}}};if(location.search){var yk=new URLSearchParams(location.search);if(yk.has("desk")){var zk=new XMLHttpRequest;zk.open("GET","http://localhost:41334"+location.search,!0);zk.send(null);bb("","Desktop app open")}console.log(yk)}function Ak(b){if(Sb)Sb=!1;else if(!m.g){if(b)return location.reload();b=decodeURI(location.hash.substr(1));Sb=!0;Tb(b);Ub()}}
function Bk(b){if("RandomMap"==b)return Ck;if("Settings"==b)return Dk;if("About"==b)return Ek;if("Guide"==b)return Me;if("Changelog"==b)return Pe;if("Ranking"==b)return wj;location.hash=""}function wb(b){var c=location.hash.substr(1);if(c){if("#"==c.charAt(0))return setTimeout(Ak,500,b);z.u||Bk(c)&&Bk(c)()}}var Af;function Fk(b){for(var c=0,d=0;d<b.length;d++)c=b.charCodeAt(d),c=c*d+(c&d)+(c*c*3|88),c%=Math.pow(2,32);return c}
function bg(b,c,d,e,f,g,k,l,t){c||qc("chat");var q=f?'<span class="ttag">['+K(21)+"]</span>":"";if(d){f=A[77]()?sd:Af;r(d,b);if(5!==d){if(c)b='<span style="color:var(--color1)">'+K(407)+"</span>";else if(b=Rj(Jd(Kd(b,e))),r(d,b),"https://media.tenor.com/"==b.substring(0,24)){var u=b;b=""}else b=Jg(b);r(k,l,t);b=G("li",f,"<span>"+q+Wc(g,d)+" \u2014</span> "+b,f==sd&&void 0!=k&&"border-color:rgb("+k+","+l+","+t+")"||"");r(u);u&&(b=G("img",b),b.src=u,b.className="igif")}else G("li",f,b);f.scrollTop=
f.scrollHeight;A[77]()&&Lg()}}bg.a=!0;window.chat=bg;function Lg(){n("msgs1")&&(11==n("msgs1").children.length&&n("msgs1").removeChild(n("msgs1").children[0]),1==n("msgs1").children.length&&(Gk=setInterval(Hk,16E3)))}var Gk;function Hk(){n("msgs1")&&n("msgs1").children[0]&&n("msgs1").removeChild(n("msgs1").children[0]);n("msgs1")&&0==n("msgs1").children.length&&clearInterval(Gk)}function Rj(b){return String(b).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function mf(b){var c=b;if(z.u){var d=sd;b||(b=n("msginputGame").value);n("msginputGame").value=""}else d=Af,b||(b=n("msginput").value),n("msginput").value="";if(!z.f){if(36982==Fk(b.substr(0,7))){pe(A[110]);return}if(29027==Fk(b)){A[200](0);return}}""!==b&&(c||(b=Rj(Jg(b))),H("li",d,"border-color:"+m.color).innerHTML+="\n    <span>"+(n("teamchat")&&n("teamchat").checked&&'\n    <span class="ttag">['+K(21)+"]</span>"||"")+Wc(m.D,-1)+" \u2014</span> "+(c?'<img src="'+b+'" class="igif">':b),z.f&&(Ri(A[75](),
1024,b),A[76](b.length,n("teamchat")&&n("teamchat").checked)),d.scrollTop=d.scrollHeight,z.u&&Lg())}var Ik=document.getElementsByClassName("ucolor1"),Jk=document.getElementsByClassName("username1"),Kk=document.getElementsByClassName("race1"),Lk=document.getElementsByClassName("team1");function Mk(b){var c=1;2===b.button&&(c=-1);this.innerHTML=A[51](this.C,c)||"\ud83d\udec7"}
function Nk(b){var c=1;2===b.button&&(c=-1);vi?(b=(this.Jb+c)%4,0>b&&(b=3),this.Jb=b,this.innerHTML=si(b),E(29,xj(b))):this.innerHTML=si(A[52](this.C,c))}function Ok(){r(this.Fb,this);this.Fb&&(m.color=this.value,h.color=this.value);var b=parseInt(this.value.substr(1),16);if(vi)E(30,Bj(b));else A[57](this.C,b);"TD"==this.parentNode.tagName?this.style.color=this.value:fk&&fk[this.C-1]&&(fk[this.C-1].children[0].style.color=this.value,F(this))}function Pk(b){A[50](1+4*b.shiftKey+99*b.altKey)}
function Qk(b){A[50](-1-4*b.shiftKey-99*b.altKey)}
window.presetuprndtable=function(b){if(n("RandomMap"))ud("RandomMap");else{var c=G("div",document.getElementsByTagName("main")[0],'<div>\n        <div id="spbdy"><div id="load1" style="border-right:0px">'+K(671)+'</div><div id="edmap1">'+K(105)+'</div></div>\n        <table class="players" id="oneplayertable">\n        <tbody id="oneplayertbody">\n        </tbody>\n        </table>\n        <div style="margin-top:30px;display:flex;justify-content:center;">\n        <button id="start2" class="start startButton">'+K(92)+
' \u25b6</button>\n        <button class="start optionsButton" id="start1" >'+K(48)+"</button>\n        </div>\n        </div>");c.id="RandomMap";c.className="playermenu";tk(c);n("start1").onclick=ie;n("start2").onclick=Hi;n("load1").onclick=function(){sk()};n("edmap1").onclick=Rk}c=n("oneplayertbody");c.innerHTML="";c.insertAdjacentHTML("beforeend",'<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">\u2212</button></td><td>'+K(103).toUpperCase()+
"</td><td>"+K(21).toUpperCase()+"</td></tr>");for(var d=0;d<b;d++)c.insertAdjacentHTML("beforeend",'<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>');n("addPlayer").onclick=Pk;n("removePlayer").onclick=Qk};var Sk=["VIP"];function Wc(b,c){var d=Df[b];c=d&&d.name||0<c&&Jd(Kd(c,20))||-1==c&&m.name||"";var e=0;if(d){e=d.id;var f=d.role;1==f&&(e=Sk[f-1])}return ck(d&&d.clan,c,e,!b&&z.f)}
function ck(b,c,d,e){return'<span class="nmtg">'+(b&&'<span class="clanTag">{'+Rj(b)+"}</span>"||"")+"<span "+(e?"style='color:#ff0'":"")+' class="usnm">'+Rj(c)+"</span>"+(d&&'<span class="verified"'+("string"==typeof d?" style='color:#ff6eff'":"")+">#"+d+"</span>"||"")+"</span>"}
window.recvtrib=function(b,c,d,e,f,g){f=Wc(g,f);n("msgs1").innerHTML+="<li>"+Kg(K(449),"-> <span style='color:#0f0'>"+(b&&b+' <img src="nehhon/gold.gif">'||"")+(c&&c+' <img src="nehhon/wood.gif">'||"")+(d&&d+' <img src="nehhon/food.gif">'||"")+(e&&e+' <img src="nehhon/stone.gif">'||"")+"</span>",f)+"</li>";Lg()};
function Tk(b){r(b,this);var c=document.createElement("input");c.type="color";c.C=this.pc;c.value=this.oc;c.Fb=!0;c.onchange=Ok;c.onblur=Ok;c.style.cssText="position:absolute;top:"+b.clientY+"px;left:"+b.clientX+"px;width:0px;height:0px;opacity:0;padding:0px;border:0px";document.body.appendChild(c);setTimeout(function(){c.click()},25)}var gk=[];function Yc(b){return(b=Df[b])&&255!=b.flag?'<span class="flag" style="background-position-x:-'+21*b.flag+'px"></span>':""}
window.onlineTable=function(b,c,d,e,f,g,k,l,t,q){vi&&(q=!0);var u=!A[246]();if(n("teamlock")){Vg(n("teamlock"),q?"\ud83d\udd12":"\ud83d\udd13");var v=0==g,w=Xc(e),y=g==m.D;c||(c="\ud83d\udec7");b=Wc(g,b);Df[g]&&(Df[g].pb=f);var B=hj(g);B&&(b+="<span style='opacity:.5;font-size:8px;color:#"+(B.F&&"0f0"||"ff0")+"'>&nbsp;"+(B.F&&"P2P"||"proxy")+"</span>");t&&(b+="<span style='opacity:.5;margin-left:4px;font-size:8px;color:#0ff'>"+t+"ms</span>");if(n("multiplayertable")){t=n("multiplayertable").getElementsByTagName("tr");
var C=f+1;e=parseInt(w.substr(1),16);e=[e>>16&255,e>>8&255,e&255];if(fk[f]){fk[f].children[0].style.color="rgb("+e[0]+","+e[1]+","+e[2]+")";uk[f].innerHTML="<div>"+(b+Yc(g))+"</div>";if(m.g&&y||B&&B.g)uk[f].style.color="#f3cd5a";uk[f].style.color;if(v){if(k){u?(vk[f].innerHTML=c,m.g&&(Cb(vk[f]),b=G("button",vk[f],c),b.onmousedown=Mk,b.C=C)):Cb(vk[f]);vk[f].style.opacity="0.25";fk[f].style.opacity="0.25";uk[f].style.opacity="0.25";return}uk[f].style.color="#fff900"}if(!k&&(y||v&&m.g)){if(ek[f].children[0]){vk[f]&&
(vk[f].children[0]?vk[f].children[0].innerHTML=c:vk[f].innerHTML=c);ek[f].children[0].innerHTML=si(d);return}vk[f]&&(vk[f].innerHTML="",q&&!m.g?vk[f].innerHTML=c:(b=G("button",vk[f],c),b.onmousedown=Mk,b.C=C,v&&(b.style.color="#fff900")));b=document.createElement("button");b.onmousedown=Nk;b.C=C;b.Jb=d;b.innerHTML=si(d);ek[f].appendChild(b);v&&(b.style.color="#fff900");fk[f].onclick=Tk;fk[f].pc=C;fk[f].oc=w}else(u?vk[f]&&(m.g||y&&!q?(Cb(vk[f]),b=G("button",vk[f],c),b.onmousedown=Mk,b.C=C):vk[f].innerHTML=
c):Cb(vk[f]),k)?v||(ek[f].innerHTML="("+Jd(Kd(l,20))+")"):ek[f].innerHTML=si(d);Ii&&(Cb(gk[f]),d=Uk(gk[f]),d.checked=Df[g].state,y?d.onclick=Vk:(d.disabled=!0,d.parentNode.style.cursor="not-allowed"));m.g&&(t[f].onclick=ij,t[f].Cb=g,t[f].yc=y,t[f].pb=f+1)}}}};function Vk(){if(Vi)return this.checked=!this.checked;r(this.checked);E(35,xj(this.checked?1:0))}
window.randomMapTable=function(b,c,d,e,f){for(e=e.toString(16);6>e.length;)e="0"+e;e="#"+e;Jk[f].innerHTML='<input value="'+Jd(Kd(b,20))+'" type="text">';b=Jk[f].getElementsByTagName("input")[0];b.onchange=Wk;b.cb=f+1;b.maxLength=20;b=Lk[f].getElementsByTagName("button")[0];b.C=f+1;b.onmousedown=Mk;b.innerHTML=c||"\ud83d\udec7";c=Kk[f].getElementsByTagName("button")[0];c.C=f+1;c.onmousedown=Nk;c.innerHTML=si(d);var g=document.createElement("input");g.type="color";g.C=f+1;g.value=e;g.Fb=0==f;g.style.color=
e;Ik[f].appendChild(g);g.onchange=Ok;Ik[f].onclick=function(){return g.click()}};function Ck(){M("index");A[67]()&&Qa();A[50](0,parseInt(h.civi))}function sk(){var b=document.createElement("input");b.type="file";b.accept=".tzared";b.onchange=Xd;b.click()}
function Xk(){M("index");if(n("CustomMap"))M("customMapcont"),ud("CustomMap");else{var b=G("div",document.getElementsByTagName("main")[0],'<table id="mapcache"></table>\n<div id="customMapcont" style="display:none">\n<table class="players" id="customaptable">\n<tbody id="custombody">\n</tbody>\n</table>\n<button style="margin-left:40px" id="startCustom" class="start startButton">'+K(92)+'</button>\n<button style = "margin-left:40px" id="editCustom" class="start"> '+K(105)+"</button>\n</div>");b.id=
"CustomMap";b.className="playermenu";tk(b,function(){F(n("CustomMap"))});n("startCustom").onclick=function(){M("customMapcont");Hi()};n("editCustom").onclick=Rk}}function Xd(){z.f||O||Xk();var b=this.files[0];r(b);var c=new FileReader;c.onload=Yk;c.readAsArrayBuffer(b)}window.rcgini=function(b,c){p=ic(b,c).slice(0);r(p,"WW")};function Zk(){jc(function(){A[122]();Id();vf();A[244]();Ed()})}
function Yk(b){r(b);z.f&&(m.j.Wb=m.j.max);b=b.target.result;var c=new Uint8Array(b,4),d=(new Uint32Array(b,0,1))[0];r(d,c);var e=c.length;b=A[44](e);for(var f=0;f<e;f++)window.HEAPU8[b+f]=c[f];c=A[45](4*d,e,z.f,1);if(O)c?Zk():$k(function(){A[45](4*d,e,z.f);Zk()});else{if(!c)return bb("too many players for this custon map");if(z.f)return M("addAI"),M("optionbutton"),n("rndmapreturn").style.display="inline-table",Bd(n("nplayersO")),n("maploadOnline").value="",z.Fc=!0;M("RandomMap");ud("customMapcont");
n("custombody").innerHTML="";al.length=0;A[46]()}}function xc(b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onload=function(e){e=e.target.response;Ea||bl({url:b,buffer:e});c(e)};d.send()}function Ai(){var b=K(104),c;try{"granted"!=Notification.permission&&Notification.requestPermission(function(){});var d=new Notification(b,{icon:"nehhon/807.png",body:void 0,requireInteraction:!1});c||(c=5550);setTimeout(function(){d.close()},c)}catch(e){}}
function cl(b){for(var c="",d=0,e=b.length;d<e;d++)c+=Ti[b[d]];return c}Ea||fb[cl([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]===cl([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])||(ec=Da);
function fe(b){if(b){var c=A[47]();b=Sg(A[83](55==b),c*c*4);if(Xa)var d=Math.pow(2,Math.ceil(Math.log2(c)));var e=performance.now();x.useProgram(S);x.activeTexture(x.TEXTURE1);fe.h?(x.bindTexture(x.TEXTURE_2D,fe.h),Xa?(x.getExtension("OES_texture_float"),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,c,c,0,x.RGBA,x.FLOAT,b)):x.texImage2D(x.TEXTURE_2D,0,x.RGBA32F,c,c,0,x.RGBA,x.FLOAT,b)):(fe.h=x.createTexture(),x.bindTexture(x.TEXTURE_2D,fe.h),Xa?(x.getExtension("OES_texture_float"),x.texImage2D(x.TEXTURE_2D,
0,x.RGBA,d,d,0,x.RGBA,x.FLOAT,null),x.texSubImage2D(x.TEXTURE_2D,0,0,0,c,c,x.RGBA,x.FLOAT,b)):x.texImage2D(x.TEXTURE_2D,0,x.RGBA32F,c,c,0,x.RGBA,x.FLOAT,b),rh(),x.uniform1i(x.getUniformLocation(S,"img_data"),1));x.useProgram(U);x.activeTexture(x.TEXTURE2);Aa.rd=performance.now()-e;fe.c=!1}else fe.c=!0}window.setupTerrainTXT=fe;fe.c=!1;window.stpTupdtr=function(){fe.c=!0};var A,vb;
window.moduleLoaded=function(){var b=window.Module,c=Object.keys(b),d=c.length,e="synchroHash rnd setupRandom randomTerrain test shapoint Uint16Array boolArray test2 searchUnit setupResources movtablexe test3 setupGL getBufferID executeOrder Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen crtStxt configTerrain delTexs touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf updKngs mouseOut rstrRNDmap kngremainng idddamin runnxtcycl pong updtping refreshPlayerInfo tradingsum tradingresum selectoridest strtrading playerReconnect n2addss delAsyncPointer peacetime menustate prvbuild stpTactil checkDelAnim updresources wrkstate chtgspd mapVisibility chvisibility svggame shwRCR ckMnhst dellmitTest rOnlen stdiplomacy dpChange sndTribs shwsts empvtr trrbs trrwtr tmlck chmnlen chscrntype shICNu tchTime gtORDuIC shRCICNu shRCNLY gfastNF rcSEL unittable gtbonuses buildtable gnfoTYPE gdfltprops disctimeout chonltyp onlpulse onlstr pidchngsrc pidchngsrgb strgmonl chonltm wdtsetup wdtunit wdtkingdom wdtterrain dclslen edstdcl ruleadd shwrule eventadd shallrules edrulename shwevent chevactyp chkxkingdom confirmsel selname colorevsel delfromids viewfromids updevent chkxkingdomval areaactv areavw crntIDS ruleprops rulereps rleoprtn stdQ updmapname rtnmapname actntxt rluchkids chkxidsval eddreload chdipcntrl diptype EDmulpselect rluch2kids chk2xidsval chCRcptr chuCRcptr moddipops stphnames spvsVal btbl gtteam mddtable bmddtable mddpnter ordprps ordlen imddtable tmddtable rtrnconsts".split(" ");A=
[];A.length=e.length;for(var f=0,g=e.length;f<g;f++)for(var k=e[f],l=0;l<d;l++){var t=c[l];if("__"==t.substr(0,2)&&-1<t.indexOf(k)){A[f]=b[t];break}}vb=new fc(A[5](),4096);A[23]();A[23]();A[23]();Ri(A[53]($i()),17,m.name||"Guest");A[109](486,Ea,!!window.indexedDB,Math.floor(Math.random()*Math.pow(2,32)));b={antialias:!1,alpha:!1,depth:!0};c=document.createElement("canvas");c.id="canvas";h.webgl&&"2"!=h.webgl||(x=c.getContext("webgl2",b));x||(x=c.getContext("webgl",b),Xa=!0);Ab();tb();window.ontouchstart=
function(){r(123123);Ua=!0;A[169](1);window.ontouchstart=void 0}};function Ri(b,c,d){b=Kd(b,c);for(var e=0;e<c;e++)b[e]=d.charCodeAt(e)}
if(window.indexedDB&&!Ea){var dl=window.indexedDB.open("nh2019",486),el;dl.onsuccess=function(){el=dl.result;Ea||fl(function(){})};dl.onupgradeneeded=function(){el=dl.result;try{el.objectStoreNames.contains("basic")&&el.deleteObjectStore("basic"),el.objectStoreNames.contains("maps")||el.createObjectStore("maps",{keyPath:"id",autoIncrement:!0}),el.objectStoreNames.contains("mapsBlobs")||el.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),el.objectStoreNames.contains("basic")||el.createObjectStore("basic",
{keyPath:"url"})}catch(b){console.error(b)}}}function bl(b){if(el)try{el.transaction(["basic"],"readwrite").objectStore("basic").add(b).onsuccess=function(){}}catch(c){console.error(c)}}function fl(b){if(el&&!Ea)try{var c=el.transaction(["basic"],"readonly");c.objectStore("basic").getAllKeys?c.objectStore("basic").getAllKeys().onsuccess=b:b({target:{result:[]}})}catch(d){}else b({target:{result:[]}})}
window.changeresources=function(b,c,d,e){if(!O)for(b=[b,c,d,e],c=[nd,od,pd,qd],d=0;4>d;d++)b[d]==Math.pow(2,31)-1&&(b[d]="***"),Vg(c[d],b[d]||"0")};var gl,hl,il=1,jl,kl,Z,ll,ml,nl,ol,pl;
function Wd(){if(!n("edsel")){if(n("rules"))return Bd(n("rules").parentNode.parentNode);var b=Tc("",2,"",1);b.id="rules";gl=[];for(var c=[576,ql,637,rl,636,sl],d=0;3>d;d++){var e=G("div",b,"",0<d&&"opacity:0.3;pointer-events:none");L("span",e,c[2*d]);var f=G("div",e);gl[d]=f;G("button",e,"+").onclick=c[2*d+1]}A[220]();b=G("section",b);R(b);hl=b;nl=G("select",b,"","margin-right:25px;display:none");for(c=0;c<tl.length;c+=2)L("option",nl,tl[c]).value=c/2;nl.onchange=function(){var g=parseInt(nl.value);
A[223](g);ul=g;vl[1].children[1].innerHTML=K(tl[2*g])};ol=G("select",b,"","margin-right:25px;display:none");for(c=0;c<wl.length;c+=2)L("option",ol,wl[c]).value=c/2;ol.onchange=function(){var g=parseInt(ol.value);A[223](g);ul=g;vl[2].children[1].innerHTML=K(wl[2*g])};ll=G("span",b);c=G("button",b);c.className="dplbtt";c.onclick=function(){var g=xl,k=yl[g];A[237](g,1);g?(gl[1].innerHTML="",gl[2].innerHTML="",A[218](yl[0],0,1)):(gl[0].innerHTML="",A[220]());gl[g].children[k].onclick()};c.dataset.title=
K(649);c=G("div",b);ml=G("div",c);Z=G("div",c);jl=H("span",b,"height: 31px; display: flex; padding: 0px 10px; padding-top: 10px; margin-top: 10px; border-top: 2px solid #ffffff17; justify-content: space-between; align-items: center");kl=H("input",jl,"height:20px;border-left:2px solid var(--color2);padding-left:8px;background:#ffffff0a");pl=H("span",jl,"display:flex;align-items:center;gap:7px;font-size:12px;color:var(--color1)");kl.maxLength=40;kl.oninput=function(){for(var g=kl.value.substr(0,40).trim(),
k=ub(vb),l=0;l<g.length;l++)k[l]=g.charCodeAt(l);vl[xl]&&(vl[xl].children[0].textContent=g);A[221](g.length,xl)};if(gl[0].children[0])gl[0].children[0].onclick()}}var ul,zl,Al,Bl,Cl,Dl,El,Fl,Gl,Hl,Il,Jl;function Kl(b){b=tl[2*b+1];ll.innerHTML="";Z.innerHTML="";ml.innerHTML="";Array.isArray(b)?Ll(b,ll,"#ffffff2e"):b()}function Ml(b){b=wl[2*b+1];ll.innerHTML="";Z.innerHTML="";ml.innerHTML="";Array.isArray(b)?Ll(b,ll,"#ffffff2e"):b()}
window.btmnu=function(b,c,d,e,f,g,k,l,t,q,u,v,w,y,B,C){ll.innerHTML="";ul=b;zl=c;Al=e;Bl=f;Cl=g;Fl=l;Gl=t;Hl=d;Dl=q?gc(u,q):[];El=v?gc(w,v):[];Il=C;Jl=B;pl.innerHTML="";1==y?(nl.value=b,Bd(nl),G("span",pl,K(640)+" ( ! )"),le(pl,function(J){Il=J;Nl()},Il),G("span",pl,K(639)+" ( || )","margin-left:12px"),le(pl,function(J){Jl=J;Nl()},Jl),R(ol),Kl(b)):(ol.value=b,Bd(ol),R(nl),Ml(b))};var Ol,Pl;window.untProps=function(b,c,d){Ol=K(b);Pl=[c,d]};
function Ll(b,c,d,e){for(var f={I:0};f.I<b.length;f={vb:f.vb,I:f.I,Aa:f.Aa},f.I+=2)if(f.Aa=L("button",c,b[f.I]),f.vb=b[f.I+1],f.Aa.onclick=function(g){return function(){Z.innerHTML="";c==ll&&(ml.innerHTML="");g.vb();c!=ll&&(e?Hl=g.I/2:zl=g.I/2,Nl());for(var k=ba(c.children),l=k.next();!l.done;l=k.next())l.value.style.cssText="";g.Aa.style.background=d;g.Aa.style.opacity=1}}(f),!f.I&&c==ll)f.Aa.onclick()}
function Ql(b){var c=G("div",Mc);c.id="edsel";var d=n("rules").parentNode.parentNode;R(d);L("button",c,112).onclick=function(){Bd(d);F(c);b()}}var Rl;
function Sl(b){var c=b?El:Dl;Rl.innerHTML="";b={};c=ba(c);for(var d=c.next();!d.done;b={ib:b.ib,La:b.La},d=c.next())d=d.value,b.ib=d,A[226](d),b.La=G("div",Rl,Ol+(' <span style="color:var(--color1)">('+(Pl[0]+","+Pl[1])+")</span>"),"color:#dedede;line-height:19px;padding:4px 0px;font-size:13px;border-bottom:1px solid #ffffff1f"),d=G("button",b.La,"\u00d7"),d.className="closeIcon",d.onclick=function(e){return function(){A[228](e.ib);F(e.La)}}(b),G("button",b.La,"\ud83d\udc41\ufe0f","margin:0px 10px;padding:1px;float:right;background:#ff00ff29;").onclick=
function(e){return function(){A[229](e.ib);Ql(function(){return A[225](2)})}}(b)}window.ruresize=function(){n("rules")&&(Vc(n("rules")),il=1)};function Tl(b,c){b=Ul(b,c?Gl?1:0:Fl?1:0,[625,619],function(d){c?Gl=d:Fl=d});b.style.marginLeft=0;b.style.fontSize="12px";return b}
function Vl(b,c){A[234](b);var d=H("div",Z,"display:flex;justify-content:flex-start;align-items:center;gap:30px");Rl=G("div",d,"","padding:10px;height:141px;overflow:auto;width:250px;box-shadow:rgb(0 0 0 / 45%) 0px 0px 10px inset;margin-right:-19px");Sl(b);L("button",d,624,"height:161px;width:93px;font-size:11px").onclick=function(){return Wl(b)};c||(c=H("div",d),G("span",c,K(618)+": ","font-size:14px;color:#a99557"),Tl(c,b))}window.updIDS=function(b,c,d,e){Dl=c?gc(b,c):[];El=e?gc(d,e):[]};
function Wl(b){var c=G("div",Mc);c.id="edsel";var d=n("rules").parentNode.parentNode;R(d);L("button",c,24,"background:#04ff0036").onclick=function(){return A[225](1)};L("button",c,535,"background:#ff000036").onclick=function(){return A[225](0)};L("button",c,112).onclick=function(){Bd(d);A[225](2);F(c);Sl(b)};A[227]()}function Nl(){A[230](ul,zl,Hl,Al,Bl,Fl,Gl,Cl,Il,Jl)}
function Xl(b){var c=H("div",Z);c.className="centerrule";b&&Ul(c,Fl?1:0,[625,619],function(d){Fl=d});L("span",c,643,"opacity:0.6")}function $d(b){b=G("select",b,"","font-size:18px");for(var c=[625,626,58,59],d=0;d<c.length;d++)L("option",b,c[d]).value=d;d=0;for(var e=A[90]();d<e;d++)A[196](d),Kf.Oc||(G("option",b,K(Kf.name)+" ("+Rb[Kf.race]+")").value=d+c.length);return b}
function Yl(b,c){var d=$d(Z);d.value=c?Gl:Fl;d.onclick=function(){c?Gl=parseInt(d.value):Fl=parseInt(d.value);Nl()};if(!b){var e=G("select",Z,"","margin-left:5px;font-size:18px;");G("option",e,">").value=0;G("option",e,"<").value=1;e.value=Bl;e.onclick=function(){Bl=parseInt(e.value);Nl()};var f=G("input",Z,"","padding:3px;margin-left:5px;width:57px;font-size:18px");f.type="number";f.min=0;f.value=Al;f.onchange=function(){Al=parseInt(f.value);Nl()}}G("div",Z,K(6)+":","margin:3px;margin-top:9px;font-size:8px");
Zl(0,c)}function $l(b){A[196](b);return K(Kf.name)}function am(b,c,d){var e=le(b,function(){f.style.visibility=e.checked?"":"hidden";f.value=e.checked?0:-2147483647;f.onchange()},-2147483647!=c),f=db(b,c,function(){return d(de(f))},"number","transition:none;width:90px;margin-right:24px",2147483647,-2147483647);-2147483647==c&&(f.style.visibility="hidden")}function bm(){G("span",Z,K(635)+": ");Ul(Z,Bl,[">=","<=","="],function(b){return Bl=b})}
function cm(){var b=Hl<Math.pow(2,24),c=Ul(Z,Hl-Math.pow(2,24),dm(),function(e){return Hl=Math.pow(2,24)+e});le(Z,function(){Hl<Math.pow(2,24)?(R(d),Hl=Math.pow(2,24),c.value=0,Bd(c)):(R(c),Bd(d),Hl=0);d.value=Hl},b).style.marginBottom="-10px";var d=db(Z,Hl,function(){Hl=de(d);Nl()},"number","margin:10px;height:23px;width:90px");b?R(c):R(d)}function dm(){for(var b=[],c=0;16>c;c++)b[c]=K(687)+"-"+(c+1);return b}function em(){Ul(Z,Gl,dm(),function(b){return Gl=b})}
function fm(b,c){var d=c?Gl:Fl;ee(function(e){c?Gl=e:Fl=e;Nl()},b||Z,1).value=d}function ee(b,c,d){var e=G("select",c||Z);c=0;for(var f=A[28]();c<f;c++){var g=c?Jd(Kd(A[111](c),20)):K(23);G("option",e,g).value=c}L("option",e,22).value=2147483647;d&&(L("option",e,642).value=2147483646);e.onclick=function(){return b(de(e))};return e}function gm(b){return b?Jd(Kd(A[111](b),20)):K(23)}
function ae(b){function c(q){for(var u=ba(e),v=u.next();!v.done;v=u.next())if(v=v.value,q){if(!v.checked)v.onclick()}else if(v.checked)v.onclick()}var d=H("div",b,"height:unset;min-height:61px");d.className="kcheck";for(var e=[],f=0,g=A[28]();f<g;f++){var k=gm(f),l=G("div",d),t=le(l,function(){return 0},!0);e.put(t);G("div",l,k,"word-break:break-all")}b=H("div",b,"display:flex;justify-content:flex-end;margin-top:13px");L("button",b,622,"margin-right:10px;color:#9e8d57").onclick=function(){return c(1)};
L("button",b,623,"color:#9e8d57").onclick=function(){return c(0)};return e}function hm(b,c,d){var e=2147483647==d;(b.Va=d)&&!e||Jf(b,-28);e&&(b.style.visibility="hidden");b.onclick=function(){b.Va=!b.Va;Jf(b,b.Va?0:-28);A[243](c,b.Va)}}
function Zl(b,c){function d(u){for(var v=ba(f),w=v.next();!w.done;w=v.next())if(w=w.value,u){if(!w.checked)w.onclick()}else if(w.checked)w.onclick()}var e=G("div",Z);e.className="kcheck";var f=[],g=A[28](),k=G("div",e),l=le(k,function(u){A[224](g,u,c)},A[231](g,c));f.put(l);L("div",k,642);k={};k.ha=b||0;for(b=A[28]();k.ha<b;k={ha:k.ha},k.ha++){l=gm(k.ha);var t=G("div",e),q=le(t,function(u){return function(v){A[224](u.ha,v,c)}}(k),A[231](k.ha,c));f.put(q);G("div",t,l,"word-break:break-all")}e=H("div",
Z,"display:flex;justify-content:flex-end;margin-top:13px");L("button",e,622,"margin-right:10px;color:#9e8d57").onclick=function(){return d(1)};L("button",e,623,"color:#9e8d57").onclick=function(){return d(0)}}var im;function be(b,c,d,e){var f=H("select",b,"font-size:16px;margin:10px");for(b=0;b<d.length;b++){var g=d[b];0<=g?L("option",f,g).value=b:G("option",f,g).value=b}f.onchange=function(){e(parseInt(f.value))};f.value=c;return f}
function Ul(b,c,d,e){var f=H("select",b,"font-size:16px;margin:10px");for(b=0;b<d.length;b++){var g=d[b];0<=g?L("option",f,g).value=b:G("option",f,g).value=b}f.onchange=function(){e(parseInt(f.value));Nl()};f.value=c;return f}function km(){Ul(Z,Gl,[646,645],function(b){return Gl=b})}function lm(b){im=G("div",Z);im.id="ruleprop";A[235](b)}
function mm(b,c){G("span",Z,K(635)+": ");var d=H("select",Z,"font-size:21px;padding:0px;margin-bottom:12px;margin-left:7px");c=c?[">","<","="]:["=","+","\u2212","\u00d7","\u00f7"];for(var e=0;e<c.length;e++)G("option",d,c[e]).value=e;d.onchange=function(){Bl=de(d);Nl()};d.value=Bl;b||lm(0)}
function nm(){L("button",Z,616,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;").onclick=function(){A[232](1);Ql(function(){Cl=A[232](0);Z.innerHTML="";nm()})};var b=L("button",Z,617,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;"+(Cl?"background:#ff37ff1a":"opacity:0.5"));Cl&&(b.onclick=function(){A[233](1);Ql(function(){return A[232](0)})})}
function om(b,c){ml.innerHTML="";Ll(b,ml,"#00ff0026",c);ml.children[c?Hl:zl].onclick()}function pm(){return om([616,Vl,620,Yl,642,function(){return Xl(1)}])}function qm(){return om([616,function(){return Vl(0,1)},620,function(){return Yl(1,0,1)},642,Xl])}function rm(b,c,d,e){e&&(d="0"+d);b.Bc=d;e=ba(c.children);for(var f=e.next();!f.done;f=e.next())if(f=f.value,f.Bc>d){c.insertBefore(b,f);return}c.append(b)}
function sm(b){var c=H("div",Z);c.className="tchgrid";b&&(b=Tl(Z),b.style.display="",b.style.marginBottom="0px",c.style.cssText="height:136px;margin-right:20px");b=A[90]();for(var d=ic(A[242](b),b),e={Y:0};e.Y<b;e={Y:e.Y},e.Y++){var f=A[191](e.Y,0,0,1);if(f){var g=d[e.Y],k=document.createElement("div"),l=K(A[89](e.Y));rm(k,c,l,g);G("div",k,l);l=G("div",k);Jf(l,f);l.className="dataOrder";f=H("div",k,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");le(f,function(t){return function(q){return A[243](t.Y,
q)}}(e),g)}}}
var tl=[608,[612,pm,614,nm],634,[612,pm,482,function(){var b=G("div",Z,"","display:flex;justify-content:center;align-items:center;height:100%;gap:5px"),c=G("input",b,"","width:68px;font-size:23px");c.type="number";c.min=0;c.value=Cl;c.onchange=function(){Cl=parseInt(c.value);Nl()};G("span",b,"m")},631,function(){return om([612,function(){return Vl(1)},620,function(){return Yl(1,1)}],1)}],652,[612,pm,653,function(){Ul(Z,Cl,[658,659,660,661,662],function(b){return Cl=b})},631,function(){return om([620,function(){return Yl(1,
1)},612,function(){return Vl(1)}],1)}],605,pm,607,pm,668,[62,function(){bm();for(var b=H("div",Z,"display:flex;align-items:center;gap:7px"),c=ic(A[242](4),4),d={ia:0};4>d.ia;d={ia:d.ia},d.ia++)Zc(b,d.ia),am(b,c[d.ia],function(e){return function(f){return A[243](e.ia,f)}}(d))},6,function(){return Zl(1)}],594,function(){return Zl(1)},593,function(){return Zl(1)},679,function(){Ul(Z,Bl,[">","<"],function(c){return Bl=c});var b=db(Z,Al,function(){Al=de(b);Nl()},"number","width:150px");G("span",Z,"ms")},
680,function(){return Zl(1,0)},685,[612,function(){return om([620,function(){return Yl(1)},616,Vl,642,function(){return Xl(0)}])},656,function(){return om([620,function(){return Yl(1,1)},616,function(){return Vl(1,1)},642,function(){return Xl(0)}],1)}],683,[612,function(){return om([616,Vl,620,Yl,642,function(){return Xl(1)},6,function(){return Zl(1)}])},687,function(){em();Ul(Z,Cl,[">","<","="],function(b){return Cl=b});cm()}],684,[612,pm,630,function(){return mm(0,1)}],692,[6,function(){return Zl(1)},
616,function(){return sm(1)}]],wl=[602,[612,function(){var b=G("div",Z,"","display:flex;justify-content:center;flex-direction:column;gap:18px"),c=G("button",b,$l(Bl),"height: 48px; background: url(nehhon/iconunits.webp) no-repeat, #00000042; width: max-content; padding-left: 60px;padding-right:12px;outline:1px solid #ffffff0d");Jf(c,A[193](Bl));c.onclick=function(){pe(function(f){Bl=f;Nl();c.innerHTML=$l(f);Jf(c,A[193](f))})};var d=G("div",b,K(629)+":"),e=G("input",d,"","margin-top:10px;padding:3px;margin-left:5px;width:60px;");
e.type="number";e.min=0;e.value=Al;e.onchange=function(){Al=parseInt(e.value);Nl()};b=G("div",b,K(6)+": ");fm(b)},630,function(){return lm(1)},628,function(){return om([614,nm,620,function(){return Yl(1,1,1)},612,function(){return Vl(0,1)},642,Xl])}],592,[612,function(){return om([620,function(){return Yl(1,0,1)},612,function(){return Vl(0,1)},642,Xl])},627,function(){var b=G("div",Z),c=G("select",b);b=[632,408,7,664,665,666,674,418];for(var d=0;d<b.length;d++)L("option",c,b[d]).value=d;c.value=Bl;
c.onclick=function(){Bl=parseInt(c.value);Nl()}},631,function(){return om([614,nm,620,function(){return Yl(1,1,1)},612,function(){return Vl(1,1)},642,Xl],1)}],598,[612,qm,630,function(){return om([644,mm,470,km],1)}],586,qm,580,qm,587,qm,582,[612,qm,6,function(){return fm(0,1)}],594,function(){return Zl(1,0)},593,function(){return Zl(1,0)},597,[65,function(){A[241](0,1);var b=db(Z,Qd,function(){for(var c=b,d=ub(vb),e=0;e<c.value.length;e++)d[e]=c.value.charCodeAt(e);r(b.value.length);A[241](b.value.length)},
"text","width:500px");b.placeholder=K(65)},6,function(){return Zl(1,0)}],667,[629,function(){mm(1);for(var b=H("div",Z,"margin-top:15px;display:flex;align-items:center;gap:7px"),c=ic(A[242](4),4),d={ja:0};4>d.ja;d={ja:d.ja},d.ja++)Zc(b,d.ja),am(b,c[d.ja],function(e){return function(f){return A[243](e.ja,f)}}(d))},6,function(){return Zl(1,0)}],681,[612,function(){return om([616,function(){return Vl(0,1)},620,function(){return Yl(1,0,1)},642,Xl,6,function(){return Zl(1,0)}])},687,function(){em();Ul(Z,
Cl,["=","+","\u2212","\u00d7","\u00f7"],function(b){return Cl=b});cm()}],689,[6,function(){return Zl(1)},616,sm],694,[616,function(){var b=G("div",Z);b.className="dplr";for(var c=ic(A[242](7),7),d={ka:0};7>d.ka;d={ka:d.ka},d.ka++)le(b,function(g){return function(k){var l=b.children[g.ka+7];l.style.visibility=k?"":"hidden";k&&(Jf(l,-28),l.Va=0);A[243](g.ka,k?0:2147483647)}}(d),2147483647!=c[d.ka]);d=["shenemies","shview","shcontrol"];for(var e=0;e<d.length;e++){var f=G("div",b);f.className=d[e];hm(f,
e,c[e])}for(d=0;4>d;d++)e=G("div",b),e.className="shres",Zc(e,d),hm(e,d+3,c[d+3])},695,function(){return Zl(1,0)},696,function(){return Zl(1,1)}],697,[612,function(){return om([616,function(){return Vl(0,1)},620,function(){return Yl(1,0,1)},642,Xl])},631,function(){return om([614,nm,620,function(){return Yl(1,1,1)},612,function(){return Vl(1,1)},642,Xl],1)}]],yl=[],vl=[],tm=[];
window.shrule=function(b,c,d,e){var f=G("div",Z),g=H("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");L("span",g,638,"color:#ffe594");var k=H("input",g,"width:40px");k.type="number";k.min=0;k.value=b;G("div",g,"0 =","color:#ffffff70");G("div",g,"&infin;","font-size:31px;margin-top:-1px;margin-left:-7px;color:#ffffff70");k.onchange=function(){return A[236](parseInt(k.value),-1,-1)};g=H("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");L("span",
g,648,"color:#ffe594");var l=H("input",g,"width:80px");l.type="number";l.min=0;l.value=d;l.onchange=function(){return A[236](-1,-1,parseInt(l.value))};G("div",g,"ms","color:#ffffff70;margin-left:-6px");g=H("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;opacity:0.4");L("span",g,647,"color:#ffe594");var t=H("input",g,"width:80px");t.type="number";t.min=0;t.value=c;t.onchange=function(){return A[236](-1,parseInt(t.value),-1)};G("div",g,"ms","color:#ffffff70;margin-left:-6px");
G("span",f,K(610)+" ->"+(e?"":" <span style='color:#989898'>"+K(641)+"<span>"));f.id="cond";tm[0]=G("div",f);tm[1]=G("div",f)};window.shrules=function(b,c,d){c?b=Jd(Kd(b,c)):b=K(611)+"-"+d;um(0,d,b)};
window.shevents=function(b,c,d,e,f,g,k,l){c?b=Jd(Kd(b,c)):b=K(1==f?578:577)+"-"+e;um(f,e,b,d);1==f&&(c=tm[k],k&&G("span",c,"||","color:var(--color1)"),G("span",c,(g&&"<span style='color:red;margin-right:1px'>!</span>"||"")+b,"color:#"+(g?"ff8585":"85ff85")),k||G("span",c,"&&","color:var(--color1)"),l&&(tm[0].lastChild?tm[0].removeChild(tm[0].lastChild):F(tm[1].children[0])))};window.shactions=function(){};var xl;
function um(b,c,d,e,f){var g=G("div",gl[b]);g.B=c;var k=G("div",g,d);b&&L("span",g,1==b?tl[2*e]:wl[2*e]);g.onclick=function(t){if(!t||t.target!=l)if(xl=b,vl[b]!=g||!b){if(t=vl[b])t.style.background="";yl[b]=g.B;vl[b]=g;g.style.background="#0028a247";kl.value=k.innerHTML;if(0==b){hl.show();Cb(Z);Cb(ml);Cb(ll);R(ol);R(nl);Cb(pl);for(t=1;3>t;t++){Cb(gl[t]);il&&(n("rules").children[t+1].style.cssText="");var q=vl[t];q&&(q.style.background="",vl[t]=void 0)}il=0;A[218](g.B,0)}else t=vl[1==b?2:1],vl[1==
b?2:1]=void 0,t&&(t.style.background=""),A[222](g.B,b)}};var l=G("button",g,"\u00d7");l.className="closeIcon";l.onclick=function(){var t=xl;F(g);A[237](b,0,g.B);for(var q=0;3>q;q++)for(var u=gl[q],v=0;v<u.children.length;v++)u.children[v].B=v;r(yl[0],g.B);q=yl[0]==g.B;if(vl[t]==g||q||!gl[0].children.length)if(t&&yl[t]==g.B)vl[0].onclick();else if(gl[0].children[0])gl[0].children[0].onclick();else R(hl),Cb(Z),Cb(gl[1]),Cb(gl[2]);else if(q=vl[t].B,r(q,t),t)A[218](vl[0].B,1),A[222](q,t,1);else A[218](q,
1)};f&&(g.onclick(),kl.oninput())}function ql(){var b=A[217]();um(0,b,K(611)+"-"+b,0,1)}function rl(){if(gl[0].children.length){var b=A[219]();um(1,b,K(578)+"-"+b,0,1)}}function sl(){if(gl[0].children.length){var b=A[219](1);um(2,b,K(577)+"-"+b,0,1)}}var O=!1;
function $k(b){var c=Tc("",1);L("span",c,70,"margin-right:10px");var d=db(c,"",void 0,"number","",Math.pow(10,7)-1,0);d.focus();L("button",c,675,"display:block;margin:auto;margin-top:20px").onclick=function(){var e=A[251](de(d));1==e?(Vc(c),b()):2==e?(Vc(c),alert(K(690))):alert(K(688))}}function vm(b){O=!0;Hi(b)}function Rk(b){A[250]()?$k(vm):vm(b)}var wm=[{b:1,id:0,H:[0,2]},{b:3,id:1,H:[0,2]},{b:-1,Wa:1,id:2},{b:6,Wa:1,id:4,H:[0,2]},{b:5,id:6,H:[0,2]}];
function ce(b,c,d){var e=d||im,f=[];c=A[201](c);e=H("div",e);for(var g={},k=0;k<wm.length;g={R:g.R,ba:g.ba},k++){var l=wm[k];if(0==l.id){if(!b[l.id]&&1==c)continue}else if(l.H&&0>l.H.indexOf(c))continue;G("div",e,l.name&&K(l.name),"background:url(nehhon/icons2.webp) 0px "+-20*l.b+"px;width:20px;height:20px");var t=b[l.id],q=G("div",e);g.ba=G("span",q);g.R=void 0;le(q,function(u){return function(v){u.R.value=v?1:2147483647;if(u.R.onchange)u.R.onchange();v?Bd(u.ba):R(u.ba)}}(g),2147483647!=t).style.cssText+=
"float:left;margin-right:5px;margin-top:-1px;";g.R=G("input",g.ba);2147483647==t&&R(g.ba);g.R.type="number";g.R.value=t;f[l.id]=g.R;l.Wa&&(G("span",g.ba," / ","font-size:21px"),t=G("input",g.ba),t.type="number",t.value=b[l.id+1],f[l.id+1]=t)}for(c=0;c<f.length;c++)f[c]&&(e=f[c],e.max=2147483647,e.min=-1);if(!d)for(d=0;d<b.length;d++)f[d]&&(f[d].onchange=function(){for(var u=0;u<b.length;u++)f[u]&&(b[u]=parseInt(f[u].value));u=ub(vb);for(var v=0;v<b.length;v++)u[v]=b[v];A[123](2147483647)});return f}
window.editProps2=ce;
function xm(b,c,d,e,f){r(b,d);0>c&&(c=ym(c));if(!b)return A[202](c);var g=[{b:1,id:0,H:[0,2]},{b:3,id:1,H:[0,2]},{b:-1,Wa:1,id:2},{b:6,Wa:1,id:4,H:[0,2]},{b:5,id:6,H:[0,2]}];if(f)var k=im;else k=Tc(""),k.className="unitProps",e&&(k.className="viewonly"),k.parentNode.parentNode.style.position="fixed",k.style.minWidth="300px";var l=[];if(!(0<d||e)){G("span",k,K(516),"margin-right:15px;color:var(--color1)");var t=Uk(k)}if(!f){var q=G("button",k);q.className="closeIcon";q.onclick=function(){Vc(k);if(!e){for(var B=
0;B<b.length;B++)l[B]&&(b[B]=parseInt(l[B].value));if(d){r(b);B=ub(vb);for(var C=0;C<b.length;C++)B[C]=b[C];A[123](d);r(l)}else{if(t.checked)p[zm]&&(p[zm]=0,p.splice(zm+1,7));else{if(!p[zm]){for(B=0;7>B;B++)p.splice(zm+1,0,0);p[zm]=1}r("s",b);for(B=0;7>B;B++)p[zm+1+B]=b[B]}Am(0,p)}}}}c=A[201](c);var u=H("div",k,!e&&!f&&"margin-top:34px");for(q=0;q<g.length;q++){var v=g[q];r(v.id,b[v.id]);if(0==v.id){if(!b[v.id]&&1==c)continue}else if(v.H&&0>v.H.indexOf(c))continue;G("div",u,v.name&&K(v.name),"background:url(nehhon/icons2.webp) 0px "+
-20*v.b+"px;width:20px;height:20px");var w=G("div",u),y=G("input",w);y.type="number";y.value=b[v.id];l[v.id]=y;v.Wa&&d&&(G("span",w," / ","font-size:21px"),w=G("input",w),w.type="number",w.value=b[v.id+1],l[v.id+1]=w)}for(g=0;g<l.length;g++)l[g]&&(c=l[g],e&&(c.disabled=!0),c.max=2147483647,c.min=-1,c.oninput=Bm);if(d&&!f){G("span",u);g=G("select",u);c=0;for(q=A[28]();c<q;c++)v=c?Jd(Kd(A[111](c),20)):K(23),A[132](c),G("option",g,v).value=c;G("option",g,K(22)).value=Math.pow(2,31)-1;g.value=b[7];l[7]=
g}t&&(t.parentNode.style.display="inline",p[zm]||(t.checked=!0,R(u)),t.onclick=function(){t.checked?R(u):u.style.display=""});if(f)for(f=0;f<b.length;f++)l[f]&&(l[f].onchange=function(){for(var B=0;B<b.length;B++)l[B]&&(b[B]=parseInt(l[B].value));r(b);B=ub(vb);for(var C=0;C<b.length;C++)B[C]=b[C];A[123](2147483647);r(l)})}window.editProps=xm;function M(b){n(b)&&(n(b).style.display="none")}function ud(b){n(b)&&(n(b).style.display="block")}
function wf(b){O&&(b=parseInt(n("brushSize").value)+b,b>n("brushSize").max?n("brushSize").value=n("brushSize").max:1>b?n("brushSize").value=1:n("brushSize").value=b,n("brushSize").onchange())}function ke(){var b=Tc("",1),c=A[254](),d=H("div",b,"display:flex;align-items:center;gap:8px");L("div",d,516);le(d,function(f){f?Cb(e):(Cm(e),A[252](3));A[254](1,!f)},!c);var e=G("div",b);c&&(Cm(e),A[252](3))}
function Cm(b){var c=A[28]();Dm=H("div",b,"grid-template-columns:repeat("+c+",auto)");Dm.className="dpltbl wbak";for(b=0;b<Math.pow(c,2);b++)G("div",Dm);Dm.children[0].style.height="calc(100% - 12px)"}var Em=[function(b){Dm=H("div",b,"margin-top:10px;gap:10px 14px;display:grid;grid-template-columns:auto auto");Dm.className="wbak";A[103](2)},function(b){Cm(b);A[103](1)}],Dm;
function je(){var b=Tc("",1);L("span",b,620,"margin-bottom:5px");var c=A[246]();be(b,c,[673,672],function(){c=c?0:1;F(Dm);Em[c](b)});Em[c](b)}window.dpltbl0=function(b,c,d,e){c=Jd(Kd(c,20));H("div",Dm,"padding-left:8px;border-left:2px solid "+Xc(d)).textContent=c;var f=db(Dm,e,function(){me(f);A[105](b,de(f))},"number","width:40px",1E3,0)};
function Fm(b,c,d,e){var f=Dm.children;b.onmouseenter=function(){f[c].style.background="#ffffff47";f[d*e].style.background="#ffffff47"};b.onmouseout=function(){f[c].style.background="";f[d*e].style.background=""}}
window.dpltbl=function(b,c,d,e){c=Jd(Kd(c,20));var f=A[28](),g=ub(vb),k=Dm.children;k[b].style.cssText="align-self:end;writing-mode:vertical-rl;border-top:2px solid "+Xc(d)+";padding:7px 5px";k[b*f].style.cssText="justify-self:end;border-left:2px solid "+Xc(d)+";padding:5px 7px";k[b].textContent=c;k[b*f].textContent=c;for(c={v:0};c.v<f-1;c={Ga:c.Ga,na:c.na,Ha:c.Ha,v:c.v,wa:c.wa,Ja:c.Ja,Ia:c.Ia},c.v++)if(c.na=c.v+1,3==e)c.na!=b&&(c.Ga=le(k[b*f+c.na],function(l){return function(){A[245](l.Ga.checked,
l.na,b,e)}}(c),g[c.na]),c.Ga.style.backgroundPositionX="0px",Fm(c.Ga,c.na,b,f));else if(0==e){if(c.v>=b-1)break;c.Ja=0;c.Ha=0;c.wa=le(k[b*f+1+c.v],function(l){return function(){l.Ha=1;r(b,l.v+1,l.wa.checked);A[245](l.wa.checked,b,l.v+1);if(l.Ja)l.Ja=0;else l.Ia.onclick();l.Ha=0}}(c),g[c.v+1]);Fm(c.wa,c.v+1,b,f);c.Ia=le(k[b+(1+c.v)*f],function(l){return function(){l.Ha||(l.Ja=1,l.wa.onclick())}}(c),g[c.v+1]);c.Ia.style.opacity=.25;Fm(c.Ia,b,c.v+1,f)}};
window.chglmap=function(b,c){x.useProgram(S);Xa?(x.uniform1f(x.getUniformLocation(S,"mapSize"),Math.pow(2,Math.ceil(Math.log2(b)))),x.uniform1f(x.getUniformLocation(S,"mapSize2"),b)):x.uniform1f(x.getUniformLocation(S,"mapSize"),b);x.useProgram(U);x.uniform1f(x.getUniformLocation(U,"mapSize"),b);x.uniform1f(x.getUniformLocation(U,"zMax"),96*b);c||(A[130](b),fe())};function Xc(b){for(b=b.toString(16);6>b.length;)b="0"+b;return"#"+b}
window.setupEditorPlayerTable=function(b,c,d,e,f){d=Jd(Kd(d,20));var g=Xc(c);c=ge;var k=H("input",c,"width:13px");k.type="color";k.value=g;k.onchange=function(){A[104](b,parseInt(k.value.substr(1),16));Id()};g=G("input",c);g.value=d;g.cb=b;g.onchange=Wk;for(d={Ba:0};4>d.Ba;d={Ca:d.Ca,Ba:d.Ba},d.Ba++)d.Ca=H("input",c,"width:60px"),d.Ca.type="number",d.Ca.value=f[d.Ba],d.Ca.onchange=function(t){return function(){A[107](b,de(t.Ca),t.Ba)}}(d);var l=le(c,function(){return A[141](b,100*l.checked+1,0,1)},
e);G("button",c,"...","padding:3px 8px").onclick=function(){return Gm(b)};e=G("button",c);e.className="closeIcon";e.onclick=function(){return A[126](b)}};function Hm(){var b=Im.data,c=Jm.data,d=n("invrtimg").checked;r(d);for(var e=255*parseInt(n("rngcnvs").value)/100,f=0;f<b.length;f+=4){var g=(b[f]+b[f+1]+b[f+2])/3;d&&g<e||!d&&g>=e?(c[f]=2,c[f+1]=29,c[f+2]=45):(c[f]=34,c[f+1]=55,c[f+2]=0);c[f+3]=255}n("prevcan").getContext("2d").putImageData(Jm,0,0)}var Im,Jm;
function Uk(b){var c=document.createElement("label");c.className="container";var d=document.createElement("input");d.type="checkbox";d.checked=0;var e=document.createElement("span");e.className="checkmark";c.appendChild(d);c.appendChild(e);b.appendChild(c);return d}function Km(){this.l.innerHTML='<div style="background:url(nehhon/icons2.webp) no-repeat 0px -200px;width:20px;height:20px;display:inline-block;margin-bottom:-6px;"></div>x'+this.value/100}
function Lm(){this.l.innerHTML=this.value+"%"}function Mm(){this.l.innerHTML=this.value}function Nm(){this.l.innerHTML=this.value+"m"}function Om(){this.l.innerHTML=this.value+K(558)}function Pm(){this.l.innerHTML=ab(1E3*parseInt(this.value))}function Qm(){this.l.innerHTML=this.value+"s"}
function ne(){var b=this,c,d,e,f,g,k,l,t,q,u,v,w,y;return xa(function(B){if(1==B.a)return c=new Image,c.src=window.URL.createObjectURL(b.files[0]),qa(B,c.decode(),2);d=A[47]();e=n("mmimg");e.innerHTML="";f=H("canvas",e,"position: static;margin:28px;display:block;width:291px");f.id="prevcan";g=G("input",e);g.type="range";g.id="rngcnvs";Yi(g);g.oninput=function(){this.l.innerHTML=this.value+"%";Hm()};g.l.innerHTML="50%";g.value=50;G("span",e,K(458),"margin-left:10px");k=Uk(e);k.id="invrtimg";k.onchange=
Hm;f.width=d;f.height=d;l=f.getContext("2d");l.imageSmoothingEnabled=!0;l.fillStyle="#fff";l.fillRect(0,0,d,d);t=c.width;q=c.height;u=t>q?t:q;v=d/u;t=Math.floor(t*v);q=Math.floor(q*v);l.drawImage(c,(d-t)/2,(d-q)/2,t,q);Im=w=l.getImageData(0,0,d,d);Jm=new ImageData(d,d);Hm();y=G("button",n("mmimg"),K(2),"margin-bottom:36px;margin-left:22px");y.onclick=Rm;URL.revokeObjectURL(c.src);B.a=0})}
function Rm(){var b=A[186](),c=A[187](),d=A[47]();d=Tg(A[78](1),d*d);for(var e=Jm.data,f=0;f<e.length;f+=4)d[f/4]=2==e[f]?c:b;r(d);A[124]();fe.c=!0}
function Gm(b){var c=Tc("",1);c.id="mapPropsXtra";for(var d=G("div",c),e=[9,4,11,38],f={Z:0};f.Z<e.length;f={Z:f.Z},f.Z+=2)L("span",d,e[f.Z]),db(d,A[139](b,e[f.Z+1]),function(g){return function(){A[139](b,e[g.Z+1],de(this)+1)}}(f),"number");if(A[141](b))for(f={V:0};2>f.V;f={V:f.V},f.V++)L("span",d,[10,34][f.V]),db(d,A[141](b,0,f.V),function(g){return function(){me(this);this.value=A[141](b,de(this)+1,g.V)}}(f),"number","",100,f.V?0:1);L("button",c,12,"display:block;margin:auto").onclick=function(){return A[140](b)}}
var ge;function Zc(b,c){b=G("img",b);b.src="nehhon/"+["gold","wood","food","stone"][c]+".gif";return b}function he(){Cb(ge);G("button",ge,"+").onclick=function(){return A[114](1)};L("div",ge,6,"justify-self:baseline");for(var b=0;4>b;b++)Zc(ge,b);L("div",ge,20);G("div",ge);G("div",ge);A[103]()}window.editorPlayerTable=he;function Wk(){var b=17;this.value.length<b&&(b=this.value.length);for(var c=ub(vb),d=0;17>d;d++)c[d]=0;for(d=0;d<b;d++)c[d]=this.value.charCodeAt(d);A[106](this.cb);O&&Id()}
function Sm(b){O&&(b.className="onlyrnd",b.dataset.ld="Only random maps")}var al=[];window.customMapTable=function(b,c,d,e,f,g,k){var l=G("tr",n("custombody"));H("td",l,"background:rgb("+f+","+g+","+k+")").className="ucolor1";var t=G("td",l,Jd(Kd(c,20)),e?"color:var(--color1)":"");t.className="username1";al[b-1]=t;A[246]()||(G("td",l,d).className="team1");l.onclick=function(){for(var q=ba(al),u=q.next();!u.done;u=q.next())u.value.style.cssText="";t.style.color="var(--color1)";A[113](b)}};
function Lf(b,c,d,e){d&&(d=K(d));if(e){var f=document.createElement("div");for(var g=null,k=0,l=b.children;k<l.length;k++)if(l[k].nc>e){g=l[k];break}f.nc=e;b.insertBefore(f,g)}else f=G("div",b);f.className="dataIcon";f.style.backgroundPositionY=c+"px";d&&(f.dataset.title=d);return f}window.stFST=function(b,c,d,e,f){Kf={race:b,T:c,name:d,priority:e,Oc:f}};var Kf,Tm;
function pe(b,c){var d=Xb("",1),e=G("table",d);if(c){L("thead",e,763);c=G("td",G("tbody",e));c.className="s3race";c.colSpan=4;for(var f,g=ub(Tm),k={la:0};k.la<g.length;k={la:k.la,gb:k.gb},k.la++){A[196](g[k.la]);k.la%3||(k.gb=[],f=G("div",c),f.dataset.title=K(Kf.name),f.lc=k.gb,f.onclick=function(q){return function(){b(-1-q.la,q.gb);Vc(d)}}(k));var l=Kf.T;f.lc.put(l);Lf(f,l,0,Kf.priority)}}g=G("thead",e);f=G("tbody",e);c=G("tbody",e);d.parentNode.parentNode.style.position="fixed";G("div",e,K(60),
"text-transform:uppercase;padding:11px;padding-top:23px;color:#0f0");e=G("td",G("tbody",e),"","border:none");e.colSpan=4;d.id="selObj";for(k=0;4>k;k++)G("td",f),G("td",c),G("td",g,Rb[k]);g=A[90]();for(k={M:0};k.M<g;k={M:k.M,O:k.O},k.M++){A[196](k.M);k.O=A[194](k.M,1);l=Kf.race;var t=f.children[l];k.O||(k.O=A[194](k.M,0,1),t=c.children[l]);k.O||(k.O=A[194](k.M,0,0,1),t=e);k.O&&(Lf(t,k.O,Kf.name,Kf.priority).onclick=function(q){return function(){b(q.M,q.O);Vc(d)}}(k))}}var Um;
function Vm(b,c,d){b=G("div",b);c=c?2==c?K(22):Wc(0,A[29](c)):K(23);b.dataset.selplayer=c;b.onclick=Wm;b.Ec=d}var Xm;function Wm(){this.innerHTML="";var b=G("div",this);G("div",b,K(23)).yb=0;G("div",b,K(22)).yb=2;Xm=b;document.addEventListener("mouseup",Ym,{once:!0})}function Ym(b){b=b.target;void 0!=b.yb&&(r(b.parentNode.parentNode),b.parentNode.parentNode.Ec(b.yb),b.parentNode.parentNode.dataset.selplayer=b.innerHTML);F(Xm)}var Zm,$m;
function an(){var b=de(ui[21]);$m.innerHTML=K(510)+": "+ab(1E3*(de(ui[24])*(b-1)+b*de(ui[8])*60))}function bn(b,c){return"<span>=</span> "+b+"\u00d7"+c+"\u00b2/256\u00b2 <span>=</span> <span style=\"font-size:12px;font-family:'nh18';color:var(--color1);\">"+(Math.round(b*Math.pow(c,2)/Math.pow(256,2))||1)+"</span>"}
function cn(){var b=parseInt(this.value);if(0>b||!b)this.value=b=0;9999<b&&(this.value=b=9999);p[this.Qa]=b;if(this.xb){b=p[0];var c=p[this.Qa];this.xb.innerHTML=p[this.Qa+3]?bn(c,b):"";this.xb.mc=c}}function dn(b){p.push(1,1,b,10,0);Am(0,p)}function en(b){p.push(1,0,b,1,0);Am(0,p)}function ym(b,c){c||(c=0);return ub(Tm)[-(b+1)+c]}var zm;
function Am(b,c){Tm=new fc(A[197](),48);ub(Tm);Um.innerHTML="";Zm.innerHTML="";for(var d={},e=47;e<c.length;d={o:d.o,pa:d.pa,oa:d.oa,P:d.P,Fa:d.Fa,Ka:d.Ka,J:d.J},e+=5){d.o=e;var f=c[d.o],g=c[d.o+1];d.oa=c[d.o+2];var k=c[d.o+3];d.pa=c[d.o+4];d.Fa=1==g;var l=G("tr",d.Fa?Zm:Um),t=G("td",l),q=G("div",t,"",d.pa&&"background-color:#ff00ff17 !important");q.className="sett2";if(d.pa||!b)q.onclick=function(w){return function(){zm=w.o+4;xm(w.pa?c.slice(w.o+5,w.o+5+7):0,w.oa,0,b)}}(d);d.P=void 0;if(0<=d.oa)A[196](d.oa),
d.P=Lf(t,Kf.T,Kf.name);else for(d.P=G("div",t),d.P.className="dataIcon3",A[196](ym(d.oa)),d.P.dataset.title=K(Kf.name),q=0;3>q;q++){var u=G("div",d.P),v=ym(d.oa,q);A[196](v);u.style.backgroundPositionY=Kf.T+"px"}b||(d.P.onclick=function(w){return function(){return pe(function(y,B){var C=w.P,J=w.o+2;r(B);if(0>y){C.className="dataIcon3";Vg(C,"");for(var I=0;3>I;I++)G("div",C).style.backgroundPositionY=B[I]+"px"}else C.className="dataIcon",Vg(C,""),C.style.backgroundPositionY=B+"px";C.dataset.title=
K(A[89](0>y?ym(y):y));c[J]=y;r(y,C,c,J)},w.Fa)}}(d));G("span",t,"\u00d7");d.J=G("input",t);d.J.value=f;d.J.type="number";d.J.Qa=d.o;d.J.oninput=cn;d.J.onchange=cn;d.Fa?(g=Tf(G("td",l,"","text-align:left"),k),g.Qa=d.o+3,g.max=35,g.style.width="116px",g.l.style.width="36px",g.oninput=function(){this.l.innerHTML=this.value+"m"},g.oninput(),g.onchange=cn):(d.Ka=Uk(G("td",l)),d.Ka.checked=k,f=G("td",l),f.className="finalRes",d.J.xb=f,d.J.onchange(),d.Ka.onchange=function(w){return function(){c[w.o+3]=
w.Ka.checked?1:0;w.J.onchange()}}(d),b?(g=g?2==g?K(22):void 0:K(23),G("td",l,g,"font-size:13px;text-align:center")):Vm(G("td",l),g,function(w){return function(y){return c[w.o+1]=y}}(d)));d.pa&&(e+=7);b||(l=G("div",G("td",l)),l.className="closeIcon",l.onclick=function(w){return function(){c.splice(w.o,5+(w.pa?7:0));Am(0,c)}}(d))}b||(d=G("div",G("td",G("tr",Zm))),d.className="sum",d.onclick=function(){return pe(dn,1)},d=G("div",G("td",G("tr",Um))),d.className="sum",d.onclick=function(){return pe(en)})}
function fn(b){return"<td>"+(b||"")+"</td>"}function gn(){for(var b=ba(hn),c=b.next();!c.done;c=b.next())if(c=c.value,c.id&&Fa[c.id]!=p[c.id])return!0;return!1}
function jn(b){var c=hn,d=gn(),e=G("div",b);c=ba(c);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f.kb)0==e.children.length&&F(e),e=G("div",b);else if(f.id){var g=kn(f.title,f.type,e);"input"==f.type&&(g.type="number");void 0!=f.min&&(g.min=f.min);f.max&&(g.max=f.max);f.step&&(g.step=f.step);f.oninput&&(g.oninput=f.oninput,g.oninput());f.b&&(G("img",g.parentNode,"","margin-right:3px",1).src="nehhon/"+f.b);f.options&&ln(f.options,g);f.Qb&&(g.style.cssText=f.Qb);f.hc&&G("span",g.parentNode,f.hc,
"margin-left:4px;margin-right:10px",1);f.id&&mn(f.id,g);var k=Fa[f.id];if(29==f.id)k+="m";else if(35<=f.id&&38>=f.id)k+="s";else continue;G("div",g.parentNode,K(516)+" -> "+k)}else G("div",e,"","margin-top:20px"),G("div",e);return d}function Bm(){me(this)}function me(b){var c=parseInt(b.min),d=parseInt(b.value);d>parseInt(b.max)?b.value=b.max:d<c?b.value=b.min:d||(b.value=0)}
function Vd(){for(var b="",c=0,d=rb.length;c<d;c++){var e=rb[c];var f=c==A[97]()?"selected":"";b+='<option value="'+c+'" '+f+">"+e.name+"</option>"}return b}function zi(b,c,d){var e=z.f?A[70]():A[28]()-1;r("WW",b,d);if(0>=e)return b;if(c){if(r(Math.PI*b/e,70),80>Math.PI*b/e)return b=Math.round(80*e/Math.PI),eb(Kg(K(25),b),"#d2bf61"),b}else if(c=13100*Math.PI*Math.pow(d,2)/(Math.PI*Math.pow(75,2)),Math.pow(b,2)/e<c)return b=Math.round(Math.sqrt(c*e)),vi||eb(Kg(K(25),b),"#d2bf61"),b;r(b);return b}
window.updtrr=function(){jc(function(){A[122]();fe.c=!0;A[121]();Ed()})};function nn(){for(var b=p,c=0;c<ui.length;c++){var d=ui[c];d&&("checkbox"==d.type?d.checked=b[c]:d.value=b[c],"range"==d.type&&d.oninput&&d.oninput(),d.onchange||(d.onchange=Bm))}}
var on,pn,hn=[{id:42,title:523,type:1},{id:17,title:395,type:1},{id:20,title:491,type:1},{id:40,title:508,type:1},{id:43,title:651,type:1},{kb:1},{id:29,title:494,type:2,oninput:Nm,max:256,min:1,Qb:"width:167px"},{kb:1},{id:39,title:504,type:1},{id:33,title:501,type:2,oninput:Km,min:0,max:200,step:25},{id:32,title:500,oninput:Km,type:2,min:0,max:200,step:25},{id:31,title:499,oninput:Km,type:2,min:0,max:200,step:25},{id:34,title:71,oninput:function(){this.l.innerHTML="x"+this.value/100},type:2,min:100,
max:500,step:100},{kb:1},{id:41,title:511,type:2,oninput:Mm,min:10,max:1E3,step:10},{kb:1},{title:502,id:35,b:"gold.gif",type:2,oninput:Qm,min:1,max:30},{id:36,b:"wood.gif",type:2,oninput:Qm,min:1,max:30},{id:37,b:"food1.webp",type:2,oninput:Qm,min:1,max:30},{id:38,b:"stone.gif",type:2,oninput:Qm,min:1,max:30},{},{id:30,title:495,type:"select",options:[89,496,497,498],hc:"\u25bc"},{id:25,b:"gold.gif",type:"input",max:5E4},{id:26,b:"wood.gif",type:"input",max:5E4},{id:27,b:"food.gif",type:"input",
max:5E4},{id:28,b:"stone.gif",type:"input",max:5E4}],qn;function rn(){var b=n("prstnpt").value,c=!sn[b];sn[b]=ti();h.presets4=JSON.stringify(sn);c&&tn(b,p,qn)}
function tn(b,c,d,e){var f=G("span",d,"","margin-right:10px;");G("button",f,(e?"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714</span> ":"")+b,"color:var(--color1);margin-bottom:10px").onclick=function(){p=c.slice();on.checked=0<p[8];on.onclick();pn.checked=gn();pn.onchange(5);nn();Am(0,p);ui[30].onchange();an()};e||(G("button",f,"\ud83d\udfa9","color:red;font-size:14px;line-height:14px;width:18px;background:#ff00002b;padding:0px;border-radius:0px").onclick=function(){sn[b]=void 0;h.presets4=
JSON.stringify(sn);F(f)})}var sn;function kn(b,c,d){G("div",d,b&&K(b)||"");b=G("div",d);return c?1===c?Uk(b):2==c?Tf(b):G(c,b):b}function ln(b,c){for(var d=0;d<b.length;d++)G("option",c,K(b[d])).value=d}function le(b,c,d){var e=G("div",b,"","",void 0);e.className="check2";d&&(e.checked=d,e.style.backgroundPositionY="0");e.onclick=function(){e.checked=!e.checked;e.style.backgroundPositionY=e.checked?"0":"";c(e.checked)};return e}var ui;function mn(b,c){ui[b]=c;c.Qa=b}
function ie(b){(b=5===b)&&n("mapconfiguration")&&Vc(n("mapconfiguration"));if(n("mapconfiguration"))n("mapconfiguration").parentNode.parentNode.style.display="table";else{var c=Tc("");c.id="mapconfiguration";ui=[];b&&(n("mapconfiguration").className="viewonly");var d=G("button",c);d.className="closeIcon";var e=G("div",c);e.id="mainconf";if(!O){var f=G("div",e,"","");for(var g=0;4>g;g++){G("img",f).src="nehhon/"+["gold","wood","food","stone"][g]+".gif";var k=G("input",f);mn(1+g,k);k.min=-1E9;k.max=
1E9;k.step=100;k.type="number"}}if(O){var l=G("div",e);Sm(l)}g=G("div",e);f=kn(1,"input",g);f.step=32;f.min=96;f.max=2048;f.type="number";mn(0,f);f.onchange=function(){var V=de(this)||0;this.value=V=O?V:zi(V,ui[16].checked,de(ui[29]));for(var X=ba(document.getElementsByClassName("finalRes")),N=X.next();!N.done;N=X.next())N=N.value,N.innerHTML&&(N.innerHTML=bn(N.mc,V));p[0]=V;me(this)};f=kn(26,"select",g);mn(6,f);for(k=0;k<rb.length;k++)G("option",f,rb[k].name).value=k;f=kn(27,"select",O?l:g);mn(7,
f);ln([28,29,30,31,32,33,525,524],f);f=kn(35,"select",g);mn(12,f);ln([36,37,38,39],f);g=G("div",e);f=kn(398,"select",g);mn(19,f);ln([399,400,401],f);O||(f=kn(11,"input",g),mn(9,f),f.type="number",f=kn(42,"input",g),mn(10,f),f.type="number",f.min=100,f.max=5E4);f=kn(396,2,g);f.oninput=Om;mn(18,f);f.style.width="150px";O||(g=G("div",e));f=kn(394,1,O?l:g);mn(16,f);f=kn(393,2,O?l:g);mn(15,f);f.oninput=Lm;f.style.width="150px";O&&l.parentNode.appendChild(l);O||(G("div",g,"","min-height:0px"),f=G("div",
g,"","min-height:0px"),f.className="diffnfo",f.innerHTML='easy<span style="width:14px"></span>normal<span style="width:14px"></span>hard<span style="width:25px"></span>legend',f=kn(10,2,g),f.oninput=Lm,mn(11,f),f.style.width="150px",f.min=15,f.max=150,f=kn(34,2,g),f.oninput=Lm,mn(13,f),f.style.width="150px");e=G("div",c);e.id="br";var t=G("div",e);on=kn(484,1,t);on.checked=0<p[8];t.children[0].style.color="var(--color1)";var q=kn(487,"select",t);mn(5,q);ln([489,720,509],q);var u=kn(485,2,t);u.min=
1;u.max=60;u.oninput=Om;mn(8,u);var v=kn(490,"input",t);v.step=10;v.min=1;v.max=8E4;v.type="number";mn(22,v);var w=kn(486,2,t);w.min=0;w.max=3600;w.step=30;w.oninput=Pm;mn(14,w);var y=kn(488,2,t);y.min=1;y.max=25;y.oninput=Mm;mn(21,y);var B=kn(492,2,t);B.min=0;B.max=100;B.oninput=Nm;mn(23,B);var C=kn(493,"input",t);C.step=10;C.min=0;C.max=600;C.type="number";mn(24,C);G("span",C.parentNode,"s");C.style.width="50px";C.addEventListener("input",an);u.addEventListener("input",an);y.addEventListener("input",
an);G("div",t);G("div",t);G("div",t);$m=G("div",t,"","font-size:11px;color:#ffffff4d;line-height:0px;margin-top:11px;text-align:right");on.onclick=function(){this.checked?(y.value=3,w.value=600,v.value=55,u.value=3,B.value=4,q.value=1,C.value=15,y.oninput(),w.oninput(),u.oninput(),u.min=1,B.oninput(),an()):(y.value=0,w.value=0,v.value=0,u.min=0,q.value=0,u.value=0,B.value=0,C.value=0);for(var V=2;V<t.children.length;V++){var X=t.children[V];this.checked?X.show():R(X)}};on.onclick();b&&(on.onclick=
void 0,on.disabled=!0);e=G("div",c);e.id="advconf";G("span",e,K(503),"margin-right:9px");pn=Uk(e);var J=G("div",e);pn.checked=jn(J);pn.onchange=function(V){if(pn.checked)J.style.cssText="";else if(R(J),5!=V){V=ba(hn);for(var X=V.next();!X.done;X=V.next())if(X=X.value,X.id){var N=ui[X.id],W=Fa[X.id];"checkbox"==N.type?N.checked=!!W:N.value=W;if(ui[X.id].oninput)ui[X.id].oninput()}ui[30].onchange()}};pn.onchange(5);b&&(pn.onchange=void 0,pn.disabled=!0);e=G("div",c);e.id="rndtable";l=G("table",e);Sm(l);
f=G("table",e);Sm(f);G("thead",f,"<td colspan=5>"+K(481)+"</td>");G("thead",f,fn()+("<td colspan=2>"+K(483)+"</td>")+fn(K(6)));Um=G("tbody",f);G("thead",l,"<td colspan=3>"+K(480)+"</td>");G("thead",l,fn()+fn(K(482)));Zm=G("tbody",l);Zm.id="stobjs";if(!b){f=G("div",c,"","margin-top:42px;margin-bottom:-17px;max-width: 1287px;");f.id="presets";sn=l=h.presets4?JSON.parse(h.presets4):{};qn=c=G("span",f,'<span style="color:#907d44;font-size:13px;margin-right:9px">'+K(460)+":</span>");for(var I in Ja)tn(I,
Ja[I],c,1);for(var T in l)tn(T,l[T],c);I=G("span",f,"","display:inline-block");T=G("input",I,"","width:144px;font-size:12px;color:#ffd75d85");T.id="prstnpt";T.value="custom preset"+(Object.keys(l).length+1);I=G("button",I,K(8),"margin-left:6px");I.onclick=rn;I.Yc=c}nn();Am(b,p);on.checked&&an();b||(ui[30].onchange=function(){for(var V=0;4>V;V++)ui[25+V].parentNode.style.display=0<this.value?"unset":"none"},ui[30].onchange());d.onclick=b?function(){Vc(n("mapconfiguration"))}:function(){if(z.f)yi();
else if(O){ti();xi();Vc(n("mapconfiguration"));return}n("mapconfiguration").parentNode.parentNode.style.display="none"};if(b){for(b=0;b<ui.length;b++)ui[b]&&(ui[b].disabled=!0);b=e.getElementsByTagName("input");for(d=0;d<b.length;d++)b[d].disabled=!0}}}function Vg(b,c){b.innerHTML!=c&&(b.innerHTML=c)}function Cb(b){b.innerHTML=""}function de(b){return parseInt(b.value)}
function un(b,c,d){b=G("button",b);b.className="closeIcon";b.onclick=d?function(){R(this.parentNode.parentNode.parentNode)}:c?function(){Vc(this.parentNode);location.hash="";setTimeout(Te,200)}:function(){Vc(this.parentNode)}}
function Dk(){var b=Tc("",2);b.id="Settings";if(1==h.sid){var c=G("input",b);c.type="number";G("button",b,"bom").onclick=function(){r(parseInt(c.value),c.value);E(37,Bj(parseInt(c.value)));alert(1)};G("button",b,"ubom").onclick=function(){E(38);alert(2)}}var d=document.createElement("span");d.textContent=K(15);d.style.cssText="margin-top:0px";b.appendChild(d);if(h.sid)d.innerHTML+="<p style='color:#0f0'>"+h.name+(' <span style="color:#f0f;font-size:13px;">'+K(0)+"</span></p>");else{var e=document.createElement("input");
e.type="text";e.maxLength=17;e.value=String(m.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');e.onchange=vn;e.K="name";e.spellcheck=!1;b.appendChild(e)}d=document.createElement("span");d.innerHTML=K(103)+": ";b.appendChild(d);e=document.createElement("select");e.innerHTML='<option value="0">'+Rb[0]+'</option><option value="1">'+Rb[1]+'</option><option value="2">'+Rb[2]+"</option>";e.value=h.civi||0;e.onchange=function(){h.civi=this.value};d.appendChild(e);d=document.createElement("span");
d.innerHTML=K(14);b.appendChild(d);e=document.createElement("input");e.type="color";e.value=m.color;e.onchange=vn;e.K="color";e.style.backgroundColor=m.color;b.appendChild(e);d=document.createElement("span");d.innerHTML=K(718)+": ";b.appendChild(d);e=document.createElement("select");e.innerHTML='<option value="en">English</option><option value="es">Espa\u00f1ol</option><option value="it">Italiano</option><option value="pt">Portugu\u00eas</option><option value="pl">Polski</option><option value="cz">\u010ce\u0161tina</option><option value="de">Deutsch</option><option value="ru">\u0420\u0443\u0441\u0441\u043a\u0438\u0439</option><option value="bg">\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438</option>';
e.value=m.Za;e.onchange=function(){h.language=this.value;location.href=""};d.appendChild(e);d=document.createElement("span");d.innerHTML=K(539)+": ";b.appendChild(d);var f=G("div",d,"","display:inline-block;cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*h.CCID+"px"),g=H("div",d,"max-height:256px;overflow:auto;width:265px;margin-top:5px;display:flex;flex-wrap:wrap;gap:11px");f.onclick=function(){g.innerHTML="";for(var q={$:0};q.$<zj.length;q={$:q.$},
q.$++)H("div",g,"cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*q.$+"px").onclick=function(u){return function(){h.CCID=u.$;f.style.backgroundPositionX=21*-u.$+"px";g.innerHTML="";E(36,xj(u.$))}}(q)};f.onchange=function(){h.CCID=this.value};if(!Ea){var k=document.createElement("span");k.innerHTML=K(43);b.appendChild(k);var l=document.createElement("label");l.className="container";d=document.createElement("span");d.className="checkmark";e=document.createElement("input");
e.type="checkbox";var t="true"==h.fullscreen?!0:!1;e.checked=t;e.onchange=wn;e.K="fullscreen";l.appendChild(e);l.appendChild(d);k.appendChild(l)}d=G("span",b,K(459));e=Uk(d);e.onchange=wn;e.K="theme";e.checked="true"==h.theme;G("hr",b,"","margin-top:30px");d=document.createElement("span");d.innerHTML=K(569)+": ";b.appendChild(d);e=document.createElement("select");e.innerHTML='<option value="1">WebGL 1</option><option value="2">WebGL 2</option>';e.value=Xa?1:2;e.onchange=function(){h.webgl=this.value;
location.href=""};d.appendChild(e);if(Ea){d=G("span",b,K(568)+": ");d=G("select",d);e=["No","SSAA 2x"];for(l=0;2>l;l++)G("option",d,e[l]).value=l+1;d.value=h.antialiasing2;d.onchange=function(){h.antialiasing2=this.value}}d=G("span",b,K(540)+": ");e=G("select",d);for(d=0;4>d;d++)G("option",e,K(570+d)).value=d;e.value=h.fogRefresh;e.onchange=function(){h.fogRefresh=this.value};k=G("span",b,K(719));l=document.createElement("label");l.className="container";d=document.createElement("span");d.className=
"checkmark";e=document.createElement("input");e.type="checkbox";t="true"==h.shadows;e.checked=t;e.onchange=wn;e.K="shadows";l.appendChild(e);l.appendChild(d);k.appendChild(l);e=Uk(G("span",b,K(534)));e.onchange=function(){h.nodecals=this.checked?void 0:1};e.K="theme";e.checked="1"!=h.nodecals;window.SharedArrayBuffer&&(k=G("span",b,K(567)),l=document.createElement("label"),l.className="container",d=document.createElement("span"),d.className="checkmark",e=document.createElement("input"),e.type="checkbox",
t="true"==h.multithreading,e.checked=t,e.onchange=function(){h.multithreading=this.checked;location.reload()},l.appendChild(e),l.appendChild(d),k.appendChild(l));d=G("span",b,K(541));e=G("input",d,"","margin-left:16px");e.type="range";e.max=100*th();e.min=25;e.value=h.pixelDensity1||100*th();Yi(e);e.oninput=function(q){this.l.innerHTML=25*Math.round(this.value/25)+"%";1!==q&&(h.pixelDensity1=25*Math.round(this.value/25))};e.oninput(1);G("button",b,K(542),"margin-top:37px").onclick=function(){window.onbeforeunload=
void 0;h.clear();location.reload()}}function Xb(b,c,d,e){var f=G("div",document.body);f.className="fwindow2";b=G("div",G("div",f),b,d);c&&un(b,2==c,e);return b}function Tc(b,c,d,e){var f=G("div",document.body);f.className="fwindow";b=G("div",G("div",f),b,d);c&&un(b,2==c,e);return b}
function Ek(){Tc('<div class="svgnehhon" style="background-repeat:no-repeat;height:124px;background-position:center;margin-bottom:16px;"></div>\nFully programmed by Donov<p>\n<p>Graphics, sound and game logic by Haemimont Games</p>\n<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url" target="_blank"><img src="nehhon/donate.gif" /></a>\n\n<p id="coins" style="text-align:left;font-size:12px">\nBTC: <input style="width:380px" disabled value="3Jpn235XYvJSyKMwpgvsLZeWhnNtcdn83D"><br>\nETH: <input style="width:380px" disabled value="0xe6FDAcfb09f807E6854Ecb89cEA8C102DE5C2516"><br>\nXRP: <input style="width:380px" disabled value="rKV8HEL3vLc6q9waTiJcewdRdSFyx67QFb"> memo:<input style="width:85px" disabled value="1567994151"><br>\nZEN: <input style="width:380px" disabled value="zniyHWHw4iTZZLxcYgLK5zNFeTWR4JDwJ1o"><br>\n</p>\n<hr>\n<p>Contact:</p>\n<a href=\'mailto:webmaster@nehhon.com\' target="_blank">webmaster@nehhon.com</a> <p> <a href="https://twitter.com/TzaredGame" target="_blank">@TzaredGame</a>\n<hr>\n<p style="margin-bottom:20px;">Special thanks to:</p>\n<div>\n<a href="https://www.crazygames.com/c/io" target="_blank">CRAZYGAMES.COM</a>\n<p>\n<img style="max-width:422px" src="nehhon/cloudflare.svg" alt="cloudflare">\n<p>\n&\n<p>\n<a href="https://www.youtube.com/MayorceteGamingTV" target="_blank">Mayorcete</a>, Penetrenko, Remi Sluz, David Grau, PuppedToy<br>Ismael Carvajal, Alvaro Lopez, Gaboal, Nanyo Nanev<br>Miguel Rexi, Daniel Matos, Mikel Iglesias, Cristian Vargas <br>Debra Stokes, Irene, Edgaras, Hekas, <a href="https://soundcloud.com/diemiurgo" target="_blank" rel="noopener noreferrer">Diemiurgo</a>, <a href="https://www.youtube.com/user/rainheart666787" target="_blank" rel="noopener noreferrer">Sharp Rain</a><br>Johannes Feulner, Marco Adorni, Eric Brown<br>Tommaso Bruno, PRG, Julian Kazior, JotaVilla\n<br>Francesco Castelli, FT21, Manolo, Mikhail, Witold<br>\nMichael (Macca), Vanilla Ice, Marcinm, Kurnaq, Gator, Pikachu<br>\nSebaastian, Luca, Edward, Juan, Ivan, Marcel, Olmo, WMLS\n</div>',2,
"text-align:center;user-select:text")}function wn(){h[this.K]=this.checked}function vn(){var b=this.value;"color"==this.type?this.style.backgroundColor=b:"name"==this.K&&(b=Rj(b));if(b||"name"!=this.K)m[this.K]=b,h[this.K]=b,Ri(A[53]($i()),17,h.name)}
if(Ea){var xn=G("button",n("index"));xn.onclick=function(){window.close()};xn.style.cssText="z-index:1;position:fixed;top:-10px;right:-29px;font-size:45px;text-shadow: none;font-family: none;background: #7e0000;box-shadow: 0px 0px 20px #000;transform: rotate(45deg);   width: 87px;    height: 46px;";xn.innerHTML="+"}n("rnd0").onclick=function(){location.hash="RandomMap"};n("sett").onclick=function(){location.hash="Settings"};var yn=document.getElementsByTagName("head")[0],zn=document.createElement("link");
zn.rel="stylesheet";zn.type="text/css";zn.href=m.mb+"b.css?v=486";zn.media="all";yn.appendChild(zn);h.lastVersion=486;var Pd=new function(b){this.rc=b}("move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha decal".split(" "));tb();var An={0:"euro",1:"arab",2:"asia"};function Bn(b,c){var d=c.length,e=b.length,f=0;a:for(;f<d;f++){for(var g=0;g<e;g++)if(c[f+g]!==b[g])continue a;return f}return!1}function oe(){r(this.files);var b=new FileReader;b.onload=function(){Cn(this.result)};b.readAsArrayBuffer(this.files[0])}
function Cn(b){var c=Dn(b);b={grass:0,summer:4,deset:2,snow:3}[c.Qc];r(b);for(var d=ub(vb),e=c.Ya.length+1,f=0;f<e;f++)d[f]=0;f=1;for(var g=ba(c.Ya),k=g.next();!k.done;k=g.next()){k=k.value;for(var l=0;l<e;l++)d[l+f*e]=k.vc[l];f++}r(d.slice(0,e*e));A[211](c.Ya.length,b,c.$b);jc(function(){A[122]();fe.c=!0;A[121]();Ed();for(var t=Tg(A[78](),Math.pow(c.$b,2)),q=0;q<t.length;q++)t[q]=c.Pc[q];r(t);aj(En);A[124](1);fe.c=!0;t=1;q=ba(c.Ya);for(var u=q.next();!u.done;u=q.next()){u=u.value;for(var v=ub(vb),
w=0;w<u.name.length;w++)v[w]=u.name.charCodeAt(w);A[213](t,u.color[0],u.color[1],u.color[2],u.IA,u.race,u.resGold,u.resFood,u.resWood,u.resStone,u.name.length);t++}Id();vf();t=ba(c.jb);for(q=t.next();!q.done;q=t.next())if(q=q.value,u=q.kingdom,10==u&&(u=0),9==u&&(u=Math.pow(2,31)-1),v=Fn[q.type+256*q.race],51==v&&23==q.WW&&(v=46),51==v&&r(q),void 0!=v)A[212](v,u,q.x32,q.y32,q.d,q.attack,q.defence,q.health,q.maxHealth,q.level,q.mana,q.xx21);Md(c.name,0);Md(c.description,1);Md(c.sc,2);Vc(n("mapPropsWindow"))})}
function Gn(b){for(var c=b.length,d=new Uint16Array(b.length),e=0;e<c;e++)d[e]=b.charCodeAt(e);return d}function Hn(b,c){return Bn(Gn(b),c)+b.length}function In(b,c){b+=String.fromCharCode(0);return Bn(Gn(b),c)}function Jn(b,c,d){var e="";for(c+=b;b<c&&d[b];b++)e+=String.fromCharCode(d[b]);return e}
function Dn(b){b=new Uint8Array(b);var c=Bn([50,109,122,116],b)+6,d=b[c]+256*b[c+1],e=b[c+2]+(b[c+3]<<8)+(b[c+4]<<16);r("mapx:",d,"units",e);r("header",b[Hn(".header",b)],"description",b[Hn(".description",b)],"kingdominfo",b[Hn(".kingdominfo",b)],"diplomacy",b[Hn(".diplomacy",b)],"forbidden.upgrades",b[Hn(".forbidden.upgrades",b)],"tiles",b[Hn(".tiles",b)]);r(b);c=2*d;d={$b:d,hd:d,Mb:!1};var f="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 xx22".split(" "),
g="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 resource".split(" "),k=c/2,l=20480+2*k*k,t={};k=0;for(var q=b.length;k<q;k++){var u=b[k];t[u]||(t[u]=[]);t[u].push(k)}t=[];var v={56:!0,58:!0,88:!0,72:!0};r(b.slice(l));k=l+1;for(q=b.length;k<q;k++)if(u=b[k],v[u]&&v[b[k+4]]){l={};u=72!==u?f:g;var w=k-8,y=w;l.i2=w;for(var B=0,C=u.length;B<C;B++){var J=u[B];
"kingdom"==J||"race"==J||"xx21"==J||"xx22"==J?(l[J]=b[w],w++):(l[J]=b[w]+256*b[w+1],w+=2)}k+=w-y-8;t.push(l)}d.jb=t;d.jb.length>e&&(d.jb.length=e);e=d.jb;f=c/2;v=[];g=0;l=[];w=u=b[Hn(".forbidden.upgrades",b)]+1;q=u*=512;for(k=b.length;q<k;q+=2){B=b[q];y=~~(q/512);for(t=8;t<f&&b[t+q]===(B+t/4)%256;t+=4);20<t&&(q=512*y,1==v.length&&(q=512*(y-(2-(y-w)%2))),t=b.slice(u,q),u-q&&(v[g++]=[u,q],l.push(t)),q+=512,2==v.length&&(q-=512),u=q)}v[g++]=[u,b.length];l={64:[v[0]],96:[v[0]],128:[v[0]],192:[v[1],v[0],
v[2],v[3]],256:[v[1],v[0],v[2],v[3]],384:[v[1],v[0],v[2],v[3],v[4],v[5],v[6]],512:[v[1],v[0],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9]]}[f];r(v);v=new Uint8Array(f*f);u=new Uint8Array(f*f);En=new Uint8Array(f*f);t=g=0;for(w=l.length;t<w;t++)if(k=l[t],g<f*f)for(q=k[0],k=k[1];q<k;q+=2)v[g]=b[q],u[g]=b[q+1],En[g]=u[g]%8,8<=u[g]&&e.push({race:0,type:7,d:~~(u[g]/8)-1,x32:g%f,y32:~~(g/f)}),g++;Kn(v,c);Kn(u,c);d.Pc=v;e=(c="grass",In("grass",b))||(c="summer",In("summer",b))||(c="desert",In("desert",b))||(c=
"snow",In("snow",b));f=Jn(512*(b[Hn(".description",b)]-1),512,b);d.description=f;d.sc=Jn(e-64,64,b);d.name=Jn(e-128,64,b);d.Qc=c;for(c=Bn([192,4],b)+50;!b[c];)c++;e="name tzar active resGold resStone resFood resWood x6 race x8 x9 x10 x11 x12 x13 x14 AI x16 x17 x18 x19 x20".split(" ");f=e.length;g=[];q=[[41,115,255],[231,0,0],[57,115,16],[231,0,231],[255,255,0],[0,181,181],[255,156,33],[90,90,90]];r("kingdoms:",c);d.Sc={0:0,9:0,10:0};for(t=0;8>t;t++){v={color:q[t]};for(l=0;l<f;l++)if(u=e[l],"name"==
u||"tzar"==u){for(v[u]="";!b[c];)c++;for(k=c+32;b[c];)v[u]+=String.fromCharCode(b[c]),c++;c=k}else v[u]=b[c]+(b[c+1]<<8)+(b[c+2]<<16)+(b[c+3]<<24),"race"==u&&(v[u]=b[c],v.racestr=An[b[c]-1]),c+=4;g.push(v);d.Sc[t+1]=g.length;1<g.length&&(v.IA=1);v.resources=[v.resGold,v.resWood,v.resFood,v.resStone];v.race--}r(g);d.Ya=g;c=d.Ya;e=512*(b[Hn(".diplomacy",b)]-1);f=c.length;for(g=0;g<f;g++)if(k=[0],c[g])for(c[g].vc=k,q=1;9>q;q++)c[q-1]&&(t=b[e],t=60>t&&q-1!=g?1:0,k.push(t)),e+=4;else e+=32;r(d);return d}
function Kn(b,c){if(b&&b.length){c/=2;var d=~~(b.length/c);if(c){for(var e=document.createElement("canvas"),f=e.getContext("2d"),g=new ImageData(c,d),k=g.data,l=0,t=k.length;l<t;l+=4){var q=b[l/4];k[l]=q;k[l+1]=q;k[l+2]=q;k[l+3]=255}e.width=c;e.height=d;f.putImageData(g,0,0);document.body.appendChild(e)}}}
var En,Fn={7:7,15:78,16:77,19:37,20:39,21:38,22:131,23:73,24:75,25:76,27:59,28:58,30:132,31:40,32:130,36:60,38:42,39:55,40:32,41:44,42:56,43:57,61:45,62:13,63:20,64:35,72:43,110:27,133:36,136:74,257:10,258:61,259:0,260:4,261:3,262:6,263:1,264:19,67:51,267:8,270:2,273:5,274:9,300:12,301:14,302:15,303:23,304:30,305:25,306:28,307:18,308:34,309:33,310:41,311:11,312:17,314:26,315:29,316:16,321:24,322:31,513:79,514:90,515:80,516:81,517:83,519:82,522:85,529:89,530:87,541:91,545:86,547:84,556:63,557:102,
558:93,559:95,560:100,561:99,562:103,563:94,564:104,565:101,566:96,568:109,570:97,571:98,572:107,577:108,578:92,581:110,583:106,769:64,771:66,772:67,773:68,778:69,780:128,781:65,785:129,786:127,802:70,805:72,812:62,813:71,814:112,815:114,816:119,817:118,818:121,819:113,820:122,821:120,822:115,824:126,826:116,827:117,828:124,833:125,834:111,838:123,76:21,78:22};
