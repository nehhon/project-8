var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,r){l.raw=r;return l};$jscomp.arrayIteratorImpl=function(l){var r=0;return function(){return r<l.length?{done:!1,value:l[r++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.makeIterator=function(l){var r="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return r?r.call(l):$jscomp.arrayIterator(l)};
$jscomp.getGlobal=function(l){l=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,l];for(var r=0;r<l.length;++r){var y=l[r];if(y&&y.Math==Math)return y}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,r,y){l!=Array.prototype&&l!=Object.prototype&&(l[r]=y.value)};$jscomp.polyfill=function(l,r,y,E){if(r){y=$jscomp.global;l=l.split(".");for(E=0;E<l.length-1;E++){var u=l[E];u in y||(y[u]={});y=y[u]}l=l[l.length-1];E=y[l];r=r(E);r!=E&&null!=r&&$jscomp.defineProperty(y,l,{configurable:!0,writable:!0,value:r})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(l){function r(){this.batch_=null}function y(l){return l instanceof u?l:new u(function(r,y){r(l)})}if(l&&!$jscomp.FORCE_POLYFILL_PROMISE)return l;r.prototype.asyncExecute=function(l){if(null==this.batch_){this.batch_=[];var r=this;this.asyncExecuteFunction(function(){r.executeBatch_()})}this.batch_.push(l)};var E=$jscomp.global.setTimeout;r.prototype.asyncExecuteFunction=function(l){E(l,0)};r.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var l=
this.batch_;this.batch_=[];for(var r=0;r<l.length;++r){var y=l[r];l[r]=null;try{y()}catch(wb){this.asyncThrow_(wb)}}}this.batch_=null};r.prototype.asyncThrow_=function(l){this.asyncExecuteFunction(function(){throw l;})};var u=function(l){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var r=this.createResolveAndReject_();try{l(r.resolve,r.reject)}catch(vb){r.reject(vb)}};u.prototype.createResolveAndReject_=function(){function l(l){return function(u){y||(y=!0,l.call(r,u))}}var r=this,
y=!1;return{resolve:l(this.resolveTo_),reject:l(this.reject_)}};u.prototype.resolveTo_=function(l){if(l===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(l instanceof u)this.settleSameAsPromise_(l);else{a:switch(typeof l){case "object":var r=null!=l;break a;case "function":r=!0;break a;default:r=!1}r?this.resolveToNonPromiseObj_(l):this.fulfill_(l)}};u.prototype.resolveToNonPromiseObj_=function(l){var r=void 0;try{r=l.then}catch(vb){this.reject_(vb);return}"function"==
typeof r?this.settleSameAsThenable_(r,l):this.fulfill_(l)};u.prototype.reject_=function(l){this.settle_(2,l)};u.prototype.fulfill_=function(l){this.settle_(1,l)};u.prototype.settle_=function(l,r){if(0!=this.state_)throw Error("Cannot settle("+l+", "+r+"): Promise already settled in state"+this.state_);this.state_=l;this.result_=r;this.executeOnSettledCallbacks_()};u.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var l=0;l<this.onSettledCallbacks_.length;++l)V.asyncExecute(this.onSettledCallbacks_[l]);
this.onSettledCallbacks_=null}};var V=new r;u.prototype.settleSameAsPromise_=function(l){var r=this.createResolveAndReject_();l.callWhenSettled_(r.resolve,r.reject)};u.prototype.settleSameAsThenable_=function(l,r){var y=this.createResolveAndReject_();try{l.call(r,y.resolve,y.reject)}catch(wb){y.reject(wb)}};u.prototype.then=function(l,r){function y(l,r){return"function"==typeof l?function(r){try{E(l(r))}catch(wa){V(wa)}}:r}var E,V,Fa=new u(function(l,r){E=l;V=r});this.callWhenSettled_(y(l,E),y(r,
V));return Fa};u.prototype.catch=function(l){return this.then(void 0,l)};u.prototype.callWhenSettled_=function(l,r){function y(){switch(u.state_){case 1:l(u.result_);break;case 2:r(u.result_);break;default:throw Error("Unexpected state: "+u.state_);}}var u=this;null==this.onSettledCallbacks_?V.asyncExecute(y):this.onSettledCallbacks_.push(y)};u.resolve=y;u.reject=function(l){return new u(function(r,y){y(l)})};u.race=function(l){return new u(function(r,u){for(var E=$jscomp.makeIterator(l),V=E.next();!V.done;V=
E.next())y(V.value).callWhenSettled_(r,u)})};u.all=function(l){var r=$jscomp.makeIterator(l),E=r.next();return E.done?y([]):new u(function(l,u){function V(r){return function(y){Fa[r]=y;ib--;0==ib&&l(Fa)}}var Fa=[],ib=0;do Fa.push(void 0),ib++,y(E.value).callWhenSettled_(V(Fa.length-1),u),E=r.next();while(!E.done)})};return u},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(l,r){this.$jscomp$symbol$id_=l;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:r})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function l(y){if(this instanceof l)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(y||"")+"_"+r++,y)}var r=0;return l}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.iterator;l||(l=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[l]&&$jscomp.defineProperty(Array.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var l=$jscomp.global.Symbol.asyncIterator;l||(l=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(l){$jscomp.initSymbolIterator();l={next:l};l[$jscomp.global.Symbol.iterator]=function(){return this};return l};$jscomp.underscoreProtoCanBeSet=function(){var l={a:!0},r={};try{return r.__proto__=l,r.a}catch(y){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(l,r){l.__proto__=r;if(l.__proto__!==r)throw new TypeError(l+" is not extensible");return l}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(l){if(!(l instanceof Object))throw new TypeError("Iterator result "+l+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(l){this.yieldResult=l};$jscomp.generator.Context.prototype.throw_=function(l){this.abruptCompletion_={exception:l,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(l){this.abruptCompletion_={return:l};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(l){this.abruptCompletion_={jumpTo:l};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(l,r){this.nextAddress=r;return{value:l}};$jscomp.generator.Context.prototype.yieldAll=function(l,r){l=$jscomp.makeIterator(l);var y=l.next();$jscomp.generator.ensureIteratorResultIsObject_(y);if(y.done)this.yieldResult=y.value,this.nextAddress=r;else return this.yieldAllIterator_=l,this.yield(y.value,r)};
$jscomp.generator.Context.prototype.jumpTo=function(l){this.nextAddress=l};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(l,r){this.catchAddress_=l;void 0!=r&&(this.finallyAddress_=r)};$jscomp.generator.Context.prototype.setFinallyBlock=function(l){this.catchAddress_=0;this.finallyAddress_=l||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(l,r){this.nextAddress=l;this.catchAddress_=r||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(l){this.catchAddress_=l||0;l=this.abruptCompletion_.exception;this.abruptCompletion_=null;return l};$jscomp.generator.Context.prototype.enterFinallyBlock=function(l,r,y){y?this.finallyContexts_[y]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=l||0;this.finallyAddress_=r||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(l,r){r=this.finallyContexts_.splice(r||0)[0];if(r=this.abruptCompletion_=this.abruptCompletion_||r){if(r.isException)return this.jumpToErrorHandler_();void 0!=r.jumpTo&&this.finallyAddress_<r.jumpTo?(this.nextAddress=r.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=l};$jscomp.generator.Context.prototype.forIn=function(l){return new $jscomp.generator.Context.PropertyIterator(l)};
$jscomp.generator.Context.PropertyIterator=function(l){this.object_=l;this.properties_=[];for(var r in l)this.properties_.push(r);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var l=this.properties_.pop();if(l in this.object_)return l}return null};$jscomp.generator.Engine_=function(l){this.context_=new $jscomp.generator.Context;this.program_=l};
$jscomp.generator.Engine_.prototype.next_=function(l){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,l,this.context_.next_);this.context_.next_(l);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(l){this.context_.start_();var r=this.context_.yieldAllIterator_;if(r)return this.yieldAllStep_("return"in r?r["return"]:function(l){return{value:l,done:!0}},l,this.context_.return);this.context_.return(l);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(l){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],l,this.context_.next_);this.context_.throw_(l);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(l,r,y){try{var E=l.call(this.context_.yieldAllIterator_,r);$jscomp.generator.ensureIteratorResultIsObject_(E);if(!E.done)return this.context_.stop_(),E;var u=E.value}catch(V){return this.context_.yieldAllIterator_=null,this.context_.throw_(V),this.nextStep_()}this.context_.yieldAllIterator_=null;y.call(this.context_,u);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var l=this.program_(this.context_);if(l)return this.context_.stop_(),{value:l.value,done:!1}}catch(r){this.context_.yieldResult=void 0,this.context_.throw_(r)}this.context_.stop_();if(this.context_.abruptCompletion_){l=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(l.isException)throw l.exception;return{value:l.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(l){this.next=function(r){return l.next_(r)};this.throw=function(r){return l.throw_(r)};this.return=function(r){return l.return_(r)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(l,r){r=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(r));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(r,l.prototype);return r};
$jscomp.asyncExecutePromiseGenerator=function(l){function r(r){return l.next(r)}function y(r){return l.throw(r)}return new Promise(function(E,u){function V(l){l.done?E(l.value):Promise.resolve(l.value).then(r,y).then(V,u)}V(l.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(l){return $jscomp.asyncExecutePromiseGenerator(l())};$jscomp.asyncExecutePromiseGeneratorProgram=function(l){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(l)))};
$jscomp.iteratorFromArray=function(l,r){$jscomp.initSymbolIterator();l instanceof String&&(l+="");var y=0,E={next:function(){if(y<l.length){var u=y++;return{value:r(u,l[u]),done:!1}}E.next=function(){return{done:!0,value:void 0}};return E.next()}};E[Symbol.iterator]=function(){return E};return E};$jscomp.polyfill("Array.prototype.keys",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(l){return l})}},"es6","es3");
$jscomp.polyfill("Object.getOwnPropertySymbols",function(l){return l?l:function(){return[]}},"es6","es5");$jscomp.findInternal=function(l,r,y){l instanceof String&&(l=String(l));for(var E=l.length,u=0;u<E;u++){var V=l[u];if(r.call(y,V,u,l))return{i:u,v:V}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(l){return l?l:function(l,y){return $jscomp.findInternal(this,l,y).v}},"es6","es3");
$jscomp.polyfill("Math.log2",function(l){return l?l:function(l){return Math.log(l)/Math.LN2}},"es6","es3");$jscomp.polyfill("Math.sign",function(l){return l?l:function(l){l=Number(l);return 0===l||isNaN(l)?l:0<l?1:-1}},"es6","es3");
$jscomp.polyfill("Array.prototype.copyWithin",function(l){function r(l){l=Number(l);return Infinity===l||-Infinity===l?l:l|0}return l?l:function(l,E,u){var y=this.length;l=r(l);E=r(E);u=void 0===u?y:r(u);l=0>l?Math.max(y+l,0):Math.min(l,y);E=0>E?Math.max(y+E,0):Math.min(E,y);u=0>u?Math.max(y+u,0):Math.min(u,y);if(l<E)for(;E<u;)E in this?this[l++]=this[E++]:(delete this[l++],E++);else for(u=Math.min(u,y+E-l),l+=u-E;u>E;)--u in this?this[--l]=this[u]:delete this[--l];return this}},"es6","es3");
(function(){var l,r,y,E;function u(g,a,e){this.context=g;this.urlList=a;this.onload=e;this.loadCount=0}function V(g,a,e){a=a.split(".")[0].toLowerCase();Wb[a]=g;!e||e.music&&e.mid!==P.id||(xa(a,e.x,e.y,e.k,e.music,e.date),e.date=0)}function Fa(g){for(var a=g.length,e=0;e<a;k(g[e++]).style.display="none");}function ae(g){for(var a=g.length,e=0;e<a;k(g[e++]).style.display="block");}function vb(){location.href=""}function wb(g){x("setup:",g);g.toSend=[];g.orderList=[];var a=la.roomName;a=a.substr(0,
a.length-1);g.id==a&&(g.admin=!0);g.superID=ce(g.id);g.sendDirectly("channelMessage","nehhof",{});x(g.channels.channelMessage);if(!q.adminOK)var e=setTimeout(Xf,6500);La(n.mnameadd(),20,q.name);g.channels.channelMessage.onopen=function(){clearTimeout(e);ya.put(g);xa("attack");xb(1);x("DATACHANNEL OPEN");x(g);setTimeout(function(){g.admin&&(q.adminOK=!0,n.shareName(g.superID))},800)};g.channels.channelMessage.onerror=function(g){x("DATACHANNEL ERROR",g)};g.channels.channelMessage.onclose=function(a){Ga(g);
x("DATACHANNEL CLOSE",a)};g.pc.pc.onconnectionstatechange=function(a){x(a);"disconnected"==g.pc.pc.connectionState&&Ga(g)};g.pc.pc.oniceconnectionstatechange=function(a){x(a);"failed"!=g.pc.pc.iceConnectionState&&"disconnected"!=g.pc.pc.iceConnectionState||Ga(g)};g.pc.pc.onsignalingstatechange=function(a){x(a);"closed"==g.pc.pc.signalingState&&Ga(g)}}function Kc(){if(k("Multiplayer"))S("Multiplayer");else{var g=F("div",Xb(),'\n<div style="text-align:center;padding-top:33px">\n<button id="createbutton">'+
m(113).split("| ")[1]+'</button>\n<button id="refreshButton1" class="refreshButton">'+m(114)+"</button>\n"+(X&&'<input style="font-size:13px;margin-left:58px;padding:2px" placeholder="URL" id="vUrl" type="text" /> <button style="font-size:11px;margin-left:3px;padding:5px" id="vJoin">'+m(409).split("|")[0]+"</button>"||"")+'\n\n</div>\n<div id="onlineStats"></div>\n<table id="gameList">\n<tbody>\n<tr><td>'+m(60)+"</td></tr>\n</tbody>\n</table>");g.id="Multiplayer";g.addReturnMenu();g.className="playermenu";
k("refreshButton1").onclick=Kc;k("createbutton").onclick=de;k("vJoin")&&(k("vJoin").onclick=function(){var g="#"+k("vUrl").value.split("##")[1];Lc(g)})}if(A.active)A.getRooms();else{if(!q.p2p){la||Ma();Ma.func=Kc;return}q.p2p.emit("getRooms")}Y()}function be(g){var a=location,e=a.hash.substr(1);if(e){if(!A.active&&"Room"===a.hash.substr(-4)||"#"==e.substr(0,1)){a:{if(Mc)Mc=!1;else if(!q.admin){g?g=location.reload():(g=location.hash.substr(1),g=A.active?g:g.substr(0,g.length-4),g=Lc(g));break a}g=
void 0}return g}ee(e)&&ee(e)()}}function Wf(g){return c.locateFile?c.locateFile(g,Wa):Wa+g}function ib(g,a,e){var d=a+e;for(e=a;g[e]&&!(e>=d);)++e;if(16<e-a&&g.subarray&&fe)return fe.decode(g.subarray(a,e));for(d="";a<e;){var b=g[a++];if(b&128){var h=g[a++]&63;if(192==(b&224))d+=String.fromCharCode((b&31)<<6|h);else{var t=g[a++]&63;b=224==(b&240)?(b&15)<<12|h<<6|t:(b&7)<<18|h<<12|t<<6|g[a++]&63;65536>b?d+=String.fromCharCode(b):(b-=65536,d+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else d+=
String.fromCharCode(b)}return d}function sa(g,a){return g?ib(J,g,a):""}function wa(g,a,e,d){if(!(0<d))return 0;var b=e;d=e+d-1;for(var h=0;h<g.length;++h){var t=g.charCodeAt(h);if(55296<=t&&57343>=t){var c=g.charCodeAt(++h);t=65536+((t&1023)<<10)|c&1023}if(127>=t){if(e>=d)break;a[e++]=t}else{if(2047>=t){if(e+1>=d)break;a[e++]=192|t>>6}else{if(65535>=t){if(e+2>=d)break;a[e++]=224|t>>12}else{if(e+3>=d)break;a[e++]=240|t>>18;a[e++]=128|t>>12&63}a[e++]=128|t>>6&63}a[e++]=128|t&63}}a[e]=0;return e-b}function Yf(g,
a){0<g%a&&(g+=a-g%a);return g}function ge(g){Yb=g;c.HEAP8=new Int8Array(g);c.HEAP16=new Int16Array(g);c.HEAP32=Xa=new Int32Array(g);c.HEAPU8=J=new Uint8Array(g);c.HEAPU16=W=new Uint16Array(g);c.HEAPU32=H=new Uint32Array(g);c.HEAPF32=new Float32Array(g);c.HEAPF64=he=new Float64Array(g)}function Zb(g){for(;0<g.length;){var a=g.shift();if("function"==typeof a)a();else{var e=a.func;"number"===typeof e?void 0===a.arg?c.dynCall_v(e):c.dynCall_vi(e,a.arg):e(void 0===a.arg?null:a.arg)}}}function ie(g){Ya++;
c.monitorRunDependencies&&c.monitorRunDependencies(Ya)}function Nc(g){Ya--;c.monitorRunDependencies&&c.monitorRunDependencies(Ya);0==Ya&&(null!==Oc&&(clearInterval(Oc),Oc=null),yb&&(g=yb,yb=null,g()))}function je(g){if(c.onAbort)c.onAbort(g);g+="";ke(g);Na(g);Pc=!0;throw new WebAssembly.RuntimeError("abort("+g+"). Build with -s ASSERTIONS=1 for more info.");}function le(g){return String.prototype.startsWith?g.startsWith("data:application/octet-stream;base64,"):0===g.indexOf("data:application/octet-stream;base64,")}
function me(){try{if(zb)return new Uint8Array(zb);if(ne)return ne(Oa);throw"both async and sync fetching of the wasm failed";}catch(g){je(g)}}function Zf(){return zb||"function"!==typeof fetch?new Promise(function(g,a){g(me())}):fetch(Oa,{credentials:"same-origin"}).then(function(g){if(!g.ok)throw"failed to load wasm binary file at '"+Oa+"'";return g.arrayBuffer()}).catch(function(){return me()})}function Qc(g,a,e,d,b){var h=H[g+8>>2];if(h){var t=sa(h),c=g+112,p=sa(c);p||(p="GET");var D=H[c+52>>2],
w=H[c+56>>2],z=!!H[c+60>>2],f=H[c+68>>2],C=H[c+72>>2];h=H[c+76>>2];var za=H[c+80>>2],k=H[c+84>>2];c=H[c+88>>2];var l=!!(D&1),m=!!(D&2);D=!!(D&64);f=f?sa(f):void 0;C=C?sa(C):void 0;var n=za?sa(za):void 0,B=new XMLHttpRequest;B.withCredentials=z;B.open(p,t,!D,f,C);D||(B.timeout=w);B.url_=t;B.responseType="arraybuffer";za&&B.overrideMimeType(n);if(h)for(;;){p=H[h>>2];if(!p)break;t=H[h+4>>2];if(!t)break;h+=8;p=sa(p);t=sa(t);B.setRequestHeader(p,t)}Q.xhrs.push(B);H[g+0>>2]=Q.xhrs.length;h=k&&c?J.slice(k,
k+c):null;B.onload=function(b){var h=B.response?B.response.byteLength:0,d=0,t=0;l&&!m&&(t=h,d=$b(t),J.set(new Uint8Array(B.response),d));H[g+12>>2]=d;Q.setu64(g+16,t);Q.setu64(g+24,0);h&&Q.setu64(g+32,h);W[g+40>>1]=B.readyState;4===B.readyState&&0===B.status&&(B.status=0<h?200:404);W[g+42>>1]=B.status;B.statusText&&wa(B.statusText,J,g+44,64);200<=B.status&&300>B.status?a&&a(g,B,b):e&&e(g,B,b)};B.onerror=function(a){var b=B.status;4===B.readyState&&0===b&&(b=404);H[g+12>>2]=0;Q.setu64(g+16,0);Q.setu64(g+
24,0);Q.setu64(g+32,0);W[g+40>>1]=B.readyState;W[g+42>>1]=b;e&&e(g,B,a)};B.ontimeout=function(a){e&&e(g,B,a)};B.onprogress=function(a){var b=l&&m&&B.response?B.response.byteLength:0,h=0;l&&m&&(h=$b(b),J.set(new Uint8Array(B.response),h));H[g+12>>2]=h;Q.setu64(g+16,b);Q.setu64(g+24,a.loaded-b);Q.setu64(g+32,a.total);W[g+40>>1]=B.readyState;3<=B.readyState&&0===B.status&&0<a.loaded&&(B.status=200);W[g+42>>1]=B.status;B.statusText&&wa(B.statusText,J,g+44,64);d&&d(g,B,a)};B.onreadystatechange=function(a){W[g+
40>>1]=B.readyState;2<=B.readyState&&(W[g+42>>1]=B.status);b&&b(g,B,a)};try{B.send(h)}catch(Tc){e&&e(g,B,Tc)}}else e(g,0,"no url specified!")}function oe(g,a,e,d,b){if(g){var h=H[a+112+64>>2];h||(h=H[a+8>>2]);var t=sa(h);try{var c=g.transaction(["FILES"],"readwrite").objectStore("FILES").put(e,t);c.onsuccess=function(g){W[a+40>>1]=4;W[a+42>>1]=200;wa("OK",J,a+44,64);d(a,0,t)};c.onerror=function(g){W[a+40>>1]=4;W[a+42>>1]=413;wa("Payload Too Large",J,a+44,64);b(a,0,g)}}catch(p){b(a,0,p)}}else b(a,
0,"IndexedDB not available!")}function ag(g,a,e,d){if(g){var b=H[a+112+64>>2];b||(b=H[a+8>>2]);b=sa(b);try{var h=g.transaction(["FILES"],"readonly").objectStore("FILES").get(b);h.onsuccess=function(g){if(g.target.result){g=g.target.result;var b=g.byteLength||g.length,h=$b(b);J.set(new Uint8Array(g),h);H[a+12>>2]=h;Q.setu64(a+16,b);Q.setu64(a+24,0);Q.setu64(a+32,b);W[a+40>>1]=4;W[a+42>>1]=200;wa("OK",J,a+44,64);e(a,0,g)}else W[a+40>>1]=4,W[a+42>>1]=404,wa("Not Found",J,a+44,64),d(a,0,"no data")};h.onerror=
function(g){W[a+40>>1]=4;W[a+42>>1]=404;wa("Not Found",J,a+44,64);d(a,0,g)}}catch(t){d(a,0,t)}}else d(a,0,"IndexedDB not available!")}function bg(g,a,e,d){if(g){var b=H[a+112+64>>2];b||(b=H[a+8>>2]);b=sa(b);try{var h=g.transaction(["FILES"],"readwrite").objectStore("FILES").delete(b);h.onsuccess=function(g){g=g.target.result;H[a+12>>2]=0;Q.setu64(a+16,0);Q.setu64(a+24,0);Q.setu64(a+32,0);W[a+40>>1]=4;W[a+42>>1]=200;wa("OK",J,a+44,64);e(a,0,g)};h.onerror=function(g){W[a+40>>1]=4;W[a+42>>1]=404;wa("Not Found",
J,a+44,64);d(a,0,g)}}catch(t){d(a,0,t)}}else d(a,0,"IndexedDB not available!")}function ac(g,a){ac.array||(ac.array=[]);var e=ac.array;e.length=0;for(var d;d=J[g++];)100===d||102===d?(a=a+7&-8,e.push(he[a>>3]),a+=8):(a=a+3&-4,e.push(Xa[a>>2]),a+=4);return e}function pe(g){this.name="ExitStatus";this.message="Program terminated with exit("+g+")";this.status=g}function Uc(g){function a(){if(!bc&&(bc=!0,c.calledRun=!0,!Pc)){Zb(qe);Zb(cg);if(c.onRuntimeInitialized)c.onRuntimeInitialized();if(re){var g=
c._main;try{var a=g(0,0);if(!$a||0!==a){if(!$a&&(Pc=!0,c.onExit))c.onExit(a);Vc(a,new pe(a))}}catch(b){b instanceof pe||("unwind"==b?$a=!0:((g=b)&&"object"===typeof b&&b.stack&&(g=[b,b.stack]),Na("exception thrown: "+g),Vc(1,b)))}finally{}}if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)se.unshift(c.postRun.shift());Zb(se)}}if(!(0<Ya)){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)te.unshift(c.preRun.shift());Zb(te);0<
Ya||(c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1);a()},1)):a())}}function dg(){var g,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(navigator.gpu.requestAdapter(),2);if(3!=e.nextAddress)return g=e.yieldResult,e.yield(g.requestDevice(),3);a=e.yieldResult;x(g,a);e.jumpToEnd()})}var fg=function(){(function(g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===
typeof define&&define.amd?define([],g):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).SimpleWebRTC=g()})(function(){return function b(a,e,d){function h(p,c){if(!e[p]){if(!a[p]){var w="function"==typeof require&&require;if(!c&&w)return w(p,!0);if(t)return t(p,!0);c=Error("Cannot find module '"+p+"'");throw c.code="MODULE_NOT_FOUND",c;}c=e[p]={exports:{}};a[p][0].call(c.exports,function(b){var d=a[p][1][b];return h(d?d:b)},c,c.exports,b,a,
e,d)}return e[p].exports}for(var t="function"==typeof require&&require,c=0;c<d.length;c++)h(d[c]);return h}({1:[function(a,e,d){function b(){}e.exports=function(a,d,e){function h(a,b){if(0>=h.count)throw Error("after called too many times");--h.count;a?(t=!0,d(a),d=e):0!==h.count||t||d(null,b)}var t=!1;e=e||b;h.count=a;return 0===a?d():h}},{}],2:[function(a,e,d){e.exports=function(a,h,d){var b=a.byteLength;h=h||0;d=d||b;if(a.slice)return a.slice(h,d);0>h&&(h+=b);0>d&&(d+=b);d>b&&(d=b);if(h>=b||h>=
d||0===b)return new ArrayBuffer(0);a=new Uint8Array(a);b=new Uint8Array(d-h);for(var e=0;h<d;h++,e++)b[e]=a[h];return b.buffer}},{}],3:[function(a,e,d){e.exports=function(a,h,d){var b,e=h;h={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(d)for(b in d)h[b]=d[b];e?"audio"===e.tagName.toLowerCase()&&(h.audio=!0):e=document.createElement(h.audio?"audio":"video");h.disableContextMenu&&(e.oncontextmenu=function(a){a.preventDefault()});h.autoplay&&(e.autoplay="autoplay");h.muted&&(e.muted=
!0);!h.audio&&h.mirror&&["","moz","webkit","o","ms"].forEach(function(a){e.style[a?a+"Transform":"transform"]="scaleX(-1)"});e.srcObject=a;return e}},{}],4:[function(a,e,d){function b(a){a=a||{};this.ms=a.min||100;this.max=a.max||1E4;this.factor=a.factor||2;this.jitter=0<a.jitter&&1>=a.jitter?a.jitter:0;this.attempts=0}e.exports=b;b.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),d=Math.floor(b*this.jitter*a);a=0==(Math.floor(10*
b)&1)?a-d:a+d}return Math.min(a,this.max)|0};b.prototype.reset=function(){this.attempts=0};b.prototype.setMin=function(a){this.ms=a};b.prototype.setMax=function(a){this.max=a};b.prototype.setJitter=function(a){this.jitter=a}},{}],5:[function(a,e,d){(function(a){d.encode=function(b){b=new Uint8Array(b);var h,d=b.length,e="";for(h=0;h<d;h+=3)e+=a[b[h]>>2],e+=a[(b[h]&3)<<4|b[h+1]>>4],e+=a[(b[h+1]&15)<<2|b[h+2]>>6],e+=a[b[h+2]&63];2===d%3?e=e.substring(0,e.length-1)+"=":1===d%3&&(e=e.substring(0,e.length-
2)+"==");return e};d.decode=function(b){var h=.75*b.length,d=b.length,e=0;"="===b[b.length-1]&&(h--,"="===b[b.length-2]&&h--);var c=new ArrayBuffer(h),w=new Uint8Array(c);for(h=0;h<d;h+=4){var f=a.indexOf(b[h]);var K=a.indexOf(b[h+1]);var C=a.indexOf(b[h+2]);var za=a.indexOf(b[h+3]);w[e++]=f<<2|K>>4;w[e++]=(K&15)<<4|C>>2;w[e++]=(C&3)<<6|za&63}return c}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],6:[function(a,e,d){(function(a){function b(a){for(var b=0;b<a.length;b++){var h=
a[b];if(h.buffer instanceof ArrayBuffer){var d=h.buffer;if(h.byteLength!==d.byteLength){var e=new Uint8Array(h.byteLength);e.set(new Uint8Array(d,h.byteOffset,h.byteLength));d=e.buffer}a[b]=d}}}function d(a,h){h=h||{};var d=new p;b(a);for(var e=0;e<a.length;e++)d.append(a[e]);return h.type?d.getBlob(h.type):d.getBlob()}function c(a,h){b(a);return new Blob(a,h||{})}var p=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder;try{var f=2===(new Blob(["hi"])).size}catch(K){f=!1}var w;
if(w=f)try{w=2===(new Blob([new Uint8Array([1,2])])).size}catch(K){w=!1}var z=p&&p.prototype.append&&p.prototype.getBlob;a=f?w?a.Blob:c:z?d:void 0;e.exports=a}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],7:[function(a,e,d){var b=[].slice;e.exports=function(a,d){"string"==typeof d&&(d=a[d]);if("function"!=typeof d)throw Error("bind() requires a function");var h=b.call(arguments,2);return function(){return d.apply(a,h.concat(b.call(arguments)))}}},
{}],8:[function(a,e,d){function b(a){if(a){for(var h in b.prototype)a[h]=b.prototype[h];return a}}e.exports=b;b.prototype.on=b.prototype.addEventListener=function(a,b){this._callbacks=this._callbacks||{};(this._callbacks[a]=this._callbacks[a]||[]).push(b);return this};b.prototype.once=function(a,b){function h(){d.off(a,h);b.apply(this,arguments)}var d=this;this._callbacks=this._callbacks||{};h.fn=b;this.on(a,h);return this};b.prototype.off=b.prototype.removeListener=b.prototype.removeAllListeners=
b.prototype.removeEventListener=function(a,b){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var h=this._callbacks[a];if(!h)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<h.length;e++)if(d=h[e],d===b||d.fn===b){h.splice(e,1);break}return this};b.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),h=this._callbacks[a];if(h){h=h.slice(0);for(var d=0,e=h.length;d<e;++d)h[d].apply(this,
b)}return this};b.prototype.listeners=function(a){this._callbacks=this._callbacks||{};return this._callbacks[a]||[]};b.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],9:[function(a,e,d){e.exports=function(a,h){var b=function(){};b.prototype=h.prototype;a.prototype=new b;a.prototype.constructor=a}},{}],10:[function(a,e,d){function b(a){return b.enabled(a)?function(d){d instanceof Error&&(d=d.stack||d.message);var h=new Date,e=h-(b[a]||h);b[a]=h;d=a+" "+d+" +"+b.humanize(e);
window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}e.exports=b;b.names=[];b.skips=[];b.enable=function(a){try{localStorage.debug=a}catch(D){}for(var d=(a||"").split(/[\s,]+/),h=d.length,e=0;e<h;e++)a=d[e].replace("*",".*?"),"-"===a[0]?b.skips.push(new RegExp("^"+a.substr(1)+"$")):b.names.push(new RegExp("^"+a+"$"))};b.disable=function(){b.enable("")};b.humanize=function(a){return 36E5<=a?(a/36E5).toFixed(1)+"h":6E4<=a?(a/6E4).toFixed(1)+"m":1E3<=
a?(a/1E3|0)+"s":a+"ms"};b.enabled=function(a){for(var d=0,h=b.skips.length;d<h;d++)if(b.skips[d].test(a))return!1;d=0;for(h=b.names.length;d<h;d++)if(b.names[d].test(a))return!0;return!1};try{window.localStorage&&b.enable(localStorage.debug)}catch(h){}},{}],11:[function(a,e,d){e.exports=a("./lib/")},{"./lib/":12}],12:[function(a,e,d){e.exports=a("./socket");e.exports.parser=a("engine.io-parser")},{"./socket":13,"engine.io-parser":24}],13:[function(a,e,d){(function(b){function d(a,e){if(!(this instanceof
d))return new d(a,e);e=e||{};a&&"object"==typeof a&&(e=a,a=null);a&&(a=z(a),e.host=a.host,e.secure="https"==a.protocol||"wss"==a.protocol,e.port=a.port,a.query&&(e.query=a.query));this.secure=null!=e.secure?e.secure:b.location&&"https:"==location.protocol;e.host&&(a=e.host.split(":"),e.hostname=a.shift(),a.length?e.port=a.pop():e.port||(e.port=this.secure?"443":"80"));this.agent=e.agent||!1;this.hostname=e.hostname||(b.location?location.hostname:"localhost");this.port=e.port||(b.location&&location.port?
location.port:this.secure?443:80);this.query=e.query||{};"string"==typeof this.query&&(this.query=C.decode(this.query));this.upgrade=!1!==e.upgrade;this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!e.forceJSONP;this.jsonp=!1!==e.jsonp;this.forceBase64=!!e.forceBase64;this.enablesXDR=!!e.enablesXDR;this.timestampParam=e.timestampParam||"t";this.timestampRequests=e.timestampRequests;this.transports=e.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.callbackBuffer=
[];this.policyPort=e.policyPort||843;this.rememberUpgrade=e.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=e.onlyBinaryUpgrades;this.pfx=e.pfx||null;this.key=e.key||null;this.passphrase=e.passphrase||null;this.cert=e.cert||null;this.ca=e.ca||null;this.ciphers=e.ciphers||null;this.rejectUnauthorized=e.rejectUnauthorized||null;this.open()}var c=a("./transports"),f=a("component-emitter"),p=a("debug")("engine.io-client:socket"),D=a("indexof"),w=a("engine.io-parser"),z=a("parseuri"),
K=a("parsejson"),C=a("parseqs");e.exports=d;d.priorWebsocketSuccess=!1;f(d.prototype);d.protocol=w.protocol;d.Socket=d;d.Transport=a("./transport");d.transports=a("./transports");d.parser=a("engine.io-parser");d.prototype.createTransport=function(a){p('creating transport "%s"',a);var b=this.query,d={},e;for(e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);d.EIO=w.protocol;d.transport=a;this.id&&(d.sid=this.id);return new c[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,
query:d,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})};d.prototype.open=function(){if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))var a="websocket";
else{if(0==this.transports.length){var b=this;setTimeout(function(){b.emit("error","No transports available")},0);return}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(Rc){this.transports.shift();this.open();return}a.open();this.setTransport(a)};d.prototype.setTransport=function(a){p("setting transport %s",a.name);var b=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=a;a.on("drain",
function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})};d.prototype.probe=function(a){function b(){if(D.onlyBinaryUpgrades){var b=!this.supportsBinary&&D.transport.supportsBinary;z=z||b}z||(p('probe transport "%s" opened',a),f.send([{type:"ping",data:"probe"}]),f.once("packet",function(b){z||("pong"==b.type&&"probe"==b.data?(p('probe transport "%s" pong',a),D.upgrading=!0,D.emit("upgrading",f),f&&
(d.priorWebsocketSuccess="websocket"==f.name,p('pausing current transport "%s"',D.transport.name),D.transport.pause(function(){z||"closed"==D.readyState||(p("changing transport and sending upgrade packet"),C(),D.setTransport(f),f.send([{type:"upgrade"}]),D.emit("upgrade",f),f=null,D.upgrading=!1,D.flush())}))):(p('probe transport "%s" failed',a),b=Error("probe error"),b.transport=f.name,D.emit("upgradeError",b)))}))}function e(){z||(z=!0,C(),f.close(),f=null)}function h(b){var d=Error("probe error: "+
b);d.transport=f.name;e();p('probe transport "%s" failed because of error: %s',a,b);D.emit("upgradeError",d)}function c(){h("transport closed")}function t(){h("socket closed")}function w(a){f&&a.name!=f.name&&(p('"%s" works - aborting "%s"',a.name,f.name),e())}function C(){f.removeListener("open",b);f.removeListener("error",h);f.removeListener("close",c);D.removeListener("close",t);D.removeListener("upgrading",w)}p('probing transport "%s"',a);var f=this.createTransport(a,{probe:1}),z=!1,D=this;d.priorWebsocketSuccess=
!1;f.once("open",b);f.once("error",h);f.once("close",c);this.once("close",t);this.once("upgrading",w);f.open()};d.prototype.onOpen=function(){p("socket open");this.readyState="open";d.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}};d.prototype.onPacket=function(a){if("opening"==this.readyState||
"open"==this.readyState)switch(p('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case "open":this.onHandshake(K(a.data));break;case "pong":this.setPing();break;case "error":var b=Error("server error");b.code=a.data;this.emit("error",b);break;case "message":this.emit("data",a.data),this.emit("message",a.data)}else p('packet received with socket readyState "%s"',this.readyState)};d.prototype.onHandshake=function(a){this.emit("handshake",a);
this.id=a.sid;this.transport.query.sid=a.sid;this.upgrades=this.filterUpgrades(a.upgrades);this.pingInterval=a.pingInterval;this.pingTimeout=a.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){if("closed"!=b.readyState)b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)};
d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer);a.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",a.pingTimeout);a.ping();a.onHeartbeat(a.pingTimeout)},a.pingInterval)};d.prototype.ping=function(){this.sendPacket("ping")};d.prototype.onDrain=function(){for(var a=0;a<this.prevBufferLen;a++)if(this.callbackBuffer[a])this.callbackBuffer[a]();this.writeBuffer.splice(0,this.prevBufferLen);this.callbackBuffer.splice(0,this.prevBufferLen);
this.prevBufferLen=0;0==this.writeBuffer.length?this.emit("drain"):this.flush()};d.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};d.prototype.write=d.prototype.send=function(a,b){this.sendPacket("message",a,b);return this};d.prototype.sendPacket=function(a,b,d){"closing"!=
this.readyState&&"closed"!=this.readyState&&(a={type:a,data:b},this.emit("packetCreate",a),this.writeBuffer.push(a),this.callbackBuffer.push(d),this.flush())};d.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){var a=function(){e.once("upgrade",b);e.once("upgradeError",b)},b=function(){e.removeListener("upgrade",b);e.removeListener("upgradeError",b);d()},d=function(){e.onClose("forced close");p("socket closing - telling transport to close");e.transport.close()};this.readyState=
"closing";var e=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?a():d()});else this.upgrading?a():d()}return this};d.prototype.onError=function(a){p("socket error %j",a);d.priorWebsocketSuccess=!1;this.emit("error",a);this.onClose("transport error",a)};d.prototype.onClose=function(a,b){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){p('socket close with reason: "%s"',a);var d=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);
setTimeout(function(){d.writeBuffer=[];d.callbackBuffer=[];d.prevBufferLen=0},0);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",a,b)}};d.prototype.filterUpgrades=function(a){for(var b=[],d=0,e=a.length;d<e;d++)~D(this.transports,a[d])&&b.push(a[d]);return b}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./transport":14,
"./transports":15,"component-emitter":8,debug:21,"engine.io-parser":24,indexof:32,parsejson:40,parseqs:41,parseuri:23}],14:[function(a,e,d){function b(a){this.path=a.path;this.hostname=a.hostname;this.port=a.port;this.secure=a.secure;this.query=a.query;this.timestampParam=a.timestampParam;this.timestampRequests=a.timestampRequests;this.readyState="";this.agent=a.agent||!1;this.socket=a.socket;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;
this.ca=a.ca;this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized}var h=a("engine.io-parser");a=a("component-emitter");e.exports=b;a(b.prototype);b.timestamps=0;b.prototype.onError=function(a,b){a=Error(a);a.type="TransportError";a.description=b;this.emit("error",a);return this};b.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};b.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),
this.onClose();return this};b.prototype.send=function(a){if("open"==this.readyState)this.write(a);else throw Error("Transport not open");};b.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};b.prototype.onData=function(a){a=h.decodePacket(a,this.socket.binaryType);this.onPacket(a)};b.prototype.onPacket=function(a){this.emit("packet",a)};b.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":8,"engine.io-parser":24}],15:[function(a,
e,d){(function(b){var e=a("xmlhttprequest"),c=a("./polling-xhr"),f=a("./polling-jsonp"),p=a("./websocket");d.polling=function(a){var d=!1,h=!1,p=!1!==a.jsonp;b.location&&(h="https:"==location.protocol,(d=location.port)||(d=h?443:80),d=a.hostname!=location.hostname||d!=a.port,h=a.secure!=h);a.xdomain=d;a.xscheme=h;if("open"in new e(a)&&!a.forceJSONP)return new c(a);if(!p)throw Error("JSONP disabled");return new f(a)};d.websocket=p}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?
self:"undefined"!==typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(a,e,d){(function(b){function d(){}function c(a){f.call(this,a);this.query=this.query||{};z||(b.___eio||(b.___eio=[]),z=b.___eio);this.index=z.length;var e=this;z.push(function(a){e.onData(a)});this.query.j=this.index;b.document&&b.addEventListener&&b.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=d)},!1)}var f=a("./polling"),p=a("component-inherit");
e.exports=c;var D=/\n/g,w=/\\n/g,z;p(c,f);c.prototype.supportsBinary=!1;c.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);f.prototype.doClose.call(this)};c.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);b.async=!0;b.src=this.uri();b.onerror=function(b){a.onError("jsonp poll error",
b)};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d);this.script=b;"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},100)};c.prototype.doWrite=function(a,b){function d(){e();b()}function e(){if(h.iframe)try{h.form.removeChild(h.iframe)}catch(Za){h.onError("jsonp polling iframe removal error",Za)}try{f=document.createElement('<iframe src="javascript:0" name="'+
h.iframeId+'">')}catch(Za){f=document.createElement("iframe"),f.name=h.iframeId,f.src="javascript:0"}f.id=h.iframeId;h.form.appendChild(f);h.iframe=f}var h=this;if(!this.form){var c=document.createElement("form"),p=document.createElement("textarea"),t=this.iframeId="eio_iframe_"+this.index,f;c.className="socketio";c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";c.target=t;c.method="POST";c.setAttribute("accept-charset","utf-8");p.name="d";c.appendChild(p);document.body.appendChild(c);
this.form=c;this.area=p}this.form.action=this.uri();e();a=a.replace(w,"\\\n");this.area.value=a.replace(D,"\\n");try{this.form.submit()}catch(Za){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==h.iframe.readyState&&d()}:this.iframe.onload=d}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-inherit":9}],17:[function(a,e,d){(function(b){function d(){}function c(a){w.call(this,
a);if(b.location){var d="https:"==location.protocol,e=location.port;e||(e=d?443:80);this.xd=a.hostname!=b.location.hostname||e!=a.port;this.xs=a.secure!=d}}function f(a){this.method=a.method||"GET";this.uri=a.uri;this.xd=!!a.xd;this.xs=!!a.xs;this.async=!1!==a.async;this.data=void 0!=a.data?a.data:null;this.agent=a.agent;this.isBinary=a.isBinary;this.supportsBinary=a.supportsBinary;this.enablesXDR=a.enablesXDR;this.pfx=a.pfx;this.key=a.key;this.passphrase=a.passphrase;this.cert=a.cert;this.ca=a.ca;
this.ciphers=a.ciphers;this.rejectUnauthorized=a.rejectUnauthorized;this.create()}function p(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var D=a("xmlhttprequest"),w=a("./polling"),z=a("component-emitter"),K=a("component-inherit"),C=a("debug")("engine.io-client:polling-xhr");e.exports=c;e.exports.Request=f;K(c,w);c.prototype.supportsBinary=!0;c.prototype.request=function(a){a=a||{};a.uri=this.uri();a.xd=this.xd;a.xs=this.xs;a.agent=this.agent||!1;a.supportsBinary=
this.supportsBinary;a.enablesXDR=this.enablesXDR;a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;return new f(a)};c.prototype.doWrite=function(a,b){a=this.request({method:"POST",data:a,isBinary:"string"!==typeof a&&void 0!==a});var d=this;a.on("success",b);a.on("error",function(a){d.onError("xhr post error",a)});this.sendXhr=a};c.prototype.doPoll=function(){C("xhr poll");var a=this.request(),
b=this;a.on("data",function(a){b.onData(a)});a.on("error",function(a){b.onError("xhr poll error",a)});this.pollXhr=a};z(f.prototype);f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx;a.key=this.key;a.passphrase=this.passphrase;a.cert=this.cert;a.ca=this.ca;a.ciphers=this.ciphers;a.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new D(a),e=this;try{C("xhr open %s: %s",this.method,this.uri);d.open(this.method,this.uri,
this.async);this.supportsBinary&&(d.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Sc){}"withCredentials"in d&&(d.withCredentials=!0);this.hasXDR()?(d.onload=function(){e.onLoad()},d.onerror=function(){e.onError(d.responseText)}):d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status||1223==d.status)e.onLoad();else setTimeout(function(){e.onError(d.status)},
0)};C("xhr data %s",this.data);d.send(this.data)}catch(Sc){setTimeout(function(){e.onError(Sc)},0);return}b.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)};f.prototype.onSuccess=function(){this.emit("success");this.cleanup()};f.prototype.onData=function(a){this.emit("data",a);this.onSuccess()};f.prototype.onError=function(a){this.emit("error",a);this.cleanup(!0)};f.prototype.cleanup=function(a){if("undefined"!=typeof this.xhr&&null!==this.xhr){this.hasXDR()?this.xhr.onload=this.xhr.onerror=
d:this.xhr.onreadystatechange=d;if(a)try{this.xhr.abort()}catch(Aa){}b.document&&delete f.requests[this.index];this.xhr=null}};f.prototype.onLoad=function(){try{try{var a=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(Rc){}var b="application/octet-stream"===a?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(Rc){this.onError(Rc)}if(null!=b)this.onData(b)};f.prototype.hasXDR=function(){return"undefined"!==typeof b.XDomainRequest&&!this.xs&&this.enablesXDR};f.prototype.abort=
function(){this.cleanup()};b.document&&(f.requestsCount=0,f.requests={},b.attachEvent?b.attachEvent("onunload",p):b.addEventListener&&b.addEventListener("beforeunload",p,!1))}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./polling":18,"component-emitter":8,"component-inherit":9,debug:21,xmlhttprequest:20}],18:[function(a,e,d){function b(a){var b=a&&a.forceBase64;if(!D||b)this.supportsBinary=!1;h.call(this,a)}var h=a("../transport"),
c=a("parseqs"),f=a("engine.io-parser");d=a("component-inherit");var p=a("debug")("engine.io-client:polling");e.exports=b;var D=null!=(new (a("xmlhttprequest"))({xdomain:!1})).responseType;d(b,h);b.prototype.name="polling";b.prototype.doOpen=function(){this.poll()};b.prototype.pause=function(a){function b(){p("paused");d.readyState="paused";a()}var d=this;this.readyState="pausing";if(this.polling||!this.writable){var e=0;this.polling&&(p("we are currently polling - waiting to pause"),e++,this.once("pollComplete",
function(){p("pre-pause polling complete");--e||b()}));this.writable||(p("we are currently writing - waiting to pause"),e++,this.once("drain",function(){p("pre-pause writing complete");--e||b()}))}else b()};b.prototype.poll=function(){p("polling");this.polling=!0;this.doPoll();this.emit("poll")};b.prototype.onData=function(a){var b=this;p("polling got data %s",a);f.decodePayload(a,this.socket.binaryType,function(a,d,e){if("opening"==b.readyState)b.onOpen();if("close"==a.type)return b.onClose(),!1;
b.onPacket(a)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))};b.prototype.doClose=function(){function a(){p("writing close packet");b.write([{type:"close"}])}var b=this;"open"==this.readyState?(p("transport open - closing"),a()):(p("transport not open - deferring close"),this.once("open",a))};b.prototype.write=function(a){var b=this;this.writable=!1;var d=function(){b.writable=!0;
b.emit("drain")};b=this;f.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,d)})};b.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",d="";!1!==this.timestampRequests&&(a[this.timestampParam]=+new Date+"-"+h.timestamps++);this.supportsBinary||a.sid||(a.b64=1);a=c.encode(a);this.port&&("https"==b&&443!=this.port||"http"==b&&80!=this.port)&&(d=":"+this.port);a.length&&(a="?"+a);return b+"://"+this.hostname+d+this.path+a}},{"../transport":14,"component-inherit":9,debug:21,
"engine.io-parser":24,parseqs:41,xmlhttprequest:20}],19:[function(a,e,d){function b(a){a&&a.forceBase64&&(this.supportsBinary=!1);h.call(this,a)}var h=a("../transport"),c=a("engine.io-parser"),f=a("parseqs");d=a("component-inherit");var p=a("debug")("engine.io-client:websocket"),D=a("ws");e.exports=b;d(b,h);b.prototype.name="websocket";b.prototype.supportsBinary=!0;b.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent};b.pfx=this.pfx;b.key=this.key;b.passphrase=this.passphrase;
b.cert=this.cert;b.ca=this.ca;b.ciphers=this.ciphers;b.rejectUnauthorized=this.rejectUnauthorized;this.ws=new D(a,void 0,b);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.binaryType="arraybuffer";this.addEventListeners()}};b.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()};this.ws.onclose=function(){a.onClose()};this.ws.onmessage=function(b){a.onData(b.data)};this.ws.onerror=function(b){a.onError("websocket error",b)}};"undefined"!=typeof navigator&&
/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(b.prototype.onData=function(a){var b=this;setTimeout(function(){h.prototype.onData.call(b,a)},0)});b.prototype.write=function(a){var b=this;this.writable=!1;for(var d=0,e=a.length;d<e;d++)c.encodePacket(a[d],this.supportsBinary,function(a){try{b.ws.send(a)}catch(Aa){p("websocket closed before onclose event")}});setTimeout(function(){b.writable=!0;b.emit("drain")},0)};b.prototype.onClose=function(){h.prototype.onClose.call(this)};b.prototype.doClose=
function(){"undefined"!==typeof this.ws&&this.ws.close()};b.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",d="";this.port&&("wss"==b&&443!=this.port||"ws"==b&&80!=this.port)&&(d=":"+this.port);this.timestampRequests&&(a[this.timestampParam]=+new Date);this.supportsBinary||(a.b64=1);a=f.encode(a);a.length&&(a="?"+a);return b+"://"+this.hostname+d+this.path+a};b.prototype.check=function(){return!!D&&!("__initialize"in D&&this.name===b.prototype.name)}},{"../transport":14,"component-inherit":9,
debug:21,"engine.io-parser":24,parseqs:41,ws:66}],20:[function(a,e,d){var b=a("has-cors");e.exports=function(a){var d=a.xdomain,e=a.xscheme;a=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!d||b))return new XMLHttpRequest}catch(p){}try{if("undefined"!=typeof XDomainRequest&&!e&&a)return new XDomainRequest}catch(p){}if(!d)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(p){}}},{"has-cors":31}],21:[function(a,e,d){function b(){try{var a=localStorage.debug}catch(t){}return a}d=e.exports=
a("./debug");d.log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)};d.formatArgs=function(){var a=arguments,b=this.useColors;a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+d.humanize(this.diff);if(!b)return a;b="color: "+this.color;a=[a[0],b,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,c=0;a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(c=e))});a.splice(c,
0,b);return a};d.save=function(a){try{null==a?localStorage.removeItem("debug"):localStorage.debug=a}catch(t){}};d.load=b;d.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};d.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");d.formatters.j=function(a){return JSON.stringify(a)};d.enable(b())},
{"./debug":22}],22:[function(a,e,d){d=e.exports=function(a){function e(){}function c(){var a=+new Date;c.diff=a-(h||a);c.prev=h;h=c.curr=a;null==c.useColors&&(c.useColors=d.useColors());null==c.color&&c.useColors&&(c.color=d.colors[b++%d.colors.length]);var e=Array.prototype.slice.call(arguments);e[0]=d.coerce(e[0]);"string"!==typeof e[0]&&(e=["%o"].concat(e));var p=0;e[0]=e[0].replace(/%([a-z%])/g,function(a,b){if("%%"===a)return a;p++;b=d.formatters[b];"function"===typeof b&&(a=b.call(c,e[p]),e.splice(p,
1),p--);return a});"function"===typeof d.formatArgs&&(e=d.formatArgs.apply(c,e));(c.log||d.log||console.log.bind(console)).apply(c,e)}e.enabled=!1;c.enabled=!0;var f=d.enabled(a)?c:e;f.namespace=a;return f};d.coerce=function(a){return a instanceof Error?a.stack||a.message:a};d.disable=function(){d.enable("")};d.enable=function(a){d.save(a);for(var b=(a||"").split(/[\s,]+/),e=b.length,h=0;h<e;h++)b[h]&&(a=b[h].replace(/\*/g,".*?"),"-"===a[0]?d.skips.push(new RegExp("^"+a.substr(1)+"$")):d.names.push(new RegExp("^"+
a+"$")))};d.enabled=function(a){var b;var e=0;for(b=d.skips.length;e<b;e++)if(d.skips[e].test(a))return!1;e=0;for(b=d.names.length;e<b;e++)if(d.names[e].test(a))return!0;return!1};d.humanize=a("ms");d.names=[];d.skips=[];d.formatters={};var b=0,h},{ms:38}],23:[function(a,e,d){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
h="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(a){var d=a,e=a.indexOf("["),c=a.indexOf("]");-1!=e&&-1!=c&&(a=a.substring(0,e)+a.substring(e,c).replace(/:/g,";")+a.substring(c,a.length));a=b.exec(a||"");for(var f={},t=14;t--;)f[h[t]]=a[t]||"";-1!=e&&-1!=c&&(f.source=d,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=
!0);return f}},{}],24:[function(a,e,d){(function(b){function e(a,b,e){if(!b)return d.encodeBase64Packet(a,e);var h=new FileReader;h.onload=function(){a.data=h.result;d.encodePacket(a,b,!0,e)};return h.readAsArrayBuffer(a.data)}function c(a,b,d){var e=Array(a.length);d=z(a.length,d);for(var h=function(a,d,h){b(d,function(b,d){e[a]=d;h(b,e)})},c=0;c<a.length;c++)h(c,a[c],d)}var f=a("./keys"),p=a("has-binary"),D=a("arraybuffer.slice"),w=a("base64-arraybuffer"),z=a("after"),k=a("utf8"),C=navigator.userAgent.match(/Android/i),
za=/PhantomJS/i.test(navigator.userAgent),l=C||za;d.protocol=3;var m=d.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},n=f(m),q={type:"error",data:"parser error"},B=a("blob");d.encodePacket=function(a,h,c,p){"function"==typeof h&&(p=h,h=!1);"function"==typeof c&&(p=c,c=null);var f=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&f instanceof ArrayBuffer){if(h){c=a.data;h=new Uint8Array(c);c=new Uint8Array(1+c.byteLength);c[0]=m[a.type];for(a=0;a<h.length;a++)c[a+1]=
h[a];a=p(c.buffer)}else a=d.encodeBase64Packet(a,p);return a}if(B&&f instanceof b.Blob)return h?l?a=e(a,h,p):(h=new Uint8Array(1),h[0]=m[a.type],a=new B([h.buffer,a.data]),a=p(a)):a=d.encodeBase64Packet(a,p),a;if(f&&f.base64)return p("b"+d.packets[a.type]+a.data.data);h=m[a.type];void 0!==a.data&&(h+=c?k.encode(String(a.data)):String(a.data));return p(""+h)};d.encodeBase64Packet=function(a,e){var h="b"+d.packets[a.type];if(B&&a.data instanceof B){var c=new FileReader;c.onload=function(){var a=c.result.split(",")[1];
e(h+a)};return c.readAsDataURL(a.data)}try{var p=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(sh){a=new Uint8Array(a.data);p=Array(a.length);for(var f=0;f<a.length;f++)p[f]=a[f];p=String.fromCharCode.apply(null,p)}h+=b.btoa(p);return e(h)};d.decodePacket=function(a,b,e){if("string"==typeof a||void 0===a){if("b"==a.charAt(0))return d.decodeBase64Packet(a.substr(1),b);if(e)try{a=k.decode(a)}catch(rh){return q}e=a.charAt(0);return Number(e)==e&&n[e]?1<a.length?{type:n[e],data:a.substring(1)}:
{type:n[e]}:q}e=(new Uint8Array(a))[0];a=D(a,1);B&&"blob"===b&&(a=new B([a]));return{type:n[e],data:a}};d.decodeBase64Packet=function(a,d){var e=n[a.charAt(0)];if(!b.ArrayBuffer)return{type:e,data:{base64:!0,data:a.substr(1)}};a=w.decode(a.substr(1));"blob"===d&&B&&(a=new B([a]));return{type:e,data:a}};d.encodePayload=function(a,b,e){"function"==typeof b&&(e=b,b=null);var h=p(a);if(b&&h)return B&&!l?d.encodePayloadAsBlob(a,e):d.encodePayloadAsArrayBuffer(a,e);if(!a.length)return e("0:");c(a,function(a,
e){d.encodePacket(a,h?b:!1,!0,function(a){e(null,a.length+":"+a)})},function(a,b){return e(b.join(""))})};d.decodePayload=function(a,b,e){if("string"!=typeof a)return d.decodePayloadAsBinary(a,b,e);"function"===typeof b&&(e=b,b=null);if(""==a)return e(q,0,1);var h="";for(var c,p,f=0,t=a.length;f<t;f++)if(p=a.charAt(f),":"!=p)h+=p;else{if(""==h||h!=(c=Number(h)))return e(q,0,1);p=a.substr(f+1,c);if(h!=p.length)return e(q,0,1);if(p.length){h=d.decodePacket(p,b,!0);if(q.type==h.type&&q.data==h.data)return e(q,
0,1);if(!1===e(h,f+c,t))return}f+=c;h=""}if(""!=h)return e(q,0,1)};d.encodePayloadAsArrayBuffer=function(a,b){if(!a.length)return b(new ArrayBuffer(0));c(a,function(a,b){d.encodePacket(a,!0,!0,function(a){return b(null,a)})},function(a,d){a=d.reduce(function(a,b){b="string"===typeof b?b.length:b.byteLength;return a+b.toString().length+b+2},0);var e=new Uint8Array(a),h=0;d.forEach(function(a){var b="string"===typeof a,d=a;if(b){d=new Uint8Array(a.length);for(var c=0;c<a.length;c++)d[c]=a.charCodeAt(c);
d=d.buffer}b?e[h++]=0:e[h++]=1;a=d.byteLength.toString();for(c=0;c<a.length;c++)e[h++]=parseInt(a[c]);e[h++]=255;d=new Uint8Array(d);for(c=0;c<d.length;c++)e[h++]=d[c]});return b(e.buffer)})};d.encodePayloadAsBlob=function(a,b){c(a,function(a,b){d.encodePacket(a,!0,!0,function(a){var d=new Uint8Array(1);d[0]=1;if("string"===typeof a){for(var e=new Uint8Array(a.length),h=0;h<a.length;h++)e[h]=a.charCodeAt(h);a=e.buffer;d[0]=0}e=(a instanceof ArrayBuffer?a.byteLength:a.size).toString();var c=new Uint8Array(e.length+
1);for(h=0;h<e.length;h++)c[h]=parseInt(e[h]);c[e.length]=255;B&&(a=new B([d.buffer,c.buffer,a]),b(null,a))})},function(a,d){return b(new B(d))})};d.decodePayloadAsBinary=function(a,b,e){"function"===typeof b&&(e=b,b=null);for(var h=[],c=!1;0<a.byteLength;){for(var p=new Uint8Array(a),f=0===p[0],t="",w=1;255!=p[w];w++){if(310<t.length){c=!0;break}t+=p[w]}if(c)return e(q,0,1);a=D(a,2+t.length);t=parseInt(t);p=D(a,0,t);if(f)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(th){for(f=new Uint8Array(p),
p="",w=0;w<f.length;w++)p+=String.fromCharCode(f[w])}h.push(p);a=D(a,t)}var C=h.length;h.forEach(function(a,h){e(d.decodePacket(a,b,!0),h,C)})}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./keys":25,after:1,"arraybuffer.slice":2,"base64-arraybuffer":5,blob:6,"has-binary":30,utf8:60}],25:[function(a,e,d){e.exports=Object.keys||function(a){var b=[],d=Object.prototype.hasOwnProperty,e;for(e in a)d.call(a,e)&&b.push(e);return b}},
{}],26:[function(a,e,d){function b(a){c.call(this);a=a||{};this.config={chunksize:16384,pacing:0};for(var b in a)this.config[b]=a[b];this.channel=this.file=null}function h(){c.call(this);this.receiveBuffer=[];this.received=0;this.metadata={};this.channel=null}var c=a("wildemitter");a=a("util");a.inherits(b,c);b.prototype.send=function(a,b){var d=this;this.file=a;this.channel=b;var e="number"!==typeof b.bufferedAmountLowThreshold,h=0,c=function(){var p=new window.FileReader;p.onload=function(){return function(p){d.channel.send(p.target.result);
d.emit("progress",h,a.size,p.target.result);a.size>h+p.target.result.byteLength?e?window.setTimeout(c,d.config.pacing):b.bufferedAmount<=b.bufferedAmountLowThreshold&&window.setTimeout(c,0):(d.emit("progress",a.size,a.size,null),d.emit("sentFile"));h+=d.config.chunksize}}(a);var f=a.slice(h,h+d.config.chunksize);p.readAsArrayBuffer(f)};e||(b.bufferedAmountLowThreshold=8*this.config.chunksize,b.addEventListener("bufferedamountlow",c));window.setTimeout(c,0)};a.inherits(h,c);h.prototype.receive=function(a,
b){var d=this;a&&(this.metadata=a);this.channel=b;b.binaryType="arraybuffer";this.channel.onmessage=function(a){d.received+=a.data.byteLength;d.receiveBuffer.push(a.data);d.emit("progress",d.received,d.metadata.size,a.data);d.received===d.metadata.size?(d.emit("receivedFile",new window.Blob(d.receiveBuffer),d.metadata),d.receiveBuffer=[]):d.received>d.metadata.size&&(console.error("received more than expected, discarding..."),d.receiveBuffer=[])}};e.exports={};e.exports.support="undefined"!==typeof window&&
window&&window.File&&window.FileReader&&window.Blob;e.exports.Sender=b;e.exports.Receiver=h},{util:63,wildemitter:65}],27:[function(a,e,d){var b={};e.exports=function(a,d){var e=2===arguments.length,h=e?d:a;if("undefined"===typeof window||"http:"===window.location.protocol){var c=Error("NavigatorUserMediaError");c.name="HTTPS_REQUIRED";return h(c)}if(window.navigator.userAgent.match("Chrome")){var f=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33,k=!window.chrome.webstore;window.navigator.userAgent.match("Linux")&&
(t=35);sessionStorage.getScreenMediaJSExtensionId?chrome.runtime.sendMessage(sessionStorage.getScreenMediaJSExtensionId,{type:"getScreen",id:1},null,function(b){b&&""!==b.sourceId?(a=e&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3}}},a.video.mandatory.chromeMediaSourceId=b.sourceId,window.navigator.mediaDevices.getUserMedia(a).then(function(a){h(null,a)}).catch(function(a){h(a)})):(b=Error("NavigatorUserMediaError"),
b.name="NotAllowedError",h(b))}):window.cefGetScreenMedia?window.cefGetScreenMedia(function(b){b?(a=e&&a||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},a.video.mandatory.chromeMediaSourceId=b,window.navigator.mediaDevices.getUserMedia(a).then(function(a){h(null,a)}).catch(function(a){h(a)})):(b=Error("cefGetScreenMediaError"),b.name="CEF_GETSCREENMEDIA_CANCELED",
h(b))}):k||26<=f&&f<=t?(a=e&&a||{video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){h(null,a)}).catch(function(a){h(a)})):(f=window.setTimeout(function(){c=Error("NavigatorUserMediaError");c.name="EXTENSION_UNAVAILABLE";return h(c)},1E3),b[f]=[h,e?a:null],window.postMessage({type:"getScreen",id:f},"*"))}else window.navigator.userAgent.match("Firefox")&&
(33<=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10)?(a=e&&a||{video:{mozMediaSource:"window",mediaSource:"window"}},window.navigator.mediaDevices.getUserMedia(a).then(function(a){h(null,a);var b=a.currentTime,d=window.setInterval(function(){a||window.clearInterval(d);if(a.currentTime==b&&(window.clearInterval(d),a.onended))a.onended();b=a.currentTime},500)}).catch(function(a){h(a)})):(c=Error("NavigatorUserMediaError"),c.name="EXTENSION_UNAVAILABLE"))};"undefined"!==typeof window&&
window.addEventListener("message",function(a){if(a.origin==window.location.origin)if("gotScreen"==a.data.type&&b[a.data.id]){var d=b[a.data.id],e=d[1],h=d[0];delete b[a.data.id];""===a.data.sourceId?(a=Error("NavigatorUserMediaError"),a.name="NotAllowedError",h(a)):(e=e||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},e.video.mandatory.chromeMediaSourceId=
a.data.sourceId,window.navigator.mediaDevices.getUserMedia(e).then(function(a){h(null,a)}).catch(function(a){h(a)}))}else"getScreenPending"==a.data.type&&window.clearTimeout(a.data.id)})},{}],28:[function(a,e,d){e.exports=function(){return this}()},{}],29:[function(a,e,d){var b=a("wildemitter"),h;"undefined"!==typeof window&&(h=window.AudioContext||window.webkitAudioContext);var c=null;e.exports=function(a,d){var e=new b;if(!h)return e;d=d||{};var f=d.smoothing||.1,p=d.interval||50,t=d.threshold,
C=d.play;d=d.history||10;var k=!0;c||(c=new h);var ma=c.createAnalyser();ma.fftSize=512;ma.smoothingTimeConstant=f;var l=new Float32Array(ma.frequencyBinCount);a.jquery&&(a=a[0]);if(a instanceof HTMLAudioElement||a instanceof HTMLVideoElement){var m=c.createMediaElementSource(a);"undefined"===typeof C&&(C=!0)}else m=c.createMediaStreamSource(a);t=t||-50;m.connect(ma);C&&ma.connect(c.destination);e.speaking=!1;e.setThreshold=function(a){t=a};e.setInterval=function(a){p=a};e.stop=function(){k=!1;e.emit("volume_change",
-100,t);e.speaking&&(e.speaking=!1,e.emit("stopped_speaking"));ma.disconnect();m.disconnect()};e.speakingHistory=[];for(a=0;a<d;a++)e.speakingHistory.push(0);var n=function(){setTimeout(function(){if(k){var a=-Infinity;ma.getFloatFrequencyData(l);for(var b=4,d=l.length;b<d;b++)l[b]>a&&0>l[b]&&(a=l[b]);e.emit("volume_change",a,t);b=0;if(a>t&&!e.speaking){for(d=e.speakingHistory.length-3;d<e.speakingHistory.length;d++)b+=e.speakingHistory[d];2<=b&&(e.speaking=!0,e.emit("speaking"))}else if(a<t&&e.speaking){for(d=
0;d<e.speakingHistory.length;d++)b+=e.speakingHistory[d];0==b&&(e.speaking=!1,e.emit("stopped_speaking"))}e.speakingHistory.shift();e.speakingHistory.push(0+(a>t));n()}},p)};n();return e}},{wildemitter:65}],30:[function(a,e,d){(function(b){var d=a("isarray");e.exports=function(a){function e(a){if(!a)return!1;if(b.Buffer&&b.Buffer.isBuffer(a)||b.ArrayBuffer&&a instanceof ArrayBuffer||b.Blob&&a instanceof Blob||b.File&&a instanceof File)return!0;if(d(a))for(var h=0;h<a.length;h++){if(e(a[h]))return!0}else if(a&&
"object"==typeof a)for(h in a.toJSON&&(a=a.toJSON()),a)if(Object.prototype.hasOwnProperty.call(a,h)&&e(a[h]))return!0;return!1}return e(a)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{isarray:33}],31:[function(a,e,d){a=a("global");try{e.exports="XMLHttpRequest"in a&&"withCredentials"in new a.XMLHttpRequest}catch(b){e.exports=!1}},{global:28}],32:[function(a,e,d){var b=[].indexOf;e.exports=function(a,d){if(b)return a.indexOf(d);
for(var e=0;e<a.length;++e)if(a[e]===d)return e;return-1}},{}],33:[function(a,e,d){e.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],34:[function(a,e,d){(function(a){function b(a){if(b[a]!==f)return b[a];if("bug-string-char-index"==a)var d=!1;else if("json"==a)d=b("json-stringify")&&b("json-parse");else{var h;if("json-stringify"==a){d=w.stringify;var c="function"==typeof d&&z;if(c){(h=function(){return 1}).toJSON=h;try{c="0"===d(0)&&"0"===d(new Number)&&
'""'==d(new String)&&d(e)===f&&d(f)===f&&d()===f&&"1"===d(h)&&"[1]"==d([h])&&"[null]"==d([f])&&"null"==d(null)&&"[null,null,null]"==d([f,e,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==d({a:[h,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===d(null,h)&&"[\n 1,\n 2\n]"==d([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==d(new Date(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==d(new Date(864E13))&&'"-000001-01-01T00:00:00.000Z"'==d(new Date(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==d(new Date(-1))}catch(Ha){c=
!1}}d=c}if("json-parse"==a){d=w.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){h=d('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var p=5==h.a.length&&1===h.a[0];if(p){try{p=!d('"\t"')}catch(Ha){}if(p)try{p=1!==d("01")}catch(Ha){}if(p)try{p=1!==d("1.")}catch(Ha){}}}}catch(Ha){p=!1}d=p}}return b[a]=!!d}var e={}.toString,c,f,k="object"==typeof JSON&&JSON,w="object"==typeof d&&d&&!d.nodeType&&d;w&&k?(w.stringify=k.stringify,w.parse=k.parse):w=a.JSON=k||{};var z=new Date(-0xc782b5b800cec);
try{z=-109252==z.getUTCFullYear()&&0===z.getUTCMonth()&&1===z.getUTCDate()&&10==z.getUTCHours()&&37==z.getUTCMinutes()&&6==z.getUTCSeconds()&&708==z.getUTCMilliseconds()}catch(uh){}if(!b("json")){var K=b("bug-string-char-index");if(!z)var C=Math.floor,l=[0,31,59,90,120,151,181,212,243,273,304,334],m=function(a,b){return l[b]+365*(a-1970)+C((a-1969+(b=+(1<b)))/4)-C((a-1901+b)/100)+C((a-1601+b)/400)};(c={}.hasOwnProperty)||(c=function(a){var b={};if((b.__proto__=null,b.__proto__={toString:1},b).toString!=
e)c=function(a){var b=this.__proto__;a=a in(this.__proto__=null,this);this.__proto__=b;return a};else{var d=b.constructor;c=function(a){var b=(this.constructor||d).prototype;return a in this&&!(a in b&&this[a]===b[a])}}b=null;return c.call(this,a)});var n={"boolean":1,number:1,string:1,undefined:1};var q=function(a,b){var d=0,h,f;(h=function(){this.valueOf=0}).prototype.valueOf=0;var p=new h;for(f in p)c.call(p,f)&&d++;h=p=null;d?q=2==d?function(a,b){var d={},h="[object Function]"==e.call(a),f;for(f in a)h&&
"prototype"==f||c.call(d,f)||!(d[f]=1)||!c.call(a,f)||b(f)}:function(a,b){var d="[object Function]"==e.call(a),h,f;for(h in a)d&&"prototype"==h||!c.call(a,h)||(f="constructor"===h)||b(h);(f||c.call(a,h="constructor"))&&b(h)}:(p="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),q=function(a,b){var d="[object Function]"==e.call(a),h,f;if(f=!d&&"function"!=typeof a.constructor)f=typeof a.hasOwnProperty,f="object"==f?!!a.hasOwnProperty:!n[f];f=
f?a.hasOwnProperty:c;for(h in a)d&&"prototype"==h||!f.call(a,h)||b(h);for(d=p.length;h=p[--d];f.call(a,h)&&b(h));});return q(a,b)};if(!b("json-stringify")){var r={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},B=function(a,b){return("000000"+(b||0)).slice(-a)},v=function(a){var b='"',d=0,e=a.length,h=10<e&&K,c;for(h&&(c=a.split(""));d<e;d++){var f=a.charCodeAt(d);switch(f){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=r[f];break;default:b=32>f?b+("\\u00"+B(2,f.toString(16))):
b+(h?c[d]:K?a.charAt(d):a[d])}}return b+'"'},Za=function(a,b,d,h,p,t,w){var k;try{var z=b[a]}catch(wh){}if("object"==typeof z&&z){var D=e.call(z);if("[object Date]"!=D||c.call(z,"toJSON"))"function"==typeof z.toJSON&&("[object Number]"!=D&&"[object String]"!=D&&"[object Array]"!=D||c.call(z,"toJSON"))&&(z=z.toJSON(a));else if(z>-1/0&&z<1/0){if(m){var K=C(z/864E5);for(D=C(K/365.2425)+1970-1;m(D+1,0)<=K;D++);for(k=C((K-m(D,0))/30.42);m(D,k+1)<=K;k++);K=1+K-m(D,k);var ma=(z%864E5+864E5)%864E5;var l=
C(ma/36E5)%24;var za=C(ma/6E4)%60;var n=C(ma/1E3)%60;ma%=1E3}else D=z.getUTCFullYear(),k=z.getUTCMonth(),K=z.getUTCDate(),l=z.getUTCHours(),za=z.getUTCMinutes(),n=z.getUTCSeconds(),ma=z.getUTCMilliseconds();z=(0>=D||1E4<=D?(0>D?"-":"+")+B(6,0>D?-D:D):B(4,D))+"-"+B(2,k+1)+"-"+B(2,K)+"T"+B(2,l)+":"+B(2,za)+":"+B(2,n)+"."+B(3,ma)+"Z"}else z=null}d&&(z=d.call(b,a,z));if(null===z)return"null";D=e.call(z);if("[object Boolean]"==D)return""+z;if("[object Number]"==D)return z>-1/0&&z<1/0?""+z:"null";if("[object String]"==
D)return v(""+z);if("object"==typeof z){for(a=w.length;a--;)if(w[a]===z)throw TypeError();w.push(z);var Aa=[];b=t;t+=p;if("[object Array]"==D){k=0;for(a=z.length;k<a;k++)D=Za(k,z,d,h,p,t,w),Aa.push(D===f?"null":D);a=Aa.length?p?"[\n"+t+Aa.join(",\n"+t)+"\n"+b+"]":"["+Aa.join(",")+"]":"[]"}else q(h||z,function(a){var b=Za(a,z,d,h,p,t,w);b!==f&&Aa.push(v(a)+":"+(p?" ":"")+b)}),a=Aa.length?p?"{\n"+t+Aa.join(",\n"+t)+"\n"+b+"}":"{"+Aa.join(",")+"}":"{}";w.pop();return a}};w.stringify=function(a,b,d){var h;
if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==(h=e.call(b)))var c=b;else if("[object Array]"==h){var f={};for(var p=0,t=b.length,w;p<t;w=b[p++],(h=e.call(w),"[object String]"==h||"[object Number]"==h)&&(f[w]=1));}if(d)if("[object Number]"==(h=e.call(d))){if(0<(d-=d%1)){var C="";for(10<d&&(d=10);C.length<d;C+=" ");}}else"[object String]"==h&&(C=10>=d.length?d:d.slice(0,10));return Za("",(w={},w[""]=a,w),c,f,C,"",[])}}if(!b("json-parse")){var x=String.fromCharCode,y={92:"\\",
34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},u,E,A=function(){u=E=null;throw SyntaxError();},F=function(){for(var a=E,b=a.length,d,e,h,c,f;u<b;)switch(f=a.charCodeAt(u),f){case 9:case 10:case 13:case 32:u++;break;case 123:case 125:case 91:case 93:case 58:case 44:return d=K?a.charAt(u):a[u],u++,d;case 34:d="@";for(u++;u<b;)if(f=a.charCodeAt(u),32>f)A();else if(92==f)switch(f=a.charCodeAt(++u),f){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:d+=y[f];u++;break;case 117:e=
++u;for(h=u+4;u<h;u++)f=a.charCodeAt(u),48<=f&&57>=f||97<=f&&102>=f||65<=f&&70>=f||A();d+=x("0x"+a.slice(e,u));break;default:A()}else{if(34==f)break;f=a.charCodeAt(u);for(e=u;32<=f&&92!=f&&34!=f;)f=a.charCodeAt(++u);d+=a.slice(e,u)}if(34==a.charCodeAt(u))return u++,d;A();default:e=u;45==f&&(c=!0,f=a.charCodeAt(++u));if(48<=f&&57>=f){for(48==f&&(f=a.charCodeAt(u+1),48<=f&&57>=f)&&A();u<b&&(f=a.charCodeAt(u),48<=f&&57>=f);u++);if(46==a.charCodeAt(u)){for(h=++u;h<b&&(f=a.charCodeAt(h),48<=f&&57>=f);h++);
h==u&&A();u=h}f=a.charCodeAt(u);if(101==f||69==f){f=a.charCodeAt(++u);43!=f&&45!=f||u++;for(h=u;h<b&&(f=a.charCodeAt(h),48<=f&&57>=f);h++);h==u&&A();u=h}return+a.slice(e,u)}c&&A();if("true"==a.slice(u,u+4))return u+=4,!0;if("false"==a.slice(u,u+5))return u+=5,!1;if("null"==a.slice(u,u+4))return u+=4,null;A()}return"$"},G=function(a){var b,d;"$"==a&&A();if("string"==typeof a){if("@"==(K?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];;d||(d=!0)){a=F();if("]"==a)break;d&&(","==a?(a=F(),"]"==
a&&A()):A());","==a&&A();b.push(G(a))}return b}if("{"==a){for(b={};;d||(d=!0)){a=F();if("}"==a)break;d&&(","==a?(a=F(),"}"==a&&A()):A());","!=a&&"string"==typeof a&&"@"==(K?a.charAt(0):a[0])&&":"==F()||A();b[a.slice(1)]=G(F())}return b}A()}return a},H=function(a,b,d){d=I(a,b,d);d===f?delete a[b]:a[b]=d},I=function(a,b,d){var h=a[b],c;if("object"==typeof h&&h)if("[object Array]"==e.call(h))for(c=h.length;c--;)H(h,c,d);else q(h,function(a){H(h,a,d)});return d.call(a,b,h)};w.parse=function(a,b){var d;
u=0;E=""+a;a=G(F());"$"!=F()&&A();u=E=null;return b&&"[object Function]"==e.call(b)?I((d={},d[""]=a,d),"",b):a}}}})(this)},{}],35:[function(a,e,d){function b(a){var b=!0;a.getTracks().forEach(function(a){b="ended"===a.readyState&&b});return b}function h(){if("undefined"===typeof window||!window.navigator.mozGetUserMedia)return!1;var a=window.navigator.userAgent.match(/Firefox\/(\d+)\./);return 50>(a&&1<=a.length&&parseInt(a[1],10))}function c(a){k.call(this);var b=this.config={detectSpeakingEvents:!1,
audioFallback:!1,media:{audio:!0,video:!0},harkOptions:null,logger:w},d;for(d in a)a.hasOwnProperty(d)&&(this.config[d]=a[d]);this.logger=b.logger;this._log=this.logger.log.bind(this.logger,"LocalMedia:");this._logerror=this.logger.error.bind(this.logger,"LocalMedia:");this.localStreams=[];this.localScreens=[];navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||this._logerror("Your browser does not support local media capture.");this._audioMonitors=[];this.on("localStreamStopped",this._stopAudioMonitor.bind(this));
this.on("localScreenStopped",this._stopAudioMonitor.bind(this))}d=a("util");var f=a("hark"),p=a("getscreenmedia"),k=a("wildemitter"),w=a("mockconsole");d.inherits(c,k);c.prototype.start=function(a,d){var e=this,h=a||this.config.media;this.emit("localStreamRequested",h);navigator.mediaDevices.getUserMedia(h).then(function(a){h.audio&&e.config.detectSpeakingEvents&&e._setupAudioMonitor(a,e.config.harkOptions);e.localStreams.push(a);a.getTracks().forEach(function(d){d.addEventListener("ended",function(){b(a)&&
e._removeStream(a)})});e.emit("localStream",a);if(d)return d(null,a)}).catch(function(a){if(e.config.audioFallback&&"NotFoundError"===a.name&&!1!==h.video)h.video=!1,e.start(h,d);else if(e.emit("localStreamRequestFailed",h),d)return d(a,null)})};c.prototype.stop=function(a){this.stopStream(a);this.stopScreenShare(a)};c.prototype.stopStream=function(a){var b=this;a?-1<this.localStreams.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),h()&&this._removeStream(a)):this.localStreams.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});
h()&&b._removeStream(a)})};c.prototype.startScreenShare=function(a,b){var d=this;this.emit("localScreenRequested");"function"!==typeof a||b||(b=a,a=null);p(a,function(a,e){a?d.emit("localScreenRequestFailed"):(d.localScreens.push(e),e.getTracks().forEach(function(a){a.addEventListener("ended",function(){var a=!0;e.getTracks().forEach(function(b){a="ended"===b.readyState&&a});a&&d._removeStream(e)})}),d.emit("localScreen",e));if(b)return b(a,e)})};c.prototype.stopScreenShare=function(a){var b=this;
a?-1<this.localScreens.indexOf(a)&&(a.getTracks().forEach(function(a){a.stop()}),h()&&this._removeStream(a)):this.localScreens.forEach(function(a){a.getTracks().forEach(function(a){a.stop()});h()&&b._removeStream(a)})};c.prototype.mute=function(){this._audioEnabled(!1);this.emit("audioOff")};c.prototype.unmute=function(){this._audioEnabled(!0);this.emit("audioOn")};c.prototype.pauseVideo=function(){this._videoEnabled(!1);this.emit("videoOff")};c.prototype.resumeVideo=function(){this._videoEnabled(!0);
this.emit("videoOn")};c.prototype.pause=function(){this.mute();this.pauseVideo()};c.prototype.resume=function(){this.unmute();this.resumeVideo()};c.prototype._audioEnabled=function(a){this.localStreams.forEach(function(b){b.getAudioTracks().forEach(function(b){b.enabled=!!a})})};c.prototype._videoEnabled=function(a){this.localStreams.forEach(function(b){b.getVideoTracks().forEach(function(b){b.enabled=!!a})})};c.prototype.isAudioEnabled=function(){var a=!0;this.localStreams.forEach(function(b){b.getAudioTracks().forEach(function(b){a=
a&&b.enabled})});return a};c.prototype.isVideoEnabled=function(){var a=!0;this.localStreams.forEach(function(b){b.getVideoTracks().forEach(function(b){a=a&&b.enabled})});return a};c.prototype._removeStream=function(a){var b=this.localStreams.indexOf(a);-1<b?(this.localStreams.splice(b,1),this.emit("localStreamStopped",a)):(b=this.localScreens.indexOf(a),-1<b&&(this.localScreens.splice(b,1),this.emit("localScreenStopped",a)))};c.prototype._setupAudioMonitor=function(a,b){this._log("Setup audio");b=
f(a,b);var d=this,e;b.on("speaking",function(){d.emit("speaking")});b.on("stopped_speaking",function(){e&&clearTimeout(e);e=setTimeout(function(){d.emit("stoppedSpeaking")},1E3)});b.on("volume_change",function(a,b){d.emit("volumeChange",a,b)});this._audioMonitors.push({audio:b,stream:a})};c.prototype._stopAudioMonitor=function(a){var b=-1;this._audioMonitors.forEach(function(d,e){d.stream===a&&(b=e)});-1<b&&(this._audioMonitors[b].audio.stop(),this._audioMonitors.splice(b,1))};e.exports=c},{getscreenmedia:27,
hark:29,mockconsole:37,util:63,wildemitter:65}],36:[function(a,e,d){(function(a){function b(a,b){a.set(b[0],b[1]);return a}function c(a,b){a.add(b);return a}function f(a,b){for(var d=-1,e=a?a.length:0;++d<e&&!1!==b(a[d],d,a););return a}function p(a,b,d,e){var h=-1,c=a?a.length:0;for(e&&c&&(d=a[++h]);++h<c;)d=b(d,a[h],h,a);return d}function k(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(yh){}return b}function w(a){var b=-1,d=Array(a.size);a.forEach(function(a,e){d[++b]=
[e,a]});return d}function z(a,b){return function(d){return a(b(d))}}function K(a){var b=-1,d=Array(a.size);a.forEach(function(a){d[++b]=a});return d}function C(a){var b=-1,d=a?a.length:0;for(this.clear();++b<d;){var e=a[b];this.set(e[0],e[1])}}function l(a){var b=-1,d=a?a.length:0;for(this.clear();++b<d;){var e=a[b];this.set(e[0],e[1])}}function m(a){var b=-1,d=a?a.length:0;for(this.clear();++b<d;){var e=a[b];this.set(e[0],e[1])}}function n(a){this.__data__=new l(a)}function q(a,b,d){var e=a[b];S.call(a,
b)&&(e===d||e!==e&&d!==d)&&(void 0!==d||b in a)||(a[b]=d)}function r(a,b){for(var d=a.length;d--;){var e=a[d][0];if(e===b||e!==e&&b!==b)return d}return-1}function B(a,b){return a&&E(b,O(b),a)}function v(a,b,d,e,h,c,p){var w;e&&(w=c?e(a,h,c,p):e(a));if(void 0!==w)return w;if(!Ha(a))return a;if(h=ra(a)){if(w=I(a),!b)return A(a,w)}else{var t=ha(a),C="[object Function]"==t||"[object GeneratorFunction]"==t;if(ya(a))return x(a,b);if("[object Object]"==t||"[object Arguments]"==t||C&&!c){if(k(a))return c?
a:{};w=M(C?{}:a);if(!b)return F(a,B(w,a))}else{if(!T[t])return c?a:{};w=L(a,t,v,b)}}p||(p=new n);if(c=p.get(a))return c;p.set(a,w);if(!h)var D=d?u(a,O,ua):O(a);f(D||a,function(h,c){D&&(c=h,h=a[c]);q(w,c,v(h,b,d,e,c,a,p))});return w}function u(a,b,d){b=b(a);if(!ra(a)){a=d(a);d=-1;for(var e=a.length,h=b.length;++d<e;)b[h+d]=a[d]}return b}function x(a,b){if(b)return a.slice();b=new a.constructor(a.length);a.copy(b);return b}function y(a){var b=new a.constructor(a.byteLength);(new ba(b)).set(new ba(a));
return b}function A(a,b){var d=-1,e=a.length;for(b||(b=Array(e));++d<e;)b[d]=a[d];return b}function E(a,b,d,e){d||(d={});for(var h=-1,c=b.length;++h<c;){var f=b[h],p=e?e(d[f],a[f],f,d,a):void 0;q(d,f,void 0===p?a[f]:p)}return d}function F(a,b){return E(a,ua(a),b)}function G(a,b){a=a.__data__;var d=typeof b;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==b:null===b)?a["string"==typeof b?"string":"hash"]:a.map}function H(a,b){a=null==a?void 0:a[b];b=!Ha(a)||Z&&Z in a?!1:(we(a)||
k(a)?ca:V).test(ab(a));return b?a:void 0}function I(a){var b=a.length,d=a.constructor(b);b&&"string"==typeof a[0]&&S.call(a,"index")&&(d.index=a.index,d.input=a.input);return d}function M(a){"function"!=typeof a.constructor||ue(a)?a={}:(a=ea(a),a=Ha(a)?ia(a):{});return a}function L(a,d,e,h){var f=a.constructor;switch(d){case "[object ArrayBuffer]":return y(a);case "[object Boolean]":case "[object Date]":return new f(+a);case "[object DataView]":return d=h?y(a.buffer):a.buffer,new a.constructor(d,
a.byteOffset,a.byteLength);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return d=h?y(a.buffer):a.buffer,new a.constructor(d,a.byteOffset,a.length);case "[object Map]":return d=h?e(w(a),!0):w(a),p(d,b,new a.constructor);case "[object Number]":case "[object String]":return new f(a);case "[object RegExp]":return d=
new a.constructor(a.source,Q.exec(a)),d.lastIndex=a.lastIndex,d;case "[object Set]":return d=h?e(K(a),!0):K(a),p(d,c,new a.constructor);case "[object Symbol]":return ta?Object(ta.call(a)):{}}}function ue(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||U)}function ab(a){if(null!=a){try{return aa.call(a)}catch(xh){}return a+""}return""}function ve(a){var b;if(b=null!=a)b=a.length,b="number"==typeof b&&-1<b&&0==b%1&&9007199254740991>=b;return b&&!we(a)}function we(a){a=Ha(a)?
Y.call(a):"";return"[object Function]"==a||"[object GeneratorFunction]"==a}function Ha(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function O(a){if(ve(a)){var b;(b=ra(a))||(b=!!a&&"object"==typeof a&&ve(a)&&S.call(a,"callee")&&(!ja.call(a,"callee")||"[object Arguments]"==Y.call(a)));if(b){b=a.length;for(var d=String,e=-1,h=Array(b);++e<b;)h[e]=d(e);b=h}else b=[];d=b.length;e=!!d;for(var c in a){if(!(h=!S.call(a,c))&&(h=e)&&!(h="length"==c)){h=c;var f=d;f=null==f?9007199254740991:f;h=
!!f&&("number"==typeof h||W.test(h))&&-1<h&&0==h%1&&h<f}h||b.push(c)}a=b}else if(ue(a)){c=[];for(b in Object(a))S.call(a,b)&&"constructor"!=b&&c.push(b);a=c}else a=pa(a);return a}function eg(){return[]}function P(){return!1}var Q=/\w*$/,V=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,T={};T["[object Arguments]"]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=
T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T["[object Object]"]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0;T["[object Error]"]=T["[object Function]"]=T["[object WeakMap]"]=!1;var J="object"==typeof self&&self&&self.Object===Object&&self;a="object"==typeof a&&a&&a.Object===Object&&a||J||Function("return this")();
var N=(J="object"==typeof d&&d&&!d.nodeType&&d)&&"object"==typeof e&&e&&!e.nodeType&&e;J=N&&N.exports===J;N=Array.prototype;var R=Function.prototype,U=Object.prototype,X=a["__core-js_shared__"],Z=function(){var a=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),aa=R.toString,S=U.hasOwnProperty,Y=U.toString,ca=RegExp("^"+aa.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");R=J?a.Buffer:void 0;
J=a.Symbol;var ba=a.Uint8Array,ea=z(Object.getPrototypeOf,Object),ia=Object.create,ja=U.propertyIsEnumerable,la=N.splice;N=Object.getOwnPropertySymbols;R=R?R.isBuffer:void 0;var pa=z(Object.keys,Object),ka=H(a,"DataView"),da=H(a,"Map"),na=H(a,"Promise"),oa=H(a,"Set");a=H(a,"WeakMap");var fa=H(Object,"create"),qa=ab(ka),sa=ab(da),va=ab(na),wa=ab(oa),xa=ab(a),ta=(J=J?J.prototype:void 0)?J.valueOf:void 0;C.prototype.clear=function(){this.__data__=fa?fa(null):{}};C.prototype["delete"]=function(a){return this.has(a)&&
delete this.__data__[a]};C.prototype.get=function(a){var b=this.__data__;return fa?(a=b[a],"__lodash_hash_undefined__"===a?void 0:a):S.call(b,a)?b[a]:void 0};C.prototype.has=function(a){var b=this.__data__;return fa?void 0!==b[a]:S.call(b,a)};C.prototype.set=function(a,b){this.__data__[a]=fa&&void 0===b?"__lodash_hash_undefined__":b;return this};l.prototype.clear=function(){this.__data__=[]};l.prototype["delete"]=function(a){var b=this.__data__;a=r(b,a);if(0>a)return!1;a==b.length-1?b.pop():la.call(b,
a,1);return!0};l.prototype.get=function(a){var b=this.__data__;a=r(b,a);return 0>a?void 0:b[a][1]};l.prototype.has=function(a){return-1<r(this.__data__,a)};l.prototype.set=function(a,b){var d=this.__data__,e=r(d,a);0>e?d.push([a,b]):d[e][1]=b;return this};m.prototype.clear=function(){this.__data__={hash:new C,map:new (da||l),string:new C}};m.prototype["delete"]=function(a){return G(this,a)["delete"](a)};m.prototype.get=function(a){return G(this,a).get(a)};m.prototype.has=function(a){return G(this,
a).has(a)};m.prototype.set=function(a,b){G(this,a).set(a,b);return this};n.prototype.clear=function(){this.__data__=new l};n.prototype["delete"]=function(a){return this.__data__["delete"](a)};n.prototype.get=function(a){return this.__data__.get(a)};n.prototype.has=function(a){return this.__data__.has(a)};n.prototype.set=function(a,b){var d=this.__data__;if(d instanceof l){d=d.__data__;if(!da||199>d.length)return d.push([a,b]),this;d=this.__data__=new m(d)}d.set(a,b);return this};var ua=N?z(N,Object):
eg,ha=function(a){return Y.call(a)};if(ka&&"[object DataView]"!=ha(new ka(new ArrayBuffer(1)))||da&&"[object Map]"!=ha(new da)||na&&"[object Promise]"!=ha(na.resolve())||oa&&"[object Set]"!=ha(new oa)||a&&"[object WeakMap]"!=ha(new a))ha=function(a){var b=Y.call(a);if(a=(a="[object Object]"==b?a.constructor:void 0)?ab(a):void 0)switch(a){case qa:return"[object DataView]";case sa:return"[object Map]";case va:return"[object Promise]";case wa:return"[object Set]";case xa:return"[object WeakMap]"}return b};
var ra=Array.isArray,ya=R||P;e.exports=function(a){return v(a,!0,!0)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],37:[function(a,e,d){a="assert count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd time timeEnd trace warn".split(" ");d=a.length;for(var b=function(){},h={};d--;)h[a[d]]=b;e.exports=h},{}],38:[function(a,e,d){function b(a){if(a=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(a)){var b=
parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case "years":case "year":case "y":return b*f;case "days":case "day":case "d":return b*c;case "hours":case "hour":case "h":return 36E5*b;case "minutes":case "minute":case "m":return 6E4*b;case "seconds":case "second":case "s":return 1E3*b;case "ms":return b}}}function h(a,b,d){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+d:Math.ceil(a/b)+" "+d+"s"}var c=864E5,f=365.25*c;e.exports=function(a,d){d=d||{};return"string"==typeof a?b(a):d.long?h(a,c,"day")||
h(a,36E5,"hour")||h(a,6E4,"minute")||h(a,1E3,"second")||a+" ms":a>=c?Math.round(a/c)+"d":36E5<=a?Math.round(a/36E5)+"h":6E4<=a?Math.round(a/6E4)+"m":1E3<=a?Math.round(a/1E3)+"s":a+"ms"}},{}],39:[function(a,e,d){var b=Object.prototype.hasOwnProperty;d.keys=Object.keys||function(a){var d=[],e;for(e in a)b.call(a,e)&&d.push(e);return d};d.values=function(a){var d=[],e;for(e in a)b.call(a,e)&&d.push(a[e]);return d};d.merge=function(a,d){for(var e in d)b.call(d,e)&&(a[e]=d[e]);return a};d.length=function(a){return d.keys(a).length};
d.isEmpty=function(a){return 0==d.length(a)}},{}],40:[function(a,e,d){(function(a){var b=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,c=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,k=/^\s+/,w=/\s+$/;e.exports=function(e){if("string"!=typeof e||!e)return null;e=e.replace(k,"").replace(w,"");if(a.JSON&&JSON.parse)return JSON.parse(e);if(b.test(e.replace(d,"@").replace(c,"]").replace(f,"")))return(new Function("return "+e))()}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],41:[function(a,e,d){d.encode=function(a){var b="",d;for(d in a)a.hasOwnProperty(d)&&(b.length&&(b+="&"),b+=encodeURIComponent(d)+"="+encodeURIComponent(a[d]));return b};d.decode=function(a){var b={};a=a.split("&");for(var d=0,e=a.length;d<e;d++){var c=a[d].split("=");b[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return b}},{}],42:[function(a,e,d){var b=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
h="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");e.exports=function(a){a=b.exec(a||"");for(var d={},e=14;e--;)d[h[e]]=a[e]||"";return d}},{}],43:[function(a,e,d){function b(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");}function c(a){if(K===setTimeout)return setTimeout(a,0);if((K===b||!K)&&setTimeout)return K=setTimeout,setTimeout(a,0);try{return K(a,0)}catch(B){try{return K.call(null,
a,0)}catch(Tc){return K.call(this,a,0)}}}function f(a){if(C===clearTimeout)return clearTimeout(a);if((C===h||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(a);try{return C(a)}catch(B){try{return C.call(null,a)}catch(Tc){return C.call(this,a)}}}function p(){m&&n&&(m=!1,n.length?l=n.concat(l):q=-1,l.length&&k())}function k(){if(!m){var a=c(p);m=!0;for(var b=l.length;b;){n=l;for(l=[];++q<b;)n&&n[q].run();q=-1;b=l.length}n=null;m=!1;f(a)}}function w(a,b){this.fun=a;this.array=b}function z(){}a=
e.exports={};try{var K="function"===typeof setTimeout?setTimeout:b}catch($f){K=b}try{var C="function"===typeof clearTimeout?clearTimeout:h}catch($f){C=h}var l=[],m=!1,n,q=-1;a.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var d=1;d<arguments.length;d++)b[d-1]=arguments[d];l.push(new w(a,b));1!==l.length||m||c(k)};w.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=z;a.addListener=
z;a.once=z;a.off=z;a.removeListener=z;a.removeAllListeners=z;a.emit=z;a.prependListener=z;a.prependOnceListener=z;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],44:[function(a,e,d){function b(a,b){var d=this,e;c.call(this);a=a||{};a.iceServers=a.iceServers||[];this.enableChromeNativeSimulcast=!1;b&&b.optional&&
window.chrome&&null===navigator.appVersion.match(/Chromium\//)&&b.optional.forEach(function(a){a.enableChromeNativeSimulcast&&(d.enableChromeNativeSimulcast=!0)});this.enableMultiStreamHacks=!1;b&&b.optional&&window.chrome&&b.optional.forEach(function(a){a.enableMultiStreamHacks&&(d.enableMultiStreamHacks=!0)});this.restrictBandwidth=0;b&&b.optional&&b.optional.forEach(function(a){a.andyetRestrictBandwidth&&(d.restrictBandwidth=a.andyetRestrictBandwidth)});this.batchIceCandidates=0;b&&b.optional&&
b.optional.forEach(function(a){a.andyetBatchIce&&(d.batchIceCandidates=a.andyetBatchIce)});this.batchedIceCandidates=[];b&&b.optional&&window.chrome&&b.optional.forEach(function(a){a.andyetFasterICE&&(d.eliminateDuplicateCandidates=a.andyetFasterICE)});b&&b.optional&&b.optional.forEach(function(a){a.andyetDontSignalCandidates&&(d.dontSignalCandidates=a.andyetDontSignalCandidates)});this.assumeSetLocalSuccess=!1;b&&b.optional&&b.optional.forEach(function(a){a.andyetAssumeSetLocalSuccess&&(d.assumeSetLocalSuccess=
a.andyetAssumeSetLocalSuccess)});window.navigator.mozGetUserMedia&&b&&b.optional&&(this.wtFirefox=0,b.optional.forEach(function(a){a.andyetFirefoxMakesMeSad&&(d.wtFirefox=a.andyetFirefoxMakesMeSad,0<d.wtFirefox&&(d.firefoxcandidatebuffer=[]))}));x(a);this.pc=new RTCPeerConnection(a,b);this.getLocalStreams="function"===typeof this.pc.getLocalStreams?this.pc.getLocalStreams.bind(this.pc):function(){return[]};this.getSenders="function"===typeof this.pc.getSenders?this.pc.getSenders.bind(this.pc):function(){return[]};
this.getRemoteStreams="function"===typeof this.pc.getRemoteStreams?this.pc.getRemoteStreams.bind(this.pc):function(){return[]};this.getReceivers="function"===typeof this.pc.getReceivers?this.pc.getReceivers.bind(this.pc):function(){return[]};this.addStream=this.pc.addStream.bind(this.pc);this.removeStream=function(a){"function"===typeof d.pc.removeStream?d.pc.removeStream.apply(d.pc,arguments):"function"===typeof d.pc.removeTrack&&a.getTracks().forEach(function(a){d.pc.removeTrack(a)})};"function"===
typeof this.pc.removeTrack&&(this.removeTrack=this.pc.removeTrack.bind(this.pc));this.pc.onremovestream=this.emit.bind(this,"removeStream");this.pc.onremovetrack=this.emit.bind(this,"removeTrack");this.pc.onaddstream=this.emit.bind(this,"addStream");this.pc.onnegotiationneeded=this.emit.bind(this,"negotiationNeeded");this.pc.oniceconnectionstatechange=this.emit.bind(this,"iceConnectionStateChange");this.pc.onsignalingstatechange=this.emit.bind(this,"signalingStateChange");this.pc.onicecandidate=this._onIce.bind(this);
this.pc.ondatachannel=this._onDataChannel.bind(this);this.localDescription={contents:[]};this.remoteDescription={contents:[]};this.config={debug:!1,sid:"",isInitiator:!0,sdpSessionID:Date.now(),useJingle:!1};this.iceCredentials={local:{},remote:{}};for(e in a)this.config[e]=a[e];if(this.config.debug)this.on("*",function(){(a.logger||console).log("PeerConnection event:",arguments)});this.hadRemoteIPv6Candidate=this.hadLocalIPv6Candidate=this.hadRemoteRelayCandidate=this.hadLocalRelayCandidate=this.hadRemoteStunCandidate=
this.hadLocalStunCandidate=!1;this._remoteDataChannels=[];this._localDataChannels=[];this._candidateBuffer=[]}d=a("util");var h=a("sdp-jingle-json"),c=a("wildemitter"),f=a("lodash.clonedeep");d.inherits(b,c);Object.defineProperty(b.prototype,"signalingState",{get:function(){return this.pc.signalingState}});Object.defineProperty(b.prototype,"iceConnectionState",{get:function(){return this.pc.iceConnectionState}});b.prototype._role=function(){return this.isInitiator?"initiator":"responder"};b.prototype.addStream=
function(a){this.localStream=a;this.pc.addStream(a)};b.prototype._checkLocalCandidate=function(a){a=h.toCandidateJSON(a);"srflx"==a.type?this.hadLocalStunCandidate=!0:"relay"==a.type&&(this.hadLocalRelayCandidate=!0);a&&a.ip&&-1!=a.ip.indexOf(":")&&(this.hadLocalIPv6Candidate=!0)};b.prototype._checkRemoteCandidate=function(a){a=h.toCandidateJSON(a);"srflx"==a.type?this.hadRemoteStunCandidate=!0:"relay"==a.type&&(this.hadRemoteRelayCandidate=!0);a&&a.ip&&-1!=a.ip.indexOf(":")&&(this.hadRemoteIPv6Candidate=
!0)};b.prototype.processIce=function(a,b){b=b||function(){};var d=this;if("closed"===this.pc.signalingState)return b();if(a.contents||a.jingle&&a.jingle.contents){var e=this.remoteDescription.contents.map(function(a){return a.name});(a.contents||a.jingle.contents).forEach(function(a){var c=a.transport||{},f=c.candidates||[],p=e.indexOf(a.name),w=a.name,t=d.remoteDescription.contents.find(function(b){return b.name===a.name}),k=function(){f.forEach(function(a){a=h.toCandidateSDP(a);d.pc.addIceCandidate(new RTCIceCandidate({candidate:a,
sdpMLineIndex:p,sdpMid:w}),function(){},function(a){d.emit("error",a)});d._checkRemoteCandidate(a)});b()};d.iceCredentials.remote[a.name]&&c.ufrag&&d.iceCredentials.remote[a.name].ufrag!==c.ufrag?t?(t.transport.ufrag=c.ufrag,t.transport.pwd=c.pwd,c={type:"offer",jingle:d.remoteDescription},c.sdp=h.toSessionSDP(c.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"incoming"}),d.pc.setRemoteDescription(new RTCSessionDescription(c),function(){k()},function(a){d.emit("error",a)})):d.emit("error",
"ice restart failed to find matching content"):k()})}else{a.candidate&&0!==a.candidate.candidate.indexOf("a=")&&(a.candidate.candidate="a="+a.candidate.candidate);if(this.wtFirefox&&null!==this.firefoxcandidatebuffer&&this.pc.localDescription&&"offer"===this.pc.localDescription.type)return this.firefoxcandidatebuffer.push(a.candidate),b();d.pc.addIceCandidate(new RTCIceCandidate(a.candidate),function(){},function(a){d.emit("error",a)});d._checkRemoteCandidate(a.candidate.candidate);b()}};b.prototype.offer=
function(a,b){var d=this,e=2===arguments.length,c=e&&a?a:{offerToReceiveAudio:1,offerToReceiveVideo:1};b=(b=e?b:a)||function(){};if("closed"===this.pc.signalingState)return b("Already closed");this.pc.createOffer(function(a){var e={type:"offer",sdp:a.sdp};d.assumeSetLocalSuccess&&(d.emit("offer",e),b(null,e));d._candidateBuffer=[];d.pc.setLocalDescription(a,function(){if(d.config.useJingle){var c=h.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"});c.sid=d.config.sid;d.localDescription=c;
c.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(d.iceCredentials.local[a.name]={ufrag:b.ufrag,pwd:b.pwd})});e.jingle=c}e.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d._checkLocalCandidate(a)});d.assumeSetLocalSuccess||(d.emit("offer",e),b(null,e))},function(a){d.emit("error",a);b(a)})},function(a){d.emit("error",a);b(a)},c)};b.prototype.handleOffer=function(a,b){b=b||function(){};var d=this;a.type="offer";if(a.jingle){this.enableChromeNativeSimulcast&&a.jingle.contents.forEach(function(a){"video"===
a.name&&(a.application.googConferenceFlag=!0)});this.enableMultiStreamHacks&&a.jingle.contents.forEach(function(a){if("video"===a.name){var b=a.application.sources||[];if(0===b.length||"3735928559"!==b[0].ssrc)b.unshift({ssrc:"3735928559",parameters:[{key:"cname",value:"deadbeef"},{key:"msid",value:"mixyourfecintothis please"}]}),a.application.sources=b}});if(0<d.restrictBandwidth&&2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name){var e=a.jingle.contents[1];e.application&&e.application.bandwidth&&
e.application.bandwidth.bandwidth||(a.jingle.contents[1].application.bandwidth={type:"AS",bandwidth:d.restrictBandwidth.toString()},a.sdp=h.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"outgoing"}))}a.jingle.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(d.iceCredentials.remote[a.name]={ufrag:b.ufrag,pwd:b.pwd})});a.sdp=h.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"incoming"});d.remoteDescription=a.jingle}a.sdp.split("\r\n").forEach(function(a){0===
a.indexOf("a=candidate:")&&d._checkRemoteCandidate(a)});d.pc.setRemoteDescription(new RTCSessionDescription(a),function(){b()},b)};b.prototype.answerAudioOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!1}},a)};b.prototype.answerBroadcastOnly=function(a){this._answer({mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},a)};b.prototype.answer=function(a,b){var d=2===arguments.length;this._answer(d&&a?a:{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},
d?b:a)};b.prototype.handleAnswer=function(a,b){b=b||function(){};var d=this;a.jingle&&(a.sdp=h.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),direction:"incoming"}),d.remoteDescription=a.jingle,a.jingle.contents.forEach(function(a){var b=a.transport||{};b.ufrag&&(d.iceCredentials.remote[a.name]={ufrag:b.ufrag,pwd:b.pwd})}));a.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d._checkRemoteCandidate(a)});d.pc.setRemoteDescription(new RTCSessionDescription(a),function(){d.wtFirefox&&
window.setTimeout(function(){d.firefoxcandidatebuffer.forEach(function(a){d.pc.addIceCandidate(new RTCIceCandidate(a),function(){},function(a){d.emit("error",a)});d._checkRemoteCandidate(a.candidate)});d.firefoxcandidatebuffer=null},d.wtFirefox);b(null)},b)};b.prototype.close=function(){this.pc.close();this._localDataChannels=[];this._remoteDataChannels=[];this.emit("close")};b.prototype._answer=function(a,b){b=b||function(){};var d=this;if(!this.pc.remoteDescription)throw Error("remoteDescription not set");
if("closed"===this.pc.signalingState)return b("Already closed");d.pc.createAnswer(function(a){var e=[];if(d.enableChromeNativeSimulcast&&(a.jingle=h.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"}),2<=a.jingle.contents.length&&"video"===a.jingle.contents[1].name)){var c=a.jingle.contents[1].application.sourceGroups||[],p=!1;c.forEach(function(a){"SIM"==a.semantics&&(p=!0)});if(!p&&a.jingle.contents[1].application.sources.length){var t=JSON.parse(JSON.stringify(a.jingle.contents[1].application.sources[0]));
t.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(t);e.push(a.jingle.contents[1].application.sources[0].ssrc);e.push(t.ssrc);c.push({semantics:"SIM",sources:e});e=JSON.parse(JSON.stringify(t));e.ssrc=""+Math.floor(4294967295*Math.random());a.jingle.contents[1].application.sources.push(e);c.push({semantics:"FID",sources:[t.ssrc,e.ssrc]});a.jingle.contents[1].application.sourceGroups=c;a.sdp=h.toSessionSDP(a.jingle,{sid:d.config.sdpSessionID,role:d._role(),
direction:"outgoing"})}}var k={type:"answer",sdp:a.sdp};d.assumeSetLocalSuccess&&(c=f(k),d.emit("answer",c),b(null,c));d._candidateBuffer=[];d.pc.setLocalDescription(a,function(){if(d.config.useJingle){var e=h.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"});e.sid=d.config.sid;d.localDescription=e;k.jingle=e}d.enableChromeNativeSimulcast&&(k.jingle||(k.jingle=h.toSessionJSON(a.sdp,{role:d._role(),direction:"outgoing"})),k.jingle.contents[1].application.sources.forEach(function(a,b){a.parameters=
a.parameters.map(function(a){"msid"===a.key&&(a.value+="-"+Math.floor(b/2));return a})}),k.sdp=h.toSessionSDP(k.jingle,{sid:d.sdpSessionID,role:d._role(),direction:"outgoing"}));k.sdp.split("\r\n").forEach(function(a){0===a.indexOf("a=candidate:")&&d._checkLocalCandidate(a)});d.assumeSetLocalSuccess||(e=f(k),d.emit("answer",e),b(null,e))},function(a){d.emit("error",a);b(a)})},function(a){d.emit("error",a);b(a)},a)};b.prototype._onIce=function(a){var b=this;if(a.candidate){if(!this.dontSignalCandidates){a=
a.candidate;var d={candidate:{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex}};this._checkLocalCandidate(a.candidate);var e=h.toCandidateJSON(a.candidate);if(this.eliminateDuplicateCandidates&&"relay"===e.type){var c=this._candidateBuffer.filter(function(a){return"relay"===a.type}).map(function(a){return a.foundation+":"+a.component});var f=c.indexOf(e.foundation+":"+e.component);if(-1<f&&e.priority>>24>=c[f].priority>>24)return}if("max-bundle"===this.config.bundlePolicy&&(c=
this._candidateBuffer.filter(function(a){return e.type===a.type}).map(function(a){return a.address+":"+a.port}),f=c.indexOf(e.address+":"+e.port),-1<f))return;if("require"!==this.config.rtcpMuxPolicy||"2"!==e.component){this._candidateBuffer.push(e);if(b.config.useJingle&&(a.sdpMid||(a.sdpMid=b.pc.remoteDescription&&"offer"===b.pc.remoteDescription.type?b.remoteDescription.contents[a.sdpMLineIndex].name:b.localDescription.contents[a.sdpMLineIndex].name),b.iceCredentials.local[a.sdpMid]||h.toSessionJSON(b.pc.localDescription.sdp,
{role:b._role(),direction:"outgoing"}).contents.forEach(function(a){var d=a.transport||{};d.ufrag&&(b.iceCredentials.local[a.name]={ufrag:d.ufrag,pwd:d.pwd})}),d.jingle={contents:[{name:a.sdpMid,creator:b._role(),transport:{transportType:"iceUdp",ufrag:b.iceCredentials.local[a.sdpMid].ufrag,pwd:b.iceCredentials.local[a.sdpMid].pwd,candidates:[e]}}]},0<b.batchIceCandidates)){0===b.batchedIceCandidates.length&&window.setTimeout(function(){var a={};b.batchedIceCandidates.forEach(function(b){b=b.contents[0];
a[b.name]||(a[b.name]=b);a[b.name].transport.candidates.push(b.transport.candidates[0])});var d={jingle:{contents:[]}};Object.keys(a).forEach(function(b){d.jingle.contents.push(a[b])});b.batchedIceCandidates=[];b.emit("ice",d)},b.batchIceCandidates);b.batchedIceCandidates.push(d.jingle);return}this.emit("ice",d)}}}else this.emit("endOfCandidates")};b.prototype._onDataChannel=function(a){a=a.channel;this._remoteDataChannels.push(a);this.emit("addChannel",a)};b.prototype.createDataChannel=function(a,
b){a=this.pc.createDataChannel(a,b);this._localDataChannels.push(a);return a};b.prototype.getStats=function(){if("function"===typeof arguments[0]){var a=arguments[0];this.pc.getStats().then(function(b){a(null,b)},function(b){a(b)})}else return this.pc.getStats.apply(this.pc,arguments)};e.exports=b},{"lodash.clonedeep":36,"sdp-jingle-json":45,util:63,wildemitter:65}],45:[function(a,e,d){var b=a("./lib/tosdp"),h=a("./lib/tojson");d.toIncomingSDPOffer=function(a){return b.toSessionSDP(a,{role:"responder",
direction:"incoming"})};d.toOutgoingSDPOffer=function(a){return b.toSessionSDP(a,{role:"initiator",direction:"outgoing"})};d.toIncomingSDPAnswer=function(a){return b.toSessionSDP(a,{role:"initiator",direction:"incoming"})};d.toOutgoingSDPAnswer=function(a){return b.toSessionSDP(a,{role:"responder",direction:"outgoing"})};d.toIncomingMediaSDPOffer=function(a){return b.toMediaSDP(a,{role:"responder",direction:"incoming"})};d.toOutgoingMediaSDPOffer=function(a){return b.toMediaSDP(a,{role:"initiator",
direction:"outgoing"})};d.toIncomingMediaSDPAnswer=function(a){return b.toMediaSDP(a,{role:"initiator",direction:"incoming"})};d.toOutgoingMediaSDPAnswer=function(a){return b.toMediaSDP(a,{role:"responder",direction:"outgoing"})};d.toCandidateSDP=b.toCandidateSDP;d.toMediaSDP=b.toMediaSDP;d.toSessionSDP=b.toSessionSDP;d.toIncomingJSONOffer=function(a,b){return h.toSessionJSON(a,{role:"responder",direction:"incoming",creators:b})};d.toOutgoingJSONOffer=function(a,b){return h.toSessionJSON(a,{role:"initiator",
direction:"outgoing",creators:b})};d.toIncomingJSONAnswer=function(a,b){return h.toSessionJSON(a,{role:"initiator",direction:"incoming",creators:b})};d.toOutgoingJSONAnswer=function(a,b){return h.toSessionJSON(a,{role:"responder",direction:"outgoing",creators:b})};d.toIncomingMediaJSONOffer=function(a,b){return h.toMediaJSON(a,{role:"responder",direction:"incoming",creator:b})};d.toOutgoingMediaJSONOffer=function(a,b){return h.toMediaJSON(a,{role:"initiator",direction:"outgoing",creator:b})};d.toIncomingMediaJSONAnswer=
function(a,b){return h.toMediaJSON(a,{role:"initiator",direction:"incoming",creator:b})};d.toOutgoingMediaJSONAnswer=function(a,b){return h.toMediaJSON(a,{role:"responder",direction:"outgoing",creator:b})};d.toCandidateJSON=h.toCandidateJSON;d.toMediaJSON=h.toMediaJSON;d.toSessionJSON=h.toSessionJSON},{"./lib/tojson":48,"./lib/tosdp":49}],46:[function(a,e,d){d.lines=function(a){return a.split("\r\n").filter(function(a){return 0<a.length})};d.findLine=function(a,d,e){for(var b=a.length,h=0;h<d.length;h++)if(d[h].substr(0,
b)===a)return d[h];if(!e)return!1;for(d=0;d<e.length;d++)if(e[d].substr(0,b)===a)return e[d];return!1};d.findLines=function(a,d,e){for(var b=[],h=a.length,c=0;c<d.length;c++)d[c].substr(0,h)===a&&b.push(d[c]);if(b.length||!e)return b;for(d=0;d<e.length;d++)e[d].substr(0,h)===a&&b.push(e[d]);return b};d.mline=function(a){a=a.substr(2).split(" ");for(var b={media:a[0],port:a[1],proto:a[2],formats:[]},d=3;d<a.length;d++)a[d]&&b.formats.push(a[d]);return b};d.rtpmap=function(a){a=a.substr(9).split(" ");
var b={id:a.shift()};a=a[0].split("/");b.name=a[0];b.clockrate=a[1];b.channels=3==a.length?a[2]:"1";return b};d.sctpmap=function(a){a=a.substr(10).split(" ");return{number:a.shift(),protocol:a.shift(),streams:a.shift()}};d.fmtp=function(a){for(var b,d=a.substr(a.indexOf(" ")+1).split(";"),e=[],c=0;c<d.length;c++)b=d[c].split("="),a=b[0].trim(),b=b[1],a&&b?e.push({key:a,value:b}):a&&e.push({key:"",value:a});return e};d.crypto=function(a){a=a.substr(9).split(" ");return{tag:a[0],cipherSuite:a[1],keyParams:a[2],
sessionParams:a.slice(3).join(" ")}};d.fingerprint=function(a){a=a.substr(14).split(" ");return{hash:a[0],value:a[1]}};d.extmap=function(a){a=a.substr(9).split(" ");var b={},d=a.shift(),e=d.indexOf("/");0<=e?(b.id=d.substr(0,e),b.senders=d.substr(e+1)):(b.id=d,b.senders="sendrecv");b.uri=a.shift()||"";return b};d.rtcpfb=function(a){a=a.substr(10).split(" ");var b={};b.id=a.shift();b.type=a.shift();"trr-int"===b.type?b.value=a.shift():b.subtype=a.shift()||"";b.parameters=a;return b};d.candidate=function(a){a=
0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" ");for(var b={foundation:a[0],component:a[1],protocol:a[2]&&a[2].toLowerCase(),priority:a[3],ip:a[4],port:a[5],type:a[7],generation:"0"},d=8;d<a.length;d+=2)"raddr"===a[d]?b.relAddr=a[d+1]:"rport"===a[d]?b.relPort=a[d+1]:"generation"===a[d]?b.generation=a[d+1]:"tcptype"===a[d]&&(b.tcpType=a[d+1]);b.network="1";return b};d.sourceGroups=function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d].substr(13).split(" ");b.push({semantics:e.shift(),
sources:e})}return b};d.sources=function(a){for(var b=[],d={},e=0;e<a.length;e++){var c=a[e].substr(7).split(" "),f=c.shift();if(!d[f]){var k={ssrc:f,parameters:[]};b.push(k);d[f]=k}c=c.join(" ").split(":");k=c.shift();c=c.join(":")||null;d[f].parameters.push({key:k,value:c})}return b};d.groups=function(a){for(var b=[],d,e=0;e<a.length;e++)d=a[e].substr(8).split(" "),b.push({semantics:d.shift(),contents:d});return b};d.bandwidth=function(a){a=a.substr(2).split(":");var b={};b.type=a.shift();b.bandwidth=
a.shift();return b};d.msid=function(a){a=a.substr(7);var b=a.split(" ");return{msid:a,mslabel:b[0],label:b[1]}}},{}],47:[function(a,e,d){e.exports={initiator:{incoming:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"},outgoing:{initiator:"sendonly",responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"}},responder:{incoming:{initiator:"sendonly",
responder:"recvonly",both:"sendrecv",none:"inactive",recvonly:"responder",sendonly:"initiator",sendrecv:"both",inactive:"none"},outgoing:{initiator:"recvonly",responder:"sendonly",both:"sendrecv",none:"inactive",recvonly:"initiator",sendonly:"responder",sendrecv:"both",inactive:"none"}}}},{}],48:[function(a,e,d){var b=a("./senders"),c=a("./parsers"),f=Math.random();d._setIdCounter=function(a){f=a};d.toSessionJSON=function(a,b){var e,h=b.creators||[],f=b.role||"initiator";b=b.direction||"outgoing";
var k=a.split("\r\nm=");for(e=1;e<k.length;e++)k[e]="m="+k[e],e!==k.length-1&&(k[e]+="\r\n");var p=k.shift()+"\r\n",t=c.lines(p);a={};var l=[];for(e=0;e<k.length;e++)l.push(d.toMediaJSON(k[e],p,{role:f,direction:b,creator:h[e]||"initiator"}));a.contents=l;h=c.findLines("a=group:",t);h.length&&(a.groups=c.groups(h));return a};d.toMediaJSON=function(a,e,h){var f=h.creator||"initiator",k=h.role||"initiator",p=h.direction||"outgoing",t=c.lines(a);a=c.lines(e);e=c.mline(t[0]);f={creator:f,name:e.media,
application:{applicationType:"rtp",media:e.media,payloads:[],encryption:[],feedback:[],headerExtensions:[]},transport:{transportType:"iceUdp",candidates:[],fingerprints:[]}};"application"==e.media&&(f.application={applicationType:"datachannel"},f.transport.sctp=[]);var l=f.application,m=f.transport;if(e=c.findLine("a=mid:",t))f.name=e.substr(6);c.findLine("a=sendrecv",t,a)?f.senders="both":c.findLine("a=sendonly",t,a)?f.senders=b[k][p].sendonly:c.findLine("a=recvonly",t,a)?f.senders=b[k][p].recvonly:
c.findLine("a=inactive",t,a)&&(f.senders="none");if("rtp"==l.applicationType){if(e=c.findLine("b=",t))l.bandwidth=c.bandwidth(e);if(e=c.findLine("a=ssrc:",t))l.ssrc=e.substr(7).split(" ")[0];c.findLines("a=rtpmap:",t).forEach(function(a){var b=c.rtpmap(a);b.parameters=[];b.feedback=[];c.findLines("a=fmtp:"+b.id,t).forEach(function(a){b.parameters=c.fmtp(a)});c.findLines("a=rtcp-fb:"+b.id,t).forEach(function(a){b.feedback.push(c.rtcpfb(a))});l.payloads.push(b)});c.findLines("a=crypto:",t,a).forEach(function(a){l.encryption.push(c.crypto(a))});
c.findLine("a=rtcp-mux",t)&&(l.mux=!0);c.findLines("a=rtcp-fb:*",t).forEach(function(a){l.feedback.push(c.rtcpfb(a))});c.findLines("a=extmap:",t).forEach(function(a){a=c.extmap(a);a.senders=b[k][p][a.senders];l.headerExtensions.push(a)});e=c.findLines("a=ssrc-group:",t);l.sourceGroups=c.sourceGroups(e||[]);e=c.findLines("a=ssrc:",t);var D=l.sources=c.sources(e||[]);if(e=c.findLine("a=msid:",t)){var n=c.msid(e);["msid","mslabel","label"].forEach(function(a){for(var b=0;b<D.length;b++){for(var d=!1,
e=0;e<D[b].parameters.length;e++)D[b].parameters[e].key===a&&(d=!0);d||D[b].parameters.push({key:a,value:n[a]})}})}c.findLine("a=x-google-flag:conference",t,a)&&(l.googConferenceFlag=!0)}e=c.findLines("a=fingerprint:",t,a);var ma=c.findLine("a=setup:",t,a);e.forEach(function(a){a=c.fingerprint(a);ma&&(a.setup=ma.substr(8));m.fingerprints.push(a)});e=c.findLine("a=ice-ufrag:",t,a);h=c.findLine("a=ice-pwd:",t,a);e&&h&&(m.ufrag=e.substr(12),m.pwd=h.substr(10),m.candidates=[],c.findLines("a=candidate:",
t,a).forEach(function(a){m.candidates.push(d.toCandidateJSON(a))}));"datachannel"==l.applicationType&&c.findLines("a=sctpmap:",t).forEach(function(a){a=c.sctpmap(a);m.sctp.push(a)});return f};d.toCandidateJSON=function(a){a=c.candidate(a.split("\r\n")[0]);a.id=(f++).toString(36).substr(0,12);return a}},{"./parsers":46,"./senders":47}],49:[function(a,e,d){var b=a("./senders");d.toSessionSDP=function(a,b){var e=b.sid||a.sid||Date.now(),c=b.time||Date.now(),h=["v=0","o=- "+e+" "+c+" IN IP4 0.0.0.0",
"s=-","t=0 0"];e=a.contents||[];var f=!1;e.forEach(function(a){a.application.sources&&a.application.sources.length&&(f=!0)});f&&h.push("a=msid-semantic: WMS *");(a.groups||[]).forEach(function(a){h.push("a=group:"+a.semantics+" "+a.contents.join(" "))});e.forEach(function(a){h.push(d.toMediaSDP(a,b))});return h.join("\r\n")+"\r\n"};d.toMediaSDP=function(a,e){var c=[],h=e.role||"initiator",f=e.direction||"outgoing",k=a.application;e=a.transport;var t=k.payloads||[],l=e&&e.fingerprints||[],C=[];"datachannel"==
k.applicationType?(C.push("application"),C.push("1"),C.push("DTLS/SCTP"),e.sctp&&e.sctp.forEach(function(a){C.push(a.number)})):(C.push(k.media),C.push("1"),0<l.length?C.push("UDP/TLS/RTP/SAVPF"):k.encryption&&0<k.encryption.length?C.push("RTP/SAVPF"):C.push("RTP/AVPF"),t.forEach(function(a){C.push(a.id)}));c.push("m="+C.join(" "));c.push("c=IN IP4 0.0.0.0");k.bandwidth&&k.bandwidth.type&&k.bandwidth.bandwidth&&c.push("b="+k.bandwidth.type+":"+k.bandwidth.bandwidth);"rtp"==k.applicationType&&c.push("a=rtcp:1 IN IP4 0.0.0.0");
e&&(e.ufrag&&c.push("a=ice-ufrag:"+e.ufrag),e.pwd&&c.push("a=ice-pwd:"+e.pwd),l.forEach(function(a){c.push("a=fingerprint:"+a.hash+" "+a.value);a.setup&&c.push("a=setup:"+a.setup)}),e.sctp&&e.sctp.forEach(function(a){c.push("a=sctpmap:"+a.number+" "+a.protocol+" "+a.streams)}));"rtp"==k.applicationType&&c.push("a="+(b[h][f][a.senders]||"sendrecv"));c.push("a=mid:"+a.name);k.sources&&k.sources.length&&(k.sources[0].parameters||[]).forEach(function(a){"msid"===a.key&&c.push("a=msid:"+a.value)});k.mux&&
c.push("a=rtcp-mux");(k.encryption||[]).forEach(function(a){c.push("a=crypto:"+a.tag+" "+a.cipherSuite+" "+a.keyParams+(a.sessionParams?" "+a.sessionParams:""))});k.googConferenceFlag&&c.push("a=x-google-flag:conference");t.forEach(function(a){var b="a=rtpmap:"+a.id+" "+a.name+"/"+a.clockrate;a.channels&&"1"!=a.channels&&(b+="/"+a.channels);c.push(b);if(a.parameters&&a.parameters.length){b=["a=fmtp:"+a.id];var d=[];a.parameters.forEach(function(a){d.push((a.key?a.key+"=":"")+a.value)});b.push(d.join(";"));
c.push(b.join(" "))}a.feedback&&a.feedback.forEach(function(b){"trr-int"===b.type?c.push("a=rtcp-fb:"+a.id+" trr-int "+(b.value?b.value:"0")):c.push("a=rtcp-fb:"+a.id+" "+b.type+(b.subtype?" "+b.subtype:""))})});k.feedback&&k.feedback.forEach(function(a){"trr-int"===a.type?c.push("a=rtcp-fb:* trr-int "+(a.value?a.value:"0")):c.push("a=rtcp-fb:* "+a.type+(a.subtype?" "+a.subtype:""))});(k.headerExtensions||[]).forEach(function(a){c.push("a=extmap:"+a.id+(a.senders?"/"+b[h][f][a.senders]:"")+" "+a.uri)});
(k.sourceGroups||[]).forEach(function(a){c.push("a=ssrc-group:"+a.semantics+" "+a.sources.join(" "))});(k.sources||[]).forEach(function(a){for(var b=0;b<a.parameters.length;b++){var d=a.parameters[b];c.push("a=ssrc:"+(a.ssrc||k.ssrc)+" "+d.key+(d.value?":"+d.value:""))}});(e.candidates||[]).forEach(function(a){c.push(d.toCandidateSDP(a))});return c.join("\r\n")};d.toCandidateSDP=function(a){var b=[];b.push(a.foundation);b.push(a.component);b.push(a.protocol.toUpperCase());b.push(a.priority);b.push(a.ip);
b.push(a.port);var d=a.type;b.push("typ");b.push(d);("srflx"===d||"prflx"===d||"relay"===d)&&a.relAddr&&a.relPort&&(b.push("raddr"),b.push(a.relAddr),b.push("rport"),b.push(a.relPort));a.tcpType&&"TCP"==a.protocol.toUpperCase()&&(b.push("tcptype"),b.push(a.tcpType));b.push("generation");b.push(a.generation||"0");return"a=candidate:"+b.join(" ")}},{"./senders":47}],50:[function(a,e,d){e.exports=a("./lib/")},{"./lib/":51}],51:[function(a,e,d){function b(a,b){"object"==typeof a&&(b=a,a=void 0);b=b||
{};a=c(a);var d=a.source,e=a.id;b.forceNew||b["force new connection"]||!1===b.multiplex?(p("ignoring socket cache for %s",d),b=k(d,b)):(l[e]||(p("new io instance for %s",d),l[e]=k(d,b)),b=l[e]);return b.socket(a.path)}var c=a("./url"),f=a("socket.io-parser"),k=a("./manager"),p=a("debug")("socket.io-client");e.exports=d=b;var l=d.managers={};d.protocol=f.protocol;d.connect=b;d.Manager=a("./manager");d.Socket=a("./socket")},{"./manager":52,"./socket":54,"./url":55,debug:10,"socket.io-parser":57}],52:[function(a,
e,d){function b(a,d){if(!(this instanceof b))return new b(a,d);a&&"object"==typeof a&&(d=a,a=void 0);d=d||{};d.path=d.path||"/socket.io";this.nsps={};this.subs=[];this.opts=d;this.reconnection(!1!==d.reconnection);this.reconnectionAttempts(d.reconnectionAttempts||Infinity);this.reconnectionDelay(d.reconnectionDelay||1E3);this.reconnectionDelayMax(d.reconnectionDelayMax||5E3);this.randomizationFactor(d.randomizationFactor||.5);this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),
jitter:this.randomizationFactor()});this.timeout(null==d.timeout?2E4:d.timeout);this.readyState="closed";this.uri=a;this.connected=[];this.encoding=!1;this.packetBuffer=[];this.encoder=new k.Encoder;this.decoder=new k.Decoder;(this.autoConnect=!1!==d.autoConnect)&&this.open()}a("./url");var c=a("engine.io-client"),f=a("./socket");d=a("component-emitter");var k=a("socket.io-parser"),p=a("./on"),l=a("component-bind");a("object-component");var w=a("debug")("socket.io-client:manager"),z=a("indexof"),
m=a("backo2");e.exports=b;b.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)this.nsps[a].emit.apply(this.nsps[a],arguments)};b.prototype.updateSocketIds=function(){for(var a in this.nsps)this.nsps[a].id=this.engine.id};d(b.prototype);b.prototype.reconnection=function(a){if(!arguments.length)return this._reconnection;this._reconnection=!!a;return this};b.prototype.reconnectionAttempts=function(a){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=
a;return this};b.prototype.reconnectionDelay=function(a){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=a;this.backoff&&this.backoff.setMin(a);return this};b.prototype.randomizationFactor=function(a){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=a;this.backoff&&this.backoff.setJitter(a);return this};b.prototype.reconnectionDelayMax=function(a){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=a;this.backoff&&
this.backoff.setMax(a);return this};b.prototype.timeout=function(a){if(!arguments.length)return this._timeout;this._timeout=a;return this};b.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};b.prototype.open=b.prototype.connect=function(a){w("readyState %s",this.readyState);if(~this.readyState.indexOf("open"))return this;w("opening %s",this.uri);var b=this.engine=c(this.uri,this.opts),d=this;this.readyState="opening";this.skipReconnect=
!1;var e=p(b,"open",function(){d.onopen();a&&a()}),h=p(b,"error",function(b){w("connect_error");d.cleanup();d.readyState="closed";d.emitAll("connect_error",b);if(a){var e=Error("Connection error");e.data=b;a(e)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var f=this._timeout;w("connect attempt will timeout after %d",f);var k=setTimeout(function(){w("connect attempt timed out after %d",f);e.destroy();b.close();b.emit("error","timeout");d.emitAll("connect_timeout",f)},f);this.subs.push({destroy:function(){clearTimeout(k)}})}this.subs.push(e);
this.subs.push(h);return this};b.prototype.onopen=function(){w("open");this.cleanup();this.readyState="open";this.emit("open");var a=this.engine;this.subs.push(p(a,"data",l(this,"ondata")));this.subs.push(p(this.decoder,"decoded",l(this,"ondecoded")));this.subs.push(p(a,"error",l(this,"onerror")));this.subs.push(p(a,"close",l(this,"onclose")))};b.prototype.ondata=function(a){this.decoder.add(a)};b.prototype.ondecoded=function(a){this.emit("packet",a)};b.prototype.onerror=function(a){w("error",a);
this.emitAll("error",a)};b.prototype.socket=function(a){var b=this.nsps[a];if(!b){b=new f(this,a);this.nsps[a]=b;var d=this;b.on("connect",function(){b.id=d.engine.id;~z(d.connected,b)||d.connected.push(b)})}return b};b.prototype.destroy=function(a){a=z(this.connected,a);~a&&this.connected.splice(a,1);this.connected.length||this.close()};b.prototype.packet=function(a){w("writing packet %j",a);var b=this;b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(a){for(var d=0;d<
a.length;d++)b.engine.write(a[d]);b.encoding=!1;b.processPacketQueue()}))};b.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}};b.prototype.cleanup=function(){for(var a;a=this.subs.shift();)a.destroy();this.packetBuffer=[];this.encoding=!1;this.decoder.destroy()};b.prototype.close=b.prototype.disconnect=function(){this.skipReconnect=!0;this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};
b.prototype.onclose=function(a){w("close");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",a);this._reconnection&&!this.skipReconnect&&this.reconnect()};b.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)w("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();w("will wait %dms before reconnect attempt",
b);this.reconnecting=!0;var d=setTimeout(function(){a.skipReconnect||(w("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(w("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(w("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(d)}})}};b.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=
!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",a)}},{"./on":53,"./socket":54,"./url":55,backo2:4,"component-bind":7,"component-emitter":8,debug:10,"engine.io-client":11,indexof:32,"object-component":39,"socket.io-parser":57}],53:[function(a,e,d){e.exports=function(a,d,e){a.on(d,e);return{destroy:function(){a.removeListener(d,e)}}}},{}],54:[function(a,e,d){function b(a,b){this.io=a;this.nsp=b;this.json=this;this.ids=0;this.acks={};this.io.autoConnect&&this.open();this.receiveBuffer=
[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0}var c=a("socket.io-parser");d=a("component-emitter");var f=a("to-array"),k=a("./on"),p=a("component-bind"),l=a("debug")("socket.io-client:socket"),w=a("has-binary");e.exports=b;var z={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},m=d.prototype.emit;d(b.prototype);b.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=
[k(a,"open",p(this,"onopen")),k(a,"packet",p(this,"onpacket")),k(a,"close",p(this,"onclose"))]}};b.prototype.open=b.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();return this};b.prototype.send=function(){var a=f(arguments);a.unshift("message");this.emit.apply(this,a);return this};b.prototype.emit=function(a){if(z.hasOwnProperty(a))return m.apply(this,arguments),this;var b=f(arguments),d=c.EVENT;w(b)&&(d=c.BINARY_EVENT);
d={type:d,data:b};"function"==typeof b[b.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++);this.connected?this.packet(d):this.sendBuffer.push(d);return this};b.prototype.packet=function(a){a.nsp=this.nsp;this.io.packet(a)};b.prototype.onopen=function(){l("transport is open - connecting");"/"!=this.nsp&&this.packet({type:c.CONNECT})};b.prototype.onclose=function(a){l("close (%s)",a);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",
a)};b.prototype.onpacket=function(a){if(a.nsp==this.nsp)switch(a.type){case c.CONNECT:this.onconnect();break;case c.EVENT:this.onevent(a);break;case c.BINARY_EVENT:this.onevent(a);break;case c.ACK:this.onack(a);break;case c.BINARY_ACK:this.onack(a);break;case c.DISCONNECT:this.ondisconnect();break;case c.ERROR:this.emit("error",a.data)}};b.prototype.onevent=function(a){var b=a.data||[];l("emitting event %j",b);null!=a.id&&(l("attaching ack callback to event"),b.push(this.ack(a.id)));this.connected?
m.apply(this,b):this.receiveBuffer.push(b)};b.prototype.ack=function(a){var b=this,d=!1;return function(){if(!d){d=!0;var e=f(arguments);l("sending ack %j",e);var h=w(e)?c.BINARY_ACK:c.ACK;b.packet({type:h,id:a,data:e})}}};b.prototype.onack=function(a){l("calling ack %s with %j",a.id,a.data);this.acks[a.id].apply(this,a.data);delete this.acks[a.id]};b.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};b.prototype.emitBuffered=function(){var a;
for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);this.receiveBuffer=[];for(a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]};b.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};b.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)};b.prototype.close=b.prototype.disconnect=function(){this.connected&&
(l("performing disconnect (%s)",this.nsp),this.packet({type:c.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this}},{"./on":53,"component-bind":7,"component-emitter":8,debug:10,"has-binary":30,"socket.io-parser":57,"to-array":59}],55:[function(a,e,d){(function(b){var d=a("parseuri"),c=a("debug")("socket.io-client:url");e.exports=function(a,e){var h=a;e=e||b.location;null==a&&(a=e.protocol+"//"+e.host);"string"==typeof a&&("/"==a.charAt(0)&&(a="/"==a.charAt(1)?
e.protocol+a:e.hostname+a),/^(https?|wss?):\/\//.test(a)||(c("protocol-less url %s",a),a="undefined"!=typeof e?e.protocol+"//"+a:"https://"+a),c("parse %s",a),h=d(a));h.port||(/^(http|ws)$/.test(h.protocol)?h.port="80":/^(http|ws)s$/.test(h.protocol)&&(h.port="443"));h.path=h.path||"/";h.id=h.protocol+"://"+h.host+":"+h.port;h.href=h.protocol+"://"+h.host+(e&&e.port==h.port?"":":"+h.port);return h}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?
window:{})},{debug:10,parseuri:42}],56:[function(a,e,d){(function(b){var e=a("isarray"),c=a("./is-buffer");d.deconstructPacket=function(a){function b(a){if(!a)return a;if(c(a)){var h={_placeholder:!0,num:d.length};d.push(a);return h}if(e(a)){h=Array(a.length);for(var f=0;f<a.length;f++)h[f]=b(a[f]);return h}if("object"==typeof a&&!(a instanceof Date)){h={};for(f in a)h[f]=b(a[f]);return h}return a}var d=[];a.data=b(a.data);a.attachments=d.length;return{packet:a,buffers:d}};d.reconstructPacket=function(a,
b){function d(a){if(a&&a._placeholder)return b[a.num];if(e(a))for(var c=0;c<a.length;c++)a[c]=d(a[c]);else if(a&&"object"==typeof a)for(c in a)a[c]=d(a[c]);return a}a.data=d(a.data);a.attachments=void 0;return a};d.removeBlobs=function(a,d){function h(a,p,l){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){f++;var t=new FileReader;t.onload=function(){l?l[p]=this.result:k=this.result;--f||d(k)};t.readAsArrayBuffer(a)}else if(e(a))for(t=0;t<a.length;t++)h(a[t],t,a);else if(a&&
"object"==typeof a&&!c(a))for(t in a)h(a[t],t,a)}var f=0,k=a;h(k);f||d(k)}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./is-buffer":58,isarray:33}],57:[function(a,e,d){function b(){}function c(a){var b=!1;var e=""+a.type;if(d.BINARY_EVENT==a.type||d.BINARY_ACK==a.type)e+=a.attachments,e+="-";a.nsp&&"/"!=a.nsp&&(b=!0,e+=a.nsp);null!=a.id&&(b&&(e+=",",b=!1),e+=a.id);null!=a.data&&(b&&(e+=","),e+=w.stringify(a.data));l("encoded %j as %s",
a,e);return e}function f(a,b){m.removeBlobs(a,function(a){var d=m.deconstructPacket(a);a=c(d.packet);d=d.buffers;d.unshift(a);b(d)})}function k(){this.reconstructor=null}function p(a){this.reconPack=a;this.buffers=[]}var l=a("debug")("socket.io-parser"),w=a("json3");a("isarray");e=a("component-emitter");var m=a("./binary"),n=a("./is-buffer");d.protocol=4;d.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");d.CONNECT=0;d.DISCONNECT=1;d.EVENT=2;d.ACK=3;d.ERROR=4;d.BINARY_EVENT=
5;d.BINARY_ACK=6;d.Encoder=b;d.Decoder=k;b.prototype.encode=function(a,b){l("encoding packet %j",a);d.BINARY_EVENT==a.type||d.BINARY_ACK==a.type?f(a,b):(a=c(a),b([a]))};e(k.prototype);k.prototype.add=function(a){if("string"==typeof a){a:{var b={},e=0;b.type=Number(a.charAt(0));if(null==d.types[b.type])a={type:d.ERROR,data:"parser error"};else{if(d.BINARY_EVENT==b.type||d.BINARY_ACK==b.type){for(var c="";"-"!=a.charAt(++e)&&(c+=a.charAt(e),e!=a.length););if(c!=Number(c)||"-"!=a.charAt(e))throw Error("Illegal attachments");
b.attachments=Number(c)}if("/"==a.charAt(e+1))for(b.nsp="";++e;){c=a.charAt(e);if(","==c)break;b.nsp+=c;if(e==a.length)break}else b.nsp="/";c=a.charAt(e+1);if(""!==c&&Number(c)==c){for(b.id="";++e;){c=a.charAt(e);if(null==c||Number(c)!=c){--e;break}b.id+=a.charAt(e);if(e==a.length)break}b.id=Number(b.id)}if(a.charAt(++e))try{b.data=w.parse(a.substr(e))}catch(Sc){a={type:d.ERROR,data:"parser error"};break a}l("decoded %s as %j",a,b);a=b}}d.BINARY_EVENT==a.type||d.BINARY_ACK==a.type?(this.reconstructor=
new p(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a)}else if(n(a)||a.base64)if(this.reconstructor){if(a=this.reconstructor.takeBinaryData(a))this.reconstructor=null,this.emit("decoded",a)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a);};k.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};p.prototype.takeBinaryData=function(a){this.buffers.push(a);
return this.buffers.length==this.reconPack.attachments?(a=m.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),a):null};p.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},{"./binary":56,"./is-buffer":58,"component-emitter":8,debug:10,isarray:33,json3:34}],58:[function(a,e,d){(function(a){e.exports=function(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}}).call(this,"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{}],59:[function(a,e,d){e.exports=function(a,d){for(var b=[],e=(d=d||0)||0;e<a.length;e++)b[e-d]=a[e];return b}},{}],60:[function(a,e,d){(function(a){(function(b){function c(a){for(var b=[],d=0,e=a.length,c,h;d<e;)c=a.charCodeAt(d++),55296<=c&&56319>=c&&d<e?(h=a.charCodeAt(d++),56320==(h&64512)?b.push(((c&1023)<<10)+(h&1023)+65536):(b.push(c),d--)):b.push(c);return b}function h(a){if(55296<=a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+
" is not a scalar value");}function f(){if(u>=v)throw Error("Invalid byte index");var a=r[u]&255;u++;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function k(){if(u>v)throw Error("Invalid byte index");if(u==v)return!1;var a=r[u]&255;u++;if(0==(a&128))return a;if(192==(a&224)){var b=f();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=f();var d=f();a=(a&15)<<12|b<<6|d;if(2048<=a)return h(a),a;throw Error("Invalid continuation byte");
}if(240==(a&248)){b=f();d=f();var e=f();a=(a&15)<<18|b<<12|d<<6|e;if(65536<=a&&1114111>=a)return a}throw Error("Invalid UTF-8 detected");}var l="object"==typeof d&&d,m="object"==typeof e&&e&&e.exports==l&&e,n="object"==typeof a&&a;if(n.global===n||n.window===n)b=n;var q=String.fromCharCode,r,v,u;n={version:"2.0.0",encode:function(a){a=c(a);for(var b=a.length,d=-1,e,f="";++d<b;){e=a[d];if(0==(e&4294967168))e=q(e);else{var k="";0==(e&4294965248)?k=q(e>>6&31|192):0==(e&4294901760)?(h(e),k=q(e>>12&15|
224),k+=q(e>>6&63|128)):0==(e&4292870144)&&(k=q(e>>18&7|240),k+=q(e>>12&63|128),k+=q(e>>6&63|128));e=k+=q(e&63|128)}f+=e}return f},decode:function(a){r=c(a);v=r.length;u=0;a=[];for(var b;!1!==(b=k());)a.push(b);b=a.length;for(var d=-1,e,h="";++d<b;)e=a[d],65535<e&&(e-=65536,h+=q(e>>>10&1023|55296),e=56320|e&1023),h+=q(e);return h}};if(l&&!l.nodeType)if(m)m.exports=n;else{b={}.hasOwnProperty;for(var x in n)b.call(n,x)&&(l[x]=n[x])}else b.utf8=n})(this)}).call(this,"undefined"!==typeof global?global:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],61:[function(a,e,d){e.exports="function"===typeof Object.create?function(a,d){a.super_=d;a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,d){a.super_=d;var b=function(){};b.prototype=d.prototype;a.prototype=new b;a.prototype.constructor=a}},{}],62:[function(a,e,d){e.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===
typeof a.fill&&"function"===typeof a.readUInt8}},{}],63:[function(a,e,d){(function(b,e){function c(a,b){var e={seen:[],stylize:f};3<=arguments.length&&(e.depth=arguments[2]);4<=arguments.length&&(e.colors=arguments[3]);x(b)?e.showHidden=b:b&&d._extend(e,b);A(e.showHidden)&&(e.showHidden=!1);A(e.depth)&&(e.depth=2);A(e.colors)&&(e.colors=!1);A(e.customInspect)&&(e.customInspect=!0);e.colors&&(e.stylize=h);return l(e,a,e.depth)}function h(a,b){return(b=c.styles[b])?"\u001b["+c.colors[b][0]+"m"+a+"\u001b["+
c.colors[b][1]+"m":a}function f(a,b){return a}function k(a){var b={};a.forEach(function(a,d){b[a]=!0});return b}function l(a,b,e){if(a.customInspect&&b&&I(b.inspect)&&b.inspect!==d.inspect&&(!b.constructor||b.constructor.prototype!==b)){var c=b.inspect(e,a);B(c)||(c=l(a,c,e));return c}if(c=m(a,b))return c;var h=Object.keys(b),f=k(h);a.showHidden&&(h=Object.getOwnPropertyNames(b));if(H(b)&&(0<=h.indexOf("message")||0<=h.indexOf("description")))return n(b);if(0===h.length){if(I(b))return a.stylize("[Function"+
(b.name?": "+b.name:"")+"]","special");if(E(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(G(b))return a.stylize(Date.prototype.toString.call(b),"date");if(H(b))return n(b)}c="";var p=!1,t=["{","}"];u(b)&&(p=!0,t=["[","]"]);I(b)&&(c=" [Function"+(b.name?": "+b.name:"")+"]");E(b)&&(c=" "+RegExp.prototype.toString.call(b));G(b)&&(c=" "+Date.prototype.toUTCString.call(b));H(b)&&(c=" "+n(b));if(0===h.length&&(!p||0==b.length))return t[0]+c+t[1];if(0>e)return E(b)?a.stylize(RegExp.prototype.toString.call(b),
"regexp"):a.stylize("[Object]","special");a.seen.push(b);h=p?q(a,b,e,f,h):h.map(function(d){return r(a,b,e,f,d,p)});a.seen.pop();return v(h,c,t)}function m(a,b){if(A(b))return a.stylize("undefined","undefined");if(B(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(y(b))return a.stylize(""+b,"number");if(x(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function n(a){return"["+Error.prototype.toString.call(a)+
"]"}function q(a,b,d,e,c){for(var h=[],f=0,k=b.length;f<k;++f)Object.prototype.hasOwnProperty.call(b,String(f))?h.push(r(a,b,d,e,String(f),!0)):h.push("");c.forEach(function(c){c.match(/^\d+$/)||h.push(r(a,b,d,e,c,!0))});return h}function r(a,b,d,e,c,h){var f,k;b=Object.getOwnPropertyDescriptor(b,c)||{value:b[c]};b.get?k=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(k=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(e,c)||(f="["+c+"]");k||
(0>a.seen.indexOf(b.value)?(k=null===d?l(a,b.value,null):l(a,b.value,d-1),-1<k.indexOf("\n")&&(k=h?k.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+k.split("\n").map(function(a){return"   "+a}).join("\n"))):k=a.stylize("[Circular]","special"));if(A(f)){if(h&&c.match(/^\d+$/))return k;f=JSON.stringify(""+c);f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=a.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=a.stylize(f,
"string"))}return f+": "+k}function v(a,b,d){var e=0;return 60<a.reduce(function(a,b){e++;0<=b.indexOf("\n")&&e++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?d[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+d[1]:d[0]+b+" "+a.join(", ")+" "+d[1]}function u(a){return Array.isArray(a)}function x(a){return"boolean"===typeof a}function y(a){return"number"===typeof a}function B(a){return"string"===typeof a}function A(a){return void 0===a}function E(a){return F(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}
function F(a){return"object"===typeof a&&null!==a}function G(a){return F(a)&&"[object Date]"===Object.prototype.toString.call(a)}function H(a){return F(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function I(a){return"function"===typeof a}function J(a){return 10>a?"0"+a.toString(10):a.toString(10)}function M(){var a=new Date,b=[J(a.getHours()),J(a.getMinutes()),J(a.getSeconds())].join(":");return[a.getDate(),P[a.getMonth()],b].join(" ")}var O=/%[sdj%]/g;d.format=
function(a){if(!B(a)){for(var b=[],d=0;d<arguments.length;d++)b.push(c(arguments[d]));return b.join(" ")}d=1;var e=arguments,h=e.length;b=String(a).replace(O,function(a){if("%%"===a)return"%";if(d>=h)return a;switch(a){case "%s":return String(e[d++]);case "%d":return Number(e[d++]);case "%j":try{return JSON.stringify(e[d++])}catch(vh){return"[Circular]"}default:return a}});for(var f=e[d];d<h;f=e[++d])b=null!==f&&F(f)?b+(" "+c(f)):b+(" "+f);return b};d.deprecate=function(a,c){if(A(e.process))return function(){return d.deprecate(a,
c).apply(this,arguments)};if(!0===b.noDeprecation)return a;var h=!1;return function(){if(!h){if(b.throwDeprecation)throw Error(c);b.traceDeprecation?console.trace(c):console.error(c);h=!0}return a.apply(this,arguments)}};var L={},N;d.debuglog=function(a){A(N)&&(N=b.env.NODE_DEBUG||"");a=a.toUpperCase();if(!L[a])if((new RegExp("\\b"+a+"\\b","i")).test(N)){var e=b.pid;L[a]=function(){var b=d.format.apply(d,arguments);console.error("%s %d: %s",a,e,b)}}else L[a]=function(){};return L[a]};d.inspect=c;
c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};c.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};d.isArray=u;d.isBoolean=x;d.isNull=function(a){return null===a};d.isNullOrUndefined=function(a){return null==a};d.isNumber=y;d.isString=B;d.isSymbol=function(a){return"symbol"===
typeof a};d.isUndefined=A;d.isRegExp=E;d.isObject=F;d.isDate=G;d.isError=H;d.isFunction=I;d.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};d.isBuffer=a("./support/isBuffer");var P="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");d.log=function(){console.log("%s - %s",M(),d.format.apply(d,arguments))};d.inherits=a("inherits");d._extend=function(a,b){if(!b||!F(b))return a;for(var d=Object.keys(b),
e=d.length;e--;)a[d[e]]=b[d[e]];return a}}).call(this,a("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":62,_process:43,inherits:61}],64:[function(a,e,d){if(window.mozRTCPeerConnection||navigator.mozGetUserMedia){var b="moz";var c=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)}else if(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)b="webkit",c=navigator.userAgent.match(/Chrom(e|ium)/)&&
parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10);a=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;d=window.mozRTCIceCandidate||window.RTCIceCandidate;var f=window.mozRTCSessionDescription||window.RTCSessionDescription,k=window.webkitMediaStream||window.MediaStream,l="https:"===window.location.protocol&&("webkit"===b&&26<=c||"moz"===b&&33<=c),m=window.AudioContext||window.webkitAudioContext,w=document.createElement("video");w=w&&w.canPlayType&&
"probably"===w.canPlayType('video/webm; codecs="vp8", vorbis');var n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;e.exports={prefix:b,browserVersion:c,support:!!a&&!!n,supportRTCPeerConnection:!!a,supportVp8:w,supportGetUserMedia:!!n,supportDataChannel:!!(a&&a.prototype&&a.prototype.createDataChannel),supportWebAudio:!(!m||!m.prototype.createMediaStreamSource),supportMediaStream:!(!k||!k.prototype.removeTrack),supportScreenSharing:!!l,AudioContext:m,
PeerConnection:a,SessionDescription:f,IceCandidate:d,MediaStream:k,getUserMedia:n}},{}],65:[function(a,e,d){function b(){}e.exports=b;b.mixin=function(a){a=a.prototype||a;a.isWildEmitter=!0;a.on=function(a,b,d){this.callbacks=this.callbacks||{};var e=3===arguments.length,c=e?arguments[2]:arguments[1];c._groupName=e?arguments[1]:void 0;(this.callbacks[a]=this.callbacks[a]||[]).push(c);return this};a.once=function(a,b,d){function e(){c.off(a,e);f.apply(this,arguments)}var c=this,h=3===arguments.length,
f=h?arguments[2]:arguments[1];this.on(a,h?arguments[1]:void 0,e);return this};a.releaseGroup=function(a){this.callbacks=this.callbacks||{};var b,d;for(b in this.callbacks){var e=this.callbacks[b];var c=0;for(d=e.length;c<d;c++)e[c]._groupName===a&&(e.splice(c,1),c--,d--)}return this};a.off=function(a,b){this.callbacks=this.callbacks||{};var d=this.callbacks[a];if(!d)return this;if(1===arguments.length)return delete this.callbacks[a],this;var e=d.indexOf(b);d.splice(e,1);0===d.length&&delete this.callbacks[a];
return this};a.emit=function(a){this.callbacks=this.callbacks||{};var b=[].slice.call(arguments,1),d=this.callbacks[a],e=this.getWildcardCallbacks(a),c;if(d){var h=d.slice();d=0;for(c=h.length;d<c&&h[d];++d)h[d].apply(this,b)}if(e)for(h=e.slice(),d=0,c=h.length;d<c&&h[d];++d)h[d].apply(this,[a].concat(b));return this};a.getWildcardCallbacks=function(a){this.callbacks=this.callbacks||{};var b,d=[];for(b in this.callbacks){var e=b.split("*");if("*"===b||2===e.length&&a.slice(0,e[0].length)===e[0])d=
d.concat(this.callbacks[b])}return d}};b.mixin(b)},{}],66:[function(a,e,d){function b(a,b,d){return b?new c(a,b):new c(a)}a=window;var c=a.WebSocket||a.MozWebSocket;e.exports=c?b:null;c&&(b.prototype=c.prototype)},{}],67:[function(a,e,d){function b(a){var b=!0;a.getTracks().forEach(function(a){b="ended"===a.readyState&&b});return b}function c(a){var b=this;l.call(this);this.id=a.id;this.parent=a.parent;this.type=a.type||"video";this.oneway=a.oneway||!1;this.sharemyscreen=a.sharemyscreen||!1;this.browserPrefix=
a.prefix;this.stream=a.stream;this.enableDataChannels=void 0===a.enableDataChannels?this.parent.config.enableDataChannels:a.enableDataChannels;this.receiveMedia=a.receiveMedia||this.parent.config.receiveMedia;this.channels={};this.sid=a.sid||Date.now().toString();this.pc=new k(this.parent.config.peerConnectionConfig,this.parent.config.peerConnectionConstraints);this.pc.on("ice",this.onIceCandidate.bind(this));this.pc.on("endOfCandidates",function(a){b.send("endOfCandidates",a)});this.pc.on("offer",
function(a){b.parent.config.nick&&(a.nick=b.parent.config.nick);b.send("offer",a)});this.pc.on("answer",function(a){b.parent.config.nick&&(a.nick=b.parent.config.nick);b.send("answer",a)});this.pc.on("addStream",this.handleRemoteStreamAdded.bind(this));this.pc.on("addChannel",this.handleDataChannelAdded.bind(this));this.pc.on("removeStream",this.handleStreamRemoved.bind(this));this.pc.on("negotiationNeeded",this.emit.bind(this,"negotiationNeeded"));this.pc.on("iceConnectionStateChange",this.emit.bind(this,
"iceConnectionStateChange"));this.pc.on("iceConnectionStateChange",function(){switch(b.pc.iceConnectionState){case "failed":"offer"===b.pc.pc.localDescription.type&&(b.parent.emit("iceFailed",b),b.send("connectivityError"))}});this.pc.on("signalingStateChange",this.emit.bind(this,"signalingStateChange"));this.logger=this.parent.logger;"screen"===a.type?this.parent.localScreens&&this.parent.localScreens[0]&&this.sharemyscreen&&(this.logger.log("adding local screen stream to peer connection"),this.pc.addStream(this.parent.localScreens[0]),
this.broadcaster=a.broadcaster):this.parent.localStreams.forEach(function(a){b.pc.addStream(a)});this.on("channelOpen",function(a){"https://simplewebrtc.com/protocol/filetransfer#inband-v1"===a.protocol&&(a.onmessage=function(d){d=JSON.parse(d.data);var e=new m.Receiver;e.receive(d,a);b.emit("fileTransfer",d,e);e.on("receivedFile",function(a,b){e.channel.close()})})});this.on("*",function(){b.parent.emit.apply(b.parent,arguments)})}d=a("util");var f=a("webrtcsupport"),k=a("rtcpeerconnection"),l=a("wildemitter"),
m=a("filetransfer");d.inherits(c,l);c.prototype.handleMessage=function(a){var b=this;this.logger.log("getting",a.type,a);a.prefix&&(this.browserPrefix=a.prefix);"offer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleOffer(a.payload,function(a){a||b.pc.answer(function(a,b){})})):"answer"===a.type?(this.nick||(this.nick=a.payload.nick),delete a.payload.nick,this.pc.handleAnswer(a.payload)):"candidate"===a.type?this.pc.processIce(a.payload):"connectivityError"===
a.type?this.parent.emit("connectivityError",b):"mute"===a.type?this.parent.emit("mute",{id:a.from,name:a.payload.name}):"unmute"===a.type&&this.parent.emit("unmute",{id:a.from,name:a.payload.name})};c.prototype.send=function(a,b){b={to:this.id,sid:this.sid,broadcaster:this.broadcaster,roomType:this.type,type:a,payload:b,prefix:f.prefix};this.logger.log("sending",a,b);this.parent.emit("message",b)};c.prototype.sendDirectly=function(a,b,d){this.logger.log("sending via datachannel",a,b,{type:b,payload:d});
a=this.getDataChannel(a);if("open"!=a.readyState)return!1;a.send(d);return!0};c.prototype._observeDataChannel=function(a){var b=this;a.binaryType="arraybuffer";a.onclose=this.emit.bind(this,"channelClose",a);a.onerror=this.emit.bind(this,"channelError",a);a.onmessage=function(d){var e=new Uint32Array(d.data);b.emit("channelMessage",b,a.label,e,a,d)};a.onopen=this.emit.bind(this,"channelOpen",a)};c.prototype.getDataChannel=function(a,b){if(!f.supportDataChannel)return this.emit("error",Error("createDataChannel not supported"));
var d=this.channels[a];b||(b={});if(d)return d;d=this.channels[a]=this.pc.createDataChannel(a,b);d.binaryType="arraybuffer";this._observeDataChannel(d);return d};c.prototype.onIceCandidate=function(a){if(!this.closed)if(a){var b=this.parent.config.peerConnectionConfig;"moz"===f.prefix&&b&&b.iceTransports&&a.candidate&&a.candidate.candidate&&0>a.candidate.candidate.indexOf(b.iceTransports)?this.logger.log("Ignoring ice candidate not matching pcConfig iceTransports type: ",b.iceTransports):this.send("candidate",
a)}else this.logger.log("End of candidates.")};c.prototype.start=function(){this.enableDataChannels&&this.getDataChannel("simplewebrtc");this.pc.offer(this.receiveMedia,function(a,b){})};c.prototype.icerestart=function(){var a=this.receiveMedia;a.mandatory.IceRestart=!0;this.pc.offer(a,function(a,b){})};c.prototype.end=function(){this.closed||(this.pc.close(),this.handleStreamRemoved())};c.prototype.handleRemoteStreamAdded=function(a){var d=this;this.stream?this.logger.warn("Already have a remote stream"):
(this.stream=a.stream,this.stream.getTracks().forEach(function(a){a.addEventListener("ended",function(){b(d.stream)&&d.end()})}),this.parent.emit("peerStreamAdded",this))};c.prototype.handleStreamRemoved=function(){var a=this.parent.peers.indexOf(this);-1<a&&(this.parent.peers.splice(a,1),this.closed=!0,this.parent.emit("peerStreamRemoved",this))};c.prototype.handleDataChannelAdded=function(a){this.channels[a.label]=a;this._observeDataChannel(a)};c.prototype.sendFile=function(a){var b=new m.Sender,
d=this.getDataChannel("filetransfer"+(new Date).getTime(),{protocol:"https://simplewebrtc.com/protocol/filetransfer#inband-v1"});d.onopen=function(){d.send(JSON.stringify({size:a.size,name:a.name}));b.send(a,d)};d.onclose=function(){console.log("sender received transfer");b.emit("complete")};return b};e.exports=c},{filetransfer:26,rtcpeerconnection:44,util:63,webrtcsupport:64,wildemitter:65}],68:[function(a,e,d){function b(a){var b=this,d=a||{},e=this.config={url:"https://sandbox.simplewebrtc.com:443/",
socketio:{},connection:null,debug:!1,localVideoEl:"",remoteVideosEl:"",enableDataChannels:!0,autoRequestMedia:!1,autoRemoveVideos:!0,adjustPeerVolume:!1,peerVolumeWhenSpeaking:.25,media:{video:!0,audio:!0},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},localVideo:{autoplay:!0,mirror:!0,muted:!0}},h;var p=a.debug?a.logger||console:a.logger||m;this.logger=p;for(h in d)d.hasOwnProperty(h)&&(this.config[h]=d[h]);this.capabilities=k;f.call(this);var t=null===this.config.connection?this.connection=
new w(this.config):this.connection=this.config.connection;t.on("connect",function(){b.emit("connectionReady",t.getSessionid());b.sessionReady=!0;b.testReadiness()});t.on("message",function(a){var d=b.webrtc.getPeers(a.from,a.roomType);if("offer"===a.type){d.length&&d.forEach(function(b){b.sid==a.sid&&(e=b)});if(!e){var e=b.webrtc.createPeer({id:a.from,sid:a.sid,type:a.roomType,enableDataChannels:b.config.enableDataChannels&&"screen"!==a.roomType,sharemyscreen:"screen"===a.roomType&&!a.broadcaster,
broadcaster:"screen"!==a.roomType||a.broadcaster?null:b.connection.getSessionid()});b.emit("createdPeer",e)}e.handleMessage(a)}else d.length&&d.forEach(function(b){a.sid?b.sid===a.sid&&b.handleMessage(a):b.handleMessage(a)})});t.on("remove",function(a){x("rem1");n.gstarted()||a.id===b.connection.getSessionid()||(x("rem11"),b.webrtc.removePeers(a.id,a.type))});a.logger=this.logger;a.debug=!1;this.webrtc=new c(a);"mute unmute pauseVideo resumeVideo pause resume sendToAll sendDirectlyToAll getPeers".split(" ").forEach(function(a){b[a]=
b.webrtc[a].bind(b.webrtc)});this.webrtc.on("*",function(){b.emit.apply(b,arguments)});if(e.debug)this.on("*",this.logger.log.bind(this.logger,"SimpleWebRTC event:"));this.webrtc.on("localStream",function(){b.testReadiness()});this.webrtc.on("message",function(a){b.connection.emit("message",a)});this.webrtc.on("peerStreamAdded",this.handlePeerStreamAdded.bind(this));this.webrtc.on("peerStreamRemoved",this.handlePeerStreamRemoved.bind(this));this.config.adjustPeerVolume&&(this.webrtc.on("speaking",
this.setVolumeForAll.bind(this,this.config.peerVolumeWhenSpeaking)),this.webrtc.on("stoppedSpeaking",this.setVolumeForAll.bind(this,1)));t.on("stunservers",function(a){b.webrtc.config.peerConnectionConfig.iceServers=a;b.emit("stunservers",a)});t.on("turnservers",function(a){b.webrtc.config.peerConnectionConfig.iceServers=b.webrtc.config.peerConnectionConfig.iceServers.concat(a);b.emit("turnservers",a)});this.webrtc.on("iceFailed",function(a){});this.webrtc.on("connectivityError",function(a){});this.webrtc.on("audioOn",
function(){b.webrtc.sendToAll("unmute",{name:"audio"})});this.webrtc.on("audioOff",function(){b.webrtc.sendToAll("mute",{name:"audio"})});this.webrtc.on("videoOn",function(){b.webrtc.sendToAll("unmute",{name:"video"})});this.webrtc.on("videoOff",function(){b.webrtc.sendToAll("mute",{name:"video"})});this.webrtc.on("localScreen",function(a){var d=document.createElement("video"),e=b.getRemoteVideoContainer();d.oncontextmenu=function(){return!1};d.id="localScreen";l(a,d);e&&e.appendChild(d);b.emit("localScreenAdded",
d);b.connection.emit("shareScreen");b.webrtc.peers.forEach(function(a){"video"===a.type&&(a=b.webrtc.createPeer({id:a.id,type:"screen",sharemyscreen:!0,enableDataChannels:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},broadcaster:b.connection.getSessionid()}),b.emit("createdPeer",a),a.start())})});this.webrtc.on("localScreenStopped",function(a){b.getLocalScreen()&&b.stopScreenShare()});this.webrtc.on("channelMessage",function(a,d,e){"volume"==e.type&&b.emit("remoteVolumeChange",a,e.volume)});
this.config.autoRequestMedia&&this.startLocalVideo()}var c=a("./webrtc"),f=a("wildemitter"),k=a("webrtcsupport"),l=a("attachmediastream"),m=a("mockconsole"),w=a("./socketioconnection");b.prototype=Object.create(f.prototype,{constructor:{value:b}});b.prototype.leaveRoom=function(){if(this.roomName){for(this.connection.emit("leave");this.webrtc.peers.length;)this.webrtc.peers[0].end();this.getLocalScreen()&&this.stopScreenShare();this.emit("leftRoom",this.roomName);this.roomName=void 0}};b.prototype.disconnect=
function(){this.connection.disconnect();delete this.connection};b.prototype.handlePeerStreamAdded=function(a){var b=this,d=this.getRemoteVideoContainer(),e=l(a.stream);a.videoEl=e;e.id=this.getDomId(a);d&&d.appendChild(e);this.emit("videoAdded",e,a);window.setTimeout(function(){b.webrtc.isAudioEnabled()||a.send("mute",{name:"audio"});b.webrtc.isVideoEnabled()||a.send("mute",{name:"video"})},250)};b.prototype.handlePeerStreamRemoved=function(a){var b=this.getRemoteVideoContainer(),d=a.videoEl;this.config.autoRemoveVideos&&
b&&d&&b.removeChild(d);d&&this.emit("videoRemoved",d,a)};b.prototype.getDomId=function(a){return[a.id,a.type,a.broadcaster?"broadcasting":"incoming"].join("_")};b.prototype.setVolumeForAll=function(a){this.webrtc.peers.forEach(function(b){b.videoEl&&(b.videoEl.volume=a)})};b.prototype.joinRoom=function(a,b){var d=this;this.roomName=a;this.connection.emit("join",a,function(e,c){console.log("join CB",e);if(e)d.emit("error",e);else{if(!c.xtra)return xe();q.room=c.xtra;x(q);var f,h;for(f in c.clients){var k=
c.clients[f];for(h in k)if(k[h]){var l=d.webrtc.createPeer({id:f,type:h,enableDataChannels:d.config.enableDataChannels&&"screen"!==h,receiveMedia:{offerToReceiveAudio:"screen"!==h&&d.config.receiveMedia.offerToReceiveAudio?1:0,offerToReceiveVideo:d.config.receiveMedia.offerToReceiveVideo}});d.emit("createdPeer",l);l.start()}}}b&&b(e,c);d.emit("joinedRoom",a)})};b.prototype.getEl=function(a){return"string"===typeof a?document.getElementById(a):a};b.prototype.startLocalVideo=function(){var a=this;this.webrtc.start(this.config.media,
function(b,d){b?a.emit("localMediaError",b):l(d,a.getLocalVideoContainer(),a.config.localVideo)})};b.prototype.stopLocalVideo=function(){this.webrtc.stop()};b.prototype.getLocalVideoContainer=function(){var a=this.getEl(this.config.localVideoEl);if(a&&"VIDEO"===a.tagName)return a.oncontextmenu=function(){return!1},a;if(a){var b=document.createElement("video");b.oncontextmenu=function(){return!1};a.appendChild(b);return b}};b.prototype.getRemoteVideoContainer=function(){return this.getEl(this.config.remoteVideosEl)};
b.prototype.shareScreen=function(a){this.webrtc.startScreenShare(a)};b.prototype.getLocalScreen=function(){return this.webrtc.localScreens&&this.webrtc.localScreens[0]};b.prototype.stopScreenShare=function(){this.connection.emit("unshareScreen");var a=document.getElementById("localScreen"),b=this.getRemoteVideoContainer();this.config.autoRemoveVideos&&b&&a&&b.removeChild(a);a&&this.emit("videoRemoved",a);this.getLocalScreen()&&this.webrtc.stopScreenShare();this.webrtc.peers.forEach(function(a){a.broadcaster&&
a.end()})};b.prototype.testReadiness=function(){this.sessionReady&&(this.config.media.video||this.config.media.audio?0<this.webrtc.localStreams.length&&this.emit("readyToCall",this.connection.getSessionid()):this.emit("readyToCall",this.connection.getSessionid()))};b.prototype.createRoom=function(a,b){this.roomName=a;this.connection.emit("create",q.room,b)};b.prototype.sendFile=function(){if(!k.dataChannel)return this.emit("error",Error("DataChannelNotSupported"))};e.exports=b},{"./socketioconnection":69,
"./webrtc":70,attachmediastream:3,mockconsole:37,webrtcsupport:64,wildemitter:65}],69:[function(a,e,d){function b(a){this.connection=c.connect(a.url,a.socketio)}var c=a("socket.io-client");b.prototype.on=function(a,b){this.connection.on(a,b)};b.prototype.emit=function(){this.connection.emit.apply(this.connection,arguments)};b.prototype.getSessionid=function(){return this.connection.id};b.prototype.disconnect=function(){return this.connection.disconnect()};e.exports=b},{"socket.io-client":50}],70:[function(a,
e,d){function b(a){var b=this,d=a||{};this.config={debug:!1,peerConnectionConfig:{iceServers:[{urls:"stun:stun.l.google.com:19302"}]},peerConnectionConstraints:{optional:[]},receiveMedia:{offerToReceiveAudio:1,offerToReceiveVideo:1},enableDataChannels:!0};var e;a=a.debug?a.logger||console:a.logger||f;this.logger=a;for(e in d)d.hasOwnProperty(e)&&(this.config[e]=d[e]);c.support||this.logger.error("Your browser doesn't seem to support WebRTC");this.peers=[];k.call(this,this.config);this.on("speaking",
function(){b.hardMuted||b.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"speaking"})))})});this.on("stoppedSpeaking",function(){b.hardMuted||b.peers.forEach(function(a){a.enableDataChannels&&(a=a.getDataChannel("hark"),"open"==a.readyState&&a.send(JSON.stringify({type:"stoppedSpeaking"})))})});this.on("volumeChange",function(a,d){b.hardMuted||b.peers.forEach(function(b){b.enableDataChannels&&(b=b.getDataChannel("hark"),
"open"==b.readyState&&b.send(JSON.stringify({type:"volume",volume:a})))})});if(this.config.debug)this.on("*",function(a,d,e){(b.config.logger===f?console:b.logger).log("event:",a,d,e)})}d=a("util");var c=a("webrtcsupport"),f=a("mockconsole"),k=a("localmedia"),l=a("./peer");d.inherits(b,k);b.prototype.createPeer=function(a){a.parent=this;a=new l(a);this.peers.push(a);return a};b.prototype.removePeers=function(a,b){this.getPeers(a,b).forEach(function(a){a.end()})};b.prototype.getPeers=function(a,b){return this.peers.filter(function(d){return(!a||
d.id===a)&&(!b||d.type===b)})};b.prototype.sendToAll=function(a,b){this.peers.forEach(function(d){d.send(a,b)})};b.prototype.sendDirectlyToAll=function(a,b,d){this.peers.forEach(function(e){e.enableDataChannels&&e.sendDirectly(a,b,d)})};e.exports=b},{"./peer":67,localmedia:35,mockconsole:37,util:63,webrtcsupport:64}]},{},[68])(68)})},Wc,cc,dc=NaN,M=function(g,a,e){void 0===localStorage[g]&&(localStorage[g]=a);e&&(k(e).value=localStorage[g])};M("name","Guest"+~~(1E3*Math.random()));M("color","#0000bd");
var q={name:localStorage.name,color:localStorage.color},Ab=function(){};console.log("%c nehhon %c POWER ","background: #00ffd4; color: #000; font-size:20px","background: #000; color: #00ffd4; font-size:20px");console.log("%c webmaster@nehhon.com ","background: #00ffd4; color: #000; font-size:20px");console.log("%c @nehhon ","background: #000; color: #00ffd4; font-size:20px");var X=-1<navigator.userAgent.toLowerCase().indexOf(" electron/"),k=function(g){return document.getElementById(g)};X&&(Wc=location.hash.substr(1,
location.hash.length));"NHalt"==location.hash.substr(1,location.hash.length)&&(location.hash="");void 0===localStorage.fullscreen&&(localStorage.fullscreen=!0);M("favMusic","originalMusic");M("musicRange",75);M("soundRange",100);M("goldRes",5E3);M("foodRes",5E3);M("stoneRes",5E3);M("woodRes",5E3);M("nplayed",0);M("infinity","true");M("mapx",256);M("terrain",0);M("visibility",0);M("peons",5);M("towers",5);M("freePop",100);M("maxPop",200);M("zoomMult",70);M("scrollSpeed",50);M("menuOpacity",72);M("nightcycle",
!0);M("terrainRND",0);M("visits",0);M("AIlevel",100);M("AIagressivity",100);M("scale",100);M("shadows",!0);M("fog",0);M("deathsounds",!0);localStorage.visits++;console.log=Ab;console.error=Ab;console.warn=Ab;console.info=Ab;var ye=window[atob("bG9jYXRpb24=")];"dHphLnJlZA=="===btoa(ye[atob("aG9zdG5hbWU=")])||X||(ye[atob("aHJlZg==")]=atob("aHR0cHM6Ly90emEucmVk"));var Xc=0;window.addEventListener("error",function(g,a,e){x(g);g=g.error&&g.error.stack?g.error.message+"-"+g.error.stack:g.lineno+":"+g.colno+
" "+g.message;if(f){var d=f.getExtension("WEBGL_debug_renderer_info"),b=f.getParameter(d.UNMASKED_VENDOR_WEBGL);d=f.getParameter(d.UNMASKED_RENDERER_WEBGL)}g+="\nvendor:"+b+"\nrenderer:"+d+"\nRAM:"+navigator.deviceMemory+"\nplataform:"+navigator.platform+"\nnavigator:"+(q.navigator||"Chrome")+"\nversion:"+q.version+"\nprocessors:"+navigator.hardwareConcurrency+"\nerrnum:"+Xc+"\nlang:"+q.lang+"\ndate:"+(new Date).toString()+"\nplayed:"+ze(v.now&&v.now()||0)+"\nonline:"+!!v.online+"\ndesk:"+X+"\n-----------------------------------------------\n-------------------------\n----------\n";
10>Xc&&(Xc++,fetch(atob("aHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9hcGkvd2ViaG9va3MvNjcwNjc1NDEwNzkwNjQ1NzYxL3p4V0hhSlFoWDZtQW9HRUZ2VnVEQ2MzZXoza2F2cjJHaGFNTExvdHB6cXp5b0JaaWFRNFJSYU9rTjFZU2xBNHRtLW5f"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"error",content:g})}));Ba('<span style="font-size:15px">'+g.substr(0,550)+"</span>","Error")});var ca=function(g){g&&g.parentNode&&g.parentNode.removeChild(g)},F=function(g,a,e,d){g=document.createElement(g);a.appendChild(g);
e&&(g.innerHTML=e);d&&(g.style.cssText=d);return g},ec=function(g,a){k("notifybar")&&ca(k("notifybar"));F("div",document.body,g,a&&"color:"+a||"").id="notifybar";setTimeout(ca,5E3,k("notifybar"))},gg=location;(function(){var g=!!window.opr||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),a="undefined"!==typeof InstallTrigger,e=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),d=!!document.documentMode,b=!d&&!!window.StyleMedia,c=!!window.chrome&&!!window.chrome.webstore,
f;g?f="Opera":a?f="Firefox":e?f="Safari":d?f="IE":b?f="Edge":c&&(f="Chrome");q.navLang=localStorage.language||navigator.language||navigator.userLanguage;g=q.navLang.substr(0,2);"es"==g?a=["Tzared","Juego de estrategia en tiempo real para navegadores web, juega solo o con amigos","tzared,jugar,multijugador,juego,online,navegador web,tzar"]:"it"==g?a=["Tzared","Gioco di strategia in tempo reale per browser web, giocare da soli o con gli amici","tzared,giocare,multigiocatore,gioco,online,navigatore,tzar,web"]:
"pl"==g?a=["Tzared","Gra strategiczna w czasie rzeczywistym dla przegl\u0105darek internetowych, bawi\u0107 si\u0119 samotnie lub z przyjaci\u00f3\u0142mi","tzared,gra,multiplayer,online,tzar,przegl\u0105darka internetowa"]:"ru"==g?a=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0434\u043b\u044f \u0432\u0435\u0431-\u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043e\u0432, \u0438\u0433\u0440\u0430\u0442\u044c \u0432 \u043e\u0434\u0438\u043d\u043e\u0447\u043a\u0443 \u0438\u043b\u0438 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u044c\u0442\u0438\u043f\u043b\u0435\u0435\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u0435\u0440,\u043e\u0433\u043d\u0451\u043c \u0438 \u043c\u0435\u0447\u043e\u043c"]:"pt"==g?a=["Tzared","Jogo de estrat\u00e9gia em tempo real para navegadores da web, jogar sozinho ou com amigos","tzared,jogar,multiplayer,jogo,online,navegador web,tzar"]:"bg"==g?a=["\u0426\u0430\u0440\u0435\u0434","\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0447\u0435\u0441\u043a\u0430 \u0438\u0433\u0440\u0430 \u0432 \u0440\u0435\u0430\u043b\u043d\u043e \u0432\u0440\u0435\u043c\u0435 \u0437\u0430 \u0443\u0435\u0431 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0438, \u0438\u0433\u0440\u0430\u0439\u0442\u0435 \u0441\u0430\u043c\u0438 \u0438\u043b\u0438 \u0441 \u043f\u0440\u0438\u044f\u0442\u0435\u043b\u0438",
"\u0446\u0430\u0440\u0435\u0434,\u0438\u0433\u0440\u0430,\u043c\u0443\u043b\u0442\u0438\u043f\u043b\u0435\u0439\u044a\u0440,\u043e\u043d\u043b\u0430\u0439\u043d,\u0431\u0440\u0430\u0443\u0437\u044a\u0440"]:"de"==g?a=["Tzared","Echtzeit-Strategiespiel f\u00fcr Webbrowser, alleine oder mit Freunden spielen","tzared,multiplayer,spiel,online,Webbrowser,tzar"]:"cz"==g?a=["Tzared","Strategick\u00e1 hra v re\u00e1ln\u00e9m \u010dase pro webov\u00e9 prohl\u00ed\u017ee\u010de, hr\u00e1t sama nebo s p\u0159\u00e1teli",
"tzared,play,multiplayer,hra,online,browser,tzar,web"]:"se"==g?a=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"]:(a=["Tzared","Real-time strategy game for web browsers, play alone or with friends","tzared,play,multiplayer,game,online,browser,tzar,web"],g="en");document.getElementsByTagName("html")[0].lang=g;document.title=a[0];q.title=a[0];document.getElementsByTagName("meta").description=a[1];document.getElementsByTagName("meta").keywords=
a[2];a=new Date;a=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());q.versionInt=366;q.version="v"+q.versionInt/10;q.versionDate=a-1586699863177;localStorage.version!==q.version&&(localStorage.version=q.version,ec("Updated to "+q.version));k("info").innerHTML="Work in progress - Beta "+q.version+" - Updated "+~~(q.versionDate/864E5)+" days ago"+(Wc&&" - app version "+Wc||"");q.lang="en es it pt ru pl bg de cz".split(" ").indexOf(g);
0>q.lang&&(q.lang=0);q.langstr=g;q.team=0;q.race=0;q.navigator=f;q.mx=151;q.onlineID=null;q.temperature=0;q.cdn="nehhon/"})();var m=function(g){return dc[g]||""},Zc=function(g){g--;var a=new XMLHttpRequest;a.open("GET",q.cdn+q.langstr+".nhl",!0);a.onload=function(){performance.now();dc=a.response.split("\n");hg();Yc()};a.send()},Ae=0,Yc=function(){Ae++;3==Ae&&be()},hg=function(){Z=[m(124).split("|")[0],m(125).split("|")[0],m(126).split("|")[0],m(127).toLocaleUpperCase()];for(var g=["mult0","<span>"+
m(112).split("|")[0]+"</span>","rnd0","<span>"+m(128).split("| ")[0]+"</span>","load0","<span>"+m(122).split("| ")[1]+"</span>","editor0","<span>"+m(123)+"</span>","settings0","<span>"+m(47)+"</span>","multSection",m(112).split("|")[0],"offlineSection",m(128).split("|")[0],"returnmenu",m(130)],a=0,e=g.length;a<e;a+=2)k(g[a])&&(k(g[a]).innerHTML=g[a+1]);F("ul",k("index"),"<li id=about>"+m(129)+"</li><li id=discord></li><li id=help>"+m(132)+"</li>"+(!X&&"<li id=tzdesk><img src='nehhon/appIcon.svg' /> Tzared App</li>"||
"")+"<li id=chlog>Changelog</li>").id="topLinks";k("about").onclick=function(){location.hash="About"};k("discord").onclick=function(){window.open("https://discord.gg/ndxJHxT","_blank")};k("help").onclick=function(){location.hash="#Guide"};k("chlog").onclick=function(){location.hash="#Changelog"};X||(k("tzdesk").onclick=function(){location.hash="#TzaredDesk"})};Zc(q.lang);Zc.translated=!0;var x=console.log,ig=function(){N("alert");Y()},Ba=function(g,a,e,d){var b=k("alert");b||(bb("alert"),b=k("alert"),
x(d),b.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var c=k("alerttitle"),f=k("alerttext");k("alertok").onclick=ig;b.style.display="block";c.innerHTML=a||dc&&m(133)||"Warning";k("alertok").innerHTML=d||dc&&m(134)||"Ok";g&&(f.innerHTML=g);e?k("alertok").style.display="none":k("alertok").style.display="block";da()},na={size:512,
load:0,xtra:[],common:1,xtraRes:[]},$c=function(g){k("loadingtext").innerHTML=m(135)+" "+g+"%"};na.check=function(){na.load++;if(na.load>=na.images){if(Pa.updating)return Pa.updating();Be();Ia.check()}};var Ja=function(g,a){this.address=g;this.size=a};Ja.prototype.viewU8=function(){return fc(this.address,this.size)};Ja.prototype.viewU32=function(){return new Uint32Array(oa.buffer,this.address,this.size)};Ja.prototype.viewF32=function(){return ad(this.address,this.size)};Ja.prototype.viewI32=function(){return new Int32Array(oa.buffer,
this.address,this.size)};var Pa=function(g){Pa.updating=g;k("loadingtext").innerHTML=m(135);na.images=3;g&&na.images--;na.load=0;n.downloadGra("true"==localStorage.shadows);$c.progress=0;$c.total=0;Date.now();na.check();k("loadingtext").innerHTML=m(135);Pa.intvFunc()};Pa.intvFunc=function(){n.txtLoad()==na.images-na.load?(na.load++,na.check()):setTimeout(Pa.intvFunc,15)};var bd=[{name:"Grass"},{name:"Trenkorian"},{name:"Desert"},{name:"Snow"},{name:"Summer"},{name:"Rareland"},{name:"Jungle"}],Ce=
function(){if(!X){var g=localStorage.version,a=localStorage.name,e=localStorage.color,d=localStorage.lastVersion;localStorage.clear();localStorage.name=a;localStorage.color=e;localStorage.version=g;localStorage.lastVersion=d;localStorage.update=1;if(window.caches){var b=window.caches;b.keys().then(function(a){a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())b.delete(d.value)})}location.reload(!0)}};localStorage.lastVersion!=q.versionInt&&(localStorage.lastVersion=q.versionInt,Ce());
(function(){if(1!=localStorage.update||X)fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(a){return a.text().then(function(a){x(a);a!=q.versionInt&&Ce()})});else{delete localStorage.update;var g=indexedDB.deleteDatabase("emscripten_filesystem");g.onsuccess=function(a){x(a)};g=indexedDB.deleteDatabase("nh2019");g.onsuccess=function(a){x(a)}}})();(function(){!X&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("sworker.js").then(function(g){},function(g){x(g)}),navigator.serviceWorker.oncontrollerchange=
function(){location.reload(!0)})})();var Ka,P,xa,Wb={},cd="ts1.mp3 ts2.mp3 ts3.mp3 ts4.mp3 ts5.mp3 ts6.mp3 ts7.mp3 ts8.mp3 ts9.mp3 ts10.mp3 sr1.mp3 sr2.mp3 sr3.mp3 sr4.mp3 sr5.mp3 sr6.mp3 sr7.mp3 sr8.mp3 sr9.mp3 sr10.mp3 o1.mp3 o2.mp3 o3.mp3 o4.mp3 o5.mp3 o6.mp3 o7.mp3 o8.mp3 o9.mp3 o10.mp3 INTRO.mp3 OUTRO.mp3 WIN1.mp3 WIN2.mp3 ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.mp3 CAMEL2.mp3 CARPETCMD.mp3 CATAPULT.mp3 CBEAR1.mp3 CBEAR2.mp3 CBEAR3.mp3 CBEAR4.mp3 COW1.mp3 COW2.mp3 COW3.mp3 COW4.mp3 DRAGON1.mp3 DRAGON2.mp3 FLY1.mp3 FLY2.mp3 FOOT1.mp3 FOOT2.mp3 FOOT3.mp3 FOOT4.mp3 FOOT5.mp3 FOOT6.mp3 FOOT7.mp3 FOOT8.mp3 GHOST1CMD.mp3 GHOST2CMD.mp3 GHOST3CMD.mp3 GOLEMCMD.mp3 H%20CMD%201.mp3 H%20CMD%202.mp3 H%20CMD%203.mp3 H%20CMD%204.mp3 HEAVY%20CATAPULT.mp3 INF%20CMD%201.mp3 INF%20CMD%202.mp3 INF%20CMD%203.mp3 INF%20CMD%204.mp3 INF%20CMD%205.mp3 MESSIAHCMD.mp3 ORC%20CMD%201.mp3 ORC%20CMD%202.mp3 ORC%20CMD%203.mp3 ORC%20CMD%204.mp3 ORC%20CMD%205.mp3 ORC%20CMD%206.mp3 SHIP%20CMD%201.mp3 SHIP%20CMD%202.mp3 SKELETON1.mp3 SKELETON2.mp3 SHIP%20SELECT.mp3 E_BARRACK1.mp3 E_BLACKSMITH1.mp3 FIRE1.mp3 FIRE2.mp3 FIRE3.mp3 FIRE4.mp3 FIRE5.mp3 ROCKET.mp3 pepe.mp3 F.mp3".split(" "),
dd,Bb,Cb,ed=function(){if(!Ka){u.prototype.loadBuffer=function(a,b){var d=this;jg(q.cdn+a,function(e){d.context.decodeAudioData(e).then(function(d){d&&V(d,a,b)})})};for(var g=0,a=cd.length;g<a;g++){var e=cd[g];Wb[e.split(".")[0].toLowerCase()]=e}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,Ka=new AudioContext,Bb=Ka.createGain(),Cb=Ka.createGain(),dd=new u(Ka,void 0,V),Bb.gain.value=parseInt(localStorage.musicRange)/100,Cb.gain.value=parseInt(localStorage.soundRange)/
100,Bb.connect(Ka.destination),Cb.connect(Ka.destination));P=function(){if(!v.editor){k("musicSelect")&&(localStorage.favMusic=k("musicSelect").mversion.value);var a=P.list[localStorage.favMusic];P.id++;if(a){if(1==P.id)for(var b=a.length-1;0<b;b--){var e=Math.floor(Math.random()*(b+1)),g=$jscomp.makeIterator([a[e],a[b]]);a[b]=g.next().value;a[e]=g.next().value}xa(a[P.id%a.length],0,0,void 0,1,0,P.id)}}};P.reset=function(){P.stop();P()};P.stop=function(){P.active&&(P.active.stop(),clearTimeout(P.intv))};
P.id=0;P.list={originalMusic1:"o1 o2 o3 o4 o5 o6 o7 o8 o9 o10 outro".split(" "),originalMusic:"ts1 ts2 ts3 ts4 ts5 ts6 ts7 ts8 ts9 ts10".split(" "),sharpRain:"sr1 sr2 sr3 sr4 sr5 sr6 sr7 sr8 sr9 sr10".split(" ")};xa=function(a,b,e,g,c,f,k){if(dd){"string"!==typeof a&&(a=cd[a].split(".")[0].toLowerCase());var d=a;if((a=Wb[a])&&"loading"!==a&&!v.canceled){var h=-ba+(window.innerWidth-q.mx)/2,l=-ea+window.innerHeight/2;if(a.duration){if(v.started)if(64<v.now()-a.lastPlayed||!a.lastPlayed)a.lastPlayed=
v.now();else return;if(!(!c&&"attack"!=d&&f&&600<Date.now()-f)){if(b){if(b=(-h/32+b)/7,e=(-l/32+e)/7,l=O,b*b+e*e>Math.pow(64,2))return!1}else l=e=b=0;void 0!==g&&g!==q.kingdom||v.mute||(g=Ka.createBufferSource(),g.buffer=a,c?(g.connect(Bb),P.active=g,P.intv=setTimeout(P,Math.floor(1E3*a.duration)+1E3)):(a=Ka.createPanner(),a.panningModel="HRTF",a.setPosition(b,e,l),a.refDistance=1,a.distanceModel="inverse",g.connect(a),a.connect(Cb)),g.start(0))}}else Wb[d]="loading",c={x:b,y:e,k:g,music:c,date:Date.now(),
mid:k},dd.loadBuffer(a,c)}}}}},cb,De=function(){return Date.now()-Db+25*n.gcycle()},db=function(g){if(!(g&&v.online||db.bySystem&&g))if(0===v.paused){v.paused=1;void 0!=cb&&clearInterval(cb);var a=v.now();v.pausedTime+=Date.now();g?Ba("",m(51),0,m(15)):db.bySystem=1;v.now=function(){return a}}else v.pausedTime-=Date.now(),v.paused=0,db.bySystem=0,g&&k("alert")&&N("alert"),cb=setInterval(ta,ta.speed),v.now=De};db.bySystem=0;db.fast=!0;var ze=function(g){g/=1E3;var a=~~(g/60)%60,e=~~(g/3600);g=~~(g%
60);1===(g+"").length&&(g="0"+g);0!=e?(e+=":",10>a&&(a="0"+a)):e="";return e+a+":"+g},Db=0,Ee=0,kg=function(){var g=this.value/100;x(g);ta.speed=25/(4*g+1);clearInterval(cb);cb=setInterval(ta,ta.speed)},ta=function(){v.cycle=n.gcycle();Db&&(Ee+=Date.now()-Db-ta.speed);Db=Date.now();var g=Date.now();n.movtablexe();v.cycle=n.gcycle();0===v.cycle%40&&Fe();fd+=Date.now()-g;0!==v.cycle%40||R||(k("topinfo").innerHTML="<span>CPU:"+(fd/10).toFixed(2)+"%</span> <span>"+~~(gd/hd+.5)+"FPS</span> <span>"+ze(v.now())+
"</span>",gd=hd=fd=0);!fa.running&&Ee>=ta.speed&&ta()};ta.speed=25;var fd=0,hd=0,gd=0,Ge=-1,gc,hc,jb,ic,qa,id,kb,ua,jd,kd,He,Ie,Je,Ke,Le,Me,Eb,lb=function(){k("mgitem").style.backgroundPositionY=-48*n.mwicon()+"px";k("mgamount").innerHTML=n.amount()},jc=function(g){n.EDbuild(g)},ld=function(g,a){var e=g.nextMenu,d=document.createElement("div");d.className="contD";for(var b=0;b<e.length;b++){var c=document.createElement("button"),f=e[b];f.parent=g;c.innerHTML=f.name;c.onclick=ha.adminClick;c.Dorigin=
f;a.appendChild(c);f.nextMenu&&(f.container=d)}a.appendChild(d)};Element.prototype.hide=function(){this.style.display="none"};Element.prototype.show=function(){this.style.display="block"};var ha=function(g){var a=k(g.parent);ld(g,a,g)};ha.update=function(g,a){g.nextMenu=a;g.nextDiv.innerHTML="";ld(g,g.nextDiv)};ha.adminClick=function(){var g=this.Dorigin,a=g.parent;if(g.onclick)g.onclick(g.param1);ha.lastXtraShow&&a&&a.xtraShow!=ha.lastXtraShow&&Fa(ha.lastXtraShow);g.xtraShow&&(ae(g.xtraShow),ha.lastXtraShow=
g.xtraShow);g.lastClick&&g.lastClick.Dorigin&&g.lastClick.Dorigin.xtraShow&&(ae(g.lastClick.Dorigin.xtraShow),ha.lastXtraShow=g.lastClick.Dorigin.xtraShow);if(g.nextMenu){a.lastClick&&(a.lastClick.className="");a.lastClick=this;this.className="clickD";g.nextDiv||(a=document.createElement("div"),g.container.appendChild(a),ld(g,a),g.nextDiv=a);a=g.container.children;for(var e=0;e<a.length;a[e++].hide());g.nextDiv.show();g.nextDiv.getElementsByTagName("button")}ha.last=g};var Fb=function(){var g=n.myk();
k("selectKingdom").innerHTML="";for(var a=0,e=n.nkingdom();a<e;a++){var d=a?ja(ia(n.kname(a),20)):m(25),b=md(n.krgb(a));k("selectKingdom").innerHTML+='<option style="background:'+b+'" value="'+a+'" '+(a==g&&"selected"||"")+">"+d+"</option>"}k("selectKingdom").innerHTML+="<option value='"+(Math.pow(2,31)-1)+"'>"+m(24)+"</option>";k("selectKingdom").onchange(1)},lg=function(g){n.EDbrush0(g,!0)},nd=function(g){k("brushSize").value=g;k("brushSize").onchange()},eb=function(g,a){var e=" ("+eb.objs.length+
")";eb.objs.put({name:"water"==mg.arr[a]&&m(52)+e||m(53)+e,onclick:lg,param1:g})},Ne=function(g){eb.objs.length=0;n.EDgetTerrainInfo();return eb.objs},od=function(g,a){return g.name.localeCompare(a.name)},pd,Re=function(){k("content")||(F("div",qd).id="content");if(R){eb.objs=[];var g=function(a,d){for(var b=[],e=0,g=n.nfolen();e<g;e++){var c=n.unitSearchValid(a,d,e);c&&b.put({name:m(c).toUpperCase(),onclick:jc,param1:e,xtraShow:["brhSize","brhMargin"]})}b.sort(od);return b};k("content").innerHTML=
'<div id="mapeditorpanel">\n    <div id="mapeditorinfo">\n    </div>\n    </div>\n    <div id="minimap" style="box-shadow:0px 0px 20px #000;position:absolute;top:31px;left:4px"></div>\n    <div id="mapeditorinfotop">\n    <button id="menueditor">'+m(54)+'</button>\n    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>\n    <button style="display:none" id="rotatebutton"></button>\n    <button id="mapProps">'+m(55)+'</button>\n    <button style="display:none" id="mapRules"></button>\n    <div id="brhSize" style="display:none"><span>Brush size: </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>\n    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>\n    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>\n    <div id="EDrndtree" style="display:none"><button id="rndtrees">'+
m(56)+'</button></div>\n    <div id="EDrndresgs" style="display:none"><button id="rndres">'+m(56)+'</button></div>\n    <div id="EDterr" style="display:none"><span>'+m(28)+': </span><select id="EDtrrsel">'+rd(1)+'</select></div>\n    <div id="EDterrRND" style="display:none"><span>'+m(28)+': </span><select id="EDtrrRND"><option value="0">'+m(30)+'</option>\n    <option value="1">'+m(31)+'</option>\n    <option value="2">'+m(32)+'</option>\n    <option value="3">'+m(33)+'</option>\n    <option value="4">'+
m(34)+'</option>\n    <option value="5">'+m(35)+'</option></select> <button id="rndtrbutton">'+m(57)+'</button></div>\n    <div><span>Active kingdom: </span>\n    <select id="selectKingdom">\n    </select>\n    </div>\n    <div><button id="clearMap">'+m(58)+'</button></div>\n    <div><button id="castleRND">'+m(59)+'</button></div>\n    </div>\n    <div id="bigMap" style="display:none"></div>\n    <button id="playmapeditor">&#9654;</button>\n    ';k("menueditor").onclick=Oe;k("castleRND").onclick=
function(){n.fullRNDmap(0)};k("clearMap").onclick=function(){n.fullRNDmap(1)};k("rndtrees").onclick=n.rndforest;k("rndres").onclick=n.rndRes;k("playmapeditor").onclick=ng;k("brushDensity").onchange=function(){n.EDbrushchd(parseInt(k("brushDensity").value))};k("brushSize").onchange=function(){n.EDbrushchs(parseInt(k("brushSize").value))};k("brushMargin").onchange=function(){n.EDbrushMrg(parseInt(k("brushMargin").value))};k("rndtrbutton").onclick=function(){n.randomTerrain(parseInt(k("EDtrrRND").value)+
1);n.wtrcheck();ka.update=!0};k("brushDensity").onchange();k("brushSize").onchange();k("selectKingdom").onchange=function(){n.cmyk(parseInt(this.value));if(this.value!=Math.pow(2,31)-1){var a=n.krgb(parseInt(this.value)),d=a>>16&255,b=a>>8&255;a&=255}else a=b=d=0;this.style.background="rgba("+d+","+b+","+a+",0.6)"};k("EDtrrsel").onchange=function(){n.chterr(parseInt(this.value));k("EDtrrsel").innerHTML=m(60);Pa(function(){n.EDbrushstop();ka.update=!0;n.adpterr();ha.update(pd,Ne());k("EDtrrsel").innerHTML=
rd(1)})};k("mapProps").onclick=function(){da();if(!k("mapPropsWindow")){var a=bb("mapPropsWindow");a.className="fullwindow";var d=document.createElement("table");a.appendChild(d);d.style.marginBottom="40px";F("span",a,m(61)+": ");d=F("input",a);d.value=n.mapWidth();d.id="EDmapSize";d.type="number";d.min=0;d.onchange=0;d.style.width="130px";d.style.marginBottom="32px";var b=document.createElement("p");b.innerHTML=m(62);d=document.createElement("input");d.value=m(63);d.id="mapName";d.type="text";a.appendChild(b);
a.appendChild(d);b=document.createElement("p");b.innerHTML=m(64);d=document.createElement("textarea");d.type="text";d.value="";d.id="mapDescription";a.appendChild(b);a.appendChild(d);b=document.createElement("p");b.innerHTML=m(65);d=document.createElement("input");d.id="mapAuthor";d.value="";d.type="text";a.appendChild(b);a.appendChild(d);a.appendChild(document.createElement("p"));d=document.createElement("button");d.onclick=og;d.innerHTML=m(15);d.style.cssText="font-size:28px;margin-top:30px";a.appendChild(d)}S("mapPropsWindow");
sd()};pd={name:m(28),nextMenu:eb.objs,xtraShow:["brhSize","EDterr","EDterrRND"]};new ha({nextMenu:[{onclick:function(){return nd(1)},name:m(66).toUpperCase(),nextMenu:[{name:Z[0],nextMenu:g(0,0)},{name:Z[1],nextMenu:g(1,0)},{name:Z[2],nextMenu:g(2,0)},{name:Z[3],nextMenu:g(3,0).concat(g(3,4)).sort(od)}],xtraShow:["brhSize","brhMargin"]},{onclick:function(){return nd(1)},xtraShow:["brhSize","brhMargin"],name:m(67).toUpperCase(),nextMenu:[{name:Z[0],nextMenu:g(0,1)},{name:Z[1],nextMenu:g(1,1)},{name:Z[2],
nextMenu:g(2,1)},{name:Z[3],nextMenu:g(3,1)}]},{name:m(68).toUpperCase(),nextMenu:g(3,2)},{onclick:function(){return nd(8)},name:m(28).toUpperCase(),nextMenu:[pd,{name:m(69),nextMenu:[{name:m(69),onclick:n.EDbrush0,param1:7}],xtraShow:["brhSize","brhDnst","EDrndtree"]},{name:m(70),nextMenu:[{name:m(71),onclick:jc,param1:21},{name:m(72),onclick:jc,param1:22},{name:m(164),onclick:jc,param1:20}],xtraShow:["EDrndresgs","brhSize","brhMargin"]}]}],parent:"mapeditorinfo"})}else{k("content").innerHTML='<ul id="msgs1"></ul>\n    <div id="playersinfo"></div>\n    <div id="resources" style="display:block">\n    <div id="goldr"></div>\n    <div id="woodr"></div>\n    <div id="foodr"></div>\n    <div id="stoner"></div>\n    <div id="popr"></div>\n    <div id="resourcesbefore"></div>\n    <div id="gold"></div>\n    <div id="wood"></div>\n    <div id="food"></div>\n    <div id="stone"></div>\n    <div id="pop"></div>\n    <div id="temperature"></div>\n    </div>\n    <div id="enterwindow" class="displaynone">\n    <h2 id="sendMessageH2">'+
m(73)+'</h2>\n    <input id="msginputGame" />\n    </div>\n    \n    <div id="msgButton"></div>\n    <div id="topinfo"></div>\n    <div id="bottominfo"></div>\n    \n    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>\n    <div style="display:none" id="bigMap"></div>\n    <div id="menu" style="display:block">\n    <div id="menubefore"></div>\n    <div id="menuafter"></div>\n    <button id="gameMenu">'+m(54)+'</button>\n\n    <div id="daynighticon"></div>\n    <div id="icons20">\n    <div id="attackmenu" style="display:none"></div>\n    <div id="defencemenu" style="display:none"></div>\n    <div id="levelmenu" style="display:none"></div>\n    <div id="manamenu" style="display:none"></div>\n    <div id="manamenu1" style="display:none"></div>\n    </div>\n    <div id="progressvalue"></div>\n    <div id="kingdom"></div>\n    <div id="unitname" contenteditable="true"></div>\n    <progress id="progressone" style="display:none"></progress>\n    <progress id="progressmana" style="display:none" max="100"></progress>\n    <input id="unitSpeed" min="1" max="100" type="range"/>\n    <div id="navigation">\n    <button id="aleft"></button>\n    <button id="stock"></button>\n    <button id="aright"></button>\n    </div>\n    <div id="orders">\n    <button id="order1"><progress class="loadingunit" style="display:none"></progress></button>\n    <button id="order2"></button>\n    <button id="order3"></button>\n    <button id="order4"></button>\n    <button id="order5"></button>\n    <button id="order6"></button>\n    <button id="order7"></button>\n    <button id="order8"></button>\n    </div>\n    <div id="magicworkshopmenu" style="display:none">\n    <button id="mgbook"></button>\n    <button id="mgpotion"></button>\n    <button id="mgsword"></button>\n    <button id="mgamount"></button>\n    <button id="mgitem"></button>\n    <button id="mgdecline"></button>\n    <button id="mgaccept"></button>\n    <div id="mgbak"></div>\n    </div>\n    </div>';
Eb=k("msgs1");Pe();l=8;r=k("aleft");y=k("aright");E=k("stock");r.onclick=function(){n.changePage(-1)};k("minimap");He=k("unitSpeed");Ie=k("gold");Je=k("wood");Ke=k("food");Le=k("stone");Me=k("daynighticon");y.onclick=function(){n.changePage(1)};gc=k("attackmenu");hc=k("defencemenu");jb=k("levelmenu");ic=k("kingdom");qa=k("progressone");id=k("unitname");kb=k("progressvalue");k("msgButton").onclick=Qe;k("mgbook").onclick=function(){n.mwSelect(0);lb()};k("mgpotion").onclick=function(){n.mwSelect(1);
lb()};k("mgsword").onclick=function(){n.mwSelect(2);lb()};k("mgdecline").onclick=function(){k("magicworkshopmenu").style.display="none"};k("mgitem").onmousedown=function(a){var d=1;a.button&&(d*=-1);n.mwMore(d);lb()};k("mgaccept").onclick=function(){k("magicworkshopmenu").style.display="none";n.createItems()};k("mgamount").onmousedown=function(a){var d=1;a.button&&(d=-1);n.mwamount(d);lb()};ua=[k("order1"),k("order2"),k("order3"),k("order4"),k("order5"),k("order6"),k("order7"),k("order8")];jd=k("bottominfo");
g=0;for(var a=ua.length;g<a;g++)ua[g].addEventListener("mousedown",pg),ua[g].addEventListener("mouseup",qg),ua[g].ordid=g,ua[g].addEventListener("mouseenter",rg),ua[g].addEventListener("mouseout",sg);k("stock").addEventListener("click",function(a){n.checkStock()});kd={fish:{background:"0px -220px"},mana:{background:"0px -120px",progress:k("progressmana")},2:{background:"0px -240px"},milk:{background:"0px -280px"},0:{background:"0px -260px"},3:{background:"0px -320px"},1:{background:"0px -340px"}};
k("gameMenu").onclick=Oe}k("minimap").addEventListener("mousedown",function(a){var d=n.mapWidth(),b=a.pageX-4,e=a.pageY-31;x(d,b,e);0===a.button?(document.addEventListener("mouseup",function p(a){kc=!1;document.removeEventListener("mouseup",p);document.removeEventListener("mousemove",lc)}),kc=!0,lc(a),document.addEventListener("mousemove",lc)):2===a.button&&(d=n.mapWidth(),b=32*~~(d*(a.pageX-4)/Qa),e=32*~~(d*(a.pageY-31)/Ca),x(b,e),n.mouseUp(b,e,2,!0,a.shiftKey))})},mc=function(g,a,e,d,b,c,f,l,p,
n,q,r,u,v){u=c?mc.last:k("guideTable").getElementsByTagName("tr")[u].getElementsByTagName("td")[r];var h="";c||(h+="<span>"+Z[r]+"</span>");h+="<div "+(c&&"class='spchild'"||"")+'>\n    <div class="prevIcon" style="background-position-y:'+48*b+'px"></div>\n    <ul>\n    <li class="guiTitle">'+m(g)+"</li>\n    "+(v&&'<li class="desc">'+m(v)+"</li>"||"")+"\n    <li><span>"+(m(74)+":</span> ")+(l&&l+"<img src='nehhon/gold.gif'>"||"")+" "+(p&&p+"<img src='nehhon/wood.gif'>"||"")+" "+(n&&n+"<img src='nehhon/food.gif'>"||
"")+"  "+(q&&q+"<img src='nehhon/stone.gif'>"||"")+" </li>\n    ";f&&1!=f||(h+="\n    <li><span>"+m(4)+":</span> "+a+"</li>");f||(h+="\n    <li><span>"+m(6)+":</span> "+e+"</li>\n    <li><span>"+m(7)+":</span> "+d+"</li>");g=F("div",u,h+"</ul>\n    </div>\n    ");c||(mc.last=g)},tg=function(g){da();var a=F("button",document.body);a.className="closeButton2";a.onclick=function(){ca(g);ca(a);Y();location.hash=""}},Se=function(){if(!k("guide")){var g=bb("guide");k("guide").innerHTML="<table style='border-spacing: 37px;'><tbody id='guideTable'></tbody></table>";
for(var a="",e=0;15>e;e++)a+="<tr><td></td><td></td><td></td></tr>";k("guideTable").innerHTML=a;n.setupGuide();tg(g)}},ug=function(){fetch("nehhon/changes.txt").then(function(g){return g.text()}).then(function(g){da();g=g.split("##");for(var a="<p style='font-size:29px;margin-top:0px;border-bottom:1px solid;'>What's new</p>",e=1;e<g.length;e++){var d=g[e].split("\n");a+="v"+d[0]/10;a+="<ul>";for(var b=1;b<d.length-1;b++)a+="<li>"+d[b]+"</li>";a+="</ul>"}k("changelog")?S("changelog"):(g=F("div",document.body,
a),g.addCloseIcon(),g.id="changelog",g.className="fullwindow")})},vg=function(){da();if(k("desk"))k("desk").style.display="flex";else{var g=F("div",document.body,'<div><img style="filter:drop-shadow(0px 0px 43px #0ff)" src=desk/windows.svg /><br><a href="desk/Tzared.zip">Windows installer</a><p><a href="desk/TzaredPortable.zip">Windows portable</a></div>\n<div><img style="filter:drop-shadow(0px 0px 43px #fff)" src=desk/mac.svg /><br><a href="desk/iTzared.zip">Mac OS</a></div>\n<div><img style="filter:drop-shadow(0px 0px 43px #ff0)" src=desk/linux.png /><br><a href="desk/Tzared.AppImage">Linux</a></div>\n<div><img style="filter:drop-shadow(0px 0px 43px #0f0)" src=desk/android.svg /><br>Android coming soon</div>\n',
"display: flex;\nflex-wrap: wrap;\nmargin: auto;\njustify-content: center;");g.addCloseIcon();g.id="desk";g.className="fullwindow"}},rg=function(){n.mouseEnter(this.ordid)},sg=function(){n.mouseOut(this.ordid);jd.innerHTML=""},qg=function(g){n.executeOrder(this.ordid,g.button);this.style.transform="translate(0px,0px)"},pg=function(){this.style.transform="translate(2px,2px)"},kc,Te=function(){history.pushState("",document.title,window.location.pathname)},Ra=function(){Y();this.parentNode&&(this.parentNode.style.display=
"none");v.online=0;"#Multiplayer"==location.hash&&(A.wb.close(),A.wb=null);location.hash="";setTimeout(Te,200)},ra=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1],Fe=function(){if(R||"false"===localStorage.nightcycle)e=new Float32Array([1,
1,1,1]);else{var g=(.025*v.cycle/v.daylength*24+v.initialhour)%24,a=~~g;g-=a;Me.style.backgroundPosition="0 -"+36*a+"px";var e=new Float32Array([ra[4*a],ra[4*a+1],ra[4*a+2],ra[4*a+3]]);a=(a+1)%24;e[0]+=(-e[0]+ra[4*a])*g;e[1]+=(-e[1]+ra[4*a+1])*g;e[2]+=(-e[2]+ra[4*a+2])*g;e[3]+=(-e[3]+ra[4*a+3])*g}a=e;f.useProgram(I);f.uniform4fv(Ue,a);f.useProgram(G);f.uniform4fv(Ve,a)},ba=0,ea=0,fb=0,gb=0,mb=function(g,a){var e=window.innerWidth,d=window.innerHeight,b=n.mapWidth(),c=O*q.mx/32;g/=32;a/=32;var f=O*
e/32,k=O*d/32,l=e/32*L,m=d/32*L,r=g+.5*(l-f),u=a+.5*(m-k);l<b&&m<b&&(r<-c?g=.5*-(l-f)-c:r+f>b&&(g=b-f-(l-f)/2),0>u?a=.5*-(m-k):u+k>b&&(a=b-k-(m-k)/2),f>b&&(O=b/(e/32),x(O)),k>b&&(O=b/(d/32),x(O)));ba=32*-g;ea=32*-a;n.mouseMove(0,0,0)},lc=function(g){var a=n.mapWidth(),e=g.pageX-parseInt(k("minimap").style.left);g=g.pageY-parseInt(k("minimap").style.top);var d=f.canvas.height*Ca/(32*a);e=~~(.5+(e-f.canvas.width*Qa/(32*a)*.5)*a/Qa);g=~~(.5+(g-.5*d)*a/Ca);mb(32*e,32*g);0==kc&&document.removeEventListener("mousemove",
lc)},Qe=function(g){g&&!R&&("displaynone"==k("enterwindow").className?(k("enterwindow").className="displayblock",k("msginputGame").focus(),nb.blocked=13):(td(),k("enterwindow").className="displaynone",nb.blocked=null));!0===g&&n&&n.runKey(13,!0)},ud=0,vd=0,wd=0,xd=0,nb={37:function(g){xd=g;fb=xd+wd},40:function(g){ud=-g;gb=ud+vd},39:function(g){wd=-g;fb=xd+wd},38:function(g){vd=g;gb=ud+vd},27:function(g){},13:Qe,19:function(g){},48:function(g){g&&(O=1,We({deltaY:0}))},88:function(g){return yd=g},
219:function(g){g&&Xe(-1)},221:function(g){g&&Xe(1)},blocked:null};document.oncontextmenu=function(){return!1};var zd=function(){if(!R){N("magicworkshopmenu");gc.style.display="none";hc.style.display="none";jb.style.display="none";qa.style.display="none";k("manamenu").style.display="none";k("manamenu1").style.display="none";k("progressmana").style.display="none";id.innerHTML="";gc.innerHTML="";hc.innerHTML="";k("manamenu").innerHTML="";jb.innerHTML="";ic.innerHTML="";kb.innerHTML="";qa.value="";kb.maxLength=
"";He.style.display="none";for(var g=0;g<ua.length;ua[g++].innerHTML="");Ye()}};document.onkeydown=function(g){if(g.ctrlKey&&g.shiftKey)return!1;var a=!0;({116:1,115:1,123:1})[g.keyCode]&&(a=!1);return a};var wg=function(g){if(nb[g.keyCode])nb[g.keyCode](1);g.target!=k("msginputGame")&&n&&n.runKey(g.keyCode,!0)},xg=function(g){if(nb[g.keyCode])nb[g.keyCode](0);g.target!=k("msginputGame")&&n&&n.runKey(g.keyCode,!1)};window.addEventListener("blur",function(){n&&n.runKey&&n.runKey(16,!1)});var Ad,Bd,
Cd,Dd,Gb=!1,Hb=function(g,a){Hb.ilegal||(ba=Cd-(Ad-g)*O,ea=Dd-(Bd-a)*O,mb(-ba,-ea),nc())},Sa=function(g){g=Math.sqrt(Math.pow(g[0].screenX-g[1].screenX,2)+Math.pow(g[0].screenY-g[1].screenY,2));x(g);Sa.dist||(Sa.dist=g,Sa.valor=O,Hb.ilegal=!0);Ze(Sa.valor-(g-Sa.dist)/Sa.dist)},yg=function(g){var a=g.touches[0].screenX;g=g.touches[0].screenY;Cd=ba;Dd=ea;Ad=a;Bd=g},zg=function(g){if(2==g.touches.length)return Sa(g.touches);Hb(g.touches[0].screenX,g.touches[0].screenY)},Ag=function(g){Sa.dist=void 0;
x(g);0==g.touches.length&&(Hb.ilegal=!1)},Ed=function(g){return!("li"==g.target.localName||g.target==f.canvas||g.target==k("resources")||g.target==k("playersinfo")||g.target==k("msgs1")||"span"==g.target.localName||g.target==k("resourcesbefore"))},Bg=function(g){var a=window.innerWidth,e=window.innerHeight,d=g.pageX,b=g.pageY;if(!Ed(g)){if(Gb)return Hb(d,b);n.mouseMove(g.pageX,g.pageY,1)}if(screen.height-10<=e){if(1.2===Math.abs(fb)||0===fb)fb=1.2*((10>d)-(d>a-10));if(1.2===Math.abs(gb)||0===gb)gb=
1.2*((10>b)-(b>e-10))}},Cg=function(g){if(!Ed(g))if(g.altKey&&g.pageX>q.mx){Gb=!0;var a=g.pageX;g=g.pageY;Cd=ba;Dd=ea;Ad=a;Bd=g}else Gb=!1,n.mouseDown(g.pageX,g.pageY,g.button)},Dg=function(g){if(!Ed(g))if(Gb)Gb=!1;else return x(g),n.mouseUp(g.pageX,g.pageY,g.button,!1,g.shiftKey)},$e=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){$e||($e=!0,Fd())});var Eg=function(g){return g.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,
function(a){return"(LINK HIDDEN DUE TO SAFETY)"})},af=function(g,a,e){g=m(g);e&&(g=Ib(g,ja(ia(a,e))));k("msgs1").innerHTML+="<li>"+g+"</li>";ob()},ja=function(g){for(var a,e="",d=0;a=g[d++];)e+=String.fromCharCode(a);return e},nc=function(){};new Float32Array(8);var Gd,Hd,Id,Jd,bf,O=1;new Float32Array(12);var f,oc,ad=function(g,a){return new Float32Array(oa.buffer,g,a)},ia=function(g,a){return new Uint16Array(oa.buffer,g,a)},fc=function(g,a){return new Uint8Array(oa.buffer,g,a)},Ye=function(){if(!R){for(var g=
0,a=l;g<a;g++){var e=ua[g];e.className="blocked";e.style.background="none";e.innerHTML=""}y.className="blocked";r.className="blocked";E.className="blocked"}},Ve,G,I,Kd,Ue,cf,df,Ld,Md,pc,pb,Jb,Kb,qc,Nd,Od,ef,Mb=function(g,a){var e=4*bf,d=f.createBuffer();d.size=a;d.len=e;f.bindBuffer(f.ARRAY_BUFFER,d);f.enableVertexAttribArray(g);f.vertexAttribPointer(g,a,f.FLOAT,!1,0,0);f.bufferData(f.ARRAY_BUFFER,e*a,f.STATIC_DRAW);U?Lb.vertexAttribDivisorANGLE(g,1):f.vertexAttribDivisor(g,1);return d};Mb.jump=4E3;
var rc=function(g,a){var e=a+1E4;a*=4;e*=4;if(U)f.bindBuffer(f.ARRAY_BUFFER,g),f.bufferData(f.ARRAY_BUFFER,e*g.size,f.STATIC_DRAW),n.resetGLbuffer();else{var d=f.createBuffer();f.bindBuffer(f.COPY_READ_BUFFER,g);f.bindBuffer(f.ARRAY_BUFFER,d);f.bufferData(f.ARRAY_BUFFER,a*g.size,f.STATIC_DRAW);f.copyBufferSubData(f.COPY_READ_BUFFER,f.ARRAY_BUFFER,0,0,a*g.size);f.bindBuffer(f.COPY_READ_BUFFER,d);f.bindBuffer(f.ARRAY_BUFFER,g);f.bufferData(f.ARRAY_BUFFER,e*g.size,f.STATIC_DRAW);f.copyBufferSubData(f.COPY_READ_BUFFER,
f.ARRAY_BUFFER,0,0,a*g.size);f.bindBuffer(f.COPY_READ_BUFFER,null);f.deleteBuffer(d)}},sc=function(){var g=fc(n.getColorTexture(),4*(n.nkingdom()+16));f.activeTexture(f.TEXTURE4);var a=f.createTexture();f.bindTexture(f.TEXTURE_2D,a);if(U){for(var e=new Uint8Array(4*Math.pow(64,2)),d=0;d<e.length;d++)e[d]=g[d];f.texImage2D(f.TEXTURE_2D,0,f.RGBA,64,64,0,f.RGBA,f.UNSIGNED_BYTE,e)}else f.texImage2D(f.TEXTURE_2D,0,f.RGBA,g.length/4,1,0,f.RGBA,f.UNSIGNED_BYTE,g);qb();f.bindTexture(f.TEXTURE_2D,null);f.bindTexture(f.TEXTURE_2D,
a);f.uniform1i(f.getUniformLocation(G,"colorArray"),4);f.activeTexture(f.TEXTURE2)},U,aa=function(g,a){if(!v.canceled){performance.now();fa.running||requestAnimationFrame(aa);var e=aa.fp1000,d=aa.delta;g=aa.now;var b=aa.realnow,c=aa.delta,k=g;aa.frameCount++;g=a||Date.now()-Db+25*v.cycle;aa.now=g;d=(d+(g-k))/1E3;aa.delta=d;a=b;b=Date.now();aa.realnow=b;c=(c+(b-a))/1E3;aa.realdelta=c;hd+=d;gd++;aa.fp1000=e+d;if(0!=fb||0!=gb)a=parseInt(localStorage.scrollSpeed)/100,ba+=fb*c*1280*O*a,ea+=gb*c*1280*O*
a,mb(-ba,-ea);f.useProgram(G);nc();f.uniform1f(cf,g);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);ff(g);rb(Od);g=n.getBufferID();Pd(g);gf(g);ka.update&&ka(1);fa.running&&(0<cb&&clearInterval(cb),f.canvas.toBlob(function(a){var b=fa.a;a=URL.createObjectURL(a);b.href=a;b.download=fa.i++ +".png";b.click();window.URL.revokeObjectURL(a);setTimeout(function(){setTimeout(ta,9);aa(0,25*v.cycle+16)},20)}));tc.stream&&tc.stream.getVideoTracks()[0].requestFrame();f.finish()}},Qd=function(g){g?Qd.time=performance.now():
x("c++",performance.now()-Qd.time)},Pd=function(g){g&&(f.enable(f.BLEND),f.blendEquation(f.FUNC_ADD),f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA),U?Lb.drawArraysInstancedANGLE(f.TRIANGLES,0,6,g):f.drawArraysInstanced(f.TRIANGLES,0,6,g),f.disable(f.BLEND))},yd=!1,uc,gf=function(g,a){var e=n.mapWidth();f.uniform2fv(Jb,[0,0]);f.uniform1f(oc,1);if(n.vsblt()&&g){var d=n.vsblt();U&&(e=Math.pow(2,Math.ceil(Math.log2(e))));f.uniform1i(pb,3);f.bindFramebuffer(f.FRAMEBUFFER,Nb);f.viewport(0,0,e,e);f.bindTexture(f.TEXTURE_2D,
Kd);1<d&&(f.colorMask(!0,2<d,!1,!1),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.colorMask(!0,!0,!0,!0));U?Lb.drawArraysInstancedANGLE(f.TRIANGLES,0,6,g):f.drawArraysInstanced(f.TRIANGLES,0,6,g);f.bindTexture(f.TEXTURE_2D,sb);f.bindFramebuffer(f.FRAMEBUFFER,null)}f.uniform1i(pb,1);d=q.marx;var b=window.innerHeight-Ca-q.mary;e=Qa;var c=Ca;a&&(c=e=d=Math.min(window.innerWidth,window.innerHeight)-128,d=window.innerWidth/2-e/2,b=window.innerHeight/2-c/2);f.viewport(d*L,L*b,e*
L,c*L);Pd(g);f.uniform1i(pb,2);Pd(1);f.uniform1i(pb,0);f.uniform2fv(Jb,[ba,ea]);f.uniform1f(oc,L/O);f.viewport(0,0,f.canvas.width,f.canvas.height);yd&&!a&&gf(g,1)},vc,ff=function(g,a){var e=Math.floor(g/100)%5;f.useProgram(I);rb(Nd);f.uniform1f(Ld,e);f.drawArrays(f.TRIANGLES,0,6);e=q.marx;var d=window.innerHeight-Ca-q.mary,b=Qa,c=Ca;if(a){var l=Math.min(window.innerWidth,window.innerHeight)-128;c=b=l;e=window.innerWidth/2-b/2;d=window.innerHeight/2-c/2;f.uniform2fv(vc,[-e,-d]);S("bigMap");k("bigMap").style.width=
l+"px";k("bigMap").style.height=l+"px"}else N("bigMap"),f.uniform2fv(vc,uc);f.viewport(L*e,L*d,L*b,L*c);f.uniform1i(pc,1);f.uniform2fv(Kb,[0,0]);f.uniform1f(qc,L*b/32/n.mapWidth());f.drawArrays(f.TRIANGLES,0,6);f.uniform1i(pc,0);f.uniform2f(Md,f.canvas.width,f.canvas.height);f.uniform2fv(Kb,[ba,ea]);f.uniform1f(qc,L/O);f.viewport(0,0,f.canvas.width,f.canvas.height);f.useProgram(G);yd&&!a&&ff(g,1)},Rd=!1,Ze=function(g){var a=n.mapWidth(),e=window.innerHeight;g*(window.innerWidth-q.mx)/32>a||g*e/32>
a||(O=g,.08>O&&(O=.08),mb(-ba,-ea),n.setupZoom(O),hf())},We=function(g){Sd||!(g.clientX>q.menumx||kc)&&g.clientX||(g=Math.sign(g.deltaY)*parseFloat(localStorage.zoomMult)/1E3*O,Ze(g+O))},hf=function(){var g=window.innerWidth,a=window.innerHeight,e=-ba+.5*(g*L-O*g)+q.mx,d=-ea+.5*(a*L-O*a);g*=O;a*=O;var b=tb.viewF32();b[0]=e;b[1]=d;b[2]=-999999999;b[3]=0;b[4]=0;jf();b[0]=g;b[1]=a;b[2]=0;b[3]=0;b[4]=0;kf()},lf,mf;nc=function(){var g=[ba,ea];if(ba!=lf||ea!=mf)lf=ba,mf=ea,n.setupTranslation(-ba,-ea),f.useProgram(I),
f.uniform2fv(Kb,g),f.useProgram(G),f.uniform2fv(Jb,g),hf()};var qb=function(){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT)},Ob,Fg=function(g){if(!Ob[g]){f.useProgram(G);var a=f.createTexture();f.activeTexture(f.TEXTURE6+g);Ob[g]=a;f.bindTexture(f.TEXTURE_2D,a);qb();f.texImage2D(f.TEXTURE_2D,0,wc,4096,4096,0,wc,
f.UNSIGNED_BYTE,null);f.uniform1i(f.getUniformLocation(G,"img_common["+g+"]"),6+g);f.useProgram(I);f.uniform1i(f.getUniformLocation(I,"img_common["+g+"]"),6+g)}return Ob[g]},wc,sb,Nb,L,xc=function(){var g=Math.round(window.innerWidth*L),a=Math.round(window.innerHeight*L);f.canvas.width=g;f.canvas.height=a;n.canvasSize(g,a);f.useProgram(I);f.uniform2f(Md,g,a);f.useProgram(G);f.uniform2f(df,g,a);xc.changed=1;mb(-ba,-ea)},rb=function(g){if(U)return yc.bindVertexArrayOES(g);f.bindVertexArray(g)},yc,Lb,
nf=function(){return U?(yc||(yc=f.getExtension("OES_vertex_array_object")),yc.createVertexArrayOES()):f.createVertexArray()};Array.prototype.put=function(g){this[this.length]=g};Array.prototype.quit=function(g){g=this.indexOf(g);return-1<g?(this.splice(g,1),!0):!1};Array.prototype.add=function(g){0>this.indexOf(g)&&(this[this.length]=g)};var v={},jf=function(){var g=tb.viewF32(),a=of.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Hd);f.bufferSubData(f.ARRAY_BUFFER,12*g[4],a)},kf=function(){var g=tb.viewF32(),
a=zc.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Jd);f.bufferSubData(f.ARRAY_BUFFER,16*g[4],a)},Z=["European","Arab","Asian"],Ib=function(g,a,e){if(g)return e&&(g=g.replace("%d",e)),g.replace("%s",a)};Zc.translated=!0;var Ta=function(g){v.infinity=void 0;g="mapx goldRes woodRes foodRes stoneRes infinity terrain terrainRND peons freePop maxPop AIlevel fog AIagressivity towers".split(" ");var a=k("mapconfiguration")&&""!==k("mapconfiguration").innerHTML;k("mapconfiguration")||R||pf();for(var e=0,d=g.length;e<
d;e++){var b=g[e];if(a){var c=k(g[e]+"Value");c="checkbox"==c.type?1==c.checked&&1||0:parseInt(c.value);localStorage[b]=c;v[b]=c}else v[b]=parseInt(localStorage[b])}a&&(d=n.RNDobjexp(),g=(new Ja(n.shapoint(),d)).viewU32(),localStorage.rndObjs=g.join(","));v.daylength=2880;v.initialhour=12;v.infinity&&(v.goldRes=Math.pow(2,31)-1,v.foodRes=Math.pow(2,31)-1,v.woodRes=Math.pow(2,31)-1,v.stoneRes=Math.pow(2,31)-1);v.mapy=v.mapx;v.gravity=580.9/9.8*9.8;v.name="";v.arje=~~(555555*Math.random()+1);v.mapx=
qf(v.mapx);x(v.type,23123,"asdasd");n.setupGame(v.peons,v.freePop,v.goldRes,v.woodRes,v.foodRes,v.stoneRes,v.towers,v.terrain,v.fog,v.AIagressivity,v.mapx,v.arje,v.maxPop,v.terrainRND,v.AIlevel);return v},fa=function(){fa.arr=[];fa.running=!0;fa.a=document.createElement("a");fa.a.hide();fa.i=0};fa.one=function(){f.canvas.toBlob(function(c){var a=document.createElement("a");c=URL.createObjectURL(c);a.href=c;a.download="tzared.png";a.click();window.URL.revokeObjectURL(c)})};fa.stop=function(){fa.running=
!1};var tc=function(){var c=f.canvas.captureStream(0),a=new MediaRecorder(c,{audioBitsPerSecond:128E3,videoBitsPerSecond:25E6,mimeType:"video/webm;codecs=h264"});tc.stream=c;a.addEventListener("dataavailable",function(a){tc.stream=void 0;a=new Blob([a.data],{type:"video/webm"});a=URL.createObjectURL(a);x(a)});a.start();setTimeout(function(){a.stop()},4E3)},Be=function(){Eb&&(Eb.innerHTML="");k("loadingtext").innerHTML=m(60);q.kingdom||(q.kingdom=1);v.online&&(Gg(m(120)),v.editor=0);n.mapWidth()?(v.mapx=
n.mapWidth(),v.mapy=v.mapx):Ta();v.pausedTime=0;v.canceled=0;Pb=k("msgs1");v.online||(location.hash="");S("content");v.cycle?v.deltaTime=25*v.cycle:(v.date=Date.now(),v.cycle=0,v.deltaTime=0);v.loadDate=Date.now();v.online||Te();v.now=De;v.paused=0;v.pausedTime=0;v.zMax=96*v.mapy;db();performance.now();v.allow14=!0;v.temperature=25;var c=v.temperature;0===q.temperature&&(c+="&deg;C");k("temperature")&&(k("temperature").innerHTML=c);O=1;n.preSetup(~~(1E4*Math.random()));ka(55);Ia.check();R&&(Ne(),
Fb())},Ia=function(){Fa(["loading","index"]);k("playersinfo")&&(k("playersinfo").innerHTML="");zd();window.addEventListener("keydown",wg);window.addEventListener("keyup",xg);window.addEventListener("mousemove",Bg);window.addEventListener("touchstart",yg);window.addEventListener("touchmove",zg);window.addEventListener("touchend",Ag);window.addEventListener("wheel",We,!1);window.addEventListener("mousedown",Cg);window.addEventListener("mouseup",Dg);n.sndCnf("true"==localStorage.deathsounds);cc=performance.now()-
cc;x("FULL: ",cc);v.online?n.plready():Td();R&&Ba("Maps created in the current version will not be compatible with future versions","Section under development");v.allow14=!1};Ia.check=function(){Ia.load++;Ia.load===Ia.target&&Ia()};Ia.target=2;var rf=function(){return q.gl?!1:(Ba("You can't run WEBGL 2<br>More info <a href='http://webglreport.com/?v=2'>here</a>","Error"),Ra(),!0)},Fd=function(){if(!X){var c=document.documentElement;c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():
c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen()}},bb=function(c){var a=document.createElement("div");a.id=c;document.body.appendChild(a);return a},sf=function(){R?(q.marx=0,q.mary=60,q.menumy=60,Ca=Qa=171,q.mx=171,q.menumx=171):(q.mx=151,Ca=Qa=128,q.menumx=151,q.menumy=0,q.marx=4,q.mary=31);n.stmenummx(q.mx);var c=k("minimap");c.style.width=Qa+"px";c.style.height=Ca+"px";c.style.left=q.marx+"px";c.style.top=q.mary+"px"},Hg=document.getElementsByTagName("main")[0],
Qb=function(c){rf()||(Re(),ed(),Hg.appendChild(f.canvas),ca(k("RandomMap")),ca(k("CustomMap")),ca(k("game")),ca(k("Multiplayer")),window.addEventListener("beforeunload",function(){return"Are you sure you want to quit?"}),cc=performance.now(),Ia.load=0,xa("bless"),c&&"true"==localStorage.fullscreen&&Fd(),sf(),F("div",document.body,'<p id="loadingtext"></p>\n<div>\n<div id=\'logo\' class="svgnehhon"></div>\n<span id="netral">NEHHON NETRAL-H4 ENGINE</span>\n</div>').id="loading",R?n.setupEditor():n.mapWidth()||
Ta(),Pa())},Qa=128,Ca=128,ya=[],xe=function(){Y();ca(k("loadingOnline"));Ra();Ba(m(77))},tf=function(){Y();ca(k("loadingOnline"));Ra();Ba(m(78))};window.addEventListener("offline",function(c){ec("Offline","#ff0000")});window.addEventListener("online",function(c){ec("Online","#00ff00")});var uf=function(){if(A.active)return A.close();la.leaveRoom();ya.length=0},Ig=function(){da();var c=F("div",document.body,'<input id="cndpass"  autocomplete="off" type="text" maxlength="29" placeholder="'+m(79)+'"/>');
c.className="fullwindow";c.id="passwindow";F("button",c,m(2).toUpperCase()).onclick=function(){Y();ca(this.parentNode)};x(c);F("button",c,m(3).toUpperCase()).onclick=vf;k("cndpass").focus()},Mc=!1,Jg=function(){var c=this.gameInf;c.pass?Ig():Lc(c.GID)},Lc=function(c,a){Mc=!0;A.active?location.replace("#"+c):location.replace("#"+c+"Room");wf(c)},xf=function(){da();var c=F("div",document.body,m(60)+"<p>");c.className="fullwindow";c.id="loadingOnline";F("button",c,m(3)).onclick=function(){location.hash=
"#Multiplayer";location.reload()}},wf=function(c){ya=[];xf();x("connecting to",c,m(60));if(A.active)A.joinRoom(c);else{Ud=[];if(!q.p2p){la||Ma();Ma.func=function(){wf(c)};return}la.joinRoom(c,xb)}q.roomID=c;ed()},Kg={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",
42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},yf=function(c){N("game");v.online=0;v.id=void 0;q.adminOK=!1;uf();Ra();n.closeRoom();c.constructor==String&&Ba(c)},Pe=function(){var c=localStorage.menuOpacity/100;k("menubefore").style.opacity=c;k("menuafter").style.opacity=c;k("resourcesbefore").style.opacity=c},Oe=function(){R||n.pause0();k("playingMenu")||bb("playingMenu");if(""==k("playingMenu").innerHTML){var c="";"true"===localStorage.nightcycle&&(c="checked");var a="";v.online||(a="<tr><td>"+
m(80)+' </td><td>\u00d71 <input type="range" id="gameSpeed" value="0"/> \u00d75</td></tr>');k("playingMenu").className="fullwindow";k("playingMenu").innerHTML='\n<ul>\n<li id="backToGame">'+m(81)+'</li>\n<li id="saveGame">'+m(82)+'</li>\n<li id="fullscreenmenu">'+m(83)+'</li>\n<li id="quitButton1">'+m(84)+"</li>\n</ul>\n<table>\n"+a+"\n<tr><td>"+m(85)+' </td><td><input type="range" id="zoomRange" value="'+localStorage.zoomMult+'"/></td></tr>\n<tr><td>'+m(86)+' </td><td><input type="range" id="scrollRange" value="'+
localStorage.scrollSpeed+'"/></td></tr>\n<tr><td>'+m(87)+' </td><td><input type="range" id="opacityRange" value="'+localStorage.menuOpacity+'"/></td></tr>\n<tr><td>'+m(88)+' </td><td><label class="container"><input id="daynightvalue" type="checkbox" '+c+'><span class="checkmark"></span></label></td>\n</table>\n<div>\n<span>'+m(89)+'</span><br/><input type="range" id="musicRange" value="'+localStorage.musicRange+'"/><br/><br/>\n<form id="musicSelect">\n<input type="radio" name="mversion" value="originalMusic" checked /> Original<br/>\n<input type="radio" name="mversion" value="sharpRain" /> Original - <a href="https://www.youtube.com/user/rainheart666787/featured" target="_blank" rel="noopener noreferrer">Sharp Rain</a> Version<br/>\n<input type="radio" name="mversion" value="originalMusic1" /> Original - Alternative One<br/>\n<input type="radio" name="mversion" value="mute" /> Mute\n</form>\n<br />\n<span>'+
m(90)+'</span><br/><input type="range" id="soundRange" value="'+localStorage.soundRange+'"/><br/>\n<table>\n<tr><td>'+m(91)+' </td><td><label class="container"><input id="deathsoundsValue" type="checkbox" '+("true"===localStorage.deathsounds&&"checked"||"")+'><span class="checkmark"></span></label></td>\n</table>\n</div>\n';k("quitButton1").onclick=vb;k("saveGame").onclick=Lg;k("backToGame").onclick=function(){N("playingMenu");R||n.resume0();Y()};k("deathsoundsValue").onchange=function(){localStorage.deathsounds=
this.checked;n.sndCnf("true"==localStorage.deathsounds)};k("daynightvalue").onchange=function(){localStorage.nightcycle=this.checked};X?k("fullscreenmenu").hide():k("fullscreenmenu").onclick=Fd;k("musicRange").oninput=function(){Bb.gain.value=parseInt(k("musicRange").value)/100;localStorage.musicRange=k("musicRange").value};k("zoomRange").oninput=function(){localStorage.zoomMult=k("zoomRange").value};k("gameSpeed")&&(k("gameSpeed").onchange=kg);k("opacityRange").oninput=function(){localStorage.menuOpacity=
k("opacityRange").value;Pe()};k("scrollRange").oninput=function(){localStorage.scrollSpeed=k("scrollRange").value};k("soundRange").oninput=function(){Cb.gain.value=parseInt(k("soundRange").value)/100;localStorage.soundRange=k("soundRange").value};localStorage.favMusic&&(k("musicSelect").mversion.value=localStorage.favMusic);c=k("musicSelect").getElementsByTagName("input");a=0;for(var e=c.length;a<e;a++)c[a].onchange=P.reset}v.demo&&N("saveGame")||S("saveGame");k("playingMenu").style.display="block";
da()},Ud,Ac=function(){return parseInt(localStorage.color.substr(1),16)},Xf=function(){alert(m(92));location.reload()},la,ce=function(c){for(var a=0,e=0;e<c.length;e++)a+=c.charCodeAt(e)*e+(a&e);x(a,"id");return a%4294967295},Vd=function(c){var a=n.tempointeradd(c.length);a=new Uint32Array(oa.buffer,a,c.length);for(var e=0;e<c.length;e++)a[e]=c[e]},Ma=function(){rf()||(fg(),la=new SimpleWebRTC({localVideoEl:"",remoteVideosEl:"",autoRequestMedia:!1,receiveMedia:{offerToReceiveAudio:0,offerToReceiveVideo:0},
url:"https://gthsolar1.herokuapp.com/"}),la.on("channelMessage",function(c,a,e){Vd(e);n.onldata(c.superID)}),la.on("error",function(c){"full"==c&&setTimeout(tf,500)}),la.on("connectionReady",function(c){var a=la.connection.connection;q.p2p=a;q.superID=ce(a.id);n.setupOnlID(q.superID);a.username=q.name;a.color=q.color;a.on("getRooms",zf);q.onlineID=c;Ma.func&&Ma.func()}),la.on("createdPeer",function(c){v.started||wb(c)}))},Mg=function(){ed();Y();xf();ya=[];q.admin=1;q.room={description:k("gameFormName").value.substr(0,
30),max:parseInt(k("gameMax").value),private:k("gamePrivate").checked};2>q.room.max&&(q.room.max=2);14<q.room.max&&(q.room.max=14);localStorage.gameDescription=q.room.description;A.active?A.createRoom():(q.roomID=q.onlineID+"bRoom",la.createRoom(q.onlineID+"b",xb),n.setupOnlID(q.superID,1));v.online=1;document.body.removeChild(k("gameForm"));Ud=[q.onlineID];q.adminOK=!0;A.active||(Ta(),n.setupOnlTable(q.room.max+1),La(n.onlADD(0,0,Ac(),q.superID,0),17,q.name),Wd())},vf=function(){Y();ca(this.parentNode)},
de=function(){if(!A.active&&(la||Ma(),!q.onlineID)){setTimeout(function(){location.hash=""},200);Ma.func=de;return}da();var c=localStorage.gameDescription||q.name+"'s room";c=F("div",document.body,'\n    <h2 style="margin-bottom: 21px">'+m(0)+"</h2>\n    "+m(101)+': <input id=\'gameFormName\' type="text" spellcheck="false" value="'+c+'" maxlength="29" /><br />\n    '+m(102)+': <input id="gameMax" type="number" value="6" max="14" min="2"/><p>\n    '+m(99)+':  <label style="display: inline;margin-left: 7px;" class="container"><input id="gamePrivate" type="checkbox"><span class="checkmark"></span></label><br>\n\n    ');
c.className="fullwindow";c.id="gameForm";var a=F("button",c,m(2));a.onclick=Mg;a=F("button",c,m(3));a.onclick=vf},Lg=function(){var c=n.savegame(),a=Rb.viewI32(),e=fc(c,a[0]);a=a[1];x(e,c);c=new Blob([new Uint32Array([a]),e],{type:"application/octet-binary"});c=URL.createObjectURL(c);e=document.createElement("a");document.body.appendChild(e);e.style="display: none";e.href=c;e.download="savegame.tzared";e.click()},Ng=function(){if(1<n.onlCount()){for(var c=document.getElementsByClassName("onlPlayer"),
a=0;a<c.length;a++)ca(c[a]);v.onlMap||Ta();A.active?A.gameStarted():Bc.gameStarted();n.strOnl()}},Td=function(){Y();k("alert")&&N("alert");k("waitList")&&ca(k("waitList"));v.started=1;v.date=Date.now();db();R||P();n.startMovement();aa()};Td.fast=!0;var qd=document.getElementsByTagName("main")[0],Sd=!1,Y=function(){Sd=!1;qd.style.cssText=""},da=function(){Sd=!0;qd.style.cssText="filter:blur(14px);pointer-events:none"};var Af=function(){N("game");v.id=void 0;v.online=0;q.room=void 0;uf();Ra();q.admin=
0;n.closeRoom()};var Bf=function(c){c=parseInt(c);if(2>c||!c)c=2;14<c&&(c=14);x(c,"ccc");k("nplayersO").value=c;c!==q.room.max&&(q.room.max=c,Bc.playerLimit(q.room.max-n.nAIs()));return c},Og=function(c,a){return null==k(c)?(a=F("div",Xb(),a),a.id=c,a.className="playermenu",!0):!1},Pg=function(){Og("game",'<h2 id="gameName"></h2>\n<p id="onlineTopInfo"></p>\n<div id="multi21">\n<table class="players" >\n<tbody id="multiplayertable">\n</tbody>\n</table>\n<div id="chat">\n<ul id="msgs">\n</ul>\n<input id="msginput" type="text" autocomplete="off" />\n<input id="sendmsg" type="submit" value="" />\n</div>\n</div>\n<div id="showGameInfo"></div>\n<div id="buttons"></div>')?
(Pb=k("msgs"),Cc=k("msginput"),Cc.addEventListener("keyup",function(c){13===c.keyCode&&td()}),k("sendmsg").onclick=td):(N("multi21"),k("showGameInfo").innerHTML="")},va=function(){this.url="wss://nehhon.tza.red";this.active=!0;this.peers=[]},A=new va;va.prototype.close=function(){for(var c=0;c<this.peers.length;c++)this.peers[c].close(1);this.peers.length=0;this.send([1])};va.prototype.playerLimit=function(c){this.send([8,c])};va.prototype.getRooms=function(){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(a){if(1==
a.nextAddress)return c.wb?a.jumpTo(2):a.yield(c.setup(),2);c.send([2]);a.jumpToEnd()})};var Sb=function(c){try{return JSON.parse(c)}catch(a){return x(a),!1}},Cf=[function(c,a){var e,d,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress){if(A.getPeer(c))return g.return();e=Sb(a);if(!e)return g.return();x(e);d=A.addRTC(c);d.setRemoteDescription(new RTCSessionDescription(e));return g.yield(d.createAnswer(),2)}if(3!=g.nextAddress)return b=g.yieldResult,g.yield(d.setLocalDescription(b),
3);x(b);A.send([4,c,JSON.stringify(b)]);g.jumpToEnd()})},function(c,a){var e,d,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){e=A.getRTC(c);if(!e)return g.return();d=Sb(a);if(!d)return g.return();x(d);b=new RTCSessionDescription(d);return g.yield(e.setRemoteDescription(b),0)})},function(c,a){var e,d,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress){e=A.getRTC(c);if(!e)return g.return();d=Sb(a);if(!d)return g.return();x(d);g.setCatchFinallyBlocks(2);
return g.yield(e.addIceCandidate(d),4)}if(2!=g.nextAddress)return g.leaveTryBlock(0);b=g.enterCatchBlock();console.error("Error adding received ice candidate",b);g.jumpToEnd()})},function(c,a){var e,d,b,g,f,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:x(a);if("0"==a)return h.return(xe());if("1"==a)return h.return(tf());n.setupOnlID(c);q.superID=c;e=Sb(a);if(!e)return h.return();x(e);d=[6];b=0;case 2:if(!(b<e.length)){h.jumpTo(4);break}g=e[b];f=A.addRTC(g,
!b);return h.yield(f.createOffer(),5);case 5:return k=h.yieldResult,h.yield(f.setLocalDescription(k),6);case 6:d.push(g,JSON.stringify(k));b++;h.jumpTo(2);break;case 4:A.send(d),h.jumpToEnd()}})},function(c,a){q.roomID=a;xb();n.setupOnlID(c,1);q.superID=c;Ta();n.setupOnlTable(q.room.max+1);La(n.onlADD(0,0,Ac(),c,0),17,q.name);Wd()},function(c,a){(c=Sb(a))&&zf(c)},function(c,a){(c=A.getPeer(c))&&c.altp2p()},function(c,a){x("FORCE",c);(c=A.getPeer(c))&&c.close()}];va.prototype.getRTC=function(c){if(c=
this.getPeer(c))return c.RTC};va.prototype.getPeer=function(c){for(var a=0,e=this.peers.length;a<e;a++)if(this.peers[a].id==c)return this.peers[a]};var ub=function(c,a,e,d){this.id=c;a&&(this.admin=a);e&&(this.RTC=e,this.channel=d);A.peers.push(this);e||(A.send([9,this.id]),this.open())};ub.prototype.open=function(){xa("attack");this.timer&&clearTimeout(this.timer);x("DATACHANNEL OPEN");x(this);this.admin&&(q.adminOK=!0,La(n.mnameadd(),20,q.name),n.shareName(this.id),xb(1))};var Dc;ub.prototype.send=
function(c){this.channel?"open"==this.channel.readyState&&this.channel.send(c):Dc=c};ub.prototype.close=function(c){if(this.RTC)return this.RTC.close();c||Ga(this,!0)};ub.prototype.altp2p=function(){var c=this.RTC;if(c){var a=this.channel;a.onopen=null;a.onmessage=null;a.onclose=null;a.close();c.onicecandidate=null;c.onconnectionstatechange=null;c.oniceconnectionstatechange=null;c.onsignalingstatechange=null;c.onicecandidateerror=null;c.close();x("ALT-8");this.channel=this.RTC=null;A.send([9,this.id]);
this.open()}};va.prototype.addRTC=function(c,a){var e=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),d=e.createDataChannel("nehhof",{maxRetransmits:65535,ordered:!0,negotiated:!0,id:0}),b=new ub(c,a,e,d);b.timer=setTimeout(function(){b.altp2p()},1E4);d.binaryType="arraybuffer";d.onopen=function(){b.open()};d.onmessage=function(a){a=new Uint32Array(a.data);Vd(a);n.onldata(c)};d.onclose=function(a){Ga(b);x("DATACHANNEL CLOSE",a)};e.onicecandidate=function(a){x("ICE",a);
a.candidate&&A.send([5,c,JSON.stringify(a.candidate)])};e.onconnectionstatechange=function(a){"connected"==e.connectionState&&(b.ready=!0);"disconnected"==e.connectionState&&Ga(b)};e.oniceconnectionstatechange=function(a){x(a);x(e.iceConnectionState);if(!b.ready&&"failed"==e.iceConnectionState)return b.altp2p();"failed"!=e.iceConnectionState&&"disconnected"!=e.iceConnectionState||Ga(b)};e.onsignalingstatechange=function(a){"closed"==e.signalingState&&Ga(b)};e.onicecandidateerror=function(a){x("ICERROR",
a)};return e};var Df=function(){A.wb&&(A.wb.send(""),setTimeout(Df,3E4))};va.prototype.setup=function(){var c=this;setTimeout(Df,3E4);return new Promise(function(a){c.wb=new WebSocket(c.url);c.wb.binaryType="arraybuffer";c.wb.onclose=function(a){console.log(a)};c.wb.onmessage=function(a){if("string"==typeof a.data)a=JSON.parse(a.data),Cf[a.f]&&Cf[a.f](a.ws,a.msg);else{a=new Uint32Array(a.data);var d=a[0],b=A.getPeer(d);b||(b=new ub(d));b.RTC&&b.altp2p();Vd(a);n.onldata(d)}};c.wb.onopen=a})};va.prototype.gameStarted=
function(){this.send([7])};va.prototype.createRoom=function(){var c=this,a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return c.wb?e.jumpTo(2):e.yield(c.setup(),2);a=q.room;c.send([0,a.max,a.private,a.description]);e.jumpToEnd()})};va.prototype.send=function(c){this.wb.send(JSON.stringify(c))};va.prototype.joinRoom=function(c){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a.wb?e.jumpTo(2):e.yield(a.setup(),
2);a.send([3,c]);e.jumpToEnd()})};var Bc={playerLimit:function(c){A.active?A.playerLimit(c):q.p2p.emit("maxPlayers",c)},gameStarted:function(){q.p2p.emit("gameStarted")}},zf=function(c){var a=k("gameList"),e=c.shift();if(e&&k("onlineStats"))if(k("onlineStats").innerHTML='<span style="position:absolute;left: 7px;color: #ffecb1;text-shadow: 0px 0px 13px;top:3px;font-size:10px;">'+m(93)+"</span> <span>"+m(94)+": "+e.games+'</span><span style="margin: 0px 50px;">'+m(95)+": "+e.currentPlayers+"</span><span>"+
m(96)+": "+e.players+"</span>",c&&c.length){a.innerHTML="";c.sort(function(a,b){return-b.date+a.date});e=0;for(var d=c.length;e<d;e++){var b=c[e],g=document.createElement("tr"),f="";f=b.playing?f+("<td><div class='redCircle'></div>"+m(97)+"</td>"):f+("<td><div class='redCircle' style=\"background:rgba(0,255,0,.8); box-shadow:0px 0px 20px rgba(0,255,0,.8)\"></div>"+(b.pass&&"<img src='nehhon/lock.png'>"||"")+"  &nbsp;"+m(98)+"</td></td>");f+="<td"+(!b.GID&&" style='color:red'"||"")+">"+(b.description&&
Ua(b.description)||m(99))+"</td><td>"+~~(b.date/6E4)+" min ago</td><td>"+Ua(b.players)+"/"+Ua(b.max)+"</td>";g.innerHTML=f;g.gameInf=b;!b.playing&&b.GID&&(g.onclick=Jg);b.GID||(g.style.opacity=.5);a.appendChild(g)}}else a.innerHTML="<tr><td>"+m(100)+"</td></tr>"},xb=function(c){if((q.admin||c)&&!v.id){Pg();Pb.innerHTML="";Y();ca(k("loadingOnline"));S("game");k("multi21").style.display="flex";Y();if(A.active)var a=q.roomID;else if(a=la.roomName,a+="Room",x("login"),0===la.getPeers().length&&!q.admin){location.hash=
"";Ra();return}c=q.room||NaN;x(c);v.id=a;v.online=1;k("buttons").innerHTML="";k("gameName").innerHTML="";a='<span style="margin-left:80px;"><input id="onlineID" type="text" value="https://tza.red/#'+q.roomID+'" /><button id="copyButton">'+m(403)+"</button></span>";if(q.admin){var e=function(a){var b=n.onlCount(),d=A.peers.length?0:1;a<b+d&&(a=b+d);x(a,b);a=Bf(a);n.updKngs(a+1);n.sndNfo()};k("onlineTopInfo").innerHTML=' <button id="addAI" style="padding: 6px;">'+m(105)+"</button>"+a+'<span id="spnpld" style="float:right;">'+
m(102)+'<input id="nplayersO" min="2" type="number" max="14" value="'+q.room.max+'" /></span>';k("nplayersO").onchange=function(){e(parseInt(this.value))};k("addAI").onclick=function(){if(!n.preldd()){var a=n.onlCount();14>a+1&&(a+(ya.length?0:1)>=q.room.max&&e(q.room.max+1),La(n.onlADD(0,0,16777216*Math.random(),0,1),17,"AI"),Bc.playerLimit(q.room.max-n.nAIs()),n.sndNfo())}}}else k("onlineTopInfo").innerHTML=a;k("copyButton")&&(k("copyButton").onclick=function(){k("onlineID").select();document.execCommand("Copy")},
k("onlineID").value="http://tza.red/#"+v.id);k("gameName").innerHTML=c&&Ua(c.description)||"Online Game";q.admin?(location.replace("#"+v.id),k("buttons").innerHTML='<button id="startbutton">'+m(107)+' \u25b6</button><button style="display:none" id="rndmapreturn">'+m(57)+'</button><button id="optionbutton">'+m(55)+'</button><input id="maploadOnline" type="file" /> <label for= "maploadOnline">'+m(108).split("|")[0].toUpperCase()+'</label><button id="closebutton">'+m(15)+"</button>",k("startbutton").onclick=
Ng,k("optionbutton").onclick=Ef,k("closebutton").onclick=Af,k("maploadOnline").accept=".tzared",k("maploadOnline").onchange=Ff,k("rndmapreturn").onclick=function(){S("addAI");k("optionbutton").style.display="inline-table";N("rndmapreturn");k("nplayersO").disabled=!1;n.rstrRNDmap(q.room.imax);Ta()}):(k("buttons").innerHTML='<button id="quitbutton">'+m(106)+"</button>",k("quitbutton").onclick=yf)}},Ga=function(c){if(A.active){c=A.getPeer(c.id);if(!c||c.closed)return;c.closed=!0;var a=ja(ia(n.empName(n.pidkingdom(c.id)),
20));Ec(Ib(m(109),a),0,5);A.peers.quit(c);n.deletePlayer(c.id)}else{x("rem2");a:{a=0;for(var e=ya.length;a<e;a++){var d=ya[a];if(d.id==c.id){c=d;break a}}c=void 0}x(c);if(!c)return;a=ja(ia(n.empName(n.pidkingdom(c.superID)),20));Ec(Ib(m(109),a),0,5);ya.quit(c);n.deletePlayer(c.superID)}!c.admin||q.admin||v.started||yf(m(110))};Element.prototype.addReturnMenu=function(){var c=F("a",this,m(130));c.className="returnmenu";c.onclick=Ra};var Xb=function(){return document.getElementsByTagName("main")[0]},
Fc=document.getElementsByClassName("ucolor"),Xd=document.getElementsByClassName("username"),Yd=document.getElementsByClassName("race"),Tb=document.getElementsByClassName("team"),Da=function(c){if(q.admin&&"BUTTON"!=c.target.tagName){Da.div&&(document.body.removeChild(Da.div),Da.div=void 0);var a=c.pageX;c=c.pageY;var e=this.i2;x(e);var d=document.createElement("div");d.style.top=c+"px";d.style.left=a+"px";d.className="onlPlayer";Da.div=d;x(this.peer,this.i2);if(this.peer.name)a=document.createElement("button"),
a.onclick=function(){n.userKick(e);q.p2p.emit("maxPlayers",n.onlCount());document.body.removeChild(d);Da.div=void 0},a.innerHTML=m(115),d.appendChild(a);else{var b=this.peer;a=document.createElement("button");a.onclick=function(){n.updown(e,-1);document.body.removeChild(d);Da.div=void 0};a.innerHTML=m(116);d.appendChild(a);a=document.createElement("button");a.onclick=function(){n.updown(e,1);document.body.removeChild(d);Da.div=void 0};a.innerHTML=m(117);d.appendChild(a);q.onlineID!=b&&(a=document.createElement("button"),
a.onclick=function(){x(22222,b);n.userKick(e);Bc.playerLimit(q.room.max-n.nAIs());document.body.removeChild(d);Da.div=void 0},a.innerHTML=m(115),d.appendChild(a))}a=document.createElement("button");a.onclick=function(){document.body.removeChild(d);Da.div=void 0};a.innerHTML=m(15);d.appendChild(a);document.body.appendChild(d)}},Wd=function(){var c=k("multiplayertable");if(c){var a='<tr style="text-transform:uppercase;color:var(--color1)"><td></td><td>'+m(17)+"</td><td>"+(!n.preldd()&&m(118)||"")+"</td><td>"+
m(23)+"</td></tr>",e=Ud,d=n.nkingdom()-1||14;x(d);x("LENGTH",d);e&&d<e.length&&(d=e.length);for(e=0;e<d;e++)a+='<tr><td class="ucolor"></td><td class="username">'+m(119)+'</td><td class="race"></td><td class="team"></td></tr>';6>d&&(a+='<tr style="height:'+(260-46*d)+'px"></tr>');c.innerHTML=a;k("multiplayertable").getElementsByTagName("tr");n.onlineKingdoms();k("msgs").style.height=c.clientHeight-87+"px"}},ee=function(c){if("Multiplayer"==c)return Kc;if("RandomMap"==c)return Qg;if("MapEditor"==c)return Zd.func;
if("CustomMap"==c)return Rg;if("Settings"==c)return Sg;if("About"==c)return Tg;if("Guide"==c)return Se;if("TzaredDesk"==c)return vg;if("Changelog"==c)return ug};window.onhashchange=be;var Pb,Cc,Ec=function(c,a,e,d){xa("chat");e&&(a=n.gstarted()?Eb:Pb,5!==e?(c=Ua(ja(ia(c,d))),c=Eg(c),F("li",a,"<span>"+Ua(ja(ia(e,20)))+" \u2014</span> "+c)):F("li",a,c),a.scrollTop=a.scrollHeight,n.gstarted()&&ob())};Ec.fast=!0;var ob=function(){k("msgs1")&&(11==k("msgs1").children.length&&k("msgs1").removeChild(k("msgs1").children[0]),
1==k("msgs1").children.length&&(ob.intv=setInterval(Ug,16E3)))},Ug=function(){k("msgs1")&&k("msgs1").children[0]&&k("msgs1").removeChild(k("msgs1").children[0]);k("msgs1")&&0==k("msgs1").children.length&&clearInterval(ob.intv)},Ua=function(c){return String(c).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},td=function(){if(v.started){var c=Eb;var a=k("msginputGame").value;k("msginputGame").value=""}else c=Pb,a=Cc.value,Cc.value="";""!==a&&(a=Ua(a),c.innerHTML+="<li><span>"+q.name+
" \u2014</span> "+a+"</li>",La(n.tempstradd(),1024,a),n.liveChat(a.length),c.scrollTop=c.scrollHeight,v.started&&ob())},Gf=document.getElementsByClassName("ucolor1"),Hf=document.getElementsByClassName("username1"),Vg=document.getElementsByClassName("race1"),Wg=document.getElementsByClassName("team1"),If=function(c){var a=1;2===c.button&&(a=-1);this.innerHTML=n.chTeam(this.iteam,a)},Jf=function(c){var a=1;2===c.button&&(a=-1);this.innerHTML=Z[n.changeRace(this.iteam,a)]},Kf=function(){this.svg&&(q.color=
this.value,localStorage.color=this.value);this.parentElement.style.background=this.value;n.changeColor(this.iteam,parseInt(this.value.substr(1),16))},Xg=function(){n.randomKingdoms(1)},Yg=function(){n.randomKingdoms(-1)},Lf=function(c,a,e,d,b,f,l,m){var g=0==f,h=md(d);c=ja(ia(c,20));if(A.active){var n=A.getPeer(f);n&&(c+="<span style='font-size:8px;color:#"+(n.RTC&&"0f0"||"ff0")+"'>&nbsp;"+(n.RTC&&"P2P"||"proxy")+"</span>")}n=k("multiplayertable").getElementsByTagName("tr");var t=f==q.superID,r=b+
1;d=parseInt(h.substr(1),16);d=[d>>16&255,d>>8&255,d&255];if(Fc[b]){Fc[b].style.background="rgb("+d[0]+","+d[1]+","+d[2]+")";Xd[b].innerHTML=c;if(g){if(l){Tb[b].innerHTML=a;Tb[b].style.opacity="0.25";Fc[b].style.opacity="0.25";Xd[b].style.opacity="0.25";return}Xd[b].style.color="#fff900"}!l&&(t||g&&q.admin)?(Tb[b].innerHTML="",c=document.createElement("button"),c.onmousedown=If,c.iteam=r,c.innerHTML=a,Tb[b].appendChild(c),g&&(c.style.color="#fff900"),c=document.createElement("button"),c.onmousedown=
Jf,c.iteam=r,c.innerHTML=Z[e],Yd[b].appendChild(c),g&&(c.style.color="#fff900"),a=document.createElement("input"),a.type="color",a.iteam=r,a.value=h,a.svg=!0,Fc[b].appendChild(a),a.onchange=Kf):(Tb[b].innerHTML=a,l)?g||(Yd[b].innerHTML="("+ja(ia(m,20))+")"):Yd[b].innerHTML=Z[e];q.admin&&!t&&(n[b+1].onclick=Da,n[b+1].peer=f,n[b+1].i2=b+1)}},Qg=function(){if(k("RandomMap"))S("RandomMap");else{var c=F("div",Xb(),"<h2>"+m(57)+'</h2><div>\n<table class="players" id="oneplayertable">\n<tbody id="oneplayertbody" style="border-top: 1px solid #f3d300;">\n</tbody>\n</table>\n<div style="text-align:center;margin-top:30px">\n<button id="start2" class="start startButton">'+
m(107)+' \u25b6</button>\n<button class="start optionsButton" id="start1" style="margin-left:60px;">'+m(55)+"</button>\n</div>\n</div>");c.id="RandomMap";c.className="playermenu";c.addReturnMenu();k("start1").onclick=Ef;k("start2").onclick=Qb}n.randomKingdoms()},Rg=function(){if(k("CustomMap"))N("customMapcont"),S("CustomMap");else{var c=F("div",Xb(),"<h2>"+m(122).split("| ")[0]+'</h2>\n<input id="mapload" type="file" />\n<label for="mapload" id="maploadlabel">Choose a file</label>\n<table id="mapcache"></table>\n<div id="customMapcont" style="display:none">\n<table class="players" id="customaptable">\n<tbody id="custombody">\n</tbody>\n</table>\n<button style="margin-left:40px" id="startCustom" class="start startButton">'+
m(107)+'</button>\n<button style = "margin-left:40px" id="editCustom" class="start"> '+m(123)+'</button>\n<button style="margin-left:40px" id="closeCustom" class="start">'+m(15)+"</button>\n</div>");c.id="CustomMap";c.className="playermenu";c.addReturnMenu();k("closeCustom").onclick=function(){N("customMapcont");k("maploadlabel").style.display="inline-block";k("mapcache").style.display="table"};k("startCustom").onclick=function(){N("customMapcont");k("closeCustom").onclick();Qb()};k("editCustom").onclick=
Zd.func;k("mapload").accept=".tzared";k("mapload").onchange=Ff}},Ff=function(c){c=this.files[0];x(c);c.name.split(".");var a=new FileReader;a.onload=Zg;a.readAsArrayBuffer(c)},Zg=function(c){x(c);v.online&&(q.room.imax=q.room.max);c=c.target.result;var a=new Uint8Array(c,4);c=(new Uint32Array(c,0,1))[0];x(c,a);for(var e=a.length,d=n.readSavegame0(e),b=0;b<e;b++)J[d+b]=a[b];if(!n.readSVG(4*c,e,v.online))return Ba(m(27));if(v.online)return N("addAI"),N("optionbutton"),k("rndmapreturn").style.display=
"inline-table",k("nplayersO").disabled=!0,k("maploadOnline").value="",v.onlMap=!0;S("customMapcont");k("closeCustom").style.display="inline-table";k("custombody").innerHTML="";n.customMapTable()},jg=function(c,a,e){var d=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.onload=function(b){b=b.target.response;X||$g({url:c,buffer:b});a(b)};e&&(d.onprogress=e);d.send()},Gg=function(c,a,e){try{"granted"!=Notification.permission&&Notification.requestPermission(function(a){});var d=new Notification(c,
{icon:"nehhon/807.png",body:a,requireInteraction:!1});e||(e=5550);setTimeout(function(){d.close()},e)}catch(b){}},Mf=function(c){for(var a="",e=0,d=c.length;e<d;e++)a+=Kg[c[e]];return a};X||gg[Mf([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]===Mf([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])||(x("edge chrome firefox - compt"),Be=Ab);var ka=function(c){if(c){var a=n.mapWidth();c=ad(n.configTerrain(55==c),a*a*4);if(U)var e=Math.pow(2,Math.ceil(Math.log2(a)));
performance.now();f.useProgram(I);ka.texture?(f.bindTexture(f.TEXTURE_2D,ka.texture),U?(f.getExtension("OES_texture_float"),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,a,a,0,f.RGBA,f.FLOAT,c)):f.texImage2D(f.TEXTURE_2D,0,f.RGBA32F,a,a,0,f.RGBA,f.FLOAT,c)):(f.activeTexture(f.TEXTURE1),ka.texture=f.createTexture(),f.bindTexture(f.TEXTURE_2D,ka.texture),U?(f.getExtension("OES_texture_float"),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,e,e,0,f.RGBA,f.FLOAT,null),f.texSubImage2D(f.TEXTURE_2D,0,0,0,a,a,f.RGBA,f.FLOAT,c)):
f.texImage2D(f.TEXTURE_2D,0,f.RGBA32F,a,a,0,f.RGBA,f.FLOAT,c),qb(),f.uniform1i(f.getUniformLocation(I,"img_data"),1));f.useProgram(G);f.activeTexture(f.TEXTURE2);performance.now();ka.update=!1}else ka.update=!0};ka.update=!1;var c="undefined"!==typeof c?c:{},Ub={},Va;for(Va in c)c.hasOwnProperty(Va)&&(Ub[Va]=c[Va]);var Vc=function(c,a){throw a;},Wa="",ne;document.currentScript&&(Wa=document.currentScript.src);Wa=0!==Wa.indexOf("blob:")?Wa.substr(0,Wa.lastIndexOf("/")+1):"";var ke=c.print||console.log.bind(console),
Na=c.printErr||console.warn.bind(console);for(Va in Ub)Ub.hasOwnProperty(Va)&&(c[Va]=Ub[Va]);Ub=null;c.quit&&(Vc=c.quit);var zb;c.wasmBinary&&(zb=c.wasmBinary);var $a;c.noExitRuntime&&($a=c.noExitRuntime);"object"!==typeof WebAssembly&&Na("no native wasm support detected");var oa,ah=new WebAssembly.Table({initial:172,maximum:172,element:"anyfunc"}),Pc=!1,fe="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var J,W,Xa,H,he,
Nf=c.INITIAL_MEMORY||57671680;if(oa=c.wasmMemory?c.wasmMemory:new WebAssembly.Memory({initial:Nf/65536}))var Yb=oa.buffer;Nf=Yb.byteLength;ge(Yb);Xa[1046960]=9430896;var te=[],qe=[],cg=[],se=[],Ya=0,Oc=null,yb=null;c.preloadedImages={};c.preloadedAudios={};var Oa="a.out.wasm";le(Oa)||(Oa=Wf(Oa));var lh={1031:function(c,a,e,d){console.log(c,a,e,d)},1070:function(c,a,e,d){Ba(a&&m(a),m(c),d,m(e))},1097:function(c,a){mb(Math.floor(c-f.canvas.width/2),Math.floor(a-f.canvas.height/2));nc()},1118:function(c){Qd(c)},
1130:function(c,a){a&&(c+="i");c!==Ge&&(Ge=c,document.body.style.cursor='url("'+q.cdn+"cursor"+c+'.gif"),auto')},1151:function(c){af(c)},1170:function(c,a,e){af(c,a,e)},1199:function(c,a){c=Ib(m(c),m(a));k("msgs1").innerHTML+="<li>"+c+"</li>";ob()},1222:function(c,a){setTimeout(n.removeAnim,c*ta.speed/25,a)},1241:function(c,a,e){c=new Uint32Array(oa.buffer,c,a);if(A.active)(e=A.getPeer(e))&&e.send(c);else{a:{a=0;for(var d=ya.length;a<d;a++){var b=ya[a];if(b.superID===e){e=b;break a}}e=void 0}e&&e.sendDirectly("channelMessage",
"nehhof",c)}},1269:function(){Dc&&A.wb.send(Dc);Dc=void 0},1281:function(c,a,e,d,b,f,k,l){Lf(c,a,e,d,b,f,k,l)},1332:function(){Ta()},1352:function(c,a,e,d,b,f){Lf(c,a,e,d,b,f)},1395:function(){k("showGameInfo").innerHTML="Custom Map"},1407:function(){Wd()},1425:function(c,a,e){Ec(c,0,a,e)},1448:function(c){x(c);q.superID==c?(Ba(m(111)),Af()):(c=A.getPeer(c))&&c.close()},1467:function(){k("oneplayertbody").innerHTML='<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">-</button></td><td>'+
m(118).toUpperCase()+"</td><td>"+m(23).toUpperCase()+"</td></tr>";for(var c=0,a=n.nkingdom()-1;c<a;c++)k("oneplayertbody").innerHTML+='<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>';k("addPlayer").onclick=Xg;k("removePlayer").onclick=Yg},1489:function(c,a,e,d,b){for(d=d.toString(16);6>d.length;)d="0"+d;d="#"+d;Gf[b].style.background=d;Hf[b].innerHTML='<input value="'+ja(ia(c,20))+'" type="text">';c=Hf[b].getElementsByTagName("input")[0];
c.onchange=Of;c.team=b+1;c.maxLength=20;c=Wg[b].getElementsByTagName("button")[0];c.iteam=b+1;c.onmousedown=If;c.innerHTML=a;a=Vg[b].getElementsByTagName("button")[0];a.iteam=b+1;a.onmousedown=Jf;a.innerHTML=Z[e];e=document.createElement("input");e.type="color";e.iteam=b+1;e.value=d;e.svg=0==b;Gf[b].appendChild(e);e.onchange=Kf},1531:function(c){xa(c)},1542:function(c,a,e){xa(c,a,e)},1563:function(){zd()},1577:function(){k("magicworkshopmenu").style.display="block";lb()},1664:function(){Ye()},1684:function(){sc()},
1701:function(c,a,e,d,b,f){var g=k("rndtable"),h=document.createElement("tr");g.appendChild(h);g=document.createElement("td");var l=document.createElement("select"),q=l;l.innerHTML='<option value="0">'+Z[0]+'</option><option value="1">'+Z[1]+'</option><option value="2">'+Z[2]+'</option><option value="3">'+Z[3]+"</option>";l.value=c;g.appendChild(l);h.appendChild(g);g=document.createElement("td");l=document.createElement("select");l.innerHTML=Gc[c];l.value=a;l.rndid=f;l.onchange=bh;q.types=l;q.onchange=
ch;g.appendChild(l);h.appendChild(g);g=document.createElement("td");l=document.createElement("input");l.value=e;l.onchange=dh;l.type="number";l.rndid=f;g.appendChild(l);h.appendChild(g);g=document.createElement("td");c=document.createElement("label");c.className="container";a=document.createElement("input");a.type="checkbox";a.rndid=f;a.checked=d;a.onchange=eh;d=document.createElement("span");d.className="checkmark";c.appendChild(a);c.appendChild(d);g.appendChild(c);h.appendChild(g);d="<option value='"+
(Math.pow(2,31)-1)+"'>"+m(24)+"</option>";g=0;for(c=n.nkingdom();g<c;g++)a=g?ja(ia(n.empName(g),20)):m(25),d+='<option value="'+g+'">'+a+"</option>";g=document.createElement("td");l=document.createElement("select");l.innerHTML=d;l.rndid=f;l.value=b;l.onchange=fh;g.appendChild(l);h.appendChild(g);g=document.createElement("td");b=document.createElement("button");b.className="closeIcon";b.onclick=gh;b.rndid=f;g.appendChild(b);h.appendChild(g)},1739:function(c,a,e,d,b,f,k,l,m,n,q,r,u){mc(c,a,e,d,b,0,
f,k,l,m,n,q,r,u)},1813:function(c,a,e,d,b,f,k,l,m,n,q,r,u){mc(c,a,e,d,b,1,f,k,l,m,n,q,r,u)},1887:function(c,a,e,d,b,f,l,n,p,q,r){l=d;n=[m(30),m(31),m(32),m(33),m(34),m(35)];if(k("showGameInfo")){d="<table><tbody>";c==Math.pow(2,31)-1&&(c="***");a==Math.pow(2,31)-1&&(a="***");e==Math.pow(2,31)-1&&(e="***");l==Math.pow(2,31)-1&&(l="***");b=[m(18),c,m(1),p,m(19),a,m(28),f,m(20),e,m(45),q,m(21),l,m(29),n[b],m(13),r];f=b.length;for(p=0;p<f;p+=2)p%4||(p&&(d+="</tr>"),d+="<tr>"),d+='<td style="color:#fff">'+
b[p]+":</td><td>"+b[p+1]+"</td>";d+="</tbody></table>";k("showGameInfo").innerHTML=d}},1949:function(){bb("waitList");k("waitList").style.cssText="\n    position: fixed;\n    z-index: 90;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background: url(nehhon/text.png);\n    border: solid;\n    border-image: url(nehhon/border.gif) 23 repeat;\n    border-width: 23px;\n    padding: 45px;\n    "},1967:function(){Td()},1988:function(){if(k("waitList")){var c=Rb.viewU32(),a=n.nkingdom();
k("waitList").innerHTML="";for(var e="<h1>"+m(76)+'</h1>\n    <table style="margin-top:37px;font-size:21px"><tbody>',d=1;d<a;d++)if(c[3*d]){var b=n.empName(d);b=ja(ia(b,20));e+="<tr><td>"+b+" - "+c[3*d+1]+"%</td></tr>"}k("waitList").innerHTML+=e+"</tbody></table>"}},2002:function(){Qb()},2016:function(){k("playersinfo").innerHTML=""},2050:function(c,a,e,d,b,f){c=ja(ia(c,20));k("playersinfo").innerHTML+='<span style="'+(f&&"text-decoration: line-through;color:#ff0000"||"")+'">'+c+'</span><span style="display:none">'+
a+"</span><div class='playercolor' style='background:rgb("+e+","+d+","+b+")'></div><span class='ping'></span><br>"},2094:function(){sd()},2117:function(){Fb();sc()},2155:function(){sd();Fb();sc()},2288:function(c,a,e,d,b){c=ua[c];c.style.cssText="background-position:"+48*b+"px "+48*a+"px";e&&(c.className="");0<d&&(c.innerHTML=d)},2368:function(c,a){wc=f.RGB;var e=performance.now();Ob||(Ob=[]);c=fc(n.crtStxt(),c);var d=Math.floor(a/16777216);x(Math.floor(a/16777216*100)+"%");a=a/4096%4096;var b=c.length/
12288,g=0;do{var k=b-g;4096<=a+k&&(k=4096-a);f.bindTexture(f.TEXTURE_2D,Fg(d));var l=new Uint8Array(c.buffer,c.byteOffset+12288*g,12288*k);f.texSubImage2D(f.TEXTURE_2D,0,0,a,4096,k,wc,f.UNSIGNED_BYTE,l);g+=k;a=0;d++}while(g<b);f.activeTexture(f.TEXTURE2);f.bindTexture(f.TEXTURE_2D,sb);x("gl",performance.now()-e)},2392:function(c){x("limit",c);rc(Gd,c);rc(Hd,c);rc(Id,c);rc(Jd,c)},2415:function(){jf()},2430:function(){var c=tb.viewF32(),a=zc.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Id);f.bufferSubData(f.ARRAY_BUFFER,
16*c[4],a)},2451:function(){kf()},2471:function(){var c=tb.viewF32(),a=zc.viewF32();f.bindBuffer(f.ARRAY_BUFFER,Gd);f.bufferSubData(f.ARRAY_BUFFER,16*c[4],a)},2488:function(c,a,e,d,b,f){k("custombody").innerHTML+="<tr>\n<td style='background:rgb("+d+","+b+","+f+')\' class="ucolor1"></td>\n<td class="username1">'+ja(ia(c,20))+'</td>\n<td style="display:none" class="race1">'+e+'</td>\n<td class="team1">'+a+"</td></tr>"},2640:function(c,a){eb(c,a)},2736:function(){Se()},2748:function(c,a){c&&(r.className=
"");8*(c+1)<a&&(y.className="")},2772:function(c,a,e,d,b,f,l,q,p,r,u,z,y,C,A){N("manamenu");N("manamenu1");N("progressmana");d=m(d);c&&a?(k("stock").className="",k("manamenu1").style.display="block",k("manamenu1").style.backgroundPosition="0px -80px",k("manamenu1").innerHTML=c):k("stock").className="blocked";1==b&&e&&n.myk()==y&&(c=Math.floor(25*(e-v.cycle)/1E3),0<c&&(k("manamenu").style.display="block",k("manamenu").style.backgroundPosition="0px -200px",k("manamenu").innerHTML=c+"s"));ic.style.display=
"block";id.innerHTML=d;f||0==b?(gc.innerHTML=f,S("attackmenu")):N("attackmenu");0==b||2==b&&l?(hc.innerHTML=l,S("defencemenu")):N("defencemenu");p&&(k("manamenu").style.display="block",k("manamenu").innerHTML=q,27===r?(k("manamenu1").style.backgroundPosition="0px -280px",S("manamenu1"),k("manamenu1").innerHTML=q,k("manamenu").style.backgroundPosition="0px -240px",k("manamenu").innerHTML=u):(k("progressmana").value=~~(100*q/p),S("progressmana"),k("manamenu").style.backgroundPosition="0px -120px"));
A&&(f=k("manamenu1"),x(C),74==r&&(C="fish"),f.style.display="block",f.style.backgroundPosition=kd[C]&&kd[C].background,f.innerHTML=A);jb.innerHTML=z;jb.style.display="block";0!==z||2!=b&&1!=b||(jb.style.display="none");ic.innerHTML=ja(ia(n.empName(y),20));qa.style.display="block"},2864:function(c,a){-1===c?(qa.value=100,qa.max=100,kb.innerHTML=m(43)):(qa.value=c,-1===a?(qa.max=100,qa.value=1):qa.max=a,kb.innerHTML=~~c+"/"+a)},2888:function(c,a,e){qa.value=a;qa.max=e;kb.innerHTML=a+"/"+e;qa.style.display=
"block";k("kingdom").innerHTML=c+" "+m(66)},2911:function(c,a,e,d,b,f,k,l,m,n){hh(c,a,e,d,b,f,k,l,m,n)},2965:function(c,a,e,d,b,f,k,l){var g="";f&&(g+="<span>"+m(f)+"</span>");k&&(g+="<span>"+m(k)+"</span>");if(l){g+='<span class="red">'+m(75)+": ";f=n.shapoint();f=new Int32Array(oa.buffer,f,l);for(k=0;k<l;k++)g+=m(f[k]),k+1<l&&(g+=", ");g+="</span>"}g+="<span>";c&&(g+=c+"<img class='resource' src='nehhon/gold.gif' /> ");a&&(g+=a+"<img class='resource' src='nehhon/wood.gif' /> ");e&&(g+=e+"<img class='resource' src='nehhon/food.gif' /> ");
d&&(g+=d+"<img class='resource' src='nehhon/stone.gif' /> ");g+="</span>";b&&(g+="<span class='shotcut'>"+String.fromCharCode(b).toUpperCase()+"</span>");jd.innerHTML=g},3064:function(){P()},3158:function(c){$c(c)},3375:function(){ka.update=!0},3405:function(){f.getError()===f.CONTEXT_LOST_WEBGL&&(f=f.canvas.getContext("webgl2",{antialias:!1,alpha:!1}),x("restored"));if(!Rd){var c=U?"precision highp float;\nattribute vec3 a_position;\nattribute vec4 a_texCoord;\nattribute vec4 a_physic;\nattribute vec4 a_margins;\nattribute float a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D u_image1;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\nuniform float mapSize;\n\nuniform float zMax;\nvarying highp vec2 vTextureCoord;\nvarying vec4 v_kcolor;\nvarying float width;\nvarying float rColor;\nvarying float oy;\n\n\nfloat delayr(float pos){\nhighp vec2 xy = vec2(mod(pos,128.0) ,   floor(pos/128.0) )/128.0;\nreturn (texture2D(delay, xy).r);\n}\n\n\nvoid main() {\n    const highp float TSIZE=4096.0;\n    float t;\n    highp float jump=0.0;\n\n    highp vec2 txtcord;\n    txtcord.y=floor(a_texCoord.x);\n    txtcord.x=a_texCoord.x-txtcord.y;\n    txtcord.y/=TSIZE;\n\n    vec2 sizes = vec2(a_margins[0],a_margins[1]);\n    float pack=floor(a_texCoord[3]);\n\n\n    float frames=floor((pack)/65536.0);\n    float fps=mod(pack,65536.0);\n\n    if(frames>100.0) {\n        if(frames<200.0) rColor=1.0; else rColor=2.0;\n        frames-=100.0;\n    }\n\n\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=floor(t * fps*0.001);         \n}else{\n\n    //fps=12.0;\n    //jump=floor(t * fps*0.001);  \n\n\n\n    float index=floor(fps-100.0);\n\n    float spt= mod(t,delayr(frames-1.0+index));\n    bool stop=false;\n        for(int i=0;i<55;i++){\n        if(!stop){\n        jump=float(i);\n        if(jump<frames) \n        if(delayr(jump+index)>spt)\n        stop=true;\n        }\n        }\n\n}\n\njump=mod(jump,frames);\ntxtcord.x+=jump*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n}\n\n\n    vec2 mxy=vec2(0.0);\n\n    if(miniMap==3){\n        if(a_margins[3]==0.0){\n            sizes=vec2(0.0);\n            return;\n        }else{\n        mxy=sizes/2.0;\n        sizes=vec2(a_margins[3]*32.0);\n        mxy+=-sizes;\n        sizes=sizes*2.0+1.0;\n        }\n    }\n\n    oy=txtcord.y*TSIZE;\n\n    \n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n        tsizes=vec2(64.0);\n    }\n    width=tsizes.x;\n\n    if(a_step==1.0||a_step==3.0){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2.0||a_step==3.0){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n    if(miniMap==3&&sizes==vec2(0.0)){\n        mxy=vec2(0.0);\n    }\n\n\tfloat z=a_position.z;\n\n\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\n    if(miniMap<2) mxy*=0.0;\n\t}\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n\n    mxy.y+=physicY;\n\nvec2 res=u_resolution;\nif(miniMap!=0){\n    z=0.0;\n    res=vec2(mapSize*32.0);\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\n}\n\n\n\n   gl_Position = vec4(((a_position.xy+mxy) / res * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\n\nvec4 outColor=texture2D(colorArray,vec2(a_texCoord.z/64.0,0));\n//outColor=vec4(1.0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n":
"#version 300 es\nprecision highp float;\n       \nin vec3 a_position;\nin vec4 a_texCoord;\nin vec4 a_physic;\nin vec4 a_margins;\nin uint a_step;\n\nuniform float zoom;\nuniform mediump int miniMap;\nuniform float now;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform sampler2D delay;\nuniform sampler2D colorArray;\nuniform float mapSize;\n\nuniform float zMax;\nout highp vec2 vTextureCoord;\nout vec4 v_kcolor;\nout float oy;\nout float width;\nflat out int rColor;\n\nvec4 superArray(in highp int position) {\n     return vec4(0.0);\n}\n\nvoid main() {\nfloat t;\nconst highp float TSIZE=4096.0;\n\nhighp vec2 txtcord;\ntxtcord.y=floor(a_texCoord.x);\ntxtcord.x=a_texCoord.x-txtcord.y;\ntxtcord.y/=TSIZE;\n\nvec2 sizes = vec2(a_margins[0],a_margins[1]);\nint pack=int(floor(a_texCoord[3]));\n\nint frames=(pack>>16)&0xffff;\nfloat fps=float(pack&0xffff);\n\n\nif(frames>100) {\nif(frames<200) rColor=1; else rColor=2;\nframes-=100;\n}\n\nint jump=0;\nif(fps!=0.0&&miniMap==0){\nif(a_texCoord.y>=0.0){\nt=(now-a_texCoord.y);\nif(fps<100.0){\njump=int(floor(t * fps*0.001));         \n}else{\n\n\nint index=int(floor(fps-100.0));\n\nfloat spt= mod(t,texelFetch(delay, ivec2(frames-1+index, 0), 0).r);\n\nfor(jump=0;jump<frames;jump++)\nif(texelFetch(delay, ivec2(jump+index, 0), 0).r>spt){ \nbreak;\n}\n\n\n\n\n}\n\njump=(jump%frames);\n\n\ntxtcord.x+=float(jump)*sizes.x*sizes.y/TSIZE;\ntxtcord.y+=floor(txtcord.x)/TSIZE;\ntxtcord.x=mod(txtcord.x,1.0);\n}\n\n\n\n}\n\nvec2 mxy=vec2(0.0);\n\n    if(miniMap==3){\n        if(a_margins[3]==0.0){\n            sizes=vec2(0.0);\n            return;\n        }else{\n        mxy=sizes/2.0;\n        sizes=vec2(a_margins[3]*32.0);\n        mxy+=-sizes;\n        sizes=sizes*2.0+1.0;\n        }\n    }\n\n    oy=txtcord.y*TSIZE;\n\n    vec2 tsizes=sizes;\n    if(sizes.x<0.0){\n        sizes.x*=-1.0;\n         tsizes=vec2(64.0);\n    }\n    width=tsizes.x;\n\n    if(a_step==1u||a_step==3u){\n    mxy.x+=sizes.x;\n    txtcord.x+=tsizes.x/TSIZE;\n    }\n\n    if(a_step==2u||a_step==3u){\n    mxy.y+=sizes.y;\n    txtcord.y+=tsizes.y/TSIZE;\n    }\n\n\n\n\tfloat z=a_position.z;\n\n\n    \n\nif(miniMap==3&&sizes==vec2(0.0)){\n    mxy=vec2(0.0);\n}\n\n\tif(z<0.0&&z!=-55.0){\n\tz*=-1.0;\nif(miniMap!=2) mxy*=0.0;\n\t}\n\n\n\n\n\n\nif(a_margins.z!=0.0){\n\tfloat s = sin(a_margins.z);\n\tfloat c = cos(a_margins.z);\n\tmat2 m = mat2(c, -s, s, c);\n\tmxy.xy*=m;\n}\n\n\n\n    t = (now - a_physic.w) * 0.001;\n    mxy.x+=a_physic.x * t;\n\tfloat physicY=a_physic.y * t + a_physic.z * .5 * t * t;\n    mxy.y+=physicY;\n\n    vec2 res=u_resolution;\n\nif(miniMap!=0){\n    z=0.0;\n    res=vec2(mapSize*32.0);\n}else{\n\tz=(1.0 - (physicY+z)/ zMax)*.9;\n}\n\n\nvec2 zm=vec2(zoom, -zoom);\nif(a_position.z!=-55.0)\nmxy+=u_translation;\nelse {\nz=0.0;\nzm=vec2(1.0,-1.0);\n}\n\n\n   gl_Position = vec4(((a_position.xy+mxy) / res * 2.0 - 1.0) * zm, (z), 1.0);\n   vTextureCoord=txtcord;\n\nvec4 outColor=texelFetch(colorArray, ivec2(a_texCoord.z, 0), 0);\n\nif(a_texCoord.z<16.0) outColor.a+=1.0;\n\n\n   v_kcolor=outColor;\n}\n";
var a=f.createShader(f.VERTEX_SHADER);f.shaderSource(a,c);f.compileShader(a);var e=U?"precision highp float;\n        uniform float zoom;\n        uniform vec2 u_translation;\n        uniform float mapSize;\n        uniform sampler2D fogMap;\n\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform mediump int miniMap;\nvarying vec4 v_kcolor;\nvarying highp vec2 vTextureCoord;\nvarying float width;\nvarying float oy;\nvarying float rColor;\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture2D(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture2D(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture2D(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture2D(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture2D(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture2D(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture2D(img_common[6], coords);\n}\n\n\nvoid main() {\n    const highp float TSIZE=4096.0;\n\n    vec4 light = u_ambient;\n\n\n    if(miniMap!=3){\n\n        vec2 xy;\n        if(miniMap==1){\n        xy=vec2(gl_FragCoord.x-4.0,-(u_resolution.y-gl_FragCoord.y-31.0))/(128.0);\n        \n        }else{\n        xy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\n        xy.y*=-1.0;\n        xy/=(mapSize*32.0);\n        }\n        \n        \n        vec4 fog=texture2D(fogMap,xy);\n        if(fog.r==0.0){ \n        if(fog.g==0.0) light*=vec4(0.0,0.0,0.0,1.0);\n        else light*=vec4(0.5,0.5,0.5,1.0);\n            }\n        }\n        \n\nif(miniMap==0){\n\n\n    float dy=floor(vTextureCoord.y*4096.0-oy);\n    highp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/4096.0,oy/4096.0);\n    txtCoords.y+=floor(txtCoords.x)/4096.0;\n    \n    vec4 color=tcmm(txtCoords);\n    if(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\n    if(rColor==2.0) color.a=(color.r+color.g+color.b)/2.5;\n    if(color.a<0.1) discard;\n\nif(rColor==1.0 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)&&v4no(color,95)&&v4no(color,96)&&v4no(color,98)\n&&v4no(color,101)&&v4no(color,103)&&v4no(color,107)&&v4no(color,108)\n&&v4no(color,109)&&v4no(color,118)&&v4no(color,121)&&v4no(color,124)\n&&v4no(color,134)&&v4no(color,135)&&v4no(color,139)&&v4no(color,148)\n&&v4no(color,150)&&v4no(color,151)&&v4no(color,156)&&v4no(color,163)\n&&v4no(color,164)&&v4no(color,165)&&v4no(color,166)&&v4no(color,167)\n&&v4no(color,173)&&v4no(color,177)&&v4no(color,180)&&v4no(color,183)\n&&v4no(color,185)&&v4no(color,186)&&v4no(color,195)&&v4no(color,196)\n&&v4no(color,198)&&v4no(color,200)&&v4no(color,203)&&v4no(color,210)\n&&v4no(color,214)&&v4no(color,215)&&v4no(color,223)&&v4no(color,225)\n&&v4no(color,230)&&v4no(color,231)&&v4no(color,241)&&v4no(color,251)\n&&v4no(color,252)&&v4no(color,253)&&v4no(color,254)){\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0) color*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n\n\n\n\n\n//vec4 light=vec4(1.0);\n\ngl_FragColor=color*light;\n}else if(miniMap<3){\n\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\ngl_FragColor=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\ngl_FragColor=v_kcolor;\n\n\ngl_FragColor*=light;\n}else{\ngl_FragColor=vec4(1.0);  \n    }\n\n}":
"#version 300 es\nprecision highp float;\n\n\nuniform vec2 u_translation;\nuniform sampler2D fogMap;\nuniform vec2 u_resolution;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform mediump int miniMap;\nuniform float mx;\nuniform float mapSize;\nuniform float zoom;\n\nin vec4 v_kcolor;\nin highp vec2 vTextureCoord;\nin float width;\nin float oy;\nflat in int rColor;\nout vec4 COLOR;\n\n\nbool v4no(vec4 color,int r){\nif(color.r==float(r)/255.0) return false;\nreturn true;\n}\n\nvec4 tcmm(vec2 coords){\nif(coords.y<1.0)\nreturn texture(img_common[0], coords);\nelse if(coords.y<2.0)\nreturn texture(img_common[1], coords);\nelse if(coords.y<3.0)\nreturn texture(img_common[2], coords);\nelse if(coords.y<4.0)\nreturn texture(img_common[3], coords);\nelse if(coords.y<5.0)\nreturn texture(img_common[4], coords);\nelse if(coords.y<6.0)\nreturn texture(img_common[5], coords);\nelse if(coords.y<7.0)\nreturn texture(img_common[6], coords);\n}\n\n\n\nvoid main() {\nconst highp float TSIZE=4096.0;\n\n\n\n\nvec4 light = u_ambient;\n\nif(miniMap!=3){\n\nvec2 xy;\nif(miniMap==1){\nxy=vec2(gl_FragCoord.x-4.0,-(u_resolution.y-gl_FragCoord.y-31.0))/(128.0);\n\n}else{\nxy=vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom-u_translation+0.5*(u_resolution-u_resolution/zoom);\nxy.y*=-1.0;\nxy/=(mapSize*32.0);\n}\n\n\nvec4 fog=texture(fogMap,xy);\nif(fog.r==0.0){ \nif(fog.g==0.0) light*=vec4(0.0,0.0,0.0,1.0);\nelse light*=vec4(0.5,0.5,0.5,1.0);\n    }\n}\n\n\n\nif(miniMap==0){\n\n\n\n\n\nfloat dy=floor(vTextureCoord.y*4096.0-oy);\nhighp vec2 txtCoords=vec2(vTextureCoord.x+dy*width/4096.0,oy/4096.0);\ntxtCoords.y+=floor(txtCoords.x)/4096.0;\n\nvec4 color=tcmm(txtCoords);\nif(color==vec4(0.0,0.0,0.0,1.0)) discard;\n\nif(rColor==2) color.a=(color.r+color.g+color.b)/2.5;\nif(color.a<0.1) discard;\n\n\nif(rColor==1 &&color.r==color.g&&color.r==color.b\n&&v4no(color,68)&&v4no(color,95)&&v4no(color,96)&&v4no(color,98)\n&&v4no(color,101)&&v4no(color,103)&&v4no(color,107)&&v4no(color,108)\n&&v4no(color,109)&&v4no(color,118)&&v4no(color,121)&&v4no(color,124)\n&&v4no(color,134)&&v4no(color,135)&&v4no(color,139)&&v4no(color,148)\n&&v4no(color,150)&&v4no(color,151)&&v4no(color,156)&&v4no(color,163)\n&&v4no(color,164)&&v4no(color,165)&&v4no(color,166)&&v4no(color,167)\n&&v4no(color,173)&&v4no(color,177)&&v4no(color,180)&&v4no(color,183)\n&&v4no(color,185)&&v4no(color,186)&&v4no(color,195)&&v4no(color,196)\n&&v4no(color,198)&&v4no(color,200)&&v4no(color,203)&&v4no(color,210)\n&&v4no(color,214)&&v4no(color,215)&&v4no(color,223)&&v4no(color,225)\n&&v4no(color,230)&&v4no(color,231)&&v4no(color,241)&&v4no(color,251)\n&&v4no(color,252)&&v4no(color,253)&&v4no(color,254))\n{\ncolor.rgb*=v_kcolor.rgb;\n}\n\nif(v_kcolor.a>1.0)\n{\ncolor*=v_kcolor-vec4(0.0,0.0,0.0,1.0);\n}\n\n\n\n\n\n\n\n\n\nCOLOR=color*light;\n}else if(miniMap<3){\nif(floor(v_kcolor.a*255.0-255.0+.5)==126.0) discard;\nif(v_kcolor.a>1.0)\nCOLOR=v_kcolor-vec4(0.0,0.0,0.0,1.0);\nelse\nCOLOR=v_kcolor;\n\n\nCOLOR*=light;\n}else{\n\nCOLOR=vec4(1.0);\n    \n}\n\n}";
c=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(c,e);f.compileShader(c);G=f.createProgram();f.attachShader(G,a);f.attachShader(G,c);f.linkProgram(G);f.useProgram(G);(a=f.getShaderInfoLog(a))&&console.log("Shader compiler log1: "+a);(a=f.getShaderInfoLog(c))&&console.log("Shader compiler log1: "+a);c=U?"precision highp float;\nattribute vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}":
"#version 300 es\nprecision highp float;\nin vec3 a_position;\nuniform vec2 u_resolution;\nuniform vec2 u_translation;\nuniform mediump int miniMap;\nuniform float zoom;\n\nvoid main() {\nfloat depth;\nif(miniMap!=0){\ndepth=.03;\n}else{\ndepth=1.0;\n}\ngl_Position = vec4(a_position.x, a_position.y, depth, 1.0);\n\n}";a=f.createShader(f.VERTEX_SHADER);f.shaderSource(a,c);f.compileShader(a);e=U?"precision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\nuniform vec2 u_translation;\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n#define TSIZE 4096.0;\n\nuniform sampler2D u_image1;\n\nhighp vec2 oneD2D(highp float xy,float sum){\n    float fl=floor(xy);\n    float x=xy-fl+sum/TSIZE;\n    float y=(fl+floor(x))/TSIZE;\n    return vec2(x, y);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture2D(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture2D(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture2D(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture2D(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture2D(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture2D(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture2D(img_common[6], coords);\n    }\nvoid main() {\nvec4 color;\n\n\nvec2 xy =  vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\n\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0) discard;\n\nvec4 coords=texture2D(img_data,xy/(mapSize*32.0));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,1.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nfloat wids=floor(coords[3]);\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=floor(wids/65536.0)*32.0;\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x+xym32.y*w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=mod(floor(wids/256.0),256.0);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=mod(wids,256.0);\n}\n\n\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,1.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n    w=512.0;\n    xym32.x+=w*w*u_fps;\n}\ncolor=tcmm(oneD2D(tid,xym32.x+xym32.y*w));  \n\n}\n\nif(miniMap==0) color*=u_ambient;\n\nvec4 fog=texture2D(fogMap,vec2(xy.x,-xy.y)/(mapSize*32.0));\nif(fog.r==0.0) {\n    if(fog.g==1.0) color*=vec4(0.5,0.5,0.5,1.0);\n    else\n    color=vec4(0.0,0.0,0.0,1.0);\n}\n\ngl_FragColor=color;\n}":
"#version 300 es\nprecision highp float;\n\nuniform float u_fps;\nuniform mediump int miniMap;\nuniform sampler2D img_common[7];\nuniform vec4 u_ambient;\n\nuniform vec2 u_translation;\n\nuniform vec2 u_resolution;\nuniform vec2 minimapMargin;\nuniform sampler2D img_data;\nuniform sampler2D fogMap;\nout vec4 COLOR;\nuniform float zoom;\nuniform float mx;\nuniform float mapSize;\n\n#define TSIZE 4096.0\n\nvec2 oneD2D(highp float xy,float sum){\n    float fl=floor(xy);\n    float x=xy-fl+sum/TSIZE;\n    float y=(fl+floor(x))/TSIZE;\n    return vec2(x, y);\n}\n\nvec4 tcmm(vec2 coords){\n    if(coords.y<1.0)\n    return texture(img_common[0], coords);\n    else if(coords.y<2.0)\n    return texture(img_common[1], coords);\n    else if(coords.y<3.0)\n    return texture(img_common[2], coords);\n    else if(coords.y<4.0)\n    return texture(img_common[3], coords);\n    else if(coords.y<5.0)\n    return texture(img_common[4], coords);\n    else if(coords.y<6.0)\n    return texture(img_common[5], coords);\n    else if(coords.y<7.0)\n    return texture(img_common[6], coords);\n    }\n\nvoid main() {\nvec4 color;\n\n\nvec2 xy = vec2(gl_FragCoord.x,u_resolution.y-gl_FragCoord.y)/zoom;\nif(miniMap!=0){\nxy+=minimapMargin/zoom;\n}else{\nxy+=-u_translation+vec2(mx,0.0)/zoom+0.5*(u_resolution-u_resolution/zoom);\n}\n\n\n\nif(xy.x<0.0||xy.y<0.0||xy.x>mapSize*32.0||xy.y>mapSize*32.0) discard;\n\nvec4 coords=texture(img_data,xy/(mapSize*32.0));\nhighp float tid;\n\nvec4 nrgb=vec4(0.0,0.0,0.0,1.0);\nvec2 xym32=vec2(floor(mod(xy.x,32.0)),floor(mod(xy.y,32.0)));\nint wids=int(floor(coords[3]));\n\nfloat w;\nif(coords[2]!=0.0) {\n    float w3=float((wids>>16)&0xff)*32.0;\n\n\n    nrgb=tcmm(oneD2D(coords[2],xym32.x+xym32.y*w3));\n\n}\n\n\nif(nrgb==vec4(1.0,0.0,1.0,1.0)) {\nw=float((wids>>8)&0xff);\ntid=coords[1];\n}\nelse{\ntid=coords[0];\nw=float(wids&0xff);\n}\n\n\n\n\n\nif(nrgb!=vec4(0.0,0.0,0.0,1.0)&&nrgb!=vec4(1.0,0.0,1.0,1.0)){\ncolor=nrgb;\n}else{\nw*=32.0;\nif(w==0.0){\n     w=512.0;\n     xym32.x+=w*w*u_fps;\n}\n\ncolor=tcmm(oneD2D(tid,xym32.x+xym32.y*w));  \n\n}\n\nif(miniMap==0) color*=u_ambient;\n\nvec4 fog=texture(fogMap,vec2(xy.x,-xy.y)/(mapSize*32.0));\nif(fog.r==0.0) {\n    if(fog.g==1.0) color*=vec4(0.5,0.5,0.5,1.0);\n    else\n    color=vec4(0.0,0.0,0.0,1.0);\n}\n\n//\nCOLOR=color;\n}";
c=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(c,e);f.compileShader(c);I=f.createProgram();f.attachShader(I,a);f.attachShader(I,c);f.linkProgram(I);(a=f.getShaderInfoLog(a))&&console.log("Shader1 compiler log T: "+a);(a=f.getShaderInfoLog(c))&&console.log("Shader compiler log T: "+a)}a=f.getAttribLocation(G,"a_position");c=f.getAttribLocation(G,"a_texCoord");var d=f.getAttribLocation(G,"a_step");e=f.getAttribLocation(G,"a_physic");var b=f.getAttribLocation(G,"a_margins");f.useProgram(I);vc=f.getUniformLocation(I,
"minimapMargin");Kb=f.getUniformLocation(I,"u_translation");Md=f.getUniformLocation(I,"u_resolution");Ld=f.getUniformLocation(I,"u_fps");Ue=f.getUniformLocation(I,"u_ambient");qc=f.getUniformLocation(I,"zoom");f.getUniformLocation(I,"mx");f.getUniformLocation(I,"borderCoords");f.getUniformLocation(I,"waterBorder");pc=f.getUniformLocation(I,"miniMap");L=parseInt(localStorage.scale)/100;f.uniform1i(pc,0);f.uniform2fv(Kb,[0,0]);f.uniform1f(Ld,-1);f.uniform1f(qc,L);f.uniform1f(f.getUniformLocation(I,
"mx"),0);U?f.uniform1f(f.getUniformLocation(I,"mapSize"),Math.pow(2,Math.ceil(Math.log2(n.mapWidth())))):f.uniform1f(f.getUniformLocation(I,"mapSize"),n.mapWidth());uc=R?[0*L,-60*L]:[-4*L,-31*L];f.uniform2fv(vc,uc);var h=f.getAttribLocation(I,"a_position");Nd=nf();rb(Nd);var k=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,k);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),f.STATIC_DRAW);f.enableVertexAttribArray(h);f.vertexAttribPointer(h,2,f.FLOAT,!1,0,0);rb(null);f.useProgram(G);
f.bindBuffer(f.ARRAY_BUFFER,null);Od=nf();rb(Od);ef=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,ef);f.enableVertexAttribArray(d);U?(Lb=f.getExtension("ANGLE_instanced_arrays"),f.vertexAttribPointer(d,1,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),f.STATIC_DRAW),Lb.vertexAttribDivisorANGLE(d,0)):(f.vertexAttribIPointer(d,1,f.UNSIGNED_BYTE,0,0),f.bufferData(f.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),f.STATIC_DRAW),f.vertexAttribDivisor(d,0));d=n.mapWidth();bf=Math.floor(d*
d/2);Gd=Mb(c,4);Hd=Mb(a,3);Id=Mb(e,4);Jd=Mb(b,4);rb(null);df=f.getUniformLocation(G,"u_resolution");Ve=f.getUniformLocation(G,"u_ambient");Jb=f.getUniformLocation(G,"u_translation");oc=f.getUniformLocation(G,"zoom");cf=f.getUniformLocation(G,"now");pb=f.getUniformLocation(G,"miniMap");f.uniform1f(f.getUniformLocation(G,"zMax"),v.zMax);f.uniform1i(pb,0);f.useProgram(G);a=ad(n.sharedDelayID(),1323);v.daylength||(v.daylength=2880);v.initialhour||(v.initialhour=12);c=0;for(e=ra.length;c<e;c++).55>ra[c]&&
(ra[c]=.55);Fe();f.uniform1f(f.getUniformLocation(G,"mapSize"),n.mapWidth());f.uniform1f(f.getUniformLocation(G,"mx"),-q.mx*L);f.uniform1f(oc,L);f.uniform2fv(Jb,[0,0]);xc.changed=0;window.addEventListener("resize",xc,!1);xc();f.blendEquation(f.FUNC_ADD);f.blendFunc(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA);f.disable(f.DITHER);f.disable(f.BLEND);performance.now();if(!Rd){sc();f.activeTexture(f.TEXTURE0);e=f.createTexture();f.bindTexture(f.TEXTURE_2D,e);if(U){f.getExtension("OES_texture_float");b=new Float32Array(65536);
for(c=0;c<b.length;c++)b[4*c]=a[c];f.texImage2D(f.TEXTURE_2D,0,f.RGBA,128,128,0,f.RGBA,f.FLOAT,b)}else f.texImage2D(f.TEXTURE_2D,0,f.R16F,a.length,1,0,f.RED,f.FLOAT,a);qb();f.bindTexture(f.TEXTURE_2D,null);f.bindTexture(f.TEXTURE_2D,e);f.uniform1i(f.getUniformLocation(G,"delay"),0);f.activeTexture(f.TEXTURE2)}a=n.mapWidth();f.activeTexture(f.TEXTURE2);Kd=f.createTexture();f.bindTexture(f.TEXTURE_2D,Kd);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,1,1,0,f.RGBA,f.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]));
qb();Nb=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,Nb);sb=f.createTexture();f.bindTexture(f.TEXTURE_2D,sb);U&&(a=Math.pow(2,Math.ceil(Math.log2(a))));f.texImage2D(f.TEXTURE_2D,0,f.RGBA,a,a,0,f.RGBA,f.UNSIGNED_BYTE,null);qb();Nb.width=a;Nb.height=a;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,sb,0);n.vsblt()?f.clearColor(0,0,0,1):f.clearColor(1,1,1,1);f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);f.clearColor(0,0,0,1);f.bindFramebuffer(f.FRAMEBUFFER,null);f.useProgram(I);
f.uniform1i(f.getUniformLocation(I,"fogMap"),2);f.useProgram(G);f.uniform1i(f.getUniformLocation(G,"fogMap"),2);f.activeTexture(f.TEXTURE2);n.setupGL(L);f.enable(f.DEPTH_TEST);f.depthFunc(f.LEQUAL);aa.fp1000=1E3;aa.delta=0;aa.now=0;aa.frameCount=0;f.bindTexture(f.TEXTURE_2D,sb);Rd=na.setup=!0},3417:function(c,a,e,d,b,f,l,m,n){e=ja(ia(e,20));a=md(a);var g=k("edpltbl").getElementsByTagName("input"),h=8*c;g[h].onchange=ih;g[h+1].onchange=Of;g[h+2].oninput=Hc;g[h+3].oninput=Hc;g[h+4].oninput=Hc;g[h+5].oninput=
Hc;g[h].value=a;g[h+1].value=e;g[h+2].value=2147483647==b?"\u221e":b;g[h+3].value=2147483647==f?"\u221e":f;g[h+4].value=2147483647==l?"\u221e":l;g[h+5].value=2147483647==m?"\u221e":m;g[h+6].value=d;g[h+7].value=n;g[h+2].res=0;g[h+3].res=1;g[h+4].res=2;g[h+5].res=3;g[h+6].onchange=jh;g[h+6].checked=d;g[h+7].onchange=kh;g[h].team=c+1;g[h+1].team=c+1;g[h+2].team=c+1;g[h+3].team=c+1;g[h+4].team=c+1;g[h+5].team=c+1;g[h+6].team=c+1;g[h+7].team=c+1},3480:function(c){Bf(c)},3496:function(){P.stop();xa("f",
0,0,void 0,1,0,P.id);var c=F("div",document.body,"<h2>"+m(406)+" "+m(407)+"</h2>");c.id="F";c.className="fullwindow disco";c.addCloseIcon()},3508:function(){P.stop();xa("f",0,0,void 0,1,0,P.id);var c=F("div",document.body,"<h2>F</h2><p>"+m(404)+" "+m(405)+"</p>");c.id="F";c.className="fullwindow disco";c.addCloseIcon()},3519:function(c){if(k("progressvalue")){var a=k("progressvalue").innerHTML.split("/");a.length&&(k("progressone").value-=c,k("progressvalue").innerHTML=a[0]-c+"/"+a[1])}},3536:function(c,
a){R||(k("pop").innerHTML=c+"/"+a)},3555:function(c,a,e,d){R||(c==Math.pow(2,31)-1&&(c="***"),a==Math.pow(2,31)-1&&(a="***"),e==Math.pow(2,31)-1&&(e="***"),d==Math.pow(2,31)-1&&(d="***"),Ie.innerHTML=c,Je.innerHTML=a,Ke.innerHTML=e,Le.innerHTML=d)}};qe.push({func:function(){Pf()}});var Q={xhrs:[],setu64:function(c,a){H[c>>2]=a;H[c+4>>2]=a/4294967296|0},openDatabase:function(c,a,e,d){try{var b=indexedDB.open(c,a)}catch(h){return d(h)}b.onupgradeneeded=function(a){a=a.target.result;a.objectStoreNames.contains("FILES")&&
a.deleteObjectStore("FILES");a.createObjectStore("FILES")};b.onsuccess=function(a){e(a.target.result)};b.onerror=function(a){d(a)}},staticInit:function(){Q.openDatabase("emscripten_filesystem",1,function(c){Q.dbInstance=c;Nc("library_fetch_init")},function(){Q.dbInstance=!1;Nc("library_fetch_init")});"undefined"!==typeof ENVIRONMENT_IS_FETCH_WORKER&&ENVIRONMENT_IS_FETCH_WORKER||ie("library_fetch_init")}},Vb={mappings:{},buffers:[null,[],[]],printChar:function(c,a){var e=Vb.buffers[c];0===a||10===
a?((1===c?ke:Na)(ib(e,0)),e.length=0):e.push(a)},varargs:void 0,get:function(){Vb.varargs+=4;return Xa[Vb.varargs-4>>2]},getStr:function(c){return sa(c)},get64:function(c,a){return c}};Q.staticInit();var Qf={_emscripten_fetch_free:function(c){delete Q.xhrs[c-1]},emscripten_asm_const_iii:function(c,a,e){a=ac(a,e);return lh[c].apply(null,a)},emscripten_get_now:function(){return performance.now()},emscripten_get_sbrk_ptr:function(){return 4187840},emscripten_is_main_browser_thread:function(){return!0},
emscripten_memcpy_big:function(c,a,e){J.copyWithin(c,a,a+e)},emscripten_resize_heap:function(c){var a=J.length;if(2147418112<c)return!1;for(var e=1;4>=e;e*=2){var d=a*(1+.2/e);d=Math.min(d,c+100663296);d=Math.min(2147418112,Yf(Math.max(16777216,c,d),65536));a:{try{oa.grow(d-Yb.byteLength+65535>>16);ge(oa.buffer);var b=1;break a}catch(h){}b=void 0}if(b)return!0}return!1},emscripten_start_fetch:function(c,a,e,d,b){"undefined"!==typeof $a&&($a=!0);var f=c+112,g=sa(f),k=H[f+36>>2],l=H[f+40>>2],m=H[f+
44>>2],n=H[f+48>>2],q=H[f+52>>2],r=!!(q&4),u=!!(q&32);q=!!(q&16);var v=function(b,c,d){k?hb(k,b):a&&a(b)},x=function(a,b,c){m?hb(m,a):d&&d(a)},y=function(a,b,c){l?hb(l,a):e&&e(a)},A=function(a,c,d){n?hb(n,a):b&&b(a)},E=function(a,b,c){Qc(a,v,y,x,A)},B=function(b,c,d){oe(Q.dbInstance,b,c.response,function(b,c,d){k?hb(k,b):a&&a(b)},function(b,c,d){k?hb(k,b):a&&a(b)})},F=function(a,b,c){Qc(a,B,y,x,A)};if("EM_IDB_STORE"===g)g=H[f+84>>2],oe(Q.dbInstance,c,J.slice(g,g+H[f+88>>2]),v,y);else if("EM_IDB_DELETE"===
g)bg(Q.dbInstance,c,v,y);else if(q){if(u)return 0;Qc(c,r?B:v,y,x,A)}else ag(Q.dbInstance,c,v,u?y:r?F:E);return c},fd_write:function(c,a,e,d){for(var b=0,f=0;f<e;f++){for(var g=Xa[a+8*f>>2],k=Xa[a+(8*f+4)>>2],l=0;l<k;l++)Vb.printChar(c,J[g+l]);b+=k}Xa[d>>2]=b;return 0},memory:oa,setTempRet0:function(c){},table:ah},Rf=function(){function f(a,d){c.asm=a.exports;Nc("wasm-instantiate")}function a(a){f(a.instance)}function e(a){return Zf().then(function(a){return WebAssembly.instantiate(a,d)}).then(a,function(a){Na("failed to asynchronously prepare wasm: "+
a);je(a)})}var d={env:Qf,wasi_snapshot_preview1:Qf};ie("wasm-instantiate");if(c.instantiateWasm)try{return c.instantiateWasm(d,f)}catch(b){return Na("Module.instantiateWasm callback failed with error: "+b),!1}(function(){if(zb||"function"!==typeof WebAssembly.instantiateStreaming||le(Oa)||"function"!==typeof fetch)return e(a);fetch(Oa,{credentials:"same-origin"}).then(function(b){return WebAssembly.instantiateStreaming(b,d).then(a,function(b){Na("wasm streaming compile failed: "+b);Na("falling back to ArrayBuffer instantiation");
e(a)})})})();return{}}();c.asm=Rf;var Pf=c.___wasm_call_ctors=function(){return(Pf=c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)};c.__Z10canvasSizejj=function(){return(c.__Z10canvasSizejj=c.asm._Z10canvasSizejj).apply(null,arguments)};c.__Z11setupRandomi=function(){return(c.__Z11setupRandomi=c.asm._Z11setupRandomi).apply(null,arguments)};c.__Z3rndi=function(){return(c.__Z3rndi=c.asm._Z3rndi).apply(null,arguments)};c.__Z9setupZoomf=function(){return(c.__Z9setupZoomf=c.asm._Z9setupZoomf).apply(null,
arguments)};c.__Z16setupTranslationjj=function(){return(c.__Z16setupTranslationjj=c.asm._Z16setupTranslationjj).apply(null,arguments)};c.__Z9onLimits2ii=function(){return(c.__Z9onLimits2ii=c.asm._Z9onLimits2ii).apply(null,arguments)};c.__Z6gcyclev=function(){return(c.__Z6gcyclev=c.asm._Z6gcyclev).apply(null,arguments)};c.__Z11Uint32Arrayj=function(){return(c.__Z11Uint32Arrayj=c.asm._Z11Uint32Arrayj).apply(null,arguments)};c.__Z11Uint16Arrayj=function(){return(c.__Z11Uint16Arrayj=c.asm._Z11Uint16Arrayj).apply(null,
arguments)};c.__Z10Uint8Arrayj=function(){return(c.__Z10Uint8Arrayj=c.asm._Z10Uint8Arrayj).apply(null,arguments)};c.__Z9boolArrayt=function(){return(c.__Z9boolArrayt=c.asm._Z9boolArrayt).apply(null,arguments)};c.__Z7empNamej=function(){return(c.__Z7empNamej=c.asm._Z7empNamej).apply(null,arguments)};c.__Z5empXYv=function(){return(c.__Z5empXYv=c.asm._Z5empXYv).apply(null,arguments)};c.__Z5knValjjj=function(){return(c.__Z5knValjjj=c.asm._Z5knValjjj).apply(null,arguments)};c.__Z7knAIValjj=function(){return(c.__Z7knAIValjj=
c.asm._Z7knAIValjj).apply(null,arguments)};c.__Z6equalkj=function(){return(c.__Z6equalkj=c.asm._Z6equalkj).apply(null,arguments)};c.__Z12EDchangeTeamjj=function(){return(c.__Z12EDchangeTeamjj=c.asm._Z12EDchangeTeamjj).apply(null,arguments)};c.__Z12EDchangeNamej=function(){return(c.__Z12EDchangeNamej=c.asm._Z12EDchangeNamej).apply(null,arguments)};c.__Z11EDchangeResjjj=function(){return(c.__Z11EDchangeResjjj=c.asm._Z11EDchangeResjjj).apply(null,arguments)};c.__Z6chTeamji=function(){return(c.__Z6chTeamji=
c.asm._Z6chTeamji).apply(null,arguments)};c.__Z10changeRaceji=function(){return(c.__Z10changeRaceji=c.asm._Z10changeRaceji).apply(null,arguments)};c.__Z11changeColorjj=function(){return(c.__Z11changeColorjj=c.asm._Z11changeColorjj).apply(null,arguments)};c.__Z13setupOnlTablej=function(){return(c.__Z13setupOnlTablej=c.asm._Z13setupOnlTablej).apply(null,arguments)};c.__Z13tempointeraddj=function(){return(c.__Z13tempointeraddj=c.asm._Z13tempointeraddj).apply(null,arguments)};c.__Z10setupOnlIDjb=function(){return(c.__Z10setupOnlIDjb=
c.asm._Z10setupOnlIDjb).apply(null,arguments)};c.__Z10pidkingdomj=function(){return(c.__Z10pidkingdomj=c.asm._Z10pidkingdomj).apply(null,arguments)};c.__Z7onldataj=function(){return(c.__Z7onldataj=c.asm._Z7onldataj).apply(null,arguments)};c.__Z12setupVersionjbb=function(){return(c.__Z12setupVersionjbb=c.asm._Z12setupVersionjbb).apply(null,arguments)};c.__Z8mnameaddv=function(){return(c.__Z8mnameaddv=c.asm._Z8mnameaddv).apply(null,arguments)};c.__Z9shareNamej=function(){return(c.__Z9shareNamej=c.asm._Z9shareNamej).apply(null,
arguments)};c.__Z6sndNfov=function(){return(c.__Z6sndNfov=c.asm._Z6sndNfov).apply(null,arguments)};c.__Z7updKngsj=function(){return(c.__Z7updKngsj=c.asm._Z7updKngsj).apply(null,arguments)};c.__Z6updownji=function(){return(c.__Z6updownji=c.asm._Z6updownji).apply(null,arguments)};c.__Z14onlineKingdomsv=function(){return(c.__Z14onlineKingdomsv=c.asm._Z14onlineKingdomsv).apply(null,arguments)};c.__Z8userKickj=function(){return(c.__Z8userKickj=c.asm._Z8userKickj).apply(null,arguments)};c.__Z6onlADDjjjjb=
function(){return(c.__Z6onlADDjjjjb=c.asm._Z6onlADDjjjjb).apply(null,arguments)};c.__Z10nameSharedPjS_j=function(){return(c.__Z10nameSharedPjS_j=c.asm._Z10nameSharedPjS_j).apply(null,arguments)};c.__Z10rstrRNDmapj=function(){return(c.__Z10rstrRNDmapj=c.asm._Z10rstrRNDmapj).apply(null,arguments)};c.__Z4nAIsv=function(){return(c.__Z4nAIsv=c.asm._Z4nAIsv).apply(null,arguments)};c.__Z8onlCountv=function(){return(c.__Z8onlCountv=c.asm._Z8onlCountv).apply(null,arguments)};c.__Z9closeRoomv=function(){return(c.__Z9closeRoomv=
c.asm._Z9closeRoomv).apply(null,arguments)};c.__Z12deletePlayerjb=function(){return(c.__Z12deletePlayerjb=c.asm._Z12deletePlayerjb).apply(null,arguments)};c.__Z10tempstraddv=function(){return(c.__Z10tempstraddv=c.asm._Z10tempstraddv).apply(null,arguments)};c.__Z8liveChatj=function(){return(c.__Z8liveChatj=c.asm._Z8liveChatj).apply(null,arguments)};c.__Z8gstartedv=function(){return(c.__Z8gstartedv=c.asm._Z8gstartedv).apply(null,arguments)};c.__Z14randomKingdomsi=function(){return(c.__Z14randomKingdomsi=
c.asm._Z14randomKingdomsi).apply(null,arguments)};c.__Z6nfolenv=function(){return(c.__Z6nfolenv=c.asm._Z6nfolenv).apply(null,arguments)};c.__Z9stmenummxi=function(){return(c.__Z9stmenummxi=c.asm._Z9stmenummxi).apply(null,arguments)};c.__Z10checkStockv=function(){return(c.__Z10checkStockv=c.asm._Z10checkStockv).apply(null,arguments)};c.__Z11movtableADDjjjj=function(){return(c.__Z11movtableADDjjjj=c.asm._Z11movtableADDjjjj).apply(null,arguments)};c.__Z6amountv=function(){return(c.__Z6amountv=c.asm._Z6amountv).apply(null,
arguments)};c.__Z8mwamounti=function(){return(c.__Z8mwamounti=c.asm._Z8mwamounti).apply(null,arguments)};c.__Z6mwiconv=function(){return(c.__Z6mwiconv=c.asm._Z6mwiconv).apply(null,arguments)};c.__Z8mwSelectj=function(){return(c.__Z8mwSelectj=c.asm._Z8mwSelectj).apply(null,arguments)};c.__Z6mwMorei=function(){return(c.__Z6mwMorei=c.asm._Z6mwMorei).apply(null,arguments)};c.__Z11createItemsv=function(){return(c.__Z11createItemsv=c.asm._Z11createItemsv).apply(null,arguments)};c.__Z9ginfonamejj=function(){return(c.__Z9ginfonamejj=
c.asm._Z9ginfonamejj).apply(null,arguments)};c.__Z9RNDobjexpv=function(){return(c.__Z9RNDobjexpv=c.asm._Z9RNDobjexpv).apply(null,arguments)};c.__Z9RNDdeletej=function(){return(c.__Z9RNDdeletej=c.asm._Z9RNDdeletej).apply(null,arguments)};c.__Z10stprndobjsj=function(){return(c.__Z10stprndobjsj=c.asm._Z10stprndobjsj).apply(null,arguments)};c.__Z9addRNDobjv=function(){return(c.__Z9addRNDobjv=c.asm._Z9addRNDobjv).apply(null,arguments)};c.__Z13updateRNDtypejj=function(){return(c.__Z13updateRNDtypejj=c.asm._Z13updateRNDtypejj).apply(null,
arguments)};c.__Z16updateRNDkingdomjj=function(){return(c.__Z16updateRNDkingdomjj=c.asm._Z16updateRNDkingdomjj).apply(null,arguments)};c.__Z15updateRNDnumberjj=function(){return(c.__Z15updateRNDnumberjj=c.asm._Z15updateRNDnumberjj).apply(null,arguments)};c.__Z16updateRNDeach256jj=function(){return(c.__Z16updateRNDeach256jj=c.asm._Z16updateRNDeach256jj).apply(null,arguments)};c.__Z8EDbrush0ib=function(){return(c.__Z8EDbrush0ib=c.asm._Z8EDbrush0ib).apply(null,arguments)};c.__Z11EDbrushstopv=function(){return(c.__Z11EDbrushstopv=
c.asm._Z11EDbrushstopv).apply(null,arguments)};c.__Z10EDbrushchsi=function(){return(c.__Z10EDbrushchsi=c.asm._Z10EDbrushchsi).apply(null,arguments)};c.__Z10EDbrushMrgi=function(){return(c.__Z10EDbrushMrgi=c.asm._Z10EDbrushMrgi).apply(null,arguments)};c.__Z10EDbrushchdi=function(){return(c.__Z10EDbrushchdi=c.asm._Z10EDbrushchdi).apply(null,arguments)};c.__Z13EDchangeColorjj=function(){return(c.__Z13EDchangeColorjj=c.asm._Z13EDchangeColorjj).apply(null,arguments)};c.__Z11showrndobjsv=function(){return(c.__Z11showrndobjsv=
c.asm._Z11showrndobjsv).apply(null,arguments)};c.__Z9getordersj=function(){return(c.__Z9getordersj=c.asm._Z9getordersj).apply(null,arguments)};c.__Z10setupGuidev=function(){return(c.__Z10setupGuidev=c.asm._Z10setupGuidev).apply(null,arguments)};c.__Z10userConfigj=function(){return(c.__Z10userConfigj=c.asm._Z10userConfigj).apply(null,arguments)};c.__Z6prelddv=function(){return(c.__Z6prelddv=c.asm._Z6prelddv).apply(null,arguments)};c.__Z6chterrj=function(){return(c.__Z6chterrj=c.asm._Z6chterrj).apply(null,
arguments)};c.__Z10getTerrainv=function(){return(c.__Z10getTerrainv=c.asm._Z10getTerrainv).apply(null,arguments)};c.__Z15unitSearchValidjjj=function(){return(c.__Z15unitSearchValidjjj=c.asm._Z15unitSearchValidjjj).apply(null,arguments)};c.__Z7plreadyv=function(){return(c.__Z7plreadyv=c.asm._Z7plreadyv).apply(null,arguments)};c.__Z9setupGamejjjjjjjjjjjjjjj=function(){return(c.__Z9setupGamejjjjjjjjjjjjjjj=c.asm._Z9setupGamejjjjjjjjjjjjjjj).apply(null,arguments)};c.__Z15configRandomMapv=function(){return(c.__Z15configRandomMapv=
c.asm._Z15configRandomMapv).apply(null,arguments)};c.__Z5knamej=function(){return(c.__Z5knamej=c.asm._Z5knamej).apply(null,arguments)};c.__Z3mykv=function(){return(c.__Z3mykv=c.asm._Z3mykv).apply(null,arguments)};c.__Z4cmykj=function(){return(c.__Z4cmykj=c.asm._Z4cmykj).apply(null,arguments)};c.__Z7EDbuildj=function(){return(c.__Z7EDbuildj=c.asm._Z7EDbuildj).apply(null,arguments)};c.__Z16addEditorKingdomj=function(){return(c.__Z16addEditorKingdomj=c.asm._Z16addEditorKingdomj).apply(null,arguments)};
c.__Z16delEditorKingdomj=function(){return(c.__Z16delEditorKingdomj=c.asm._Z16delEditorKingdomj).apply(null,arguments)};c.__Z13startMovementv=function(){return(c.__Z13startMovementv=c.asm._Z13startMovementv).apply(null,arguments)};c.__Z10removeAnimjj=function(){return(c.__Z10removeAnimjj=c.asm._Z10removeAnimjj).apply(null,arguments)};c.__Z6dbgspdj=function(){return(c.__Z6dbgspdj=c.asm._Z6dbgspdj).apply(null,arguments)};c.__Z11synchroHashv=function(){return(c.__Z11synchroHashv=c.asm._Z11synchroHashv).apply(null,
arguments)};c.__Z6pause0v=function(){return(c.__Z6pause0v=c.asm._Z6pause0v).apply(null,arguments)};c.__Z7resume0v=function(){return(c.__Z7resume0v=c.asm._Z7resume0v).apply(null,arguments)};c.__Z10movtablexev=function(){return(c.__Z10movtablexev=c.asm._Z10movtablexev).apply(null,arguments)};c.__Z14setupResourcesjjjjt=function(){return(c.__Z14setupResourcesjjjjt=c.asm._Z14setupResourcesjjjjt).apply(null,arguments)};c.__Z10searchUnitth=function(){return(c.__Z10searchUnitth=c.asm._Z10searchUnitth).apply(null,
arguments)};c.__Z6sndCnfb=function(){return(c.__Z6sndCnfb=c.asm._Z6sndCnfb).apply(null,arguments)};c.__Z13sharedFloatIDv=function(){return(c.__Z13sharedFloatIDv=c.asm._Z13sharedFloatIDv).apply(null,arguments)};c.__Z13sharedDelayIDv=function(){return(c.__Z13sharedDelayIDv=c.asm._Z13sharedDelayIDv).apply(null,arguments)};c.__Z12bufferMarginfffjf=function(){return(c.__Z12bufferMarginfffjf=c.asm._Z12bufferMarginfffjf).apply(null,arguments)};c.__Z11getBufferIDv=function(){return(c.__Z11getBufferIDv=c.asm._Z11getBufferIDv).apply(null,
arguments)};c.__Z8shapointv=function(){return(c.__Z8shapointv=c.asm._Z8shapointv).apply(null,arguments)};c.__Z4testjj=function(){return(c.__Z4testjj=c.asm._Z4testjj).apply(null,arguments)};c.__Z5vsbltv=function(){return(c.__Z5vsbltv=c.asm._Z5vsbltv).apply(null,arguments)};c.__Z9setupOdinj=function(){return(c.__Z9setupOdinj=c.asm._Z9setupOdinj).apply(null,arguments)};c.__Z8nkingdomv=function(){return(c.__Z8nkingdomv=c.asm._Z8nkingdomv).apply(null,arguments)};c.__Z14customMapTablev=function(){return(c.__Z14customMapTablev=
c.asm._Z14customMapTablev).apply(null,arguments)};c.__Z16EDgetTerrainInfov=function(){return(c.__Z16EDgetTerrainInfov=c.asm._Z16EDgetTerrainInfov).apply(null,arguments)};c.__Z13resetGLbufferv=function(){return(c.__Z13resetGLbufferv=c.asm._Z13resetGLbufferv).apply(null,arguments)};c.__Z7adpterrv=function(){return(c.__Z7adpterrv=c.asm._Z7adpterrv).apply(null,arguments)};c.__Z13configTerrainb=function(){return(c.__Z13configTerrainb=c.asm._Z13configTerrainb).apply(null,arguments)};c.__Z9chmapsizei=function(){return(c.__Z9chmapsizei=
c.asm._Z9chmapsizei).apply(null,arguments)};c.__Z13randomTerrainj=function(){return(c.__Z13randomTerrainj=c.asm._Z13randomTerrainj).apply(null,arguments)};c.__Z6trraddv=function(){return(c.__Z6trraddv=c.asm._Z6trraddv).apply(null,arguments)};c.__Z5test3jj=function(){return(c.__Z5test3jj=c.asm._Z5test3jj).apply(null,arguments)};c.__Z7setupGLf=function(){return(c.__Z7setupGLf=c.asm._Z7setupGLf).apply(null,arguments)};c.__Z15getColorTexturev=function(){return(c.__Z15getColorTexturev=c.asm._Z15getColorTexturev).apply(null,
arguments)};c.__Z12executeOrderjj=function(){return(c.__Z12executeOrderjj=c.asm._Z12executeOrderjj).apply(null,arguments)};c.__Z10changePagei=function(){return(c.__Z10changePagei=c.asm._Z10changePagei).apply(null,arguments)};c.__Z7getPagev=function(){return(c.__Z7getPagev=c.asm._Z7getPagev).apply(null,arguments)};c.__Z7svpropsiiiiiii=function(){return(c.__Z7svpropsiiiiiii=c.asm._Z7svpropsiiiiiii).apply(null,arguments)};c.__Z9mouseMoveiib=function(){return(c.__Z9mouseMoveiib=c.asm._Z9mouseMoveiib).apply(null,
arguments)};c.__Z9mouseDowniij=function(){return(c.__Z9mouseDowniij=c.asm._Z9mouseDowniij).apply(null,arguments)};c.__Z10touchStartjj=function(){return(c.__Z10touchStartjj=c.asm._Z10touchStartjj).apply(null,arguments)};c.__Z9touchMovejj=function(){return(c.__Z9touchMovejj=c.asm._Z9touchMovejj).apply(null,arguments)};c.__Z8touchEndjj=function(){return(c.__Z8touchEndjj=c.asm._Z8touchEndjj).apply(null,arguments)};c.__Z8mouseOutj=function(){return(c.__Z8mouseOutj=c.asm._Z8mouseOutj).apply(null,arguments)};
c.__Z10mouseEnterj=function(){return(c.__Z10mouseEnterj=c.asm._Z10mouseEnterj).apply(null,arguments)};c.__Z7mouseUpiijbb=function(){return(c.__Z7mouseUpiijbb=c.asm._Z7mouseUpiijbb).apply(null,arguments)};c.__Z6runKeyjb=function(){return(c.__Z6runKeyjb=c.asm._Z6runKeyjb).apply(null,arguments)};c.__Z6rndResv=function(){return(c.__Z6rndResv=c.asm._Z6rndResv).apply(null,arguments)};c.__Z9rndforestv=function(){return(c.__Z9rndforestv=c.asm._Z9rndforestv).apply(null,arguments)};c.__Z12plymapeditorv=function(){return(c.__Z12plymapeditorv=
c.asm._Z12plymapeditorv).apply(null,arguments)};c.__Z5test2jjj=function(){return(c.__Z5test2jjj=c.asm._Z5test2jjj).apply(null,arguments)};c.__Z8savegamev=function(){return(c.__Z8savegamev=c.asm._Z8savegamev).apply(null,arguments)};c.__Z7nh19addj=function(){return(c.__Z7nh19addj=c.asm._Z7nh19addj).apply(null,arguments)};c.__Z6nhcompv=function(){return(c.__Z6nhcompv=c.asm._Z6nhcompv).apply(null,arguments)};c.__Z7delTexsv=function(){return(c.__Z7delTexsv=c.asm._Z7delTexsv).apply(null,arguments)};c.__Z11sstextStartj=
function(){return(c.__Z11sstextStartj=c.asm._Z11sstextStartj).apply(null,arguments)};c.__Z6naddssj=function(){return(c.__Z6naddssj=c.asm._Z6naddssj).apply(null,arguments)};c.__Z7ss1textiiiiiiiii=function(){return(c.__Z7ss1textiiiiiiiii=c.asm._Z7ss1textiiiiiiiii).apply(null,arguments)};c.__Z7readSUPP18emscripten_fetch_t=function(){return(c.__Z7readSUPP18emscripten_fetch_t=c.asm._Z7readSUPP18emscripten_fetch_t).apply(null,arguments)};c.__Z11downloadGrab=function(){return(c.__Z11downloadGrab=c.asm._Z11downloadGrab).apply(null,
arguments)};c.__Z7txtLoadv=function(){return(c.__Z7txtLoadv=c.asm._Z7txtLoadv).apply(null,arguments)};c.__Z11setupEditorv=function(){return(c.__Z11setupEditorv=c.asm._Z11setupEditorv).apply(null,arguments)};c.__Z8wtrcheckv=function(){return(c.__Z8wtrcheckv=c.asm._Z8wtrcheckv).apply(null,arguments)};c.__Z8preSetupj=function(){return(c.__Z8preSetupj=c.asm._Z8preSetupj).apply(null,arguments)};c.__Z10fullRNDmapb=function(){return(c.__Z10fullRNDmapb=c.asm._Z10fullRNDmapb).apply(null,arguments)};c.__Z14editorKingdomsv=
function(){return(c.__Z14editorKingdomsv=c.asm._Z14editorKingdomsv).apply(null,arguments)};c.__Z4krgbj=function(){return(c.__Z4krgbj=c.asm._Z4krgbj).apply(null,arguments)};c.__Z7crtStxtv=function(){return(c.__Z7crtStxtv=c.asm._Z7crtStxtv).apply(null,arguments)};c.__Z8superLenv=function(){return(c.__Z8superLenv=c.asm._Z8superLenv).apply(null,arguments)};c.__Z5nhlenv=function(){return(c.__Z5nhlenv=c.asm._Z5nhlenv).apply(null,arguments)};c.__Z14finishSavegamev=function(){return(c.__Z14finishSavegamev=
c.asm._Z14finishSavegamev).apply(null,arguments)};c.__Z8mapWidthv=function(){return(c.__Z8mapWidthv=c.asm._Z8mapWidthv).apply(null,arguments)};c.__Z13readSavegame0j=function(){return(c.__Z13readSavegame0j=c.asm._Z13readSavegame0j).apply(null,arguments)};c.__Z6strOnlv=function(){return(c.__Z6strOnlv=c.asm._Z6strOnlv).apply(null,arguments)};c.__Z7readSVGmmj=function(){return(c.__Z7readSVGmmj=c.asm._Z7readSVGmmj).apply(null,arguments)};c._main=function(){return(c._main=c.asm.main).apply(null,arguments)};
var $b=c._malloc=function(){return($b=c._malloc=c.asm.malloc).apply(null,arguments)};c._free=function(){return(c._free=c.asm.free).apply(null,arguments)};c.___errno_location=function(){return(c.___errno_location=c.asm.__errno_location).apply(null,arguments)};c.stackSave=function(){return(c.stackSave=c.asm.stackSave).apply(null,arguments)};c.stackAlloc=function(){return(c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)};c.stackRestore=function(){return(c.stackRestore=c.asm.stackRestore).apply(null,
arguments)};c.__growWasmMemory=function(){return(c.__growWasmMemory=c.asm.__growWasmMemory).apply(null,arguments)};c.dynCall_vii=function(){return(c.dynCall_vii=c.asm.dynCall_vii).apply(null,arguments)};var hb=c.dynCall_vi=function(){return(hb=c.dynCall_vi=c.asm.dynCall_vi).apply(null,arguments)};c.dynCall_ii=function(){return(c.dynCall_ii=c.asm.dynCall_ii).apply(null,arguments)};c.dynCall_iiiii=function(){return(c.dynCall_iiiii=c.asm.dynCall_iiiii).apply(null,arguments)};c.dynCall_viii=function(){return(c.dynCall_viii=
c.asm.dynCall_viii).apply(null,arguments)};c.dynCall_iiii=function(){return(c.dynCall_iiii=c.asm.dynCall_iiii).apply(null,arguments)};c.dynCall_iii=function(){return(c.dynCall_iii=c.asm.dynCall_iii).apply(null,arguments)};c.dynCall_iidiiii=function(){return(c.dynCall_iidiiii=c.asm.dynCall_iidiiii).apply(null,arguments)};c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.dynCall_jiji).apply(null,arguments)};c.asm=Rf;var bc;yb=function a(){bc||Uc();bc||(yb=a)};c.run=Uc;if(c.preInit)for("function"==
typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();var re=!0;c.noInitialRun&&(re=!1);$a=!0;Uc();var n={},Rb,of,zc,tb,$d=function(){for(var a=c,e=Object.keys(a),d=e.length,b="inspector71017 newUnit radar falseunit synchroHash rnd setupRandom randomTerrain unitMovement test setupInfo shapoint Uint16Array setupTech setupRequirements boolArray AIobjetive test2 searchUnit killUnit investigateTech AIprocess setupResources unitWorking movtablexe test3 unitParameter setupGL bufferColor getBufferID setupIMGinfo executeOrder shiftONOFF IMGdata Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove gManaMax setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen rdnh19 crtStxt configTerrain delTexs gName touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeAI EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf updKngs mouseOut rstrRNDmap rlyws".split(" "),
h=0,k=b.length;h<k;h++)for(var l=b[h],m=0;m<d;m++){var r=e[m];if("__"==r.substr(0,2)&&-1<r.indexOf(l)){n[b[h]]=a[r];break}}Rb=new Ja(n.shapoint(),4096);tb=new Ja(n.sharedFloatID(),5);of=new Ja(n.sharedFloatID(),3);zc=new Ja(n.sharedFloatID(),4);La(n.userConfig(Ac()),17,q.name||"Guest");n.setupVersion(q.versionInt,X,!!window.indexedDB);a={antialias:!1,alpha:!1,depth:!0};e=document.createElement("canvas");localStorage.webgl&&"2"!=localStorage.webgl||(f=e.getContext("webgl2",a));f||(f=e.getContext("webgl",
a),U=!0);navigator.gpu&&dg();q.gl=f;$d.waiting&&Qb();Yc()},La=function(a,c,d){a=ia(a,c);for(var b=0;b<c;b++)a[b]=d.charCodeAt(b)};$d.waiting=!1;c.postRun=[$d];if(window.indexedDB&&!X){var Ic=window.indexedDB.open("nh2019",q.versionInt),pa;Ic.onsuccess=function(a){pa=Ic.result;X||mh("basic",function(a){})};Ic.onupgradeneeded=function(a){pa=Ic.result;x(pa);try{pa.objectStoreNames.contains("basic")&&pa.deleteObjectStore("basic"),pa.objectStoreNames.contains("maps")||pa.createObjectStore("maps",{keyPath:"id",
autoIncrement:!0}),pa.objectStoreNames.contains("mapsBlobs")||pa.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),pa.objectStoreNames.contains("basic")||pa.createObjectStore("basic",{keyPath:"url"})}catch(e){console.error(e)}}}var $g=function(a){if(pa)try{pa.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){}}catch(e){console.error(e)}},mh=function(a,c){if(pa&&!X)try{var d=pa.transaction([a],"readonly");if(d.objectStore(a).getAllKeys)var b=d.objectStore(a).getAllKeys();
else return c({target:{result:[]}});b.onsuccess=c}catch(h){}else c({target:{result:[]}})},Zd={start:function(){}},R=!1;Zd.func=function(a){R=!0;Qb(a)};var hh=function(a,c,d,b,f,l,q,p,r,u){da();var e=document.createElement("div");document.createElement("div");2==u&&(q=Math.pow(2,31)-1);e.id="unitProps";e.className="fullwindow";b='<button id="closeButton2" style="top:-89px;left:63px" class="closeIcon"></button><table>\n    <tr><td style="color:var(--color1);font-size:18px;padding-bottom:15px;text-shadow: 0px 0px 16px;">'+
(m(r)+"</td><td></td></tr>\n    <tr><td>"+m(4)+' </td><td><input id="EEDhealth" type="number" value="'+b+'" /></td></tr>\n    <tr><td>'+m(5)+'</td> <td><input id="EEDmhealth" type="number" value="'+f+'" /></td></tr>\n');if(d)if(2==d){if(c||a)b+="\n<tr><td>"+m(6)+'</td><td><input id="EEDattack" type="number" value="'+c+'" /></td></tr>\n<tr><td>'+m(7)+'</td> <td><input id="EEDdefence" type="number" value="'+a+'" /></td></tr>\n'}else q&&(b+="<tr><td>"+m(9)+' </td><td><select id="selectKingdom2">'+k("selectKingdom").innerHTML+
"</select></td></tr>");else b+="\n<tr><td>"+m(6)+'</td><td><input id="EEDattack" type="number" value="'+c+'" /></td></tr>\n<tr><td>'+m(7)+'</td> <td><input id="EEDdefence" type="number" value="'+a+'" /></td></tr>\n<tr><td>'+m(8)+' <td><input id="EEDmana" type="number" value="'+l+'" /></td></tr>\n<tr><td>'+m(9)+' </td><td><select id="selectKingdom2">'+k("selectKingdom").innerHTML+"</select></td></tr>\n";e.innerHTML=b+"</table>";a=document.createElement("button");a.innerHTML=m(10);a.onclick=function(){x(k("EDcapt")&&
k("EDcapt").checked&&2||0);n.svprops(parseInt(k("EEDattack")&&parseInt(k("EEDattack").value)),parseInt(k("EEDdefence")&&parseInt(k("EEDdefence").value)),parseInt(k("EEDhealth").value),parseInt(k("EEDmhealth").value),parseInt(k("EEDmana")&&parseInt(k("EEDmana").value)),p,parseInt(k("selectKingdom2")&&parseInt(k("selectKingdom2").value)));document.body.removeChild(k("unitProps"));Y()};e.appendChild(a);document.body.appendChild(e);k("closeButton2").onclick=function(){ca(k("unitProps"));Y()};k("selectKingdom2")&&
(k("selectKingdom2").value=q)},N=function(a){k(a).style.display="none"},S=function(a){k(a).style.display="block"},Xe=function(a){R&&(a=parseInt(k("brushSize").value)+a,a>k("brushSize").max?k("brushSize").value=k("brushSize").max:1>a?k("brushSize").value=1:k("brushSize").value=a,k("brushSize").onchange())},og=function(){x(this);this.parentElement.style.display="none";Y();var a=parseInt(k("EDmapSize").value);a!=n.mapWidth()&&(f.useProgram(I),f.uniform1f(f.getUniformLocation(I,"mapSize"),a),f.useProgram(G),
f.uniform1f(f.getUniformLocation(G,"mapSize"),a),f.uniform1f(f.getUniformLocation(G,"zMax"),96*a),n.chmapsize(a),ka())},md=function(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a},nh=function(){n.delEditorKingdom(this.team)},oh=function(){var a=this.team,c=bb("mapPropsXtra");c.className="fullwindow";F("span",c,m(11));var d=F("input",c);d.type="number";d.onchange=function(){this.value=n.knVal(a,4,parseInt(this.value)+1)};d.value=n.knVal(a,4);F("br",c);n.knAIVal(a)&&(F("span",c,m(12)),d=F("input",
c),d.type="number",d.onchange=function(){x(this.value);this.value=n.knAIVal(a,parseInt(this.value)+1)},d.value=n.knAIVal(a),d.max=100,d.min=0);c=F("div",c);c.style.cssText="text-align:center";d=F("button",c,m(14),"display:block;margin:14px;");d.onclick=function(){return n.equalk(a)};d=F("button",c,m(15),"margin-top:30px");d.onclick=function(){return ca(k("mapPropsXtra"))}},sd=function(){var a=k("mapPropsWindow").getElementsByTagName("table")[0];a.id="edpltbl";a.innerHTML="";a.innerHTML+='<tr style="text-transform:uppercase;"><td>'+
m(16)+"</td><td>"+m(17)+"</td><td>"+m(18)+"</td><td>"+m(19)+"</td><td>"+m(20)+"</td><td>"+m(21)+"</td><td>"+m(22)+"</td><td>"+m(23)+"</td></tr>";for(var c=1,d=n.nkingdom();c<d;c++)a.innerHTML+='\n<tr><td><input type="color"/></td><td><input type="text"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><input type="text" class="res"></td>\n<td><label class="container">\n  <input type="checkbox">\n  <span class="checkmark"></span>\n</label></td>\n<td><input type="number" min="0"></td>\n<td><button id="EDmore'+
c+'" class="morei">...</button></td>\n<td><button id="EDel'+c+'" class="closeIcon"></button></td></tr>';a.innerHTML+="<tr><td><button id='editorAdd'>+</button></td></tr>";c=1;for(d=n.nkingdom();c<d;c++)a=k("EDel"+c),a.team=c,a.onclick=nh,a=k("EDmore"+c),a.team=c,a.onclick=oh;k("editorAdd").onclick=function(){n.addEditorKingdom(1)};n.editorKingdoms()},Hc=function(){parseInt(this.value)?n.EDchangeRes(this.team,parseInt(this.value),this.res):(this.value="\u221e",n.EDchangeRes(this.team,Math.pow(2,31)-
1,this.res))},ih=function(){n.EDchangeColor(this.team,parseInt(this.value.substr(1),16));Fb()},Of=function(){var a=17;this.value.length<a&&(a=this.value.length);for(var c=Rb.viewU32(),d=0;17>d;d++)c[d]=0;for(d=0;d<a;d++)c[d]=this.value.charCodeAt(d);n.EDchangeName(this.team);R&&Fb()},jh=function(){n.knAIVal(this.team,100*this.checked+1)},kh=function(){n.EDchangeTeam(this.team,parseInt(this.value))},ch=function(){this.types.innerHTML=Gc[this.value];this.types.value=""},bh=function(){n.updateRNDtype(this.rndid,
this.value)},fh=function(){n.updateRNDkingdom(this.rndid,this.value)},dh=function(){n.updateRNDnumber(this.rndid,this.value)},eh=function(){n.updateRNDeach256(this.rndid,this.checked)},gh=function(){n.RNDdelete(this.rndid);Jc()},ph=function(){n.addRNDobj();Jc()},Jc=function(){k("rndtable").innerHTML='<tr style="height: 57px"><td>Type</td><td>Object</td><td>Amount</td><td>Each 256\u00b2</td><td>'+m(9)+"</td><td></td></tr>";n.showrndobjs();var a=document.createElement("tr"),c=document.createElement("td"),
d=document.createElement("button");d.innerHTML=m(26);d.onclick=ph;d.style.cssText="background: rgba(255,255,255,0.1);font-size: 15px;margin-top: 22px;";c.appendChild(d);a.appendChild(c);k("rndtable").appendChild(a)},qh=function(a,c){for(var d=0;d<a.length;d++)k(a[d]).style.cssText=c},Ea=function(){Sf(this)},Sf=function(a){var c=parseInt(a.min),d=parseInt(a.max),b=parseInt(a.value);b>d?a.value=a.max:b<c&&(a.value=a.min)},rd=function(a){for(var c="",d=0,b=bd.length;d<b;d++){var f=bd[d];var k=a?d==n.getTerrain()?
"selected":"":d==localStorage.terrain?"selected":"";c+='<option value="'+d+'" '+k+">"+f.name+"</option>"}return c},Gc,qf=function(a){var c=v.online?n.onlCount():n.nkingdom()-1;x(c);if(0>=c)return a;var d=Math.pow(a,2);x(c,d,d/c);13100>d/c&&(a=Math.round(Math.sqrt(13100*c)),ec(Ib(m(27),a),"red"));return a},ng=function(){confirm('You will play as "'+ja(ia(n.empName(n.myk()),20))+'", do you want continue? (CAUTION: IF YOU WANT SAVE CURRENT CUSTOM MAP, DO IT BEFORE ACCEPTING)')&&(R=!1,Re(),zd(),sf(),
f.useProgram(I),f.uniform1f(f.getUniformLocation(I,"mx"),0),uc=[-4*L,-31*L],f.useProgram(G),f.uniform1f(f.getUniformLocation(G,"mx"),-q.mx),n.plymapeditor())},pf=function(){var a=0;if(localStorage.rndObjs){var c=localStorage.rndObjs.split(",");a=c.length;for(var d=Rb.viewU32(),b=0;b<a;d[b]=c[b++]);}n.stprndobjs(a)},Ef=function(){k("mapconfiguration")||bb("mapconfiguration");S("mapconfiguration");k("mapconfiguration").className="fullwindow";da();if(""==k("mapconfiguration").innerHTML){pf();Gc=["",
"","",""];for(var a=[],c=0;4>c;c++){for(var d="",b=0,f=n.nfolen();b<f;b++){var l=n.ginfoname(b,c);l&&a.put({name:m(l).toUpperCase(),id:b})}a.sort(od);for(b=0;b<a.length;b++)d+='<option value="'+a[b].id+'">'+a[b].name+"</option>";Gc[c]=d;a.length=0}a="";1==localStorage.infinity&&(a="checked");k("mapconfiguration").innerHTML='<button id="closeButton1" class="closeIcon"></button>\n\n<table>\n<tbody>\n<tr><td>'+m(1)+'</td><td><input id="mapxValue" type="number" value="'+localStorage.mapx+'" step="32" min="96" max="2048" /></td></tr>\n<tr><td>'+
m(28)+'</td><td><select name="terrain" id="terrainValue">'+rd()+'</select></td><td><img id="terrainPreview"/></td></tr>\n<tr><td>'+m(29)+'</td><td>\n<select name="terrain" id="terrainRNDValue">\n<option value="0">'+m(30)+'</option>\n<option value="1">'+m(31)+'</option>\n<option value="2">'+m(32)+'</option>\n<option value="3">'+m(33)+'</option>\n<option value="4">'+m(34)+'</option>\n<option value="5">'+m(35)+"</option>\n</select></td></tr>\n<tr><td>"+m(12)+'</td><td><input id="AIlevelValue" type="number" value="'+
localStorage.AIlevel+'" min="15" max="100" /></td></tr>\n<tr><td>'+m(36)+'</td><td><input id="AIagressivityValue" type="number" value="'+localStorage.AIagressivity+'" min="0" max="100" /></td></tr>\n<tr><td>'+m(37)+' (BETA)</td><td>\n<select name="fog" id="fogValue">\n<option value="0">'+m(38)+'</option>\n<option value="1">'+m(39)+'</option>\n<option style="display:none" value="2">'+m(40)+'</option>\n<option value="3">'+m(41)+'</option>\n</select></td></tr>\n</td></tr>\n\n<tr><td><hr></td></tr>\n</tbody>\n<tbody id="config2">\n<tr><td>'+
m(42)+"</td></tr>\n<tr><td><hr></td></tr>\n<tr><td>"+m(43)+'</td><td><label class="container">\n  <input id="infinityValue" type="checkbox" '+a+'>\n  <span class="checkmark"></span>\n</label></td></tr>\n<tr><td>'+m(18)+'</td><td><input id="goldResValue" type="number" value="'+localStorage.goldRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+m(19)+'</td><td><input id="woodResValue" type="number" value="'+localStorage.woodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+
m(20)+'</td><td><input id="foodResValue" type="number" value="'+localStorage.foodRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td>'+m(21)+'</td><td><input id="stoneResValue" type="number" value="'+localStorage.stoneRes+'" step="250" min="0" max="2000000000"/></td></tr>\n<tr><td><hr></td></tr>\n\n</td>\n</tr>\n<tr><td>'+m(45)+'</td><td><input type="number" value="'+localStorage.peons+'" id="peonsValue" min="0" max="100"/></td></tr>\n<tr><td>'+m(408)+'</td><td><input type="number" value="'+
localStorage.towers+'" id="towersValue" min="0" max="40"/></td></tr>\n<tr><td>'+m(13)+'</td><td><input type="number" value="'+localStorage.freePop+'" id="freePopValue" min="0" /></td></tr>\n<tr><td>'+m(46)+'</td><td><input type="number" value="'+localStorage.maxPop+'" id="maxPopValue" min="100" max="50000" /></td></tr>\n</tbody>\n</table>\n<hr style="margin: 25px">\n<table>\n<tbody id="rndtable"></tbody>\n<table>\n';k("terrainValue").onchange=function(){x(this.value,k("terrainValue").value);k("terrainPreview").src=
q.cdn+bd[this.value].name.toLocaleLowerCase()+".png"};k("terrainValue").onchange();Jc();k("terrainRNDValue").value=localStorage.terrainRND;k("fogValue").value=localStorage.fog;k("maxPopValue").onchange=Ea;k("peonsValue").onchange=Ea;k("towersValue").onchange=Ea;k("freePopValue").onchange=Ea;k("mapxValue").onchange=function(a,b){this.value=qf(parseInt(this.value));Sf(this)};k("goldResValue").onchange=Ea;k("woodResValue").onchange=Ea;k("foodResValue").onchange=Ea;k("stoneResValue").onchange=Ea;k("AIlevelValue").onchange=
Ea;k("AIagressivityValue").onchange=Ea;qh(["goldResValue","woodResValue","foodResValue","stoneResValue"],"width: 158px");k("infinityValue").onchange=function(){var a=this.checked;k("goldResValue").disabled=a;k("stoneResValue").disabled=a;k("woodResValue").disabled=a;k("foodResValue").disabled=a};k("infinityValue").onchange();k("closeButton1").onclick=function(){v.online&&Ta();k("mapconfiguration").style.display="none";Y()}}else Jc()};Element.prototype.addCloseIcon=function(){var a=F("button",this,
0,"top:-23px;right:-23px;position:absolute");a.className="closeIcon";a.onclick=Ra};var Sg=function(){var a=k("Settings");da();if(a)S("Settings");else{a=F("div",document.body);a.addCloseIcon();a.id="Settings";a.className="fullwindow";var c=document.createElement("span");c.innerHTML=m(16);c.style.cssText="margin-top:0px";a.appendChild(c);var d=document.createElement("input");d.type="color";d.value=q.color;d.onchange=Tf;d.localProp="color";d.style.backgroundColor=q.color;a.appendChild(d);c=document.createElement("span");
c.innerHTML=m(17);a.appendChild(c);d=document.createElement("input");d.type="text";d.value=String(q.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');d.onchange=Tf;d.localProp="name";d.spellcheck=!1;a.appendChild(d);c=document.createElement("span");c.innerHTML=m(48);a.appendChild(c);c=document.createElement("select");c.innerHTML='<option value="en">English</option>\n<option value="es">Espa\u00f1ol</option>\n<option value="it">Italiano</option>\n<option value="pt">Portugu\u00eas</option>\n<option value="pl">Polski</option>\n<option value="cz">\u010ce\u0161tina</option>\n<option value="de">Deutsch</option>\n<option value="ru">\u0420\u0443\u0441\u0441\u043a\u0438\u0439</option>\n<option value="bg">\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438</option>\n<option value="se">Svenska (beta)</option>\n';
c.value=q.langstr;c.onchange=function(){localStorage.language=this.value;location.href=""};a.appendChild(c);if(!X){c=document.createElement("span");c.innerHTML=m(49);a.appendChild(c);var b=document.createElement("label");b.className="container";c=document.createElement("span");c.className="checkmark";d=document.createElement("input");d.type="checkbox";var f="true"==localStorage.fullscreen?!0:!1;d.checked=f;d.onchange=Uf;d.localProp="fullscreen";b.appendChild(d);b.appendChild(c);a.appendChild(b)}c=
document.createElement("span");c.innerHTML="GPU";a.appendChild(c);c.style.marginTop="65px";c=document.createElement("select");c.innerHTML='<option value="1">WebGL 1</option>\n<option value="2">WebGL 2 (recommended)</option>\n';c.value=U?1:2;c.onchange=function(){localStorage.webgl=this.value;location.href=""};a.appendChild(c);F("span",a,m(50));b=document.createElement("label");b.className="container";c=document.createElement("span");c.className="checkmark";d=document.createElement("input");d.type=
"checkbox";f="true"==localStorage.shadows;d.checked=f;d.onchange=Uf;d.localProp="shadows";b.appendChild(d);b.appendChild(c);a.appendChild(b)}},Tg=function(){k("About");da();var a=F("div",document.body,'<div class="svgnehhon" style="background-repeat:no-repeat;height:124px;background-position:center;margin-bottom:16px;"></div>\nFully programmed by Donov<p>\n<p>Graphics, sound and game logic by Haemimont</p>\n<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url" target="_blank"><img src="nehhon/donate.gif" /></a><p>\nContact:</p>\n<a href=\'mailto:webmaster@nehhon.com\' target="_blank">webmaster@nehhon.com</a> <br> <a href="https://twitter.com/TzaredGame" target="_blank">@TzaredGame</a>\n<hr>\n<p style="margin-bottom:40px;">Special thanks to:</p>\n<div>\n<a href="https://www.crazygames.com/c/io" target="_blank">CRAZYGAMES.COM</a>\n<p>\n<img style="max-width:422px" src="nehhon/cloudflare.svg" alt="cloudflare">\n<p>\n&\n<p>\n<a href="https://www.youtube.com/MayorceteGamingTV">Mayorcete</a>, Penetrenko, Remi Sluz, David Grau, PuppedToy<br>Edgaras, Hekas, <a href="https://www.youtube.com/user/rainheart666787">Sharp Rain</a>\n</div>',
"text-align:center;text-shadow:rgb(0, 0, 0) 0px 0px 7px;user-select:text;bottom:unset;top:41px;");a.className="fullwindow";a.addCloseIcon()},Uf=function(){x(this,this.checked);localStorage[this.localProp]=this.checked},Tf=function(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.localProp&&(a=Ua(a));q[this.localProp]=a;localStorage[this.localProp]=a;La(n.userConfig(Ac()),17,localStorage.name)};X&&function(){var a=F("button",k("index"));a.className="closeIcon";a.onclick=
window.close;a.cssText="position:fixed;top:0px;right:0px"}();k("mult0").onclick=function(){location.hash="Multiplayer"};k("rnd0").onclick=function(){location.hash="RandomMap"};k("load0").onclick=function(){location.hash="CustomMap"};k("editor0").onclick=function(){location.hash="MapEditor"};k("settings0").onclick=function(){location.hash="Settings"};(function(){var a=document.getElementsByTagName("head")[0],c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=q.cdn+"b.css";
c.media="all";a.appendChild(c)})();X||(function(a,c,d,b,f,k,l){a.GoogleAnalyticsObject=f;a[f]=a[f]||function(){(a[f].q=a[f].q||[]).push(arguments)};a[f].l=1*new Date;k=c.createElement(d);l=c.getElementsByTagName(d)[0];k.async=1;k.src=b;l.parentNode.insertBefore(k,l)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-105062193-1","auto"),window.ga("send","pageview"));var Vf=function(a){this.arr=a};Vf.prototype.index=function(a){return this.arr.indexOf(a)};
localStorage.lastVersion=q.versionInt;var mg=new Vf("move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha".split(" "));Yc()})();
