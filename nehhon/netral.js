var aa,ba,ca={},da=NaN,f=window.localStorage;function ea(a,b){void 0===f[a]&&(f[a]=b)}function ha(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a}ea("name","Guest"+~~(1E3*Math.random()));ea("color",ha(Math.floor(16777215*Math.random())));ea("flag","eu");var l={name:f.name,color:f.color};function la(){}const ma=-1<navigator.userAgent.toLowerCase().indexOf(" electron/");var na=0,oa=(a,b)=>{ma&&window.ipcRender&&window.ipcRender.dscd&&window.ipcRender.dscd([a,b])};
if(ma){var pa=a=>{na=a;window.ipcRender&&window.ipcRender.fullScreen&&window.ipcRender.fullScreen(a)};oa("Main menu");pa(0)}function m(a){return document.getElementById(a)||NaN}window.gid=m;ma?(aa=location.search.substring(1,location.search.length),ba=parseInt(aa.replaceAll(".","")),115<=ba&&ea("webgl",3)):ea("webgl",2);void 0===f.fullscreen&&(f.fullscreen=!0);var n;
const ra=[384,5E3,5E3,5E3,5E3,0,0,1,0,500,400,40,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,20,0,21,1,0,20,0,22,1,0,1,1,-4,0,0,12,1,-1,10,0,6,1,-7,14,0,1,1,21,20,0,1,1,22,20,0,4,1,55,24,0,3,2,43,1,0,5,0,234,1,0,15,0,88,1,0];
let sa=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,0,21,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,44,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0],ta=sa.slice(0);ta[0]=192;
let ua=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,1,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,494094,17,0,21,1,1,0,0,1E4,8E3,0,0,0,17,0,22,1,1,0,0,1E4,8E3,0,0,0,1,1,-4,0,0,20,1,-1,11,0,6,1,56,16,0,2,1,21,20,1,0,0,16E3,8E3,0,0,0,2,1,22,20,1,0,0,16E3,8E3,0,0,0,50,0,88,1,0,10,0,248,1,0,7,0,223,1,1,15,0,25,25,0,0,0,7,0,225,1,1,15,0,25,25,0,0,0,12,0,230,1,1,0,0,25,25,200,100,0,1,2,234,0,1,75,5,1E3,70,0,0,0],wa=[256,1500,1500,1500,1500,0,0,1,3,800,800,100,2,100,
450,25,1,0,0,0,0,2,1E3,8,90,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,55,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0];
var xa={Default:ra,"Deiv 1500":sa,"PRO - Wolno\u015b\u0107":ua,"Battle Royale":[156,100,50,50,50,1,0,0,1,100,100,80,2,100,30,20,0,0,0,0,0,4,20,4,30,0,0,0,0,16,0,100,100,100,100,7,7,18,7,0,1,100,0,0,0,0,299123,1,1,69,0,1,7,0,100,75,100,0,0,1,1,224,2,0,1,1,233,3,0,1,1,223,3,0,2,0,235,1,0,5,0,236,1,0,5,0,237,1,0,5,0,238,1,0,5,0,239,1,0,10,0,221,1,0,10,0,222,1,0,10,0,242,1,0,30,0,226,1,0,15,0,228,1,0,10,0,230,1,0,15,0,229,1,0,1,2,44,1,0,1,1,244,4,0,1,1,222,4,0,50,2,80,1,0,50,2,66,1,0,50,2,0,1,0,50,2,
4,1,0,4,1,13,6,1,0,0,1,2E3,0,0,0],BRx4:wa,Diesel:[256,1500,1500,1500,1500,0,0,0,0,500,400,80,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,8,0,4,1,-31,16,0,12,1,-10,11,0,2,1,21,21,0,2,1,22,21,0,4,1,44,8,0,15,0,88,1,0],Classic:[256,400,400,400,400,0,0,0,0,1,200,80,2,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,12,0,21,1,0,12,0,22,1,0,1,1,-4,0,0,3,1,-1,6,0,1,1,21,15,0,1,1,22,15,0,
3,1,32,10,0,15,0,88,1,0]};let ya=sa.slice(0);ya[42]=1;ya[7]=7;ya[47]=34;let Aa=sa.slice(0);Aa[16]=1;Aa[15]=80;Aa[47]=37;Aa[52]=37;Aa[77]=3;Aa[72]=3;let Ba=sa.slice(0);Ba[8]=3;Ba[5]=1;Ba[14]=1800;Ba[21]=5;Ba[22]=55;Ba[23]=4;Ba[24]=15;let Ca=Ba.slice(0);Ca[14]=3600;var Da=[sa,ta,wa,ya,Aa,Ba,Ca,ua,sa,xa["Battle Royale"]];function Ea(){a:for(let a in xa){let b=xa[a];if(b.length==n.length){for(let c=1;c<b.length;c++)if(6!=c&&46!=c&&(n[8]||14!=c&&21!=c&&22!=c)&&b[c]!=n[c])continue a;return a}}}
function Fa(){try{n=f.mapConfig4&&JSON.parse(f.mapConfig4)||ra}catch{n=ra}}Fa();"true"==f.nightcycle&&(f.nightcycle=1);"true"==f.deathsounds&&(f.deathsounds=1);"true"==f.zoomPointer&&(f.zoomPointer=1);"true"==f.unlimitedZoom&&(f.unlimitedZoom=1);"true"==f.stdcolors&&(f.stdcolors=1);"true"==f.scrollmouse&&(f.scrollmouse=1);ea("stdcolors",1);ea("favMusic",0);ea("musicRange",75);ea("soundRange",100);ea("nplayed",0);ea("UIscale",100);ea("zoomMult",50);ea("scrollSpeed",50);ea("menuOpacity",75);
ea("visits",0);ea("shadows",!0);ea("multithreading",!0);ea("deathsounds",1);ea("quality",1);ea("antialiasing2",1);ea("fogRefresh",2);ea("zoomPointer",1);ea("hlffps",0);ea("alertSound",0);ea("selectionCircle",1);ea("unlimitedZoom",1);ea("theme",!0);ea("scrollmouse",1);f.visits++;var q,Ha="#SRVRMDDNV"==location.hash;Ha&&(location.hash="##IO");console.log=()=>{};console.trace=()=>{};q=()=>{};var Ia=window[atob("bG9jYXRpb24=")];
"dHphLnJlZA=="===btoa(Ia[atob("aG9zdG5hbWU=")])||ma||(Ia[atob("aHJlZg==")]=atob("aHR0cHM6Ly90emEucmVk"));window.ms=q;const Ja=!Ha&&window.SharedArrayBuffer&&("true"==f.multithreading||!f.multithreading);var Ka=document.createElement("script");Ka.src="nehhon/"+(Ja?"em2.js":"em.js")+"?v=612";document.body.appendChild(Ka);var La,Na={};
function Oa(a){Pa();if(Na[a]){if(Na[a]++,1<Na[a])return}else Na[a]=1;var b=(B.now&&B.now()||0)/1E3,c=~~(b/60)%60,d=~~(b/3600);b=~~(b%60);1===(b+"").length&&(b="0"+b);10>c&&(c="0"+c);a=[a,d+":"+c+":"+b];for(b=0;b<a.length;b++)a[b]||(a[b]=0),a[b].replaceAll&&(a[b]=a[b].replaceAll(",",".|"));E(15,Qa(" "+a.join(",")))}var Ra={};function Sa(a){Ra[a]||(Ra[a]=1,Oa(a))}window.fstdD=Sa;var Ta=0;
window.addEventListener("error",function(a){a=a.error&&a.error.stack?a.error.message+"-"+a.error.stack:a.lineno+":"+a.colno+" "+a.message;F&&F.getExtension("WEBGL_debug_renderer_info");"0:0 Script error."==a&&Ta++;4<Ta&&"0:0 Script error."==a||Oa(a);B.m&&Ua(`<span style="font-size:14px">${a.substr(0,550)}</span>`,"Error")});function G(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function H(a,b,c,d,e){a=document.createElement(a);e?b.prepend(a):b.appendChild(a);void 0!=c&&(a.innerHTML=c);d&&(a.style.cssText=d);return a}function Va(a,b){var c=document.createElement("div");a.appendChild(c);void 0!=b&&(c.textContent=b);c.style.cssText="color:#81ff81"}function Wa(a,b,c,d,e,g,h){a=I("input",a,e);a.value=b;a.onchange=c;void 0!=g&&(a.max=g);a.type=d||"text";void 0!=h&&(a.min=h);return a}
function Xa(a,b){m("notifybar")&&G(m("notifybar"));H("div",document.body,a,b&&`color:${b}`||"").id="notifybar";setTimeout(G,6E3,m("notifybar"))}var Ya=location,Za=0<=navigator.userAgent.indexOf(" OPR/"),$a="undefined"!==typeof InstallTrigger,ab=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),bb=!!document.documentMode,cb=!bb&&!!window.va,db=window.chrome,eb;Za?eb="Opera":$a?eb="Firefox":ab?eb="Safari":bb?eb="IE":cb?eb="Edge":db&&(eb="Chrome");db||ma||Xa("Partially supported browser, use Chrome/Opera/Desktop app instead");
l.hb=f.language||navigator.language||navigator.Pc;var fb={ca:"es",an:"es",gl:"es",eu:"es",ast:"es"}[l.hb.substr(0,2)]||l.hb.substr(0,2);l.version="v61.2";f.version!==l.version&&f.version&&(f.version=l.version,Xa("Updated to "+l.version));let gb="en es it pt ru pl bg de cz ro".split(" ").indexOf(fb);0>gb&&(gb=0,fb="en");l.lang=gb;l.xa=fb;if(4==gb||6==gb)document.title="\u0426\u0430\u0440\u0435\u0434";l.Ia=0;l.race=0;l.navigator=eb;l.N=151;l.nb=0;l.Na="nehhon/";
async function hb(a){return a.split("\n")}function J(a){return da[a]||""}var ib,jb,kb=[],lb=0;function mb(){lb++;if(3==lb){for(let b=0;4>b;b++){var a=J(698+b).split(",");let c=a.length,d=nb(ob),e=0;for(let g of a)for(a=0;20>a;a++)d[e++]=g.length>a?g.charCodeAt(a):0;K[253](c,b)}window.onhashchange=pb;pb(void 0,1)}}
var qb=0,rb,sb,tb,ub,vb,xb=a=>{if(a.data instanceof ArrayBuffer){let b=new Uint8Array(a.data),c=b[0];if(2==tb&&45!=c||ub&&26!=c&&68!=c)return vb.put(a);if(wb[c])wb[c](0,b)}},yb,zb=0,Eb=(a,b,c,d)=>{if(!(rb||25<zb)){rb=1;var e=new WebSocket("wss://"+a+".tza.red:4443"+`/${l.I}x${c}x${b}`);e.binaryType="arraybuffer";yb=e;var g=setInterval(function(){Ab(24);Bb&&14E3<Date.now()-Bb&&e.close()},6E4);e.onopen=()=>{d?(tb=1,vb=[]):setTimeout(()=>{Cb()},250)};e.onclose=()=>{clearInterval(g);tb=rb=0;B.m&&B.l&&
!Db&&(setTimeout(()=>{zb++;Eb(a,b,c,1)},4E3),Xa(J(835)))};e.onmessage=xb}};
function Fb(a){if(!qb){qb=1;this.active=!0;this.K=[];this.B=new WebSocket("wss://korwin.tza.red:4333");this.B.binaryType="arraybuffer";Bb=0;var b=setInterval(()=>{E(24)},6E4);this.B.onclose=function(c){clearInterval(b);qb=0;this.B=null;for(var d=M.K.slice(0),e=0;e<d.length;e++){var g=d[e];g.X||g.close()}if(!f.shdw)if(m("gameList")&&(Gb(m("gameList")),N("div",m("gameList"),803,"color:red;height:100%;display:flex;justify-content:center;align-items:center;")),console.log(c),B.m&&B.l&&!Db){if(Hb)return yb.close();
setTimeout(()=>{M=new Fb(1)},2E3);Xa(J(835))}else B.l&&Xa(J(803),"#ff0000"),!B.l||B.m||Ib||Jb()};this.B.onopen=function(){if(a){let c=new Uint8Array(13);Kb(c,1,l.I);Kb(c,5,sb);Kb(c,9,Mb);E(54,c)}else f.shdw&&delete f.shdw,f.sid&&(E(21,Nb(parseInt(f.sid),f.nm)),Ob=1)};this.B.onerror=function(c){q("error",c)};this.B.onmessage=xb}}var M;M=new Fb;var Pb,Qb;
window.onmessage=function(a){var b=new URLSearchParams(a.data);if(Pb&&b.has("code")){q(b,a.data);Pb.close();Pa();a=ma?1:0;b=b.get("code");b=Qa(b);var c=new ArrayBuffer(2+b.length);c=new Uint8Array(c);c[1]=a;c.set(b,2);E(12,c)}};window.opener&&(new URLSearchParams(window.location.search)).has("code")&&window.opener.postMessage(window.location.search,"*");var Rb;
function Sb(){if(f.sid)Tb();else{let a=Ub("",2);a.id="login";let b=H("div",a);Rb=b;ma||(I("button",b,"background:url(nehhon/discord.webp) no-repeat center;width:150px;height:93px").onclick=()=>{P(a);Qb=Math.floor(Math.random()*2**32);Pb=window.open((ma?"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F%3Fdesk%3D1&response_type=code&scope=identify%20email":"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F&response_type=code&scope=identify%20email")+
"&state="+Qb,"Log In","toolbar=no, menubar=no, width=600, height=830, top=10, left=100")});H("hr",b);H("button",b,"e-mail","color:#d1d1d1;width:150px;height:93px;font-size:15px").onclick=()=>{Gb(b);let c=H("input",b);c.type="email";c.placeholder="name@example.com";c.onkeydown=e=>{if("Enter"==e.key)d.onclick()};c.focus();let d=N("button",b,2);d.onclick=()=>{let e=c.value;if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e))return alert(J(909));Gb(b);Pa();E(51,Vb(e));N("div",b,808,"font-size:10px;width:174px;color:var(--color1);");
let g=H("input",b);g.placeholder="abcd123";g.focus();g.onkeydown=k=>{if("Enter"==k.key)h.onclick()};let h=N("button",b,2);h.onclick=()=>{E(52,Wb(parseInt(g.value.trim(),36)));b.innerHTML="..."}}}}}var Xb,Yb=document.createElement("div");Yb.id="gameList";Zb=Yb.children;$b=document.createElement("div");ac=document.createElement("div");bc=document.createElement("span");ac.appendChild(bc);Yb.appendChild($b);Yb.appendChild(ac);
function cc(){dc=[J(106).split("|")[0],J(107).split("|")[0],J(108).split("|")[0],J(109).toLocaleUpperCase()];for(var a=["rnd0","<span>"+J(110).split("| ")[0]+"</span>","returnmenu",J(112)],b=0,c=a.length;b<c;b+=2)m(a[b])&&(m(a[b]).innerHTML=a[b+1]);a=m("mult");H("div",a,`\u2b9c ${J(98).split("| ")[0]} \u2b9e`);a.appendChild(Yb);H("span",bc,"\u2bc6 "+J(83),"font-size:11px;color:#ff000040");N("span",bc,881);N("span",bc,880,"text-align: right; padding-right: 11px;");ac.id="rmply";I("div",Yb).id="rln";
f.shdw||(Xb=a=H("section",Yb.parentNode),H("button",a,J(99).split("| ")[1]+" +").onclick=()=>ec(),H("button",a,"<img src='nehhon/krwn.webp'>"+J(537)).onclick=()=>location.hash="Ranking",N("button",a,884).onclick=()=>fc());H("ul",m("index"),`<li id=about>${J(111)}</li><li id=chlog>${J(536)}</li><li id="yt"><a href="https://youtube.com/c/Tzared" alt="youtube channel" target="blank_"><img src="nehhon/yt.webp" alt="youtube channel"></a></li><li id="discord"></li>${!ma&&`<li id=tzdesk><svg width="24" height="24" viewBox="0 0 24 24" class="icon-nuGd5b"><g fill="currentColor"><path d="M17.707 10.708L16.293 9.29398L13 12.587V2.00098H11V12.587L7.70697 9.29398L6.29297 10.708L12 16.415L17.707 10.708Z"></path><path d="M18 18.001V20.001H6V18.001H4V20.001C4 21.103 4.897 22.001 6 22.001H18C19.104 22.001 20 21.103 20 20.001V18.001H18Z"></path></g></svg> <a id='tzdwd' style='text-decoration:none;color:inherit' href='download/' target="_blank">${J(538)}</a></li>`||
""}<li id=help>${J(114)}</li>`).id="topLinks";m("accb").innerHTML=f.sid?J(445):J(444);m("about").onclick=function(){location.hash="About"};m("help").onclick=function(){location.hash="#Guide"};m("chlog").onclick=function(){location.hash="#Changelog"};m("accb").onclick=Sb;if(ma){a=H("span",m("mult"),"","position:absolute;right:0px");b=H("button",a,J(391).split("|")[0],"background:#00000085;color:#c3a447");let d=H("input",a,"","background: #00000085;");d.placeholder="https://tza.red/##room";b.onclick=
()=>{let e=d.value.split("##")[1];e&&(gc=!0,hc("#"+e),ic())}}ma||(m("tzdesk").onclick=function(){m("tzdwd").click()});m("yt").onclick=function(){m("yt").children[0].click()};a=m("discord");a.ariaLabel="Discord";a.onclick=()=>{window.open("https://discord.gg/ndxJHxT","_blank")}}
(async function(){var a=await fetch(l.Na+l.xa+".nhl");da=await hb(await a.text());jb=[{name:J(547)},{name:J(548)},{name:J(549)},{name:J(550)},{name:J(551)},{name:J(552)},{name:J(553)},{name:J(554)},{name:J(555)}];f.shdw&&(a=await (await fetch("nehhon/f.r")).text(),Yb.innerHTML=a,H("div",m("index"),304+~~(3*Math.random())).id="ppop");cc();ib=1;mb();for(let b of kb)b()})();function jc(a,b,c,d){Ua(b&&J(b),J(a),d,J(c))}window.spAlert2=jc;function kc(){lc("alert")}
function mc(a,b,c){let d=Ub(J(a),1);d.style.fontSize="16px";d.style.width="300px";d.style.textAlign="center";c&&(H("button",d,b,"display:block;margin:28px auto auto;font-size:15px;padding:6px;background:#00ff0030;border-radius:2px").onclick=()=>{G(d.parentNode.parentNode);c()})}
function Ua(a,b,c,d){var e=m("alert");e||(e=document.createElement("div"),e.id="alert",document.body.appendChild(e),e=m("alert"),e.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var g=m("alerttitle"),h=m("alerttext");m("alertok").onclick=kc;e.style.display="block";g.innerHTML=b||da&&J(115)||"Warning";m("alertok").innerHTML=d||
da&&J(116)||"Ok";h.innerHTML=a||"";c?m("alertok").style.display="none":m("alertok").style.display="block"}window.spAlert=Ua;var nc=0,oc;function pc(a){qc.innerHTML=J(117)+" "+a+"%"}window.showProgress=pc;function rc(){nc++;nc>=oc&&(sc?sc():tc())}function uc(a,b){this.pb=a;this.size=b}function nb(a){return wc(a.pb,a.size)}function xc(){var a=ob;return yc(a.pb,a.size)}
function zc(a){sc=a;qc.innerHTML=J(117);var b=1;Q&&(b=1);Ac=4096*b;oc=3;a&&oc--;nc=0;K[134]("true"==f.shadows,b,Ac);pc.progress=0;pc.total=0;Date.now();rc();qc.innerHTML=J(117);Bc()}var sc;function Bc(){K[136]()==oc-nc?(nc++,rc()):setTimeout(Bc,15)}function Cc(){if(!ma){f.update=1;if(window.caches){var a=window.caches;a.keys().then(function(b){for(let c of b)a.delete(c)})}setTimeout(function(){location.reload(!0)},250)}}f.lastVersion&&612!=f.lastVersion&&(f.lastVersion=612,Cc());var Dc=m("index");
function Ec(){f.cache_v||(f.cache_v=7);if(1!=f.update||ma)fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(b){return b.text().then(function(c){H("div",Dc,l.version).id="info";612!=c&&Cc()})});else if(delete f.update,7!=f.cache_v){f.cache_v=7;var a=indexedDB.deleteDatabase("emscripten_filesystem");a.onsuccess=function(b){q(b)};a=indexedDB.deleteDatabase("nh2019");a.onsuccess=function(b){q(b)}}}ma?H("div",Dc,l.version+` ${aa&&` - ${aa}`||""}`).id="info":Ec();
ma?"1.1.7"!=aa&&Ua("New desktop version available, you can download it<br>by clicking <a href='https://tza.red/download' target='_blank'>here</a>"):"serviceWorker"in navigator&&(navigator.serviceWorker.register("sworker.js").then(function(){},function(a){q(a)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)});var Fc,Gc,Hc={},Ic="ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.mp3 CAMEL2.mp3 CARPETCMD.mp3 CATAPULT.mp3 CBEAR1.mp3 CBEAR2.mp3 CBEAR3.mp3 CBEAR4.mp3 COW1.mp3 COW2.mp3 COW3.mp3 COW4.mp3 DRAGON1.mp3 DRAGON2.mp3 FLY1.mp3 FLY2.mp3 FOOT1.mp3 FOOT2.mp3 FOOT3.mp3 FOOT4.mp3 FOOT5.mp3 FOOT6.mp3 FOOT7.mp3 FOOT8.mp3 GHOST1CMD.mp3 GHOST2CMD.mp3 GHOST3CMD.mp3 GOLEMCMD.mp3 H%20CMD%201.mp3 H%20CMD%202.mp3 H%20CMD%203.mp3 H%20CMD%204.mp3 HEAVY%20CATAPULT.mp3 INF%20CMD%201.mp3 INF%20CMD%202.mp3 INF%20CMD%203.mp3 INF%20CMD%204.mp3 INF%20CMD%205.mp3 MESSIAHCMD.mp3 ORC%20CMD%201.mp3 ORC%20CMD%202.mp3 ORC%20CMD%203.mp3 ORC%20CMD%204.mp3 ORC%20CMD%205.mp3 ORC%20CMD%206.mp3 SHIP%20CMD%201.mp3 SHIP%20CMD%202.mp3 SKELETON1.mp3 SKELETON2.mp3 SHIP%20SELECT.mp3 E_BARRACK1.mp3 E_BLACKSMITH1.mp3 FIRE1.mp3 FIRE2.mp3 FIRE3.mp3 FIRE4.mp3 FIRE5.mp3 ROCKET.mp3 pepe.mp3 A_MAGE.mp3".split(" "),
Kc,Lc;function Mc(){var a=Nc;this.context=Fc;this.onload=a}function Nc(a,b,c){b=b.split(".")[0].toLowerCase();Hc[b]=a;c&&(Gc(b,c.x,c.y,c.k,c.jc,c.D),c.D=0)}
function ic(){if(!Fc){Mc.prototype.ic=function(d,e){var g=this;Oc(l.Na+d,function(h){g.context.decodeAudioData(h).then(function(k){k&&Nc(k,d,e)})})};for(var a=0,b=Ic.length;a<b;a++){var c=Ic[a];Hc[c.split(".")[0].toLowerCase()]=c}"undefined"===typeof AudioContext||Ha||(window.AudioContext=window.AudioContext||window.webkitAudioContext,Fc=new AudioContext,Lc=Fc.createGain(),Kc=new Mc,Lc.gain.value=parseInt(f.soundRange)/100,Lc.connect(Fc.destination));Gc=function(d,e,g,h,k,p,t){if(Kc&&(parseInt(f.soundRange)||
!B.m)){"string"!==typeof d&&(d=Ic[d].split(".")[0].toLowerCase());var r=d;if((d=Hc[d])&&"loading"!==d&&!B.rb){var u=-Pc+(window.innerWidth-l.N)/2,v=-Qc+window.innerHeight/2;if(d.duration){if(B.m)if(64<B.now()-d.Fb||!d.Fb)d.Fb=B.now();else return;if(!("attack"!=r&&p&&600<Date.now()-p)){if(e){if(k=(-u/32+e)/7,g=(-v/32+g)/7,v=Rc,4096<k*k+g*g)return!1}else v=g=k=0;void 0!==h&&h!==l.Eb||B.Vc||(h=Fc.createBufferSource(),h.buffer=d,e?(d=Fc.createPanner(),d.panningModel="HRTF",d.setPosition(k,g,v),d.refDistance=
1,d.distanceModel="inverse",h.connect(d),d.connect(Lc)):h.connect(B.m?Lc:Fc.destination),h.start(0))}}else Hc[r]="loading",e={x:e,y:g,k:h,jc:k,D:Date.now(),mid:t},Kc.ic(d,e)}}};window.play=Gc}}
const Sc=[{name:"Tzar soundtrack",da:"Kiril Busty Petrushev & Dimitar Sabev",volume:.7,ka:[{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],qa:[{sizes:"141x141",src:"nehhon/cover.png"}],Ta:!0},{name:"Sharp Rain Tzar",da:"Sharp Rain, Kiril Busty Petrushev & Dimitar Sabev",
volume:1,ka:[{url:"sr1.mp3",name:"Track 1"},{url:"sr2.mp3",name:"Track 2"},{url:"sr3.mp3",name:"Track 3"},{url:"sr4.mp3",name:"Track 4"},{url:"sr5.mp3",name:"Track 5"},{url:"sr6.mp3",name:"Track 6"},{url:"sr7.mp3",name:"Track 7"},{url:"sr8.mp3",name:"Track 8"},{url:"sr9.mp3",name:"Track 9"},{url:"sr10.mp3",name:"Track 10"}],qa:[{sizes:"141x141",src:"nehhon/shr.png"}],Ta:!0},{name:"Tzar soundtrack",da:"Kiril Busty Petrushev & Dimitar Sabev",volume:1,ka:[{url:"tzaradp.mp3",name:"Tzar ADP",da:"Diemiurgo"},
{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],qa:[{sizes:"200x200",src:"nehhon/diemiurgo.jpg"}]},{name:"Tzar soundtrack remastered",volume:1,da:"Kiril Busty Petrushev & Dimitar Sabev",ka:[{url:"o1.mp3",name:"Track 1"},{url:"o2.mp3",name:"Track 2"},
{url:"o3.mp3",name:"Track 3"},{url:"o4.mp3",name:"Track 4"},{url:"o5.mp3",name:"Track 5"},{url:"o6.mp3",name:"Track 6"},{url:"o7.mp3",name:"Track 7"},{url:"o8.mp3",name:"Track 8"},{url:"o9.mp3",name:"Track 9"},{url:"o10.mp3",name:"Track 10"},{url:"outro.mp3",name:"Outro"}],qa:[{sizes:"141x141",src:"nehhon/cover.png"}],Ta:!0},{name:"Tzar soundtrack orchestral version",volume:1,da:"Pau Garriga, Kiril Busty Petrushev & Dimitar Sabev",ka:[{url:"oc1.mp3",name:"Track 1"},{url:"oc2.mp3",name:"Track 2"},
{url:"oc3.mp3",name:"Track 3"},{url:"oc4.mp3",name:"Track 4"},{url:"oc5.mp3",name:"Track 5"},{url:"oc6.mp3",name:"Track 6"},{url:"oc7.mp3",name:"Track 7"},{url:"oc8.mp3",name:"Track 8"},{url:"oc9.mp3",name:"Track 9"},{url:"oc10.mp3",name:"Track 10"}],qa:[{sizes:"480x360",src:"nehhon/oc.jpg"}],Ta:!0}];var Tc;
function Uc(){"mute"!=f.favMusic&&Tc&&(Tc.src="nehhon/F.mp3",Tc.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:"Astronomia (Medieval Style)",artist:"Cornelius Link",artwork:[{sizes:"200x200",src:"nehhon/cornelius.jpg"}]})))}
function Vc(){this.value&&(f.favMusic=this.value);if("mute"!=f.favMusic){var a=Sc[f.favMusic]||Sc[0];if(a.Ta){a=a.ka;for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}}}Wc.id=0;Wc()}
function Wc(){var a=f.favMusic;if("mute"==a)return Tc.src="";a=Sc[a]||Sc[0];0>Wc.id&&(Wc.id=0);var b=a.ka[Wc.id++%a.ka.length];Tc.src="nehhon/"+b.url;Tc.play();"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:b.name,artist:b.da||a.da,album:a.name,artwork:a.qa}))}
function Xc(){Tc=new Audio;Tc.onended=Wc;Tc.volume=parseInt(f.musicRange)/100;if("mediaSession"in navigator){var a=navigator.mediaSession;a.setActionHandler("play",function(){Tc.play();a.playbackState="playing"});a.setActionHandler("pause",function(){Tc.pause();a.playbackState="paused"});a.setActionHandler("seekbackward",function(){});a.setActionHandler("seekforward",function(){});a.setActionHandler("previoustrack",function(){Wc.id-=2;Wc()});a.setActionHandler("nexttrack",Wc)}Vc()}
window.setupGameMusic=Xc;var Yc;function Zc(){return 25*K[48]()}function $c(){if(0===B.paused){B.paused=1;void 0!=Yc&&clearInterval(Yc);var a=B.now();B.Ea+=Date.now();B.now=function(){return a}}else B.Ea-=Date.now(),B.paused=0,Yc=setInterval(ad,ad.speed),B.now=Zc;bd()}function cd(a){var b=Math.floor(a/3600);let c=Math.floor(a%3600/60);a=1<b?`${b} h`:1===b?"1h":"";b=b&&!c?"":`${c} ${J(558)}`;return a+(a&&b?" ":"")+b}
function dd(a){a/=1E3;var b=~~(a/60)%60,c=~~(a/3600);a=~~(a%60);1===(a+"").length&&(a="0"+a);0!=c?(c+=":",10>b&&(b="0"+b)):c="";return c+b+":"+a}window.invgtech=function(a){a=H("div",document.body,"",`background-position-y:${a}px`);a.className="techdone";setTimeout(G,4020,a)};window.synctm=function(){K[11]()};var ed,fd,bd=()=>{ed=Date.now();fd=25*K[48]()};window.rw_etimer=bd;var gd,hd,id;
function ad(){var a=Date.now();B.U=K[48]();(hd=gd==B.U)&&!id?id=a:hd||(id=0);a=Date.now()-ed+fd;200<25*K[48]()-a&&bd();gd=B.U;K[11]();B.U=K[48]();a=jd;0===B.U%40&&a()}window.frcintv=ad;ad.speed=25;function kd(){this.ta=!this.ta;this.style.backgroundPositionY=-28*!this.ta+"px";K[182](this.xb,this.ta,this.ma)}function ld(a){document.body.style.cursor="";m("diplomacy")||Q||(Ub('<table>\n    <tbody id="dpltable">\n    </tbody>\n    </table>\n    ',a).id="diplomacy",K[181]())}
function md(){var a=nd('<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/gold.gif"></div>'+(Hb?"":'<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/wood.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/food.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/stone.gif"></div>'),1);a.className="sndRes";a=H("button",a,J(448),
"padding:15px;margin-top:24px;background:#00ff001a");a.ma=this.ma;a.onclick=od}function od(){var a=this.parentNode.getElementsByTagName("input");q(a,this);K[183](this.ma,parseInt(a[0].value),a[1]&&parseInt(a[1].value),a[1]&&parseInt(a[2].value),a[1]&&parseInt(a[3].value));P(this.parentNode)}var pd;window.upddipmenu=()=>{m("dpltable")&&(pd=1,K[181](),pd=0)};
window.shdiplomacyrow=function(a,b,c,d,e,g,h,k,p,t,r,u,v,x,y){b=qd(t,b);if(pd){var z=m("dpltable").children;for(let D of z)if(D.P==u){var w=D;break}w.innerHTML=""}else w=document.createElement("tr"),m("dpltable").appendChild(w);w.P=u;z=K[112]()==u;Hb&&!c&&(a="-");H("td",w,a);H("td",w,"","padding:0px;width:13px");H("td",w,`<div style="width:4px;background:${ha(d)};border-radius:1px;height:16px;"></div>`,"padding:0px");H("td",w,b+rd(t),`color:#ffd75d;${h&&`;text-decoration:line-through;color:#${Hb?
"a3a3a3":"f00"}`||""}`).onclick=()=>{var D=R[t]&&R[t].id;D&&E(60,Wb(D))};H("td",w,c);a=n[45]&&K[48]()<2400*n[18];if(z)H("td",w,`<div class="shme" style="color:#ffb100">${K[246]()?"":y||"\ud83d\udec7"}</div>`,"padding:0 5px;");else{var A=H("td",w,`<div class="${p?"shenemies"+(1!=p?2:""):"shallies"}">${K[246]()?"":y||"\ud83d\udec7"}</div>`,"padding:0 5px;").children[0];4==p&&(A.style.filter="hue-rotate(-200deg)");sd&&(e=H("td",w,`<div class="shview" style="background-position-y:${-28*!g}px;${e&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||
""}"></div>`,"padding:0 5px;").children[0],p||(e.onclick=kd,e.xb=3,e.ta=g,e.ma=u));3!=p&&(A.onclick=()=>{let D=p;p&&2!=p?A.className="shenemies2":(A.className="shenemies",D=0);4==p&&(A.className="shallies",A.style.filter="");K[289](t,D,u);p=!p});if(!a){g=I("td",w,"padding:0 5px;");for(let D=0,C=Hb?1:4;D<C;D++){let L=I("div",g,`background-position-y:${-28*!(r&1<<D)}px;${(x&1<<D?1:0)&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}`);td(L,D);L.className="shres";p||(L.onclick=()=>{r^=1<<D;L.style.backgroundPositionY=
-28*!(r&1<<D)+"px";q(r);K[182](1,r,u)})}g.title="Share resources"}v=H("td",w,`<div class="shcontrol" style="background-position-y:${-28*!k}px;${v&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}"></div>`,"padding:0 5px;").children[0];v.title="Share control of units";p||(a||(w=H("td",w,'<div class="shtrib"></div>',"padding:0 5px;").children[0],w.onclick=md,w.ma=u),v.onclick=kd,v.xb=2,v.ta=k,v.ma=u)}};var ud=0,vd=0,wd=[14,12,0,0,0,0,18,18,11,14,7,7,5,5,16,11,16,8,5,5,16,15],xd=-1;
window.cursor=function(a,b){var c=wd[2*a]||0,d=wd[2*a+1]||0;b&&(a+="i");a!==xd&&(xd=a,document.body.style.cursor=`url("${l.Na}cursor${a}.gif") ${c} ${d}, auto`)};var yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od;window.setupArrows=function(a,b,c){a&&(Id.Qa.className="");(a+1)*Gd.length<b&&(Id.Sa.className="");c&&(Id.Qb.className="")};const Pd=[20,15,14,22];
window.setupTradingmenu=function(a,b,c,d,e,g){m("tradingmenu")?Qd("tradingmenu"):(H("div",Rd?m("menbak2"):m("menu"),'<button id="tramount"></button>\n<button id="troriginres"></button>\n<button id="trdestres"></button>\n<button id="trorigin"></button>\n<button id="trdest"></button>\n<button id="trdecline" style="top:167px"></button>\n<button id="traccept" style="top:167px"></button>',"",Rd).id="tradingmenu",m("tramount").onmouseup=function(h){K[159](h.button?-1:1)},m("troriginres").onmousedown=function(h){this.style.backgroundPositionY=
-48*Pd[K[160](h.button?-1:1)]+"px"},m("trdestres").onmousedown=function(h){this.style.backgroundPositionY=-48*Pd[K[160](h.button?-1:1,1)]+"px"},m("trorigin").onclick=function(){K[161]()},m("trdest").onclick=function(){K[161](1)},m("trdecline").onclick=function(){lc("tradingmenu")},m("traccept").onclick=K[162]);m("traccept").disabled=!g;q(a);m("tramount").innerHTML=a+` (+${g})`;c?m("trorigin").style.cssText=`background:url(nehhon/iconunits.webp) 0px ${48*-c}px`:m("trorigin").style.cssText="";b?m("trdest").style.cssText=
`background:url(nehhon/iconunits.webp) 0px ${48*-b}px`:m("trdest").style.cssText="";m("troriginres").style.backgroundPositionY=-48*Pd[e]+"px";m("trdestres").style.backgroundPositionY=-48*Pd[d]+"px"};var Sd=navigator.va;function Td(){}Sd&&Sd.addEventListener("levelchange",Td);
window.setupMWmenu=function(){m("magicworkshopmenu")?Qd("magicworkshopmenu"):(H("div",Rd?m("menbak2"):m("menu"),'<button id="mgbook"></button>\n            <button id="mgpotion"></button>\n            <button id="mgsword"></button>\n            <button id="mgamount"></button>\n            <button id="mgitem"></button>\n            <button id="mgdecline"></button>\n            <button id="mgaccept"></button>',"",Rd).id="magicworkshopmenu",m("mgbook").onclick=function(){K[36](0);Ud()},m("mgpotion").onclick=
function(){K[36](1);Ud()},m("mgsword").onclick=function(){K[36](2);Ud()},m("mgdecline").onclick=function(){m("magicworkshopmenu").style.display="none"},m("mgitem").onmousedown=function(a){var b=1;a.button&&(b*=-1);K[37](b);Ud()},m("mgaccept").onclick=function(){m("magicworkshopmenu").style.display="none";K[39]()},m("mgamount").onmousedown=function(a){var b=1;a.button&&(b=-1);K[38](b);Ud()});Ud()};
function Ud(){m("mgitem").style.backgroundPositionY=-48*K[35]()+"px";m("mgamount").innerHTML=K[34]()}function Vd(a,b){var c=a.Z,d=document.createElement("div");d.className="contD";for(var e=0;e<c.length;e++){var g=document.createElement("button"),h=c[e];h.parent=a;g.innerHTML=h.name;g.onclick=Wd;g.oa=h;b.appendChild(g);h.Z&&(h.ub=d)}b.appendChild(d)}function Xd(a){a.style.visibility="hidden"}function S(a){a.style.display="none"}Element.prototype.show=function(){this.style.display="block"};
function Yd(a){a.style.display=""}function Zd(a){var b=m(a.parent);Vd(a,b)}var $d;function ae(){var a=be,b=ce();a.Z=b;a.Aa&&(a.Aa.innerHTML="",Vd(a,a.Aa))}
function Wd(){var a=this.oa,b=a.parent;if(a.onclick)a.onclick(a.Mb);if($d&&b&&b.W!=$d)for(var c=$d,d=c.length,e=0;e<d;m(c[e++]).style.display="none");a.W&&(de(a.W),$d=a.W);a.ia&&a.ia.oa&&a.ia.oa.W&&(de(a.ia.oa.W),$d=a.ia.oa.W);if(a.Z){b.ia&&(b.ia.className="");b.ia=this;this.className="clickD";a.Aa||(b=document.createElement("div"),a.ub.appendChild(b),Vd(a,b),a.Aa=b);b=a.ub.children;for(c=0;c<b.length;S(b[c++]));a.Aa.show()}}
function ee(){var a=K[112]();m("selectKingdom").innerHTML="";for(var b=0,c=K[28]();b<c;b++){var d=b?fe(ge(K[111](b),20)):J(23),e=ha(K[132](b));m("selectKingdom").innerHTML+=`<option style="background:${e}" value="${b}" ${b==a&&"selected"||""}>${d}</option>`}m("selectKingdom").innerHTML+="<option value='"+(2**31-1)+"'>"+J(22)+"</option>";m("selectKingdom").onchange(1)}window.activeKingdomSetup=ee;function he(a){K[117](a,!0)}
function ie(a,b){let c=nb(ob),d=a.length;1024<d&&(d=1024);for(let e=0;e<d;e++)c[e]=a.charCodeAt(e);K[239](d,b)}function je(a){m("brushSize").value=a;m("brushSize").onchange()}function ke(a,b){var c=` (${ke.Ba.length})`;ke.Ba.put({name:"water"==le.j[b]&&J(45)+c||J(46)+c,onclick:he,Mb:a})}var me;window.EDterrainInfo=ke;function ce(){ke.Ba.length=0;K[118]();return ke.Ba}var ne;window.fstTXT=function(a,b){b?ne=fe(wc(a,b)):ne=""};var oe=(a,b)=>a.name.localeCompare(b.name);let pe;var qe=1,re,be;
function se(){if(!Ha){Rd="true"==f.theme||1020>window.innerWidth||Hb;m("content")||(H("div",te).id="content");if(Q){ke.Ba=[];m("content").innerHTML=`<div id="mapeditorpanel">
    <div id="mapeditorinfo">
    </div>
    </div>
    <div id="minimap" style="box-shadow:0px 0px 20px #000;position:absolute;top:31px;left:4px"></div>
    <div id="mapeditorinfotop">
   
    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>
    <button style="display:none" id="rotatebutton"></button>
    <button id="mapProps" style="box-shadow:none"></button>
    <button id="mapRules">${J(576)}</button>
    <button style="display:none" id="mapRules"></button>
    <div id="brhSize" style="display:none"><span>${J(728)}: </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>
    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>
    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>
    <div id="EDrndtree" style="display:none"><button id="rndtrees">${J(49)}</button></div>
    <div id="EDterr" style="display:none"><span>${J(26)}: </span><select id="EDtrrsel">${ue()}</select></div>
    <div id="EDterrRND" style="display:none"><button id="rndtrbutton">${J(50)}</button></div>
    <div><span style="font-size:14px;color:#797979">${J(670)}: </span>
    <select id="selectKingdom">
    </select>
    </div>
    <div><button id="castleRND">${J(52)}</button></div>
    <div><button id="clearMap">${J(51)}</button></div>
    </div>
    <div id="bigMap" style="display:none"></div>
    ${""}
    `;m("mapRules").onclick=ve;var a=m("mapeditorinfotop");I("button",a,"box-shadow:none;background:url(nehhon/load.webp);opacity:.8;width:20px;height:26px;background-size:20px",1).onclick=()=>{var c=document.createElement("input");c.type="file";c.accept=".tzared";c.onchange=we;c.click()};I("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/dwn.webp);background-size:26px;opacity:.8;width:26px;height:26px",1).onclick=xe;I("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/exit.webp);background-size:30px;opacity:.8;width:30px;height:28px;margin-left:auto").onclick=
ye;let b=H("button",a,"\u25a4");a.insertBefore(b,m("brhSize")).onclick=()=>{let c=nd("",1);N("div",c,678,"color:var(--color1);font-size:22px;margin-bottom:32px");let d=ze(c),e=Ae(c),g=H("div",c),h=Be(c,0,[624,598,586,873]),k,p,t;h.onchange=()=>{k=void 0;Gb(g);if(1==h.value){g.className="unitProps";k=Ce([0,0,0,0,0,0,0],De(d),g);H("span",g,J(676)+": ");let r=Ee(u=>p=u,g,0);r.style.margin="20px";p=2147483646;N("option",r,677).value=p;r.value=p}else 3==h.value&&(t=H("input",g),t.placeholder=J(747),t.maxLength=
20)};N("button",c,675,"margin-left:15px").onclick=()=>{let r=nb(ob);for(var u=0;u<e.length;u++)r[u+1024]=e[u].checked;if(1==h.value){for(u=0;u<k.length;u++)k[u]&&(r[u]=parseInt(k[u].value));r[7]=p}else if(3==h.value){for(u=0;u<t.value.length;u++)r[u]=t.value.charCodeAt(u);r[1023]=t.value.length}K[247](De(d),De(h));P(c)}};m("castleRND").onclick=function(){K[133](0);Fe.update=!0};m("clearMap").onclick=function(){K[133](1)};m("rndtrees").onclick=K[125];m("rndres").onclick=K[129];m("brushDensity").onchange=
function(){K[116](parseInt(m("brushDensity").value))};m("brushSize").onchange=function(){K[115](parseInt(m("brushSize").value))};m("brushMargin").onchange=function(){K[147](parseInt(m("brushMargin").value))};m("rndtrbutton").onclick=function(){K[3]();K[124]();Fe.update=!0};m("brushDensity").onchange();m("brushSize").onchange();m("selectKingdom").onchange=function(){K[113](parseInt(this.value));if(this.value!=2**31-1){var c=K[132](parseInt(this.value)),d=c>>16&255,e=c>>8&255;c&=255}else c=e=d=0;this.style.background=
`rgba(${d},${e},${c},0.6)`};m("mapProps").onclick=function(){var c=nd("",1);c.id="mapPropsWindow";c=H("div",c);var d=I("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;"),e=I("div",c,"display:flex;justify-content:center;gap:33px");Ge=H("div",c);Ge.id="edks";He();const g=[48,Ie,737,()=>Je(),463,Ke,702,()=>Le()];for(let t=0;t<g.length;t+=2)N("button",e,g[t],"text-transform:uppercase").onclick=g[t+1];N("p",d,54);let h=H("input",
d);h.onchange=()=>ie(h.value,0);K[240](0);h.value=ne;N("p",d,56);let k=I("textarea",d,"width:694px;height:152px");k.onchange=()=>ie(k.value,1);K[240](1);k.value=ne;N("p",d,57);let p=H("input",d);p.onchange=()=>ie(p.value,2);K[240](2);p.value=ne;N("button",d,70,"display:block;margin-left:auto").onclick=()=>{let t=nd("",1),r=K[250]();N("span",t,691,"line-height:31px");let u=Me(t,x=>{x?(v.show(),v.value="",v.focus()):(S(v),K[250](1,0),v.value=0)},r);u.style.Mc="right";u.style.marginLeft="6px";let v=
Wa(t,r,()=>{Ne(v);K[250](1,De(v))},"number","display:block;margin:auto;margin-top:14px",9999999,0);r?v.focus():S(v)};d=I("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;width:max-content");H("span",d,J(457)+": ");e=H("input",d,"","display:block;margin-top:10px;background:none");e.onchange=Oe;e.type="file";e.accept="image/*";H("div",d).id="mmimg";c=I("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;width:max-content");
N("span",c,721);c=H("input",c,"","display:block;margin-top:10px;background:none");c.onchange=Pe;c.type="file";c.accept=".wmp"};be={name:J(26),Z:ke.Ba,W:["brhSize"]};pe=[{name:J(535),onclick:()=>K[117](-1,!0),W:["brhSize"]}];new Zd({Z:[{name:J(730),onclick:()=>je(1),W:["brhSize","brhMargin"],Z:[{name:J(729),onclick:()=>Qe(K[110])}]},{onclick:()=>je(8),name:J(26).toUpperCase(),Z:[be,{name:J(61),Z:[{name:J(61),onclick:K[117],Mb:7}],W:["brhSize","brhDnst","EDrndtree"]},{name:J(534),Z:pe,onclick:()=>{pe.length=
1;let c=K[215]();for(let d=0;d<c;d++)pe.put({name:d,onclick:()=>{K[216](d)}})}}]}],parent:"mapeditorinfo"})}else Rd?(a=Re()?"nwb":"",m("content").className="nw "+a,m("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="popr"></div>
    <div id="resources">
    <div><span id="gold"></span></div>
    <div><span id="wood"></span></div>
    <div><span id="food"></span></div>
    <div><span id="stone"></span></div>
    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${B.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"></span>
    <span id="tpGPU"> </span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menbak0">
    <div id="plavatar"></div>
    ${!La&&'<div id="kingdom"></div>'||""}
    ${`<div id="addAlly" style="display:none">${J(922)}</div>`||""}
    </div>
    <div id="menbak1"></div>
    <div id="menbak1s"></div>

    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>

    <div id="topmenuvals">
    <div id="delunit">x</div>
    <div id="progressvalue"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    ${La&&'<div id="kingdom"></div>'||""}
    <div id="unitname" contenteditable="true"></div>
    </div>
    <div id="menbak2">
    <div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>
    <button id="gameMenu">${J(47)}</button>
    </div>
    </div>`):(m("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="resources" style="display:block">
    <div id="goldr"></div>
    <div id="woodr"></div>
    <div id="foodr"></div>
    <div id="stoner"></div>
    <div id="popr"></div>
    <div id="resourcesbefore"></div>
    <div id="gold"></div>
    <div id="wood"></div>
    <div id="food"></div>
    <div id="stone"></div>

    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${B.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"></span>
    <span id="tpGPU"></span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menubefore"></div>
    <div id="menuafter"></div>
    <button id="gameMenu">${J(47)}</button>

    <div id="daynighticon"></div>
    <div id="topmenuvals">
    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>
    <div id="delunit">\ud83d\udec7</div>
    <div id="progressvalue"></div>
    <div id="kingdom"></div>
    <div id="unitname" contenteditable="true"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    </div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>`,m("content").className="dfth"),Od=m("msgs1"),Se(),Hb&&S(m("tpTM")),Te=I("span",m("topinfo"),"display:none;font-size:8px;color:#00ffff"),!Ue&&B.l&&(setInterval(()=>{Ve=performance.now();Ab(28)},15E3),Ve=performance.now(),Ab(28)),Id={page:0,Qa:m("aleft"),Sa:m("aright"),Qb:m("stock")},window.actionMenu=Id,Id.Qa.onclick=function(){K[30](-1)},yd=m("minimap"),Jd=m("gold"),Kd=m("wood"),Ld=m("food"),Md=m("stone"),m("resources"),Nd=m("daynighticon"),Id.Sa.onclick=function(){if("blocked"!=Id.Sa.className)K[30](1)},
Id.cc=[],zd=m("attackmenu"),Ad=m("defencemenu"),Bd=m("levelmenu"),Cd=m("kingdom"),Dd=m("progressone"),Ed=m("unitname"),Fd=m("progressvalue"),Ed.oninput=()=>{We(Ed.textContent)},m("delunit").onclick=function(){K[32](8,0)},991915600==n[4]&&Rd&&(S(Kd.parentNode),S(Ld.parentNode),S(Md.parentNode)),me=m("addAlly"),me.onclick=()=>{me.style.opacity=.25;K[289](me.P,1)},m("menuctrl").onclick=function(){(qe=!qe)?(m("menuctrl").style.cssText="",m("menu").style.cssText="",m("resources").style.cssText=""):(m("menuctrl").style.left=
"0px",m("menuctrl").style.backgroundPosition="100px",S(m("menu")),370>window.innerHeight&&(m("resources").style.cssText="width:100%;left:0px"));K[167](qe)},m("minimapb").onclick=function(){if(Xe=!Xe)re=qe,qe=!0,m("menuctrl").onclick(),m("minimapb").style.filter="drop-shadow(0px 0px 2px #fff)";else{re&&(re=0,m("menuctrl").onclick());lc("bigMap");m("minimapb").style.cssText="";for(var b=document.getElementsByClassName("alertdmg"),c=0;c<b.length;c++)S(b[c])}},m("teamchat").onchange=function(){m("msginputGame").focus()},
m("msgButton")&&(m("msgButton").onclick=Ye),m("diplomacyButton").onclick=ld,Hd=m("bottominfo"),S(Hd),Ze(),m("stock").onclick=K[31],m("gameMenu").onclick=$e;m("minimap").addEventListener("mousedown",af);m("bigMap").addEventListener("mousedown",af);m("bigMap").addEventListener("touchstart",af)}}
function Ze(){if(!Q){var a=4;if(Rd){var b=Re(),c=b?window.innerWidth/T:window.innerHeight/T;240>c?a=1:295>c?a=2:344>c?a=3:700<c&&1020<window.innerWidth/T&&(a=b?window.innerWidth/T-m("menbak2").getBoundingClientRect().x-132:window.innerHeight/T-m("menbak2").getBoundingClientRect().y-132,a=Math.floor((a+5-24)/53),24<a&&(a=24))}a*=2;if(!Gd||Gd.length!=a){b=m("orders");b.innerHTML&&(b.innerHTML="");Gd=[];for(c=0;c<a;c++){let d=H("button",b);d.ontouchstart=bf;d.ontouchend=cf;d.onmousedown=df;d.onmouseup=
ef;d.Da=c;d.onmouseenter=ff;d.onmouseout=gf;Gd[c]=d}K[189](a,!B.m)}}}var hf,jf;function bf(a){jf=a.changedTouches[0].pageX;hf=a.changedTouches[0].pageY}function cf(a){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY,d=Math.sign(c-hf);q(d,c,hf);48<d*(c-hf)?(K[32](16,1),K[15](this.Da,0<d?2:0),K[32](16,0)):(55<Math.sign(b-jf)*(b-jf)&&(K[32](16,1),K[32](18,1),K[15](this.Da,0),K[32](16,0),K[32](18,0)),q(a))}window.clearleftar=function(){Id.Qa.className=""};var kf;
function af(a){var b=K[47](),c=a.offsetX,d=a.offsetY;kf=this.getBoundingClientRect();b="touchstart"==a.type;if(0===a.button||b)document.addEventListener(b&&"touchend"||"mouseup",function k(){lf=!1;document.removeEventListener("mouseup",k);document.removeEventListener("mousemove",mf)}),lf=!0,mf(a),document.addEventListener(b&&"touchmove"||"mousemove",mf);else if(2===a.button){var e=parseInt(a.target.style.width),g=parseInt(a.target.style.height);b=K[47]();c=Math.floor(b*c/e*32)/T;d=Math.floor(b*d/
g*32)/T;K[22](c,d,2,0,!0,a.shiftKey)}}function nf(a,b,c,d,e,g,h,k,p,t,r,u,v,x){v=g?nf.fc:m("guideTable").getElementsByTagName("tr")[v].getElementsByTagName("td")[u];var y="";g||(y+=`<span>${dc[u]}</span>`);y+=`<div ${g&&"class='spchild'"||""}>
    <div class="prevIcon" style="background-position-y:${48*e}px"></div>
    <ul>
    <li class="guiTitle">${J(a)}</li>
    ${x&&`<li class="desc">${J(x)}</li>`||""}
    <li><span>${J(66)+":"}</span> ${k&&k+"<img src='nehhon/gold.gif'>"||""} ${p&&p+"<img src='nehhon/wood.gif'>"||""} ${t&&t+"<img src='nehhon/food.gif'>"||""}  ${r&&r+"<img src='nehhon/stone.gif'>"||""} </li>
    `;h&&1!=h||(y+=`
    <li><span>${J(4)}:</span> ${b}</li>`);h||(y+=`
    <li><span>${J(7)}:</span> ${c}</li>
    <li><span>${J(5)}:</span> ${d}</li>`);a=H("div",v,y+"</ul>\n    </div>\n    ");g||(nf.fc=a)}window.insertInfo=nf;
async function of(){if(!m("guide1")){let k=await (await fetch(`nehhon/hl${({es:1,it:1,pt:1,pl:1,bg:1})[l.xa]&&l.xa||"en"}.json`)).json(),p=k.BASICTR;var a=nd("",2);a.id="guide1";let t=H("h2",a,"","color:var(--color1);font-size:18px;height:46px;margin-top:0px;text-align:left;text-shadow:0px 0px 10px"),r=H("div",a);r.id="hxtrbtn";var b=H("div",a);b.id="helpbtn";let u=H("div",a);u.id="helpcnt";let v="tech unit building item order howto whatis hotkey".split(" ");var c=function(z){z=k[z];let w=H("dl",
u);for(let A in z){let D=z[A];q(D);let C=D.icon.split(",");H("dt",w,`${D.brief}`,`cursor:inherit;background-image:url(nehhon/H${C[0]}.webp); background-position:0px ${-48*(C[1]-1)}px`);H("dd",w,`${D.detail}`,"display:block")}},d=function(z){u.innerHTML="";u.scrollTop=0;for(var w=z.parentNode.children,A=0;A<w.length;A++)w[A].style.border=w[A]==z?"1px solid":""},e=function(z,w){d(w);z=k[z];w=H("dl",u);for(let A in z){let D=z[A],C=D.icon.split(",");H("dt",w,`${D.brief}`,`cursor:inherit;background-image:url(nehhon/H${C[0]}.webp); background-position:0px ${-48*
(C[1]-1)}px`);H("dd",w,`${D.detail.split("~ ")[1]}`,"display:block")}},g=function(z){u.scrollTop=0;if("UNITS"==z){var w=H("button",r,p.table);w.onclick=function(){d(this);pf(u)};w.onclick();H("button",r,p.bonuses).onclick=function(){d(this);qf(u)};H("button",r,p.bonuses_inv).onclick=function(){d(this);qf(u,1)}}"BUILDINGS"==z&&(H("button",r,p.bonuses).onclick=function(){d(this);qf(u,0,1)},H("button",r,p.bonuses_inv).onclick=function(){d(this);qf(u,1,1)});var A="TECHNOLOGIES"==z;if(!A&&(w=H("button",
r,`${p.common}`),w.onclick=function(){e(z+" (Common)",this)},"UNITS"!=z))w.onclick();w=H("button",r,`${p.euro}`);w.onclick=function(){e(z+(A&&" (European)"||" (Euro)"),this)};H("button",r,`${p.arab}`).onclick=function(){e(z+" (Arabian)",this)};H("button",r,`${p.asia}`).onclick=function(){e(z+" (Asian)",this)};if(A)w.onclick()},h=function(z){z=k[z];let w=H("dl",u);for(let A in z){let D=z[A],C=H("dt",w,`\u2b9e ${D.brief}`,"padding-left:10px;height:auto"),L=H("dd",w,`${D.detail}`,"padding-left:10px;display:none;margin-top:4px;margin-left:21px;padding-bottom:6px");
C.onclick=()=>{"none"==L.style.display?L.show():S(L)}}};let x=[()=>g("TECHNOLOGIES"),()=>g("UNITS"),()=>g("BUILDINGS"),()=>c("ITEMS"),()=>c("COMMANDS"),()=>h("How to ..."),()=>h("What is ..."),function(){var z=k.HOTKEYS,w="<br>";for(let A in z)w+=`${A} \ud83e\udc26<span style="color:#fff1c6;margin-left:7px">${z[A]}</span><p>`;u.innerHTML=w}],y="";for(let z=0;z<v.length;z++)a=H("button",b,"",`background-position-y:${45*-z}px`),a.onclick=function(){let w=b.children;for(let A=0;A<w.length;A++)w[A]==
this?this.className="active":w[A].className="";y=p[v[z]];t.innerHTML=y;u.innerHTML="";r.innerHTML="";x[z]()},a.onmouseenter=function(){t.innerHTML=p[v[z]]},a.onmouseout=function(){t.innerHTML=y};b.children[1].onclick()}}window.showGuide=of;
async function rf(){let a=nd("",2);a.id="changelog";N("p",a,536,"font-size:29px;margin-top:0px;border-bottom:1px solid");let b=(await (await fetch("nehhon/changes.txt")).text()).split("##");for(let e=1;e<b.length;e++){let g=b[e].split("\n");var c=g[0].substr(0,3),d=g[0].split(" ")[1];d&&=" - "+d;H("span",a,"v"+c/10+(d||""));c=H("ul",a);for(d=1;d<g.length-1;d++)H("li",c,g[d])}}var sf,tf,uf,vf,wf,xf;window.propsextend=function(a,b,c,d,e,g,h,k){sf=wc(a||0,b||0);tf=wc(c||0,d||0);uf=e;vf=g;wf=h;xf=k};
var yf,zf,Zf=[{i:856,o:a=>{Af=a;Bf!=Cf+Af&&(Df=Ef,Bf=Cf+Af,Ff=Date.now(),Gf=Qc)}},{i:857,o:a=>{Cf=-a;Bf!=Cf+Af&&(Df=Ef,Bf=Cf+Af,Ff=Date.now(),Gf=Qc)}},{i:859,o:a=>{Hf=a;If!=Hf+Jf&&(Df=Ef,If=Hf+Jf,Kf=Date.now(),Lf=Pc)}},{i:858,o:a=>{Jf=-a;If!=Hf+Jf&&(Df=Ef,If=Hf+Jf,Kf=Date.now(),Lf=Pc)}},{i:862,o:a=>{(Xe=a)||lc("bigMap")}},{i:863,o:a=>{a&&Mf(window.devicePixelRatio)}},{i:854,o:function(a){if(a||!Nf)if(zf=a,K[32](220,a),U){var b=Of;Pf[0]=a;Qf.queue.writeBuffer(b,0,Pf)}else F.uniform1i(F.getUniformLocation(V,
"hideTrees"),a)}},{i:446,o:a=>{a||Q||(f.stdcolors=parseInt(f.stdcolors)?0:1,Rf())}},{i:47,o:a=>{if(a)if(m("playingMenu")&&"none"!=m("playingMenu").parentNode.parentNode.style.display)Sf.onclick();else $e()}},{i:65,o:Ye},{i:848,o:a=>{K[32](8,a)}},{i:463,o:a=>{K[32](9,a);Tf||(a?ld():m("diplomacy")&&P(m("diplomacy")))}},{i:850,o:a=>{K[32](81,a)}},{i:853,o:a=>{K[32](32,a)}},{i:864,o:a=>{Uf=a;K[32](17,a)}},{i:865,o:a=>{Tf=a;K[32](16,a)}},{i:866,o:a=>{Nf=a;K[32](18,a)}},{i:427,o:a=>{K[32](112,a)}},{i:462,
o:a=>{K[32](113,a)}},{i:512,o:a=>{K[32](114,a)}},{i:855,o:a=>{a&&(Vf=(Vf+1)%4,K[190](Vf),2==Vf?lc("playersinfo"):3==Vf?(lc("playersinfo"),lc("topinfo")):(Yd(m("playersinfo")),Qd("topinfo")))}},{i:527,o:a=>{K[32](116,a)}},{i:851,o:a=>{K[32](117,a)}},{i:852,o:a=>{K[32](118,a)}},{i:528,o:a=>{K[32](119,a)}},{i:849,o:a=>{m("msgs1")&&!a&&("none"==m("msgs1").style.display?Qd("msgs1"):(lc("msgs1"),Xa("Chat hidden")))}},{i:513,o:a=>{K[32](121,a)}},{i:514,o:a=>{K[32](122,a)}},{i:515,o:a=>{K[32](123,a)}},{i:867,
o:a=>{K[32](124,a)}},{i:868,o:a=>{K[32](125,a)}},{i:872,o:a=>{Q||!B.m||B.l||a||(Wf?(G(Wf),Wf=0,Xf()):(Wf=H("div",document.body,"\u23f8","position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center; pointer-events:none;font-size:44px;text-shadow:0px 0px 20px #000"),B.l||Q||(K[98](),Yf=1)))}}],Wf,$f=a=>" "==a?"SPACE":"ARROWUP"==a?"\u2191":"ARROWDOWN"==a?"\u2193":"ARROWRIGHT"==a?"\u2192":"ARROWLEFT"==a?"\u2190":a,bg=()=>{let a=nd("",1);yf||(f.bshrct||(f.bshrct='{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}'),
yf=JSON.parse(f.bshrct));var b=H("div",a);b.className="btrow";N("button",b,832).onclick=()=>{ag(h=>{yf=JSON.parse(h.target.result);P(a);bg()})};N("button",b,8).onclick=()=>{var h=new Blob([JSON.stringify(yf)],{type:"text"});cg(h,"control.tzcnt")};N("button",b,542).onclick=()=>{yf=JSON.parse('{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}');
P(a);bg()};a.children[0].addEventListener("click",()=>{f.bshrct=JSON.stringify(yf)});var c=H("div",a);c.id="keys0";b=H("div",a);b.id="keys";let d=yf.basic;var e=0;for(let h of Zf){h.id=e++;H("div",c,J(h.i).toLowerCase());let k=H("span",c,$f(d[h.id]));h.dc=k;k.onclick=()=>{let p=H("div",document.body,J(846),"z-index:4;position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),t=r=>{if(0>"123456789".split("").indexOf(r.key)){r=
r.key.toUpperCase();for(let u of Zf)d[u.id]==r&&(d[u.id]="",u.dc.textContent="");d[h.id]=r;k.textContent=$f(r)}G(p);document.removeEventListener("keyup",t)};document.addEventListener("keyup",t)}}for(let h=0,k=K[261]();h<k;h++){K[260](h);var g=dg.name;if(dg.Pa||!g||109==g||844==g||845==g)continue;c=document.createElement("div");e=H("div",c);eg(e);let p=fg[dg.type]||"";p&&=J(p)+" -> ";g=p+J(g);H("div",e,g);let t=H("span",c),r=yf[h];if(r)for(let v of r){let x=H("div",t);H("span",x,v);H("div",x,"\u00d7").onclick=
()=>{r.splice(r.indexOf(v),1);G(x)}}let u=H("div",t,"+","background:#00ff0021;font-size:21px;color:#00df00;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{let v=H("div",document.body,J(846),"z-index:4;position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),x=y=>{q(y);let z=y.key.toUpperCase();if((!r||0>r.indexOf(z))&&0>"Tab Shift Control Alt ContextMenu 1 2 3 4 5 6 7 8 9 0 Meta".split(" ").indexOf(y.key)){let w=document.createElement("div");
t.insertBefore(w,u);H("span",w,y.key);H("div",w,"\u00d7").onclick=()=>{r.splice(r.indexOf(y.key),1);G(w)};r||(r=[],yf[h]=r);r.put(z)}G(v);document.removeEventListener("keyup",x)};document.addEventListener("keyup",x)};gg(c,b,g)}},hg;
window.writeProps=function(a,b,c,d,e,g,h,k,p,t,r,u,v,x,y,z){let w=Hd;if(k){let W=H("span",w);H("span",W,J(67)+": ","color:rgb(255 116 121)");W.className="red";var A=yc(K[5](),k);let ia=0;for(let za=0;za<k;za+=4){var D=N("div",W);let Ma=H("span",D);N("span",D,A[za]);ia+=!A[za+3];Ma.className="icd1"+(A[za+3]?" invd":"");kg(Ma,48*A[za+1]);if(lg&&(D=mg[A[za+2]]))for(let Ga of D)Ga.classList.add("mrkd"),hg.push(Ga)}ia||(W.style.opacity=".4",W.style.background="#ffffff0f")}2!=t||r||N("span",w,834,"background:#ff000080;padding:4px");
(k=4!=u&&fg[vf]||"")&&(k="<span style='color:#b5953d'>"+J(k)+" -></span> ");g&&H("span",w,k+J(g),"color:var(--color1)");wf&&(g=I("div",w,"margin:6px 0px"),g.className="dataIcon",kg(g,-48*wf));if(6>u&&(g=I("div",w,"width:100%"),4>u)){g=I("div",g,"border:2px solid #141414;padding:6px;background:#00000033");if(0==u)H("span",g,ng(0,1)[z]+" -> "),H("span",g,2147483647==v?J(40):"+"+v,"color:#0f0");else if(1==u||2==u){N("div",g,765);z=2==u?"%":"";v=[{h:1,id:v},{h:3,id:x},{h:-1,id:y},{h:6,id:p}];for(var C of v)C.id&&
(v=I("div",g,"display:flex;gap:3px;align-items:center;margin-top:7px"),I("div",v,`background:url(nehhon/icons2.webp) 0px ${-20*C.h}px;width:20px;height:20px`),H("span",v,"+"+C.id+z,"color:#0f0"))}else 3==u&&(H("span",g,J(767)+" -> "),H("span",g,100-v+"%","color:#0f0"));if(tf.length){C=I("div",g);C.className="nxtsh";for(var L of tf)K[196](L),xf==X.race?(v=document.createElement("div"),C.prepend(v)):v=H("div",C),v.className="dataIcon",kg(v,X.C/2)}}if(sf.length){L=I("div",w,"width:100%");C=I("div",L,
"background:#004a0091");H("span",C,J(770)+":","color:rgb(116 255 128)");C.className="red";for(let W of sf)if(K[260](W,og),dg.sc&&(v=I("div",C),eg(v),N("span",v,dg.name),lg&&(v=mg[W])))for(let ia of v)ia.classList.add("mrkd1"),hg.push(ia);1==C.children.length&&S(L)}if(sf.length||5!=u)h=0;h&&N("span",w,h,"font-size:11px;max-width:232px");if(a||b||c||d||p)h="",a&&(h+=a+"<img src='nehhon/gold.gif' /> "),b&&(h+=b+"<img src='nehhon/wood.gif' /> "),c&&(h+=c+"<img src='nehhon/food.gif' /> "),d&&(h+=d+"<img src='nehhon/stone.gif' /> "),
p&&(h+=p+"<img src='nehhon/mana.webp' /> "),a=H("span",w,h,"display:flex;align-items:center;gap:4px;border-top:2px solid rgba(255, 215, 93, 0.18);padding-top:5px;width:100%"),uf&&(a=I("div",a,"display:flex;gap:3px;align-items:center"),I("div",a,"background:url(nehhon/icons2.webp) 0px -150px;width:15px;height:15px;background-size:100%"),H("span",a,uf+"s"));let O;if(a=yf[e]){K[272]();a:for(let W of a)for(a=0;3>a;a++)for(b=0;b<pg.length;b++)if(c=pg[b],(d=yf[c])&&d[a]==W)if(c==e){O=W;break a}else continue a}O&&
(H("span",N("span",w,841,"color:#858585;margin-top:8px;font-size:9px;align-self:end"),O).className="shotcut")};var qg;function ff(){if(!La){var a=this.Da;K[40](a);Hd.innerHTML&&(Hd.style.cssText="");qg=a}}function gf(){K[151](this.Da);S(Hd);qg=void 0;Hd.innerHTML=""}var rg;window.rockyterrwarn=()=>{rg||(rg=H("div",m("content"),"\u26a0\ufe0f "+J(914)),rg.className="mapalert2");rg.show()};window.delrockyterrwarn=()=>{rg&&S(rg)};function ef(){}function df(a){K[15](this.Da,a.button)}let sg;
window.qmenu=function(a,b,c,d,e,g,h,k,p,t,r,u){if(!Q)if(g=m("dataMenu"),void 0==a)g&&(P(g),clearInterval(sg),sg=0);else{let v;g?(v=g,v.innerHTML=""):(v=nd("",0,"font-size:15px"),v.id="dataMenu",sg&&clearInterval(sg),sg=setInterval(()=>K[238](1),1E3));N("div",v,574,"margin-bottom:16px;color:var(--color1)");g=["gold","wood","food","stone","pop"];a=[a,b,c+e,d,h];b=I("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");
for(c=0;5>c;c++)H("div",b,a[c],"min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+`background:url(${"nehhon/"+g[c]}.gif) no-repeat;`);N("div",v,575,"margin-top:32px;margin-bottom:16px;color:var(--color1)");b=I("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");a=[k,p,t,r];for(k=0;4>k;k++)H("div",b,tg(a[k]/40,2)+"/s","min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+
`background: url(${"nehhon/"+g[k]}.gif) no-repeat;`);N("div",v,650,"margin-top:36px;margin-bottom:16px;color:var(--color1)");k=xc();p=I("div",v,"display: grid;\n    grid-template-columns: repeat(6,auto);\n    justify-items: center;\n    align-items: center;\n        padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");H("div",p);H("div",p);for(t=0;4>t;t++)H("img",p).src=`${"nehhon/"+g[t]}.gif`;for(g=0;g<u;g+=7)for(t=
g%14?"color:#ffe9a5":"",I("div",p,`width:4px;background:${ha(k[g])};border-radius:1px;height:16px;`),H("div",p,qd(k[g+2],k[g+1]),"margin-left:3px;min-width:152px;justify-self:left;"+t),r=0;4>r;r++)H("div",p,ug(k[g+3+r]),"text-align:center;min-width:68px;padding:6px 4px;"+t)}};function N(a,b,c,d){return H(a,b,J(c),d)}function I(a,b,c,d){return H(a,b,"",c,d)}var lf;function vg(){location.hash="";history.replaceState(null,null," ")}
function wg(a){B.Sc||B.m||(Yd(Dc),xg(),this.parentNode&&(this.parentNode.style.display="none"),B.l=0,5!=a&&(location.hash="",setTimeout(vg,200)))}var yg=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1];
function zg(){if(!Ag&&!Ag){var a=nd("");a.id="waitList";a.parentNode.parentNode.style.background="#000";a.innerHTML="";N("span",a,68);zg.zb=H("span",a,"...","display: block; color: rgb(0, 255, 0); font-size: 12px; margin-top: 9px; font-variant: tabular-nums;");Ag=H("div",a);H("button",m("waitList"),J(91)).onclick=ye;Bg()}Gb(Ag);for(let b in R)R[b].rdy||H("div",Ag,qd(parseInt(b)))}window.waitingList=zg;let Ag;
var Bg=()=>{if(m("waitList")){var a=45-Math.floor((Date.now()-Cg)/1E3);0>a&&(a=0);zg.zb&&(zg.zb.textContent=Dg(J(891),a));setTimeout(Bg,1E3)}};
function jd(){if(Q||1!=f.nightcycle)c=new Float32Array([1,1,1,1]);else{var a=(.025*B.U/B.Xa*24+B.ab)%24,b=~~a;a-=b;Nd&&(Nd.style.backgroundPosition="0 -"+36*b+"px");var c=new Float32Array([yg[4*b],yg[4*b+1],yg[4*b+2],yg[4*b+3]]);b=(b+1)%24;c[0]+=(-c[0]+yg[4*b])*a;c[1]+=(-c[1]+yg[4*b+1])*a;c[2]+=(-c[2]+yg[4*b+2])*a;c[3]+=(-c[3]+yg[4*b+3])*a}b=c;U?Qf.queue.writeBuffer(Eg,0,b):(F.useProgram(Fg),F.uniform4fv(Gg,b),F.useProgram(V),F.uniform4fv(Hg,b))}var Pc=0,Qc=0,If=0,Bf=0,Df,Ff,Gf,Kf,Lf;
function Ig(a,b,c){var d=Rc;if(1==f.unlimitedZoom||Q)Pc=-a,Qc=-b;else{var e=U?1:Y,g=window.innerWidth,h=window.innerHeight,k=K[47](),p=La?0:d*l.N/32;a/=32;b/=32;var t=d*g/32;d=d*h/32;g=g/32*e;e*=h/32;h=a+.5*(g-t);var r=b+.5*(e-d);g<k&&e<k&&(h<-p?a=.5*-(g-t)-p:h+t>k&&(a=k-t-(g-t)/2),0>r?b=.5*-(e-d):r+d>k&&(b=k-d-(e-d)/2));Pc=32*-a;Qc=32*-b}if(!c)K[25](0,0,0)}
function mf(a){if("touchmove"==a.type||"touchstart"==a.type)if(a.target==m("bigMap"))a=a.targetTouches[0];else return;var b=a.target==m("bigMap")?23:0,c=K[47](),d=a.pageX-(kf.x+b)*T;a=a.pageY-(kf.y+b)*T;var e=kf.width-2*b;b=kf.height-2*b;var g=Jg.height*b/(32*c)*T;d-=Jg.width*e/(32*c)*T*.5;d=Math.round(.5+d*c/e)/T;a=Math.round(.5+(a-.5*g)*c/b)/T;Ig(32*d,32*a);0==lf&&document.removeEventListener("mousemove",mf)}var Uf=0,Tf=0,Nf,Kg={};
function Ye(a){if(a&&!Q&&!Uf){let c=!1;if(!m("enterwindow")){var b=nd(`
            <h2 id="sendMessageH2">${J(65)}</h2>
            <input id="msginputGame" />
           
            `,2,"",1);b.parentNode.parentNode.className+=" nobackdrop";b.id="enterwindow";c=!0;let d=H("button",b,"GIF");d.className="gif";d.onclick=()=>{S(m("enterwindow").parentNode.parentNode);Lg()};H("p",b,`${J(405)} <label class="container" style="margin-left:6px;display:inline"><input id="teamchat" type="checkbox"><span class="checkmark"></span></label>`,"text-align:right;color:#c79d45")}b=m("enterwindow").parentNode.parentNode;""!=b.style.cssText||c?(La&&m("msgButton")&&(m("msgButton").style.filter=
"drop-shadow(0px 0px 2px #fff)"),b.style.cssText="",m("msginputGame").focus(),m("msginputGame").maxLength=1024):(Mg(),S(b),La&&m("msgButton")&&(m("msgButton").style.cssText=""))}if(Uf)K[32](13,a)}var Cf=0,Af=0,Jf=0,Hf=0,Vf=0,Ef=0,Sf;document.oncontextmenu=function(a){return a&&"INPUT"==a.target.nodeName?!0:!1};
function Ng(){if(!Q&&!Ha){m("attackmenu")&&(lc("magicworkshopmenu"),lc("tradingmenu"),lc("attackmenu"),lc("defencemenu"),lc("levelmenu"),lc("progressone"),lc("manamenu"),lc("manamenu1"),lc("progressmana"),lc("plavatar"),me&&S(me),Ed.innerHTML="",zd.innerHTML="",Ad.innerHTML="",m("manamenu").innerHTML="",Bd.innerHTML="",Cd.innerHTML="",Fd.innerHTML="",Dd.value="",Fd.maxLength="");La&&(m("delunit").style.display="none");for(let a=0;a<Gd.length;Gd[a++].innerHTML="");Og()}}window.menuDefect=Ng;var Pg;
function Qg(a,b,c){Rg&&(a=H("div",H("div",Rg),a,"color:#"+b),Rg.scrollTop=Rg.scrollHeight,c&&(a.children[0].onclick=()=>{c&&E(60,Wb(c))}))}
window.lddsts=function(){m("msgs1").className="gameFinished";let a=H("button",document.body,J(908),"\n    position: fixed;\n    background: #000;\n    padding: 8px;\n    font-size: 20px;\n    width: 209px;\n    text-align: left;\n    border-left: 3px solid #00ff00 !important;\n    top: 66px;\n    right: 0px;\n    box-shadow: 0px 0px 20px #9c0000;"),b=Sg(1);a.onclick=function(){b.parentNode.parentNode.style.display=""}};
function tg(a,b,c){a=Math.round(a*10**b)/10**b;if(c)return a;a=a.toString().split(".");return a[0]+(a[1]&&"<strong>.</strong>"+a[1]||"")}function ug(a,b){return 1E6<=a?tg(a/1E6,1,b)+"M":1E5<=a?tg(a/1E3,0,b)+"k":1E3<=a?tg(a/1E3,1,b)+"k":a}function Tg(a,b){let c;a?c=a&&R[a]?R[a].avatar||113:113:b&&(c=b==K[112]()?f.avatar||113:K[185](b));c||=113;return Ug(c,a&&R[a]&&R[a].id)}var Ug=(a,b)=>255==a?"https://u.tza.red/avatar/"+b+".webp":`nehhon/Q${a}.webp`,Vg;
function Wg(){var a=m("stbutts").children;for(let b=0;b<a.length;b++)a[b].className=""}var Xg;function Yg(a){Wg();G(m("auxtab"));m("stats").style.display="table";a.className="a"}var Zg;function kg(a,b){a.style.backgroundPositionY=b+"px"}
function qf(a,b,c){a=H("div",a);let d=K[90]();a.id="bonustable";let e=xc();for(let k=0;k<d;k++){let p=K[199](k,b,!c);if(!p)continue;K[196](k);var g=H("div",a);g.dataset.title=J(X.name);$g(g,X.C);g=H("div",a);let t={};for(let r=0;r<p;r+=2){let u=e[r];var h=e[r+1];t[h]||(t[h]=H("div",H("div",g,"<div>x"+h/100+"</div>",!b&&100>h||b&&100<h?"color:red":"")));h=H("div",t[h]);K[196](u);h.dataset.title=J(X.name);$g(h,X.C)}}}
function pf(a){let b=K[198](),c=xc(),d=H("table",a);d.id="unittable";var e=[{name:""},{y:18},{y:1},{y:3},{y:6},{y:13},{y:12},{y:17},{y:10},{name:J(559)},{name:J(560)},{name:J(561)},{name:J(562)}];a=e.length;var g=H("tr",H("thead",d));for(let k=0;k<e.length;k++){let p=H("td",g,e[k].name);e[k].y&&kg(H("div",p),-20*e[k].y);p.onclick=()=>{var t=k,r=p,u,v=0;var x=!0;var y=1;for(z of r.parentNode.children)z.dataset.order&&(z.dataset.order="");for(q(y);x;){x=!1;var z=d.rows;for(u=1;u<z.length-1;u++){var w=
!1;var A=z[u].getElementsByTagName("TD")[t];var D=z[u+1].getElementsByTagName("TD")[t];if(0==y){if(A.Y>D.Y){w=!0;break}}else if(1==y&&A.Y<D.Y){w=!0;break}}w?(z[u].parentNode.insertBefore(z[u+1],z[u]),x=!0,v++):0==v&&1==y&&(y=0,x=!0)}r.dataset.order=y?"\u25b2":"\u25bc"}}e=H("tbody",d);for(g=0;g<b;g+=a){let k=H("tr",e);for(let p=0;p<a;p++){let t=H("td",k);var h=c[g+p];0==p?(K[196](h),h=J(X.name),t.dataset.title=h,$g(t,X.C),t.Y=h.charCodeAt(1)+256*h.charCodeAt(0)):(10==p&&(h/=10),t.Y=h,t.innerHTML=h)}}}
function ah(a,b,c){b=document.createElementNS("http://www.w3.org/2000/svg",b);for(let d in c)b.setAttribute(d,c[d]);a.appendChild(b);return b}
function bh(a,b,c,d,e){var g=ch;let h=b.length/c;var k=0;let p=1024/(h-1);var t=6*p,r=Math.ceil(70/t);for(var u=0;u<b.length;u++){var v=b[u];v>k&&(k=v)}u=1E3<k?100:10;u=(k=Math.ceil(k/u)*u)?633/k:0;v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.style.width="1204px";v.style.height="693px";v.setAttribute("viewBox","-90 -30 1204 693");v.setAttribute("width","100%");v.setAttribute("height","100%");a.appendChild(v);H("style",v,"\n.p>line{\n    stroke-width:2;\n    opacity:0.5;\n    pointer-events: none;\n}\n.p>line:hover{\n    opacity:0.5\n}\ncircle{\n    stroke-width:12;\n    stroke:#ffffff00;\n    r:1.5\n}\n.p>text{\n    display:none;\n    text-shadow:0px 0px 3px #000;\n    fill:#52ffba\n}\ntext{\n    stroke:none;\n    font-size:16px;\n}\n\ng:not(.op0) .p:hover > text{\n    display:block;\n}\n.op0{\n    opacity:.15;\n\n}\n.stk>.p>line{\n    stroke-width:3;\n    opacity:1\n}\n.stk>.p>circle{\n    r:1;\n    opacity:1\n}\n");
ah(v,"line",{stroke:"#fff",x1:0,x2:0,y1:0,y2:633,"stroke-width":1,opacity:.75});ah(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:633,y2:633,"stroke-width":1,opacity:.75});for(a=0;5>=a;a++){var x=633-126.6*a;a&&ah(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:x,y2:x,"stroke-width":1,opacity:.25});ah(v,"text",{x:-8,y:x,fill:"#fff","text-anchor":"end","alignment-baseline":"middle"}).innerHTML=ug(Math.round(a/5*k),1)}for(let w=1,A=Math.ceil(10*h/60);w<A;w++)k=w*t,a=0==w%r,ah(v,"line",{stroke:"#fff",x1:k,x2:k,y1:0,
y2:633,"stroke-width":1,opacity:a?.25:.1}),a&&(ah(v,"text",{x:k,y:655,fill:"#fff","text-anchor":"middle"}).innerHTML=w+":00");for(let w=0;w<c;w++)for(t=ah(v,"g"),r=g[w],t.onmouseover=()=>{ch[w].style.color="#0f0"},t.onmouseout=()=>{ch[w].style.color=""},r.lb=t,r.pa&&t.setAttribute("class","op0"),r=0;r<h&&r<e;r++){k=w*h+r;a=633-b[k]*u;x=r*p;let A=ah(t,"g");A.setAttribute("class","p");var y=d[w*Zg+Zg-1],z=y>>16&255;let D=y>>8&255;y&=255;z||=1;D||=1;y||=1;let C=(z+D+y)/3;90>C&&(z*=90/C,D*=90/C,y*=90/
C);255<z&&(z=255);255<D&&(D=255);255<y&&(y=255);z=`rgb(${z},${D},${y})`;ah(A,"text",{x,y:a-15,"text-anchor":"middle"}).innerHTML=Math.round(b[k]);ah(A,"circle",{cx:x,cy:a,fill:z,opacity:r%6?0:1});r<h-1&&r<e-1&&ah(A,"line",{x1:x,x2:x+p,y1:a,y2:633-b[k+1]*u,stroke:z})}}
function Sg(a,b){b||=NaN;Zg=b?50:61+(dh?2:0);let c=dh||b;const d=Zg,e=b&&b.F.length+1||K[28]();Vg=b.data||new uc(K[184](d),e*d);var g=b.data||nb(Vg),h=Ub("",1,"",a);P(m("stsp"));h.id="stsp";h.parentNode.style.cssText="vertical-align:top;padding-top:56px";a&&S(h.parentNode.parentNode);var k=b&&b.F[0].id||g[d-3];a=b&&b.F[0].id||g[d-5];var p=H("div",h);H("img",p,"","display:inline-block;vertical-align:middle;height:96px;margin-right:16px;box-shadow:0px 0px 78px red;border:1px solid #ff000070").src=b&&
Ug(b.F[0].Zb,b.F[0].id)||Tg(k,a);a=H("div",p,"","display:inline-block;vertical-align:middle;");a.id="MVPspan";H("span",a,"MVP","display:block;font-size:20px;color:#ffffffb3;");H("span",a,b?eh(b.F[0].sb,b.F[0].name,b.F[0].role?fh[b.F[0].role-1]:b.id):qd(k,g[d-2]),"font-size:30px;text-shadow:0px 0px 20px red").onclick=()=>{k&&E(60,Wb(k))};a=H("div",h);a.id="stbutts";b||(H("button",a,J(466)).onclick=function(){gh(this,8,1)});b||(H("button",a,J(467)).onclick=function(){gh(this,8,0,1)});b||(H("button",
a,J(465)).onclick=function(){gh(this,9,0,1)});H("br",a);p=H("button",a,J(468));p.className="a";p.onclick=function(){Yg(this);m("stats").className=c?"r":"nr"};H("button",a,J(470)).onclick=function(){Yg(this);m("stats").className=c?"ra":"a"};H("button",a,J(470)+" 2").onclick=function(){Yg(this);m("stats").className=c?"rb":"b"};b||(H("button",a,J(522)).onclick=function(){hh(this)},H("button",a,J(469)).onclick=function(){gh(this,7,0,0,1,!0)},H("button",a,J(521)).onclick=function(){gh(this,7,0,1,0,!0)},
H("button",a,J(452)).onclick=function(){gh(this,6,1,1)},H("button",a,J(453)).onclick=function(){gh(this,10,1,0)},H("button",a,J(464)).onclick=function(){gh(this,9,1)});a=H("table",h);a.id="stats";a.className=c?"r":"nr";var t=H("thead",a);p=H("tbody",a);var r=[{name:478},{name:21},{name:454},{name:455,Oa:1},{name:452,sub:[{name:58},{name:59}]},{name:453,Oa:1,sub:[{name:58},{name:59}]},{h:"icons2.webp",y:-10,ba:20,title:881},{h:"gold.gif",sub:[{h:"gold.gif"},{h:"trade.gif"}]},{h:"wood.gif",sub:[{h:"wood.gif"},
{h:"trade.gif"}]},{h:"food.gif",sub:[{h:"food.gif"},{h:"milk.gif"},{h:"food1.gif"},{h:"fish.gif"},{h:"trade.gif"}]},{h:"stone.gif",sub:[{h:"stone.gif"},{h:"trade.gif"}]},{h:"allicons.png",y:96,ba:48,title:477},{h:"allicons.png",y:95,ba:48,title:232},{h:"icons2.webp",y:-5,ba:20,title:471},{h:"icons2.webp",y:-6,ba:20,title:476},{h:"icons2.webp",y:4,ba:20,title:479},{name:464},{name:474},{name:475,Oa:1},{name:472},{h:"sgold.webp",title:473},{h:"swood.webp",title:473},{h:"sfood.webp",title:473},{h:"sstone.webp",
title:473},{h:"ngold.webp",title:882},{h:"nwood.webp",title:882},{h:"nfood.webp",title:882},{h:"nstone.webp",title:882},{h:"rgold.webp",title:883},{h:"rwood.webp",title:883},{h:"rfood.webp",title:883},{h:"rstone.webp",title:883}];c&&(r.unshift({name:732}),r.unshift({name:530}));var u={};a={};var v=H("tr",t);t=H("tr",t);H("th",v,"","background:none;border:none;min-width:0px;").rowSpan=2;H("th",v,"","background:none;border:none").rowSpan=2;H("th",v,"","background:none").rowSpan=2;for(var x=0;x<r.length;x++){var y=
r[x],z=y.name&&J(y.name).split(" ").join("\n")||y.y&&`<span style="background:url(nehhon/${y.h}) 0px ${y.y*y.ba}px;width:${y.w||y.ba}px;height:${y.ba}px"></span>`||`<img src="${"nehhon/"+y.h}">`;y.Oa&&(a[v.children.length]=1);z=H("th",v,z);2>x&&c&&(H("div",z,"?","position:absolute;right:0px;left:0px;font-size:9px").dataset.title=x?J(734):J(733));y.title&&(z.dataset.title=J(y.title));if(y.sub){let A=H("td",t,"<- ->");A.onclick=()=>{var D=A;const C=m("stats").children[0].children[0].children;let L=
C.length;const O=m("stats").children[1].getElementsByTagName("td");let W=D.fa?"":"none";D.innerHTML=D.fa&&"-> &nbsp; <-"||"<- ->";D.colSpan=D.fa?D.yb-1:1;let ia=D.uc;for(let za=0;za<D.yb;za++){za?C[ia+za].style.display=W:D.fa?S(C[ia+za]):C[ia+za].style.display="";for(let Ma=0;Ma<e-1;Ma++)za?O[Ma*L+ia+za].style.display=W:D.fa?S(O[Ma*L+ia+za]):O[Ma*L+ia+za].style.display=""}D.fa=!D.fa};A.uc=v.children.length-1;A.yb=y.sub.length+1;A.fa=1;A.Hc=z;for(z=0;z<y.sub.length;z++){var w=y.sub[z];u[v.children.length+
-3]=1;y.Oa&&(a[v.children.length]=1);H("th",v,w.name&&J(w.name)||`<img src="${"nehhon/"+w.h}">`,"display:none")}}else z.rowSpan=2}r=1+(c?2:0);for(let A=0;A<e-1;A++)for(t=H("tr",p),H("td",t,`<p>${A+1}</p>`),x=H("td",t,`<div style="background:${ha(b?b.F[A].color:g[A*d+d-1])}"></div>`+(b?eh(b.F[A].sb,b.F[A].name,b.F[A].role?fh[b.F[A].role-1]:b.F[A].id):qd(g[A*d+d-3],g[A*d+d-2]))),x.onclick=()=>{var D=b?b.F[A].id:g[A*d+d-3];D&&E(60,Wb(D))},x.className=g[b?A*d+d-1:A*d+d-14]?"winner":"loser",H("td",t,`<aside style="background-position-y:-${20*
(b?b.F[A].race:g[A*d+d-4])}px"></aside>`).className="stsrace",x=0;x<v.children.length+-3;x++)y=ug(g[x+A*d]),v.children[x- -3].dataset.title==J(881)&&(y=cd(g[x+A*d])),x!=r||y||(y="\ud83d\udec7"),z=H("td",t,y,u[x]&&"display:none"||""),x==r&&(z.style.color=g[x+A*d]==b.ob||!b&&K[256](g[x+A*d])?"#0f0":"#f00"),c&&!x&&(z.style.color="#0f0"),z.Lb=g[x+A*d],g[x+A*d]!=y&&x!=r&&(z.dataset.title=z.Lb);p=m("stats").children[0].children[0].children.length;u=e-1;v=m("stats").children[1].getElementsByTagName("td");
for(r=3+(c?1:0);r<p;r++){if(c&&6==r||!c&&4==r)continue;t=0;let A,D;x=Infinity;for(y=0;y<u;y++)z=v[y*p+r],w=z.Lb,w>t&&(t=w,A=z),w<x&&(x=w,D=z);y=a[r];t&&(A.style.background=y?"#ff000040":"#00ff0040");(x||t)&&A!=D&&(D.style.background=y?"#00ff0040":"#ff000040")}return h}var ch;
function hh(a){Wg();G(m("auxtab"));var b=H("div",m("stats").parentNode,"","width:1250px");b.id="auxtab";lc("stats");a.className="a";let c=nb(Vg),d=K[28]()-1;var e=[J(478),J(464),J(454),J(455),"Gold gathered","Wood gathered","Food gathered","Stone gathered","Population","Peasants",J(477),J(16),J(17),J(18),J(19)];a=H("div",b,"","white-space:break-spaces;margin-top:30px;text-align:left");let g=H("select",b,"","margin:auto;margin-top:15px;display:block;text-transform:uppercase");var h=H("span",b,"","float:right;margin-top:-25px;");
let k=c[0*Zg+Zg-13]/15,p=Math.floor(k/6),t=ih(h,k);t.oninput=function(){let v=parseInt(this.value);10*v/60>=p&&(v=k-1);this.H.innerHTML=dd(1E4*v)};h=60*p/10;t.max=h;t.min=6;t.step=6;t.value=h;t.oninput();h=0;for(var r of e)H("option",g,r).value=h,h++;for(r=0;r<d;r++)e=H("span",a,qd(c[r*Zg+Zg-3],c[r*Zg+Zg-2]),"cursor:url(nehhon/hand.gif),default;display:inline-block;background:#ffffff14;padding:2px 4px 2px 6px;margin-right:7px;margin-bottom:7px;border-left:4px solid "+ha(c[r*Zg+Zg-1])),e.onclick=jh,
e.onmouseenter=kh,e.onmouseout=lh;let u=H("div",b,"","text-align:center");ch=a.children;g.onchange=function(){let v=parseInt(this.value),x=parseInt(t.value)+1;t.value==t.max&&(x=k);let y=new Uint32Array(x*d);for(let z=0;z<d;z++){let w=nb(new uc(c[z*Zg+Zg-11],15*x));for(let A=0;A<x;A++)y[A+z*x]=w[15*A+v]}u.innerHTML="";bh(u,y,d,c,k)};g.onchange();t.addEventListener("change",()=>g.onchange());for(b=0;b<d;b++)if(3<c[b*Zg+Zg-12]&&c[b*Zg+Zg-5]!=K[112]())ch[b].onclick()}
function kh(){this.lb.setAttribute("class","stk")}function lh(){this.lb.setAttribute("class",this.pa?"op0":"")}function jh(a){this.pa=!this.pa;this.style.opacity=this.pa?"0.3":"";this.lb.setAttribute("class",this.pa?"op0":"");if(a)this.onmouseenter()}
function gh(a,b,c,d,e,g){let h=8!=b&&!g&&6!=b&&10!=b,k=K[90]();Xg||=1200;var p=nb(Vg);Wg();G(m("auxtab"));var t=H("table",m("stats").parentNode,"","width:"+Xg+"px"),r=H("tbody",t);r.className="tbl2";t.id="auxtab";t=m("stats").children[1].getElementsByTagName("tr");for(var u=0;u<t.length;u++){var v=H("tr",r);H("img",H("td",v)).src=Tg(p[u*Zg+Zg-3],p[u*Zg+Zg-5]);v.appendChild(t[u].children[1].cloneNode(1))}p=r.children;a.className="a";lc("stats");a=nb(Vg);for(r=0;r<p.length;r++){t=nb(new uc(a[r*Zg+Zg-
b],k));u=H("td",p[r]);v=0;var x=void 0;let w={};do{var y=-1;if(g)for(x=0;x<k;x++)t[x]&&(t[x]<t[y]||0>y)&&!w[x]&&(y=x);else for(x=0;x<k;x++)(t[x]>t[y]||0>y)&&!w[x]&&(y=x);x=t[y];let A=t[y];if(!A)break;w[y]=1;var z=K[191](y,c,d,e);if(z){let D=g?dd(A):ug(A);z=H("span",u,`<span>${D}</span>`,(0>z?"background:url(nehhon/iconunits.webp);":"")+`background-position-y:${z}px`);if(g){if(y=K[192](y))z.dataset.title=D+" -> "+dd(A+y)}else D!=A&&(z.dataset.title=A);h&&(v+=A)}}while(x);h&&H("td",p[r],"\u03a3 = "+
v,"color:var(--color1)")}}var mh,nh;window.popAlert=function(a){if(4==a){if(mh&&8E3>Date.now()-mh)return;mh=Date.now()}else{if(nh&&30>Date.now()-nh)return;nh=Date.now()}if(a=m(["gold","wood","food","stone","pop"][a]))a=a.getBoundingClientRect(),a=H("div",document.body,"",`left:${a.x+a.width/2}px;top:${a.y}px;`),a.className="alertpop",setTimeout(G,3E3,a)};
window.dmgAlert=function(a,b){var c=l.S,d=yd.getBoundingClientRect().top;1!=f.alertSound&&Gc("attack");La&&(Xe||(setTimeout(function(){m("minimapb").style.cssText=""},8E3),m("minimapb").style.cssText="animation:dmganimdrop .15s alternate infinite;"),oh=ph=c=qh(),d=(window.innerHeight-c)/2,c=(window.innerWidth-c)/2,"vibrate"in navigator&&window.navigator.vibrate([200,50,200,50,200]),q(c,d));const e=K[47]();a=H("div",document.body,"",`left:${~~(a*ph/e)+c}px;top:${~~(b*ph/e)+d}px`);a.className="alertdmg";
La&&!Xe&&S(a);setTimeout(G,16E3,a)};window.locationAlert=function(a,b,c,d,e){const g=K[47]();if(!(0>a||0>b||a>=g||b>=g||9<document.body.getElementsByClassName("alertloc").length||La)){Gc("chat%20location");var h=l.S,k=yd.getBoundingClientRect().top;rh(0,1,c,0,d,e);a=H("div",document.body,"",`left:${~~(a*ph/g)+h}px;top:${~~(b*ph/g)+k}px`);a.className="alertloc";setTimeout(G,1E4,a)}};window.goldalert=function(){let a=H("div",document.body);a.className="alertgold";setTimeout(G,1E3,a)};
document.onkeydown=function(a){return a.ctrlKey&&a.shiftKey?!1:!(-1<[116,115,123].indexOf(a.keyCode))};const sh=[9,112,113,114,115,116,117,118,119,120,121,123];function th(){for(var a=Object.keys(Kg),b=0;b<a.length;b++)Kg[a[b]]&&uh({keyCode:a[b],key:Kg[a[b]]})}var vh=(a,b)=>{if(a&&(a=yf.basic.indexOf(a.toUpperCase()),-1<a))return Zf[a].o(b),!0};
function wh(a){var b=a.keyCode,c=a.target==m("msginputGame");if(!(a.key&&xh&&yf.basic[8]!=a.key.toUpperCase()||"INPUT"==a.target.tagName||"TEXTAREA"==a.target.tagName||"true"==a.target.contentEditable)||c)if(c&&9==b&&(m("teamchat").checked=!m("teamchat").checked),(a.ctrlKey&&!c||a.altKey||0<=sh.indexOf(b))&&a.preventDefault(),!(!B.m||13!=b&&m("enterwindow")&&"displayblock"==m("enterwindow").className||c&&13!=b||(Kg[b]=a.key,vh(a.key,1)))){K[272]();a=a.key.toUpperCase();for(c=0;3>c;c++)for(let d=0;d<
pg.length;d++){let e=yf[pg[d]];if(e&&e[c]==a)return K[15](d,2147483647)}48<=b&&57>=b?K&&K[32](b,!0):65<=b&&90>=b&&81!=b&&K&&K[32](b,!0)}}let pg;window.shdwn=function(a,b){pg=a?wc(a,b):[]};function uh(a){yh.Db++;var b=a.keyCode;a.key&&xh&&yf.basic[8]!=a.key.toUpperCase()||!Kg[b]||(Kg[b]=0,(a.ctrlKey||a.altKey||0<=sh.indexOf(b))&&a.preventDefault(),vh(a.key,0)||(48<=b&&57>=b?K&&K[32](b,!1):65<=b&&90>=b&&81!=b&&K&&K[32](b,!1)))}window.addEventListener("blur",function(){if(K&&K[32])K[32](16,!1)});
var zh,Ah,Bh,Ch,Dh=!1;function Eh(a,b){Fh||(Pc=Bh-(zh-a)*Rc,Qc=Ch-(Ah-b)*Rc,Ig(-Pc,-Qc),Gh())}var Fh,Hh,Ih,Jh,Kh,Lh;function Mh(a,b){return 30>Math.sqrt((a-zh)**2+(b-Ah)**2)}
function Nh(a){if(a.target==Jg){Oh=Ph=Bf=If=0;var b=a.changedTouches[0],c=b.pageX;b=b.pageY;1==a.touches.length&&Jh&&300>Date.now()-Jh&&Mh(c,b)?(Qh(a.pageX,a.pageY),K[21](c,b,0),Kh=!0):(Jh=Date.now(),1<a.touches.length?clearTimeout(Lh):K[168]()||(clearTimeout(Lh),Lh=setTimeout(K[22],350,c,b,2,1,0,0,1),q(Lh)),Bh=Pc,Ch=Qc,zh=c,Ah=b,a.preventDefault())}}var Rh,Sh,Th,Ph,Oh;
function Uh(a){var b=a.touches[0].pageX,c=a.touches[0].pageY;if(a.target==Jg){var d=K[168]();Mh(b,c)||clearTimeout(Lh);if(Kh||d)return K[25](b,c,1);2==a.touches.length?(b=a.touches,c=Math.sqrt((b[0].pageX-b[1].pageX)**2+(b[0].pageY-b[1].pageY)**2),Hh?Mf(Ih*Hh/c,(b[0].pageX+b[1].pageX)/2,(b[0].pageY+b[1].pageY)/2,1):(Hh=c,Ih=Rc,Fh=!0)):(a=Date.now()-Th,Ph=-(Rh-b)/a,Oh=-(Sh-c)/a,Rh=b,Sh=c,Th=Date.now(),Eh(b,c))}}
function Vh(a){if(a.target==Jg){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY;clearTimeout(Lh);if(K[168]())K[25](b,c,1);var d=Mh(b,c)&&300>Date.now()-Jh;if(Kh||d||K[168]())Pg=!1,K[22](b,c,2*a.touches.length,Kh?1:2),Kh=!1;Hh=void 0;0==a.touches.length?Date.now()-Th&&(If=Ph||0,Bf=Oh||0,Lf=Pc,Gf=Qc,Ff=Kf=Date.now(),Df=1):(b=a.touches[0].pageX,a=a.touches[0].pageY,Bh=Pc,Ch=Qc,zh=b,Ah=a);Fh=!1}}
function Xh(a,b){if(!La){var c=window.innerWidth,d=window.innerHeight,e=a.pageX,g=a.pageY;if(a.target==Jg||b){if(Dh)return Eh(e,g);Yh(a.pageX,a.pageY);K[25](a.pageX,a.pageY,1)}if(screen.availHeight-10<=d&&1==f.scrollmouse&&!xh){if(1.2===Math.abs(If)||0===If)If||(Kf=Date.now(),Lf=Pc),Df=0,If=1.2*((10>e)-(e>c-10));if(1.2===Math.abs(Bf)||0===Bf)Bf||(Ff=Date.now(),Gf=Qc),Df=0,Bf=1.2*((10>g)-(g>d-10))}}}
var Qh=(a,b)=>{U&&(Zh=[a,b],a=$h(a,b),Pg=!0,ai[0]=a.x,ai[1]=a.y,ai[2]=a.x,ai[3]=a.y,Qf.queue.writeBuffer(bi,0,ai))},Yh=(a,b)=>{U&&Pg&&(Zh=[a,b],a=$h(a,b),ci[0]=a.x,ci[1]=a.y,Qf.queue.writeBuffer(bi,8,ci))},Zh,di;function ei(a){if(a.target!=Jg)return di=0;if(1==a.button&&a.pageX>l.N){Dh=!0;var b=a.pageX;a=a.pageY;Bh=Pc;Ch=Qc;zh=b;Ah=a}else Dh=!1,0==a.button&&Qh(a.pageX,a.pageY),K[21](a.pageX,a.pageY,a.button),di=1}var fi;
function gi(a){2<a.button&&a.preventDefault();yh.tb++;if(a.target==Jg||di)if(Dh)Dh=!1;else return Pg=!1,K[22](a.pageX,a.pageY,a.button,0,!1,a.shiftKey,a.ctrlKey,a.altKey)}
function hi(){window.addEventListener("keydown",wh);window.addEventListener("keyup",uh);window.addEventListener("mousemove",Xh);window.onblur=th;window.addEventListener("touchstart",Nh,{passive:!1});window.addEventListener("touchmove",Uh);window.addEventListener("touchend",Vh);window.addEventListener("wheel",ii,{passive:!1});window.addEventListener("mousedown",ei);window.addEventListener("mouseup",gi);document.va=()=>{document.hidden?fi=Date.now():yh.Ca+=Date.now()-fi}}
window.addEventListener("mouseup",function(a){2<a.button&&a.preventDefault()});var ji=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){ji||(ji=!0,ki())});window.fstordprop=(a,b,c,d,e,g,h,k)=>{dg={icon:a,name:b,wb:c,Pa:d,unit:e,type:g,Tb:h,sc:k}};var dg,eg=(a,b)=>{let c=H("div",a);c.className="dataOrder";kg(c,48*dg.icon);dg.unit&&!b&&(H("span",a,"->"),a=H("div",a),a.className="dataIcon",kg(a,48*dg.unit))};
function li(a,b,c){K[260](a);if(!dg.Pa){var d=H("div",b);b=H("button",d,"\u00d7");b.className="closeIcon";b.onclick=()=>{c.splice(c.indexOf(a),1);G(d)};eg(d);H("span",d,(dg.name&&J(dg.name)||"")+(dg.wb&&" - "+J(dg.wb)||""))}}
var fg=[842,843,689,847],mi=(a,b,c)=>{b=H("div",b);a=K[193](a);H("span",b,c,"font-size:23px;color:#"+("-"==c?"f00":"0f0"));c=H("div",b);kg(c,a);c.className="dataIcon"},ni=(a,b,c)=>{K[260](a);dg.Pa||((a=fg[dg.type]||"")&&(a=J(a)+" -> "),b=H("div",b,`<span style="font-size:23px">${c}</span> `+(dg.name&&a+J(dg.name)||""),`filter:hue-rotate(${"+"==c?90:-45}deg);margin:7px 0px`),eg(b,1))};
function oi(a,b){var c=pi();c=H("div",c);c.className="ordermod";let d=H("div",c),e=a.j[b];for(let g of e)li(g,d,e);a=H("button",c);a.className="sum";a.onclick=()=>{let g=pi();var h=H("div",g);h.className="ordermod ord2";h=H("div",h);for(let p=0,t=K[261]();p<t;p++){K[260](p);if(dg.Pa)continue;let r=document.createElement("div");var k=fg[dg.type]||"";k&&=J(k)+" -> ";k=dg.name&&k+J(dg.name)||"";gg(r,h,k||"zz");eg(r);H("span",r,k);r.onclick=()=>{e.push(p);li(p,d,e);P(g)}}}}
var qi=(a,b,c,d)=>{if(c!=b){K[196](a);a=H("div",d);d=H("div",a);d.className="dataIcon";kg(d,X.C);var e=d=255,g=255;b>c&&(d=255/(b/c),g=255/(b/c));b<c&&(e=255/(c/b),g=255/(c/b));0>d&&(d=0);0>e&&(e=0);0>g&&(g=0);a=H("div",a);H("span",a,c+"%","color:#fff");H("span",a,"->","color:var(--color1);margin:0px 6px");H("span",a,b+"%",`color:rgb(${d},${e},${g})`)}};
function ri(a,b,c,d){K[196](b);let e=H("div",a);a=H("button",e,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(si(c,b),2);G(e)};a=H("div",e);a.className="dataIcon";kg(a,X.C);N("div",e,X.name);a=H("div",e);let g=I("input",a,"width:58px");g.oninput=ti;g.max=2**32-1;g.min=0;g.type="number";g.value=d;g.onchange=()=>{c[si(c,b)+1]=De(g)};H("span",a," %")}
var pi=()=>{let a=nd("",2);a.parentNode.parentNode.style.top=window.scrollY/T+"px";return a},ui=()=>{let a=Ub("",2);a.parentNode.parentNode.style.top=window.scrollY/T+"px";return a};function vi(a,b){b=H("div",b);b.className="mddunit bonusedit";q(a);let c=H("div",b);for(var d of a)wi(c,d,a);d=H("button",b);d.className="sum";d.onclick=()=>Qe(e=>{wi(c,e,a);a.push(e)})}let xi=a=>{a=ng(0,0,a);let b=[];for(let c=0;c<a.length;c++)a[c]&&b.push({name:a[c],id:c});b.sort(oe);return b};
function yi(a){a=H("div",a);a.id="consts";let b=zi[3][0].data,c=xi();for(let d=0;d<c.length;d++){let e=c[d],g=b[e.id],h=H("input",a);h.value=g;h.type="number";h.onchange=()=>{b[e.id]=De(h)};H("div",a,e.name)}}function wi(a,b,c){K[196](b);let d=H("div",a);a=H("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(c.indexOf(b),1);G(d)};a=H("div",d);a.className="dataIcon";kg(a,X.C);N("div",d,X.name)}
function Ai(a,b){let c=a.j[b];a=pi();a=H("div",a);a.className="bonusedit";q(c);let d=H("div",a);for(b=0;b<c.length;b+=2)ri(d,c[b],c,c[b+1]);a=H("button",a);a.className="sum";a.onclick=()=>Qe(e=>{ri(d,e,c,100);c.push(e,100)})}
function Bi(a,b){q(a,b);b=pi();b=H("div",b);b.className="buildgrid";q(a);let c=a.data[16],d=a.data[17],e=a.j[18];q(c,d);b.style.gridTemplateColumns=`repeat(${c},auto)`;for(let g=0;g<c*d;g++){let h=e[g],k=I("div",b,"background:#"+(h?"ff0000c0":"00ff00c0"));k.onmousedown=()=>{h=!h;k.style.background="#"+(h?"ff0000c0":"00ff00c0");e[g]=h}}}
var ng=(a,b,c)=>[Dg(J(771),J(16)),Dg(J(771),J(17)),Dg(J(771),J(18)),Dg(J(771),J(19)),!c&&(!Q||a)&&(a&&" "||"")+J(42)+(b&&" (%)"||""),J(772)+" (%)",J(773),J(774),J(775),J(776),J(241)+" - "+J(561),J(377)+" - "+J(561),J(369)+" - "+J(561),J(364)+" - "+J(561),J(366)+" - "+J(561),J(370)+" - "+J(561),J(372)+" - "+J(561),J(367)+" - "+J(561),J(379)+" - "+J(561),J(378)+" - "+J(561),J(380)+" - "+J(561),J(777),J(778),J(779),void 0,J(363)+" - "+J(561),void 0,void 0,J(373)+" - "+J(561),J(780),void 0,J(368)+" - "+
J(561),J(375)+" - "+J(561),J(371)+" - "+J(561),J(374)+" - "+J(561),J(365)+" - "+J(561),void 0,void 0,a&&J(11)||void 0,J(377)+" - "+J(782),J(781),J(377)+" - "+J(383),J(377)+" - "+J(786),J(799),J(785),J(376)+" - "+J(383),J(364)+" - "+J(383),J(372)+" - "+J(383),J(366)+" - "+J(383),J(364)+" - "+J(782),J(364)+" - "+J(784),J(378)+" - "+J(784),J(787),J(378)+" - "+J(786),J(364)+" - "+J(786),J(366)+" - "+J(786),void 0,void 0,void 0,J(380)+" - "+J(786),J(372)+" - "+J(784),J(369)+" - "+J(383),J(370)+" - "+J(383),
J(801),J(802),void 0,J(788),J(363)+" - "+J(383),J(368)+" - "+J(383),J(371)+" - "+J(383),J(374)+" - "+J(383),J(375)+" - "+J(383),J(365)+" - "+J(782),J(365)+" - "+J(786),J(365)+" - "+J(383),J(380)+" - "+J(383),J(378)+" - "+J(383),J(379)+" - "+J(383),J(367)+" - "+J(383),J(800)+" - "+J(383),J(373)+" - "+J(383),J(800)+" - "+J(784),J(790),J(791),J(792),J(793),J(794),J(795),J(796),J(797),J(798),J(374)+" - "+J(782),J(416)+" - "+J(383),J(363)+" - "+J(784),J(363)+" - "+J(825),J(363)+" - "+J(782),J(363)+" - "+
J(786),J(826),J(827),J(828),J(829),J(830)],Di=(a,b,c)=>{c=H("div",c);H("span",c,"+"+a,"color:#fff");H("span",c,"->","color:var(--color1);margin:0px 6px");H("span",c,"+"+b,"color:"+Ci(a,b))},Ci=(a,b)=>{let c=255,d=255,e=255;b>a&&(c=255/(b/a),e=255/(b/a));b<a&&(d=255/(a/b),e=255/(a/b));0>c&&(c=0);0>d&&(d=0);0>e&&(e=0);return`rgb(${c},${d},${e})`};
function Ei(a,b){let c=a.data;var d=c[1];if(5==d)return oi(a,4);var e=a.j[b];b=pi();b=H("div",b);b.className="techcf";q(e);if(0==d){Fi(b,c[10],ng(),k=>{q(k);c[10]=k});H("span",b,"+");let h=H("input",b);h.value=c[12];h.type="number";h.onchange=()=>c[12]=De(h)}else{if(1==d||2==d){var g=H("div",b);e=H("div",g);g.className="unitProps";g=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let h of g){I("div",e,`background:url(nehhon/icons2.webp) 0px ${-20*h.h}px;width:20px;height:20px`);
g=H("div",e,"+");let k=H("input",g);k.value=c[h.id];k.type="number";k.onchange=()=>c[h.id]=De(k);2==d&&H("span",g," %")}}else if(3==d){d=I("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=I("input",d);h.value=c[12];h.type="number";h.onchange=()=>c[12]=De(h);H("span",d,"%")}else{if(4==d){K[196](c[12]);a=I("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=I("div",a,"margin-right:8px");h.className="dataIcon";kg(h,X.C);let k=N("div",a,X.name);
h.onclick=()=>Qe(p=>{K[196](p);c[12]=p;kg(h,X.C);k.textContent=J(X.name)});return}if(333==d)for(d=I("div",b,"display:flex;gap:10px;align-items:center"),e=0;4>e;e++){td(d,e);let h=2+e,k=I("input",d,"margin-right:8px");k.value=c[h];k.type="number";k.onchange=()=>c[h]=De(k)}}vi(a.j[8],b)}}
function Gi(a,b){let c=a.j[b];a=pi();N("button",a,622,"margin-right:5px;margin-bottom:5px;color:var(--color1);padding:5px").onclick=()=>{for(let k of d.children){let p=k.children[2].children[0];if(!p.checked)p.onclick()}};N("button",a,623,"color:var(--color1);padding:5px").onclick=()=>{for(let k of d.children){let p=k.children[2].children[0];if(p.checked)p.onclick()}};let d=H("div",a);d.className="tchgrid cnttkk";a=K[90]();q(c);for(b=0;3>b;b++)for(let k=0;k<a;k++){var e=K[194](k,!b,1==b,2==b);if(e){var g=
-1<c.indexOf(k);let p=document.createElement("div");var h=J(K[89](k));gg(p,d,b+h,g);H("div",p,h);h=H("div",p);kg(h,e);h.className="dataIcon";e=I("div",p,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");g=Me(e,t=>{t?c.push(k):c.splice(c.indexOf(k),1)},g);h.onclick=g.onclick}}}
function Hi(a,b){if(zi){var c=[60,55,23,155,0,0,0,0],d=[],e=2*c.length;for(var g of zi){d.push(e,g.length);for(var h of g){e+=h.data.length;for(var k in h.j)e+=h.j[k].length,h.data[k]=h.j[k].length}}d.push(0,0,0,0,0,0,0,0);e=a||b?new Uint32Array(e):wc(K[265](e),e);e.set(d);q(d);for(g=0;g<c.length;g++)if(zi[g]){h=zi[g];k=c[g];let p=d[2*g],t=p+k*h.length;for(let r of h){e.set(r.data,p);p+=k;for(let u in r.j)e.set(r.j[u],t),t+=r.j[u].length}}a&&(c=Ii(new Uint8Array(e.buffer),4*e.length),a=new Blob([new Uint32Array([e.length]),
c.slice(0)],{type:"application/octet-binary"}),cg(a,"tzared.tzmod"),q(c));b&&(b=Ii(new Uint8Array(e.buffer),4*e.length),a=new Uint8Array(b.byteLength+5),Kb(a,1,e.length),a.set(b,5),q(a),E(79,a));q(e)}}
var Ji=()=>[[{name:""},{y:18},{y:1},{y:3},{y:13},{y:17},{y:12},{y:16},{y:6},{y:10},{name:559},{name:824},{name:561},{name:562},{name:739,la:1,R:1},{name:740},{name:741,j:1,click:oi},{name:742},{name:743,select:[0,J(757),1,J(758),2,J(759)]},{name:744,select:[1,"1x1",2,"2x2",3,"3x3",4,"4x4"]},{R:1,name:745,select:[0,J(16),1,J(17),2,J(18),3,J(19),4,J(754),55,J(677)]},{R:1,name:746,select:[0,J(16),1,J(17),2,J(18),3,J(19),55,J(677)]},{name:747,R:1},{name:748},{name:749,select:[0,J(755),1,J(756),2,J(811)]},
{name:726},{name:750,j:1,click:Gi,la:1},{name:751},{name:752,select:[0,J(46),1,J(45)],R:1},{name:753},{name:738,j:1,click:Ai},{name:804},{name:821},{name:812,A:1},{name:818,A:1},{name:819,A:1},{name:820,A:1},{name:823,A:1},{s:264,G:1},{s:99,G:1},{s:25,G:1},{s:159,G:1},{s:219,G:1},{s:263,G:1},{s:78,G:1},{s:28,G:1},{s:217,A:1},{s:77,A:1},{s:76,A:1},{s:87,A:1},{s:23,A:1},{s:128,A:1},{s:32,A:1},{name:805,A:1}],[{name:""},{y:18},{y:13},{y:17},{y:12},{y:16},{y:10},{name:741,j:1,click:oi},{y:1},{name:559},
{name:824},{name:561},{name:739,la:1,R:1},{name:740},{name:742},{name:743,select:[0,J(757),1,J(758),2,J(759)]},{name:760,Ha:1,min:1},{name:761,Ha:1,min:1},{name:762,j:1,click:Bi},{name:745,select:[0,J(16),1,J(17),2,J(18),3,J(19),4,J(754),55,J(677)]},{name:746,select:[0,J(16),1,J(17),2,J(18),3,J(19),55,J(677)]},{name:747,R:1},{name:748},{name:749,select:[0,J(755),1,J(756),2,J(811)]},{name:726},{name:822},{name:750,j:1,click:Gi,la:1},{name:751},{name:752,select:[0,J(46),1,J(45)],R:1},{name:738,j:1,
click:Ai},{name:804},{name:821},{name:22,A:1},{name:812,A:1},{name:818,A:1,R:1},{name:823,A:1},{s:264,G:1},{s:99,G:1},{s:25,G:1},{s:159,G:1},{s:219,G:1},{s:263,G:1},{s:78,G:1},{s:28,G:1},{s:217,A:1},{s:77,A:1},{s:76,A:1},{name:805,A:1}],[{name:""},{name:620,click:Ei,select:[0,J(764),1,J(765),2,J(766),3,J(767),4,J(768),5,J(769)]},{y:13},{y:10},{name:770,j:1,click:oi},{y:17},{y:12},{y:16},{R:1,j:1},{name:805,A:1}]];window.shmdchngs=()=>{Je(1)};
function Je(a){let b=nd("",1);b.id="mdd";Ki();let c=Ji();var d=[{Ka:58,click:()=>{Li(0,h,c)}},{Ka:59,click:()=>{Li(1,h,c)}},{Ka:469,click:()=>{Li(2,h,c)}},{Ka:470,click:()=>{yi(h)}},{Ka:874,click:()=>{var k=zi,p=Mi,t=Ji();let r=H("div",h);r.id="modchanges";for(var u=0;3>u;u++){var v=p[u],x=k[u],y=t[u];for(let Ma=0;Ma<x.length;Ma++){var z=void 0;let Ga=x[Ma].data,Lb=v[Ma].data;for(let ja=0;ja<y.length;ja++)if(!(1==u&&21==ja||!u&&22==ja)){var w=Ga[ja],A=Lb[ja],D=x[Ma].data[0],C=y[ja];if(C.j){var L=
!1,O=v[Ma].j[ja],W=x[Ma].j[ja];if(16==ja||8==ja||26==ja||7==ja||4==ja||8==ja){for(let qa of W)0>O.indexOf(qa)&&(L=!0);for(let qa of O)0>W.indexOf(qa)&&(L=!0)}else if(30==ja||29==ja){for(var ia=0;ia<W.length;ia+=2)0>si(O,W[ia])&&(L=!0);for(ia=0;ia<O.length;ia+=2)0>si(W,O[ia])&&(L=!0)}if(!L)continue}else if(2==u&&1==ja){L=!1;O=[1,10,11,12,13,14,15];for(let qa of O)if(Lb[qa]!=Ga[qa]){L=!0;break}if(!L)continue}else if(w==A)continue;z||(z=r,L=u,O=document.createElement("div"),K[196](D),D=J(X.name),$g(I("div",
O,"background:#00000082"),X.C,0,0,X.mb),H("div",O,D,"color:var(--color1);border-color:#ffd75d40;background:#00000082"),gg(O,z,L+D),z=O);D=H("div",z);C.name?H("div",D,J(C.name)):C.y?kg(I("div",D,"background:url(nehhon/icons2.webp);width:20px;height:20px;filter:drop-shadow(0px 0px 3px #000)"),-20*C.y):C.s&&(D=H("div",D),D.className="dataOrder",kg(D,48*C.s));if(C.A)A=H("div",H("div",z)),A.className="check2",A.style.backgroundPositionY=w?"0":"";else if(C.j)if(A=I("div",z,"display:block"),w=H("div",A),
D=H("div",A),A=v[Ma].j[ja],C=x[Ma].j[ja],16==ja||7==ja||4==ja){for(let qa of C)0>A.indexOf(qa)&&ni(qa,w,"+");for(let qa of A)0>C.indexOf(qa)&&ni(qa,D,"-")}else if(26==ja||26==ja||8==ja){for(let qa of C)0>A.indexOf(qa)&&mi(qa,w,"+");for(let qa of A)0>C.indexOf(qa)&&mi(qa,w,"-")}else{if(30==ja||29==ja){w.style.flexDirection="column";for(D=0;D<C.length;D+=2)L=C[D],O=C[D+1],W=si(A,L),0<=W?qi(L,O,A[W+1],w):qi(L,O,100,w);for(D=0;D<A.length;D+=2)L=A[D],O=A[D+1],0>si(C,L)&&qi(L,100,O,w)}}else if(O=L=D=255,
C.select?(w=C.select.indexOf(w)+1,A=C.select[C.select.indexOf(A)+1],w=C.select[w]):(w>A&&(D=255/(w/A),O=255/(w/A)),w<A&&(L=255/(A/w),O=255/(A/w)),0>D&&(D=0),0>L&&(L=0),0>O&&(O=0)),C=C.G?"%":"",W=H("div",z),H("span",W,A+C),A!=w&&(H("span",W,"->","color:var(--color1)"),H("span",W,w+C,`color:rgb(${D},${L},${O})`)),2==u&&1==ja)if(C=I("div",W,"flex-direction:column;margin-left:10px"),w==A)if(w=Lb[ja],0==w)w=ng(),A=H("div",C),H("div",A,w[Ga[10]]),Lb[10]==Ga[10]?Di(Lb[12],Ga[12],A):H("div",A,"+"+Ga[12]);
else if(1==w||2==w){w=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];q(213123);for(let qa of w)Lb[qa.id]!=Ga[qa.id]&&(w=H("div",C),I("div",w,`background:url(nehhon/icons2.webp) 0px ${-20*qa.h}px;width:20px;height:20px`),Di(Lb[qa.id],Ga[qa.id],w))}else 3==w?(w=Lb[12],A=Ga[12],C=H("div",C),H("span",C,"x"+w+"%","color:#fff"),H("span",C,"->","color:var(--color1);margin:0px 6px"),H("span",C,"x"+A+"%","color:"+Ci(w,A))):4==w&&(w=H("div",C),K[196](Lb[12]),A=I("div",w),A.className="dataIcon",
kg(A,X.C),H("span",w,"->"),K[196](Ga[12]),w=I("div",w),w.className="dataIcon",kg(w,X.C));else if(w=Ga[ja],0==w)w=ng(),A=H("div",C),H("div",A,w[Ga[10]]),H("div",A,"+"+Ga[12]);else if(1==w||2==w){w=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let qa of w)Ga[qa.id]&&(w=H("div",C),I("div",w,`background:url(nehhon/icons2.webp) 0px ${-20*qa.h}px;width:20px;height:20px`),H("div",w,Ga[qa.id]))}else 3==w?H("div",C,"x"+Ga[12]+"%"):4==w&&(w=H("div",C),H("span",w,"->"),K[196](Ga[12]),w=
I("div",w),w.className="dataIcon",kg(w,X.C))}}}let za;k=k[3][0].data;p=p[3][0].data;t=xi(1);for(v=0;v<t.length;v++)x=t[v],p[x.id]!=k[x.id]&&4!=v&&38!=v&&(za||=H("div",r),H("div",za,x.name),u=p[x.id],x=k[x.id],y=H("div",za),H("span",y,u,"color:#fff"),H("span",y,"->","color:var(--color1);margin:0px 6px"),H("span",y,x,"color:"+Ci(u,x)))}}];let e=H("div",b),g=H("div",e),h=H("div",e);for(let k of d){let p=N("button",g,k.Ka);p.onclick=()=>{for(let t of g.children)t.style.background="";p.style.background=
"#ff00ff45";h.innerHTML="";k.click(h)}}if(a)for(d=0;5>d;d++)4!=d&&(g.children[d].style.display="none");H("button",g,J(879).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content;margin-left:auto").onclick=()=>{Hi(1)};a||(H("button",g,J(832).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{Ni(k=>{Oi(k.target.result);zi=void 0;P(b);Je()})},N("button",g,542,"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{confirm(J(713))&&(K[266](),zi=void 0,
P(b),Je(),B.l&&l.v&&!B.m&&(Pi=0,E(79)))});zi||(zi=[],Qi(0,60,257,c,zi),Qi(1,55,258,c,zi),Qi(2,23,263,c,zi),zi[3]=[{j:{},data:new Uint32Array(wc(K[264](),155))}]);g.children[a?4:0].onclick();Q&&S(g.children[3]);b.children[0].addEventListener("click",()=>{a||(Q?(Hi(),K[265](2147483647)):B.l&&l.v&&!B.m&&(Ri()||Pi)&&(Pi=1,Hi(0,1)))})}
var Pi,Ri=()=>{if(zi)for(let b=0;b<zi.length;b++){let c=zi[b],d=Mi[b];for(let e=0;e<c.length;e++){let g=c[e],h=d[e];for(var a=0;a<g.data.length;a++)if(g.data[a]!=h.data[a])return!0;for(let k in g.j)for(a=0;a<g.j[k].length;a++)if(g.j[k][a]!=h.j[k][a])return!0}}return!1},Mi,Ki=a=>{a&&(zi=void 0);Mi||(a=Ji(),Mi=[],Qi(0,60,257,a,Mi),Qi(1,55,258,a,Mi),Qi(2,23,263,a,Mi),Mi[3]=[{j:{},data:new Uint32Array(wc(K[264](),155))}])};window.gtorimod=Ki;var zi;
function Qi(a,b,c,d,e){d=d[a];e[a]=[];performance.now();c=K[c]();let g=wc(K[259]()),h=c;for(let k=0;k<c;k+=b){let p={data:g.slice(k,k+b),j:{}};e[a].put(p);for(let t=0;t<d.length;t++){let r=p.data[t];d[t].j&&!p.j[t]&&(p.j[t]=Array.from(g.slice(h,h+r)),h+=r)}}}
function Li(a,b,c){c=c[a];performance.now();var d=H("div",b);d.className="arrws";let e=H("button",d,"<","opacity:.5"),g=H("button",d,">");d=H("table",b);d.id="unittable";b=0;let h=H("thead",d);for(var k=0;k<c.length;k++)if(!c[k].R){b++;var p=H("td",h,J(c[k].name));c[k].y&&kg(H("div",p),-20*c[k].y);c[k].s&&(p=H("span",p),p.className="dataOrder",kg(p,35*c[k].s))}a=zi[a];let t=H("tbody",d);for(let x of a){a=document.createElement("tr");for(let y=0;y<c.length;y++){k=x.data[y];let z=c[y];if(z.R)continue;
d=H("td",a);if(0==y){K[196](k);k=J(X.name);d.dataset.title=k;$g(d,X.C,0,0,X.mb);a.Y=k;continue}d.Y=k;z.la&&(d=I("div",d,"display:flex;gap:4px;align-items:center;justify-content:center"));if(z.j){let A;z.la?(k=!k,Me(d,D=>{D?(Xd(A),x.data[y]=0,x.j[y].length=0):(A.style.visibility="",x.data[y]=x.j[y].length)},k),A=H("button",d,"\u25a4"),A.onclick=()=>z.click(x,y),k&&Xd(A)):(A=H("button",d,"\u25a4"),A.onclick=()=>z.click(x,y));continue}if(z.A){Me(d,A=>{x.data[y]=A},k);continue}let w=H(z.select?"select":
"input",d);z.G&&H("span",d," %");if(z.select){for(p=0;p<z.select.length;p+=2){let A=z.select[p];H("option",w,z.select[p+1]).value=A}w.value=k;z.click&&(H("button",d,"\u25a4","margin-left:5px").onclick=()=>z.click(x,y))}else z.la&&(p=k!=2**32-1,Me(d,A=>{A?(w.style.visibility="",w.value=0):Xd(w)},p,1),p||Xd(w)),w.value=k,w.type="number",w.min=z.min||0,w.max=2**32-1,w.oninput=ti;w.onchange=()=>{x.data[y]=De(w);if(c[y].Ha){let A=x.data[16]*x.data[17];x.data[18]=A;x.j[18].length=A}}}for(let y of t.children)if(y.Y>
a.Y){t.insertBefore(a,y);break}a.parentNode||t.appendChild(a)}let r=0,u=Math.ceil((b-1)/6),v=x=>{r+=x;0>r&&(r=0);r>=u&&(r=u-1);e.style.opacity=r?"":".5";g.style.opacity=r+1>=u?".5":"";for(x=1;x<h.children.length;x++){var y=h.children[x];x<=6*r||x>6*r+6?S(y):Yd(y)}for(let z of t.children)for(x=1;x<z.children.length;x++)y=z.children[x],x<=6*r||x>6*r+6?S(y):Yd(y)};v(0);g.onclick=()=>v(1);e.onclick=()=>v(-1)}
window.selectMulp=function(a,b,c,d,e,g,h,k,p,t){Si(b,c);Dd.style.display="block";m(Rd?"unitname":"kingdom").innerHTML=a+" "+J(58);p?(Bd.innerHTML=p,kg(Bd,-100),Qd("levelmenu")):lc("levelmenu");g?(zd.innerHTML=g,Qd("attackmenu")):lc("attackmenu");h?(Ad.innerHTML=h,Qd("defencemenu")):lc("defencemenu");k&&(m("manamenu").style.backgroundPosition="0px -240px",m("manamenu").innerHTML=k,Qd("manamenu"));t?(m("manamenu1").style.backgroundPosition="0px -80px",m("manamenu1").innerHTML=t,Qd("manamenu1")):lc("manamenu1");
Rd&&d&&(Cd.innerHTML=qd(e,K[29](d)),Cd.onclick=()=>{var r=R[e]&&R[e].id;r&&E(60,Wb(r))},m("plavatar").style.background=`url(${Tg(e,d)})`,Qd("plavatar"))};window.updateHealth=function(a){if(m("progressvalue")){var b=m("progressvalue").innerHTML.split("/");b.length&&(m("progressone").value-=a,m("progressvalue").innerHTML=b[0]-a+"/"+b[1])}};window.allybutton=(a,b)=>{a?(me.show(),me.style.opacity=b?".25":""):S(me)};
window.selectionOne0=function(a,b,c,d,e,g,h,k,p,t,r,u,v,x,y,z){me&&(me.P=z);lc("manamenu");lc("manamenu1");lc("progressmana");d=Ti||J(d);a&&b?(m("stock").className="",m("manamenu1").style.display="block",m("manamenu1").style.backgroundPosition="0px -80px",m("manamenu1").innerHTML=a):m("stock").className="blocked";1==e&&c&&b&&(a=Math.floor(25*(c-B.U)/1E3),0<=a&&(m("manamenu").style.display="block",m("manamenu").style.backgroundPosition="0px -200px",m("manamenu").innerHTML=a+"s"));Cd.style.display=
"block";Ed.textContent!=d&&(Ed.textContent=d);g||0==e&&!Rd?(zd.innerHTML=g,Qd("attackmenu")):lc("attackmenu");0==e&&!Rd||Rd&&h&&0===e||2==e&&h?(Ad.innerHTML=h,Qd("defencemenu")):lc("defencemenu");r&&226==t&&(kg(m("manamenu1"),-140),Qd("manamenu1"),m("manamenu1").innerHTML=r);p&&(m("manamenu").style.display="block",m("manamenu").innerHTML=k,27===t?(m("manamenu1").style.backgroundPosition="0px -280px",Qd("manamenu1"),m("manamenu1").innerHTML=k,m("manamenu").style.backgroundPosition="0px -240px",m("manamenu").innerHTML=
r):(m("progressmana").value=~~(100*k/p),Qd("progressmana"),m("manamenu").style.backgroundPosition="0px -120px"));y&&(d=m("manamenu1"),74==t&&(x=4),d.style.display="block",d.style.backgroundPosition=["0px -260px","0px -340px","0px -240px","0px -320px","0px -220px"][x]||"",d.innerHTML=y);Bd.innerHTML=u;Bd.style.display="block";1==e?kg(Bd,-180):kg(Bd,-100);0===u&&(2==e||1==e||0==e&&Rd)&&(Bd.style.display="none");Cd.innerHTML=qd(z,K[29](v));Cd.onclick=()=>{var w=R[z]&&R[z].id;w&&E(60,Wb(w))};v&&m("plavatar")&&
(m("plavatar").style.background=`url(${Tg(z,v)})`,Qd("plavatar"));Dd.style.display="block"};function Ui(a){return a.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,function(){return"*******"})}
window.shresmsg=function(a,b,c){let d=J(a?451:533);a&&(d+=" -> ");if(c||b)d=Dg(d,qd(c,b));b=H("li",m("msgs1"),d);for(c=0;4>c;c++)a&1<<c&&(td(b,c).style.cssText="margin-left:8px;margin-bottom:-1px");Vi()};window.cnsoSPmsg=function(a,b,c){a=J(a);if(c||b)a=Dg(a,qd(c,b));m("msgs1").innerHTML+="<li style='border: 30px solid #ff0;border-top: 0px;border-bottom: 0px;padding: 0px 11px;'>"+a+"</li>";Vi()};window.cnsoSP2msg=function(){H("li",m("msgs1")).textContent=ne;Vi()};
function fe(a){for(var b,c="",d=0;b=a[d++];)c+=String.fromCharCode(b);return c}function Si(a,b){0>a?(Dd.value=100,Dd.max=100,Fd.innerHTML=J(40)):(Dd.value=a,0>b?(Dd.max=100,Dd.value=1):Dd.max=b,Fd.innerHTML=~~a+"/"+b)}window.showHealthOne=Si;function Gh(){}new Float32Array(8);var Wi,Xi,Yi,Zi,$i,aj,Rc=window.devicePixelRatio,U,Qf,bj,Of,cj,dj,ej,fj,gj,hj,ij,bi,jj,kj,lj,Eg,mj,nj,oj;new Float32Array(12);var F,pj;function wc(a,b){return new Uint32Array(window.wasmMemory.buffer,a,b)}function qj(a,b){return new Float32Array(window.wasmMemory.buffer,a,b)}function yc(a,b){return new Int32Array(window.wasmMemory.buffer,a,b)}function rj(a,b){return new Int8Array(window.wasmMemory.buffer,a,b)}
function ge(a,b){return new Uint16Array(window.wasmMemory.buffer,a,b)}function sj(a,b){return new Uint8Array(window.wasmMemory.buffer,a,b)}function Og(){if(!Q){for(var a=Id.cc.length=0,b=Gd.length;a<b;a++){var c=Gd[a];c.className="blocked";c.style.background="none";c.innerHTML=""}Id.Sa.className="blocked";Id.Qa.className="blocked";Id.Qb.className="blocked";Id.$c=1}}window.cleanMenuIcons=Og;
window.buttonSetup=function(a,b,c,d,e,g,h,k,p,t,r,u){var v=Gd[a];v.Yc=r;v&&!u&&(v.style.cssText="background-position:0px "+48*b+"px;"+(e&&"background-image:url(nehhon/iconunits.webp)"||""),c&&(v.className=""),g&&(v.className="dis"),1==p&&(v.className="invd"),2==p&&(v.className="uinv"),!k&&0<d?(b="",1073741824<d&&(1073741824<d&&(b=d-1073741824+"x"),d=`<span><span>${b}</span>\u221e</span>`),tj(v,d)):k&&1073741824<d&&1!=h&&tj(v,"..."),h&&1<t&&h!=2**31-1&&H("p",v,h+J([837,838,839][h-1]||840)),1==h?v.className=
"crnt":1<h&&(v.className="crnt1"),void 0!=qg&&qg==a&&(Hd.innerHTML="",v.onmouseenter()))};var Hg,V,Fg,uj,Gg,vj,wj,xj,yj,zj,Aj,Bj,Cj,Dj,Ej,Fj,Gj,Hj,Ij,Jj,Kj,Lj,Mj;window.gameOver=function(){Uc();nd(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>F</h2><p>${J(386)} ${J(387)}</p>`,1).id="F"};
window.playerWon=function(){Uc();nd(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>${J(388)} ${J(389)}</h2>`,1).id="F"};function Nj(a,b){var c=4*$i,d=F.createBuffer();d.size=b;d.Qc=c;F.bindBuffer(F.ARRAY_BUFFER,d);F.enableVertexAttribArray(a);F.vertexAttribPointer(a,b,F.FLOAT,!1,0,0);F.bufferData(F.ARRAY_BUFFER,c*b,F.STATIC_DRAW);Oj?Pj.vertexAttribDivisorANGLE(a,1):F.vertexAttribDivisor(a,1);return d}
function Qj(a,b){var c=b+4E4;b*=4;c*=4;if(Oj)F.bindBuffer(F.ARRAY_BUFFER,a),F.bufferData(F.ARRAY_BUFFER,c*a.size,F.STATIC_DRAW),K[146]();else{var d=F.createBuffer();F.bindBuffer(F.COPY_READ_BUFFER,a);F.bindBuffer(F.ARRAY_BUFFER,d);F.bufferData(F.ARRAY_BUFFER,b*a.size,F.STATIC_DRAW);F.copyBufferSubData(F.COPY_READ_BUFFER,F.ARRAY_BUFFER,0,0,b*a.size);F.bindBuffer(F.COPY_READ_BUFFER,d);F.bindBuffer(F.ARRAY_BUFFER,a);F.bufferData(F.ARRAY_BUFFER,c*a.size,F.STATIC_DRAW);F.copyBufferSubData(F.COPY_READ_BUFFER,
F.ARRAY_BUFFER,0,0,b*a.size);F.bindBuffer(F.COPY_READ_BUFFER,null);F.deleteBuffer(d)}}
function Rf(){if(!Ha){var a=1==f.stdcolors;if(U)return K[277](a);a=sj(K[17](a),4*(K[28]()+16));F.activeTexture(F.TEXTURE4);var b=F.createTexture();F.bindTexture(F.TEXTURE_2D,b);if(Oj){for(var c=new Uint8Array(16384),d=0;d<c.length;d++)c[d]=a[d];F.texImage2D(F.TEXTURE_2D,0,F.RGBA,64,64,0,F.RGBA,F.UNSIGNED_BYTE,c)}else F.texImage2D(F.TEXTURE_2D,0,F.RGBA,a.length/4,1,0,F.RGBA,F.UNSIGNED_BYTE,a);Rj();F.bindTexture(F.TEXTURE_2D,null);F.bindTexture(F.TEXTURE_2D,b);F.uniform1i(F.getUniformLocation(V,"colorArray"),
4);F.activeTexture(F.TEXTURE2)}}window.setupColorGL=Rf;var Sj,Tj;window.scrSetup=function(a,b){Ig(Math.floor(a-(U?window.innerWidth:Jg.width)/2),Math.floor(b-(U?window.innerHeight:Jg.height)/2));Gh()};var Oj,sd,Uj;
async function Vj(a,b){sd=b;Rc=window.devicePixelRatio;var c=parseInt(f.fogRefresh),d=n[8],e=n[43];d&&(Wj=1E3*n[14]);if(!U&&!Ha){F.getError()===F.CONTEXT_LOST_WEBGL&&(F=Jg.getContext("webgl2",{antialias:!1,alpha:!1}));Oj&&3==c&&(c=2);Uj=3==c&&b;if(!Xj){Y=parseFloat(f.antialiasing2)||1;Yj=1<Y;var g=Math.round(25*parseInt(f.pixelDensity1/25))/100||window.devicePixelRatio;1>g&&(Y=1,Yj=!1);g&&!Yj&&(Jg.style.width="100%");Y*=g;V=F.createProgram();Fg=F.createProgram();g=Oj?1:2;var h=await Zj(g+"vrtxu.glsl");
Oj||(h=h.replaceAll("FOG",b),h=h.replaceAll("FUOG",!!Uj));h=h.replaceAll("GLSCALE",(Y*T).toFixed(4));var k=F.createShader(F.VERTEX_SHADER);F.shaderSource(k,h);F.compileShader(k);h=await Zj(g+"fragu.glsl");Oj?(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d)):(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d),h=h.replaceAll("FUOG",!!Uj));var p=F.createShader(F.FRAGMENT_SHADER);F.shaderSource(p,h);F.compileShader(p);F.attachShader(V,k);F.attachShader(V,
p);F.linkProgram(V);F.useProgram(V);h=Oj?await Zj("1vrtxt.glsl"):await Zj("2vrtxt.glsl");k=F.createShader(F.VERTEX_SHADER);F.shaderSource(k,h);F.compileShader(k);g=await Zj(g+"fragt.glsl");Oj||(g=g.replaceAll("FUOG",!!Uj));g=g.replaceAll("EXPLORED",e);g=g.replaceAll("FOG",b);g=g.replaceAll("BRMODE",d);d=F.createShader(F.FRAGMENT_SHADER);F.shaderSource(d,g);F.compileShader(d);F.attachShader(Fg,k);F.attachShader(Fg,d);F.linkProgram(Fg)}e=F.getAttribLocation(V,"a_position");g=F.getAttribLocation(V,"a_texCoord");
d=F.getAttribLocation(V,"a_step");k=F.getAttribLocation(V,"a_physic");h=F.getAttribLocation(V,"a_margins");F.useProgram(Fg);ak=F.getUniformLocation(Fg,"minimapMargin");Ej=F.getUniformLocation(Fg,"u_translation");Aj=F.getUniformLocation(Fg,"u_resolution");zj=F.getUniformLocation(Fg,"u_fps");yj=F.getUniformLocation(Fg,"now");Jj=F.getUniformLocation(Fg,"u_circle0");Kj=F.getUniformLocation(Fg,"u_circle1");Gg=F.getUniformLocation(Fg,"u_ambient");Fj=F.getUniformLocation(Fg,"zoom");Bj=F.getUniformLocation(Fg,
"miniMap");bk(Rc);F.uniform1i(Bj,0);F.uniform2fv(Ej,[0,0]);F.uniform1f(zj,-1);F.uniform1f(Fj,Y);F.uniform1f(F.getUniformLocation(Fg,"TSIZE"),Ac);F.uniform1f(F.getUniformLocation(Fg,"mx"),0);Oj?(F.uniform1f(F.getUniformLocation(Fg,"mapSize"),2**Math.ceil(Math.log2(K[47]()))),F.uniform1f(F.getUniformLocation(Fg,"mapSize2"),K[47]())):F.uniform1f(F.getUniformLocation(Fg,"mapSize"),K[47]());F.uniform1f(F.getUniformLocation(Fg,"scale"),1);ck=Q?[-l.S*Y,-l.J*Y]:[-l.S*Y,Re()?-(window.innerHeight-oh-l.J)*Y:
-l.J*Y];F.uniform2fv(ak,ck);p=F.getAttribLocation(Fg,"a_position");Gj=dk();ek(Gj);var t=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,t);F.bufferData(F.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),F.STATIC_DRAW);F.enableVertexAttribArray(p);F.vertexAttribPointer(p,2,F.FLOAT,!1,0,0);ek(null);F.useProgram(V);F.uniform2fv(fk,ck);F.bindBuffer(F.ARRAY_BUFFER,null);Hj=dk();ek(Hj);Ij=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,Ij);F.enableVertexAttribArray(d);Oj?(Pj=F.getExtension("ANGLE_instanced_arrays"),
F.vertexAttribPointer(d,1,F.FLOAT,!1,0,0),F.bufferData(F.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),F.STATIC_DRAW),Pj.vertexAttribDivisorANGLE(d,0)):(F.vertexAttribIPointer(d,1,F.UNSIGNED_BYTE,0,0),F.bufferData(F.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),F.STATIC_DRAW),F.vertexAttribDivisor(d,0));d=K[47]();$i=a&&a+4E4||Math.floor(d*d/2);Wi=Nj(g,4);Xi=Nj(e,3);Yi=Nj(k,4);Zi=Nj(h,4);ek(null);wj=F.getUniformLocation(V,"u_resolution");Hg=F.getUniformLocation(V,"u_ambient");Dj=F.getUniformLocation(V,
"u_translation");pj=F.getUniformLocation(V,"zoom");vj=F.getUniformLocation(V,"now");Mj=F.getUniformLocation(V,"u_circle0");Lj=F.getUniformLocation(V,"u_circle1");Cj=F.getUniformLocation(V,"miniMap");fk=F.getUniformLocation(V,"minimapMargin");b&&(xj=F.getUniformLocation(V,"miniMapSize"));F.uniform1f(F.getUniformLocation(V,"zMax"),96*K[47]());F.uniform1i(Cj,0);F.useProgram(V);a=qj(K[33](),1330);B.Xa||(B.Xa=2880);B.ab||(B.ab=12);b=0;for(e=yg.length;b<e;b++).55>yg[b]&&(yg[b]=.55);jd();F.uniform1f(F.getUniformLocation(V,
"mapSize"),K[47]());F.uniform1f(F.getUniformLocation(V,"mx"),-l.N*Y);F.uniform1f(pj,Y);F.uniform2fv(Dj,[0,0]);F.uniform1f(F.getUniformLocation(V,"TSIZE"),Ac);window.addEventListener("resize",gk,!1);gk();F.blendEquation(F.FUNC_ADD);F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA);F.disable(F.DITHER);F.disable(F.BLEND);performance.now();if(!Xj){Rf(1==f.stdcolors);F.activeTexture(F.TEXTURE0);e=F.createTexture();F.bindTexture(F.TEXTURE_2D,e);if(Oj){F.getExtension("OES_texture_float");g=new Float32Array(65536);
for(b=0;b<g.length;b++)g[4*b]=a[b];F.texImage2D(F.TEXTURE_2D,0,F.RGBA,128,128,0,F.RGBA,F.FLOAT,g)}else F.texImage2D(F.TEXTURE_2D,0,F.R16F,a.length,1,0,F.RED,F.FLOAT,a);Rj();F.bindTexture(F.TEXTURE_2D,null);F.bindTexture(F.TEXTURE_2D,e);F.uniform1i(F.getUniformLocation(V,"delay"),0);F.activeTexture(F.TEXTURE2)}hk=F.createTexture();F.bindTexture(F.TEXTURE_2D,hk);F.texImage2D(F.TEXTURE_2D,0,F.LUMINANCE_ALPHA,d,d,0,F.LUMINANCE_ALPHA,F.UNSIGNED_BYTE,null);ik();F.useProgram(Fg);F.uniform1i(F.getUniformLocation(Fg,
"fogMap"),2);F.useProgram(V);F.uniform1i(F.getUniformLocation(V,"fogMap"),2);Uj&&(F.activeTexture(F.TEXTURE3),uj=F.createTexture(),F.bindTexture(F.TEXTURE_2D,uj),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,new Uint8Array(4)),Rj(),jk=F.createFramebuffer(),F.bindFramebuffer(F.FRAMEBUFFER,jk),kk=F.createTexture(),F.bindTexture(F.TEXTURE_2D,kk),a=Sj,b=Tj,F.texImage2D(F.TEXTURE_2D,0,F.RGBA,a,b,0,F.RGBA,F.UNSIGNED_BYTE,null),Rj(),jk.width=a,jk.height=b,F.framebufferTexture2D(F.FRAMEBUFFER,
F.COLOR_ATTACHMENT0,F.TEXTURE_2D,kk,0),F.bindFramebuffer(F.FRAMEBUFFER,null),F.useProgram(Fg),F.uniform1i(F.getUniformLocation(Fg,"frmBUFFER"),3),F.useProgram(V),F.uniform1i(F.getUniformLocation(V,"frmBUFFER"),3));F.activeTexture(F.TEXTURE2);F.enable(F.DEPTH_TEST);F.depthFunc(F.LEQUAL);lk.now=0;lk.Ab=0;Xj=!0}K[13](Y,$i,c,1!=f.nodecals,1==f.selcolor,U)}window.setupGL=Vj;var hk;
window.chFFg=function(a,b,c,d){let e=!0,g=2*b;d=d-c+1;let h=d*g,k=b*b*2;k%4&&(k+=2);if(!U&&d>b/2||U&&b%2)e=!1;e&&2147483647!=c||(h=k,c=0);a=a?sj(a+c*g,h):new Uint8Array(k);U?Qf.queue.writeBuffer(mk,c*g,a):(F.activeTexture(F.TEXTURE2),F.bindTexture(F.TEXTURE_2D,hk),F.pixelStorei(F.UNPACK_ALIGNMENT,1),e?F.texSubImage2D(F.TEXTURE_2D,0,0,c,b,d,F.LUMINANCE_ALPHA,F.UNSIGNED_BYTE,a):F.texImage2D(F.TEXTURE_2D,0,F.LUMINANCE_ALPHA,b,b,0,F.LUMINANCE_ALPHA,F.UNSIGNED_BYTE,a),ik(),F.pixelStorei(F.UNPACK_ALIGNMENT,
4))};var kk,nk;window.shk=function(){nk=!0;U&&(Uj=sd=0)};
function ok(a){a&&(F.activeTexture(F.TEXTURE3),F.uniform1i(Cj,3),F.bindFramebuffer(F.FRAMEBUFFER,jk),F.viewport(0,0,Sj,Tj),F.bindTexture(F.TEXTURE_2D,uj),F.clearColor(0,0,0,0),nk&&F.clearColor(1,1,1,1),F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT),nk&&F.clearColor(0,0,0,0),F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.ONE,F.ONE),Oj?Pj.drawArraysInstancedANGLE(F.TRIANGLES,0,6,a):F.drawArraysInstanced(F.TRIANGLES,0,6,a),F.bindTexture(F.TEXTURE_2D,kk),F.bindFramebuffer(F.FRAMEBUFFER,null),
F.uniform1i(Cj,0),F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA))}
function pk(){if(qk){var a=qk,b=a.D,c=a.Cc,d=a.Dc,e=a.nc,g=a.oc,h=a.Ec,k=a.pc,p=Date.now()-b;150<p&&(p=150);var t=rk(),r=t.x;t=t.y;var u=Date.now()-Kf||0,v=Date.now()-Ff||0;150<u&&(u=150);150<v&&(v=150);r=Kf<b?r*p:r*u;t=Ff<b?t*p:t*v;Math.sign(r)!=Math.sign(sk)&&sk?r+=sk:sk=r;Math.sign(t)!=Math.sign(tk)&&tk?t+=tk:tk=t;150>p?(Rc=k+-(k-h)/150*p,a.Ib?(a=uk(c,d,k,e,g),c=uk(c,d,Rc,e,g),Pc=e-(a.x-c.x),Qc=g-(a.y-c.y)):(Pc=e+-(e-c)/150*p,Qc=g+-(g-d)/150*p)):(a.Ib?(a=uk(c,d,k,e,g),c=uk(c,d,h,e,g),Pc=e-(a.x-
c.x),Qc=g-(a.y-c.y)):(Pc=c,Qc=d),Ff=Kf=Date.now(),Lf=Pc+r,Gf=Qc+t,Rc=h,qk=void 0);Pc+=r;Qc+=t;Ig(-Pc,-Qc);U?(vk[0]=1/Rc,Qf.queue.writeBuffer(lj,0,vk)):F.getParameter(F.CURRENT_PROGRAM)==V&&F.uniform1f(pj,Y/Rc);K[19](Rc)}}var sk,tk;function rk(){var a=2.5*parseInt(f.scrollSpeed)/100;return{x:1680*If*Rc*a/(1E3*window.devicePixelRatio),y:1680*Bf*Rc*a/(1E3*window.devicePixelRatio)}}var wk=0,Wj,xk,Ak;
window.brconf=function(a,b,c,d,e,g,h,k,p){Wj=d;xk=k;Ak=p;U?Qf.queue.writeBuffer(dj,0,new Float32Array([a,b,c,d,e,g,h,k])):(F.useProgram(V),F.uniform4f(Mj,a,b,c,d),F.uniform4f(Lj,e,g,h,k),F.useProgram(Fg),F.uniform4f(Jj,a,b,c,d),F.uniform4f(Kj,e,g,h,k))};
var Bk=()=>{if(0!=If||0!=Bf||qk){var a=rk(),b=a.x;a=a.y;var c=Date.now()-Kf,d=Date.now()-Ff,e=!1,g=0,h=0;Df&&(h=Math.sqrt(b**2+a**2)/Df,c>h&&(d=c=h,e=1),g=b/h,h=a/h);qk?pk():(b&&(Pc=Lf+b*c-.5*g*c**2),a&&(Qc=Gf+a*d-.5*h*d**2),Ig(-Pc,-Qc),e&&(Bf=If=0))}};
function lk(a,b){B.D&&Ck++;B.rb||(performance.now(),Dk||requestAnimationFrame(lk),a=lk.now,lk.Ab++,1==f.hlffps&&lk.Ab%2||(a=Date.now(),a=hd&&!(200>a-id)||Yf?id-ed+fd:b||a-ed+fd,lk.now=a,Date.now(),Bk(),F.useProgram(V),Gh(),F.uniform1f(vj,a),F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT),b=K[14](),Uj&&ok(b),Ek(a),ek(Hj),Fk(b),Gk(b),Fe.update&&Fe(1),Dk&&(0<Yc&&clearInterval(Yc),Jg.toBlob(function(c){var d=Hk;c=URL.createObjectURL(c);d.href=c;d.download=`${Ik++}.png`;d.click();window.URL.revokeObjectURL(c);
setTimeout(function(){setTimeout(ad,9);lk(0,25*B.U+16)},20)})),Jk&&Jk.getVideoTracks()[0].requestFrame(),F.finish(),Kk()))}
var Kk=()=>{vd++;if(!Q&&100<=Date.now()-wk){wk=Date.now();K[171]();if(300<vd){var a=~~(1E3*vd/(performance.now()-ud)+.75);ud=performance.now();vd=0;yh.Za<a&&(yh.Za=a);yh.eb>a&&(yh.eb=a);1==Vf&&(tj(m("tpGPU"),a+"FPS"),Te.show())}200<Lk?(a=100*Mk/(25*Lk),1==Vf&&tj(m("tpCPU"),"CPU:"+a.toFixed(2)+"%"),yh.ua<a&&(yh.ua=a),yh.za>a&&(yh.za=a),Lk=Mk=0):1==Vf&&""==m("tpCPU").innerHTML&&tj(m("tpCPU"),"CPU:---%");if(3>Vf){a=B.now()/6E4;var b=K[166]();if(b){var c=a/b;if(1>=c){var d=Math.round(510*c);c=Math.round(510*
(1-c));255<d&&(d=255);255<c&&(c=255)}else d=255,c=0}1!=Vf&&(tj(m("tpCPU"),""),tj(m("tpGPU"),""),S(Te));tj(m("tpTM"),dd(B.now()));Nk&&(Nk.style.color=`rgb(${d},${c},0)`,a>b+5&&G(Nk));void 0!=Wj&&(d=25*K[48](),c=n[21],d=1E3*Math.floor(d/1E3),Wj>d?(b=J(506)+` (${Ak||0}/${c}) `+dd(Wj-d),a="#ff0"):(b=J(505)+` (${Ak}/${c}) `+dd(Wj+xk-d),a="red"),Ak==c&&d>Wj+xk&&(b=J(507),a="#f0f"),Ok&&(Ok.style.color=a,tj(Ok,b)))}}},Pk=0,Qk=0,Lk=0,Mk=0,Rk;window.cpperf0=function(){Rk=performance.now()};
window.cpperf1=function(){let a=performance.now()-Rk;Qk+=a;Mk+=a;Pk++;Lk++};window.perfw=function(a){a?console.time():console.timeEnd()};function Gk(a){a&&(F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA),Oj?Pj.drawArraysInstancedANGLE(F.TRIANGLES,0,6,a):F.drawArraysInstanced(F.TRIANGLES,0,6,a),F.disable(F.BLEND))}var Xe=!1,ck;
function Fk(a,b){if(1020>window.innerWidth)if(Xe)b=!0;else return;F.uniform2fv(Dj,[0,0]);F.uniform1f(pj,1);F.uniform1i(Cj,1);var c=l.S*T,d=Re()?-l.J:window.innerHeight-oh*T-l.J*T,e=ph*T,g=oh*T;b?(g=e=c=qh(),c=window.innerWidth/2-e/2,d=window.innerHeight/2-g/2,F.uniform2fv(fk,[-Y*c,-Y*d])):F.uniform2fv(fk,ck);F.uniform1f(xj,e*Y);F.viewport(c*Y,Y*d,e*Y,g*Y);Gk(a);F.uniform1i(Cj,2);Gk(1);F.uniform1i(Cj,0);F.uniform2fv(Dj,[Pc,Qc]);F.uniform1f(pj,Y/Rc);F.viewport(0,0,Sj,Tj);Xe&&!b&&Fk(a,1)}
function qh(){return La?Math.min(window.innerWidth,window.innerHeight)-55:Math.min(window.innerWidth-(Re()?0:250)*T,window.innerHeight-(Re()?250:0)*T)-128}var ak,fk;
function Ek(a,b){var c=Math.floor(a/100)%5;F.useProgram(Fg);F.uniform1f(Fj,Y/Rc);ek(Gj);F.uniform1f(zj,c);F.uniform1f(yj,a);Uf&&zf||F.drawArrays(F.TRIANGLES,0,6);var d=Re();c=l.S*T;var e=d?-l.J*T:window.innerHeight-oh*T-l.J*T,g=ph*T,h=oh*T;if(1020>window.innerWidth)if(Xe)b=!0;else{F.viewport(0,0,Sj,Tj);F.useProgram(V);return}if(b){h=g=d=qh();c=window.innerWidth/2-g/2;e=window.innerHeight/2-h/2;F.uniform2fv(ak,[-Y*c,-Y*e]);if(La)for(var k=document.getElementsByClassName("alertdmg"),p=0;p<k.length;p++)k[p].show();
Qd("bigMap");m("bigMap").style.width=d/T+"px";m("bigMap").style.height=d/T+"px"}else F.uniform2fv(ak,[ck[0]*T,d?-(window.innerHeight-oh*T-l.J*T)*Y:ck[1]*T]);Uf&&zf?(F.enable(F.SCISSOR_TEST),F.scissor(Y*c,Y*e,Y*g,Y*h),F.clearDepth(-.9),F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT),F.clearDepth(1),F.disable(F.SCISSOR_TEST)):(F.viewport(Y*c,Y*e,Y*g,Y*h),F.uniform1i(Bj,1),F.uniform2fv(Ej,[0,0]),F.uniform1f(Fj,Y*g/32/K[47]()),F.drawArrays(F.TRIANGLES,0,6),F.uniform1i(Bj,0),F.uniform2f(Aj,Sj,Tj),F.uniform2fv(Ej,
[Pc,Qc]),F.viewport(0,0,Sj,Tj));F.useProgram(V);Xe&&!b&&Ek(a,1)}var Xj=!1,Yj;function bk(a){Yj&&(1<a?(a=(a-1)/.5,1<a&&(a=1),a=.5*(1-a)):a=.5,Sk!=a&&(Sk=a,a=`calc(-${50*(Y-1)}% + ${a}px)`,Jg.style.transform=`scale(${1/Y}) translate(${a},${a})`))}var Sk;function uk(a,b,c,d,e){var g=Sj,h=Tj;return{x:a*c+-d+(g-c*g/Y)/2,y:b*c+-e+(h-c*h/Y)/2}}function $h(a,b){var c=Rc,d=window.innerWidth,e=window.innerHeight;return{x:a*c+-Pc+(d-c*d)/2,y:b*c+-Qc+(e-c*e)/2}}var qk;
function Mf(a,b,c,d){var e=K[47](),g=window.innerWidth,h=window.innerHeight,k=1!=f.unlimitedZoom&&!Q;if(!(a*(g-(!La&&l.N||0))/32>e||a*h/32>e)||!k){bk(a);.25>a&&k&&(a=.25);0>a&&(a=0);pk();if(!b||Xe||!La&&b<l.N||1!=f.zoomPointer)b=Math.floor(g/2),c=Math.floor(h/2);tk=sk=0;qk={Cc:b,Dc:c,nc:Pc,oc:Qc,D:Date.now(),Ec:a,pc:Rc,Ib:1};d&&(qk.D-=500,pk());Tk()}}
function ii(a){yh.Pb++;if(!xh&&(lf||a.target==Jg)&&(a.ctrlKey&&a.preventDefault(),a.clientX>l.gb||lf||!a.clientX)){var b=a.deltaY/550,c=1+parseFloat(f.zoomMult)/200+Math.abs(b);Mf((0<Math.sign(b)?c:1/c)*Rc,a.clientX,a.clientY)}}function Tk(){if(!U){var a=window.innerWidth+l.N,b=window.innerHeight,c=Rc*a,d=Rc*b;Uk(-Pc+(Y-Rc)*a*.5,-Qc+(Y-Rc)*b*.5,-999999999,0);Vk(c,d,0,0,0)}}var Wk,Xk;
Gh=function(){if(Pc!=Wk||Qc!=Xk){Wk=Pc;Xk=Qc;K[20](-Pc,-Qc);var a=[Pc,Qc];U?(Zh&&Yh(Zh[0],Zh[1]),Qf.queue.writeBuffer(jj,0,new Float32Array(a))):(F.useProgram(Fg),F.uniform2fv(Ej,a),F.useProgram(V),F.uniform2fv(Dj,a),Tk())}};function Rj(){F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.REPEAT);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.REPEAT)}
function ik(){F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE)}var Yk,Ac;
function Zk(a){F.activeTexture(F.TEXTURE6+a);if(!Yk[a]){a&&!Yk[a-1]&&Zk(a-1);F.useProgram(V);const c=Ac;var b=F.createTexture();Yk[a]=b;F.bindTexture(F.TEXTURE_2D,b);Rj();F.texImage2D(F.TEXTURE_2D,0,$k,c,c,0,$k,F.UNSIGNED_BYTE,null);F.uniform1i(F.getUniformLocation(V,`img_common[${a}]`),6+a);F.useProgram(Fg);F.uniform1i(F.getUniformLocation(Fg,`img_common[${a}]`),6+a)}return Yk[a]}var $k;
window.setup3Dtexture=function(a,b,c,d){if(!Ha){sj(c,a);performance.now();$k=F.RGBA;performance.now();var e=Ac;Yk||=[];a=sj(c,a);c=Math.floor(b/(e*e));b=b/e%e;var g=a.length/(4*e),h=0;do{var k=g-h;b+k>=e&&(k=e-b);F.bindTexture(F.TEXTURE_2D,Zk(c));var p=new Uint8Array(a.buffer,a.byteOffset+h*e*4,k*e*4);F.texSubImage2D(F.TEXTURE_2D,0,0,b,e,k,$k,F.UNSIGNED_BYTE,p);h+=k;b=0;c++}while(h<g);K[165](d)}};var mk,jk,Y=1;
function gk(){var a=Math.round(window.innerWidth*Y),b=Math.round(window.innerHeight*Y);Sj=a;Tj=b;Jg.width=U?Math.round(window.innerWidth*al):a;Jg.height=U?Math.round(window.innerHeight*al):b;var c=m("menbak1s")&&m("menbak1s").getBoundingClientRect();K[18](U?window.innerWidth:Jg.width,U?window.innerHeight:Jg.height,window.innerWidth,window.innerHeight,c.y,c.x);U?(Qf.queue.writeBuffer(kj,0,new Float32Array([window.innerWidth,window.innerHeight])),bl&&(bl.destroy(),bl=Qf.createTexture({size:[Sj,Tj],
format:"depth24plus",usage:cl.RENDER_ATTACHMENT}),dl.depthStencilAttachment.view=bl.createView(),el&&el())):(F.useProgram(Fg),F.uniform2f(Aj,a,b),F.useProgram(V),jk&&(jk.width=a,jk.height=b,F.bindTexture(F.TEXTURE_2D,kk),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,a,b,0,F.RGBA,F.UNSIGNED_BYTE,null),Rj()),F.uniform2f(wj,a,b));Ig(-Pc,-Qc,1);Ze()}window.animTimer=function(){};function ek(a){Oj?fl.bindVertexArrayOES(a):F.bindVertexArray(a)}var fl,Pj;
function dk(){return Oj?(fl||=F.getExtension("OES_vertex_array_object"),fl.createVertexArrayOES()):F.createVertexArray()}Array.prototype.put=function(a){this[this.length]=a};function gl(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}Array.prototype.add=function(a){0>this.indexOf(a)&&(this[this.length]=a)};function si(a,b){for(let c=0;c<a.length;c+=2)if(a[c]==b)return c;return-1}var B={},ai=new Float32Array(4),hl=new Float32Array(3),ci=new Float32Array(2),vk=new Float32Array(1),il=new Uint32Array(2);new Uint32Array(3);
window.bufferDate=function(a,b){Pf[0]=a;a=ej;1073741823<=b&&(b-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*b+28,Pf)};window.bufferIMG3=function(a,b,c){il[0]=a;il[1]=b;a=ej;1073741823<=c&&(c-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*c+24,il)};window.bufferRotation=(a,b)=>{vk[0]=a;a=ej;1073741823<=b&&(b-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*b+32,vk)};window.bufferPhysics3=function(a,b,c,d){hl[0]=a;hl[1]=b;hl[2]=c;a=ej;1073741823<=d&&(d-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*d+12,hl)};var jl;
window.bufferGL3=(a,b,c,d,e,g,h,k,p,t,r,u,v)=>{let x=new Float32Array(12),y=new Uint32Array(x.buffer);x[0]=a;x[1]=b;x[2]=c;x[3]=d;x[4]=e;x[5]=g;y[6]=h;y[7]=k;x[8]=p;y[9]=t;y[10]=r;y[11]=u;a=ej;1073741823<=v&&(v-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*v,y);v>kl&&(kl=v)};window.bufferInfo2=(a,b)=>{Pf[0]=a;a=ej;1073741823<=b&&(b-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*b+44,Pf)};window.bufferHide=a=>{vk[0]=-9;let b=ej;1073741823<=a&&(a-=1073741823,b=fj);Qf.queue.writeBuffer(b,48*a+8,vk)};
function Uk(a,b,c,d){hl[0]=a;hl[1]=b;hl[2]=c;U?(a=ej,1073741823<=d&&(d-=1073741823,a=fj),Qf.queue.writeBuffer(a,48*d,hl)):(F.bindBuffer(F.ARRAY_BUFFER,Xi),F.bufferSubData(F.ARRAY_BUFFER,12*d,hl))}window.bufferPos=Uk;window.bufferPhysics=function(a,b,c,d,e){U||(ai[0]=a,ai[1]=b,ai[2]=c,ai[3]=d,F.bindBuffer(F.ARRAY_BUFFER,Yi),F.bufferSubData(F.ARRAY_BUFFER,16*e,ai))};
window.bufferIMG=function(a,b,c,d,e){ai[0]=a;ai[1]=b;ai[2]=c;ai[3]=d;F.bindBuffer(F.ARRAY_BUFFER,Wi);F.bufferSubData(F.ARRAY_BUFFER,16*e,ai)};function Vk(a,b,c,d,e){U||(ai[0]=a,ai[1]=b,ai[2]=c,ai[3]=d,F.bindBuffer(F.ARRAY_BUFFER,Zi),F.bufferSubData(F.ARRAY_BUFFER,16*e,ai))}window.bufferMargin=Vk;window.bufferColor3=(a,b)=>{Pf[0]=a;a=ej;1073741823<=b&&(b-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*b+36,Pf)};
window.bufferK3=(a,b)=>{Pf[0]=a;a=ej;1073741823<=b&&(b-=1073741823,a=fj);Qf.queue.writeBuffer(a,48*b+40,Pf)};window.bufferColor=function(a,b){vk[0]=a;F.bindBuffer(F.ARRAY_BUFFER,Wi);F.bufferSubData(F.ARRAY_BUFFER,16*b+8,vk)};
window.sresizeBuffer=function(a,b){if(U){var c=b?fj:ej;a={size:48*(a+4E4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1};b?fj=Qf.createBuffer(a):ej=Qf.createBuffer(a);b=b?fj:ej;a=Qf.createCommandEncoder();a.copyBufferToBuffer(c,0,b,0,c.size);b=a.finish();Qf.queue.submit([b]);c.destroy();mj()}else Qj(Wi,a),Qj(Xi,a),Qj(Yi,a),Qj(Zi,a)};var dc=["European","Arab","Asian"];
function ll(a){return`<span class="raceIcon" style="background-position-y:-${20*a}px"></span>`}function Dg(a,b,c){if(a)return c&&(a=a.replace("%d",c)),a.replace("%s",b)};function ml(){for(let a=0,b=nl.length;a<b;a++){let c=nl[a];c&&(n[a]="checkbox"==c.type?c.checked?1:0:parseInt(c.value))}return n}var ol,Mb;B.Xa=2880;B.ab=12;function pl(){let a=nb(ob);for(let b=0;b<n.length;b++)a[b]=n[b];K[24](n.length)}
function ql(){m("mapconfiguration")&&""!==m("mapconfiguration").innerHTML&&!K[67]()&&(ml(),1024<n.length&&(n.length=1024),f.mapConfig4=`[${n.join()}]`);B.qb=Math.round(555555*Math.random()+1);n[46]=B.qb;n[0]=rl(n[0],n[16],n[29]);if(B.l){let a=new Uint8Array(4*n.length+1);n=new Uint32Array(n);a.set(new Uint8Array(n.buffer),1);E(76,a)}else pl();return B}window.SetupGameConfig=ql;var Dk,Hk,Ik,Jk;
async function tc(){Od&&(Od.innerHTML="");l.Eb||(l.Eb=1);B.l&&(sl(),B.Lc=0);K[47]()||ql();B.Ea=0;B.rb=0;tl=m("msgs1");B.l||(location.hash="");Qd("content");B.U?B.ac=25*B.U:(B.D=Date.now(),B.U=0,B.ac=0);B.Rc=Date.now();B.l||vg();B.now=Zc;B.paused=0;B.Ea=0;$c();performance.now();B.nb=25;var a=B.nb;0===l.nb&&(a+="&deg;C");m("temperature")&&(m("temperature").innerHTML=a);Rc=window.devicePixelRatio;K[19](Rc);await Vj(K[280](),Q?0:n[12]);K[101](~~(1E4*Math.random()));Fe(55);ul.check();Q&&(ce(),ee(),K[48]()&&
Ua("Editing savegames may be unstable"))}function P(a){a&&G(a.parentNode.parentNode)}var Cb;let vl=0;Cb=function(){vl++;1<vl&&E(32)};function ul(){Hb||G(wl);m("playersinfo")&&(m("playersinfo").innerHTML="");Ng();K[149](1==f.deathsounds);ca.Ya=performance.now()-ca.Ya;B.l?Cb():xl()}window.startGameStep0=ul;ul.check=function(){ul.load++;ul.load===ul.target&&ul()};ul.check=ul.check;ul.target=2;
function ki(a){ma?pa(1):a&&(a=document.documentElement,a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen())}var yl=document.getElementsByTagName("main")[0];ma||(window.onbeforeunload=function(){B.m&&zl();return"Are you sure to leave this page?"});window.onunload=()=>{B.m&&8E3<Date.now()-yh.time&&zl();E(57);Ab(57)};
var Ib,wl,qc,Al,T=1,Bl=()=>{let a=parseInt(f.UIscale);Al||=H("style",document.body);Al.innerHTML=`main>*,body>div{zoom:${a}%}`;T=a/100;B.m&&(K[119](l.N,Rd,T),gk(),U&&Qf.queue.writeBuffer(bj,0,new Float32Array([T])))};100!=f.UIscale&&Bl();
var Cg,Cl=()=>{if(!wl){wl=H("div",document.body);wl.id="loading";qc=H("div",wl);qc.innerHTML=J(53);H("div",wl,"TZA.RED");var a=H("div",wl);H("div",a).className="svgnehhon";H("div",a,"NETRAL ENGINE")}},Hl=()=>{if(!Dl.length)K[26](El+Fl);for(let a in R){a=parseInt(a);let b=R[a];void 0!=b.id&&Gl(K[56](b.team,b.race,parseInt(b.rgb.substr(1),16),a,256>a,b.id,0,b.flag,0,b.avatar,b.role,b.pos,b.rkpos),17,256>a?J(20):b.name)}},Il;
function Jl(a){if(Hb&&!Il)return Il=2;B.l&&!Hb&&Hl();Cg=Date.now();jl=new Float32Array(12);new Uint32Array(jl.buffer);yf||(f.bshrct||(f.bshrct='{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}'),
yf=JSON.parse(f.bshrct));P(m("loadingOnline"));Ib=!0;se();ic();if(!F&&!U)return Ua("Your browser doesn't support WEBGL");yl.appendChild(Jg);P(m("RandomMap")&&m("RandomMap").parentNode);P(m("CustomMap")&&m("CustomMap").parentNode);P(m("strscrn"));G(m("game"));G(m("bak"));G(m("index"));G(m("plinroom"));ca={Ya:performance.now()};ul.load=0;ol?9==Kl?Gc("pepe"):8==Kl?Gc("e_church1"):7==Kl&&Gc("pepe"):Gc("bless");(a||ma)&&"true"==f.fullscreen&&ki();Ha||(Q?(l.S=0,l.J=0,l.Hb=0,oh=ph=171,l.N=171,l.gb=171):
Rd?(oh=ph=l.N=151,l.gb=151,l.Hb=0,l.S=0,l.J=0):(l.N=151,oh=ph=128,l.gb=151,l.Hb=0,l.S=4,l.J=31),K[119](l.N,Rd,T),a=m("minimap"),a.style.width=ph+"px",a.style.height=oh+"px",a.style.left=l.S+"px",a.style.top=l.J+"px");Cl();oa(Q?"Map editor":B.id&&B.id||"Single player",Q?void 0:"Playing");if(Q){if(!K[67]()){n=ra;a=nb(ob);for(let b=0;b<n.length;b++)a[b]=n[b]}K[102](n.length)}else K[47]()||B.l||ql();E(25);B.l||(K[204](),Hi(),Pa());m("mapconfiguration")&&P(m("mapconfiguration"));U?Ll():zc()}
window.startGame=Jl;var Ml,Nl;window.reorderPlayerInfoRank=()=>{};
window.setupPlayerInfoRank=function(a,b,c,d,e,g,h,k,p){e=m("ranknfo");e||(e=H("div",m("content")),e.id="ranknfo");d=b;10<b&&(d=11.5);for(let t of e.children)if(t.P==k){if(10<b&&!p){t.style.top="100%";setTimeout(()=>G(t),3E3);return}t.children[0].textContent=b;t.children[2].textContent=a.toLocaleString("de-DE");t.$!=b&&(t.$=b,t.style.top=24*d+30+"px");return}10<b&&!p||(c=qd(h,c),h=H("div",e),h.P=k,h.$=b,h.style.top=24*d+30+"px",H("span",h,b),H("span",h,c,p?"":"color:#fff"),H("span",h,a.toLocaleString("de-DE")))};
window.updKstate=function(a,b,c){Ml&&Ml[a]&&(Ml[a].className=`${b&&"pldeath"||""}${c&&" pldisc"||""}`);c&&Nl&&Nl[a]&&(Nl[a].innerHTML="")};window.updKping=function(a,b){if(Vf)if(Nl&&Nl[a])Nl[a].innerHTML=2147483647!=b&&b+"ms"||"host";else K[158]()};window.rstPLI=function(){m("playersinfo").innerHTML="";Ml=[];Nl=[]};
window.setupPlayerInfo=function(a,b,c,d,e,g,h,k,p,t,r){if(!(50<a)){b=qd(p,b);p=m("playersinfo");var u=document.createElement("div");u.Ia=r;h&&!t&&Vf&&(Nl[a]=H("span",u,2147483647!=h&&h+"ms"||"host","font-size:8px;color:#00ffb8"));b=H("span",u,b,`border-color:${k&&"#f00"||"#0f0"}`);b.className=`${g&&"pldeath"||""}${t&&" pldisc"||""}`;Ml[a]=b;H("div",u,"",`background:rgb(${c},${d},${e})`);a=!0;for(let v of p.children)if(v.Ia<r){p.insertBefore(u,v);a=!1;break}a&&p.appendChild(u)}};
function de(a){for(var b=a.length,c=0;c<b;m(a[c++]).style.display="block");}var ph=128,oh=128;window.popInfo=function(a,b){Q||tj(m("pop"),a+"/"+b)};window.addEventListener("offline",function(){Xa("Offline","#ff0000")});window.addEventListener("online",function(){Xa("Online","#00ff00")});var gc=!1;function Ol(a){if(!a||!a.target||"BUTTON"!=a.target.tagName){if(this.Ob&&!f.sid)return mc(441,J(444)+" / "+J(861),Sb);B.l&&Pl();this.Va&&!this.style.filter&&Cl();a=this.Bb;gc=!0;hc(a);ic()}}
function Ql(){if(!wl){var a=nd(J(53));a.id="loadingOnline";N("button",a,3,"margin:auto;margin-top:19px;display:block").onclick=function(){location.hash="";location.reload()};setTimeout(()=>{a.show()},500)}}window.instplmap=(a,b,c,d,e,g,h,k)=>{b=fe(ge(b,20));h=fe(ge(h,5));R[a]&&R[a].name||(R[a]={name:b,id:d,clan:h,avatar:e,role:g,rgb:ha(k),flag:c});Hb&&G(wl)};window.iormfull=()=>{G(wl);Jb(J(95))};
var Rl=a=>{for(let b in R)if(R[b].pos==a)return parseInt(b)},Yl=(a,b,c,d,e,g,h)=>{let k=255>b||!b,p=b==l.I||l.v&&k,t=Dl.length&&Dl[a];t&&(c=t[2],g=t[1]);let r=I("div",Sl,l.v&&"cursor:grab");r.P=b;r.Fc=a;b&&(R[b].hml=r);if(l.v){let x,y,z,w;r.onmousedown=A=>{if(b&&A.target==r)if(2==A.button){if(l.v&&b!=l.I){Tl&&(G(Tl),Tl=void 0);var D=A.pageX;A=A.pageY;var C=H("div",m("game"));C.style.top=A+"px";C.style.left=D+"px";C.className="onlPlayer";Tl=C;N("button",C,100).onclick=function(){E(18,Ul(0,b))};k||
(H("button",C,"BAN").onclick=function(){E(18,Ul(1,b))});var L=()=>{G(C);Tl=void 0;document.removeEventListener("click",L)};document.addEventListener("click",L)}}else{w=z=0;x=A.clientX/T-z;y=A.clientY/T-w;r.style.cursor="grabbing";var O=ia=>{z=ia.clientX/T-x;w=ia.clientY/T-y;r.style.transform=`translate(${z}px, ${w}px)`},W=()=>{let ia=Math.round(w/33);ia&&0<=ia+a&&ia+a<El+Fl?E(75,Ul(a+ia,b)):r.style.transform="";document.removeEventListener("mousemove",O);document.removeEventListener("mouseup",W);
r.style.cursor="grab"};document.addEventListener("mousemove",O);document.addEventListener("mouseup",W)}}}let u=I("div",r),v=I("div",u,`background:${c}`);v.className="tblcolor";p&&(u.style.cursor="url(nehhon/hand.gif), default");p&&(u.onclick=x=>{let y=document.createElement("input");y.type="color";let z=()=>{v.style.background=y.value;b==l.I&&(f.color=y.value);let w=parseInt(y.value.substring(1),16),A=new Uint8Array(7);Vl(A,1,w);Vl(A,4,b);E(30,A)};y.onchange=z;y.onblur=z;y.style.cssText=`position:absolute;top:${x.clientY}px;left:${x.clientX}px;width:0px;height:0px;opacity:0;padding:0px;border:0px`;
document.body.appendChild(y);setTimeout(function(){y.click()},25)});!b&&t?H("div",r,"- - - -","color:#5a5a5a"):H("div",r,k?J(20):qd(b),k&&"color:#ff0"||b!=Wl&&"color:#fff").onclick=()=>{var x=R[b]&&R[b].id;x&&E(60,Wb(x))};c=H("div",r);k||(c=H("span",c),c.className="flag",c.style.backgroundPositionX=21*-d+"px");if(t)H("div",r,t[0]);else{let x=H("div",r),y=e;p&&(x=H("button",x),x.onmouseup=z=>{y=(y+(2===z.button?-1:1))%4;0>y&&(y=3);E(29,Ul(y,b));kg(x.children[0],20*-y)});d=H("span",x);d.className="raceIcon";
kg(d,20*-e)}if(ol)e=H("div",r),h=Me(e,x=>{p&&E(35,Xl(x?1:0))},h),h.className="check3",p||(h.style.pointerEvents="none");else{let x=g;l.v&&!Dl.length?H("button",r,g||"\ud83d\udec7").onmouseup=function(y){x=(x+(2===y.button?-1:1))%21;0>x&&(x=20);E(72,Ul(x,b));this.textContent=x||"\ud83d\udec7"}:H("div",r,g||"\ud83d\udec7")}};
function Zl(a,b){let c=b?1:2;b||$l();do{let e=am(a,c);c+=3;let g=am(a,c);c+=3;let h=am(a,c);c+=3;let k=a[c++],p=a[c++],t=a[c++],r=a[c++],u=a[c++],v=a[c++],x=bm(a,c);c+=2;let y=am(a,c);c+=3;var d=a[c++];let z=a[c++],w=cm(new Uint8Array(a.buffer,c,d));c+=d;d=cm(new Uint8Array(a.buffer,c,z));c+=z;R[e]={name:w,id:g,clan:d,avatar:k,role:p,team:t,race:u,rgb:ha(y),state:r,flag:v,pos:x};if(b||!Hb)Hb&&Gl(K[56](0,u,y,e,0,g,Hb,v,h,k,p),17,w),255<e&&!Hb&&(dm()&&b&&Gc("unitdone"),b&&Qg(Dg(J(531),"<span>"+qd(e)+
"</span>"),"4bff4b",g))}while(c<a.length);em()}window.stplname=(a,b)=>{R[b]&&Gl(a,17,R[b].name)};window.stplclan=(a,b)=>{R[b]&&Gl(a,5,R[b].clan)};
var fm={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},Rd,dh,gm,hm,im,Hb,jm;
window.dplreq=a=>{let b=H("div",m("content"));b.className="allyRequest";b.P=a;H("img",b).src=Tg(a);var c=H("div",b);H("span",c,Dg(J(917),qd(a)));c=H("div",c);N("button",c,675,"color:#0f0").onclick=()=>{K[289](a,1);G(b)};N("button",c,919,"color:red").onclick=()=>{K[289](a,0);G(b)}};
function Pl(){ol=0;gm=km=dh=l.v=0;oa("Main menu");Dl.length=0;lm=void 0;mm&&(G(mm),mm=void 0);m("mult").children&&m("mult").insertBefore(m("gameList"),m("mult").children[1]);m("gameList")&&m("gameList").show();m("mapconfiguration")&&P(m("mapconfiguration"));G(nm);Fa();B.id=void 0;B.l=0;l.V=void 0;M.close();wg();K[69]();zi=void 0;K[266]()}function Jb(a){Pl();a&&a.constructor==String&&Ua(a)}
function Se(){if(m("menubefore")&&m("menuafter")&&m("resourcesbefore")){var a=f.menuOpacity/100;m("menubefore").style.opacity=a;m("menuafter").style.opacity=a;m("resourcesbefore").style.opacity=a}}function ih(a,b){a=H("input",a);a.value=b;a.type="range";om(a);return a}function om(a){var b=H("span",a.parentNode);b.className="rangeval";a.H=b}var Yf,Xf=()=>{B.l||Q||(K[99](),Yf=0,bd())};
function $e(){if(B.m){Q||Wf||B.l||Q||(K[98](),Yf=1);xh=!0;if(!m("playingMenu")){var a=nd("");a.id="playingMenu";document.body.style.cursor="";var b=H("div",a);B.l&&sd||(N("button",b,73).onclick=xe);N("button",b,860).onclick=bg;!Rd&&!La||Q||(N("button",b,463).onclick=ld);n&&!Q&&(N("button",b,48).onclick=pm);let e=N("button",b,na?885:74);e.onclick=function(r){na?pa(0):ki(r);e.textContent=J(na?885:74)};N("button",b,75).onclick=ye;b=H("div",a);let g=I("div",a,"padding-bottom:37px;position:relative"),
h=H("div",g,J(461)+"...","cursor:url(nehhon/hand.gif),default;position:absolute;bottom:0px;right:7px;font-size:10px;color:#ffd75d8f");g.className="shw3";h.onclick=()=>{g.className="";G(h);g.style.cssText=""};var c=[{i:71,Fa:1,vc:n[34]/100,min:1,max:10,f:function(){this.H.innerHTML="x"+this.value;K[173](De(this))}},{i:76,Fa:1,u:"zoomMult",f:qm},{i:77,Fa:1,u:"scrollSpeed",f:qm},{i:446,u:"stdcolors",ea:Rf},{i:79,u:"nightcycle"},{i:886,u:"menud",ea:()=>{m("content").className="nw "+("1"==f.menud?"nwb":
"");U||(ck=[-l.S*Y,Re()?-(window.innerHeight-oh-l.J)*Y:-l.J*Y],F.uniform2fv(ak,ck));gk()}},{i:875,u:"selcolor",ea:()=>{K[273](1==f.selcolor)}},{i:82,u:"deathsounds"},{i:404,u:"unlimitedZoom"},{i:456,u:"scrollmouse"},{i:397,u:"zoomPointer"},{i:878,u:"hlffps"},{i:926,u:"alertSound"}];"true"!=f.theme&&(c.unshift({i:78,Fa:1,u:"menuOpacity",f:qm,ea:Se}),c[6]=void 0);for(let r of c)if(r){c=r.vc||f[r.u];var d=r.Fa?b:g;if(r.Fa){let u=ih(H("div",d),c);u.oninput=r.f;u.oninput(1);u.onchange=()=>{f[r.u]=u.value;
r.ea&&r.ea()};r.min&&(u.min=r.min,u.max=r.max)}else Me(d,u=>{f[r.u]=u?1:0;r.ea&&r.ea(u)},"true"==c||1==c);N("div",d,r.i)}b=I("div",a,"position:relative;padding-top:44px");c=H("div",a);let k=ih(H("div",c),f.soundRange);k.oninput=qm;k.oninput();k.addEventListener("input",()=>{Lc.gain.value=De(k)/100;f.soundRange=k.value});N("div",c,81);let p=ih(H("div",c),f.musicRange);p.oninput=qm;p.oninput();p.addEventListener("input",()=>{Tc.volume=De(p)/100;f.musicRange=p.value});N("div",c,80);N("span",b,833,"position:absolute;top:4px;left:19px;font-size:11px;color:#ffd75d8a");
d=[{i:"Original",u:0},{i:"Orchestral version by Pau Garriga",u:4,a:"https://www.youtube.com/watch?v=zNg7e1N7ZZo"},{i:"Sharp Rain version",u:1,a:"https://www.youtube.com/user/rainheart666787/featured"},{i:"Diemiurgo additional track",u:2,a:"https://soundcloud.com/diemiurgo/tzar-adp-final"},{i:"Remastered",u:3},{i:"Mute",u:"mute"}];c=f.favMusic;let t;for(let r of d){let u=Me(b,()=>{f.favMusic=r.u;t==u?(t.checked=1,kg(t,0)):(t&&(t.checked=0,t.style.backgroundPositionY=""),t=u,Vc())},r.u==c);r.u==c&&
(t=u);d=H("div",b,!r.a&&r.i||"");r.a&&(d=H("a",d,r.i),d.href=r.a,d.target="_blank")}Sf=H("button",a);Sf.className="closeIcon";Sf.onclick=()=>{S(a.parentNode.parentNode);Q||Wf||Xf();xh=!1;xg()}}m("playingMenu").parentNode.parentNode.style.display=""}}function ye(){location.hash="";location.reload()}function rm(){return parseInt(f.color.substr(1),16)}function sm(a){for(var b=wc(K[59](a.length),a.length),c=0;c<a.length;c++)b[c]=a[c]}
window.nlsndts=function(a,b,c){a=sj(a,4*b);b=new Uint8Array(2+a.length);b[1]=c;b.set(a,2);E(33,b)};
function ec(){var a=nd("",1);a.id="gameForm";let b=I("div",a,"padding:16px;background:#ffffff08;box-shadow: 0 0 20px #000;border:1px solid rgb(243 205 90/8%);display:grid;grid-template-columns:auto auto;gap:14px;text-align:right;font-size:12px;align-items:center");N("span",b,86);let c=H("input",b);c.spellcheck=!1;c.value=f.gameDescription||Dg(J(563),l.name);c.Uc=29;N("span",b,87);let d=I("input",b,"width:39px");d.type="number";d.min=2;d.max=150;d.value=8;N("span",b,85);let e=Me(b,()=>{},!1),g;f.sid&&
(N("span",b,440),g=Me(b,()=>{},!1));N("button",a,2,"margin-top:18px;font-size:14px;padding:8px;color:#0f0;text-transform:uppercase;width:100%").onclick=()=>{var h=c.value,k=d.value,p=e.checked,t=g&&g.checked;if(K){ic();xg();l.v=1;l.V={description:h.substr(0,30),max:parseInt(k),qc:p,tc:t};2>l.V.max&&(l.V.max=2);150<l.V.max&&(l.V.max=150);f.gameDescription=l.V.description;M.host=!0;t=l.V;tm();Pa();h=t.max;k=t.qc;p=t.tc;var r=l.name;t=Qa(t.description);r=Qa(r);var u=new ArrayBuffer(5+t.length+r.length);
u=new Uint8Array(u);u[1]=h;u[2]=k;u[3]=p;u[4]=t.length;u.set(t,5);u.set(r,5+t.length);h=um(0,u);vm?wm(h):(Ql(),M.B.send(h));B.l=1;l.Xb=!0}P(a)}}function xe(){zi&&Q&&Hi();K[176]()}var xm,ym=()=>{var a=xm;return sj(a[0],a[1])};window.svgwss=function(a,b,c,d){xm=[a>>>0,b];a=new Uint8Array(9);Kb(a,1,c);Kb(a,5,d);q(d);E(64,a)};
window.svggme2=function(){performance.now();var a=K[42](),b=xc();a=sj(a,b[0]);"true"==f.multithreading&&(a=a.slice());b=URL.createObjectURL(new Blob([a],{type:"application/octet-binary"}));a=document.createElement("a");a.style="display: none";a.href=b;b="savegame";Q&&(K[240](0),b=ne||"map");a.download=b+".tzared";a.click()};function cg(a,b){a=URL.createObjectURL(a);var c=document.createElement("a");c.style="display: none";c.href=a;c.download=b;c.click()}var zm,km;
function Am(){if(!km||B.m){if(Bm){for(let a of Bm.children)a&&(a.style.width="",a.style.opacity="");Bm.style.cssText=""}clearInterval(Am.bb);m("wtr")&&(m("wtr").textContent=hm?Cm(hm):J(526),Dm.dataset.title="")}else km--,9>=km&&1<=km&&Gc("crusade"),zm.innerHTML=km}window.hdpsnd=function(a,b,c){a=wc(a,b);(c=Em(c))&&(c.v||M.host)&&c.send(a)};var Nk,Ok,Bb,Ck=0;
function xl(){var a=new Uint8Array(16);let b=1;var c=b++;a[c]=parseInt(f.webgl)||0;c=b++;a[c]=Ja;c=b++;a[c]=parseInt(f.antialiasing2)||0;c=b++;a[c]=parseInt(f.fogRefresh)||0;c=b++;var d=K[67]();a[c]=d;c=b++;d=K[275]()?1:0;a[c]=d;c=b++;a[c]=n[12];Fm(a,b,parseInt(f.pixelDensity1)||100*window.devicePixelRatio);b+=2;Fm(a,b,B.l&&!Hb&&El||K[28]()-1);b+=2;Fm(a,b,Q?0:n[0]);Fm(a,b+2,Math.round(ca.Ya/1E3));E(70,a);Gm();setInterval(zl,48E4);Q||Ha||((a=K[166]())&&(Nk=H("span",m("topinfo"),`<span style='font-size:15px'>\u262e</span> ${a}:00`)),
n[8]&&(Ok=H("span",m("topinfo"),"","",1)));xg();m("alert")&&lc("alert");m("waitList")&&P(m("waitList"));G(m("plinroom"));B.m=1;B.D=Date.now();$c();Q||Xc();Ib=!1;K[41]();if(ub){ub=0;for(let e of vb)xb(e);vb.length=0}bd();hi();U||Ha||lk()}window.startMovement0=xl;
function Lg(){let a=H("div",document.body);a.className="gifsearch";let b=H("input",a);b.type="text";b.placeholder="\ud83d\udd0e\ufe0e";b.focus();let c=H("div",a),d=H("div",c),e=H("div",c),g=0,h=0,k=H("button",a);k.className="closeIcon";k.onclick=()=>G(a);let p=async t=>{var r=`https://g.tenor.com/v1/search?q=${b.value}&key=${"LIVDSRZULELA"}&limit=${20}`;g?r+="&pos="+20*g:g=0;r=await (await fetch(r)).json();if(t==h){t=1;for(let u of r.results)r=H("img",t?e:d),r.src=u.media[0].nanogif.url,r.onclick=
()=>{q(u);var v=u.media[0].gif.url;v&&1024>=v.length&&E(74,Qa(" "+v));G(a)},t^=1}};c.onscroll=function(){c.offsetHeight+c.scrollTop>=c.scrollHeight&&(g++,p(h))};b.oninput=()=>{Gb(e);Gb(d);g=0;h++;p(h)}}var te=document.getElementsByTagName("main")[0],xh=!1;function xg(){xh=!1;te.style.cssText=""}function Hm(){Pl()}function Im(a,b){a=parseInt(a);if(2>a||!a)a=2;150<a&&(a=150);a!==Jm&&(Jm=a,b||E(8,Xl(a)),Km&&(Km.textContent="x"+Jm+" "+J(880)));return a}window.updateMax=Im;var Kl,Lm,Mm;
function Nm(){if(ol)if(2!=Kl&&9!=Kl){var a=El,b=4==Om?4:5==Om?1:2,c=~~(a/b),d=1==b?J(717):c;a%=b;for(let e=0;e<b-1;e++)d+="v"+(c+(0<a?1:0)),a--;Mm.innerHTML=d}else Mm.innerHTML=J(717);else{b=new Uint32Array(64);for(c in R)c&&b[R[c].team%64]++;c="";d=!0;for(a=1;64>a;a++)1<b[a]&&(d=!1),b[a]&&(c&&(c+="v"),c+=b[a]);if(!d)for(a=0;a<b[0];a++)c+="v1";Mm.textContent=d?J(717):c}}var Pm,Sl,Jm,Rg,nm;
function $l(){var a=H("div",document.getElementsByTagName("main")[0]);a.id="game";nm=a;ol&&(H("h2",a,hm?Cm(hm):J(526)).id="wtr");var b=H("div",a);b.id="multtbls";Sl=H("div",b);var c=H("chat",b),d=H("div",c);d.id="onlineID";let e=H("img",d);e.src="nehhon/mute.webp";e.onclick=()=>{f.muteroom="1"==f.muteroom?0:1;e.style.opacity="1"==f.muteroom?"1.0":""};e.style.opacity="1"==f.muteroom?"1.0":"";let g=H("input",d);d=N("button",d,385);g.value="https://tza.red/#"+l.na;d.onclick=()=>{g.select();document.execCommand("Copy")};
b=H("section",b);l.v&&(Qm=N("button",b,90),Qm.onclick=()=>{E(73);El+Fl+1>=Jm&&(Km.textContent="x"+(Jm+1)+" "+J(880))},H("button",b,"+").onclick=()=>Im(Jm+1),H("button",b,"\u2212").onclick=()=>{El+Fl<Jm-(1==El)&&Im(Jm-1)},Km=H("span",b,"x"+Jm+" "+J(880)));Mm=I("header",c,"font-size:13px;margin-left:10px;color:#ad995f");b=H("section",c);b.className="chat";Rg=b;c=H("div",c);let h=H("input",c);h.placeholder="chat";h.onkeyup=function(t){13===t.keyCode&&((t=h.value)&&1024>=t.length&&E(74,Qa(" "+t)),h.value=
"")};h.maxLength=1024;c=H("button",c,"GIF");c.className="gif";c.onclick=Lg;c=H("div",a);c.id="gvw";let k=H("div",c,"\u25bc [- - -]"),p=m("gameList");c.appendChild(p);c.onclick=()=>{Pm?(k.innerHTML="\u25bc [- - -]",S(p)):(k.innerHTML="\u25b2 [- - -]",p.show());Pm=!Pm};S(p);H("div",a).id="showGameInfo";ol&&Rm();a=H("div",a);a.id="buttons";if(l.v){let t;H("button",a,J(92)+" \u25b6","color:#0f0").onclick=()=>{if(!t)if(t=1,1==El){B.id=void 0;B.l=0;l.V=void 0;M.close();wg(5);l.v=0;K[69](1);if(!K[67]())K[26](El+
Fl);ql();Hl();Jl()}else if(E(7),Dl.length){let r=new Uint8Array(lm.byteLength+1);r.set(new Uint8Array(lm),1);q(r);E(78,r)}};Sm=N("button",a,50);Sm.onclick=function(){S(Sm);Yd(Qm.parentNode);Yd(Tm);n=Um;lm=void 0;E(77);K[152]();Vm();ql()};S(Sm);Tm=N("button",a,48);Tm.onclick=Ie;Wm=H("button",a,J(93).split("|")[0]);Wm.onclick=Xm}Dm=N("button",a,13,"color:red");Dm.onclick=Hm}var Ym,Zm,$m=()=>"*Score = sum of the individual score of the last 16 games divided by 16<br>*Play at least one match in the last three weeks to be on this ranking";
function an(){qb?E(34,Xl(0)):M.B.addEventListener("open",()=>E(34,Xl(0)));let a=nd("",2);a.id="rank";a.style.maxWidth="630px";let b=I("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=["Deiv 1500","PRO LEAGUE 2025",J(890),"Wall of banneds"],d=[0,7,8];for(let e=0;e<c.length;e++){let g=H("button",b,c[e]);e||(g.style.color="#ffca26");g.onclick=()=>{if(!g.style.color){for(let h of b.children)h.style.color="";g.style.color="#ffca26";void 0==d[e]?E(53):E(34,Xl(d[e]));Zm.innerHTML=$m()}}}Ym=H("div",a);Zm=
H("span",Ym.parentNode,$m(),"font-size: 12px; color: rgb(211, 211, 211); height: 35px; display: block;")}var bn;
function fc(){qb?E(58,Xl(0)):M.B.addEventListener("open",()=>E(58,Xl(0)));let a=nd("",2);a.id="lastgames";let b=I("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=[J(556),J(899),1+(J(716)||"v")+1],d=0;for(let e of c){let g=d,h=H("button",b,e);h.onclick=()=>{if(!h.style.color){for(let k of b.children)k.style.color="";h.style.color="var(--color1)";E(58,Xl(g))}};d++}b.children[0].style.color="var(--color1)";bn=H("div",a)}function um(a,b){b?b[0]=a:b=new Uint8Array([a]);return b}
function E(a,b){b?b[0]=a:b=new Uint8Array([a]);qb&&1==M.B.readyState&&M.B.send(b)}function Ab(a,b){b?b[0]=a:b=new Uint8Array([a]);rb&&1==yb.readyState&&yb.send(b)}function Xl(a){let b=new Uint8Array(2);b[1]=a;return b}function Ul(a,b){let c=new Uint8Array(5);c[1]=a;Vl(c,2,b);return c}
let cn="AD AE AF AG AI AL AM AO AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CT CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EN ER ES ET EU FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NW NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SW SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS WW XK YE YT ZA ZM ZT ZW XX".split(" "),dn=
NaN;(async function(){if(!f.CCID){var a=(await (await fetch("https://tza.red/cdn-cgi/trace",{mode:"cors"})).text()).split("loc=")[1].substr(0,2);a=cn.indexOf(a);f.CCID=a}navigator.getBattery&&(dn=await navigator.getBattery())})();function Fm(a,b,c){a[b]=c&255;a[b+1]=c>>8&255}function Vl(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255}function Kb(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255;a[b+3]=c>>24&255}
var en=(a,b,c,d)=>{c=Qa(c?c.substring(0,d):"");255<c.length&&(c.length=255);a[b++]=c.length;a.set(c,b);return b+=c.length},fn=(a,b,c)=>{var d=ne;c=Qa(d?d.substring(0,c):"");65536<=c.length&&(c.length=65535);Fm(a,b,c.length);b+=2;a.set(c,b);return b+=c.length},Ue;function gn(a){let b=new Uint8Array(4);Vl(b,1,a);return b}function Vb(a){a=Qa(a);var b=new ArrayBuffer(1+a.length);b=new Uint8Array(b);b.set(a,1);return b}
function Nb(a,b){b=Qa(b);var c=new ArrayBuffer(4+b.length);c=new Uint8Array(c);Vl(c,1,a);c.set(b,4);return c}function cm(a){return(new TextDecoder).decode(a)}function hn(a,b){a=new Uint8Array(a.buffer,b||1);return cm(a)}function jn(a,b,c){a=new Uint8Array(a.buffer,b,c);return cm(a)}function bm(a,b){return a[b]+(a[b+1]<<8)}function am(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)}function kn(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)>>>0}function ln(a){return am(a,1)}
function mn(a){var b=f.name;a=Qa(a);b=Qa(b);let c=Qa("");var d=new ArrayBuffer(3+a.length+b.length+c.length);d=new Uint8Array(d);d[1]=a.length;d[2]=b.length;d.set(a,3);d.set(b,3+a.length);d.set(c,3+a.length+b.length);return d}function nn(a){let b=Qa(f.name),c=Qa("");var d=new ArrayBuffer(6+b.length+c.length);d=new Uint8Array(d);d[1]=0;d[2]=b.length;Vl(d,3,a);6<d.length&&(d.set(b,6),d.set(c,6+b.length));return d}function Wb(a){let b=new Uint8Array(5);Kb(b,1,a);return b}
function Qa(a){return(new TextEncoder).encode(a)}window.kllf5=function(a){setTimeout(K[203],8500,a)};Fb.prototype.close=function(a){for(var b=this.K.slice(0),c=0;c<b.length;c++)b[c].close(1),q(b[c].timeout),b[c].timeout&&clearTimeout(b[c].timeout);if(a&&M.B)return M.B.close();this.K.length=0;E(1);this.host=!1};function on(a){try{return JSON.parse(a)}catch(b){return q(b),!1}}window.NHretransmit=function(a,b,c){if(M.host){a=wc(a,b);b=M.K;for(var d=0;d<b.length;d++)b[d].id!=c&&b[d].send(a);pn()}};var Db;
function qn(){Db=1;E(57);Ab(57);for(var a=M,b=a.K.slice(0),c=0;c<b.length;c++){var d=b[c];d.closed=!0;d.X&&d.X.close()}q(a.B);a.B.close();$c();yb.close()}window.nhcleanclose=qn;
var wb=[async function(a,b){a=ln(b);b=hn(b,4);if(!Em(a)){var c=on(b);c&&(q(c),b=rn(a),b.setRemoteDescription(new RTCSessionDescription(c)),c=await b.createAnswer(),await b.setLocalDescription(c),q(c),E(4,Nb(a,JSON.stringify(c))))}},async function(a,b){a=ln(b);b=hn(b,4);if(a=sn(a))if(b=on(b))q(b),b=new RTCSessionDescription(b),await a.setRemoteDescription(b)},async function(a,b){a=ln(b);b=hn(b,4);if(a=sn(a))if(b=on(b)){q(b);try{await a.addIceCandidate(b)}catch(c){console.error("Error adding received ice candidate",
c)}}},async function(a,b){var c=ln(b);a=am(b,4);let d=11;Mb=am(b,7);Ue=b[10];K[66](a);l.I=a;if(c)Hb=im=hm=ol=dh=0,K[204](Ue),Wl=c,tn(c);else{dm()&&Gc("e_barrack1");Ue=0;ol=1;Wl=0;c=b[d++];q(c);jm=2==c;im=b[d++];Hb=b[d++];hm=kn(b,d);d+=4;dh=b[d++];Lm=b[d++];gm=b[d++];a=b[d++];var e=b[d++];Kl=a;m("multi21").className=9==Kl||7==Kl?"prs_br":"";K[204](0,1,dh,Kl,Hb);K[55](e+1);Hb&&(R={});if(im){!c&&Hb&&(ub=1,vb=[]);l.na="#"+jn(b,d,b.length-d);setTimeout(()=>location.hash="#"+l.na,200);return}n=Da[a].slice();
if(dh&&7==Kl){c=Lm/255*2E3+1E3;c=100*Math.floor(c/100);for(e=0;4>e;e++)n[1+e]=c;n[18]=10}a&&(n[46]=Mb+2E3*Lm,a=[0,0,0,0,2,4,4,4,6],n[6]=a[Lm%a.length])}l.na="#"+jn(b,d,b.length-d);un(1)},function(a,b){Ue=0;a=ln(b);Mb=am(b,4);b=hn(b,7);l.na="#"+b;un();vn.D||setTimeout(vn,5E3);K[204](Ue);K[66](a,1);Wl=l.I=a;ql()},function(a,b){wn(b)},function(a,b){a=ln(b);(a=Em(a))&&xn(a,1)},function(a,b){a=ln(b);if(Ue)q(a),0!=a||B.m?(a=Em(a))&&a.close():(Jb(J(95)),Gc("ressurect"));else if(0==a)Jb(J(95)),Gc("ressurect");
else{q("del",Wl,a);b=qd(a);if(!Dl.length&&!B.m){let d=R[a].pos;for(var c in R)R[c].pos>d&&R[c].pos--}c=R[a]&&R[a].id;R[a]=NaN;em();K[73](a);km=0;B.m||(Wl==a&&(Jb(J(95)),Gc("ressurect")),b&&255<a&&Qg(Dg(J(94),"<span>"+b+"</span>"),"ff4b4b",c))}},function(){if(!Ib){M.ga&&(clearTimeout(M.ga),M.ga=void 0);Sa("change host");K[155]();K[66](l.I,0);E(11);M.host=!1;M.Ja&&(clearTimeout(M.Ja),M.Ja=void 0);for(var a=0;a<M.K.length;a++)M.K[a].closed=!0,M.K[a].close(1);M.K.length=0;yn=void 0}},async function(a,
b){a=ln(b);b=b[4];q("UPDATE",a,b);if(!Ib){if(a==l.I)q("HOST"),M.Ra=1,M.ga=setTimeout(zn,1E4),M.Cb=parseInt(b),K[66](l.I,1);else{K[66](l.I,0,1);M.host=!1;b=rn(a,!0);const c=await b.createOffer();await b.setLocalDescription(c);E(6,Nb(a,JSON.stringify(c)))}K[154](a)}},function(a,b){a=ln(b);b=hn(b,4);q(b);f.sid=a;f.nm=b.substr(0,24);b=b.substr(24);f.name=b;m("accb").innerHTML=J(445);l.name=b;Gl(K[53](rm()),17,b);P(m("login"))},function(a,b){R={};Jm=b[1];Zl(b)},function(){f.sid="";f.nm=""},function(a,
b){b=b[1];q(b);"string"==typeof b?(Ua("",`Name changed to ${b}`),f.name=b):Ua(Dg(J(544),b))},function(){},function(a,b){b=b[1];q(b);vm=b},function(a,b){b=b[1]-1;a=[96,69,441,519,806,807,900,901][b];xg();P(m("loadingOnline"));wg();Ub(J(a),1)},function(a,b){a=b[1];if(b=An(am(b,2)))a?(b.onclick=void 0,a=b.children[0].children[0],a.className="redCircle",a.style.cssText="",b.className="",b.D=Math.floor(Date.now()/1E3),b.rc&&b.Ob&&(b.style.filter="hue-rotate(311deg)"),b.style.height="0px",b.style.opacity=
"0",b.style.border="none",b.children[3].children[2].innerHTML=b.children[3].children[0].innerHTML,b.children[1].children[0]&&S(b.children[1].children[0]),setTimeout(Bn,1E3,b),b.aa*=-1):b.offsetParent?(b.style.height="0px",b.style.opacity="0",setTimeout(G,1E3,b)):G(b)},function(a,b){a=b[1];if(b=An(am(b,2))){if(b.onclick&&b.xc){var c;6>a?c=6:c=a+(2-a%2);b.children[3].children[2].innerHTML=c}c=b.children[3].children[0];c.offsetParent&&(c.style.color=parseInt(c.innerHTML)<a?"#0f0":"red",setTimeout(Cn,
250,c));c.innerHTML=a}},function(a,b){a=b[1];if(b=An(am(b,2)))b=b.children[3].children[2],b.offsetParent&&(b.style.color=parseInt(b.innerHTML)<a?"#0f0":"red",setTimeout(Cn,250,b)),b.innerHTML=a},function(a,b){a=hn(b);Ua("",`Name changed to ${a}`);f.name=a},function(a,b){a=ln(b);let c=am(b,4),d=b[7],e=b[8],g=jn(b,9,d);b=jn(b,9+d,e);q(c,b,g);mm||=H("div",m("game"),`<div style="margin-bottom:14px;color:var(--color1)">${J(520)}</div>`,"position: fixed; background: rgba(0, 0, 0, 0.55); padding: 17px 24px; box-shadow: var(--boxsp); text-align: center; z-index: 9; right: 0px; top: 81px; border: 1px solid #f3cd5a1f; border-right: none;");
H("div",mm,eh(b,g,c),"margin-top:6px").M=a},function(a,b){a=ln(b);if(mm){for(let c of mm.children)if(c.M==a){G(c);break}1==mm.children.length&&(G(mm),mm=void 0)}},function(a,b){a=ln(b);var c=Em(a);c&&!c.closed&&(c.X&&xn(c),Dn(c,a,new Uint32Array(b.buffer,4)))},function(a,b){if(!tb){a=ln(b);var c=R[a];if(!c)c={},R[a]=c;else if(!c)return;Dn(c,a,new Uint32Array(b.buffer,4))}},function(a,b){Bb=Date.now();a=kn(b,1);1==tb?(b=new Uint8Array(9),Kb(b,1,K[271]()),Kb(b,5,10*a),Ab(56,b),tb=2,setTimeout(()=>{tb&&
yb.close()},12E3)):(K[205](a),performance.now())},function(a,b){Mb=am(b,1);sb=kn(b,4);K[206](0);xl()},function(){let a=Math.round(performance.now()-Ve);En+=a;Fn++;yh.$a<a&&(yh.$a=a);yh.fb>a&&(yh.fb=a);Te&&tj(Te,a+"ms")},function(a,b){Zl(b,1)},function(a,b){a=b[4];if(b=R[ln(b)])b.race=a,b=b.hml.children[3].children[0],"BUTTON"!=b.tagName&&kg(b,20*-a)},function(a,b){a=am(b,4);if(b=R[ln(b)])b.rgb=ha(a),b.hml.children[0].children[0].style.background=b.rgb},function(){if(Bm){for(let a=0;a<Bm.children.length;a++)a!=
Om&&(Bm.children[a].style.width="0px",Bm.children[a].style.opacity="0");Bm.style.Nc="0px"}m("wtr").innerHTML=J(529);Dm&&(Dm.dataset.title=J(736));zm=H("span",m("wtr"),10,"display:inline-block;width:16px;text-align:right;color:var(--color1)");Am.bb&&clearInterval(Am.bb);km=10;Am.bb=setInterval(Am,1E3)},async function(){if(dh){if(!Kl){var a=1==Om?7:2==Om?8:3==Om?3:4==Om?6:5==Om?5:0;Kl=a;n=Da[a].slice();n[46]=Mb+2E3*Lm;a=[0,0,0,0,2,4,4,4,6];n[6]=a[Lm%a.length]}n[0]=Math.round(Math.sqrt(15600*El));8==
Kl&&(a=await (await fetch("nehhon/deiv_no_magic.tzmod")).arrayBuffer(),Oi(a));K[204](0,1,dh,Kl,Hb)}else n[0]=rl(n[0],n[16],n[29]);pl();if(im)Gn();else K[209]()},function(a,b){a=(b.length-1)/2;for(let c=0;c<a;c++){let d=R[Rl(c)];d.team=b[c+1];d.rkpos=b[c+a+1]}},function(a,b){a=1;Gb(Ym);Ym.style.visibility="";Ym.style.display="grid";var c=H("div",Ym);H("div",c);H("div",c);H("div",c);H("div",c,"<div>"+J(478)+"</div>");c=1;let d;if(1<b.length){do{let p=am(b,a);a+=3;let t=bm(b,a);a+=2;var e=bm(b,a);a+=
2;var g=b[a++],h=b[a++],k=jn(b,a,h);a+=h;h=b[a++];let r=jn(b,a,h);a+=h;let u=b[a++];h=H("div",Ym);let v=c;1==p&&(d=h,c--,v=99);let x=H("div",h),y="#fff";y=3>=v?"#f0f":10>=v?"#0f0":20>=v?"#ff0":"#fff";H("div",x,1<p&&v||"-",99<v&&"font-size:10px").className="pos";H("div",x,"","background:"+y).className="plc";H("div",h,eh(r,k,u?fh[u-1]:p)).onclick=()=>{p&&E(60,Wb(p))};k=H("div",h);k.className="plshape";for(--g;0<=g;g--)H("div",k,"",e&1<<g&&"color:#00db00");e="";1<p&&(e=(Math.round(10*t/16)/10).toString().split("."),
e=e[0]+".<span style='font-size:10px'>"+(e[1]?e[1].charAt(0):0)+"</span>");H("div",h,`<div>${e}</div>`);c++}while(a<b.length)}d&&Ym.appendChild(d)},function(a,b){a=ln(b);b=b[4];R[a].state=b;a!=l.I&&(a=R[a].hml)&&(a=a.children[4].children[0],a.checked=b,a.style.backgroundPositionY=b?"0":"")},function(){Ub(J(714),1);qn()},function(){Ub(J(711),1)},function(){Ub(J(710),1)},function(a,b){Hn(b)},function(){Hn()},function(a,b){In.value=hn(b,1)},(a,b)=>{a=0;for(let c=1;c<b.length;c++){if(Jn){let d=Jn[c-1];
d&&(d.textContent=b[c],d.style.color=b[c]?"":"#787878")}b[c]>b[a+1]&&(a=c-1)}Om=a;Nm()},(a,b)=>{Rb.innerHTML=J([809,810,909][b[1]])},(a,b)=>{Gb(Ym);Ym.style.visibility="";Ym.style.display="block";a=1;let c=H("section",Ym);Zm.textContent="";do{var d=am(b,a);a+=3;var e=b[a++],g=b[a++];let k=jn(b,a,g);a+=g;var h=b[a++];g=jn(b,a,h).split(",");a+=h;h=H("div",c);H("span",h,eh("",k,d));H("img",h).src=Ug(e);H("span",h,"<span style='font-size:14px'>\u2020</span> "+g[1],"font-size:11px;color:red");d=H("div",
h);for(e=2;e<g.length;e++)H("span",d,g[e])}while(a<b.length)},(a,b)=>{if(a=R[ln(b)])a:{b=new Uint32Array(b.buffer,4);!a.L&&4E6<b[0]&&(a.L=new Uint32Array(b[0]),a.ja=0);if(a.L)if(a.L.set(b,4E6*a.ja),a.ja++,4E6*a.ja>=a.L.length)b=a.L,a.L=void 0;else break a;b=new Uint32Array(b.buffer,4+b.byteOffset);a.cb=Date.now();sm(b);K[270]();tb=0;for(let c of vb)xb(c);vb.length=0}},(a,b)=>{K[269](kn(b,4),kn(b,8),am(b,1))},(a,b)=>{a=2;let c=b[1];if(!c){var d=bn.parentNode;bn.remove();bn=H("div",d)}if(1<b.length){do{let r;
var e=void 0;c||(r=H("div",bn));let u=am(b,a);a+=3;d=b[a++];let v=b[a++];var g=kn(b,a);a+=4;var h=kn(b,a);a+=4;let x=b[a++];c||(e=H("div",r),H("span",e,Kn(d)),H("span",e,Ln(h),"color:#ffffff7a"),H("span",e,cd(g)),e=H("div",r));let y;c&&(y=new Uint32Array(50*x));g=0;var k=void 0;h=[];let z=[];c||(z[v]=I("div",e,9==d?"width:100%":""),z[v].className="winner");for(let w=0;w<x;w++){var p=b[a++];let A=p?jn(b,a,p):"";a+=p;var t=b[a++];p=jn(b,a,t);a+=t;t=am(b,a);a+=3;k=b[a++];let D=b[a++];c||(z[k]||(z.length&&
9!=d&&H("div",e,"VS","color:#c5c5c5;font-size:12px;width:auto"),z[k]=I("div",e,9==d?"width:max-content":"")),k=z[k],H("span",k,eh(A,p,D?fh[D-1]:t)));if(c){k=b[a++];let C=b[a++],L=am(b,a);a+=3;for(let O=0;50>O;O++)y[g++]=kn(b,a),a+=4;h.push({name:p,sb:A,role:D,id:t,Zb:k,race:C,color:L})}}c?Sg(0,{data:y,F:h,ob:v}):r.onclick=()=>{E(61,Wb(u))}}while(a<b.length)}},(a,b)=>{a=am(b,1);b=kn(b,4);Mb==a&&m("wtr")&&(hm=b,m("wtr").textContent=Cm(hm));if(a=An(a))a.children[1].children[0].textContent=Cm(b)},(a,
b)=>{var c=1;const d=[0,kn(b,c),kn(b,c+4),kn(b,c+8)];c+=12;var e=[0,kn(b,c),kn(b,c+4),kn(b,c+8)];c+=12;var g=[0,kn(b,c),kn(b,c+4),kn(b,c+8)];c+=12;var h=[kn(b,c),kn(b,c+4),kn(b,c+8)];c+=12;var k=kn(b,c),p=Mn(b,c+4);c=p.O;var t=Nn(b,c);c=t.O;var r=b[c];c+=1;var u=b[c];c+=1;var v=kn(b,c),x=Nn(b,c+4+4);c=x.O;for(a=[];c<b.length;)a.push({D:kn(b,c),duration:kn(b,c+4),$b:b[c+8],F:b[c+9],points:b[c+10],Ga:b[c+11],ob:b[c+12],id:kn(b,c+13)}),c+=17;P(On);b=nd("",2);b.className="playerCard";On=b;c=H("div",b);
var y=H("section",c);H("img",y).src=Ug(r,k);H("div",y,eh(t.result,p.result,u?fh[u-1]:k));t=H("footer",c);r=H("div",b);u=H("div",r);u.className="rankstats";H("header",u,J(537)+":");c=["Pro league","Deiv 1500","No magic"];for(y=0;3>y;y++){H("div",u,c[y]);let D=h[y];H("span",u,D?D+"\u00ba":"-")}h=H("div",r);h.className="basicinfo";N("div",h,896);H("span",h,"#"+k);N("div",h,893);H("span",h,Pn(v));if(x.result){k=N("div",h,897);x=x.result.split(",");v=H("span",h);h={};r=0;for(var z of x)if(z!=p.result&&
!h[z]&&(h[z]=1,H("span",v,z),5<r++))break;v.children.length||(G(k),G(v))}t.className="statsTable";z=[[J(895),d],[J(902),e],[J(903),g]];H("div",t,"");H("div",t,"\u2211","color:#ce9421;font-size:13px");for(e=0;3>e;e++)I("div",H("div",t),`width:20px;height:20px;background: url(nehhon/civ.webp);background-position-y:-${20*e}px`);for(var w of z){H("div",t,w[0]);e=w[1];for(g=1;4>g;g++)e[0]+=e[g];for(g=0;4>g;g++)p=e[g],x=H("div",t,p),w!=z[0]&&(x.dataset.title=Math.round(p/d[g]*1E3)/10+"%")}w=H("div",b);
w.className="plgamesheader";w=H("div",w);H("div",w);for(let D of[904,478,880,905,906,907])N("div",w,D);w=H("div",b);w.className="plgames";let A;for(let D of a){let C=I("div",w);I("div",C,`border-left:1px solid ${D.ob?"#0f0":"#f00"}`);H("div",C,D.Ga+"\u00ba<span>"+(["<img src='nehhon/krwn.webp'>"," \u2b24"," <span style='color:#a13d00'>\u2b24</span>"][D.Ga-1]||"")+"</span>");H("div",C,D.points);H("div",C,D.F);H("div",C,cd(D.duration));H("div",C,Kn(D.$b));H("div",C,Ln(D.D));1==D.Ga&&(C.style.background=
"#bfa2482e",C.style.color="var(--color1)");2==D.Ga&&(C.style.background="#e3e3e32e");3==D.Ga&&(C.style.background="#bf74482e");C.onclick=()=>{E(61,Wb(D.id));A&&(A.style.opacity="");A=C;C.style.opacity="0.5"}}w.addEventListener("scroll",function(){})},(a,b)=>{if(!(3>b.length||Ib||B.m)){Qn.style.opacity=1;Gb(Qn);a=1;do{let d=am(b,a);a+=3;let e=b[a++];var c=b[a++];let g=b[a++],h=cm(new Uint8Array(b.buffer,a,c));a+=c;c=cm(new Uint8Array(b.buffer,a,g));a+=g;H("div",Qn,eh(c,h,e?fh[e-1]:d))}while(a<b.length);
b=Qn.getBoundingClientRect();b.bottom>window.innerHeight-10&&(Qn.style.top=b.top-(b.bottom-window.innerHeight+10)+"px")}},()=>{let a=ym();var b=new Uint8Array(a.length+1);b[0]=65;b.set(a,1);M.B.send(b);K[43]()},(a,b)=>{a=kn(b,1);B.l=1;Rn(a);ub=1;vb=[]},(a,b)=>{f.tmpid=hn(b,1)},()=>{f.tmpid=""},()=>{let a=ym();var b=new Uint8Array(a.length+1);b[0]=69;b.set(a,1);M.B.send(b)},()=>{jc("",915)},(a,b)=>{100<b[1]&&mc(924)},()=>{M.close();yb.close()},(a,b)=>{Eb(b[1],am(b,2),kn(b,5))},(a,b)=>{a=b[4];if(b=
R[ln(b)])b.team=a,b=b.hml.children[4],"BUTTON"!=b.tagName&&(b.textContent=a?a:"\ud83d\udec7");Nm()},(a,b)=>{Jm=b[1];em()},(a,b)=>{let c=ln(b);a=b[4];b=Sn(cm(new Uint8Array(b.buffer,5)));if(K[77]())return a&&K[292](c)||!R[c]||!R[c].name?void 0:rh(b,0,1,0,a,c);dm()&&Gc("chat");if(a=Rg){var d=a.lastChild;d&&d.P==c||(d=H("div",a),d.P=c,H("span",d,qd(c)).onclick=()=>{var e=R[c]&&R[c].id;e&&E(60,Wb(e))});"https://media.tenor.com/"!=b.substring(0,24)?H("div",d,Ui(b)):(d=H("img",d),d.src=b,d.className="igif");
a.scrollTop=a.scrollHeight}},(a,b)=>{a=b[1];if(b=R[am(b,2)]){var c=b.pos,d=R[Rl(a)];d&&(d.pos=c);b.pos=a;em()}},(a,b)=>{a=b.subarray(1);b=(new Uint8Array(a)).buffer;n=Array.from(new Int32Array(b,0,Math.floor(a.length/4)));Rm()},(a,b)=>{Dl.length=0;if(1>=b.length){for(var c in R)(256>c||!R[c])&&delete R[c];a=Object.values(R);a.sort((d,e)=>d.Nb-e.Nb);a.forEach((d,e)=>{d.Nb=e})}if(1<b.length){let d=m("showGameInfo"),e;a=Tn(b,2);e=a.O;a=Sn(a.result.substring(0,100));c=Tn(b,e);e=c.O;c=Sn(c.result.substring(0,
255));let g=Tn(b,e);e=g.O;for(g=Sn(g.result.substring(0,32));e<b.length;){let h=Un(b,e);e=h.O;let k=b[e++],p=am(b,e);e+=3;Dl.push([Sn(h.result),k,ha(p)])}Gb(d);b=I("span",d,"display:block;width:516px;padding:4px 19px");N("div",b,55,"color:var(--color1);text-align:center;border-bottom:2px solid #ffffff38;padding-bottom:3px");H("div",b,a,"margin-top:19px;color:#fff");H("div",b,c,"color:#ecd078;margin-left:4px;margin-top:11px;font-size:12px");H("div",b,"<span style='color:#fff'>"+J(57)+":</span> "+g,
"margin-top:11px;font-size:12px")}em()},()=>{if(l.v)K[209]();else Vn()},(a,b)=>{K[67]()||(1>=b.length?Vm():(a=new Uint8Array(b.buffer,5),b=kn(b,1),Ki(),Wn(a,b)))},()=>{2==Il&&Jl();Il=1},(a,b)=>{R[am(b,1)].rdy=1;zg()}],Dl=[],On;function Un(a,b){const c=a[b];b+=1;a=new Uint8Array(a.buffer,a.byteOffset+b,c);return{result:(new TextDecoder("utf-8")).decode(a),O:b+c}}
function Tn(a,b){const c=bm(a,b);b+=2;a=new Uint8Array(a.buffer,a.byteOffset+b,c);return{result:(new TextDecoder("utf-8")).decode(a),O:b+c}}function Mn(a,b){const c=kn(a,b);b+=4;a=new Uint8Array(a.buffer,a.byteOffset+b,c);return{result:(new TextDecoder("utf-8")).decode(a),O:b+c}}function Nn(a,b){const c=a[b];b+=1;return 1===c?(a=Mn(a,b),{result:a.result,O:a.O}):{result:null,O:b}}
function Ln(a){a=new Date(1E3*a);return("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear().toString()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}
var Cm=a=>{57600>a-Date.now()/1E3?(a=new Date(1E3*a),a=J(898)+" "+(("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2))):(a=new Date(1E3*a),a=(new Intl.DateTimeFormat(l.hb||navigator.language,{weekday:"short",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})).format(a),a=a.replace(/,/g,""),a=a.charAt(0).toUpperCase()+a.slice(1));return a};
function Pn(a){a=new Date(1E3*a);return("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear().toString()}window.gtccles=(a,b,c)=>{b=wc(a,b);a=new Uint32Array(b.length+1);a[0]=a.length;a.set(b,1);b=yb;if(rb&&1==b.readyState)for(let e=0,g=Math.ceil(a.length/4E6);e<g;e++){var d=a.length-4E6*e;4E6<d&&(d=4E6);d=new Uint32Array(a.buffer,16E6*e,d);let h=new Uint32Array(d.length+1),k=new Uint8Array(h.buffer);h.set(d,1);k[0]=55;Vl(k,1,c);b.send(h)}};
var Kn=a=>({7:"Pro League",8:J(890),9:"Battle Royale"})[a]||"Deiv 1500";let Om;var Ve,Te,mm,Ob;function Cn(a){a.style.color=""}var vm,R=NaN;window.clrNHtimer=function(){clearTimeout(M.Ja);M.Ja=void 0};function zn(){clearTimeout(M.ga);M.ga=void 0;M.Ja=setTimeout(K[179],3E4);M.host=!0;setTimeout(vn,5E3);K[66](l.I,1,1);vn()}window.checkAlive=function(a){Em(a)||(K[73](a),q("KILL",a))};function sn(a){if(a=Em(a))return a.X}
function Em(a){for(var b=M,c=0,d=b.K.length;c<d;c++)if(b.K[c].id==a)return b.K[c]}function Xn(a,b,c){this.id=a;this.Ac=[];b&&(this.v=b);if(c){this.X=c;q(b,565656);var d=this;b?(this.channel=c.createDataChannel("nehhof",{ordered:!0}),Yn(d)):c.ondatachannel=function(e){d.channel=e.channel;Yn(d)}}M.K.push(this);c||(E(9,gn(this.id)),this.open())}function Zn(a){if(!a.closed){if(12E3<Date.now()-a.cb)return a.close(),q("TIMEOUT");a.timeout=setTimeout(Zn,12E3,a)}}
function tn(a){Gl(K[62](),20,l.name);K[61](a,f.civi||0);un(1)}Xn.prototype.open=function(){this.Ra=!0;this.cb=Date.now();this.Sb&&clearTimeout(this.Sb);q("DATACHANNEL OPEN");q(this);this.timeout=setTimeout(Zn,12E3,this);if(B.m){if(void 0==M.ga&&K[178]()||!K[163](this.id))return this.close();M.Ra++;void 0!==M.ga&&(q(M.Ra,M.Cb,this.id),M.Ra==M.Cb&&zn())}else this.v&&(l.Xb=!0,tn(this.id))};var yn;
Xn.prototype.send=function(a){var b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);if(this.channel){if("open"==this.channel.readyState)for(let c=0,d=Math.ceil(b.length/4E6);c<d;c++){let e=4E6*c;a=b.length-e;4E6<a&&(a=4E6);a=new Uint32Array(b.buffer,4*e,a);this.channel.send(a)}}else yn=b};
function $n(a,b,c){let d=yb;if(rb&&1==d.readyState)for(let g=0,h=Math.ceil(a.length/4E6);g<h;g++){var e=a.length-4E6*g;4E6<e&&(e=4E6);e=new Uint32Array(a.buffer,16E6*g,e);let k=new Uint32Array(e.length+1),p=new Uint8Array(k.buffer);k.set(e,1);p[0]=b;p[1]=c||0;d.send(k)}}function pn(){yn&&($n(yn,22),yn=void 0)}window.rlyCheck=pn;window.nppsnd=function(a,b,c){a=wc(a,b);b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);$n(b,26,c)};
Xn.prototype.close=function(a){console.trace();if(this.X)return this.X.close();a||ao(this)};function xn(a,b){var c=a.X;if(c){var d=a.channel;d&&(d.onopen=null,d.onmessage=null,d.onclose=null,d.close());c.onicecandidate=null;c.onconnectionstatechange=null;c.oniceconnectionstatechange=null;c.onsignalingstatechange=null;c.Wc=null;c.close();q(a.id);q("ALT-8");a.X=null;a.channel=null;b||E(9,gn(a.id));a.open()}}
function Dn(a,b,c){!a.L&&4E6<c[0]&&(a.L=new Uint32Array(c[0]),a.ja=0);if(a.L)if(a.L.set(c,4E6*a.ja),a.ja++,4E6*a.ja>=a.L.length)c=a.L,a.L=void 0;else return;c=new Uint32Array(c.buffer,4+c.byteOffset);a.cb=Date.now();sm(c);K[60](b)}
function Yn(a){const b=a.id,c=a.channel;c.binaryType="arraybuffer";q(a,"SETUP");c.onopen=function(){a.open()};c.onmessage=function(d){"closed"==c.readyState||a.closed||(d=new Uint32Array(d.data),Dn(a,b,d))};c.onclose=function(d){ao(a);c.onmessage=null;q("DATACHANNEL CLOSE",a.id,d)};c.onerror=function(d){q(d,"ONERROR")};c.onbufferedamountlow=function(){var d=a.Ac;d.length&&(d=d.shift(),c.send(d),q("SEND22",d))}}
function rn(a,b){const c=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),d=new Xn(a,b,c);d.Sb=setTimeout(function(){xn(d)},6E3);c.onicecandidate=function(e){q("ICE",e);e.candidate&&E(5,Nb(a,JSON.stringify(e.candidate)))};c.onconnectionstatechange=function(e){q(e,c.connectionState,d.closed);d.closed||("connected"==c.connectionState&&(d.ready=!0),"disconnected"==c.connectionState&&ao(d))};c.oniceconnectionstatechange=function(e){q(e);if(!d.closed){q(c.iceConnectionState,
d.id);if(!d.ready&&"failed"==c.iceConnectionState)return xn(d);"failed"!=c.iceConnectionState&&"disconnected"!=c.iceConnectionState||ao(d)}};c.onsignalingstatechange=function(e){q(e);d.closed||"closed"==c.signalingState&&ao(d)};return c}
var bo,Pa=()=>{var a;if(!bo){bo=1;var b=Intl[atob("RGF0ZVRpbWVGb3JtYXQ=")]().resolvedOptions()[atob("dGltZVpvbmU=")],c=navigator.hardwareConcurrency||0,d=navigator.deviceMemory||0,e=F;e||=document.createElement("canvas").getContext("webgl");if(e){var g=e.getExtension(atob("V0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbw=="));g=e.getParameter(g[atob("VU5NQVNLRURfUkVOREVSRVJfV0VCR0w=")])}var h=navigator.userAgent;e=a="Unknown";-1<h.indexOf("Firefox")?(a="Mozilla Firefox",e=h.substring(h.indexOf("Firefox/")+8)):
-1<h.indexOf("SamsungBrowser")?(a="Samsung Internet",e=h.substring(h.indexOf("SamsungBrowser/")+16)):-1<h.indexOf("Opera")||-1<h.indexOf("OPR")?(a="Opera",-1<h.indexOf("Opera")?e=h.substring(h.indexOf("Opera/")+6):-1<h.indexOf("OPR")&&(e=h.substring(h.indexOf("OPR/")+4))):-1<h.indexOf("Trident")?(a="Microsoft Internet Explorer",e=h.substring(h.indexOf("rv:")+3)):-1<h.indexOf("Edge")?(a="Microsoft Edge",e=h.substring(h.indexOf("Edge/")+5)):-1<h.indexOf("Chrome")?(a="Google Chrome",e=h.substring(h.indexOf("Chrome/")+
7),navigator.brave&&navigator.brave.isBrave&&(a="Brave")):-1<h.indexOf("Safari")?(a="Apple Safari",e=h.substring(h.indexOf("Version/")+8)):-1<h.indexOf("Vivaldi")?(a="Vivaldi",e=h.substring(h.indexOf("Vivaldi/")+8)):-1<h.indexOf("YaBrowser")&&(a="Yandex Browser",e=h.substring(h.indexOf("YaBrowser/")+10));-1<e.indexOf(";")&&(e=e.split(";")[0]);-1<e.indexOf(" ")&&(e=e.split(" ")[0]);h=a;a=e;e=new Uint8Array(1024);b=en(e,2,b,45);b=en(e,b,h,45);b=en(e,b,navigator.languages.join(),45);b=en(e,b,a,45);b=
en(e,b,navigator.platform,45);h=window.navigator.userAgent;a=window.navigator.platform;const k=["Win32","Win64","Windows","WinCE"],p=["iPhone","iPad","iPod"];b=en(e,b,-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?"Mac OS":-1!==p.indexOf(a)?"iOS":-1!==k.indexOf(a)?"Windows":/Android/.test(h)?"Android":/Linux/.test(a)?"Linux":"Unknown",45);b=en(e,b,g,255);b=en(e,b,l.xa,5);b=en(e,b,document.referrer,255);g=b++;e[g]=c;c=b++;e[c]=d;d=b++;e[d]=ba||ma;d=b++;e[d]=screen.colorDepth;d=b++;e[d]=
navigator.cookieEnabled;d=b++;e[d]=navigator.maxTouchPoints;d=b++;e[d]=100*dn.level;d=b++;e[d]=dn.charging;d=b++;e[d]=screen.isExtended;Fm(e,b,100*window.devicePixelRatio);b+=2;Fm(e,b,screen.availWidth);b+=2;Fm(e,b,screen.availHeight);b+=2;Fm(e,b,window.innerWidth);b+=2;Fm(e,b,window.innerHeight);b+=2;Fm(e,b,612);b+=2;Fm(e,b,parseInt(f.visits)||0);b+=2;e[1]=l.I;for(d=2;d<b;d++)e[d]+=55;E(63,new Uint8Array(e.buffer,0,b))}};Fb.prototype.send=function(a){this.B.send(JSON.stringify(a))};
var tm=()=>{let a=new Uint8Array(6);a[1]=parseInt(f.civi)||0;a[2]=parseInt(f.CCID)||0;Vl(a,3,rm());E(31,a)};function hc(a){var b=M;if(1!=b.B.readyState)return b.B.addEventListener("open",()=>hc(a));if(!K)return co.put(()=>hc(a));Ob&&location.hash?(setTimeout(()=>hc(a),250),Ob=0):(K[266](1),zi=void 0,Pa(),tm(),!f.sid&&f.tmpid&&E(66,Vb(f.tmpid)),b=a.length?um(3,mn(a.substr(1))):um(3,nn(a)),vm?wm(b):(Ql(),M.B.send(b)))}
function eo(){if(!B.m){var a=Math.floor(Date.now()/1E3);for(let c=0;2>c;c++){var b=Zb[c].children;for(let d of b)if(b=d.children[2])void 0!=d.D&&0>d.aa&&(b.innerHTML=Math.floor((a-d.D)/60)+" "+J(558)),!d.D&&d.kb&&d.kb-Date.now()/1E3<(d.Va?0:3600)&&(d.style.filter="",d.kb=void 0)}setTimeout(eo,5E3)}}var Zb;function An(a){if(Zb&&!(2>Zb.length))for(let b=0;2>b;b++){let c=Zb[b].children;for(let d of c)if(d.Bb==a)return d}}
var Vm=()=>{K[266]();zi=void 0;Pi=0},ac,$b,bc,Qn,En=0,Fn=0,yh,Gm=()=>{yh={ua:0,za:255,Za:0,eb:65535,$a:0,fb:65535,tb:0,Pb:0,Db:0,Ca:0,Kc:0,time:Date.now()}};Gm();
function zl(){let a=new Uint8Array(36),b=1;var c=Date.now();let d=c-yh.time;document.hidden&&(yh.Ca+=c-fi,fi=c);c=Math.round(Ck/(d/1E3));let e=Math.round(En/Fn);var g=Math.round(100*Qk/(25*Pk));255<g&&(g=255);255<yh.ua&&(yh.ua=255);255<yh.za&&(yh.za=255);Pk=Qk=Fn=En=Ck=0;var h=b++;a[h]=yh.ua;h=b++;a[h]=g;g=b++;a[g]=yh.za;Fm(a,b,yh.Za);b+=2;Fm(a,b,c);b+=2;Fm(a,b,yh.eb);b+=2;Fm(a,b,yh.$a);b+=2;Fm(a,b,e);b+=2;Fm(a,b,yh.fb);b+=2;Fm(a,b,yh.tb);b+=2;Fm(a,b,yh.Pb);b+=2;Fm(a,b,yh.Db);b+=2;Fm(a,b,Math.round(d/
1E3));b+=2;Fm(a,b,Math.round(yh.Ca/1E3));b+=2;Fm(a,b,Math.round(100*Rc));b+=2;Kb(a,b,K[291]());Kb(a,b+4,K[279]()+K[14]());E(71,a);Gm()}
var fo=a=>{if(!m("strscrn")&&!location.hash&&"https://games.crazygames.com/"==document.referrer){let b=Ub("",2),c=H("div",b);c.id="strscrn";let d=H("div",c);H("span",d,J(15)+": ");let e=I("input",d);e.type="text";e.value=f.name;e.onchange=()=>{f.name=e.value};e.maxLength=17;e.spellcheck="false";f.sid&&(e.disabled=!0);H("button",c,J(92)+" \u25b6").onclick=()=>{gc=!0;hc(a);ic();P(b);Cl()}}};
function wn(a){if(m("index"))if(ib){var b=ln(a);b&&(100<a[4]&&mc(924),l.I=a[5],Yb.style.filter="none",Xb.style.opacity="1","#"==location.hash.charAt(1)&&go());var c,d=0,e=Math.floor(Date.now()/1E3);b&&(H("div",m("index"),b).id="ppop");if(a&&6<a.length){var g=740>window.innerWidth||650>window.innerHeight?m("index"):Yb,h=g.scrollTop;b=b?6:4;do{var k=a[b++];let u=a[b++],v=a[b++],x=kn(a,b);b+=4;let y=bm(a,b);b+=2;var p=a[b++];let z=am(a,b);b+=3;var t=a[b++];let w,A;1==p?w=!0:2==p&&(A=!0);p=w?ac:$b;let D=
u,C=document.createElement("div");C.onmouseenter=()=>{if(!Ib&&!B.m){d++;c=C;var W=d;setTimeout(()=>{if(c==C&&W==d){G(Qn);var ia=C.children[1].getBoundingClientRect();Qn=H("div",document.body,"",`${B.l?"right:5px;":`left:${ia.left+ia.width}px;`}top:${ia.top}px;opacity:0`);Qn.id="plinroom";E(62,Wb(z));C.va=1}},400)}};C.onmouseout=()=>{d++;C.va&&(C.va=0,Qn.style.opacity=0,setTimeout(G,600,Qn))};!w&&v&&150==D&&(C.xc=1,6>k?D=6:D=k+(2-k%2));var r=cm(new Uint8Array(a.buffer,b,t));b+=t;let L=z;t="IO"==r||
"VITA"==r;C.Va=t;!w&&v&&(C.className="pbl");let O=H("div",C);3600<x-Date.now()/1E3||x&&C.Va?C.style.filter="grayscale(1)":t&&fo(L);C.kb=x;H("div",O,"",t?"color:#c800c8":!w&&A&&"color:#00c8c8").className="redCircle"+(!w&&" rgr"||"");r=H("div",C,r?Sn(r):J(85),!L&&"color:red");x&&!w&&H("span",r,Cm(x));1==f.sid&&(H("button",r,"X","position: absolute; right: 70px; pointer-events: all; margin-left: 30px; margin-top: -8px; background: rgb(255 0 0 / 11%); color: #000000; font-size: 23px;").onclick=()=>{var W=
L;confirm()&&(W=Wb(W),W[4]=0,E(16,W))});150==u&&(u=98);250==u&&(u=99);H("div",C,v&&!w?"":w?~~(y/60)+" "+(J(558)||"min"):"").className="tbtime";H("div",C,`<span>${k}</span><span>/</span><span>${D}</span>`).className="tbplyrs";v&&w&&2<D&&(C.style.filter="hue-rotate(311deg)");C.Bb=L;y=e-y;if(!v||w)C.D=y,C.aa=y,w&&(C.aa*=-1);C.Ob=A;C.rc=v;!w&&L&&(C.onclick=Ol);L||(C.style.opacity=.5);v&&!w&&(C.aa=2E9*u+(A?1:0));k=!0;for(let W of p.children)if(W.aa<=C.aa){p.insertBefore(C,W);k=!1;break}k&&p.appendChild(C);
p.offsetParent?C.lc=ho:C.style.animation="unset"}while(b<a.length);La||(g.scrollTop=h)}eo.wc||(eo.wc=!0,setTimeout(eo,5E3))}else kb.put(()=>{wn(a)})}function ho(){this.style.animation="unset";this.lc=void 0}function Bn(a){ac.appendChild(a);setTimeout(()=>{a.style.height="";a.style.opacity="";a.style.border=""},250)}function io(){let a=this.C;f.avatar=a;q(this.C);E(19,Xl(a));S(this.parentNode);m("avtimg").src=Ug(a)}
function Tb(){let a=nd("",1);a.id="account";N("p",a,15,"color:var(--color1)");let b=Wa(a,f.name);b.minLength=1;b.maxLength=32;let c=N("button",a,443,"margin-left:8px;margin-bottom:6px");N("div",a,545,"color:#ccc;font-size:9px");H("button",a,J(908)+" >","margin-top: 15px; color: rgb(255 255 255); font-size: 16px; letter-spacing: 1px; text-transform: uppercase; margin-right: 20px;").onclick=()=>{var h=parseInt(f.sid);h&&E(60,Wb(h))};H("button",a,`{${J(703)}} >`,"margin-top:15px;color:#81ff81;font-size:16px;letter-spacing:1px;text-transform:uppercase").onclick=
()=>{P(a);let h=nd("",1);jo=N("div",h,53,"gap:20px;display:flex;flex-direction:column;align-items:flex-start");E(43)};N("p",a,546,"color:var(--color1)");let d=H("div",a);var e=I("img",d,"cursor:url(nehhon/hand.gif),default;box-shadow:#ff00008f 0px 0px 38px;border:1px solid rgba(255, 0, 0, 0.48);");e.src=Ug(f.avatar||113);e.id="avtimg";var g=H("div",H("div",d,"","max-height:216px;overflow-y:auto;width:57px;margin:9px"));g.id="avsel";e.onclick=function(){if(""==g.innerHTML)for(let h=0;199>=h;h++){let k=
H("div",g,"");k.onclick=io;k.C=h}g.show()};c.onclick=function(){let h=b.value;h&&confirm(J(713))&&E(13,Qa(" "+h))};N("button",a,442,"display:block;margin-top:20px;background:#920000").onclick=function(){f.sid="";f.nm="";location.reload()}}var jo,In;
window.iodefeated=function(){let a=Ub("");a.id="iodef";a.parentNode.parentNode.style.zIndex=0;H("span",a,`${J(386)} ${J(387)}`);N("p",a,925);let b=H("div",a);N("button",b,913,"color:#0f0").onclick=()=>{K[284]();P(a)};N("button",b,75,"color:#f00").onclick=ye};
function Hn(a){var b=jo;Gb(jo);if(a){let g=f.sid;var c=a[1];let h=am(a,2),k=g==h;var d=k?jn(a,8,24):0,e=jn(a,8+(k?24:0),c);c=8+(k?24:0)+c;Va(b,e);if(k){e=H("div",b);H("span",e,J(704)+" -> ","color:var(--color1)");In=Wa(e,d);In.style.width="216px";In.style.fontSize="11px";In.readOnly=!0;let p=I("button",e,"margin-left:9px;width:16px;height:16px;background:url(nehhon/refresh.webp);background-size:cover");p.onclick=()=>{E(42);p.style.visibility="hidden"}}d=H("div",b);H("div",d,J(707)+":","font-size:12px;");
d=I("div",d,"border-left:2px solid rgba(255, 255, 255, 0.19);padding:4px;margin-top:9px;min-width:185px;display:grid;grid-template-columns:repeat(2,max-content);align-items:center;gap:2px 10px");do{let p=am(a,c);c+=3;e=a[c++];let t=jn(a,c,e);c+=e;let r=H("div",d,eh("",t,p),(p==h?"color:var(--color1);":"")+"font-size:11px");if(g==h&&p!=h){let u=H("div",d,"\u00d7","color:red;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{E(44,gn(p));G(u);G(r)}}else H("div",d);q(t,p)}while(c<a.length);N("button",
b,k?706:712).onclick=()=>{confirm(J(713))&&(E(41),Hn())}}else{N("div",b,703,"color:var(--color1)");a=H("div",b);let g=Wa(a,"");g.style.width="159px";g.placeholder=J(704);g.maxLength=32;N("button",a,708,"margin-left:8px").onclick=()=>{let k=g.value;q(k);k&&E(39,Qa(" "+k))};b=I("div",b,"border-top:2px solid #ffffff45;padding-top:20px");let h=Wa(b,"");h.style.width="105px";h.style.textTransform="uppercase";h.placeholder=J(709);h.maxLength=5;N("button",b,705,"margin-left:8px;margin-bottom:6px").onclick=
()=>{let k=h.value;k&&E(40,Qa(" "+k))}}}function un(a){!l.v&&!a||B.id||(a=l.na,B.id=a,B.l=1,P(m("loadingOnline")),setTimeout(()=>location.hash="#"+l.na,200),Hb||(lc("index"),xg(),Qd("game"),xg(),m("buttons").innerHTML="",oa(a,"Waiting")))}var Wl;
function ao(a){q(a);console.trace();var b=Em(a.id);b&&!b.closed&&a==b&&(b.closed=!0,!b.v||l.v||B.m?(q(b),M.host&&(gl(M.K,b),K[73](b.id)),q(b.v,B.m,"admindel"),E(14,gn(b.id)),b.v&&B.m&&!Ib&&E(10,gn(b.id)),B.m||(a=qd(b.id))&&H("li",tl,Dg(J(94),a),"color:#ff4b4b")):(Jb(J(95)),Gc("ressurect")))}window.thereIsAnIdiot=function(a){q(a);l.I==a?(Ua(J(97)),Pl()):(a=Em(a))&&a.close()};var ko=document.getElementsByClassName("ucolor");function vn(){M.host&&Ue&&(K[156](),vn.D=Date.now(),setTimeout(vn,5500))}
window.pong=function(a){var b=Date.now()-vn.D;if(Em(a))K[157](a,b)};var Tl,Km;
function em(){if(!B.m){var a=Jm||K[28]()-1||14;if(ol){var b=0;for(var c in R)R[c].pos>b&&(b=R[c].pos);6<a&&(a=6);b+=1;6<=b&&(a=b+2-b%2,a>Jm&&(a=Jm))}Sl.innerHTML="";b=H("div",Sl);H("div",b);H("div",b);H("div",b);N("div",b,103);ol?N("div",b,543):N("div",b,21);c=b=0;for(let e=0;e<a;e++){var d=Rl(e);let g=R[d]||NaN;g||Dl.length?(255<d?c++:b++,Yl(e,d,g.rgb,g.flag,g.race,g.team,g.state)):(d=H("div",Sl),H("div",d),H("div",d,"- - - -","color:#5a5a5a"),d.style.pointerEvents="none")}Fl=b;El=c;Nm()}}
var Qm,Tm,Sm,Wm,Dm,El,Fl;window.setupPlayermenu=em;var lo,mo;window.mapWindowK=function(a,b,c){let d=mo;a=fe(ge(a,20));d=en(lo,d,a,100);lo[d++]=b;Vl(lo,d,c);mo=d+3};window.mapWindow1=a=>{E(79);E(77,new Uint8Array(lo.buffer,0,mo));Im(a)};window.mapWindow=function(a){a=new Uint8Array(512+48*a);let b=2;K[240](0);b=fn(a,b,100);K[240](1);b=fn(a,b,255);K[240](2);mo=b=fn(a,b,32);lo=a};var no;
function wm(a){no?(no=a,window.grecaptcha.reset(),m("nrobotdiv").parentNode.parentNode.parentNode.style.cssText=""):(no=a,a=document.createElement("script"),a.src="https://www.google.com/recaptcha/api.js?onload=cllrobot&render=explicit",document.body.appendChild(a))}window.cllrobot=function(){nd('<div class="g-recaptcha" id="nrobotdiv"></div>');q(window.grecaptcha);window.grecaptcha.render("nrobotdiv",{callback:oo,theme:"dark",sitekey:"6Lcw5wAaAAAAAC8nGPdUK8dE8LE2BcOFXI7lVtyM"})};
function oo(a){a=Qa(a);let b=new Uint8Array(2+a.length+no.length);b[0]=23;b[1]=no.length;b.set(a,2);b.set(no,2+a.length);M.B.send(b);no=1;Ql();S(m("nrobotdiv").parentNode.parentNode.parentNode)}var Jn,Bm;
function Rm(){var a=n,b=m("showGameInfo");if(b){b.innerHTML="";var c=a[1],d=a[2],e=a[3],g=a[4],h=a[7],k=a[6],p=a[12],t=a[0],r=a[9],u=a[10],v=a[18];a=a[19];if(dh&&!Kl){b.style.background="none";b.style.padding="0px";b.style.boxShadow="unset";b.style.width="unset";b.style.border="unset";b.style.backdropFilter="unset";var x=[0,"Deiv 1500",7,"PRO - Wolno\u015b\u0107",8,J(890),3,"Deiv 1500<br>"+J(523),0,Dg(J(735),4)+"<br>"+J(484)];let z=H("section",b);Bm=z;Jn=[];for(b=0;b<x.length;b+=2){let w=b/2;c=x[b];
d=x[b+1];let A=H("div",z);kg(A,84*-w);e=H("div",A);H("div",e,d);Jn.put(H("span",e));A.onclick=()=>{for(let D of z.children)D.style.outline="";A.style.outline="1px solid #00ff0047";E(45,Xl(w))};7==c&&S(A);8==b&&S(A)}}else{b.style.cssText="";var y=[J(28),J(29),J(30),J(31),J(32),J(33),J(525),J(524)];1E9<=c&&(c="***");1E9<=d&&(d="***");1E9<=e&&(e="***");1E9<=g&&(g="***");gm&&(t="Auto");h=[J(1),t,J(26),jb[k]&&jb[k].name,J(42),u,J(27),y[h],J(11),r,J(35),J([36,37,38,39][p]),J(396),v+" "+J(558),J(398),J([399,
400,401][a])];K[275]()&&(H("button",b,J(928),"padding:5px;background:#ffff00;color:#000;margin:auto;margin-bottom:18px;font-size:14px").onclick=()=>{Je(1)});H("span",b,`${c}<img class='resource' src='nehhon/gold.gif' /> ${d}<img class='resource' src='nehhon/wood.gif' /> ${e}<img class='resource' src='nehhon/food.gif' /> ${g}<img class='resource' src='nehhon/stone.gif' />`,"text-align:center;width:100%;display:block;border-bottom:2px solid rgb(156 137 79 / 27%);margin-bottom:9px;padding-bottom:9px");
c=H("div",b);for(x of h)H("div",c,x);l.v||(H("span",b,"+ "+J(461)+"...","cursor:url(nehhon/hand.gif),default;color:#ffd75dd1;font-size:11px;margin-top:12px;display:block").onclick=pm);x=Ea();q("PR",x);x&&!K[275]()&&H("span",b,"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714 </span>"+x,"color:rgb(203,255,238);position:absolute;top:20px;right:21px")}}}function pm(){Ie(5)};if(location.search){let a=new URLSearchParams(location.search);if(a.has("desk")){let b=new XMLHttpRequest;b.open("GET","http://localhost:41334"+location.search,!0);b.send(null);Ua("","Desktop app open")}console.log(a)}function go(a){if(gc)gc=!1;else if(!l.v){if(a)return location.reload();a=decodeURI(location.hash.substr(1));gc=!0;hc(a);ic()}}
function po(a){if("RandomMap"==a)return qo;if("Settings"==a)return ro;if("About"==a)return zo;if("Guide"==a)return of;if("Changelog"==a)return rf;if("Ranking"==a)return an;location.hash=""}function pb(a,b){var c=location.hash.substr(1);c&&("#"==c.charAt(0)?b||setTimeout(go,500,a):B.m||po(c)&&po(c)())}var tl,dm=()=>"1"!=f.muteroom||B.m;
function rh(a,b,c,d,e,g){b||dm()&&Gc("chat");e=e?`<span class="ttag">[${J(21)}]</span>`:"";if(c&&(d=K[77]()?Od:tl)){if(5!==c){if(b)a=`<span style="color:var(--color1)">${J(407)}</span>`;else if("https://media.tenor.com/"==a.substring(0,24)){var h=a;a=""}else a=Ui(a);a=H("li",d,"<span>"+e+qd(g,c)+" \u2014</span> "+a,d==Od&&`border-color:${R[g]&&R[g].rgb}`||"");h&&(a=H("img",a),a.src=h,a.className="igif")}else H("li",d,a);d.scrollTop=d.scrollHeight;K[77]()&&Vi()}}window.chat=rh;
function Vi(){if(m("msgs1")){for(;11<=m("msgs1").children.length&&m("msgs1").scrollHeight>m("msgs1").getBoundingClientRect().height;)m("msgs1").removeChild(m("msgs1").children[0]);1==m("msgs1").children.length&&(Ao=setInterval(Bo,16E3))}}var Ao;function Bo(){m("msgs1")&&m("msgs1").children[0]&&m("msgs1").removeChild(m("msgs1").children[0]);m("msgs1")&&0==m("msgs1").children.length&&clearInterval(Ao)}function Sn(a){return String(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function Mg(){var a=c;if(B.m){var b=Od;if(!c)var c=m("msginputGame").value;m("msginputGame").value=""}else b=tl,c||(c=m("msginput").value),m("msginput").value="";if(!B.l){if("hmspawn"==c.substr(0,7)){Qe(K[110]);return}if("hmpetleva"==c){K[200](0);return}}""!==c&&(a||(c=Sn(Ui(c))),B.l?(a=m("teamchat")&&m("teamchat").checked,c=Qa(" "+c),300<c.length||(a?E(80,c):E(74,c))):(I("li",b,`border-color:${l.color}`).innerHTML+=`
    <span>${m("teamchat")&&m("teamchat").checked&&`
    <span class="ttag">[${J(21)}]</span>`||""}`+qd(l.I,-1)+" \u2014</span> "+(a?`<img src="${c}" class="igif">`:c),b.scrollTop=b.scrollHeight,Vi()))}var Co=document.getElementsByClassName("ucolor1"),Do=document.getElementsByClassName("username1"),Eo=document.getElementsByClassName("race1"),Fo=document.getElementsByClassName("team1");function Go(a){var b=1;2===a.button&&(b=-1);this.innerHTML=K[51](this.ha,b)||"\ud83d\udec7"}
function Ho(a){var b=1;2===a.button&&(b=-1);ol?(a=(this.Wb+b)%4,0>a&&(a=3),this.Wb=a,this.innerHTML=ll(a),E(29,Xl(a))):this.innerHTML=ll(K[52](this.ha,b))}function Io(){if(!Dl.length){q(this.Rb,this);this.Rb&&(l.color=this.value,f.color=this.value);var a=parseInt(this.value.substr(1),16);if(ol)E(30,gn(a));else K[57](this.ha,a);"TD"==this.parentNode.tagName?this.style.color=this.value:ko&&ko[this.ha-1]&&(ko[this.ha-1].children[0].style.color=this.value,G(this))}}
function Jo(a){K[50](1+4*a.shiftKey+99*a.altKey)}function Ko(a){K[50](-1-4*a.shiftKey-99*a.altKey)}window.presetuprndtable=function(a){if(m("RandomMap"))Qd("RandomMap");else{var b=nd("",2);b.parentNode.style.verticalAlign="baseline";b.parentNode.parentNode.style.zIndex="0";b=H("div",b,`<div>
        <div id="spbdy"><button id="load1">${J(671)}</button><button id="edmap1">${J(105)}</button></div>
        <div>
        <table class="players" id="oneplayertable">
        <tbody id="oneplayertbody">
        </tbody>
        </table>
        <div style="display:flex;justify-content:center;gap:30px">
        <button id="start2" class="start startButton">${J(92)} \u25b6</button>
        <button class="start optionsButton" id="start1" >${J(48)}</button>
        </div>
        </div>
        </div>`);b.id="RandomMap";b.className="playermenu";m("start1").onclick=Ie;m("start2").onclick=Jl;m("load1").onclick=function(){Xm()};m("edmap1").onclick=Lo}b=m("oneplayertbody");b.innerHTML="";b.insertAdjacentHTML("beforeend",`<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">\u2212</button></td><td>${J(103).toUpperCase()}</td><td>${J(21).toUpperCase()}</td></tr>`);for(let c=0;c<a;c++)b.insertAdjacentHTML("beforeend",'<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>');
m("addPlayer").onclick=Jo;m("removePlayer").onclick=Ko};var fh=["VIP"];function qd(a,b){var c=R[a];b=c&&c.name||0<b&&fe(ge(b,20))||-1==b&&l.name||"";let d=0;if(c){d=c.id;let e=c.role;1==e&&(d=fh[e-1])}return eh(c&&c.clan,b,d,!a&&B.l)}function eh(a,b,c,d){return`<span class="nmtg">${a&&`<span class="clanTag">{${Sn(a)}}</span>`||""}<span ${d?"style='color:#ff0'":""} class="usnm">${Sn(b)}</span>${c&&`<span class="verified"${"string"==typeof c?" style='color:#ff6eff'":""}>#${c}</span>`||""}</span>`}
window.recvtrib=function(a,b,c,d,e,g){e=qd(g,e);a="-> <span style='color:#0f0'>"+(a&&`${a} <img src="nehhon/gold.gif">`||"")+(b&&`${b} <img src="nehhon/wood.gif">`||"")+(c&&`${c} <img src="nehhon/food.gif">`||"")+(d&&`${d} <img src="nehhon/stone.gif">`||"")+"</span>";m("msgs1").innerHTML+="<li>"+Dg(J(449),a,e)+"</li>";Vi()};function rd(a){return(a=R[a])&&255!=a.flag?`<span class="flag" style="background-position-x:-${21*a.flag}px"></span>`:""}
window.randomMapTable=function(a,b,c,d,e){for(d=d.toString(16);6>d.length;)d="0"+d;d="#"+d;Do[e].innerHTML=`<input value="${fe(ge(a,20))}" type="text">`;a=Do[e].getElementsByTagName("input")[0];a.onchange=Mo;a.Ia=e+1;a.maxLength=20;a=Fo[e].getElementsByTagName("button")[0];a.ha=e+1;a.onmousedown=Go;a.innerHTML=b||"\ud83d\udec7";b=Eo[e].getElementsByTagName("button")[0];b.ha=e+1;b.onmousedown=Ho;b.innerHTML=ll(c);var g=document.createElement("input");g.type="color";g.ha=e+1;g.value=d;g.Rb=0==e;g.style.color=
d;Co[e].appendChild(g);g.onchange=Io;Co[e].onclick=()=>g.click()};function qo(){K[67]()&&Fa();K[50](0,parseInt(f.civi))}function Xm(){var a=document.createElement("input");a.type="file";a.accept=".tzared";a.onchange=we;a.click()}function No(){if(m("CustomMap"))lc("customMapcont"),Qd("CustomMap");else{let b=nd("",2);b.parentNode.style.verticalAlign="baseline";b.parentNode.parentNode.style.zIndex="0";var a=H("div",b,`<table id="mapcache"></table>
    <div id="customMapcont" style="display:none">
    <table class="players" id="customaptable">
    <tbody id="custombody">
    </tbody>
    </table>
    <div style="display:flex;gap:15px;margin-top:40px;justify-content:center">
    <button  id="startCustom" class="start startButton">${J(92)}</button>
    <button id="editCustom" class="start"> ${J(105)}</button>
    </div>
    </div>`);a.id="CustomMap";a.className="playermenu";b.children[0].addEventListener("click",Vm);m("startCustom").onclick=function(){lc("customMapcont");Jl()};m("editCustom").onclick=Lo}}function Oi(a){q(a);let b=new Uint8Array(a,4);a=(new Uint32Array(a,0,1))[0];q(b,a);q("ug",Wn(b,a))}function Ni(a){let b=document.createElement("input");b.type="file";b.accept=".tzmod";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}
function Oo(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnf";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}function ag(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnt";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsText(c)};b.click()}function we(){B.l||Q||No();var a=this.files[0];q(a);var b=new FileReader;b.onload=Po;b.readAsArrayBuffer(a)}var Um;
window.rcgini=function(a,b){l.v&&(Um=n);n=Array.from(yc(a,b).slice(0))};function Qo(){zc(function(){K[122]();ee();Rf();K[244]();ae()})}var Ro=a=>{Ki();var b=new Uint8Array(a,4);a=kn(new Uint8Array(a,0,8),0);for(var c=b.length,d=K[44](c),e=0;e<c;e++)window.HEAPU8[d+e]=b[e];K[45](4*a,c,B.l,1,Hb,jm,1);K[209]()};async function Rn(a){a=await (await fetch("https://i.tza.red/"+im+"/"+a,{cache:"no-store"})).arrayBuffer();Ro(a)}
async function Vn(){var a="tempmap/"+Mb;setTimeout(async()=>{let b=await (await fetch("https://u.tza.red/"+a,{cache:"no-store"})).arrayBuffer();Ro(b)},250)}async function Gn(){let a=await (await fetch("https://u.tza.red/m/"+im)).arrayBuffer();Ro(a)}var lm;
function Po(a){zi=void 0;B.l&&Vm();Ki();B.l&&(l.V.Oc=l.V.max);a=a.target.result;for(var b=new Uint8Array(a,4),c=(new Uint32Array(a,0,1))[0],d=b.length,e=K[44](d),g=0;g<d;g++)window.HEAPU8[e+g]=b[g];b=K[45](4*c,d,Math.max(2,El),1,0,0);if(Q)b?Qo():So(()=>{K[45](4*c,d,B.l);Qo()});else{if(!b)return Ua(J(927));if(B.l)return lm=a,S(Qm.parentNode),S(Tm),Sm.show(),B.Xc=!0;P(m("RandomMap").parentNode);Qd("customMapcont");m("custombody").innerHTML="";To.length=0;K[46]()}}
function Ii(a,b){var c=K[79](b);c=sj(c,b);for(var d=0;d<b;d++)c[d]=a[d+0];c=K[80]();a=K[81]();return sj(c,a)}function Wn(a,b){var c=K[79](a.length);c=sj(c,a.length);for(var d=0;d<a.length;d++)c[d]=a[d];c=K[267](b);return wc(c,b)}function Oc(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(d){d=d.target.response;ma||Uo({url:a,buffer:d});b(d)};c.send()}
function sl(){var a=J(104),b;try{"granted"!=Notification.permission&&Notification.requestPermission(function(){});var c=new Notification(a,{icon:"nehhon/807.png",body:void 0,requireInteraction:!1});b||=5550;setTimeout(function(){c.close()},b)}catch{}}function Vo(a){for(var b="",c=0,d=a.length;c<d;c++)b+=fm[a[c]];return b}ma||Ya[Vo([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]===Vo([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])||(tc=la);
function Fe(a){if(a){if(Ha)return K[83](55==a);var b=K[47]();if(U)a=wc(K[276](55==a),b*b*3),Qf.queue.writeBuffer(hj,0,a);else{a=qj(K[83](55==a),b*b*4);if(Oj)var c=2**Math.ceil(Math.log2(b));var d=performance.now();F.useProgram(Fg);F.activeTexture(F.TEXTURE1);Fe.texture?(F.bindTexture(F.TEXTURE_2D,Fe.texture),Oj?(F.getExtension("OES_texture_float"),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,b,b,0,F.RGBA,F.FLOAT,a)):F.texImage2D(F.TEXTURE_2D,0,F.RGBA32F,b,b,0,F.RGBA,F.FLOAT,a)):(Fe.texture=F.createTexture(),
F.bindTexture(F.TEXTURE_2D,Fe.texture),Oj?(F.getExtension("OES_texture_float"),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,c,c,0,F.RGBA,F.FLOAT,null),F.texSubImage2D(F.TEXTURE_2D,0,0,0,b,b,F.RGBA,F.FLOAT,a)):F.texImage2D(F.TEXTURE_2D,0,F.RGBA32F,b,b,0,F.RGBA,F.FLOAT,a),Rj(),F.uniform1i(F.getUniformLocation(Fg,"img_data"),1));F.useProgram(V);F.activeTexture(F.TEXTURE2);ca.ad=performance.now()-d;Fe.update=!1}}else Fe.update=!0}window.setupTerrainTXT=Fe;Fe.update=!1;window.stpTupdtr=function(){Fe.update=!0};var K,ob,co=[],Jg;
window.moduleLoaded=function(){var a=window.Module,b=Object.keys(a),c=b.length,d="synchroHash rnd setupRandom randomTerrain test shapoint Uint16Array boolArray test2 searchUnit setupResources movtablexe test3 setupGL getBufferID executeOrder Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen crtStxt configTerrain delTexs touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf updKngs mouseOut rstrRNDmap kngremainng idddamin runnxtcycl pong updtping refreshPlayerInfo tradingsum tradingresum selectoridest strtrading playerReconnect n2addss delAsyncPointer peacetime menustate prvbuild stpTactil checkDelAnim updresources wrkstate chtgspd mapVisibility chvisibility svggame shwRCR ckMnhst dellmitTest rOnlen stdiplomacy dpChange sndTribs shwsts empvtr trrbs trrwtr tmlck chmnlen chscrntype shICNu tchTime gtORDuIC shRCICNu shRCNLY gfastNF rcSEL unittable gtbonuses buildtable gnfoTYPE gdfltprops disctimeout chonltyp onlpulse onlstr pidchngsrc pidchngsrgb strgmonl chonltm wdtsetup wdtunit wdtkingdom wdtterrain dclslen edstdcl ruleadd shwrule eventadd shallrules edrulename shwevent chevactyp chkxkingdom confirmsel selname colorevsel delfromids viewfromids updevent chkxkingdomval areaactv areavw crntIDS ruleprops rulereps rleoprtn stdQ updmapname rtnmapname actntxt rluchkids chkxidsval eddreload chdipcntrl diptype EDmulpselect rluch2kids chk2xidsval chCRcptr chuCRcptr moddipops stphnames spvsVal btbl gtteam mddtable bmddtable mddpnter ordprps ordlen imddtable tmddtable rtrnconsts mddpointer dftstp nhuncomp eduname gtpstcycles onlrec lstrcv shdwn sbyclr shrmdd mddlen cnfTerrain3 updGL3kingdoms smtsel gtbidalpha prdbid suprtree shordnfo updordinfo rplygame rnddecls ioterr gtdblog makeStaticMap dplrequest stRecord gtutlength chlgl".split(" ");K=
[];K.length=d.length;for(var e=0,g=d.length;e<g;e++)for(var h=d[e],k=0;k<c;k++){var p=b[k];if("__"==p.substr(0,2)&&-1<p.indexOf(h)){K[e]=a[p];break}}ob=new uc(K[5](),4096);K[23]();K[23]();K[23]();Gl(K[53](rm()),17,l.name||"Guest");U=3==f.webgl&&!Ha;K[109](612,ma,!!window.indexedDB,Math.floor(Math.random()*2**32),U,Ha);Jg=document.createElement("canvas");U||Wo();mb();window.ontouchstart=function(){q(123123);La=!0;K[169](1);window.ontouchstart=void 0};for(let t of co)t();co=void 0};
var Zj=async a=>await (await fetch("nehhon/"+a)).text(),Wo=()=>{var a={antialias:!1,alpha:!1,depth:!0};let b=f.webgl;Jg.id="canvas";b&&"2"!=b&&"3"!=b||(F=Jg.getContext("webgl2",a));F||(F=Jg.getContext("webgl",a),Oj=!0)},cl=window.GPUTextureUsage,el,bl,dl,kl=0;
window.txtgpu=async(a,b,c,d,e,g,h,k,p,t,r,u,v)=>{a=sj(a,b*c*4);Qf.queue.writeBuffer(cj,r,a);b=new Uint32Array([r/4,b,c/(d*e),g,d,t,p,0,0]);c=new Float32Array(b.buffer);c[7]=h;c[8]=k;Qf.queue.writeBuffer(ij,u*b.length*4,b);await Qf.queue.onSubmittedWorkDone();K[165](v)};window.gl3kngs=(a,b)=>{Qf.queue.writeBuffer(nj,0,wc(a,b))};window.gl3nfo=(a,b)=>{Qf.queue.writeBuffer(oj,0,wc(a,b))};var al;
async function Ll(){function a(){B.D&&Ck++;so++;if(1==f.hlffps&&so%2)return requestAnimationFrame(a);Bk();Gh();var ka=Date.now();to[0]=hd&&!(200>ka-id)||Yf?id-ed+fd:ka-ed+fd;Qf.queue.writeBuffer(O,0,to);yk.colorAttachments[0].view=d?zk.createView():g.getCurrentTexture().createView();ka=e.createCommandEncoder();var fa=ka.beginRenderPass(yk),Jc=kl+1;sd&&(3==sd&&Uj||(fa.setPipeline(z),fa.setBindGroup(0,ia),fa.draw(6,1,0,0)),Uj&&(fa.setPipeline(w),fa.setBindGroup(0,Ma),fa.draw(6,Jc,0,0)));if(Xe){var vc=
qh(),ig=window.innerWidth/2-vc/2,jg=window.innerHeight/2-vc/2;Qd("bigMap");m("bigMap").style.width=vc/T+"px";m("bigMap").style.height=vc/T+"px";uo(fa,ig,jg,vc,vc,Jc)}vc=Re();ig=l.S;jg=vc?window.innerHeight-ph*T:l.J;uo(fa,ig,jg,ph*T,ph*T,Jc);fa.setPipeline(p);fa.setBindGroup(0,Ga);fa.draw(6,Jc,0,0);fa.setPipeline(r);fa.setBindGroup(0,qa);fa.draw(6,1,0,0);K[278]()&&1!=f.selcolor&&(fa.setPipeline(D),fa.setBindGroup(0,ja),fa.draw(6,Jc,0,0));if(Jc=K[279]())fa.setPipeline(t),fa.setBindGroup(0,Lb),fa.draw(6,
Jc,0,0);k&&(fa.setPipeline(v),fa.setBindGroup(0,vo),fa.draw(6,1,0,0));Pg&&(fa.setPipeline(L),fa.setBindGroup(0,br),fa.draw(6,1,0,0));fa.end();d&&(fa={colorAttachments:[{view:g.getCurrentTexture().createView(),clearValue:{r:.1,g:.1,b:.1,a:1},loadOp:"clear",storeOp:"store"}]},fa=ka.beginRenderPass(fa),fa.setPipeline(C),fa.setBindGroup(0,wo),fa.draw(6,1,0,0),fa.end());Fe.update&&Fe(1);e.queue.submit([ka.finish()]);B.m&&Kk();Date.now();requestAnimationFrame(a)}sd=K[148]();var b=parseInt(f.fogRefresh);
Uj=3==b&&sd;Y=b=parseFloat(f.antialiasing2)||1;var c=Math.round(parseInt(f.pixelDensity1))/100||window.devicePixelRatio;Y*=c;al=c;var d=1<b;b=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!b||534773760>b.limits.maxStorageBufferBindingSize)U=!1,F||(Wo(),f.webgl=2,K[109](612,ma,!!window.indexedDB,Math.floor(Math.random()*2**32),U,Ha));else{var e=await b.requestDevice({requiredLimits:{maxStorageBufferBindingSize:534773760,maxBufferSize:534773760}});e.addEventListener("uncapturederror",
ka=>{Oa(ka.error.message);f.webgl=2;m("alert")||Ua(`<span style="font-size:14px">${ka.error.message.substr(0,550)}</span>`,"Error")});Qf=e;b=Jg;al&&(Jg.style.width="100%");c=window.innerHeight;b.width=Math.round(window.innerWidth*al);b.height=Math.round(c*al);var g=b.getContext("webgpu"),h=navigator.gpu.getPreferredCanvasFormat();g.configure({device:e,format:h,Jc:"opaque"});var k=n[8];b=await fetch("nehhon/obs.wgsl");b=await b.text();b=e.createShaderModule({code:b});var p=e.createRenderPipeline({layout:"auto",
vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}}),t=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,
blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/trn.wgsl")).text();b=e.createShaderModule({code:b});var r=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,
blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/mmap2.wgsl")).text();b=e.createShaderModule({code:b});var u=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h}]},primitive:{topology:"triangle-list"},
depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});if(k){b=await Zj("br.wgsl");b=e.createShaderModule({code:b});var v=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",
format:"depth24plus"}});b=await Zj("brM.wgsl");b=e.createShaderModule({code:b});var x=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"always",format:"depth24plus"}})}b=await (await fetch("nehhon/mmap.wgsl")).text();
b=e.createShaderModule({code:b});var y=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth24plus"}});if(sd){b=await fetch("nehhon/"+`fog${2==sd?"2":
"0"}${Uj&&2==sd?"u":"n"}.wgsl`);b=await b.text();b=e.createShaderModule({code:b});var z=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"one",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"one",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await fetch("nehhon/obsfog.wgsl");
b=await b.text();if(Uj){b=e.createShaderModule({code:b});var w=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"one"},alpha:{operation:"max",srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"always",format:"depth24plus"}})}b=await fetch("nehhon/mtop.wgsl");b=await b.text();b=e.createShaderModule({code:b});
var A=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}})}b=await fetch("nehhon/"+(1==f.selectionCircle?"obs2c.wgsl":"obs2.wgsl"));
b=await b.text();b=e.createShaderModule({code:b});var D=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth24plus"}});if(d){b=await (await fetch("nehhon/post.wgsl")).text();
b=e.createShaderModule({code:b});var C=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h}]},primitive:{topology:"triangle-list"}})}b=await (await fetch("nehhon/rect.wgsl")).text();b=e.createShaderModule({code:b});var L=e.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:h,blend:{color:{operation:"add",srcFactor:"src-alpha",
dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});cj=e.createBuffer({size:534773760,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});oj=e.createBuffer({size:32*K[90](),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});nj=e.createBuffer({size:24576,usage:GPUBufferUsage.STORAGE|
GPUBufferUsage.COPY_DST,mappedAtCreation:!1});jj=e.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});bi=e.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});kj=e.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Of=e.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});bj=e.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|
GPUBufferUsage.COPY_DST,mappedAtCreation:!1});lj=e.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});vk[0]=1/Rc;Qf.queue.writeBuffer(lj,0,vk);k&&(dj=e.createBuffer({size:32,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1}));gk();b=K[47]();window.addEventListener("resize",gk,!1);aj=$i=Math.round(b**2/5);ej=e.createBuffer({size:48*$i,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});
fj=e.createBuffer({size:48*aj,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});hj=e.createBuffer({size:b*b*12,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});gj=e.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Qf.queue.writeBuffer(bj,0,new Float32Array([T]));Qf.queue.writeBuffer(gj,0,new Uint32Array([b]));ij=e.createBuffer({size:174600,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,
mappedAtCreation:!1});var O=e.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Eg=e.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Qf.queue.writeBuffer(Eg,0,new Float32Array([1,1,1,1]));c=qj(K[33](),1330);var W=e.createBuffer({size:4*c.length,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});(new Float32Array(W.getMappedRange())).set(c);W.unmap();b=b*b*2;b%4&&(b+=2);mk=e.createBuffer({size:b,
usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var ia,za,Ma,Ga,Lb,ja,qa,xo,yo,vo,Wh;mj=()=>{let ka=[{binding:0,resource:{buffer:cj}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:kj}},{binding:2,resource:{buffer:ej}},{binding:3,resource:{buffer:ij}},{binding:4,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:5,buffer:{type:"uniform"},resource:{buffer:O}},{binding:6,resource:{buffer:W}},{binding:7,buffer:{type:"uniform"},resource:{buffer:lj}},
{binding:8,resource:{buffer:nj}},{binding:9,resource:{buffer:oj}},{binding:10,resource:{buffer:gj}},{binding:11,resource:{buffer:Of},buffer:{type:"uniform"}},{binding:12,resource:{buffer:Eg},buffer:{type:"uniform"}},{binding:13,resource:{buffer:bj},buffer:{type:"uniform"}}];Ga=e.createBindGroup({layout:p.getBindGroupLayout(0),entries:ka});ka[2].resource.buffer=fj;Lb=e.createBindGroup({layout:t.getBindGroupLayout(0),entries:ka});ja=e.createBindGroup({layout:D.getBindGroupLayout(0),entries:[{binding:0,
visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:kj}},{binding:1,resource:{buffer:ej}},{binding:2,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:3,buffer:{type:"uniform"},resource:{buffer:O}},{binding:4,buffer:{type:"uniform"},resource:{buffer:lj}},{binding:5,resource:{buffer:oj}},{binding:6,resource:{buffer:gj}}]});qa=e.createBindGroup({layout:r.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:cj}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},
resource:{buffer:kj}},{binding:2,resource:{buffer:hj}},{binding:3,resource:{buffer:ij}},{binding:4,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:5,buffer:{type:"uniform"},resource:{buffer:O}},{binding:6,buffer:{type:"uniform"},resource:{buffer:gj}},{binding:7,buffer:{type:"uniform"},resource:{buffer:lj}},{binding:8,resource:{buffer:Eg},buffer:{type:"uniform"}}]});sd&&(ia=e.createBindGroup({layout:z.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:mk}},{binding:1,visibility:GPUShaderStage.VERTEX,
buffer:{type:"uniform"},resource:{buffer:kj}},{binding:2,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:3,buffer:{type:"uniform"},resource:{buffer:gj}},{binding:4,buffer:{type:"uniform"},resource:{buffer:lj}}]}),Uj&&(Ma=e.createBindGroup({layout:w.getBindGroupLayout(0),entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:kj}},{binding:1,resource:{buffer:ej}},{binding:2,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:3,buffer:{type:"uniform"},
resource:{buffer:O}},{binding:4,buffer:{type:"uniform"},resource:{buffer:lj}},{binding:5,resource:{buffer:nj}},{binding:6,resource:{buffer:oj}}]})),za=e.createBindGroup({layout:A.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:mk}},{binding:1,buffer:{type:"uniform"},resource:{buffer:gj}}]}));xo=e.createBindGroup({layout:u.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:gj}},{binding:1,resource:{buffer:ej}},{binding:2,resource:{buffer:ij}},{binding:3,buffer:{type:"uniform"},
resource:{buffer:O}},{binding:4,resource:{buffer:nj}},{binding:5,buffer:{type:"uniform"},resource:{buffer:Of}},{binding:6,resource:{buffer:oj}}]});k&&(vo=e.createBindGroup({layout:v.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:gj}},{binding:1,buffer:{type:"uniform"},resource:{buffer:O}},{binding:2,buffer:{type:"uniform"},resource:{buffer:lj}},{binding:3,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:4,buffer:{type:"uniform"},resource:{buffer:kj}},{binding:5,
buffer:{type:"uniform"},resource:{buffer:dj}}]}),yo=e.createBindGroup({layout:x.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:gj}},{binding:1,buffer:{type:"uniform"},resource:{buffer:O}},{binding:2,buffer:{type:"uniform"},resource:{buffer:dj}}]}));Wh=e.createBindGroup({layout:y.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:gj}},{binding:1,resource:{buffer:hj}},{binding:2,resource:{buffer:ij}},{binding:3,buffer:{type:"uniform"},
resource:{buffer:O}},{binding:4,buffer:{type:"uniform"},resource:{buffer:lj}},{binding:5,buffer:{type:"uniform"},resource:{buffer:jj}},{binding:6,buffer:{type:"uniform"},resource:{buffer:kj}}]})};mj();bl=b=e.createTexture({size:[Sj,Tj],format:"depth24plus",usage:cl.RENDER_ATTACHMENT});var zk,wo;d&&(el=()=>{zk=e.createTexture({size:[Sj,Tj],format:h,depthStencilFormat:"depth24plus",usage:cl.TEXTURE_BINDING|cl.RENDER_ATTACHMENT});wo=e.createBindGroup({layout:C.getBindGroupLayout(0),entries:[{binding:0,
resource:zk.createView()},{binding:1,resource:e.createSampler({magFilter:"linear",minFilter:"linear",mipmapFilter:"linear",maxAnisotropy:8})},{binding:2,resource:e.createSampler({magFilter:"nearest",minFilter:"nearest"})},{binding:3,buffer:{type:"uniform"},resource:{buffer:lj}}]})},el());var br=e.createBindGroup({layout:L.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:bi}},{binding:1,buffer:{type:"uniform"},resource:{buffer:kj}},{binding:2,buffer:{type:"uniform"},
resource:{buffer:lj}},{binding:3,buffer:{type:"uniform"},resource:{buffer:jj}}]}),yk={colorAttachments:[{view:void 0,clearValue:{r:.1,g:.1,b:.1,a:3==sd?0:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:b.createView(),depthClearValue:0,depthLoadOp:"clear",depthStoreOp:"store"}};dl=yk;var uo=(ka,fa,Jc,vc,ig,jg)=>{ka.setViewport(fa*Y,Jc*Y,vc*Y,ig*Y,0,1);ka.setPipeline(u);ka.setBindGroup(0,xo);ka.draw(6,jg,0,0);ka.setPipeline(y);ka.setBindGroup(0,Wh);ka.draw(6,k?1:sd?1:2,0,0);sd&&(ka.setPipeline(A),
ka.setBindGroup(0,za),ka.draw(6,1,0,2==sd?1:0),k||(ka.setPipeline(y),ka.setBindGroup(0,Wh),ka.draw(6,1,0,1)));k&&(ka.setPipeline(x),ka.setBindGroup(0,yo),ka.draw(6,1,0,0),ka.setPipeline(y),ka.setBindGroup(0,Wh),ka.draw(6,1,0,1));ka.setViewport(0,0,Sj,Tj,0,1)},so=0;Date.now();var to=new Uint32Array(1);requestAnimationFrame(a);b=parseInt(f.fogRefresh)}zc()}var Pf=new Uint32Array(1);function Gl(a,b,c){if(a){a=ge(a,b);for(var d=0;d<b;d++)a[d]=c.charCodeAt(d)}}
if(window.indexedDB&&!ma){var Xo=window.indexedDB.open("nh2019",612),Yo;Xo.onsuccess=function(){Yo=Xo.result;ma||Zo(function(){})};Xo.onupgradeneeded=function(){Yo=Xo.result;try{Yo.objectStoreNames.contains("basic")&&Yo.deleteObjectStore("basic"),Yo.objectStoreNames.contains("maps")||Yo.createObjectStore("maps",{keyPath:"id",autoIncrement:!0}),Yo.objectStoreNames.contains("mapsBlobs")||Yo.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),Yo.objectStoreNames.contains("basic")||Yo.createObjectStore("basic",
{keyPath:"url"})}catch(a){console.error(a)}}}function Uo(a){if(Yo)try{Yo.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){}}catch(b){console.error(b)}}function Zo(a){if(Yo&&!ma)try{var b=Yo.transaction(["basic"],"readonly");b.objectStore("basic").getAllKeys?b.objectStore("basic").getAllKeys().onsuccess=a:a({target:{result:[]}})}catch{}else a({target:{result:[]}})}
window.changeresources=function(a,b,c,d){if(!Q)for(a=[a,b,c,d],b=[Jd,Kd,Ld,Md],c=0;4>c;c++)a[c]==2**31-1&&(a[c]="***"),tj(b[c],a[c]||"0")};var $o,ap,bp=1,cp,dp,Z,ep,fp,gp,hp,ip;
function ve(){if(!m("edsel")){if(m("rules"))return Yd(m("rules").parentNode.parentNode);var a=nd("",2,"",1);a.id="rules";$o=[];var b=[576,jp,637,kp,636,lp];for(var c=0;3>c;c++){var d=H("div",a,"",0<c&&"opacity:0.3;pointer-events:none");N("span",d,b[2*c]);let e=H("div",d);$o[c]=e;H("button",d,"+").onclick=b[2*c+1]}K[220]();a=H("section",a);S(a);ap=a;gp=H("select",a,"","margin-right:25px;display:none");for(b=0;b<mp.length;b+=2)c=document.createElement("option"),d=J(mp[b]),c.textContent=d,gg(c,gp,d),
c.value=b/2;gp.onchange=()=>{let e=parseInt(gp.value);K[223](e);np=e;op[1].children[1].innerHTML=J(mp[2*e])};hp=H("select",a,"","margin-right:25px;display:none");for(b=0;b<pp.length;b+=2)c=document.createElement("option"),d=J(pp[b]),c.textContent=d,gg(c,hp,d),c.value=b/2;hp.onchange=()=>{let e=parseInt(hp.value);K[223](e);np=e;op[2].children[1].innerHTML=J(pp[2*e])};ep=H("span",a);b=H("button",a);b.className="dplbtt";b.onclick=()=>{let e=qp,g=rp[e];K[237](e,1);e?($o[1].innerHTML="",$o[2].innerHTML=
"",K[218](rp[0],0,1)):($o[0].innerHTML="",K[220]());$o[e].children[g].onclick()};b.dataset.title=J(649);b=H("div",a);fp=H("div",b);Z=H("div",b);cp=I("span",a,"height: 31px; display: flex; padding: 0px 10px; padding-top: 10px; margin-top: 10px; border-top: 2px solid #ffffff17; justify-content: space-between; align-items: center");dp=I("input",cp,"height:20px;border-left:2px solid var(--color2);padding-left:8px;background:#ffffff0a");ip=I("span",cp,"display:flex;align-items:center;gap:7px;font-size:12px;color:var(--color1)");
dp.maxLength=40;dp.oninput=()=>{let e=dp.value.substr(0,40).trim(),g=nb(ob);for(let h=0;h<e.length;h++)g[h]=e.charCodeAt(h);op[qp]&&(op[qp].children[0].textContent=e);K[221](e.length,qp)};if($o[0].children[0])$o[0].children[0].onclick()}}var np,sp,tp,up,vp,wp,xp,yp,zp,Ap,Bp,Cp,Ep=a=>{a=mp[2*a+1];ep.innerHTML="";Z.innerHTML="";fp.innerHTML="";Array.isArray(a)?Dp(a,ep,"#ffffff2e"):a()},Fp=a=>{a=pp[2*a+1];ep.innerHTML="";Z.innerHTML="";fp.innerHTML="";Array.isArray(a)?Dp(a,ep,"#ffffff2e"):a()};
window.btmnu=function(a,b,c,d,e,g,h,k,p,t,r,u,v,x,y,z){ep.innerHTML="";np=a;sp=b;tp=d;up=e;vp=g;yp=k;zp=p;Ap=c;wp=t?wc(r,t):[];xp=u?wc(v,u):[];Bp=z;Cp=y;ip.innerHTML="";1==x?(gp.value=a,Yd(gp),H("span",ip,J(640)+" ( ! )"),Me(ip,w=>{Bp=w;Gp()},Bp),H("span",ip,J(639)+" ( || )","margin-left:12px"),Me(ip,w=>{Cp=w;Gp()},Cp),S(hp),Ep(a)):(hp.value=a,Yd(hp),S(gp),Fp(a))};var Hp,Ip;window.untProps=function(a,b,c){Hp=J(a);Ip=[b,c]};
function Dp(a,b,c,d){for(let e=0;e<a.length;e+=2){let g=N("button",b,a[e]),h=a[e+1];g.onclick=()=>{Z.innerHTML="";b==ep&&(fp.innerHTML="");h();b!=ep&&(d?Ap=e/2:sp=e/2,Gp());for(let k of b.children)k.style.cssText="";g.style.background=c;g.style.opacity=1};if(!e&&b==ep)g.onclick()}}function Jp(a){let b=H("div",te);b.id="edsel";let c=m("rules").parentNode.parentNode;S(c);m("content");N("button",b,112).onclick=()=>{Yd(c);G(b);a()}}var Kp;
function Lp(a){a=a?xp:wp;Kp.innerHTML="";for(let b of a){let c=b;K[226](b);let d=H("div",Kp,Hp+` <span style="color:var(--color1)">(${Ip[0]+","+Ip[1]})</span>`,"color:#dedede;line-height:19px;padding:4px 0px;font-size:13px;border-bottom:1px solid #ffffff1f");a=H("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{K[228](c);G(d)};H("button",d,"\ud83d\udc41\ufe0f","margin:0px 10px;padding:1px;float:right;background:#ff00ff29;").onclick=()=>{K[229](c);Jp(()=>K[225](2))}}}
window.ruresize=function(){m("rules")&&(P(m("rules")),bp=1)};function Mp(a,b){a=Np(a,b?zp?1:0:yp?1:0,[625,619],c=>{b?zp=c:yp=c});a.style.marginLeft=0;a.style.fontSize="12px";return a}
function Op(a,b){K[234](a);let c=I("div",Z,"display:flex;justify-content:flex-start;align-items:center;gap:30px");Kp=H("div",c,"","padding:10px;height:141px;overflow:auto;width:250px;box-shadow:rgb(0 0 0 / 45%) 0px 0px 10px inset;margin-right:-19px");Lp(a);N("button",c,624,"height:161px;width:93px;font-size:11px").onclick=()=>Pp(a);b||(b=I("div",c),H("span",b,J(618)+": ","font-size:14px;color:#a99557"),Mp(b,a))}window.updIDS=function(a,b,c,d){wp=b?wc(a,b):[];xp=d?wc(c,d):[]};
function Pp(a){let b=H("div",te);b.id="edsel";let c=m("rules").parentNode.parentNode;S(c);N("button",b,24,"background:#04ff0036").onclick=()=>K[225](1);N("button",b,535,"background:#ff000036").onclick=()=>K[225](0);N("button",b,112).onclick=()=>{Yd(c);K[225](2);G(b);Lp(a)};K[227]()}function Gp(){K[230](np,sp,Ap,tp,up,yp,zp,vp,Bp,Cp)}function Qp(a){let b=I("div",Z);b.className="centerrule";a&&Np(b,yp?1:0,[625,619],c=>{yp=c});N("span",b,643,"opacity:0.6")}
function ze(a){a=H("select",a,"","font-size:12px");let b=[625,626,58,59];for(var c=0;c<b.length;c++)N("option",a,b[c]).value=c;for(let d=0,e=K[90]();d<e;d++)if(K[196](d),!X.mb){c=J(X.name)+" ("+dc[X.race]+")";let g=document.createElement("option");g.value=d+b.length;g.textContent=c;gg(g,a,c)}return a}
function Rp(a,b){let c=ze(Z);c.value=b?zp:yp;c.onclick=()=>{b?zp=parseInt(c.value):yp=parseInt(c.value);Gp()};if(!a){let d=H("select",Z,"","margin-left:5px;font-size:18px;");H("option",d,">").value=0;H("option",d,"<").value=1;d.value=up;d.onclick=()=>{up=parseInt(d.value);Gp()};let e=H("input",Z,"","padding:3px;margin-left:5px;width:57px;font-size:18px");e.type="number";e.min=0;e.value=tp;e.onchange=()=>{tp=parseInt(e.value);Gp()}}H("div",Z,J(6)+":","margin:3px;margin-top:9px;font-size:8px");Sp(0,
b)}function Tp(a,b,c){let d=Me(a,()=>{e.style.visibility=d.checked?"":"hidden";e.value=d.checked?0:-2147483647;e.onchange()},-2147483647!=b),e=Wa(a,b,()=>c(De(e)),"number","transition:none;width:90px;margin-right:24px",2147483647,-2147483647);-2147483647==b&&(e.style.visibility="hidden")}function Up(){H("span",Z,J(635)+": ");Np(Z,up,[">=","<=","="],a=>up=a)}
function Vp(){let a=Ap<2**24,b=Np(Z,Ap-2**24,Wp(),d=>Ap=2**24+d);Me(Z,()=>{Ap<2**24?(S(c),Ap=2**24,b.value=0,Yd(b)):(S(b),Yd(c),Ap=0);c.value=Ap},a).style.marginBottom="-10px";let c=Wa(Z,Ap,()=>{Ap=De(c);Gp()},"number","margin:10px;height:23px;width:90px");a?S(b):S(c)}function Wp(){let a=[];for(let b=0;16>b;b++)a[b]=J(687)+"-"+(b+1);return a}function Xp(){Np(Z,zp,Wp(),a=>zp=a)}function Yp(a,b){let c=b?zp:yp;Ee(d=>{b?zp=d:yp=d;Gp()},a||Z,1).value=c}
function Ee(a,b,c){let d=H("select",b||Z);b=0;for(let g=K[28]();b<g;b++){var e=b?fe(ge(K[111](b),20)):J(23);H("option",d,e).value=b}N("option",d,22).value=2147483647;c&&(N("option",d,642).value=2147483646);d.onclick=()=>a(De(d));return d}
function Ae(a){let b=I("div",a,"height:unset;min-height:61px");b.className="kcheck";let c=[];for(let g=0,h=K[28]();g<h;g++){var d=g?fe(ge(K[111](g),20)):J(23);let k=H("div",b),p=Me(k,()=>0,!0);c.put(p);H("div",k,d,"word-break:break-all")}var e=g=>{for(let h of c)if(g){if(!h.checked)h.onclick()}else if(h.checked)h.onclick()};a=I("div",a,"display:flex;justify-content:flex-end;margin-top:13px");N("button",a,622,"margin-right:10px;color:#9e8d57").onclick=()=>e(1);N("button",a,623,"color:#9e8d57").onclick=
()=>e(0);return c}function Zp(a,b,c){let d=2147483647==c;(a.ra=c)&&!d||kg(a,-28);d&&(a.style.visibility="hidden");a.onclick=()=>{a.ra=!a.ra;kg(a,a.ra?0:-28);K[243](b,a.ra)}}
function Sp(a,b){var c=H("div",Z);c.className="kcheck";let d=[],e=K[28]();var g=H("div",c),h=Me(g,p=>{K[224](e,p,b)},K[231](e,b));d.put(h);N("div",g,642);for(let p=a||0,t=K[28]();p<t;p++)a=p?fe(ge(K[111](p),20)):J(23),g=H("div",c),h=Me(g,r=>{K[224](p,r,b)},K[231](p,b)),d.put(h),H("div",g,a,"word-break:break-all");var k=p=>{for(let t of d)if(p){if(!t.checked)t.onclick()}else if(t.checked)t.onclick()};c=I("div",Z,"display:flex;justify-content:flex-end;margin-top:13px");N("button",c,622,"margin-right:10px;color:#9e8d57").onclick=
()=>k(1);N("button",c,623,"color:#9e8d57").onclick=()=>k(0)}var $p;function Fi(a,b,c,d){let e=I("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];if(!g)continue;let h=document.createElement("option");h.textContent=g;gg(h,e,g);h.value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b}
function Be(a,b,c,d){let e=I("select",a,"font-size:12px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];0<=g?N("option",e,g).value=a:H("option",e,g).value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b;return e}function Np(a,b,c,d){let e=I("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];0<=g?N("option",e,g).value=a:H("option",e,g).value=a}e.onchange=()=>{d(parseInt(e.value));Gp()};e.value=b;return e}function aq(){Np(Z,zp,[646,645],a=>zp=a)}
function bq(a){$p=H("div",Z);$p.id="ruleprop";K[235](a)}function cq(a,b,c){H("span",Z,J(635)+": ");let d=I("select",Z,"font-size:21px;padding:0px;margin-bottom:12px;margin-left:7px");b=b?[">=","<=","="]:["=","+","\u2212","\u00d7","\u00f7"];for(let e=0;e<b.length;e++)H("option",d,b[e]).value=e;d.onchange=()=>{c?zp=De(d):up=De(d);Gp()};d.value=c?zp:up;a||bq(0)}
function dq(){N("button",Z,616,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;").onclick=()=>{K[232](1);Jp(()=>{vp=K[232](0);Z.innerHTML="";dq()})};let a=N("button",Z,617,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;"+(vp?"background:#ff37ff1a":"opacity:0.5"));vp&&(a.onclick=()=>{K[233](1);Jp(()=>K[232](0))})}function eq(a,b){fp.innerHTML="";Dp(a,fp,"#00ff0026",b);fp.children[b?Ap:sp].onclick()}
var fq=()=>eq([616,Op,620,Rp,642,()=>Qp(1)]),gq=()=>eq([616,()=>Op(0,1),620,()=>Rp(1,0,1),642,Qp]);function gg(a,b,c,d){d&&(c="0"+c);a.kc=c;for(let e of b.children)if(e.kc>c){b.insertBefore(a,e);return}b.append(a)}
function hq(a){let b=I("div",Z);b.className="tchgrid";a&&(a=Mp(Z),a.style.display="",a.style.marginBottom="0px",b.style.cssText="height:136px;margin-right:20px");a=K[90]();let c=yc(K[242](a),a);for(let g=0;g<a;g++){var d=K[191](g,0,0,1);if(d){let h=c[g],k=document.createElement("div");var e=J(K[89](g));gg(k,b,e,h);H("div",k,e);e=H("div",k);kg(e,d);e.className="dataOrder";d=I("div",k,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");Me(d,p=>K[243](g,p),h)}}}
var mp=[608,[612,fq,614,dq],634,[612,fq,482,function(){let a=H("div",Z,"","display:flex;justify-content:center;align-items:center;height:100%;gap:5px"),b=H("input",a,"","width:68px;font-size:23px");b.type="number";b.min=0;b.value=vp;b.onchange=()=>{vp=parseInt(b.value);Gp()};H("span",a,"m")},631,()=>eq([612,()=>Op(1),620,()=>Rp(1,1)],1)],652,[612,fq,653,function(){Np(Z,vp,[658,659,660,661,662],a=>vp=a)},631,()=>eq([620,()=>Rp(1,1),612,()=>Op(1)],1)],605,fq,607,fq,668,[62,function(){Up();let a=I("div",
Z,"display:flex;align-items:center;gap:7px"),b=yc(K[242](4),4);for(let c=0;4>c;c++)td(a,c),Tp(a,b[c],d=>K[243](c,d))},6,()=>Sp(1)],594,()=>Sp(1),593,()=>Sp(1),679,function(){Np(Z,up,[">","<"],b=>up=b);let a=Wa(Z,tp,()=>{tp=De(a);Gp()},"number","width:150px");H("span",Z,"ms")},680,()=>Sp(1,0),685,[612,()=>eq([620,()=>Rp(1),616,Op,642,()=>Qp(0)]),656,()=>eq([620,()=>Rp(1,1),616,()=>Op(1,1),642,()=>Qp(0)],1)],683,[612,()=>eq([616,Op,620,Rp,642,()=>Qp(1),6,()=>Sp(1)]),687,function(){Xp();Np(Z,vp,[">",
"<","="],a=>vp=a);Vp()}],684,[612,fq,630,()=>cq(0,1,1)],692,[6,()=>Sp(1),616,()=>hq(1)],871,[687,function(){let a=I("div",Z,"display:flex;align-items:center;gap:7px");Fi(a,vp,ng(1),c=>{vp=c;Gp()});Np(a,up,[">=","<=","="],c=>up=c);let b=I("input",a,"width:70px");b.type="number";b.onchange=()=>{yp=De(b);Gp()};b.value=yp},6,()=>Sp(1)],122,[6,()=>Sp(1)]],pp=[602,[612,function(){var a=H("div",Z,"","display:flex;justify-content:center;flex-direction:column;gap:18px");K[196](up);let b=H("button",a,J(X.name),
"height: 48px; background: url(nehhon/iconunits.webp) no-repeat, #00000042; width: max-content; padding-left: 60px;padding-right:12px;outline:1px solid #ffffff0d");kg(b,K[193](up));b.onclick=()=>{Qe(e=>{up=e;Gp();K[196](e);b.innerHTML=J(X.name);kg(b,K[193](e))})};let c=H("div",a,J(629)+":"),d=H("input",c,"","margin-top:10px;padding:3px;margin-left:5px;width:60px;");d.type="number";d.min=0;d.value=tp;d.onchange=()=>{tp=parseInt(d.value);Gp()};a=H("div",a,J(6)+": ");Yp(a)},630,()=>bq(1),628,()=>eq([614,
dq,620,()=>Rp(1,1,1),612,()=>Op(0,1),642,Qp])],592,[612,()=>eq([620,()=>Rp(1,0,1),612,()=>Op(0,1),642,Qp]),627,function(){var a=H("div",Z);let b=H("select",a);a=[632,408,7,664,665,666,674,418,633,243,376,245,412,244,246,415,414,416,282,368,371,814,813,265,413,379,367,373,731,437,410];for(let c=0;c<a.length;c++){let d=document.createElement("option");d.value=c;d.textContent=J(a[c]);gg(d,b,J(a[c]))}b.value=up;b.onclick=()=>{up=parseInt(b.value);Gp()}},631,()=>eq([614,dq,620,()=>Rp(1,1,1),612,()=>Op(1,
1),642,Qp],1)],598,[612,gq,630,()=>eq([644,cq,470,aq],1)],586,gq,580,gq,587,gq,582,[612,gq,6,()=>Yp(0,1)],594,()=>Sp(1,0),593,()=>Sp(1,0),597,[65,function(){K[241](0,1);let a=Wa(Z,ne,()=>{var b=a;let c=nb(ob);for(let d=0;d<b.value.length;d++)c[d]=b.value.charCodeAt(d);q(a.value.length);K[241](a.value.length)},"text","width:500px");a.placeholder=J(65)},6,()=>Sp(1,0)],667,[629,function(){cq(1);let a=I("div",Z,"margin-top:15px;display:flex;align-items:center;gap:7px"),b=yc(K[242](4),4);for(let c=0;4>
c;c++)td(a,c),Tp(a,b[c],d=>K[243](c,d))},6,()=>Sp(1,0)],681,[612,()=>eq([616,()=>Op(0,1),620,()=>Rp(1,0,1),642,Qp,6,()=>Sp(1,0)]),687,function(){Xp();Np(Z,vp,["=","+","\u2212","\u00d7","\u00f7"],a=>vp=a);Vp()}],689,[6,()=>Sp(1),616,hq],694,[616,function(){let a=H("div",Z);a.className="dplr";let b=yc(K[242](7),7);for(let e=0;7>e;e++)Me(a,g=>{let h=a.children[e+7];h.style.visibility=g?"":"hidden";g&&(kg(h,-28),h.ra=0);K[243](e,g?0:2147483647)},2147483647!=b[e]);var c=["shenemies","shview","shcontrol"];
for(var d=0;d<c.length;d++){let e=H("div",a);e.className=c[d];Zp(e,d,b[d])}for(c=0;4>c;c++)d=H("div",a),d.className="shres",td(d,c),Zp(d,c+3,b[c+3])},695,()=>Sp(1,0),696,()=>Sp(1,1)],697,[612,()=>eq([616,()=>Op(0,1),620,()=>Rp(1,0,1),642,Qp]),631,()=>eq([614,dq,620,()=>Rp(1,1,1),612,()=>Op(1,1),642,Qp],1)],870,[687,()=>{let a=I("div",Z,"display:flex;align-items:center;gap:7px");Fi(a,vp,ng(1),c=>{vp=c;Gp()});Np(a,up,["=","+","\u2212","\u00d7","\u00f7"],c=>up=c);let b=I("input",a,"width:70px");b.type=
"number";b.onchange=()=>{yp=De(b);Gp()};b.value=yp},6,()=>Sp(1,0)]],rp=[],op=[],iq=[];
window.shrule=function(a,b,c,d){let e=H("div",Z);var g=I("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");N("span",g,638,"color:#ffe594");let h=I("input",g,"width:40px");h.type="number";h.min=0;h.value=a;H("div",g,"0 =","color:#ffffff70");H("div",g,"&infin;","font-size:31px;margin-top:-1px;margin-left:-7px;color:#ffffff70");h.onchange=()=>K[236](parseInt(h.value),-1,-1);g=I("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");N("span",g,648,
"color:#ffe594");let k=I("input",g,"width:80px");k.type="number";k.min=0;k.value=c;k.onchange=()=>K[236](-1,-1,parseInt(k.value));H("div",g,"ms","color:#ffffff70;margin-left:-6px");g=I("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;opacity:0.4");N("span",g,647,"color:#ffe594");let p=I("input",g,"width:80px");p.type="number";p.min=0;p.value=b;p.onchange=()=>K[236](-1,parseInt(p.value),-1);H("div",g,"ms","color:#ffffff70;margin-left:-6px");H("span",e,J(610)+" ->"+(d?"":
" <span style='color:#989898'>"+J(641)+"<span>"));e.id="cond";iq[0]=H("div",e);iq[1]=H("div",e)};window.shrules=function(a,b,c){b?a=fe(ge(a,b)):a=J(611)+"-"+c;jq(0,c,a)};
window.shevents=function(a,b,c,d,e,g,h,k){b?a=fe(ge(a,b)):a=J(1==e?578:577)+"-"+d;jq(e,d,a,c);1==e&&(b=iq[h],h&&H("span",b,"||","color:var(--color1)"),H("span",b,(g&&"<span style='color:red;margin-right:1px'>!</span>"||"")+a,"color:#"+(g?"ff8585":"85ff85")),h||H("span",b,"&&","color:var(--color1)"),k&&(iq[0].lastChild?iq[0].removeChild(iq[0].lastChild):G(iq[1].children[0])))};window.shactions=function(){};var qp;
function jq(a,b,c,d,e){let g=H("div",$o[a]);g.M=b;let h=H("div",g,c);a&&N("span",g,1==a?mp[2*d]:pp[2*d]);g.onclick=p=>{if(!p||p.target!=k)if(qp=a,op[a]!=g||!a){if(p=op[a])p.style.background="";rp[a]=g.M;op[a]=g;g.style.background="#0028a247";dp.value=h.innerHTML;if(0==a){ap.show();Gb(Z);Gb(fp);Gb(ep);S(hp);S(gp);Gb(ip);for(p=1;3>p;p++){Gb($o[p]);bp&&(m("rules").children[p+1].style.cssText="");let t=op[p];t&&(t.style.background="",op[p]=void 0)}bp=0;K[218](g.M,0)}else p=op[1==a?2:1],op[1==a?2:1]=void 0,
p&&(p.style.background=""),K[222](g.M,a)}};let k=H("button",g,"\u00d7");k.className="closeIcon";k.onclick=()=>{let p=qp;G(g);K[237](a,0,g.M);for(var t=0;3>t;t++){let r=$o[t];for(let u=0;u<r.children.length;u++)r.children[u].M=u}q(rp[0],g.M);t=rp[0]==g.M;if(op[p]==g||t||!$o[0].children.length)if(p&&rp[p]==g.M)op[0].onclick();else if($o[0].children[0])$o[0].children[0].onclick();else S(ap),Gb(Z),Gb($o[1]),Gb($o[2]);else if(t=op[p].M,q(t,p),p)K[218](op[0].M,1),K[222](t,p,1);else K[218](t,1)};e&&(g.onclick(),
dp.oninput())}function jp(){let a=K[217]();jq(0,a,J(611)+"-"+a,0,1)}function kp(){if($o[0].children.length){let a=K[219]();jq(1,a,J(578)+"-"+a,0,1)}}function lp(){if($o[0].children.length){let a=K[219](1);jq(2,a,J(577)+"-"+a,0,1)}}var Q=!1;
function So(a){let b=nd("",1);N("span",b,70,"margin-right:10px");let c=Wa(b,"",void 0,"number","",9999999,0);c.focus();N("button",b,675,"display:block;margin:auto;margin-top:20px").onclick=()=>{let d=K[251](De(c));1==d?(P(b),a()):2==d?(P(b),alert(J(690))):alert(J(688))}}var kq=a=>{U=!1;F||(Wo(),K[109](612,ma,!!window.indexedDB,Math.floor(Math.random()*2**32),U,Ha));Q=!0;Jl(a)};function Lo(a){K[250]()?So(kq):kq(a)}
var lq=[{h:1,id:0,T:[0,2]},{h:3,id:1,T:[0,2]},{h:-1,sa:1,id:2},{h:6,sa:1,id:4,T:[0,2]},{h:5,id:6,T:[0,2]}],Ti;window.guname=(a,b)=>{Ti=a?fe(wc(b,a)):""};function We(a){let b=nb(ob),c=a.length;20<c&&(c=20);for(let d=0;d<c;d++)b[d]=a.charCodeAt(d);q(a);K[268](c)}
var Ce=(a,b,c)=>{var d=c||$p;let e=[];b=K[201](b);d=I("div",d);for(let h=0;h<lq.length;h++){let k=lq[h];if(0==k.id){if(!a[k.id]&&1==b)continue}else if(k.T&&0>k.T.indexOf(b))continue;H("div",d,k.name&&J(k.name),`background:url(nehhon/icons2.webp) 0px ${-20*k.h}px;width:20px;height:20px`);var g=a[k.id];let p=H("div",d),t=H("span",p),r;Me(p,u=>{r.value=u?1:2147483647;if(r.onchange)r.onchange();u?Yd(t):S(t)},2147483647!=g).style.cssText+="float:left;margin-right:5px;margin-top:-1px;";r=H("input",t);2147483647==
g&&S(t);r.type="number";r.value=g;e[k.id]=r;k.sa&&(H("span",t," / ","font-size:21px"),g=H("input",t),g.type="number",g.value=a[k.id+1],e[k.id+1]=g)}for(b=0;b<e.length;b++)e[b]&&(d=e[b],d.max=2147483647,d.min=-1);if(!c)for(c=0;c<a.length;c++)e[c]&&(e[c].onchange=()=>{for(var h=0;h<a.length;h++)e[h]&&(a[h]=parseInt(e[h].value));h=nb(ob);for(let k=0;k<a.length;k++)h[k]=a[k];K[123](2147483647)});return e};window.editProps2=Ce;
var qq=(a,b,c,d,e)=>{q(a,c);0>b&&(b=mq(b));if(!a)return K[202](b);var g=[{h:1,id:0,T:[0,2]},{h:3,id:1,T:[0,2]},{h:-1,sa:1,id:2},{h:6,sa:1,id:4,T:[0,2]},{h:5,id:6,T:[0,2]}];let h;e?h=$p:(h=nd(""),h.className="unitProps",d&&(h.className="unitProps viewonly"),h.parentNode.parentNode.style.position="fixed",h.style.minWidth="300px");let k=[],p;0<c||d||(H("span",h,J(516),"margin-right:15px;color:var(--color1)"),p=nq(h));if(!e){var t=H("button",h);t.className="closeIcon";t.onclick=function(){P(h);if(!d){for(var v=
0;v<a.length;v++)k[v]&&(a[v]=parseInt(k[v].value));if(c){q(a);v=nb(ob);for(let x=0;x<a.length;x++)v[x]=a[x];K[123](c);q(k)}else{if(p.checked)n[oq]&&(n[oq]=0,n.splice(oq+1,7));else{if(!n[oq]){for(v=0;7>v;v++)n.splice(oq+1,0,0);n[oq]=1}q("s",a);for(v=0;7>v;v++)n[oq+1+v]=a[v]}pq(0,n)}}}}b=K[201](b);if(Q&&!e){t=I("div",h,!d&&!e&&"margin-top:14px");N("div",t,747);t=I("div",t,"display:flex;gap:11px");let v;Me(t,x=>{v.style.display=x?"unset":"none";x||(Ti="",K[268](0))},Ti);v=I("input",t,"width:137px");
Ti||S(v);v.maxLength=20;v.onchange=()=>{We(v.value)};v.value=Ti}let r=I("div",h,!d&&!e&&"margin-top:34px");for(t=0;t<g.length;t++){let v=g[t];q(v.id,a[v.id]);if(0==v.id){if(!a[v.id]&&1==b)continue}else if(v.T&&0>v.T.indexOf(b))continue;H("div",r,v.name&&J(v.name),`background:url(nehhon/icons2.webp) 0px ${-20*v.h}px;width:20px;height:20px`);var u=H("div",r);let x=H("input",u);x.type="number";x.value=a[v.id];k[v.id]=x;v.sa&&c&&(H("span",u," / ","font-size:21px"),u=H("input",u),u.type="number",u.value=
a[v.id+1],k[v.id+1]=u)}for(g=0;g<k.length;g++)k[g]&&(b=k[g],d&&(b.disabled=!0),b.max=2147483647,b.min=-1,b.oninput=ti);if(c&&!e){H("span",r);b=H("select",r);for(let v=0,x=K[28]();v<x;v++)g=v?fe(ge(K[111](v),20)):J(23),ha(K[132](v)),H("option",b,g).value=v;H("option",b,J(22)).value=2**31-1;b.value=a[7];k[7]=b}p&&(p.parentNode.style.display="inline",n[oq]||(p.checked=!0,S(r)),p.onclick=function(){p.checked?S(r):r.style.display=""});if(e)for(e=0;e<a.length;e++)k[e]&&(k[e].onchange=()=>{for(var v=0;v<
a.length;v++)k[v]&&(a[v]=parseInt(k[v].value));q(a);v=nb(ob);for(let x=0;x<a.length;x++)v[x]=a[x];K[123](2147483647);q(k)})};window.editProps=qq;function lc(a){m(a)&&(m(a).style.display="none")}function Qd(a){m(a)&&(m(a).style.display="block")}function Le(){let a=nd("",1),b=K[254](),c=I("div",a,"display:flex;align-items:center;gap:8px");N("div",c,516);Me(c,e=>{e?Gb(d):(rq(d),K[252](3));K[254](1,!e)},!b);let d=H("div",a);b&&(rq(d),K[252](3))}
function rq(a){let b=K[28]();sq=I("div",a,`grid-template-columns:repeat(${b},auto)`);sq.className="dpltbl wbak";for(a=0;a<b**2;a++)H("div",sq);sq.children[0].style.height="calc(100% - 12px)"}var tq=[a=>{sq=I("div",a,"margin-top:10px;gap:10px 14px;display:grid;grid-template-columns:auto auto");sq.className="wbak";K[103](2)},a=>{rq(a);K[103](1)}],sq;function Ke(){let a=nd("",1);N("span",a,620,"margin-bottom:5px");let b=K[246]();Be(a,b,[673,672],()=>{b=b?0:1;G(sq);tq[b](a)});tq[b](a)}
window.dpltbl0=function(a,b,c,d){b=fe(ge(b,20));I("div",sq,"padding-left:8px;border-left:2px solid "+ha(c)).textContent=b;let e=Wa(sq,d,()=>{Ne(e);K[105](a,De(e))},"number","width:40px",1E3,0)};function uq(a,b,c,d){let e=sq.children;a.onmouseenter=()=>{e[b].style.background="#ffffff47";e[c*d].style.background="#ffffff47"};a.onmouseout=()=>{e[b].style.background="";e[c*d].style.background=""}}
window.dpltbl=function(a,b,c,d){b=fe(ge(b,20));let e=K[28](),g=nb(ob),h=sq.children;h[a].style.cssText=`align-self:end;writing-mode:vertical-rl;border-top:2px solid ${ha(c)};padding:7px 5px`;h[a*e].style.cssText=`justify-self:end;border-left:2px solid ${ha(c)};padding:5px 7px`;h[a].textContent=b;h[a*e].textContent=b;for(let k=0;k<e-1;k++){let p=k+1;if(3==d){if(p==a)continue;let t=Me(h[a*e+p],()=>{K[245](t.checked,p,a,d)},g[p]);t.style.backgroundPositionX="0px";uq(t,p,a,e)}else if(0==d){if(k>=a-1)break;
let t=0,r=0,u=Me(h[a*e+1+k],()=>{r=1;q(a,k+1,u.checked);K[245](u.checked,a,k+1);if(t)t=0;else v.onclick();r=0},g[k+1]);uq(u,k+1,a,e);let v=Me(h[a+(1+k)*e],()=>{r||(t=1,u.onclick())},g[k+1]);v.style.opacity=.25;uq(v,a,k+1,e)}}};
window.chglmap=function(a,b){F.useProgram(Fg);Oj?(F.uniform1f(F.getUniformLocation(Fg,"mapSize"),2**Math.ceil(Math.log2(a))),F.uniform1f(F.getUniformLocation(Fg,"mapSize2"),a)):F.uniform1f(F.getUniformLocation(Fg,"mapSize"),a);F.useProgram(V);F.uniform1f(F.getUniformLocation(V,"mapSize"),a);F.uniform1f(F.getUniformLocation(V,"zMax"),96*a);b||(K[130](a),Fe())};
window.setupEditorPlayerTable=function(a,b,c,d,e){c=fe(ge(c,20));var g=ha(b);b=Ge;let h=I("input",b,"width:13px");h.type="color";h.value=g;h.onchange=()=>{K[104](a,parseInt(h.value.substr(1),16));ee()};g=H("input",b);g.value=c;g.Ia=a;g.onchange=Mo;for(let p=0;4>p;p++){let t=I("input",b,"width:60px");t.type="number";t.value=e[p];t.onchange=()=>{K[107](a,De(t),p)}}let k=Me(b,()=>K[141](a,100*k.checked+1,0,1),d);H("button",b,"...","padding:3px 8px").onclick=()=>vq(a);c=H("button",b);c.className="closeIcon";
c.onclick=()=>K[126](a)};function wq(){var a=xq.data,b=yq.data,c=m("invrtimg").checked;q(c);var d=255*parseInt(m("rngcnvs").value)/100;for(let e=0;e<a.length;e+=4){let g=(a[e]+a[e+1]+a[e+2])/3;c&&g<d||!c&&g>=d?(b[e]=2,b[e+1]=29,b[e+2]=45):(b[e]=34,b[e+1]=55,b[e+2]=0);b[e+3]=255}m("prevcan").getContext("2d").putImageData(yq,0,0)}var xq,yq;
function nq(a){var b=document.createElement("label");b.className="container";var c=document.createElement("input");c.type="checkbox";c.checked=0;var d=document.createElement("span");d.className="checkmark";b.appendChild(c);b.appendChild(d);a.appendChild(b);return c}function zq(){this.H.innerHTML='<div style="background:url(nehhon/icons2.webp) no-repeat 0px -200px;width:20px;height:20px;display:inline-block;margin-bottom:-6px;"></div>x'+this.value/100}
function qm(){this.H.innerHTML=this.value+"%"}function Aq(){this.H.innerHTML=this.value}function Bq(){this.H.innerHTML=this.value+"m"}function Cq(){this.H.innerHTML=this.value+J(558)}function Dq(){this.H.innerHTML=dd(1E3*parseInt(this.value))}function Eq(){this.H.innerHTML=this.value+"s"}
async function Oe(){let a=new Image;a.src=window.URL.createObjectURL(this.files[0]);await a.decode();var b=K[47](),c=m("mmimg");c.innerHTML="";var d=I("canvas",c,"position: static;margin:28px;display:block;width:291px");d.id="prevcan";var e=H("input",c);e.type="range";e.id="rngcnvs";om(e);e.oninput=function(){this.H.innerHTML=this.value+"%";wq()};e.H.innerHTML="50%";e.value=50;H("span",c,J(458),"margin-left:10px");c=nq(c);c.id="invrtimg";c.onchange=wq;d.width=b;d.height=b;d=d.getContext("2d");d.imageSmoothingEnabled=
!0;d.fillStyle="#fff";d.fillRect(0,0,b,b);c=a.width;e=a.height;var g=b/(c>e?c:e);c=Math.floor(c*g);e=Math.floor(e*g);d.drawImage(a,(b-c)/2,(b-e)/2,c,e);xq=d.getImageData(0,0,b,b);yq=new ImageData(b,b);wq();H("button",m("mmimg"),J(2),"margin-bottom:36px;margin-left:22px").onclick=Fq;URL.revokeObjectURL(a.src)}function Fq(){var a=K[186](),b=K[187](),c=K[47]();c=rj(K[78](1),c*c);var d=yq.data;for(let e=0;e<d.length;e+=4)c[e/4]=2==d[e]?b:a;q(c);K[124]();Fe.update=!0}
function vq(a){let b=nd("",1);b.id="mapPropsXtra";if(K[141](a)){var c=H("div",b);for(let e=0;2>e;e++)Wa(c,K[141](a,0,e),function(){Ne(this);this.value=K[141](a,De(this)+1,e)},"number","",100,e?0:1),N("span",c,[10,34][e])}N("button",b,542,"display:block;margin:auto;margin-bottom:20px").onclick=()=>{K[140](a,1);P(b);vq(a)};N("button",b,12,"display:block;margin:auto").onclick=()=>K[140](a);c=I("div",b,"margin-top:20px");let d=xi();d.unshift({name:J(42),id:4},{name:J(11),id:38});for(let e of d)Wa(c,K[139](a,
e.id),function(){K[139](a,e.id,De(this)+1)},"number"),H("span",c,e.name)}var Ge;function td(a,b){a=H("img",a);a.src="nehhon/"+["gold","wood","food","stone"][b]+".gif";return a}function He(){Gb(Ge);H("button",Ge,"+").onclick=function(a){let b=1;a.shiftKey&&(b=5);a.altKey&&(b=100);for(a=0;a<b;a++)K[114](1)};N("div",Ge,6,"justify-self:baseline");for(let a=0;4>a;a++)td(Ge,a);N("div",Ge,20);H("div",Ge);H("div",Ge);K[103]()}window.editorPlayerTable=He;
function Mo(){var a=17;this.value.length<a&&(a=this.value.length);for(var b=nb(ob),c=0;17>c;c++)b[c]=0;for(c=0;c<a;c++)b[c]=this.value.charCodeAt(c);K[106](this.Ia);Q&&ee()}function Gq(a){Q&&(a.className="onlyrnd",a.dataset.nly="Only random maps")}var To=[];
window.customMapTable=function(a,b,c,d,e,g,h){var k=m("custombody");k=H("tr",k);I("td",k,`background:rgb(${e},${g},${h})`).className="ucolor1";let p=H("td",k,fe(ge(b,20)),d?"color:var(--color1)":"");p.className="username1";To[a-1]=p;K[246]()||(H("td",k,c).className="team1");k.onclick=()=>{for(let t of To)t.style.cssText="";p.style.color="var(--color1)";K[113](a)}};
function $g(a,b,c,d,e){let g;c&&=J(c);if(d){g=document.createElement("div");let h=null;for(let k=0,p=a.children;k<p.length;k++)if(p[k].P>d){h=p[k];break}g.P=d;a.insertBefore(g,h)}else g=H("div",a);g.className=e?"dataOrder":"dataIcon";g.style.backgroundPositionY=b+"px";c&&(g.dataset.title=c);return g}window.stFST=function(a,b,c,d,e){X={race:a,C:b,name:c,priority:d,mb:e}};var X;
window.strrNFO=function(a,b,c,d,e,g,h,k,p,t){if(c=mg[c])for(let r of c)r.innerHTML="",r.hc=a&&!t,r.className=a?"":"blocked",t&&p&&S(r.parentNode),(k||h)&&(d||e)&&(h?e&&1<=g&&(r.innerHTML="..."):r.innerHTML=e?`<span><span>${e}x</span>\u221e</span>`:d,r.className=g?"crnt1":"crnt"),h&&b&&(r.className="invd"),r.ib&&(r.ib.x=b),p&&(r.dataset.x=b,d?r.dataset.loading=d:delete r.dataset.loading,b?r.parentNode.classList.remove("nobdgs"):r.parentNode.classList.add("nobdgs"))};
var Hq=()=>{S(m("supertree").parentNode.parentNode);K[283](0)},og,mg,lg;
window.bldmn2=function(a,b,c){2<c&&(c=0);lg=1;var d=nd("",1);d.id="supertree";d.children[0].onclick=Hq;mg=[];hg=[];var e=H("div",d),g=yc(a,b);let h=0,k=[];a=[10,79,64];let p=[10,79,64];for(d={10:0,79:1,64:2};h<b;){let u=g[h++],v={id:u,C:g[h++],name:g[h++],race:g[h++],type:g[h++],Jb:g[h++],order:g[h++],Ic:{}};v.Kb=g.slice(h+1,g[h]+h+1);h+=g[h]+1;v.Zc=g.slice(h+1,g[h]+h+1);h+=g[h]+1;v.ec=g.slice(h+1,g[h]+h+1);h+=g[h]+1;k[u]=v}b=(u,v,x,y,z,w)=>{let A=H("button",v);kg(A,48*x);A.onmouseenter=()=>{K[282](y,
0,u,K[112](),0,0,1);Hd.innerHTML&&(Hd.className="tree",Hd.style.cssText="");document.body.append(Hd);let D=A.getBoundingClientRect(),C=Hd.getBoundingClientRect();Hd.style.top=D.y+60+"px";Hd.style.left=D.x-C.width/2+24+"px"};A.onmouseout=D=>{Hd.innerHTML="";Hd.className="";S(Hd);m("content").append(Hd);if(1!=D){for(let C of hg)C.classList.remove("mrkd"),C.classList.remove("mrkd1");hg.length=0}};A.onmousedown=D=>{if(A.hc&&(K[15](0,D.button,y,z),A.onmouseout(1),w)){let C=k[p[u]],L=mg[C.order];if(C.x||
!L)Hq(),Xh(D,1);else for(let O of L)O.classList.contains("mrkd")||(w.parentNode.classList.add("mrkd"),O.classList.add("mrkd"),setTimeout(()=>{w.parentNode.classList.remove("mrkd");O.classList.remove("mrkd")},2E3))}};mg[y]||(mg[y]=[]);mg[y].put(A);return A};let t=I("div",e,"display:flex;justify-content: center;gap:22px"),r=H("div",e);c=a[c];gl(a,c);a=[a[0],c,a[1]];for(c=0;3>c;c++){e=a[c];g=k[e];let u=d[e],v=H("button",H("span",t));kg(v,48*g.Jb);v.className="dataOrder";let x=H("div",r);v.parentNode.onclick=
()=>{for(let y of r.children)S(y);for(let y of t.children)y.style.opacity=".3";x.style.cssText="";v.parentNode.style.opacity="";og=u};g.jb=x;for(let y of k)if(0<=y.ec.indexOf(e)){g=document.createElement("div");g.className="menuord";gg(g,x,-y.Kb.length);b(u,g,y.Jb,y.order,e,v).ib=y;y.jb=H("div",g);y.jb.className="menuord";for(let z of y.Kb)K[260](z),g=b(u,y.jb,dg.icon,z,y.id),2147483647!=dg.Tb&&(g.ib=k[dg.Tb])}Hb&&1!=c&&S(v.parentNode)}t.children[1].onclick();K[283](1)};
window.bldmnu2=function(){if(m("supertree"))m("supertree").parentNode.parentNode.style.cssText="",K[283](1);else K[281]()};var Iq;
function Qe(a,b){let c=ui();var d=H("table",c);if(b){N("thead",d,763);b=H("td",H("tbody",d));b.className="s3race";b.colSpan=4;var e=nb(Iq);for(let k=0;k<e.length;k++){K[196](e[k]);if(!(k%3)){let p=[];var g=H("div",b);g.dataset.title=J(X.name);g.Ub=p;g.onclick=()=>{a(-1-k,p);P(c)}}var h=X.C;g.Ub.put(h);$g(g,h,0,X.priority)}}e=H("thead",d);g=H("tbody",d);b=H("tbody",d);H("div",d,J(60),"text-transform:uppercase;padding:11px;padding-top:23px;color:#0f0");d=H("td",H("tbody",d),"","border:none");d.colSpan=
4;c.id="selObj";for(h=0;4>h;h++)H("td",g),H("td",b),H("td",e,dc[h]);e=K[90]();for(let k=0;k<e;k++){K[196](k);let p=K[194](k,1);h=X.race;let t=g.children[h];p||(p=K[194](k,0,1),t=b.children[h]);p||(p=K[194](k,0,0,1),t=d);p&&($g(t,p,X.name,X.priority).onclick=()=>{a(k,p);P(c)})}}var Jq;function Kq(a,b,c){a=H("div",a);b=b?2==b?J(22):qd(0,K[29](b)):J(23);a.dataset.selplayer=b;a.onclick=Lq;a.mc=c}var Mq;
function Lq(){this.innerHTML="";let a=H("div",this);H("div",a,J(23)).Wa=0;H("div",a,J(22)).Wa=2;Mq=a;document.addEventListener("mouseup",Nq,{once:!0})}function Nq(a){a=a.target;void 0!=a.Wa&&(q(a.parentNode.parentNode),a.parentNode.parentNode.mc(a.Wa),a.parentNode.parentNode.dataset.selplayer=a.innerHTML);G(Mq)}var Oq,Pq;function Qq(){let a=De(nl[21]);Pq.innerHTML=J(510)+": "+dd(1E3*(De(nl[24])*(a-1)+a*De(nl[8])*60))}
function Rq(a,b){return`<span>=</span> ${a}\u00d7${b}\u00b2/256\u00b2 <span>=</span> <span style="font-size:12px;font-family:'nh18';color:var(--color1);">${Math.round(a*b**2/65536)||1}</span>`}function Sq(){var a=parseInt(this.value);if(0>a||!a)this.value=a=0;9999<a&&(this.value=a=9999);n[this.$]=a;if(this.Ua){a=n[0];let b=n[this.$];this.Ua.innerHTML=n[this.$+3]?Rq(b,a):"";this.Ua.Vb=b}}function Tq(a){n.push(1,1,a,10,0);pq(0,n)}function Uq(a){n.push(1,0,a,1,0);pq(0,n)}
function mq(a,b){b||=0;return nb(Iq)[-(a+1)+b]}var oq;
function pq(a,b){Iq=new uc(K[197](),48);nb(Iq);Jq.innerHTML="";Oq.innerHTML="";for(var c=47;c<b.length;c+=5){let k=c;var d=b[k],e=b[k+1];let p=b[k+2],t=b[k+3],r=b[k+4],u=1==e;var g=H("tr",u?Oq:Jq);let v=H("td",g);var h=H("div",v,"",r&&"background-color:#ff00ff17 !important");h.className="sett2";if(r||!a)h.onclick=()=>{oq=k+4;qq(r?b.slice(k+5,k+5+7):0,p,0,a)};let x;if(0<=p)K[196](p),x=$g(v,X.C,X.name);else for(x=H("div",v),x.className="dataIcon3",K[196](mq(p)),x.dataset.title=J(X.name),h=0;3>h;h++){let z=
H("div",x),w=mq(p,h);K[196](w);z.style.backgroundPositionY=X.C+"px"}a||(x.onclick=()=>Qe((z,w)=>{var A=x,D=k+2;q(w);if(0>z){A.className="dataIcon3";tj(A,"");for(let C=0;3>C;C++)H("div",A).style.backgroundPositionY=w[C]+"px"}else A.className="dataIcon",tj(A,""),A.style.backgroundPositionY=w+"px";A.dataset.title=J(K[89](0>z?mq(z):z));b[D]=z;q(z,A,b,D)},u));H("span",v,"\u00d7");let y=H("input",v);y.value=d;y.type="number";y.$=k;y.oninput=Sq;y.onchange=Sq;if(u)e=ih(H("td",g,"","text-align:left"),t),e.$=
k+3,e.max=35,e.style.width="116px",e.H.style.width="36px",e.oninput=function(){this.H.innerHTML=this.value+"m"},e.oninput(),e.onchange=Sq;else{let z=nq(H("td",g));z.checked=t;d=H("td",g);d.className="finalRes";y.Ua=d;y.onchange();z.onchange=()=>{b[k+3]=z.checked?1:0;y.onchange()};a?(e=e?2==e?J(22):void 0:J(23),H("td",g,e,"font-size:13px;text-align:center")):Kq(H("td",g),e,w=>b[k+1]=w)}r&&(c+=7);a||(g=H("div",H("td",g)),g.className="closeIcon",g.onclick=()=>{b.splice(k,5+(r?7:0));pq(0,b)})}a||(c=H("div",
H("td",H("tr",Oq))),c.className="sum",c.onclick=()=>Qe(Tq,1),c=H("div",H("td",H("tr",Jq))),c.className="sum",c.onclick=()=>Qe(Uq))}function Vq(a){return`<td>${a||""}</td>`}function Wq(){for(let a of Xq)if(a.id&&ra[a.id]!=n[a.id])return!0;return!1}
function Yq(a){var b=Xq,c=Wq();let d=H("div",a);for(let e of b){if(e.Ma){0==d.children.length&&G(d);d=H("div",a);continue}if(!e.id){H("div",d,"","margin-top:20px");H("div",d);continue}b=Zq(e.title,e.type,d);"input"==e.type&&(b.type="number");void 0!=e.min&&(b.min=e.min);e.max&&(b.max=e.max);e.step&&(b.step=e.step);e.oninput&&(b.oninput=e.oninput,b.oninput());e.h&&(H("img",b.parentNode,"","margin-right:3px",1).src="nehhon/"+e.h);e.options&&$q(e.options,b);e.vb&&(b.style.cssText=e.vb);e.Ha&&H("span",
b.parentNode,e.Ha,"margin-left:4px;margin-right:10px",1);e.id&&ar(e.id,b);let g=ra[e.id];if(29==e.id)g+="m";else if(35<=e.id&&38>=e.id)g+="s";else continue;H("div",b.parentNode,J(516)+" -> "+g)}return c}function ti(){Ne(this)}function Ne(a){var b=parseInt(a.min),c=parseInt(a.value);c>parseInt(a.max)?a.value=a.max:c<b?a.value=a.min:c||(a.value=0)}
function ue(){for(var a="",b=0,c=jb.length;b<c;b++){var d=jb[b];var e=b==K[97]()?"selected":"";a+=`<option value="${b}" ${e}>${d.name}</option>`}return a}function rl(a,b,c){var d=B.l?Fl+El:K[28]()-1;if(0>=d)return a;if(b){if(80>Math.PI*a/d)return a=Math.round(80*d/Math.PI),B.l||Xa(Dg(J(25),a),"#d2bf61"),a}else if(b=13100*Math.PI*c**2/(5625*Math.PI),a**2/d<b)return a=Math.round(Math.sqrt(b*d)),B.l||Xa(Dg(J(25),a),"#d2bf61"),a;return a}
window.updtrr=function(){zc(function(){K[122]();Fe.update=!0;K[121]();ae()})};var Re=()=>"1"==f.menud&&"true"==f.theme&&!Q;function cr(){var a=n;for(let b=0;b<nl.length;b++){let c=nl[b];c&&("checkbox"==c.type?c.checked=a[b]:c.value=a[b],"range"==c.type&&c.oninput&&c.oninput(),c.onchange||(c.onchange=ti))}}
var dr,er,Xq=[{id:42,title:523,type:1},{id:17,title:395,type:1},{id:20,title:491,type:1},{id:40,title:508,type:1},{id:43,title:651,type:1},{id:44,title:869,type:1},{id:45,title:877,type:1},{Ma:1},{id:29,title:494,type:2,oninput:Bq,max:256,min:1,vb:"width:167px"},{Ma:1},{id:39,title:504,type:1},{id:33,title:501,type:2,oninput:zq,min:0,max:200,step:25},{id:32,title:500,oninput:zq,type:2,min:0,max:200,step:25},{id:31,title:499,oninput:zq,type:2,min:0,max:200,step:25},{id:34,title:71,oninput:function(){this.H.innerHTML=
"x"+this.value/100},type:2,min:100,max:500,step:100},{Ma:1},{id:41,title:511,type:2,oninput:Aq,min:10,max:1E3,step:10},{Ma:1},{title:502,id:35,h:"gold.gif",type:2,oninput:Eq,min:1,max:30},{id:36,h:"wood.gif",type:2,oninput:Eq,min:1,max:30},{id:37,h:"food1.webp",type:2,oninput:Eq,min:1,max:30},{id:38,h:"stone.gif",type:2,oninput:Eq,min:1,max:30},{},{id:30,title:495,type:"select",options:[89,496,497,498],Ha:"\u25bc"},{id:25,h:"gold.gif",type:"input",max:5E4},{id:26,h:"wood.gif",type:"input",max:5E4},
{id:27,h:"food.gif",type:"input",max:5E4},{id:28,h:"stone.gif",type:"input",max:5E4}],fr;function gr(){var a=m("prstnpt").value,b=!hr[a];hr[a]=ml();f.presets4=JSON.stringify(hr);b&&ir(a,hr,fr)}
function ir(a,b,c,d){let e=H("span",c);H("button",e,(d?"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714</span> ":"")+a,"color:var(--color1);margin-bottom:20px").onclick=()=>{n=b[a].slice(0);dr.checked=0<n[8];dr.onclick();er.checked=Wq();er.onchange(5);cr();pq(0,n);nl[30].onchange();Qq();m("prstnpt").value=a};d||(H("button",e,"\ud83d\udfa9","color:red;font-size:14px;line-height:14px;width:18px;background:#ff00002b;padding:0px;border-radius:0px").onclick=()=>{confirm(J(713))&&(hr[a]=void 0,
f.presets4=JSON.stringify(hr),G(e))})}var hr;function Zq(a,b,c){H("div",c,a&&J(a)||"");a=H("div",c);return b?1===b?nq(a):2==b?ih(a):H(b,a):a}function $q(a,b){for(let c=0;c<a.length;c++)H("option",b,J(a[c])).value=c}function Me(a,b,c,d){let e=H("div",a,"","",d);e.className="check2";c&&(e.checked=c,e.style.backgroundPositionY="0");e.onclick=()=>{e.checked=!e.checked;e.style.backgroundPositionY=e.checked?"0":"";b(e.checked)};return e}var nl;function ar(a,b){nl[a]=b;b.$=a}
function Ie(a){(a=5===a)&&m("mapconfiguration")&&P(m("mapconfiguration"));if(m("mapconfiguration"))m("mapconfiguration").parentNode.parentNode.style.display="table";else{var b=nd("");b.id="mapconfiguration";nl=[];a&&(m("mapconfiguration").className="viewonly");var c=H("button",b);c.className="closeIcon";var d=H("div",b);d.id="mainconf";if(!Q){var e=H("div",d,"","");for(var g=0;4>g;g++){H("img",e).src="nehhon/"+["gold","wood","food","stone"][g]+".gif";var h=H("input",e);ar(1+g,h);h.min=-1E9;h.max=
1E9;h.step=100;h.type="number"}}if(Q){var k=H("div",d);Gq(k)}g=H("div",d);e=Zq(1,"input",g);e.step=32;e.min=96;e.max=2048;e.type="number";ar(0,e);e.onchange=function(){var C=De(this)||0;this.value=C=Q?C:rl(C,nl[16].checked,De(nl[29]));let L=document.getElementsByClassName("finalRes");for(let O of L)O.innerHTML&&(O.innerHTML=Rq(O.Vb,C));n[0]=C;Ne(this)};e=Zq(26,"select",g);ar(6,e);for(h=0;h<jb.length;h++)H("option",e,jb[h].name).value=h;e=Zq(27,"select",Q?k:g);ar(7,e);$q([28,29,30,31,32,33,525,524],
e);e=Zq(35,"select",g);ar(12,e);$q([36,37,38,39],e);g=H("div",d);e=Zq(398,"select",g);ar(19,e);$q([399,400,401],e);Q||(e=Zq(11,"input",g),ar(9,e),e.type="number",e=Zq(42,"input",g),ar(10,e),e.type="number",e.min=100,e.max=5E4);e=Zq(396,2,g);e.oninput=Cq;ar(18,e);e.style.width="150px";Q||(g=H("div",d));e=Zq(394,1,Q?k:g);ar(16,e);e=Zq(393,2,Q?k:g);ar(15,e);e.oninput=qm;e.style.width="150px";Q&&k.parentNode.appendChild(k);Q||(H("div",g,"","min-height:0px"),e=H("div",g,"","min-height:0px"),e.className=
"diffnfo",e.innerHTML='easy<span style="width:14px"></span>normal<span style="width:14px"></span>hard<span style="width:25px"></span>legend',e=Zq(10,2,g),e.oninput=qm,ar(11,e),e.style.width="150px",e.min=15,e.max=150,e=Zq(34,2,g),e.oninput=qm,ar(13,e),e.style.width="150px");N("button",b,737,"padding: 12px 15px;\n    width:max-content;\n    background: #fbd45c1c;\n    color:var(--color1);\n    box-shadow:0px 0px 20px #000;\n    border:1px solid rgb(243 205 90 / 8%);\n    margin-bottom: 18px;\n    font-size: 16px;\n    margin-top:-23px;\n    ").onclick=
()=>Je(a);d=H("div",b);d.id="br";let r=H("div",d);dr=Zq(484,1,r);dr.checked=0<n[8];r.children[0].style.color="var(--color1)";let u=Zq(487,"select",r);ar(5,u);$q([489,720,509],u);let v=Zq(485,2,r);v.min=1;v.max=60;v.oninput=Cq;ar(8,v);let x=Zq(490,"input",r);x.step=10;x.min=1;x.max=8E4;x.type="number";ar(22,x);let y=Zq(486,2,r);y.min=0;y.max=3600;y.step=30;y.oninput=Dq;ar(14,y);let z=Zq(488,2,r);z.min=1;z.max=25;z.oninput=Aq;ar(21,z);let w=Zq(492,2,r);w.min=0;w.max=100;w.oninput=Bq;ar(23,w);let A=
Zq(493,"input",r);A.step=10;A.min=0;A.max=600;A.type="number";ar(24,A);H("span",A.parentNode,"s");A.style.width="50px";A.addEventListener("input",Qq);v.addEventListener("input",Qq);z.addEventListener("input",Qq);H("div",r);H("div",r);H("div",r);Pq=H("div",r,"","font-size:11px;color:#ffffff4d;line-height:0px;margin-top:11px;text-align:right");dr.onclick=function(){this.checked?(z.value=3,y.value=600,x.value=55,v.value=3,w.value=4,u.value=1,A.value=15,z.oninput(),y.oninput(),v.oninput(),v.min=1,w.oninput(),
Qq()):(z.value=0,y.value=0,x.value=0,v.min=0,u.value=0,v.value=0,w.value=0,A.value=0);for(let C=2;C<r.children.length;C++){let L=r.children[C];this.checked?L.show():S(L)}};dr.onclick();a&&(dr.onclick=void 0,dr.disabled=!0);d=H("div",b);d.id="advconf";H("span",d,J(503),"margin-right:9px");er=nq(d);let D=H("div",d);er.checked=Yq(D);er.onchange=function(C){if(er.checked)D.style.cssText="";else if(S(D),5!=C){for(let O of Xq)if(O.id){C=nl[O.id];var L=ra[O.id];"checkbox"==C.type?C.checked=!!L:C.value=L;
if(nl[O.id].oninput)nl[O.id].oninput()}nl[30].onchange()}};er.onchange(5);a&&(er.onchange=void 0,er.disabled=!0);d=H("div",b);d.id="rndtable";k=H("table",d);Gq(k);e=H("table",d);Gq(e);H("thead",e,`<td colspan=5>${J(481)}</td>`);H("thead",e,Vq()+`<td colspan=2>${J(483)}</td>`+Vq(J(6)));Jq=H("tbody",e);H("thead",k,`<td colspan=3>${J(480)}</td>`);H("thead",k,Vq()+Vq(J(482)));Oq=H("tbody",k);Oq.id="stobjs";if(!a){e=H("div",b,"","margin-top:42px;margin-bottom:-17px;max-width: 1287px;");e.id="presets";
hr=k=f.presets4?JSON.parse(f.presets4):{};fr=b=H("span",e,`<span style="color:#907d44;font-size:13px;">${J(460)}:</span>`);for(var p in xa)ir(p,xa,b,1);for(var t in k)ir(t,k,b);p=H("span",e);let C=H("input",p,"","width:144px;font-size:12px;color:#ffd75d85");C.id="prstnpt";C.value="custom preset"+(Object.keys(k).length+1);t=H("button",p,J(8));t.onclick=gr;t.Gc=b;H("button",p,J(879)).onclick=()=>{let L=new Blob([new Int32Array(n)],{type:"application/octet-binary"});cg(L,C.value+".tzcnf")};H("button",
p,J(832)).onclick=()=>{Oo(L=>{n=Array.from(new Int32Array(L.target.result));P(m("mapconfiguration"));Ie()})}}cr();pq(a,n);dr.checked&&Qq();a||(nl[30].onchange=function(){for(let C=0;4>C;C++)nl[25+C].parentNode.style.display=0<this.value?"unset":"none"},nl[30].onchange());c.onclick=a?function(){P(m("mapconfiguration"))}:function(){if(B.l)ql();else if(Q){ml();pl();P(m("mapconfiguration"));return}m("mapconfiguration").parentNode.parentNode.style.display="none"};if(a){for(c=0;c<nl.length;c++)nl[c]&&(nl[c].disabled=
!0);c=d.getElementsByTagName("input");for(p=0;p<c.length;p++)c[p].disabled=!0}}}function tj(a,b){a.innerHTML!=b&&(a.innerHTML=b)}function Gb(a){a.innerHTML=""}function De(a){return parseInt(a.value)}function jr(a,b,c){a=H("button",a);a.className="closeIcon";a.onclick=c?function(){S(this.parentNode.parentNode.parentNode)}:b?function(){P(this.parentNode);location.hash="";setTimeout(vg,200)}:function(){P(this.parentNode)}}
function ro(){var a=nd("",2);a.id="Settings";if(1==f.sid){var b=H("div",a);let k=H("input",b);k.type="number";H("button",b,"ban").onclick=function(){confirm()&&E(37,gn(parseInt(k.value)))};let p=H("input",b);p.type="number";H("button",b,"panic").onclick=function(){confirm()&&E(47,Xl(parseInt(p.value)))};H("input",b).type="number";H("button",b,"vrsn").onclick=function(){confirm()&&E(46)};var c=H("div",b);let t=H("input",c);t.type="number";t.placeholder="04";let r=I("input",c,"margin-left:5px");r.type=
"number";H("button",b,"HRD").onclick=function(){if(confirm()){var z=new Uint8Array(6);z[1]=De(t);Kb(z,2,De(r));E(49,z)}};H("button",b,"RE-HRD").onclick=function(){confirm()&&E(50)};H("button",b,"RE-BAN").onclick=function(){confirm()&&E(38)};c=H("div",b);let u=H("input",c);u.placeholder="msg 1s";u.type="number";let v=H("input",c);v.placeholder="connections";v.type="number";let x=H("input",c);x.placeholder="bandwidth";x.type="number";H("button",b,"RATE").onclick=function(){if(confirm()){var z=new Uint8Array(13);
Kb(z,1,De(u)||2147483647);Kb(z,5,De(v)||2147483647);Kb(z,9,De(x)||2147483647);E(59,z)}};H("button",b,"cr io").onclick=function(){confirm()&&E(67,Xl(3))};H("button",b,"cr vita").onclick=function(){confirm()&&E(67,Xl(4))};H("button",b,"cr dota").onclick=function(){confirm()&&E(67,Xl(1))};H("button",b,"cr ranked").onclick=function(){confirm()&&E(67,Xl(2))};H("div",b);let y=H("input",b);y.type="number";H("button",b,"dbg").onclick=function(){alert(3);E(68,Xl(parseInt(y.value)))}}b=H("div",a);N("span",
b,15);f.sid?(c=I("div",b,"text-align:left"),H("span",c,f.name,"color:#0f0"),N("span",c,0,"margin-left:5px;color:#f0f;font-size:10px !important")):(c=H("input",b),c.maxLength=17,c.value=String(l.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),c.onchange=kr,c.ya="name",c.spellcheck=!1);N("span",b,103);c=H("select",b);for(var d=0;3>d;d++)H("option",c,dc[d]).value=d;c.value=f.civi||0;c.onchange=function(){f.civi=this.value};N("span",b,14);c=H("input",b);c.type="color";c.value=l.color;
c.onchange=kr;c.ya="color";c.style.backgroundColor=l.color;N("span",b,718);c=H("select",b);d="en English es Espa\u00f1ol it Italiano pt Portugu\u00eas pl Polski cz \u010ce\u0161tina de Deutsch ru \u0420\u0443\u0441\u0441\u043a\u0438\u0439 bg \u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 ro Romanian".split(" ");for(let k=0;k<d.length;k+=2)H("option",c,d[k+1]).value=d[k];c.value=l.xa;c.onchange=function(){f.language=this.value;location.reload()};N("span",b,539);b=H("div",b);var e=H("div",b,
"","cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*f.CCID+"px");let g=I("div",b,"max-height:256px;overflow:auto;width:265px;margin-top:5px;display:flex;flex-wrap:wrap;gap:11px");e.onclick=function(){g.innerHTML="";for(let k=0;k<cn.length;k++)I("div",g,"cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*k+"px").onclick=()=>{f.CCID=k;e.style.backgroundPositionX=21*-k+"px";g.innerHTML=""}};e.onchange=
function(){f.CCID=this.value};b=H("div",a);N("span",b,569);c=H("select",b);H("option",c,"WebGL 1").value=1;H("option",c,"WebGL 2").value=2;navigator.gpu&&(H("option",c,"WebGPU").value=3);c.value=U?3:Oj?1:2;c.onchange=function(){f.webgl=this.value;location.reload()};N("span",b,568);a=H("select",b);c=["No","SSAA 2x"];for(d=0;2>d;d++)H("option",a,c[d]).value=d+1;a.value=f.antialiasing2;a.onchange=function(){f.antialiasing2=this.value};N("span",b,540);c=H("select",b);for(a=0;4>a;a++)N("option",c,570+
a).value=a;c.value=f.fogRefresh;c.onchange=function(){f.fogRefresh=this.value};N("span",b,889);Me(b,k=>{f.selectionCircle=k?1:0},1==f.selectionCircle);N("span",b,878);Me(b,k=>{f.hlffps=k?1:0},1==f.hlffps);N("span",b,719);Me(b,k=>{f.shadows=k},"true"==f.shadows);N("span",b,534);Me(b,k=>{f.nodecals=k?0:1},1!=f.nodecals);N("span",b,459);Me(b,k=>{f.theme=k},"true"==f.theme);N("span",b,43);Me(b,k=>{f.fullscreen=k},"true"==f.fullscreen);window.SharedArrayBuffer&&(N("span",b,567),Me(b,k=>{f.multithreading=
k},"true"==f.multithreading));N("span",b,541);a=H("div",b);let h=H("input",a);h.type="range";h.max=200*window.devicePixelRatio;h.min=25;h.value=f.pixelDensity1||100*window.devicePixelRatio;om(h);h.oninput=function(){this.H.innerHTML=this.value+"%"};h.onchange=function(){f.pixelDensity1=this.value};h.oninput();h.style.width="96px";N("button",a,542).onclick=()=>{h.value=100*window.devicePixelRatio;h.onchange();h.oninput()};N("span",b,887);a=H("div",b);c=H("input",a);c.type="range";c.max=300;c.min=25;
c.step=5;c.value=f.UIscale;om(c);c.oninput=function(){this.H.innerHTML=this.value+"%"};c.onchange=function(){f.UIscale=this.value;Bl()};c.oninput(1);c.style.width="96px"}function Ub(a,b,c,d){let e=H("div",document.body);e.className="fwindow2";a=H("div",H("div",e),a,c);b&&jr(a,2==b,d);return a}function nd(a,b,c,d){let e=H("div",document.body);e.className="fwindow";a=H("div",H("div",e),a,c);b&&jr(a,2==b,d);return a}
function zo(){var a=nd("",2);a.id="aboutd";var b=H("div",a);I("div",b,"background-repeat:no-repeat;height:124px;background-position:center;margin-bottom:16px").className="svgnehhon";H("p",b,"Graphics and sounds are property of Haemimont Games");b=H("a",b);b.href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url";b.target="_blank";I("img",b,"margin:19px 0px").src="nehhon/donate.gif";b=H("div",a);H("div",b,"Contact:","margin-bottom:20px");let c=H("a",b,"info@tza.red");
c.href="mailto:info@tza.red";c.target="_blank";H("p",b);b=H("a",b,"@TzaredGame");b.href="https://twitter.com/TzaredGame";b.target="_blank";a=H("div",a);H("div",a,"Special thanks to","margin-bottom:20px");b=H("a",H("p",a),"CRAZYGAMES.COM");b.href="https://www.crazygames.com/c/io";b.target="_blank";I("img",a,"max-width:241px").src="nehhon/cloudflare.svg";I("img",a,"max-width:171px;display:block;margin:31px auto").src="nehhon/fini.png";H("p",a,"&");b='<a href="https://www.youtube.com/MayorceteGamingTV" target="_blank">Mayorcete</a>;Penetrenko;Remi Sluz;David Grau;PuppedToy;Ismael Carvajal;Alvaro Lopez;Gaboal;Nanyo Nanev;Miguel Rexi;Daniel Matos;Mikel Iglesias;Cristian Vargas;Debra Stokes;Irene;Edgaras;Hekas;<a href="https://soundcloud.com/diemiurgo" target="_blank" rel="noopener noreferrer">Diemiurgo</a>;<a href="https://www.youtube.com/user/rainheart666787" target="_blank" rel="noopener noreferrer">Sharp Rain</a>;Johannes Feulner;Marco Adorni;Eric Brown;Tommaso Bruno;PRG;Julian Kazior;JotaVilla;Francesco Castelli;FT21;Manolo;Mikhail;Witold;Michael (Macca);Vanilla Ice;Marcinm;Kurnaq;Gator;Pikachu;Sebaastian;Luca;Edward;Juan;Ivan;Marcel;Olmo;WMLS;Daniel Petkov;Zach Brock;MiTrAnDiR;Mariusz;Jose Manuel;Maria;Atanas;\u0141ukasz;Cristian;Wochnik;German;Power Supersport;Xoordis;Lorenzo'.split(";");
a=I("div",a,"display:flex;flex-wrap:wrap;max-width:527px;gap:5px 11px;justify-content:center");for(let d of b)H("span",a,d,"padding: 2px 4px; border: solid #ffffff54; border-top: 0px; border-bottom: 0px; }")}function kr(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.ya&&(a=Sn(a));if(a||"name"!=this.ya)l[this.ya]=a,f[this.ya]=a,Gl(K[53](rm()),17,f.name)}
if(ma){let a=H("button",m("index"));a.onclick=()=>{window.close()};a.style.cssText="z-index:1;position:fixed;top:-10px;right:-29px;font-size:45px;text-shadow: none;font-family: none;background: #7e0000;box-shadow: 0px 0px 20px #000;transform: rotate(45deg);   width: 87px;    height: 46px;";a.innerHTML="+"}m("rnd0").onclick=function(){location.hash="RandomMap"};m("sett").onclick=function(){location.hash="Settings"};let lr=document.getElementsByTagName("head")[0],mr=document.createElement("link");
mr.rel="stylesheet";mr.type="text/css";mr.href=l.Na+"b.css?v=612";mr.media="all";lr.appendChild(mr);function nr(){this.j="move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha decal".split(" ")}nr.prototype.index=function(a){return this.j.indexOf(a)};f.lastVersion=612;var le=new nr;mb();var or={0:"euro",1:"arab",2:"asia"};function pr(a,b){const c=b.length,d=a.length;var e=0;a:for(;e<c;e++){for(var g=0;g<d;g++)if(b[e+g]!==a[g])continue a;return e}return!1}function Pe(){q(this.files);var a=new FileReader;a.onload=function(){qr(this.result)};a.readAsArrayBuffer(this.files[0])}
function qr(a){let b=rr(a);a={grass:0,summer:4,deset:2,snow:3}[b.zc];q(a);var c=nb(ob);let d=b.wa.length+1;for(var e=0;e<d;e++)c[e]=0;e=1;for(let g of b.wa){for(let h=0;h<d;h++)c[h+e*d]=g.bc[h];e++}q(c.slice(0,d*d));K[211](b.wa.length,a,b.Gb);zc(function(){K[122]();Fe.update=!0;K[121]();ae();var g=rj(K[78](),b.Gb**2);for(var h=0;h<g.length;h++)g[h]=b.yc[h];q(g);sm(sr);K[124](1);Fe.update=!0;g=1;for(var k of b.wa){h=nb(ob);for(let p=0;p<k.name.length;p++)h[p]=k.name.charCodeAt(p);K[213](g,k.color[0],
k.color[1],k.color[2],k.IA,k.race,k.resGold,k.resFood,k.resWood,k.resStone,k.name.length);g++}ee();Rf();for(let p of b.La)if(k=p.kingdom,10==k&&(k=0),9==k&&(k=2**31-1),g=tr[p.type+256*p.race],51==g&&23==p.WW&&(g=46),51==g&&q(p),void 0!=g)K[212](g,k,p.x32,p.y32,p.d,p.attack,p.defence,p.health,p.maxHealth,p.level,p.mana,p.xx21);ie(b.name,0);ie(b.description,1);ie(b.Yb,2);P(m("mapPropsWindow"))})}
function ur(a){const b=a.length,c=new Uint16Array(a.length);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function vr(a,b){return pr(ur(a),b)+a.length}function wr(a,b){a+=String.fromCharCode(0);return pr(ur(a),b)}function xr(a,b,c){var d="";for(b+=a;a<b&&c[a];a++)d+=String.fromCharCode(c[a]);return d}
function rr(a){a=new Uint8Array(a);var b=pr([50,109,122,116],a)+6,c=a[b]+256*a[b+1],d=a[b+2]+(a[b+3]<<8)+(a[b+4]<<16);q("mapx:",c,"units",d);q("header",a[vr(".header",a)],"description",a[vr(".description",a)],"kingdominfo",a[vr(".kingdominfo",a)],"diplomacy",a[vr(".diplomacy",a)],"forbidden.upgrades",a[vr(".forbidden.upgrades",a)],"tiles",a[vr(".tiles",a)]);q(a);var e=2*c;b={};b.Gb=c;b.Tc=c;b.qb=!1;c="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 xx22".split(" ");
var g="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 resource".split(" "),h=e/2,k=20480+2*h*h,p={};h=0;for(var t=a.length;h<t;h++){var r=a[h];p[r]||(p[r]=[]);p[r].push(h)}p=[];var u={56:!0,58:!0,88:!0,72:!0};q(a.slice(k));h=k+1;for(t=a.length;h<t;h++)if(r=a[h],u[r]&&u[a[h+4]]){k={};r=72!==r?c:g;var v=h-8;let w=v;k.i2=v;for(var x=0,y=r.length;x<y;x++){var z=
r[x];"kingdom"==z||"race"==z||"xx21"==z||"xx22"==z?(k[z]=a[v],v++):(k[z]=a[v]+256*a[v+1],v+=2)}h+=v-w-8;p.push(k)}b.La=p;b.La.length>d&&(b.La.length=d);d=b.La;c=e/2;u=[];g=0;k=[];v=r=a[vr(".forbidden.upgrades",a)]+1;t=r*=512;for(h=a.length;t<h;t+=2){y=a[t];x=~~(t/512);for(p=8;p<c&&a[p+t]===(y+p/4)%256;p+=4);20<p&&(t=512*x,1==u.length&&(t=512*(x-(2-(x-v)%2))),p=a.slice(r,t),r-t&&(u[g++]=[r,t],k.push(p)),t+=512,2==u.length&&(t-=512),r=t)}u[g++]=[r,a.length];k={64:[u[0]],96:[u[0]],128:[u[0]],192:[u[1],
u[0],u[2],u[3]],256:[u[1],u[0],u[2],u[3]],384:[u[1],u[0],u[2],u[3],u[4],u[5],u[6]],512:[u[1],u[0],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9]]}[c];q(u);u=new Uint8Array(c*c);r=new Uint8Array(c*c);sr=new Uint8Array(c*c);p=g=0;for(v=k.length;p<v;p++)if(h=k[p],g<c*c)for(t=h[0],h=h[1];t<h;t+=2)u[g]=a[t],r[g]=a[t+1],sr[g]=r[g]%8,8<=r[g]&&d.push({race:0,type:7,d:~~(r[g]/8)-1,x32:g%c,y32:~~(g/c)}),g++;yr(u,e);yr(r,e);b.yc=u;d=(e="grass",wr("grass",a))||(e="summer",wr("summer",a))||(e="desert",wr("desert",a))||
(e="snow",wr("snow",a));c=xr(512*(a[vr(".description",a)]-1),512,a);b.description=c;b.Yb=xr(d-64,64,a);b.name=xr(d-128,64,a);b.zc=e;for(e=pr([192,4],a)+50;!a[e];)e++;d="name tzar active resGold resStone resFood resWood x6 race x8 x9 x10 x11 x12 x13 x14 AI x16 x17 x18 x19 x20".split(" ");c=d.length;g=[];t=[[41,115,255],[231,0,0],[57,115,16],[231,0,231],[255,255,0],[0,181,181],[255,156,33],[90,90,90]];q("kingdoms:",e);b.Bc={0:0,9:0,10:0};for(p=0;8>p;p++){u={color:t[p]};for(k=0;k<c;k++)if(r=d[k],"name"==
r||"tzar"==r){for(u[r]="";!a[e];)e++;for(h=e+32;a[e];)u[r]+=String.fromCharCode(a[e]),e++;e=h}else u[r]=a[e]+(a[e+1]<<8)+(a[e+2]<<16)+(a[e+3]<<24),"race"==r&&(u[r]=a[e],u.racestr=or[a[e]-1]),e+=4;g.push(u);b.Bc[p+1]=g.length;1<g.length&&(u.IA=1);u.resources=[u.resGold,u.resWood,u.resFood,u.resStone];u.race--}q(g);b.wa=g;e=b.wa;d=512*(a[vr(".diplomacy",a)]-1);c=e.length;for(g=0;g<c;g++)if(h=[0],e[g])for(e[g].bc=h,t=1;9>t;t++)e[t-1]&&(p=a[d],p=60>p&&t-1!=g?1:0,h.push(p)),d+=4;else d+=32;q(b);return b}
function yr(a,b){if(a&&a.length){b/=2;var c=~~(a.length/b);if(b){for(var d=document.createElement("canvas"),e=d.getContext("2d"),g=new ImageData(b,c),h=g.data,k=0,p=h.length;k<p;k+=4){var t=a[k/4];h[k]=t;h[k+1]=t;h[k+2]=t;h[k+3]=255}d.width=b;d.height=c;e.putImageData(g,0,0);document.body.appendChild(d)}}}
var sr,tr={7:7,15:78,16:77,19:37,20:39,21:38,22:131,23:73,24:75,25:76,27:59,28:58,30:132,31:40,32:130,36:60,38:42,39:55,40:32,41:44,42:56,43:57,61:45,62:13,63:20,64:35,72:43,110:27,133:36,136:74,257:10,258:61,259:0,260:4,261:3,262:6,263:1,264:19,67:51,267:8,270:2,273:5,274:9,300:12,301:14,302:15,303:23,304:30,305:25,306:28,307:18,308:34,309:33,310:41,311:11,312:17,314:26,315:29,316:16,321:24,322:31,513:79,514:90,515:80,516:81,517:83,519:82,522:85,529:89,530:87,541:91,545:86,547:84,556:63,557:102,
558:93,559:95,560:100,561:99,562:103,563:94,564:104,565:101,566:96,568:109,570:97,571:98,572:107,577:108,578:92,581:110,583:106,769:64,771:66,772:67,773:68,778:69,780:128,781:65,785:129,786:127,802:70,805:72,812:62,813:71,814:112,815:114,816:119,817:118,818:121,819:113,820:122,821:120,822:115,824:126,826:116,827:117,828:124,833:125,834:111,838:123,76:21,78:22};
