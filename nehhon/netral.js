var aa,ba,da={},fa=NaN,f=window.localStorage;function ia(a,b){void 0===f[a]&&(f[a]=b)}ia("name","Guest"+~~(1E3*Math.random()));ia("color","#0000bd");ia("flag","eu");var k={name:f.name,color:f.color};function ja(){}const ka=-1<navigator.userAgent.toLowerCase().indexOf(" electron/");var na=0,oa=(a,b)=>{ka&&window.ipcRender&&window.ipcRender.dscd&&window.ipcRender.dscd([a,b])};if(ka){var pa=a=>{na=a;window.ipcRender&&window.ipcRender.fullScreen&&window.ipcRender.fullScreen(a)};oa("Main menu");pa(0)}
function l(a){return document.getElementById(a)||NaN}window.gid=l;ka&&(aa=location.search.substring(1,location.search.length),ba=parseInt(aa.replaceAll(".","")),115<=ba&&ia("webgl",3));void 0===f.fullscreen&&(f.fullscreen=!0);var n;const qa=[256,5E3,5E3,5E3,5E3,0,0,0,0,500,400,40,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,20,0,21,1,0,20,0,22,1,0,1,1,-4,0,0,12,1,-1,10,0,6,1,-7,14,0,1,1,21,20,0,1,1,22,20,0,4,1,55,24,0,3,2,43,1,0,5,0,234,1,0,15,0,88,1,0];
let ra=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,0,21,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,44,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0],sa=ra.slice(0);sa[0]=192;
let ta=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,1,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,494094,17,0,21,1,1,0,0,1E4,8E3,0,0,0,17,0,22,1,1,0,0,1E4,8E3,0,0,0,1,1,-4,0,0,20,1,-1,11,0,6,1,56,16,0,2,1,21,20,1,0,0,16E3,8E3,0,0,0,2,1,22,20,1,0,0,16E3,8E3,0,0,0,50,0,88,1,0,10,0,248,1,0,7,0,223,1,1,15,0,25,25,0,0,0,7,0,225,1,1,15,0,25,25,0,0,0,12,0,230,1,1,0,0,25,25,200,100,0,1,2,234,0,1,75,5,1E3,70,0,0,0],ua=[256,1500,1500,1500,1500,0,0,1,3,800,800,100,2,100,
450,25,1,0,0,0,0,2,1E3,8,90,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,55,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0];
var va={Default:qa,"Deiv 1500":ra,"PRO - Wolno\u015b\u0107":ta,"Battle Royale":[156,100,50,50,50,1,0,0,1,100,100,80,2,100,30,20,0,0,0,0,0,4,20,4,30,0,0,0,0,16,0,100,100,100,100,7,7,18,7,0,1,100,0,0,0,0,299123,1,1,69,0,1,7,0,100,75,100,0,0,1,1,224,2,0,1,1,233,3,0,1,1,223,3,0,2,0,235,1,0,5,0,236,1,0,5,0,237,1,0,5,0,238,1,0,5,0,239,1,0,10,0,221,1,0,10,0,222,1,0,10,0,242,1,0,30,0,226,1,0,15,0,228,1,0,10,0,230,1,0,15,0,229,1,0,1,2,44,1,0,1,1,244,4,0,1,1,222,4,0,50,2,80,1,0,50,2,66,1,0,50,2,0,1,0,50,2,
4,1,0,4,1,13,6,1,0,0,1,2E3,0,0,0],BRx4:ua,Diesel:[256,1500,1500,1500,1500,0,0,0,0,500,400,80,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,8,0,4,1,-31,16,0,12,1,-10,11,0,2,1,21,21,0,2,1,22,21,0,4,1,44,8,0,15,0,88,1,0],Classic:[256,400,400,400,400,0,0,0,0,1,200,80,2,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,12,0,21,1,0,12,0,22,1,0,1,1,-4,0,0,3,1,-1,6,0,1,1,21,15,0,1,1,22,15,0,
3,1,32,10,0,15,0,88,1,0]};let xa=ra.slice(0);xa[42]=1;xa[7]=7;xa[47]=34;let ya=ra.slice(0);ya[16]=1;ya[15]=80;ya[47]=37;ya[52]=37;ya[77]=3;ya[72]=3;let za=ra.slice(0);za[8]=3;za[5]=1;za[14]=1800;za[21]=5;za[22]=55;za[23]=4;za[24]=15;let Ca=za.slice(0);Ca[14]=3600;var Da=[ra,sa,ua,xa,ya,za,Ca,ta,ra,va["Battle Royale"]];function Ea(){a:for(let a in va){let b=va[a];if(b.length==n.length){for(let c=1;c<b.length;c++)if(6!=c&&46!=c&&(n[8]||14!=c&&21!=c&&22!=c)&&b[c]!=n[c])continue a;return a}}}
function Fa(){try{n=f.mapConfig4&&JSON.parse(f.mapConfig4)||qa}catch{n=qa}}Fa();"true"==f.nightcycle&&(f.nightcycle=1);"true"==f.deathsounds&&(f.deathsounds=1);"true"==f.zoomPointer&&(f.zoomPointer=1);"true"==f.unlimitedZoom&&(f.unlimitedZoom=1);"true"==f.stdcolors&&(f.stdcolors=1);"true"==f.scrollmouse&&(f.scrollmouse=1);ia("favMusic",0);ia("musicRange",75);ia("soundRange",100);ia("nplayed",0);ia("UIscale",100);ia("zoomMult",50);ia("scrollSpeed",50);ia("menuOpacity",75);ia("visits",0);
ia("shadows",!0);ia("multithreading",!0);ia("deathsounds",1);ia("quality",1);ia("antialiasing2",1);ia("fogRefresh",2);ia("zoomPointer",1);ia("hlffps",0);ia("selectionCircle",1);ia("unlimitedZoom",1);ia("theme",!0);ia("scrollmouse",1);f.visits++;var p;console.log=()=>{};console.trace=()=>{};p=()=>{};var Ga=window[atob("bG9jYXRpb24=")];"dHphLnJlZA=="===btoa(Ga[atob("aG9zdG5hbWU=")])||ka||(Ga[atob("aHJlZg==")]=atob("aHR0cHM6Ly90emEucmVk"));window.ms=p;
const Ha=window.SharedArrayBuffer&&("true"==f.multithreading||!f.multithreading);var Ja=document.createElement("script");Ja.src="nehhon/"+(Ha?"em2.js":"em.js")+"?v=576";document.body.appendChild(Ja);var Ka,La={};
function Ma(a){Oa();if(La[a]){if(La[a]++,10<La[a])return}else La[a]=1;B&&B.getExtension("WEBGL_debug_renderer_info");var b=(D.now&&D.now()||0)/1E3,c=~~(b/60)%60,d=~~(b/3600);b=~~(b%60);1===(b+"").length&&(b="0"+b);10>c&&(c="0"+c);a=[a,D.l,d+":"+c+":"+b,Ha?1:0,E&&E[67]()?1:0,G?3:Pa?1:2,k.name,H.host?1:0,Qa];for(b=0;b<a.length;b++)a[b]||(a[b]=0),a[b].replaceAll&&(a[b]=a[b].replaceAll(",",".|"));I(15,Ra(" "+a.join(",")))}var Sa={};function Ta(a){Sa[a]||(Sa[a]=1,Ma(a))}window.fstdD=Ta;var Ua=0;
window.addEventListener("error",function(a){a=a.error&&a.error.stack?a.error.message+"-"+a.error.stack:a.lineno+":"+a.colno+" "+a.message;B&&B.getExtension("WEBGL_debug_renderer_info");"0:0 Script error."==a&&Ua++;4<Ua&&"0:0 Script error."==a||Ma(a);D.o&&Va(`<span style="font-size:14px">${a.substr(0,550)}</span>`,"Error")});function J(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function K(a,b,c,d,e){a=document.createElement(a);e?b.prepend(a):b.appendChild(a);void 0!=c&&(a.innerHTML=c);d&&(a.style.cssText=d);return a}function Wa(a,b){var c=document.createElement("div");a.appendChild(c);void 0!=b&&(c.textContent=b);c.style.cssText="color:#81ff81"}function Xa(a,b,c,d,e,g,h){a=M("input",a,e);a.value=b;a.onchange=c;void 0!=g&&(a.max=g);a.type=d||"text";void 0!=h&&(a.min=h);return a}
function Ya(a,b){l("notifybar")&&J(l("notifybar"));K("div",document.body,a,b&&`color:${b}`||"").id="notifybar";setTimeout(J,6E3,l("notifybar"))}function Za(a){a=parseInt(a.substr(1),16);return[a>>16&255,a>>8&255,a&255]}var $a=location,ab=0<=navigator.userAgent.indexOf(" OPR/"),bb="undefined"!==typeof InstallTrigger,cb=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),db=!!document.documentMode,eb=!db&&!!window.Na,fb=window.chrome,gb;
ab?gb="Opera":bb?gb="Firefox":cb?gb="Safari":db?gb="IE":eb?gb="Edge":fb&&(gb="Chrome");fb||ka||Ya("Partially supported browser, use Chrome/Opera/Desktop app instead");k.$a=f.language||navigator.language||navigator.Jc;var hb={ca:"es",an:"es",gl:"es",eu:"es",ast:"es"}[k.$a.substr(0,2)]||k.$a.substr(0,2);k.version="v57.6";f.version!==k.version&&f.version&&(f.version=k.version,Ya("Updated to "+k.version));let ib="en es it pt ru pl bg de cz ro".split(" ").indexOf(hb);0>ib&&(ib=0,hb="en");k.lang=ib;
k.va=hb;if(4==ib||6==ib)document.title="\u0426\u0430\u0440\u0435\u0434";k.Ea=0;k.race=0;k.navigator=gb;k.R=151;k.Rc=null;k.kb=0;k.Ja="nehhon/";async function jb(a){return a.split("\n")}function N(a){return fa[a]||""}var kb,lb,mb=[],nb=0;function ob(){nb++;if(3==nb){for(let b=0;4>b;b++){var a=N(698+b).split(",");let c=a.length,d=pb(qb),e=0;for(let g of a)for(a=0;20>a;a++)d[e++]=g.length>a?g.charCodeAt(a):0;E[253](c,b)}window.onhashchange=rb;rb()}}
var sb=0,tb,ub,vb,wb,yb=a=>{if(a.data instanceof ArrayBuffer){let b=new Uint8Array(a.data),c=b[0];if(2==ub&&45!=c||vb&&26!=c)return wb.put(a);if(xb[c])xb[c](0,b)}};
function zb(a){function b(){if(!d){let e=new Uint8Array(1);e[0]=24;c.send(e);setTimeout(b,6E4);Ab&&14E3<Date.now()-Ab&&c.close()}}this.active=!0;this.I=[];let c=new WebSocket("wss://korwin.tza.red:4333");this.v=c;this.v.binaryType="arraybuffer";let d=Ab=0;setTimeout(b,6E4);this.v.onclose=function(e){d=!0;this.v=null;for(var g=H.I.slice(0),h=0;h<g.length;h++){var m=g[h];m.S||m.close()}l("gameList")&&(Bb(l("gameList")),O("div",l("gameList"),803,"color:red;height:100%;display:flex;justify-content:center;align-items:center;"));
console.log(e);D.o&&D.l&&!Cb?(setTimeout(()=>{H=new zb(1)},2E3),Ya(N(835))):(D.l&&Ya(N(803),"#ff0000"),D.l&&Db())};this.v.onopen=function(){if(a){let e=new Uint8Array(13);Eb(e,1,k.K);Eb(e,5,tb);Eb(e,9,Fb);I(54,e);ub=1;wb=[]}else sb=1,f.sid&&I(21,Gb(parseInt(f.sid),f.nm))};this.v.onerror=function(e){p("error",e)};this.v.onmessage=yb}var H;H=new zb;var Hb,Ib;
window.onmessage=function(a){var b=new URLSearchParams(a.data);if(Hb&&b.has("code")){p(b,a.data);Hb.close();Oa();a=ka?1:0;b=b.get("code");b=Ra(b);var c=new ArrayBuffer(2+b.length);c=new Uint8Array(c);c[1]=a;c.set(b,2);I(12,c)}};window.opener&&(new URLSearchParams(window.location.search)).has("code")&&window.opener.postMessage(window.location.search,"*");var Kb;
function Lb(){if(f.sid)Mb();else{let a=Nb("",2);a.id="login";let b=K("div",a);Kb=b;ka||(M("button",b,"background:url(nehhon/discord.webp) no-repeat center;width:150px;height:93px").onclick=()=>{Q(a);Ib=Math.floor(Math.random()*2**32);Hb=window.open((ka?"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F%3Fdesk%3D1&response_type=code&scope=identify%20email":"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F&response_type=code&scope=identify%20email")+
"&state="+Ib,"Log In","toolbar=no, menubar=no, width=600, height=830, top=10, left=100")});K("hr",b);K("button",b,"e-mail","color:#d1d1d1;width:150px;height:93px;font-size:15px").onclick=()=>{Bb(b);let c=K("input",b);c.type="email";c.placeholder="name@example.com";c.onkeydown=e=>{if("Enter"==e.key)d.onclick()};c.focus();let d=O("button",b,2);d.onclick=()=>{let e=c.value;if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e))return alert(N(909));Bb(b);Oa();I(51,Ob(e));O("div",b,808,"font-size:10px;width:174px;color:var(--color1);");
let g=K("input",b);g.placeholder="abcd123";g.focus();g.onkeydown=m=>{if("Enter"==m.key)h.onclick()};let h=O("button",b,2);h.onclick=()=>{I(52,Pb(parseInt(g.value.trim(),36)));b.innerHTML="..."}}}}}var Qb=document.createElement("div");Qb.id="gameList";Rb=Qb.children;Sb=document.createElement("div");Tb=document.createElement("div");Ub=document.createElement("span");Tb.appendChild(Ub);Qb.appendChild(Sb);Qb.appendChild(Tb);var Vb;
function Wb(){Xb=[N(106).split("|")[0],N(107).split("|")[0],N(108).split("|")[0],N(109).toLocaleUpperCase()];for(var a=["rnd0","<span>"+N(110).split("| ")[0]+"</span>","returnmenu",N(112)],b=0,c=a.length;b<c;b+=2)l(a[b])&&(l(a[b]).innerHTML=a[b+1]);a=l("mult");K("div",a,`\u2b9c ${N(98).split("| ")[0]} \u2b9e`);a.appendChild(Qb);K("span",Ub,"\u2bc6 "+N(83),"font-size:11px;color:#ff000040");O("span",Ub,881);O("span",Ub,880,"text-align: right; padding-right: 11px;");Tb.id="rmply";M("div",Qb).id="rln";
a=K("section",Qb);K("button",a,N(99).split("| ")[1]+" +").onclick=Vb;K("button",a,"<img src='nehhon/krwn.webp'>"+N(537)).onclick=()=>location.hash="Ranking";O("button",a,884).onclick=()=>Yb();K("ul",l("index"),`<li id=about>${N(111)}</li><li id=chlog>${N(536)}</li><li id="yt"><a href="https://youtube.com/c/Tzared" alt="youtube channel" target="blank_"><img src="nehhon/yt.webp" alt="youtube channel"></a></li><li id="discord"></li>${!ka&&`<li id=tzdesk><svg width="24" height="24" viewBox="0 0 24 24" class="icon-nuGd5b"><g fill="currentColor"><path d="M17.707 10.708L16.293 9.29398L13 12.587V2.00098H11V12.587L7.70697 9.29398L6.29297 10.708L12 16.415L17.707 10.708Z"></path><path d="M18 18.001V20.001H6V18.001H4V20.001C4 21.103 4.897 22.001 6 22.001H18C19.104 22.001 20 21.103 20 20.001V18.001H18Z"></path></g></svg> <a id='tzdwd' style='text-decoration:none;color:inherit' href='download/' target="_blank">${N(538)}</a></li>`||
""}<li id=help>${N(114)}</li>`).id="topLinks";l("accb").innerHTML=f.sid?N(445):N(444);l("about").onclick=function(){location.hash="About"};l("help").onclick=function(){location.hash="#Guide"};l("chlog").onclick=function(){location.hash="#Changelog"};l("accb").onclick=Lb;if(ka){a=K("span",l("mult"),"","position:absolute;right:0px");b=K("button",a,N(391).split("|")[0],"background:#00000085;color:#c3a447");let d=K("input",a,"","background: #00000085;");d.placeholder="https://tza.red/##room";b.onclick=
()=>{let e=d.value.split("##")[1];e&&(Zb=!0,$b("#"+e),ac())}}ka||(l("tzdesk").onclick=function(){l("tzdwd").click()});l("yt").onclick=function(){l("yt").children[0].click()};a=l("discord");a.ariaLabel="Discord";a.onclick=()=>{window.open("https://discord.gg/ndxJHxT","_blank")}}
(async function(){let a=await fetch(k.Ja+k.va+".nhl");fa=await jb(await a.text());lb=[{name:N(547)},{name:N(548)},{name:N(549)},{name:N(550)},{name:N(551)},{name:N(552)},{name:N(553)},{name:N(554)},{name:N(555)}];Wb();kb=1;ob();for(let b of mb)b()})();function bc(a,b,c,d){Va(b&&N(b),N(a),d,N(c))}window.spAlert2=bc;function cc(){R("alert")}
function dc(a,b,c){let d=Nb(N(a),1);d.style.fontSize="16px";d.style.width="300px";d.style.textAlign="center";c&&(K("button",d,b,"display:block;margin:28px auto auto;font-size:15px;padding:6px;background:#00ff0030;border-radius:2px").onclick=()=>{J(d.parentNode.parentNode);c()})}
function Va(a,b,c,d){var e=l("alert");e||(e=document.createElement("div"),e.id="alert",document.body.appendChild(e),e=l("alert"),p(d),e.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var g=l("alerttitle"),h=l("alerttext");l("alertok").onclick=cc;e.style.display="block";g.innerHTML=b||fa&&N(115)||"Warning";l("alertok").innerHTML=
d||fa&&N(116)||"Ok";h.innerHTML=a||"";c?l("alertok").style.display="none":l("alertok").style.display="block"}window.spAlert=Va;var ec=0,fc;function gc(a){hc.innerHTML=N(117)+" "+a+"%"}window.showProgress=gc;function ic(){ec++;ec>=fc&&(jc?jc():kc())}function lc(a,b){this.nb=a;this.size=b}function pb(a){return mc(a.nb,a.size)}function nc(){var a=qb;return oc(a.nb,a.size)}
function pc(a){jc=a;hc.innerHTML=N(117);var b=1;S&&(b=1);rc=4096*b;fc=3;a&&fc--;ec=0;E[134]("true"==f.shadows,b,rc);gc.progress=0;gc.total=0;Date.now();ic();hc.innerHTML=N(117);sc()}var jc;function sc(){E[136]()==fc-ec?(ec++,ic()):setTimeout(sc,15)}function tc(){if(!ka){f.update=1;if(window.caches){var a=window.caches;a.keys().then(function(b){for(let c of b)a.delete(c)})}setTimeout(function(){location.reload(!0)},250)}}f.lastVersion&&576!=f.lastVersion&&(f.lastVersion=576,tc());var uc=l("index");
function vc(){f.cache_v||(f.cache_v=7);if(1!=f.update||ka)fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(b){return b.text().then(function(c){K("div",uc,k.version).id="info";576!=c&&tc()})});else if(delete f.update,7!=f.cache_v){f.cache_v=7;var a=indexedDB.deleteDatabase("emscripten_filesystem");a.onsuccess=function(b){p(b)};a=indexedDB.deleteDatabase("nh2019");a.onsuccess=function(b){p(b)}}}ka?K("div",uc,k.version+` ${aa&&` - ${aa}`||""}`).id="info":vc();
ka?"1.1.7"!=aa&&Va("New desktop version available, you can download it<br>by clicking <a href='https://tza.red/download' target='_blank'>here</a>"):"serviceWorker"in navigator&&(navigator.serviceWorker.register("sworker.js").then(function(){},function(a){p(a)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)});var wc,xc,yc={},zc="ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.mp3 CAMEL2.mp3 CARPETCMD.mp3 CATAPULT.mp3 CBEAR1.mp3 CBEAR2.mp3 CBEAR3.mp3 CBEAR4.mp3 COW1.mp3 COW2.mp3 COW3.mp3 COW4.mp3 DRAGON1.mp3 DRAGON2.mp3 FLY1.mp3 FLY2.mp3 FOOT1.mp3 FOOT2.mp3 FOOT3.mp3 FOOT4.mp3 FOOT5.mp3 FOOT6.mp3 FOOT7.mp3 FOOT8.mp3 GHOST1CMD.mp3 GHOST2CMD.mp3 GHOST3CMD.mp3 GOLEMCMD.mp3 H%20CMD%201.mp3 H%20CMD%202.mp3 H%20CMD%203.mp3 H%20CMD%204.mp3 HEAVY%20CATAPULT.mp3 INF%20CMD%201.mp3 INF%20CMD%202.mp3 INF%20CMD%203.mp3 INF%20CMD%204.mp3 INF%20CMD%205.mp3 MESSIAHCMD.mp3 ORC%20CMD%201.mp3 ORC%20CMD%202.mp3 ORC%20CMD%203.mp3 ORC%20CMD%204.mp3 ORC%20CMD%205.mp3 ORC%20CMD%206.mp3 SHIP%20CMD%201.mp3 SHIP%20CMD%202.mp3 SKELETON1.mp3 SKELETON2.mp3 SHIP%20SELECT.mp3 E_BARRACK1.mp3 E_BLACKSMITH1.mp3 FIRE1.mp3 FIRE2.mp3 FIRE3.mp3 FIRE4.mp3 FIRE5.mp3 ROCKET.mp3 pepe.mp3 A_MAGE.mp3".split(" "),
Ac,Bc;function Cc(){var a=Dc;this.context=wc;this.onload=a}function Dc(a,b,c){b=b.split(".")[0].toLowerCase();yc[b]=a;c&&(xc(b,c.x,c.y,c.k,c.ec,c.F),c.F=0)}
function ac(){if(!wc){Cc.prototype.dc=function(d,e){var g=this;Ec(k.Ja+d,function(h){g.context.decodeAudioData(h).then(function(m){m&&Dc(m,d,e)})})};for(var a=0,b=zc.length;a<b;a++){var c=zc[a];yc[c.split(".")[0].toLowerCase()]=c}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,wc=new AudioContext,Bc=wc.createGain(),Ac=new Cc,Bc.gain.value=parseInt(f.soundRange)/100,Bc.connect(wc.destination));xc=function(d,e,g,h,m,q,t){if(Ac&&(parseInt(f.soundRange)||
!D.o)){"string"!==typeof d&&(d=zc[d].split(".")[0].toLowerCase());var r=d;if((d=yc[d])&&"loading"!==d&&!D.qb){var u=-Fc+(window.innerWidth-k.R)/2,v=-Gc+window.innerHeight/2;if(d.duration){if(D.o)if(64<D.now()-d.Eb||!d.Eb)d.Eb=D.now();else return;if(!("attack"!=r&&q&&600<Date.now()-q)){if(e){if(m=(-u/32+e)/7,g=(-v/32+g)/7,v=Hc,4096<m*m+g*g)return!1}else v=g=m=0;void 0!==h&&h!==k.Db||D.Pc||(h=wc.createBufferSource(),h.buffer=d,e?(d=wc.createPanner(),d.panningModel="HRTF",d.setPosition(m,g,v),d.refDistance=
1,d.distanceModel="inverse",h.connect(d),d.connect(Bc)):h.connect(D.o?Bc:wc.destination),h.start(0))}}else yc[r]="loading",e={x:e,y:g,k:h,ec:m,F:Date.now(),mid:t},Ac.dc(d,e)}}};window.play=xc}}
const Ic=[{name:"Tzar soundtrack",ea:"Kiril Busty Petrushev & Dimitar Sabev",volume:.7,ka:[{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],qa:[{sizes:"141x141",src:"nehhon/cover.png"}],Ra:!0},{name:"Sharp Rain Tzar",ea:"Sharp Rain, Kiril Busty Petrushev & Dimitar Sabev",
volume:1,ka:[{url:"sr1.mp3",name:"Track 1"},{url:"sr2.mp3",name:"Track 2"},{url:"sr3.mp3",name:"Track 3"},{url:"sr4.mp3",name:"Track 4"},{url:"sr5.mp3",name:"Track 5"},{url:"sr6.mp3",name:"Track 6"},{url:"sr7.mp3",name:"Track 7"},{url:"sr8.mp3",name:"Track 8"},{url:"sr9.mp3",name:"Track 9"},{url:"sr10.mp3",name:"Track 10"}],qa:[{sizes:"141x141",src:"nehhon/shr.png"}],Ra:!0},{name:"Tzar soundtrack",ea:"Kiril Busty Petrushev & Dimitar Sabev",volume:1,ka:[{url:"tzaradp.mp3",name:"Tzar ADP",ea:"Diemiurgo"},
{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],qa:[{sizes:"200x200",src:"nehhon/diemiurgo.jpg"}]},{name:"Tzar soundtrack remastered",volume:1,ea:"Kiril Busty Petrushev & Dimitar Sabev",ka:[{url:"o1.mp3",name:"Track 1"},{url:"o2.mp3",name:"Track 2"},
{url:"o3.mp3",name:"Track 3"},{url:"o4.mp3",name:"Track 4"},{url:"o5.mp3",name:"Track 5"},{url:"o6.mp3",name:"Track 6"},{url:"o7.mp3",name:"Track 7"},{url:"o8.mp3",name:"Track 8"},{url:"o9.mp3",name:"Track 9"},{url:"o10.mp3",name:"Track 10"},{url:"outro.mp3",name:"Outro"}],qa:[{sizes:"141x141",src:"nehhon/cover.png"}],Ra:!0},{name:"Tzar soundtrack orchestral version",volume:1,ea:"Pau Garriga, Kiril Busty Petrushev & Dimitar Sabev",ka:[{url:"oc1.mp3",name:"Track 1"},{url:"oc2.mp3",name:"Track 2"},
{url:"oc3.mp3",name:"Track 3"},{url:"oc4.mp3",name:"Track 4"},{url:"oc5.mp3",name:"Track 5"},{url:"oc6.mp3",name:"Track 6"},{url:"oc7.mp3",name:"Track 7"},{url:"oc8.mp3",name:"Track 8"},{url:"oc9.mp3",name:"Track 9"},{url:"oc10.mp3",name:"Track 10"}],qa:[{sizes:"480x360",src:"nehhon/oc.jpg"}],Ra:!0}];var Kc;
function Lc(){"mute"!=f.favMusic&&Kc&&(Kc.src="nehhon/F.mp3",Kc.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:"Astronomia (Medieval Style)",artist:"Cornelius Link",artwork:[{sizes:"200x200",src:"nehhon/cornelius.jpg"}]})))}
function Mc(){this.value&&(f.favMusic=this.value);if("mute"!=f.favMusic){var a=Ic[f.favMusic]||Ic[0];if(a.Ra){a=a.ka;for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}}}Nc.id=0;Nc()}
function Nc(){var a=f.favMusic;if("mute"==a)return Kc.src="";a=Ic[a]||Ic[0];0>Nc.id&&(Nc.id=0);var b=a.ka[Nc.id++%a.ka.length];Kc.src="nehhon/"+b.url;Kc.play();"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:b.name,artist:b.ea||a.ea,album:a.name,artwork:a.qa}))}
function Oc(){Kc=new Audio;Kc.onended=Nc;Kc.volume=parseInt(f.musicRange)/100;if("mediaSession"in navigator){var a=navigator.mediaSession;a.setActionHandler("play",function(){Kc.play();a.playbackState="playing"});a.setActionHandler("pause",function(){Kc.pause();a.playbackState="paused"});a.setActionHandler("seekbackward",function(){});a.setActionHandler("seekforward",function(){});a.setActionHandler("previoustrack",function(){Nc.id-=2;Nc()});a.setActionHandler("nexttrack",Nc)}Mc()}
window.setupGameMusic=Oc;var Pc;function Qc(){return 25*E[48]()}function Rc(){if(0===D.paused){D.paused=1;void 0!=Pc&&clearInterval(Pc);var a=D.now();D.Aa+=Date.now();D.now=function(){return a}}else D.Aa-=Date.now(),D.paused=0,Pc=setInterval(Sc,Sc.speed),D.now=Qc;Tc()}function Uc(a){var b=Math.floor(a/3600);let c=Math.floor(a%3600/60);a=1<b?`${b} h`:1===b?"1h":"";b=b&&!c?"":`${c} ${N(558)}`;return a+(a&&b?" ":"")+b}
function Vc(a){a/=1E3;var b=~~(a/60)%60,c=~~(a/3600);a=~~(a%60);1===(a+"").length&&(a="0"+a);0!=c?(c+=":",10>b&&(b="0"+b)):c="";return c+b+":"+a}window.invgtech=function(a){a=K("div",document.body,"",`background-position-y:${a}px`);a.className="techdone";setTimeout(J,4020,a)};window.synctm=function(){E[11]()};var Wc,Xc,Tc=()=>{Wc=Date.now();Xc=25*E[48]()};window.rw_etimer=Tc;var Yc,Zc,$c;
function Sc(){var a=Date.now();D.W=E[48]();(Zc=Yc==D.W)&&!$c?$c=a:Zc||($c=0);var b=Date.now()-Wc+Xc;200<25*E[48]()-b&&Tc();Yc=D.W;E[11]();D.W=E[48]();b=ad;0===D.W%40&&b();bd+=Date.now()-a}window.frcintv=Sc;Sc.speed=25;function cd(){this.ta=!this.ta;this.style.backgroundPositionY=-28*!this.ta+"px";E[182](this.vb,this.ta,this.ma)}function dd(a){document.body.style.cursor="";l("diplomacy")||S||(Nb('<table>\n    <tbody id="dpltable">\n    </tbody>\n    </table>\n    ',a).id="diplomacy",E[181]())}
function ed(){var a=fd('<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/gold.gif"></div>'+(gd?"":'<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/wood.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/food.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/stone.gif"></div>'),1);a.className="sndRes";a=K("button",a,N(448),
"padding:15px;margin-top:24px;background:#00ff001a");a.ma=this.ma;a.onclick=hd}function hd(){var a=this.parentNode.getElementsByTagName("input");p(a,this);E[183](this.ma,parseInt(a[0].value),a[1]&&parseInt(a[1].value),a[1]&&parseInt(a[2].value),a[1]&&parseInt(a[3].value));Q(this.parentNode)}var id;window.upddipmenu=()=>{l("dpltable")&&(id=1,E[181](),id=0)};
window.shdiplomacyrow=function(a,b,c,d,e,g,h,m,q,t,r,u,v,x,y){b=jd(t,b);if(id){var z=l("dpltable").children;for(let C of z)if(C.$==u){var w=C;break}w.innerHTML=""}else w=document.createElement("tr"),l("dpltable").appendChild(w);w.$=u;z=E[112]()==u;gd&&!c&&(a="-");K("td",w,a);K("td",w,"","padding:0px;width:13px");K("td",w,`<div style="width:4px;background:${kd(d)};border-radius:1px;height:16px;"></div>`,"padding:0px");K("td",w,b+ld(t),`color:#ffd75d;${h&&`;text-decoration:line-through;color:#${gd?
"a3a3a3":"f00"}`||""}`).onclick=()=>{var C=md[t]&&md[t].id;C&&I(60,Pb(C))};K("td",w,c);a=n[45]&&E[48]()<2400*n[18];if(z)K("td",w,`<div class="shme" style="color:#ffb100">${E[246]()?"":y||"\ud83d\udec7"}</div>`,"padding:0 5px;");else{var A=K("td",w,`<div class="${q?"shenemies"+(1!=q?2:""):"shallies"}">${E[246]()?"":y||"\ud83d\udec7"}</div>`,"padding:0 5px;").children[0];4==q&&(A.style.filter="hue-rotate(-200deg)");Qa&&(e=K("td",w,`<div class="shview" style="background-position-y:${-28*!g}px;${e&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||
""}"></div>`,"padding:0 5px;").children[0],q||(e.onclick=cd,e.vb=3,e.ta=g,e.ma=u));3!=q&&(A.onclick=()=>{let C=q;q&&2!=q?A.className="shenemies2":(A.className="shenemies",C=0);4==q&&(A.className="shallies",A.style.filter="");E[289](t,C,u);q=!q});if(!a){g=M("td",w,"padding:0 5px;");for(let C=0,F=gd?1:4;C<F;C++){let L=M("div",g,`background-position-y:${-28*!(r&1<<C)}px;${(x&1<<C?1:0)&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}`);nd(L,C);L.className="shres";q||(L.onclick=()=>{r^=1<<C;L.style.backgroundPositionY=
-28*!(r&1<<C)+"px";p(r);E[182](1,r,u)})}g.title="Share resources"}v=K("td",w,`<div class="shcontrol" style="background-position-y:${-28*!m}px;${v&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}"></div>`,"padding:0 5px;").children[0];v.title="Share control of units";q||(a||(w=K("td",w,'<div class="shtrib"></div>',"padding:0 5px;").children[0],w.onclick=ed,w.ma=u),v.onclick=cd,v.vb=2,v.ta=m,v.ma=u)}};var bd=0,od=0,pd=0,qd=[14,12,0,0,0,0,18,18,11,14,7,7,5,5,16,11,16,8,5,5,16,15],rd=-1;
window.cursor=function(a,b){var c=qd[2*a]||0,d=qd[2*a+1]||0;b&&(a+="i");a!==rd&&(rd=a,document.body.style.cursor=`url("${k.Ja}cursor${a}.gif") ${c} ${d}, auto`)};var sd,td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id;window.setupArrows=function(a,b,c){a&&(Cd.Oa.className="");(a+1)*Ad.length<b&&(Cd.Qa.className="");c&&(Cd.Nb.className="")};const Jd=[20,15,14,22];
window.setupTradingmenu=function(a,b,c,d,e,g){l("tradingmenu")?Kd("tradingmenu"):(K("div",Ld?l("menbak2"):l("menu"),'<button id="tramount"></button>\n<button id="troriginres"></button>\n<button id="trdestres"></button>\n<button id="trorigin"></button>\n<button id="trdest"></button>\n<button id="trdecline" style="top:167px"></button>\n<button id="traccept" style="top:167px"></button>',"",Ld).id="tradingmenu",l("tramount").onmouseup=function(h){E[159](h.button?-1:1)},l("troriginres").onmousedown=function(h){this.style.backgroundPositionY=
-48*Jd[E[160](h.button?-1:1)]+"px"},l("trdestres").onmousedown=function(h){this.style.backgroundPositionY=-48*Jd[E[160](h.button?-1:1,1)]+"px"},l("trorigin").onclick=function(){E[161]()},l("trdest").onclick=function(){E[161](1)},l("trdecline").onclick=function(){R("tradingmenu")},l("traccept").onclick=E[162]);l("traccept").disabled=!g;p(a);l("tramount").innerHTML=a+` (+${g})`;c?l("trorigin").style.cssText=`background:url(nehhon/iconunits.webp) 0px ${48*-c}px`:l("trorigin").style.cssText="";b?l("trdest").style.cssText=
`background:url(nehhon/iconunits.webp) 0px ${48*-b}px`:l("trdest").style.cssText="";l("troriginres").style.backgroundPositionY=-48*Jd[e]+"px";l("trdestres").style.backgroundPositionY=-48*Jd[d]+"px"};var Md=navigator.Na;function Nd(){}Md&&Md.addEventListener("levelchange",Nd);
window.setupMWmenu=function(){l("magicworkshopmenu")?Kd("magicworkshopmenu"):(K("div",Ld?l("menbak2"):l("menu"),'<button id="mgbook"></button>\n            <button id="mgpotion"></button>\n            <button id="mgsword"></button>\n            <button id="mgamount"></button>\n            <button id="mgitem"></button>\n            <button id="mgdecline"></button>\n            <button id="mgaccept"></button>',"",Ld).id="magicworkshopmenu",l("mgbook").onclick=function(){E[36](0);Od()},l("mgpotion").onclick=
function(){E[36](1);Od()},l("mgsword").onclick=function(){E[36](2);Od()},l("mgdecline").onclick=function(){l("magicworkshopmenu").style.display="none"},l("mgitem").onmousedown=function(a){var b=1;a.button&&(b*=-1);E[37](b);Od()},l("mgaccept").onclick=function(){l("magicworkshopmenu").style.display="none";E[39]()},l("mgamount").onmousedown=function(a){var b=1;a.button&&(b=-1);E[38](b);Od()});Od()};
function Od(){l("mgitem").style.backgroundPositionY=-48*E[35]()+"px";l("mgamount").innerHTML=E[34]()}function Pd(a,b){var c=a.Z,d=document.createElement("div");d.className="contD";for(var e=0;e<c.length;e++){var g=document.createElement("button"),h=c[e];h.parent=a;g.innerHTML=h.name;g.onclick=Qd;g.oa=h;b.appendChild(g);h.Z&&(h.sb=d)}b.appendChild(d)}function Rd(a){a.style.visibility="hidden"}function T(a){a.style.display="none"}Element.prototype.show=function(){this.style.display="block"};
function Sd(a){a.style.display=""}function Td(a){var b=l(a.parent);Pd(a,b)}var Ud;function Vd(){var a=Wd,b=Xd();a.Z=b;a.xa&&(a.xa.innerHTML="",Pd(a,a.xa))}
function Qd(){var a=this.oa,b=a.parent;if(a.onclick)a.onclick(a.Lb);if(Ud&&b&&b.X!=Ud)for(var c=Ud,d=c.length,e=0;e<d;l(c[e++]).style.display="none");a.X&&(Yd(a.X),Ud=a.X);a.ia&&a.ia.oa&&a.ia.oa.X&&(Yd(a.ia.oa.X),Ud=a.ia.oa.X);if(a.Z){b.ia&&(b.ia.className="");b.ia=this;this.className="clickD";a.xa||(b=document.createElement("div"),a.sb.appendChild(b),Pd(a,b),a.xa=b);b=a.sb.children;for(c=0;c<b.length;T(b[c++]));a.xa.show()}}
function Zd(){var a=E[112]();l("selectKingdom").innerHTML="";for(var b=0,c=E[28]();b<c;b++){var d=b?$d(ae(E[111](b),20)):N(23),e=kd(E[132](b));l("selectKingdom").innerHTML+=`<option style="background:${e}" value="${b}" ${b==a&&"selected"||""}>${d}</option>`}l("selectKingdom").innerHTML+="<option value='"+(2**31-1)+"'>"+N(22)+"</option>";l("selectKingdom").onchange(1)}window.activeKingdomSetup=Zd;function be(a){E[117](a,!0)}
function ce(a,b){let c=pb(qb),d=a.length;1024<d&&(d=1024);for(let e=0;e<d;e++)c[e]=a.charCodeAt(e);E[239](d,b)}function de(a){l("brushSize").value=a;l("brushSize").onchange()}function ee(a,b){var c=` (${ee.ya.length})`;ee.ya.put({name:"water"==fe.j[b]&&N(45)+c||N(46)+c,onclick:be,Lb:a})}var ge;window.EDterrainInfo=ee;function Xd(){ee.ya.length=0;E[118]();return ee.ya}var he;window.fstTXT=function(a,b){b?he=$d(mc(a,b)):he=""};var ie=(a,b)=>a.name.localeCompare(b.name);let je;var ke=1,le,Wd;
function me(){Ld="true"==f.theme||1020>window.innerWidth||gd;l("content")||(K("div",ne).id="content");if(S){ee.ya=[];l("content").innerHTML=`<div id="mapeditorpanel">
    <div id="mapeditorinfo">
    </div>
    </div>
    <div id="minimap" style="box-shadow:0px 0px 20px #000;position:absolute;top:31px;left:4px"></div>
    <div id="mapeditorinfotop">
   
    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>
    <button style="display:none" id="rotatebutton"></button>
    <button id="mapProps" style="box-shadow:none"></button>
    <button id="mapRules">${N(576)}</button>
    <button style="display:none" id="mapRules"></button>
    <div id="brhSize" style="display:none"><span>${N(728)}: </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>
    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>
    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>
    <div id="EDrndtree" style="display:none"><button id="rndtrees">${N(49)}</button></div>
    <div id="EDterr" style="display:none"><span>${N(26)}: </span><select id="EDtrrsel">${oe()}</select></div>
    <div id="EDterrRND" style="display:none"><button id="rndtrbutton">${N(50)}</button></div>
    <div><span style="font-size:14px;color:#797979">${N(670)}: </span>
    <select id="selectKingdom">
    </select>
    </div>
    <div><button id="castleRND">${N(52)}</button></div>
    <div><button id="clearMap">${N(51)}</button></div>
    </div>
    <div id="bigMap" style="display:none"></div>
    ${""}
    `;l("mapRules").onclick=pe;var a=l("mapeditorinfotop");M("button",a,"box-shadow:none;background:url(nehhon/load.webp);opacity:.8;width:20px;height:26px;background-size:20px",1).onclick=()=>{var c=document.createElement("input");c.type="file";c.accept=".tzared";c.onchange=qe;c.click()};M("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/dwn.webp);background-size:26px;opacity:.8;width:26px;height:26px",1).onclick=re;M("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/exit.webp);background-size:30px;opacity:.8;width:30px;height:28px;margin-left:auto").onclick=
se;let b=K("button",a,"\u25a4");a.insertBefore(b,l("brhSize")).onclick=()=>{let c=fd("",1);O("div",c,678,"color:var(--color1);font-size:22px;margin-bottom:32px");let d=te(c),e=ue(c),g=K("div",c),h=ve(c,0,[624,598,586,873]),m,q,t;h.onchange=()=>{m=void 0;Bb(g);if(1==h.value){g.className="unitProps";m=we([0,0,0,0,0,0,0],xe(d),g);K("span",g,N(676)+": ");let r=ye(u=>q=u,g,0);r.style.margin="20px";q=2147483646;O("option",r,677).value=q;r.value=q}else 3==h.value&&(t=K("input",g),t.placeholder=N(747),t.maxLength=
20)};O("button",c,675,"margin-left:15px").onclick=()=>{let r=pb(qb);for(var u=0;u<e.length;u++)r[u+1024]=e[u].checked;if(1==h.value){for(u=0;u<m.length;u++)m[u]&&(r[u]=parseInt(m[u].value));r[7]=q}else if(3==h.value){for(u=0;u<t.value.length;u++)r[u]=t.value.charCodeAt(u);r[1023]=t.value.length}E[247](xe(d),xe(h));Q(c)}};l("castleRND").onclick=function(){E[133](0);ze.update=!0};l("clearMap").onclick=function(){E[133](1)};l("rndtrees").onclick=E[125];l("rndres").onclick=E[129];l("brushDensity").onchange=
function(){E[116](parseInt(l("brushDensity").value))};l("brushSize").onchange=function(){E[115](parseInt(l("brushSize").value))};l("brushMargin").onchange=function(){E[147](parseInt(l("brushMargin").value))};l("rndtrbutton").onclick=function(){E[3]();E[124]();ze.update=!0};l("brushDensity").onchange();l("brushSize").onchange();l("selectKingdom").onchange=function(){E[113](parseInt(this.value));if(this.value!=2**31-1){var c=E[132](parseInt(this.value)),d=c>>16&255,e=c>>8&255;c&=255}else c=e=d=0;this.style.background=
`rgba(${d},${e},${c},0.6)`};l("mapProps").onclick=function(){var c=fd("",1);c.id="mapPropsWindow";c=K("div",c);var d=M("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;"),e=M("div",c,"display:flex;justify-content:center;gap:33px");Ae=K("div",c);Ae.id="edks";Be();const g=[48,Ce,737,()=>De(),463,Ee,702,()=>Fe()];for(let t=0;t<g.length;t+=2)O("button",e,g[t],"text-transform:uppercase").onclick=g[t+1];O("p",d,54);let h=K("input",
d);h.onchange=()=>ce(h.value,0);E[240](0);h.value=he;O("p",d,56);let m=M("textarea",d,"width:694px;height:152px");m.onchange=()=>ce(m.value,1);E[240](1);m.value=he;O("p",d,57);let q=K("input",d);q.onchange=()=>ce(q.value,2);E[240](2);q.value=he;O("button",d,70,"display:block;margin-left:auto").onclick=()=>{let t=fd("",1),r=E[250]();O("span",t,691,"line-height:31px");let u=Ge(t,x=>{x?(v.show(),v.value="",v.focus()):(T(v),E[250](1,0),v.value=0)},r);u.style.Hc="right";u.style.marginLeft="6px";let v=
Xa(t,r,()=>{He(v);E[250](1,xe(v))},"number","display:block;margin:auto;margin-top:14px",9999999,0);r?v.focus():T(v)};d=M("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;width:max-content");K("span",d,N(457)+": ");e=K("input",d,"","display:block;margin-top:10px;background:none");e.onchange=Ie;e.type="file";e.accept="image/*";K("div",d).id="mmimg";c=M("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;width:max-content");
O("span",c,721);c=K("input",c,"","display:block;margin-top:10px;background:none");c.onchange=Je;c.type="file";c.accept=".wmp"};Wd={name:N(26),Z:ee.ya,X:["brhSize"]};je=[{name:N(535),onclick:()=>E[117](-1,!0),X:["brhSize"]}];new Td({Z:[{name:N(730),onclick:()=>de(1),X:["brhSize","brhMargin"],Z:[{name:N(729),onclick:()=>Ke(E[110])}]},{onclick:()=>de(8),name:N(26).toUpperCase(),Z:[Wd,{name:N(61),Z:[{name:N(61),onclick:E[117],Lb:7}],X:["brhSize","brhDnst","EDrndtree"]},{name:N(534),Z:je,onclick:()=>{je.length=
1;let c=E[215]();for(let d=0;d<c;d++)je.put({name:d,onclick:()=>{E[216](d)}})}}]}],parent:"mapeditorinfo"})}else Ld?(a=Le()?"nwb":"",l("content").className="nw "+a,l("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="popr"></div>
    <div id="resources">
    <div><span id="gold"></span></div>
    <div><span id="wood"></span></div>
    <div><span id="food"></span></div>
    <div><span id="stone"></span></div>
    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${D.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"> </span>
    <span id="tpGPU"> </span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menbak0">
    <div id="plavatar"></div>
    ${!Ka&&'<div id="kingdom"></div>'||""}
    ${`<div id="addAlly" style="display:none">${N(922)}</div>`||""}
    </div>
    <div id="menbak1"></div>
    <div id="menbak1s"></div>

    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>

    <div id="topmenuvals">
    <div id="delunit">x</div>
    <div id="progressvalue"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    ${Ka&&'<div id="kingdom"></div>'||""}
    <div id="unitname" contenteditable="true"></div>
    </div>
    <div id="menbak2">
    <div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>
    <button id="gameMenu">${N(47)}</button>
    </div>
    </div>`):(l("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="resources" style="display:block">
    <div id="goldr"></div>
    <div id="woodr"></div>
    <div id="foodr"></div>
    <div id="stoner"></div>
    <div id="popr"></div>
    <div id="resourcesbefore"></div>
    <div id="gold"></div>
    <div id="wood"></div>
    <div id="food"></div>
    <div id="stone"></div>

    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${D.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"></span>
    <span id="tpGPU"></span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menubefore"></div>
    <div id="menuafter"></div>
    <button id="gameMenu">${N(47)}</button>

    <div id="daynighticon"></div>
    <div id="topmenuvals">
    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>
    <div id="delunit">\ud83d\udec7</div>
    <div id="progressvalue"></div>
    <div id="kingdom"></div>
    <div id="unitname" contenteditable="true"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    </div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>`,l("content").className="dfth"),Id=l("msgs1"),Me(),gd&&T(l("tpTM")),Ne=M("span",l("topinfo"),"display:none;font-size:8px;color:#00ffff"),!Oe&&D.l&&(setInterval(()=>{Pe=performance.now();I(28)},15E3),Pe=performance.now(),I(28)),Cd={page:0,Oa:l("aleft"),Qa:l("aright"),Nb:l("stock")},window.actionMenu=Cd,Cd.Oa.onclick=function(){E[30](-1)},sd=l("minimap"),Dd=l("gold"),Ed=l("wood"),Fd=l("food"),Gd=l("stone"),l("resources"),Hd=l("daynighticon"),Cd.Qa.onclick=function(){if("blocked"!=Cd.Qa.className)E[30](1)},
Cd.Zb=[],td=l("attackmenu"),ud=l("defencemenu"),vd=l("levelmenu"),wd=l("kingdom"),xd=l("progressone"),yd=l("unitname"),zd=l("progressvalue"),yd.oninput=()=>{Qe(yd.textContent)},l("delunit").onclick=function(){E[32](8,0)},991915600==n[4]&&Ld&&(T(Ed.parentNode),T(Fd.parentNode),T(Gd.parentNode)),ge=l("addAlly"),ge.onclick=()=>{ge.style.opacity=.25;E[289](ge.$,1)},l("menuctrl").onclick=function(){(ke=!ke)?(l("menuctrl").style.cssText="",l("menu").style.cssText="",l("resources").style.cssText=""):(l("menuctrl").style.left=
"0px",l("menuctrl").style.backgroundPosition="100px",T(l("menu")),370>window.innerHeight&&(l("resources").style.cssText="width:100%;left:0px"));E[167](ke)},l("minimapb").onclick=function(){if(Re=!Re)le=ke,ke=!0,l("menuctrl").onclick(),l("minimapb").style.filter="drop-shadow(0px 0px 2px #fff)";else{le&&(le=0,l("menuctrl").onclick());R("bigMap");l("minimapb").style.cssText="";for(var b=document.getElementsByClassName("alertdmg"),c=0;c<b.length;c++)T(b[c])}},l("teamchat").onchange=function(){l("msginputGame").focus()},
l("msgButton")&&(l("msgButton").onclick=Se),l("diplomacyButton").onclick=dd,Bd=l("bottominfo"),T(Bd),Te(),l("stock").onclick=E[31],l("gameMenu").onclick=Ue;l("minimap").addEventListener("mousedown",Ve);l("bigMap").addEventListener("mousedown",Ve);l("bigMap").addEventListener("touchstart",Ve)}
function Te(){if(!S){var a=4;if(Ld){var b=Le(),c=b?window.innerWidth/U:window.innerHeight/U;240>c?a=1:295>c?a=2:344>c?a=3:700<c&&1020<window.innerWidth/U&&(a=b?window.innerWidth/U-l("menbak2").getBoundingClientRect().x-132:window.innerHeight/U-l("menbak2").getBoundingClientRect().y-132,a=Math.floor((a+5-24)/53),24<a&&(a=24))}a*=2;if(!Ad||Ad.length!=a){b=l("orders");b.innerHTML&&(b.innerHTML="");Ad=[];for(c=0;c<a;c++){let d=K("button",b);d.ontouchstart=We;d.ontouchend=Xe;d.onmousedown=Ye;d.onmouseup=
Ze;d.za=c;d.onmouseenter=$e;d.onmouseout=af;Ad[c]=d}E[189](a,!D.o)}}}var bf,cf;function We(a){cf=a.changedTouches[0].pageX;bf=a.changedTouches[0].pageY}function Xe(a){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY,d=Math.sign(c-bf);p(d,c,bf);48<d*(c-bf)?(E[32](16,1),E[15](this.za,0<d?2:0),E[32](16,0)):(55<Math.sign(b-cf)*(b-cf)&&(E[32](16,1),E[32](18,1),E[15](this.za,0),E[32](16,0),E[32](18,0)),p(a))}window.clearleftar=function(){Cd.Oa.className=""};var df;
function Ve(a){var b=E[47](),c=a.offsetX,d=a.offsetY;df=this.getBoundingClientRect();b="touchstart"==a.type;if(0===a.button||b)document.addEventListener(b&&"touchend"||"mouseup",function m(){ef=!1;document.removeEventListener("mouseup",m);document.removeEventListener("mousemove",ff)}),ef=!0,ff(a),document.addEventListener(b&&"touchmove"||"mousemove",ff);else if(2===a.button){var e=parseInt(a.target.style.width),g=parseInt(a.target.style.height);b=E[47]();c=Math.floor(b*c/e*32)/U;d=Math.floor(b*d/
g*32)/U;E[22](c,d,2,0,!0,a.shiftKey)}}function gf(a,b,c,d,e,g,h,m,q,t,r,u,v,x){v=g?gf.bc:l("guideTable").getElementsByTagName("tr")[v].getElementsByTagName("td")[u];var y="";g||(y+=`<span>${Xb[u]}</span>`);y+=`<div ${g&&"class='spchild'"||""}>
    <div class="prevIcon" style="background-position-y:${48*e}px"></div>
    <ul>
    <li class="guiTitle">${N(a)}</li>
    ${x&&`<li class="desc">${N(x)}</li>`||""}
    <li><span>${N(66)+":"}</span> ${m&&m+"<img src='nehhon/gold.gif'>"||""} ${q&&q+"<img src='nehhon/wood.gif'>"||""} ${t&&t+"<img src='nehhon/food.gif'>"||""}  ${r&&r+"<img src='nehhon/stone.gif'>"||""} </li>
    `;h&&1!=h||(y+=`
    <li><span>${N(4)}:</span> ${b}</li>`);h||(y+=`
    <li><span>${N(7)}:</span> ${c}</li>
    <li><span>${N(5)}:</span> ${d}</li>`);a=K("div",v,y+"</ul>\n    </div>\n    ");g||(gf.bc=a)}window.insertInfo=gf;
async function hf(){if(!l("guide1")){let m=await (await fetch(`nehhon/hl${({es:1,it:1,pt:1,pl:1,bg:1})[k.va]&&k.va||"en"}.json`)).json(),q=m.BASICTR;var a=fd("",2);a.id="guide1";let t=K("h2",a,"","color:var(--color1);font-size:18px;height:46px;margin-top:0px;text-align:left;text-shadow:0px 0px 10px"),r=K("div",a);r.id="hxtrbtn";var b=K("div",a);b.id="helpbtn";let u=K("div",a);u.id="helpcnt";let v="tech unit building item order howto whatis hotkey".split(" ");var c=function(z){z=m[z];let w=K("dl",
u);for(let A in z){let C=z[A];p(C);let F=C.icon.split(",");K("dt",w,`${C.brief}`,`cursor:inherit;background-image:url(nehhon/H${F[0]}.webp); background-position:0px ${-48*(F[1]-1)}px`);K("dd",w,`${C.detail}`,"display:block")}},d=function(z){u.innerHTML="";u.scrollTop=0;for(var w=z.parentNode.children,A=0;A<w.length;A++)w[A].style.border=w[A]==z?"1px solid":""},e=function(z,w){d(w);z=m[z];w=K("dl",u);for(let A in z){let C=z[A],F=C.icon.split(",");K("dt",w,`${C.brief}`,`cursor:inherit;background-image:url(nehhon/H${F[0]}.webp); background-position:0px ${-48*
(F[1]-1)}px`);K("dd",w,`${C.detail.split("~ ")[1]}`,"display:block")}},g=function(z){u.scrollTop=0;if("UNITS"==z){var w=K("button",r,q.table);w.onclick=function(){d(this);jf(u)};w.onclick();K("button",r,q.bonuses).onclick=function(){d(this);kf(u)};K("button",r,q.bonuses_inv).onclick=function(){d(this);kf(u,1)}}"BUILDINGS"==z&&(K("button",r,q.bonuses).onclick=function(){d(this);kf(u,0,1)},K("button",r,q.bonuses_inv).onclick=function(){d(this);kf(u,1,1)});var A="TECHNOLOGIES"==z;if(!A&&(w=K("button",
r,`${q.common}`),w.onclick=function(){e(z+" (Common)",this)},"UNITS"!=z))w.onclick();w=K("button",r,`${q.euro}`);w.onclick=function(){e(z+(A&&" (European)"||" (Euro)"),this)};K("button",r,`${q.arab}`).onclick=function(){e(z+" (Arabian)",this)};K("button",r,`${q.asia}`).onclick=function(){e(z+" (Asian)",this)};if(A)w.onclick()},h=function(z){z=m[z];let w=K("dl",u);for(let A in z){let C=z[A],F=K("dt",w,`\u2b9e ${C.brief}`,"padding-left:10px;height:auto"),L=K("dd",w,`${C.detail}`,"padding-left:10px;display:none;margin-top:4px;margin-left:21px;padding-bottom:6px");
F.onclick=()=>{"none"==L.style.display?L.show():T(L)}}};let x=[()=>g("TECHNOLOGIES"),()=>g("UNITS"),()=>g("BUILDINGS"),()=>c("ITEMS"),()=>c("COMMANDS"),()=>h("How to ..."),()=>h("What is ..."),function(){var z=m.HOTKEYS,w="<br>";for(let A in z)w+=`${A} \ud83e\udc26<span style="color:#fff1c6;margin-left:7px">${z[A]}</span><p>`;u.innerHTML=w}],y="";for(let z=0;z<v.length;z++)a=K("button",b,"",`background-position-y:${45*-z}px`),a.onclick=function(){let w=b.children;for(let A=0;A<w.length;A++)w[A]==
this?this.className="active":w[A].className="";y=q[v[z]];t.innerHTML=y;u.innerHTML="";r.innerHTML="";x[z]()},a.onmouseenter=function(){t.innerHTML=q[v[z]]},a.onmouseout=function(){t.innerHTML=y};b.children[1].onclick()}}window.showGuide=hf;
async function lf(){let a=fd("",2);a.id="changelog";O("p",a,536,"font-size:29px;margin-top:0px;border-bottom:1px solid");let b=(await (await fetch("nehhon/changes.txt")).text()).split("##");for(let e=1;e<b.length;e++){let g=b[e].split("\n");var c=g[0].substr(0,3),d=g[0].split(" ")[1];d&&=" - "+d;K("span",a,"v"+c/10+(d||""));c=K("ul",a);for(d=1;d<g.length-1;d++)K("li",c,g[d])}}var mf,nf,of,pf,qf,rf;window.propsextend=function(a,b,c,d,e,g,h,m){mf=mc(a||0,b||0);nf=mc(c||0,d||0);of=e;pf=g;qf=h;rf=m};
var sf,tf,Tf=[{i:856,m:a=>{uf=a;vf!=wf+uf&&(xf=yf,vf=wf+uf,zf=Date.now(),Af=Gc)}},{i:857,m:a=>{wf=-a;vf!=wf+uf&&(xf=yf,vf=wf+uf,zf=Date.now(),Af=Gc)}},{i:859,m:a=>{Bf=a;Cf!=Bf+Df&&(xf=yf,Cf=Bf+Df,Ef=Date.now(),Ff=Fc)}},{i:858,m:a=>{Df=-a;Cf!=Bf+Df&&(xf=yf,Cf=Bf+Df,Ef=Date.now(),Ff=Fc)}},{i:862,m:a=>{(Re=a)||R("bigMap")}},{i:863,m:a=>{a&&Gf(1)}},{i:854,m:function(a){if(a||!Hf)if(tf=a,E[32](220,a),G){var b=If;Jf[0]=a;Kf.queue.writeBuffer(b,0,Jf)}else B.uniform1i(B.getUniformLocation(V,"hideTrees"),
a)}},{i:446,m:a=>{a||S||(a=parseInt(f.stdcolors)?0:1,f.stdcolors=a,Lf(a))}},{i:47,m:a=>{if(a)if(l("playingMenu")&&"none"!=l("playingMenu").parentNode.parentNode.style.display)Mf.onclick();else Ue()}},{i:65,m:Se},{i:848,m:a=>{E[32](8,a)}},{i:463,m:a=>{E[32](9,a);Nf||(a?dd():l("diplomacy")&&Q(l("diplomacy")))}},{i:850,m:a=>{E[32](81,a)}},{i:853,m:a=>{E[32](32,a)}},{i:864,m:a=>{Of=a;E[32](17,a)}},{i:865,m:a=>{Nf=a;E[32](16,a)}},{i:866,m:a=>{Hf=a;E[32](18,a)}},{i:427,m:a=>{E[32](112,a)}},{i:462,m:a=>
{E[32](113,a)}},{i:512,m:a=>{E[32](114,a)}},{i:855,m:a=>{a&&(Pf=(Pf+1)%4,E[190](Pf),2==Pf?R("playersinfo"):3==Pf?(R("playersinfo"),R("topinfo")):(Sd(l("playersinfo")),Kd("topinfo")))}},{i:527,m:a=>{E[32](116,a)}},{i:851,m:a=>{E[32](117,a)}},{i:852,m:a=>{E[32](118,a)}},{i:528,m:a=>{E[32](119,a)}},{i:849,m:a=>{l("msgs1")&&!a&&("none"==l("msgs1").style.display?Kd("msgs1"):(R("msgs1"),Ya("Chat hidden")))}},{i:513,m:a=>{E[32](121,a)}},{i:514,m:a=>{E[32](122,a)}},{i:515,m:a=>{E[32](123,a)}},{i:867,m:a=>
{E[32](124,a)}},{i:868,m:a=>{E[32](125,a)}},{i:872,m:a=>{S||!D.o||D.l||a||(Qf?(J(Qf),Qf=0,Rf()):(Qf=K("div",document.body,"\u23f8","position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center; pointer-events:none;font-size:44px;text-shadow:0px 0px 20px #000"),D.l||S||(E[98](),Sf=1)))}}],Qf,Uf=a=>" "==a?"SPACE":"ARROWUP"==a?"\u2191":"ARROWDOWN"==a?"\u2193":"ARROWRIGHT"==a?"\u2192":"ARROWLEFT"==a?"\u2190":a,Wf=()=>{let a=fd("",1);sf||(f.bshrct||(f.bshrct='{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}'),
sf=JSON.parse(f.bshrct));var b=K("div",a);b.className="btrow";O("button",b,832).onclick=()=>{Vf(h=>{sf=JSON.parse(h.target.result);Q(a);Wf()})};O("button",b,8).onclick=()=>{var h=new Blob([JSON.stringify(sf)],{type:"text"});Zf(h,"control.tzcnt")};O("button",b,542).onclick=()=>{sf=JSON.parse('{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}');
Q(a);Wf()};a.children[0].addEventListener("click",()=>{f.bshrct=JSON.stringify(sf)});var c=K("div",a);c.id="keys0";b=K("div",a);b.id="keys";let d=sf.basic;var e=0;for(let h of Tf){h.id=e++;K("div",c,N(h.i).toLowerCase());let m=K("span",c,Uf(d[h.id]));h.M=m;m.onclick=()=>{let q=K("div",document.body,N(846),"z-index:4;position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),t=r=>{if(0>"123456789".split("").indexOf(r.key)){r=r.key.toUpperCase();
for(let u of Tf)d[u.id]==r&&(d[u.id]="",u.M.textContent="");d[h.id]=r;m.textContent=Uf(r)}J(q);document.removeEventListener("keyup",t)};document.addEventListener("keyup",t)}}for(let h=0,m=E[261]();h<m;h++){E[260](h);var g=$f.name;if($f.Ma||!g||109==g||844==g||845==g)continue;c=document.createElement("div");e=K("div",c);ag(e);let q=bg[$f.type]||"";q&&=N(q)+" -> ";g=q+N(g);K("div",e,g);let t=K("span",c),r=sf[h];if(r)for(let v of r){let x=K("div",t);K("span",x,v);K("div",x,"\u00d7").onclick=()=>{r.splice(r.indexOf(v),
1);J(x)}}let u=K("div",t,"+","background:#00ff0021;font-size:21px;color:#00df00;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{let v=K("div",document.body,N(846),"z-index:4;position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),x=y=>{p(y);let z=y.key.toUpperCase();if((!r||0>r.indexOf(z))&&0>"Tab Shift Control Alt ContextMenu 1 2 3 4 5 6 7 8 9 0 Meta".split(" ").indexOf(y.key)){let w=document.createElement("div");t.insertBefore(w,
u);K("span",w,y.key);K("div",w,"\u00d7").onclick=()=>{r.splice(r.indexOf(y.key),1);J(w)};r||(r=[],sf[h]=r);r.put(z)}J(v);document.removeEventListener("keyup",x)};document.addEventListener("keyup",x)};cg(c,b,g)}},dg;
window.writeProps=function(a,b,c,d,e,g,h,m,q,t,r,u,v,x,y,z){let w=Bd;if(m){let ea=K("span",w);K("span",ea,N(67)+": ","color:rgb(255 116 121)");ea.className="red";var A=oc(E[5](),m);let Aa=0;for(let wa=0;wa<m;wa+=4){var C=O("div",ea);let Ia=K("span",C);O("span",C,A[wa]);Aa+=!A[wa+3];Ia.className="icd1"+(A[wa+3]?" invd":"");eg(Ia,48*A[wa+1]);if(fg&&(C=gg[A[wa+2]]))for(let Ba of C)Ba.classList.add("mrkd"),dg.push(Ba)}Aa||(ea.style.opacity=".4",ea.style.background="#ffffff0f")}2!=t||r||O("span",w,834,
"background:#ff000080;padding:4px");(m=4!=u&&bg[pf]||"")&&(m="<span style='color:#b5953d'>"+N(m)+" -></span> ");g&&K("span",w,m+N(g),"color:var(--color1)");qf&&(g=M("div",w,"margin:6px 0px"),g.className="dataIcon",eg(g,-48*qf));if(6>u&&(g=M("div",w,"width:100%"),4>u)){g=M("div",g,"border:2px solid #141414;padding:6px;background:#00000033");if(0==u)K("span",g,hg(0,1)[z]+" -> "),K("span",g,2147483647==v?N(40):"+"+v,"color:#0f0");else if(1==u||2==u){O("div",g,765);z=2==u?"%":"";v=[{h:1,id:v},{h:3,id:x},
{h:-1,id:y},{h:6,id:q}];for(var F of v)F.id&&(v=M("div",g,"display:flex;gap:3px;align-items:center;margin-top:7px"),M("div",v,`background:url(nehhon/icons2.webp) 0px ${-20*F.h}px;width:20px;height:20px`),K("span",v,"+"+F.id+z,"color:#0f0"))}else 3==u&&(K("span",g,N(767)+" -> "),K("span",g,100-v+"%","color:#0f0"));if(nf.length){F=M("div",g);F.className="nxtsh";for(var L of nf)E[196](L),rf==W.race?(v=document.createElement("div"),F.prepend(v)):v=K("div",F),v.className="dataIcon",eg(v,W.C/2)}}if(mf.length){L=
M("div",w,"width:100%");F=M("div",L,"background:#004a0091");K("span",F,N(770)+":","color:rgb(116 255 128)");F.className="red";for(let ea of mf)if(E[260](ea,ig),$f.pc&&(v=M("div",F),ag(v),O("span",v,$f.name),fg&&(v=gg[ea])))for(let Aa of v)Aa.classList.add("mrkd1"),dg.push(Aa);1==F.children.length&&T(L)}if(mf.length||5!=u)h=0;h&&O("span",w,h,"font-size:11px;max-width:232px");if(a||b||c||d||q)h="",a&&(h+=a+"<img src='nehhon/gold.gif' /> "),b&&(h+=b+"<img src='nehhon/wood.gif' /> "),c&&(h+=c+"<img src='nehhon/food.gif' /> "),
d&&(h+=d+"<img src='nehhon/stone.gif' /> "),q&&(h+=q+"<img src='nehhon/mana.webp' /> "),a=K("span",w,h,"display:flex;align-items:center;gap:4px;border-top:2px solid rgba(255, 215, 93, 0.18);padding-top:5px;width:100%"),of&&(a=M("div",a,"display:flex;gap:3px;align-items:center"),M("div",a,"background:url(nehhon/icons2.webp) 0px -150px;width:15px;height:15px;background-size:100%"),K("span",a,of+"s"));let P;if(a=sf[e]){E[272]();a:for(let ea of a)for(a=0;3>a;a++)for(b=0;b<jg.length;b++)if(c=jg[b],(d=
sf[c])&&d[a]==ea)if(c==e){P=ea;break a}else continue a}P&&(K("span",O("span",w,841,"color:#858585;margin-top:8px;font-size:9px;align-self:end"),P).className="shotcut")};var kg;function $e(){if(!Ka){var a=this.za;E[40](a);Bd.innerHTML&&(Bd.style.cssText="");kg=a}}function af(){E[151](this.za);T(Bd);kg=void 0;Bd.innerHTML=""}var lg;window.rockyterrwarn=()=>{lg||(lg=K("div",l("content"),"\u26a0\ufe0f "+N(914)),lg.className="mapalert2");lg.show()};window.delrockyterrwarn=()=>{lg&&T(lg)};
function Ze(){}function Ye(a){E[15](this.za,a.button)}let mg;
window.qmenu=function(a,b,c,d,e,g,h,m,q,t,r,u){if(!S)if(g=l("dataMenu"),void 0==a)g&&(Q(g),clearInterval(mg),mg=0);else{let v;g?(v=g,v.innerHTML=""):(v=fd("",0,"font-size:15px"),v.id="dataMenu",mg&&clearInterval(mg),mg=setInterval(()=>E[238](1),1E3));O("div",v,574,"margin-bottom:16px;color:var(--color1)");g=["gold","wood","food","stone","pop"];a=[a,b,c+e,d,h];b=M("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");for(c=
0;5>c;c++)K("div",b,a[c],"min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+`background:url(${"nehhon/"+g[c]}.gif) no-repeat;`);O("div",v,575,"margin-top:32px;margin-bottom:16px;color:var(--color1)");b=M("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");a=[m,q,t,r];for(m=0;4>m;m++)K("div",b,ng(a[m]/40,2)+"/s","min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+
`background: url(${"nehhon/"+g[m]}.gif) no-repeat;`);O("div",v,650,"margin-top:36px;margin-bottom:16px;color:var(--color1)");m=nc();q=M("div",v,"display: grid;\n    grid-template-columns: repeat(6,auto);\n    justify-items: center;\n    align-items: center;\n        padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");K("div",q);K("div",q);for(t=0;4>t;t++)K("img",q).src=`${"nehhon/"+g[t]}.gif`;for(g=0;g<u;g+=7)for(t=
g%14?"color:#ffe9a5":"",M("div",q,`width:4px;background:${kd(m[g])};border-radius:1px;height:16px;`),K("div",q,jd(m[g+2],m[g+1]),"margin-left:3px;min-width:152px;justify-self:left;"+t),r=0;4>r;r++)K("div",q,og(m[g+3+r]),"text-align:center;min-width:68px;padding:6px 4px;"+t)}};function O(a,b,c,d){return K(a,b,N(c),d)}function M(a,b,c,d){return K(a,b,"",c,d)}var ef;function pg(){location.hash="";history.replaceState(null,null," ")}
function qg(a){D.Mc||D.o||(Sd(uc),rg(),this.parentNode&&(this.parentNode.style.display="none"),D.l=0,5!=a&&(location.hash="",setTimeout(pg,200)))}var sg=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1];
function tg(){if(ug){Bb(ug);for(var a=pb(qb),b=E[28](),c=1;c<b;c++)K("div",ug,jd(a[3*c+2])),K("div",ug,a[3*c+1]+"%")}}window.waitingList=tg;let ug;var xg=()=>{if(l("waitList")){var a=45-Math.floor((Date.now()-vg)/1E3);0>a&&(a=0);tg.xb&&(tg.xb.textContent=wg(N(891),a));setTimeout(xg,1E3)}};
window.waitlistsetup=function(){let a=fd("");a.id="waitList";a.parentNode.parentNode.style.background="#000";a.innerHTML="";O("span",a,68);tg.xb=K("span",a,"...","display: block; color: rgb(0, 255, 0); font-size: 12px; margin-top: 9px; font-variant: tabular-nums;");ug=K("div",a);K("button",l("waitList"),N(91)).onclick=se;xg()};
function ad(){if(S||1!=f.nightcycle)c=new Float32Array([1,1,1,1]);else{var a=(.025*D.W/D.Va*24+D.Wa)%24,b=~~a;a-=b;Hd&&(Hd.style.backgroundPosition="0 -"+36*b+"px");var c=new Float32Array([sg[4*b],sg[4*b+1],sg[4*b+2],sg[4*b+3]]);b=(b+1)%24;c[0]+=(-c[0]+sg[4*b])*a;c[1]+=(-c[1]+sg[4*b+1])*a;c[2]+=(-c[2]+sg[4*b+2])*a;c[3]+=(-c[3]+sg[4*b+3])*a}b=c;G?Kf.queue.writeBuffer(yg,0,b):(B.useProgram(X),B.uniform4fv(zg,b),B.useProgram(V),B.uniform4fv(Ag,b))}var Fc=0,Gc=0,Cf=0,vf=0,xf,zf,Af,Ef,Ff;
function Bg(a,b,c){var d=Hc;if(1==f.unlimitedZoom||S)Fc=-a,Gc=-b;else{var e=G?1:Y,g=window.innerWidth,h=window.innerHeight,m=E[47](),q=Ka?0:d*k.R/32;a/=32;b/=32;var t=d*g/32;d=d*h/32;g=g/32*e;e*=h/32;h=a+.5*(g-t);var r=b+.5*(e-d);g<m&&e<m&&(h<-q?a=.5*-(g-t)-q:h+t>m&&(a=m-t-(g-t)/2),0>r?b=.5*-(e-d):r+d>m&&(b=m-d-(e-d)/2));Fc=32*-a;Gc=32*-b}if(!c)E[25](0,0,0)}
function ff(a){if("touchmove"==a.type||"touchstart"==a.type)if(a.target==l("bigMap"))a=a.targetTouches[0];else return;var b=a.target==l("bigMap")?23:0,c=E[47](),d=a.pageX-(df.x+b)*U;a=a.pageY-(df.y+b)*U;var e=df.width-2*b;b=df.height-2*b;var g=Cg.height*b/(32*c)*U;d-=Cg.width*e/(32*c)*U*.5;d=Math.round(.5+d*c/e)/U;a=Math.round(.5+(a-.5*g)*c/b)/U;Bg(32*d,32*a);0==ef&&document.removeEventListener("mousemove",ff)}var Of=0,Nf=0,Hf,Dg={};
function Se(a){if(a&&!S&&!Of){let c=!1;if(!l("enterwindow")){var b=fd(`
            <h2 id="sendMessageH2">${N(65)}</h2>
            <input id="msginputGame" />
           
            `,2,"",1);b.parentNode.parentNode.className+=" nobackdrop";b.id="enterwindow";c=!0;let d=K("button",b,"GIF");d.className="gif";d.onclick=()=>{T(l("enterwindow").parentNode.parentNode);Eg()};K("p",b,`${N(405)} <label class="container" style="margin-left:6px;display:inline"><input id="teamchat" type="checkbox"><span class="checkmark"></span></label>`,"text-align:right;color:#c79d45")}b=l("enterwindow").parentNode.parentNode;""!=b.style.cssText||c?(Ka&&l("msgButton")&&(l("msgButton").style.filter=
"drop-shadow(0px 0px 2px #fff)"),b.style.cssText="",l("msginputGame").focus()):(Fg(),T(b),Ka&&l("msgButton")&&(l("msgButton").style.cssText=""))}if(Of)E[32](13,a)}var wf=0,uf=0,Df=0,Bf=0,Pf=0,yf=0,Mf;document.oncontextmenu=function(a){return a&&"INPUT"==a.target.nodeName?!0:!1};
function Gg(){if(!S){l("attackmenu")&&(R("magicworkshopmenu"),R("tradingmenu"),R("attackmenu"),R("defencemenu"),R("levelmenu"),R("progressone"),R("manamenu"),R("manamenu1"),R("progressmana"),R("plavatar"),ge&&T(ge),yd.innerHTML="",td.innerHTML="",ud.innerHTML="",l("manamenu").innerHTML="",vd.innerHTML="",wd.innerHTML="",zd.innerHTML="",xd.value="",zd.maxLength="");Ka&&(l("delunit").style.display="none");for(let a=0;a<Ad.length;Ad[a++].innerHTML="");Hg()}}window.menuDefect=Gg;var Ig;
function Jg(a,b){Kg&&(K("li",Kg,a,"color:#"+b),Kg.scrollTop=Kg.scrollHeight)}window.lddsts=function(){l("msgs1").className="gameFinished";let a=K("button",document.body,N(908),"\n    position: fixed;\n    background: #000;\n    padding: 8px;\n    font-size: 20px;\n    width: 209px;\n    text-align: left;\n    border-left: 3px solid #00ff00 !important;\n    top: 66px;\n    right: 0px;\n    box-shadow: 0px 0px 20px #9c0000;"),b=Lg(1);a.onclick=function(){b.parentNode.parentNode.style.display=""}};
function ng(a,b,c){a=Math.round(a*10**b)/10**b;if(c)return a;a=a.toString().split(".");return a[0]+(a[1]&&"<strong>.</strong>"+a[1]||"")}function og(a,b){return 1E6<=a?ng(a/1E6,1,b)+"M":1E5<=a?ng(a/1E3,0,b)+"k":1E3<=a?ng(a/1E3,1,b)+"k":a}function Mg(a,b){let c;a?c=a&&md[a]?md[a].avatar||113:113:b&&(c=b==E[112]()?f.avatar||113:E[185](b));c||=113;return`nehhon/Q${c}.webp`}var Ng;function Og(){var a=l("stbutts").children;for(let b=0;b<a.length;b++)a[b].className=""}var Pg;
function Qg(a){Og();J(l("auxtab"));l("stats").style.display="table";a.className="a"}var Rg;function eg(a,b){a.style.backgroundPositionY=b+"px"}
function kf(a,b,c){a=K("div",a);let d=E[90]();a.id="bonustable";let e=nc();for(let m=0;m<d;m++){let q=E[199](m,b,!c);if(!q)continue;E[196](m);var g=K("div",a);g.dataset.title=N(W.name);Sg(g,W.C);g=K("div",a);let t={};for(let r=0;r<q;r+=2){let u=e[r];var h=e[r+1];t[h]||(t[h]=K("div",K("div",g,"<div>x"+h/100+"</div>",!b&&100>h||b&&100<h?"color:red":"")));h=K("div",t[h]);E[196](u);h.dataset.title=N(W.name);Sg(h,W.C)}}}
function jf(a){let b=E[198](),c=nc(),d=K("table",a);d.id="unittable";var e=[{name:""},{y:18},{y:1},{y:3},{y:6},{y:13},{y:12},{y:17},{y:10},{name:N(559)},{name:N(560)},{name:N(561)},{name:N(562)}];a=e.length;var g=K("tr",K("thead",d));for(let m=0;m<e.length;m++){let q=K("td",g,e[m].name);e[m].y&&eg(K("div",q),-20*e[m].y);q.onclick=()=>{var t=m,r=q,u,v=0;var x=!0;var y=1;for(z of r.parentNode.children)z.dataset.order&&(z.dataset.order="");for(p(y);x;){x=!1;var z=d.rows;for(u=1;u<z.length-1;u++){var w=
!1;var A=z[u].getElementsByTagName("TD")[t];var C=z[u+1].getElementsByTagName("TD")[t];if(0==y){if(A.Y>C.Y){w=!0;break}}else if(1==y&&A.Y<C.Y){w=!0;break}}w?(z[u].parentNode.insertBefore(z[u+1],z[u]),x=!0,v++):0==v&&1==y&&(y=0,x=!0)}r.dataset.order=y?"\u25b2":"\u25bc"}}e=K("tbody",d);for(g=0;g<b;g+=a){let m=K("tr",e);for(let q=0;q<a;q++){let t=K("td",m);var h=c[g+q];0==q?(E[196](h),h=N(W.name),t.dataset.title=h,Sg(t,W.C),t.Y=h.charCodeAt(1)+256*h.charCodeAt(0)):(10==q&&(h/=10),t.Y=h,t.innerHTML=h)}}}
function Tg(a,b,c){b=document.createElementNS("http://www.w3.org/2000/svg",b);for(let d in c)b.setAttribute(d,c[d]);a.appendChild(b);return b}
function Ug(a,b,c,d,e){var g=Vg;let h=b.length/c;var m=0;let q=1024/(h-1);var t=6*q,r=Math.ceil(70/t);for(var u=0;u<b.length;u++){var v=b[u];v>m&&(m=v)}u=1E3<m?100:10;u=(m=Math.ceil(m/u)*u)?633/m:0;v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.style.width="1204px";v.style.height="693px";v.setAttribute("viewBox","-90 -30 1204 693");v.setAttribute("width","100%");v.setAttribute("height","100%");a.appendChild(v);K("style",v,"\n.p>line{\n    stroke-width:2;\n    opacity:0.5;\n    pointer-events: none;\n}\n.p>line:hover{\n    opacity:0.5\n}\ncircle{\n    stroke-width:12;\n    stroke:#ffffff00;\n    r:1.5\n}\n.p>text{\n    display:none;\n    text-shadow:0px 0px 3px #000;\n    fill:#52ffba\n}\ntext{\n    stroke:none;\n    font-size:16px;\n}\n\ng:not(.op0) .p:hover > text{\n    display:block;\n}\n.op0{\n    opacity:.15;\n\n}\n.stk>.p>line{\n    stroke-width:3;\n    opacity:1\n}\n.stk>.p>circle{\n    r:1;\n    opacity:1\n}\n");
Tg(v,"line",{stroke:"#fff",x1:0,x2:0,y1:0,y2:633,"stroke-width":1,opacity:.75});Tg(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:633,y2:633,"stroke-width":1,opacity:.75});for(a=0;5>=a;a++){var x=633-126.6*a;a&&Tg(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:x,y2:x,"stroke-width":1,opacity:.25});Tg(v,"text",{x:-8,y:x,fill:"#fff","text-anchor":"end","alignment-baseline":"middle"}).innerHTML=og(Math.round(a/5*m),1)}for(let w=1,A=Math.ceil(10*h/60);w<A;w++)m=w*t,a=0==w%r,Tg(v,"line",{stroke:"#fff",x1:m,x2:m,y1:0,
y2:633,"stroke-width":1,opacity:a?.25:.1}),a&&(Tg(v,"text",{x:m,y:655,fill:"#fff","text-anchor":"middle"}).innerHTML=w+":00");for(let w=0;w<c;w++)for(t=Tg(v,"g"),r=g[w],t.onmouseover=()=>{Vg[w].style.color="#0f0"},t.onmouseout=()=>{Vg[w].style.color=""},r.hb=t,r.pa&&t.setAttribute("class","op0"),r=0;r<h&&r<e;r++){m=w*h+r;a=633-b[m]*u;x=r*q;let A=Tg(t,"g");A.setAttribute("class","p");var y=d[w*Rg+Rg-1],z=y>>16&255;let C=y>>8&255;y&=255;z||=1;C||=1;y||=1;let F=(z+C+y)/3;90>F&&(z*=90/F,C*=90/F,y*=90/
F);255<z&&(z=255);255<C&&(C=255);255<y&&(y=255);z=`rgb(${z},${C},${y})`;Tg(A,"text",{x,y:a-15,"text-anchor":"middle"}).innerHTML=Math.round(b[m]);Tg(A,"circle",{cx:x,cy:a,fill:z,opacity:r%6?0:1});r<h-1&&r<e-1&&Tg(A,"line",{x1:x,x2:x+q,y1:a,y2:633-b[m+1]*u,stroke:z})}}
function Lg(a,b){b||=NaN;Rg=b?50:61+(Wg?2:0);let c=Wg||b;const d=Rg,e=b&&b.G.length+1||E[28]();Ng=b.data||new lc(E[184](d),e*d);var g=b.data||pb(Ng),h=Nb("",1,"",a);Q(l("stsp"));h.id="stsp";h.parentNode.style.cssText="vertical-align:top;padding-top:56px";a&&T(h.parentNode.parentNode);var m=b&&b.G[0].id||g[d-3];a=b&&b.G[0].id||g[d-5];var q=K("div",h);K("img",q,"","display:inline-block;vertical-align:middle;height:96px;margin-right:16px;box-shadow:0px 0px 78px red;border:1px solid #ff000070").src=b&&
`nehhon/Q${b.G[0].Vb}.webp`||Mg(m,a);a=K("div",q,"","display:inline-block;vertical-align:middle;");a.id="MVPspan";K("span",a,"MVP","display:block;font-size:20px;color:#ffffffb3;");K("span",a,b?Xg(b.G[0].rb,b.G[0].name,b.G[0].role?Yg[b.G[0].role-1]:b.id):jd(m,g[d-2]),"font-size:30px;text-shadow:0px 0px 20px red").onclick=()=>{m&&I(60,Pb(m))};a=K("div",h);a.id="stbutts";b||(K("button",a,N(466)).onclick=function(){Zg(this,8,1)});b||(K("button",a,N(467)).onclick=function(){Zg(this,8,0,1)});b||(K("button",
a,N(465)).onclick=function(){Zg(this,9,0,1)});K("br",a);q=K("button",a,N(468));q.className="a";q.onclick=function(){Qg(this);l("stats").className=c?"r":"nr"};K("button",a,N(470)).onclick=function(){Qg(this);l("stats").className=c?"ra":"a"};K("button",a,N(470)+" 2").onclick=function(){Qg(this);l("stats").className=c?"rb":"b"};b||(K("button",a,N(522)).onclick=function(){$g(this)},K("button",a,N(469)).onclick=function(){Zg(this,7,0,0,1,!0)},K("button",a,N(521)).onclick=function(){Zg(this,7,0,1,0,!0)},
K("button",a,N(452)).onclick=function(){Zg(this,6,1,1)},K("button",a,N(453)).onclick=function(){Zg(this,10,1,0)},K("button",a,N(464)).onclick=function(){Zg(this,9,1)});a=K("table",h);a.id="stats";a.className=c?"r":"nr";var t=K("thead",a);q=K("tbody",a);var r=[{name:478},{name:21},{name:454},{name:455,Ka:1},{name:452,sub:[{name:58},{name:59}]},{name:453,Ka:1,sub:[{name:58},{name:59}]},{h:"icons2.webp",y:-10,da:20,title:881},{h:"gold.gif",sub:[{h:"gold.gif"},{h:"trade.gif"}]},{h:"wood.gif",sub:[{h:"wood.gif"},
{h:"trade.gif"}]},{h:"food.gif",sub:[{h:"food.gif"},{h:"milk.gif"},{h:"food1.gif"},{h:"fish.gif"},{h:"trade.gif"}]},{h:"stone.gif",sub:[{h:"stone.gif"},{h:"trade.gif"}]},{h:"allicons.png",y:96,da:48,title:477},{h:"allicons.png",y:95,da:48,title:232},{h:"icons2.webp",y:-5,da:20,title:471},{h:"icons2.webp",y:-6,da:20,title:476},{h:"icons2.webp",y:4,da:20,title:479},{name:464},{name:474},{name:475,Ka:1},{name:472},{h:"sgold.webp",title:473},{h:"swood.webp",title:473},{h:"sfood.webp",title:473},{h:"sstone.webp",
title:473},{h:"ngold.webp",title:882},{h:"nwood.webp",title:882},{h:"nfood.webp",title:882},{h:"nstone.webp",title:882},{h:"rgold.webp",title:883},{h:"rwood.webp",title:883},{h:"rfood.webp",title:883},{h:"rstone.webp",title:883}];c&&(r.unshift({name:732}),r.unshift({name:530}));var u={};a={};var v=K("tr",t);t=K("tr",t);K("th",v,"","background:none;border:none;min-width:0px;").rowSpan=2;K("th",v,"","background:none;border:none").rowSpan=2;K("th",v,"","background:none").rowSpan=2;for(var x=0;x<r.length;x++){var y=
r[x],z=y.name&&N(y.name).split(" ").join("\n")||y.y&&`<span style="background:url(nehhon/${y.h}) 0px ${y.y*y.da}px;width:${y.w||y.da}px;height:${y.da}px"></span>`||`<img src="${"nehhon/"+y.h}">`;y.Ka&&(a[v.children.length]=1);z=K("th",v,z);2>x&&c&&(K("div",z,"?","position:absolute;right:0px;left:0px;font-size:9px").dataset.title=x?N(734):N(733));y.title&&(z.dataset.title=N(y.title));if(y.sub){let A=K("td",t,"<- ->");A.onclick=()=>{var C=A;const F=l("stats").children[0].children[0].children;let L=
F.length;const P=l("stats").children[1].getElementsByTagName("td");let ea=C.ga?"":"none";C.innerHTML=C.ga&&"-> &nbsp; <-"||"<- ->";C.colSpan=C.ga?C.wb-1:1;let Aa=C.rc;for(let wa=0;wa<C.wb;wa++){wa?F[Aa+wa].style.display=ea:C.ga?T(F[Aa+wa]):F[Aa+wa].style.display="";for(let Ia=0;Ia<e-1;Ia++)wa?P[Ia*L+Aa+wa].style.display=ea:C.ga?T(P[Ia*L+Aa+wa]):P[Ia*L+Aa+wa].style.display=""}C.ga=!C.ga};A.rc=v.children.length-1;A.wb=y.sub.length+1;A.ga=1;A.Cc=z;for(z=0;z<y.sub.length;z++){var w=y.sub[z];u[v.children.length+
-3]=1;y.Ka&&(a[v.children.length]=1);K("th",v,w.name&&N(w.name)||`<img src="${"nehhon/"+w.h}">`,"display:none")}}else z.rowSpan=2}r=1+(c?2:0);for(let A=0;A<e-1;A++)for(t=K("tr",q),K("td",t,`<p>${A+1}</p>`),x=K("td",t,`<div style="background:${kd(b?b.G[A].color:g[A*d+d-1])}"></div>`+(b?Xg(b.G[A].rb,b.G[A].name,b.G[A].role?Yg[b.G[A].role-1]:b.G[A].id):jd(g[A*d+d-3],g[A*d+d-2]))),x.onclick=()=>{var C=b?b.G[A].id:g[A*d+d-3];C&&I(60,Pb(C))},x.className=g[b?A*d+d-1:A*d+d-14]?"winner":"loser",K("td",t,`<aside style="background-position-y:-${20*
(b?b.G[A].race:g[A*d+d-4])}px"></aside>`).className="stsrace",x=0;x<v.children.length+-3;x++)y=og(g[x+A*d]),v.children[x- -3].dataset.title==N(881)&&(y=Uc(g[x+A*d])),x!=r||y||(y="\ud83d\udec7"),z=K("td",t,y,u[x]&&"display:none"||""),x==r&&(z.style.color=g[x+A*d]==b.Sa||!b&&E[256](g[x+A*d])?"#0f0":"#f00"),c&&!x&&(z.style.color="#0f0"),z.Kb=g[x+A*d],g[x+A*d]!=y&&x!=r&&(z.dataset.title=z.Kb);q=l("stats").children[0].children[0].children.length;u=e-1;v=l("stats").children[1].getElementsByTagName("td");
for(r=3+(c?1:0);r<q;r++){if(c&&6==r||!c&&4==r)continue;t=0;let A,C;x=Infinity;for(y=0;y<u;y++)z=v[y*q+r],w=z.Kb,w>t&&(t=w,A=z),w<x&&(x=w,C=z);y=a[r];t&&(A.style.background=y?"#ff000040":"#00ff0040");(x||t)&&A!=C&&(C.style.background=y?"#00ff0040":"#ff000040")}return h}var Vg;
function $g(a){Og();J(l("auxtab"));var b=K("div",l("stats").parentNode,"","width:1250px");b.id="auxtab";R("stats");a.className="a";let c=pb(Ng),d=E[28]()-1;var e=[N(478),N(464),N(454),N(455),"Gold gathered","Wood gathered","Food gathered","Stone gathered","Population","Peasants",N(477),N(16),N(17),N(18),N(19)];a=K("div",b,"","white-space:break-spaces;margin-top:30px;text-align:left");let g=K("select",b,"","margin:auto;margin-top:15px;display:block;text-transform:uppercase");var h=K("span",b,"","float:right;margin-top:-25px;");
let m=c[0*Rg+Rg-13]/15,q=Math.floor(m/6),t=ah(h,m);t.oninput=function(){let v=parseInt(this.value);10*v/60>=q&&(v=m-1);this.J.innerHTML=Vc(1E4*v)};h=60*q/10;t.max=h;t.min=6;t.step=6;t.value=h;t.oninput();h=0;for(var r of e)K("option",g,r).value=h,h++;for(r=0;r<d;r++)e=K("span",a,jd(c[r*Rg+Rg-3],c[r*Rg+Rg-2]),"cursor:url(nehhon/hand.gif),default;display:inline-block;background:#ffffff14;padding:2px 4px 2px 6px;margin-right:7px;margin-bottom:7px;border-left:4px solid "+kd(c[r*Rg+Rg-1])),e.onclick=bh,
e.onmouseenter=ch,e.onmouseout=dh;let u=K("div",b,"","text-align:center");Vg=a.children;g.onchange=function(){let v=parseInt(this.value),x=parseInt(t.value)+1;t.value==t.max&&(x=m);let y=new Uint32Array(x*d);for(let z=0;z<d;z++){let w=pb(new lc(c[z*Rg+Rg-11],15*x));for(let A=0;A<x;A++)y[A+z*x]=w[15*A+v]}u.innerHTML="";Ug(u,y,d,c,m)};g.onchange();t.addEventListener("change",()=>g.onchange());for(b=0;b<d;b++)if(3<c[b*Rg+Rg-12]&&c[b*Rg+Rg-5]!=E[112]())Vg[b].onclick()}
function ch(){this.hb.setAttribute("class","stk")}function dh(){this.hb.setAttribute("class",this.pa?"op0":"")}function bh(a){this.pa=!this.pa;this.style.opacity=this.pa?"0.3":"";this.hb.setAttribute("class",this.pa?"op0":"");if(a)this.onmouseenter()}
function Zg(a,b,c,d,e,g){let h=8!=b&&!g&&6!=b&&10!=b,m=E[90]();Pg||=1200;var q=pb(Ng);Og();J(l("auxtab"));var t=K("table",l("stats").parentNode,"","width:"+Pg+"px"),r=K("tbody",t);r.className="tbl2";t.id="auxtab";t=l("stats").children[1].getElementsByTagName("tr");for(var u=0;u<t.length;u++){var v=K("tr",r);K("img",K("td",v)).src=Mg(q[u*Rg+Rg-3],q[u*Rg+Rg-5]);v.appendChild(t[u].children[1].cloneNode(1))}q=r.children;a.className="a";R("stats");a=pb(Ng);for(r=0;r<q.length;r++){t=pb(new lc(a[r*Rg+Rg-
b],m));u=K("td",q[r]);v=0;var x=void 0;let w={};do{var y=-1;if(g)for(x=0;x<m;x++)t[x]&&(t[x]<t[y]||0>y)&&!w[x]&&(y=x);else for(x=0;x<m;x++)(t[x]>t[y]||0>y)&&!w[x]&&(y=x);x=t[y];let A=t[y];if(!A)break;w[y]=1;var z=E[191](y,c,d,e);if(z){let C=g?Vc(A):og(A);z=K("span",u,`<span>${C}</span>`,(0>z?"background:url(nehhon/iconunits.webp);":"")+`background-position-y:${z}px`);if(g){if(y=E[192](y))z.dataset.title=C+" -> "+Vc(A+y)}else C!=A&&(z.dataset.title=A);h&&(v+=A)}}while(x);h&&K("td",q[r],"\u03a3 = "+
v,"color:var(--color1)")}}var eh,fh;window.popAlert=function(a){if(4==a){if(eh&&8E3>Date.now()-eh)return;eh=Date.now()}else{if(fh&&30>Date.now()-fh)return;fh=Date.now()}if(a=l(["gold","wood","food","stone","pop"][a]))a=a.getBoundingClientRect(),a=K("div",document.body,"",`left:${a.x+a.width/2}px;top:${a.y}px;`),a.className="alertpop",setTimeout(J,3E3,a)};
window.dmgAlert=function(a,b){var c=k.U,d=sd.getBoundingClientRect().top;xc("attack");Ka&&(Re||(setTimeout(function(){l("minimapb").style.cssText=""},8E3),l("minimapb").style.cssText="animation:dmganimdrop .15s alternate infinite;"),gh=hh=c=ih(),d=(window.innerHeight-c)/2,c=(window.innerWidth-c)/2,"vibrate"in navigator&&window.navigator.vibrate([200,50,200,50,200]),p(c,d));const e=E[47]();a=K("div",document.body,"",`left:${~~(a*hh/e)+c}px;top:${~~(b*hh/e)+d}px`);a.className="alertdmg";Ka&&!Re&&T(a);
setTimeout(J,16E3,a)};window.locationAlert=function(a,b,c,d,e){const g=E[47]();if(!(0>a||0>b||a>=g||b>=g||9<document.body.getElementsByClassName("alertloc").length||Ka)){xc("chat%20location");var h=k.U,m=sd.getBoundingClientRect().top;jh(0,1,c,0,d,e);a=K("div",document.body,"",`left:${~~(a*hh/g)+h}px;top:${~~(b*hh/g)+m}px`);a.className="alertloc";setTimeout(J,1E4,a)}};window.goldalert=function(){let a=K("div",document.body);a.className="alertgold";setTimeout(J,1E3,a)};
document.onkeydown=function(a){return a.ctrlKey&&a.shiftKey?!1:!(-1<[116,115,123].indexOf(a.keyCode))};const kh=[9,112,113,114,115,116,117,118,119,120,121,123];function lh(){for(var a=Object.keys(Dg),b=0;b<a.length;b++)Dg[a[b]]&&mh({keyCode:a[b],key:Dg[a[b]]})}var nh=(a,b)=>{if(a&&(a=sf.basic.indexOf(a.toUpperCase()),-1<a))return Tf[a].m(b),!0};
function oh(a){var b=a.keyCode,c=a.target==l("msginputGame");if(!(a.key&&ph&&sf.basic[8]!=a.key.toUpperCase()||"INPUT"==a.target.tagName||"TEXTAREA"==a.target.tagName||"true"==a.target.contentEditable)||c)if(c&&9==b&&(l("teamchat").checked=!l("teamchat").checked),(a.ctrlKey&&!c||a.altKey||0<=kh.indexOf(b))&&a.preventDefault(),!(!D.o||13!=b&&l("enterwindow")&&"displayblock"==l("enterwindow").className||c&&13!=b||(Dg[b]=a.key,nh(a.key,1)))){E[272]();a=a.key.toUpperCase();for(c=0;3>c;c++)for(let d=0;d<
jg.length;d++){let e=sf[jg[d]];if(e&&e[c]==a)return E[15](d,2147483647)}48<=b&&57>=b?E&&E[32](b,!0):65<=b&&90>=b&&81!=b&&E&&E[32](b,!0)}}let jg;window.shdwn=function(a,b){jg=mc(a,b)};function mh(a){var b=a.keyCode;a.key&&ph&&sf.basic[8]!=a.key.toUpperCase()||!Dg[b]||(Dg[b]=0,(a.ctrlKey||a.altKey||0<=kh.indexOf(b))&&a.preventDefault(),nh(a.key,0)||(48<=b&&57>=b?E&&E[32](b,!1):65<=b&&90>=b&&81!=b&&E&&E[32](b,!1)))}window.addEventListener("blur",function(){if(E&&E[32])E[32](16,!1)});
var qh,rh,sh,th,uh=!1;function vh(a,b){wh||(Fc=sh-(qh-a)*Hc,Gc=th-(rh-b)*Hc,Bg(-Fc,-Gc),xh())}var wh,yh,zh,Bh,Ch,Dh;function Eh(a,b){return 30>Math.sqrt((a-qh)**2+(b-rh)**2)}
function Fh(a){if(a.target==Cg){Gh=Hh=vf=Cf=0;var b=a.changedTouches[0],c=b.pageX;b=b.pageY;1==a.touches.length&&Bh&&300>Date.now()-Bh&&Eh(c,b)?(Ih(a.pageX,a.pageY),E[21](c,b,0),Ch=!0):(Bh=Date.now(),1<a.touches.length?clearTimeout(Dh):E[168]()||(clearTimeout(Dh),Dh=setTimeout(E[22],350,c,b,2,1,0,0,1),p(Dh)),sh=Fc,th=Gc,qh=c,rh=b,a.preventDefault())}}var Jh,Kh,Lh,Hh,Gh;
function Mh(a){var b=a.touches[0].pageX,c=a.touches[0].pageY;if(a.target==Cg){var d=E[168]();Eh(b,c)||clearTimeout(Dh);if(Ch||d)return E[25](b,c,1);2==a.touches.length?(b=a.touches,c=Math.sqrt((b[0].pageX-b[1].pageX)**2+(b[0].pageY-b[1].pageY)**2),yh?Gf(zh*yh/c,(b[0].pageX+b[1].pageX)/2,(b[0].pageY+b[1].pageY)/2,1):(yh=c,zh=Hc,wh=!0)):(a=Date.now()-Lh,Hh=-(Jh-b)/a,Gh=-(Kh-c)/a,Jh=b,Kh=c,Lh=Date.now(),vh(b,c))}}
function Nh(a){if(a.target==Cg){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY;clearTimeout(Dh);if(E[168]())E[25](b,c,1);var d=Eh(b,c)&&300>Date.now()-Bh;if(Ch||d||E[168]())Ig=!1,E[22](b,c,2*a.touches.length,Ch?1:2),Ch=!1;yh=void 0;0==a.touches.length?Date.now()-Lh&&(Cf=Hh||0,vf=Gh||0,Ff=Fc,Af=Gc,zf=Ef=Date.now(),xf=1):(b=a.touches[0].pageX,a=a.touches[0].pageY,sh=Fc,th=Gc,qh=b,rh=a);wh=!1}}
function Oh(a,b){if(!Ka){var c=window.innerWidth,d=window.innerHeight,e=a.pageX,g=a.pageY;if(a.target==Cg||b){if(uh)return vh(e,g);Ph(a.pageX,a.pageY);E[25](a.pageX,a.pageY,1)}if(screen.height-10<=d&&1==f.scrollmouse&&!ph){if(1.2===Math.abs(Cf)||0===Cf)Cf||(Ef=Date.now(),Ff=Fc),xf=0,Cf=1.2*((10>e)-(e>c-10));if(1.2===Math.abs(vf)||0===vf)vf||(zf=Date.now(),Af=Gc),xf=0,vf=1.2*((10>g)-(g>d-10))}}}
var Ih=(a,b)=>{G&&(Qh=[a,b],a=Rh(a,b),Ig=!0,Kf.queue.writeBuffer(Sh,0,new Float32Array([a.x,a.y,a.x,a.y])))},Ph=(a,b)=>{G&&Ig&&(Qh=[a,b],a=Rh(a,b),Kf.queue.writeBuffer(Sh,8,new Float32Array([a.x,a.y])))},Qh,Th;function Uh(a){if(a.target!=Cg)return Th=0;if(1==a.button&&a.pageX>k.R){uh=!0;var b=a.pageX;a=a.pageY;sh=Fc;th=Gc;qh=b;rh=a}else uh=!1,0==a.button&&Ih(a.pageX,a.pageY),E[21](a.pageX,a.pageY,a.button),Th=1}
function Vh(a){2<a.button&&a.preventDefault();if(a.target==Cg||Th)if(uh)uh=!1;else return Ig=!1,E[22](a.pageX,a.pageY,a.button,0,!1,a.shiftKey,a.ctrlKey,a.altKey)}window.addEventListener("mouseup",function(a){2<a.button&&a.preventDefault()});var Wh=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){Wh||(Wh=!0,Xh())});window.fstordprop=(a,b,c,d,e,g,h,m)=>{$f={icon:a,name:b,ub:c,Ma:d,unit:e,type:g,Pb:h,pc:m}};
var $f,ag=(a,b)=>{let c=K("div",a);c.className="dataOrder";eg(c,48*$f.icon);$f.unit&&!b&&(K("span",a,"->"),a=K("div",a),a.className="dataIcon",eg(a,48*$f.unit))};function Yh(a,b,c){E[260](a);if(!$f.Ma){var d=K("div",b);b=K("button",d,"\u00d7");b.className="closeIcon";b.onclick=()=>{c.splice(c.indexOf(a),1);J(d)};ag(d);K("span",d,($f.name&&N($f.name)||"")+($f.ub&&" - "+N($f.ub)||""))}}
var bg=[842,843,689,847],Zh=(a,b,c)=>{b=K("div",b);a=E[193](a);K("span",b,c,"font-size:23px;color:#"+("-"==c?"f00":"0f0"));c=K("div",b);eg(c,a);c.className="dataIcon"},$h=(a,b,c)=>{E[260](a);$f.Ma||((a=bg[$f.type]||"")&&(a=N(a)+" -> "),b=K("div",b,`<span style="font-size:23px">${c}</span> `+($f.name&&a+N($f.name)||""),`filter:hue-rotate(${"+"==c?90:-45}deg);margin:7px 0px`),ag(b,1))};
function ai(a,b){var c=bi();c=K("div",c);c.className="ordermod";let d=K("div",c),e=a.j[b];for(let g of e)Yh(g,d,e);a=K("button",c);a.className="sum";a.onclick=()=>{let g=bi();var h=K("div",g);h.className="ordermod ord2";h=K("div",h);for(let q=0,t=E[261]();q<t;q++){E[260](q);if($f.Ma)continue;let r=document.createElement("div");var m=bg[$f.type]||"";m&&=N(m)+" -> ";m=$f.name&&m+N($f.name)||"";cg(r,h,m||"zz");ag(r);K("span",r,m);r.onclick=()=>{e.push(q);Yh(q,d,e);Q(g)}}}}
var ci=(a,b,c,d)=>{if(c!=b){E[196](a);a=K("div",d);d=K("div",a);d.className="dataIcon";eg(d,W.C);var e=d=255,g=255;b>c&&(d=255/(b/c),g=255/(b/c));b<c&&(e=255/(c/b),g=255/(c/b));0>d&&(d=0);0>e&&(e=0);0>g&&(g=0);a=K("div",a);K("span",a,c+"%","color:#fff");K("span",a,"->","color:var(--color1);margin:0px 6px");K("span",a,b+"%",`color:rgb(${d},${e},${g})`)}};
function di(a,b,c,d){E[196](b);let e=K("div",a);a=K("button",e,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(ei(c,b),2);J(e)};a=K("div",e);a.className="dataIcon";eg(a,W.C);O("div",e,W.name);a=K("div",e);let g=M("input",a,"width:58px");g.oninput=fi;g.max=2**32-1;g.min=0;g.type="number";g.value=d;g.onchange=()=>{c[ei(c,b)+1]=xe(g)};K("span",a," %")}
var bi=()=>{let a=fd("",2);a.parentNode.parentNode.style.top=window.scrollY/U+"px";return a},gi=()=>{let a=Nb("",2);a.parentNode.parentNode.style.top=window.scrollY/U+"px";return a};function hi(a,b){b=K("div",b);b.className="mddunit bonusedit";p(a);let c=K("div",b);for(var d of a)ii(c,d,a);d=K("button",b);d.className="sum";d.onclick=()=>Ke(e=>{ii(c,e,a);a.push(e)})}let ji=a=>{a=hg(0,0,a);let b=[];for(let c=0;c<a.length;c++)a[c]&&b.push({name:a[c],id:c});b.sort(ie);return b};
function ki(a){a=K("div",a);a.id="consts";let b=li[3][0].data,c=ji();for(let d=0;d<c.length;d++){let e=c[d],g=b[e.id],h=K("input",a);h.value=g;h.type="number";h.onchange=()=>{b[e.id]=xe(h)};K("div",a,e.name)}}function ii(a,b,c){E[196](b);let d=K("div",a);a=K("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(c.indexOf(b),1);J(d)};a=K("div",d);a.className="dataIcon";eg(a,W.C);O("div",d,W.name)}
function mi(a,b){let c=a.j[b];a=bi();a=K("div",a);a.className="bonusedit";p(c);let d=K("div",a);for(b=0;b<c.length;b+=2)di(d,c[b],c,c[b+1]);a=K("button",a);a.className="sum";a.onclick=()=>Ke(e=>{di(d,e,c,100);c.push(e,100)})}
function ni(a,b){p(a,b);b=bi();b=K("div",b);b.className="buildgrid";p(a);let c=a.data[16],d=a.data[17],e=a.j[18];p(c,d);b.style.gridTemplateColumns=`repeat(${c},auto)`;for(let g=0;g<c*d;g++){let h=e[g],m=M("div",b,"background:#"+(h?"ff0000c0":"00ff00c0"));m.onmousedown=()=>{h=!h;m.style.background="#"+(h?"ff0000c0":"00ff00c0");e[g]=h}}}
var hg=(a,b,c)=>[wg(N(771),N(16)),wg(N(771),N(17)),wg(N(771),N(18)),wg(N(771),N(19)),!c&&(!S||a)&&(a&&" "||"")+N(42)+(b&&" (%)"||""),N(772)+" (%)",N(773),N(774),N(775),N(776),N(241)+" - "+N(561),N(377)+" - "+N(561),N(369)+" - "+N(561),N(364)+" - "+N(561),N(366)+" - "+N(561),N(370)+" - "+N(561),N(372)+" - "+N(561),N(367)+" - "+N(561),N(379)+" - "+N(561),N(378)+" - "+N(561),N(380)+" - "+N(561),N(777),N(778),N(779),void 0,N(363)+" - "+N(561),void 0,void 0,N(373)+" - "+N(561),N(780),void 0,N(368)+" - "+
N(561),N(375)+" - "+N(561),N(371)+" - "+N(561),N(374)+" - "+N(561),N(365)+" - "+N(561),void 0,void 0,a&&N(11)||void 0,N(377)+" - "+N(782),N(781),N(377)+" - "+N(383),N(377)+" - "+N(786),N(799),N(785),N(376)+" - "+N(383),N(364)+" - "+N(383),N(372)+" - "+N(383),N(366)+" - "+N(383),N(364)+" - "+N(782),N(364)+" - "+N(784),N(378)+" - "+N(784),N(787),N(378)+" - "+N(786),N(364)+" - "+N(786),N(366)+" - "+N(786),void 0,void 0,void 0,N(380)+" - "+N(786),N(372)+" - "+N(784),N(369)+" - "+N(383),N(370)+" - "+N(383),
N(801),N(802),void 0,N(788),N(363)+" - "+N(383),N(368)+" - "+N(383),N(371)+" - "+N(383),N(374)+" - "+N(383),N(375)+" - "+N(383),N(365)+" - "+N(782),N(365)+" - "+N(786),N(365)+" - "+N(383),N(380)+" - "+N(383),N(378)+" - "+N(383),N(379)+" - "+N(383),N(367)+" - "+N(383),N(800)+" - "+N(383),N(373)+" - "+N(383),N(800)+" - "+N(784),N(790),N(791),N(792),N(793),N(794),N(795),N(796),N(797),N(798),N(374)+" - "+N(782),N(416)+" - "+N(383),N(363)+" - "+N(784),N(363)+" - "+N(825),N(363)+" - "+N(782),N(363)+" - "+
N(786),N(826),N(827),N(828),N(829),N(830)],pi=(a,b,c)=>{c=K("div",c);K("span",c,"+"+a,"color:#fff");K("span",c,"->","color:var(--color1);margin:0px 6px");K("span",c,"+"+b,"color:"+oi(a,b))},oi=(a,b)=>{let c=255,d=255,e=255;b>a&&(c=255/(b/a),e=255/(b/a));b<a&&(d=255/(a/b),e=255/(a/b));0>c&&(c=0);0>d&&(d=0);0>e&&(e=0);return`rgb(${c},${d},${e})`};
function qi(a,b){let c=a.data;var d=c[1];if(5==d)return ai(a,4);var e=a.j[b];b=bi();b=K("div",b);b.className="techcf";p(e);if(0==d){ri(b,c[10],hg(),m=>{p(m);c[10]=m});K("span",b,"+");let h=K("input",b);h.value=c[12];h.type="number";h.onchange=()=>c[12]=xe(h)}else{if(1==d||2==d){var g=K("div",b);e=K("div",g);g.className="unitProps";g=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let h of g){M("div",e,`background:url(nehhon/icons2.webp) 0px ${-20*h.h}px;width:20px;height:20px`);
g=K("div",e,"+");let m=K("input",g);m.value=c[h.id];m.type="number";m.onchange=()=>c[h.id]=xe(m);2==d&&K("span",g," %")}}else if(3==d){d=M("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=M("input",d);h.value=c[12];h.type="number";h.onchange=()=>c[12]=xe(h);K("span",d,"%")}else{if(4==d){E[196](c[12]);a=M("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=M("div",a,"margin-right:8px");h.className="dataIcon";eg(h,W.C);let m=O("div",a,W.name);
h.onclick=()=>Ke(q=>{E[196](q);c[12]=q;eg(h,W.C);m.textContent=N(W.name)});return}if(333==d)for(d=M("div",b,"display:flex;gap:10px;align-items:center"),e=0;4>e;e++){nd(d,e);let h=2+e,m=M("input",d,"margin-right:8px");m.value=c[h];m.type="number";m.onchange=()=>c[h]=xe(m)}}hi(a.j[8],b)}}
function si(a,b){let c=a.j[b];a=bi();O("button",a,622,"margin-right:5px;margin-bottom:5px;color:var(--color1);padding:5px").onclick=()=>{for(let m of d.children){let q=m.children[2].children[0];if(!q.checked)q.onclick()}};O("button",a,623,"color:var(--color1);padding:5px").onclick=()=>{for(let m of d.children){let q=m.children[2].children[0];if(q.checked)q.onclick()}};let d=K("div",a);d.className="tchgrid cnttkk";a=E[90]();p(c);for(b=0;3>b;b++)for(let m=0;m<a;m++){var e=E[194](m,!b,1==b,2==b);if(e){var g=
-1<c.indexOf(m);let q=document.createElement("div");var h=N(E[89](m));cg(q,d,b+h,g);K("div",q,h);h=K("div",q);eg(h,e);h.className="dataIcon";e=M("div",q,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");g=Ge(e,t=>{t?c.push(m):c.splice(c.indexOf(m),1)},g);h.onclick=g.onclick}}}
function ti(a){if(li){var b=[60,55,23,155,0,0,0,0],c=[],d=2*b.length;for(var e of li){c.push(d,e.length);for(var g of e){d+=g.data.length;for(var h in g.j)d+=g.j[h].length,g.data[h]=g.j[h].length}}c.push(0,0,0,0,0,0,0,0);d=a?new Uint32Array(d):mc(E[265](d),d);d.set(c);p(c);for(e=0;e<b.length;e++)if(li[e]){g=li[e];h=b[e];let q=c[2*e],t=q+h*g.length;for(var m of g){d.set(m.data,q);q+=h;for(let r in m.j)d.set(m.j[r],t),t+=m.j[r].length}}if(a){a=new Uint8Array(d.buffer);b=4*d.length;c=E[79](b);c=ui(c,
b);for(m=0;m<b;m++)c[m]=a[m+0];c=E[80]();a=E[81]();a=ui(c,a);b=new Blob([new Uint32Array([d.length]),a.slice(0)],{type:"application/octet-binary"});Zf(b,"tzared.tzmod");p(a)}p(d)}}
var vi=()=>[[{name:""},{y:18},{y:1},{y:3},{y:13},{y:17},{y:12},{y:16},{y:6},{y:10},{name:559},{name:824},{name:561},{name:562},{name:739,la:1,T:1},{name:740},{name:741,j:1,click:ai},{name:742},{name:743,select:[0,N(757),1,N(758),2,N(759)]},{name:744,select:[1,"1x1",2,"2x2",3,"3x3",4,"4x4"]},{T:1,name:745,select:[0,N(16),1,N(17),2,N(18),3,N(19),4,N(754),55,N(677)]},{T:1,name:746,select:[0,N(16),1,N(17),2,N(18),3,N(19),55,N(677)]},{name:747,T:1},{name:748},{name:749,select:[0,N(755),1,N(756),2,N(811)]},
{name:726},{name:750,j:1,click:si,la:1},{name:751},{name:752,select:[0,N(46),1,N(45)],T:1},{name:753},{name:738,j:1,click:mi},{name:804},{name:821},{name:812,A:1},{name:818,A:1},{name:819,A:1},{name:820,A:1},{name:823,A:1},{s:264,H:1},{s:99,H:1},{s:25,H:1},{s:159,H:1},{s:219,H:1},{s:263,H:1},{s:78,H:1},{s:28,H:1},{s:217,A:1},{s:77,A:1},{s:76,A:1},{s:87,A:1},{s:23,A:1},{s:128,A:1},{s:32,A:1},{name:805,A:1}],[{name:""},{y:18},{y:13},{y:17},{y:12},{y:16},{y:10},{name:741,j:1,click:ai},{y:1},{name:559},
{name:824},{name:561},{name:739,la:1,T:1},{name:740},{name:742},{name:743,select:[0,N(757),1,N(758),2,N(759)]},{name:760,Da:1,min:1},{name:761,Da:1,min:1},{name:762,j:1,click:ni},{name:745,select:[0,N(16),1,N(17),2,N(18),3,N(19),4,N(754),55,N(677)]},{name:746,select:[0,N(16),1,N(17),2,N(18),3,N(19),55,N(677)]},{name:747,T:1},{name:748},{name:749,select:[0,N(755),1,N(756),2,N(811)]},{name:726},{name:822},{name:750,j:1,click:si,la:1},{name:751},{name:752,select:[0,N(46),1,N(45)],T:1},{name:738,j:1,
click:mi},{name:804},{name:821},{name:22,A:1},{name:812,A:1},{name:818,A:1,T:1},{name:823,A:1},{s:264,H:1},{s:99,H:1},{s:25,H:1},{s:159,H:1},{s:219,H:1},{s:263,H:1},{s:78,H:1},{s:28,H:1},{s:217,A:1},{s:77,A:1},{s:76,A:1},{name:805,A:1}],[{name:""},{name:620,click:qi,select:[0,N(764),1,N(765),2,N(766),3,N(767),4,N(768),5,N(769)]},{y:13},{y:10},{name:770,j:1,click:ai},{y:17},{y:12},{y:16},{T:1,j:1},{name:805,A:1}]];window.shmdchngs=()=>{De(1)};
function De(a){let b=fd("",1);b.id="mdd";wi();let c=vi();var d=[{Ga:58,click:()=>{xi(0,h,c)}},{Ga:59,click:()=>{xi(1,h,c)}},{Ga:469,click:()=>{xi(2,h,c)}},{Ga:470,click:()=>{ki(h)}},{Ga:874,click:()=>{var m=li,q=yi,t=vi();let r=K("div",h);r.id="modchanges";for(var u=0;3>u;u++){var v=q[u],x=m[u],y=t[u];for(let Ia=0;Ia<x.length;Ia++){var z=void 0;let Ba=x[Ia].data,Jb=v[Ia].data;for(let ha=0;ha<y.length;ha++)if(!(1==u&&21==ha||!u&&22==ha)){var w=Ba[ha],A=Jb[ha],C=x[Ia].data[0],F=y[ha];if(F.j){var L=
!1,P=v[Ia].j[ha],ea=x[Ia].j[ha];if(16==ha||8==ha||26==ha||7==ha||4==ha||8==ha){for(let la of ea)0>P.indexOf(la)&&(L=!0);for(let la of P)0>ea.indexOf(la)&&(L=!0)}else if(30==ha||29==ha){for(var Aa=0;Aa<ea.length;Aa+=2)0>ei(P,ea[Aa])&&(L=!0);for(Aa=0;Aa<P.length;Aa+=2)0>ei(ea,P[Aa])&&(L=!0)}if(!L)continue}else if(2==u&&1==ha){L=!1;P=[1,10,11,12,13,14,15];for(let la of P)if(Jb[la]!=Ba[la]){L=!0;break}if(!L)continue}else if(w==A)continue;z||(z=r,L=u,P=document.createElement("div"),E[196](C),C=N(W.name),
Sg(M("div",P,"background:#00000082"),W.C,0,0,W.jb),K("div",P,C,"color:var(--color1);border-color:#ffd75d40;background:#00000082"),cg(P,z,L+C),z=P);C=K("div",z);F.name?K("div",C,N(F.name)):F.y?eg(M("div",C,"background:url(nehhon/icons2.webp);width:20px;height:20px;filter:drop-shadow(0px 0px 3px #000)"),-20*F.y):F.s&&(C=K("div",C),C.className="dataOrder",eg(C,48*F.s));if(F.A)A=K("div",K("div",z)),A.className="check2",A.style.backgroundPositionY=w?"0":"";else if(F.j)if(A=M("div",z,"display:block"),w=
K("div",A),C=K("div",A),A=v[Ia].j[ha],F=x[Ia].j[ha],16==ha||7==ha||4==ha){for(let la of F)0>A.indexOf(la)&&$h(la,w,"+");for(let la of A)0>F.indexOf(la)&&$h(la,C,"-")}else if(26==ha||26==ha||8==ha){for(let la of F)0>A.indexOf(la)&&Zh(la,w,"+");for(let la of A)0>F.indexOf(la)&&Zh(la,w,"-")}else{if(30==ha||29==ha){w.style.flexDirection="column";for(C=0;C<F.length;C+=2)L=F[C],P=F[C+1],ea=ei(A,L),0<=ea?ci(L,P,A[ea+1],w):ci(L,P,100,w);for(C=0;C<A.length;C+=2)L=A[C],P=A[C+1],0>ei(F,L)&&ci(L,100,P,w)}}else if(P=
L=C=255,F.select?(w=F.select.indexOf(w)+1,A=F.select[F.select.indexOf(A)+1],w=F.select[w]):(w>A&&(C=255/(w/A),P=255/(w/A)),w<A&&(L=255/(A/w),P=255/(A/w)),0>C&&(C=0),0>L&&(L=0),0>P&&(P=0)),F=F.H?"%":"",ea=K("div",z),K("span",ea,A+F),A!=w&&(K("span",ea,"->","color:var(--color1)"),K("span",ea,w+F,`color:rgb(${C},${L},${P})`)),2==u&&1==ha)if(F=M("div",ea,"flex-direction:column;margin-left:10px"),w==A)if(w=Jb[ha],0==w)w=hg(),A=K("div",F),K("div",A,w[Ba[10]]),Jb[10]==Ba[10]?pi(Jb[12],Ba[12],A):K("div",
A,"+"+Ba[12]);else if(1==w||2==w){w=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];p(213123);for(let la of w)Jb[la.id]!=Ba[la.id]&&(w=K("div",F),M("div",w,`background:url(nehhon/icons2.webp) 0px ${-20*la.h}px;width:20px;height:20px`),pi(Jb[la.id],Ba[la.id],w))}else 3==w?(w=Jb[12],A=Ba[12],F=K("div",F),K("span",F,"x"+w+"%","color:#fff"),K("span",F,"->","color:var(--color1);margin:0px 6px"),K("span",F,"x"+A+"%","color:"+oi(w,A))):4==w&&(w=K("div",F),E[196](Jb[12]),A=M("div",w),A.className=
"dataIcon",eg(A,W.C),K("span",w,"->"),E[196](Ba[12]),w=M("div",w),w.className="dataIcon",eg(w,W.C));else if(w=Ba[ha],0==w)w=hg(),A=K("div",F),K("div",A,w[Ba[10]]),K("div",A,"+"+Ba[12]);else if(1==w||2==w){w=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let la of w)Ba[la.id]&&(w=K("div",F),M("div",w,`background:url(nehhon/icons2.webp) 0px ${-20*la.h}px;width:20px;height:20px`),K("div",w,Ba[la.id]))}else 3==w?K("div",F,"x"+Ba[12]+"%"):4==w&&(w=K("div",F),K("span",w,"->"),E[196](Ba[12]),
w=M("div",w),w.className="dataIcon",eg(w,W.C))}}}let wa;m=m[3][0].data;q=q[3][0].data;t=ji(1);for(v=0;v<t.length;v++)x=t[v],q[x.id]!=m[x.id]&&4!=v&&38!=v&&(wa||=K("div",r),K("div",wa,x.name),u=q[x.id],x=m[x.id],y=K("div",wa),K("span",y,u,"color:#fff"),K("span",y,"->","color:var(--color1);margin:0px 6px"),K("span",y,x,"color:"+oi(u,x)))}}];let e=K("div",b),g=K("div",e),h=K("div",e);for(let m of d){let q=O("button",g,m.Ga);q.onclick=()=>{for(let t of g.children)t.style.background="";q.style.background=
"#ff00ff45";h.innerHTML="";m.click(h)}}if(a)for(d=0;5>d;d++)4!=d&&(g.children[d].style.display="none");K("button",g,N(879).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content;margin-left:auto").onclick=()=>{ti(1)};a||(K("button",g,N(832).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{zi(m=>{Ai(m.target.result);li=void 0;Q(b);De()})},O("button",g,542,"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{confirm(N(713))&&(E[266](),li=void 0,
Q(b),De(),D.l&&k.u&&!D.o&&(Bi=1,ti(),E[274]()))});li||(li=[],Ci(0,60,257,c,li),Ci(1,55,258,c,li),Ci(2,23,263,c,li),li[3]=[{j:{},data:new Uint32Array(mc(E[264](),155))}]);g.children[a?4:0].onclick();S&&T(g.children[3]);b.children[0].addEventListener("click",()=>{S?(ti(),E[265](2147483647)):D.l&&k.u&&!D.o&&(Di()||Bi)&&(Bi=1,ti(),E[274]())})}
var Bi,Di=()=>{if(li)for(let b=0;b<li.length;b++){let c=li[b],d=yi[b];for(let e=0;e<c.length;e++){let g=c[e],h=d[e];for(var a=0;a<g.data.length;a++)if(g.data[a]!=h.data[a])return!0;for(let m in g.j)for(a=0;a<g.j[m].length;a++)if(g.j[m][a]!=h.j[m][a])return!0}}return!1},yi,wi=a=>{a&&(li=void 0);yi||(a=vi(),yi=[],Ci(0,60,257,a,yi),Ci(1,55,258,a,yi),Ci(2,23,263,a,yi),yi[3]=[{j:{},data:new Uint32Array(mc(E[264](),155))}])};window.gtorimod=wi;var li;
function Ci(a,b,c,d,e){d=d[a];e[a]=[];performance.now();c=E[c]();let g=mc(E[259]()),h=c;for(let m=0;m<c;m+=b){let q={data:g.slice(m,m+b),j:{}};e[a].put(q);for(let t=0;t<d.length;t++){let r=q.data[t];d[t].j&&!q.j[t]&&(q.j[t]=Array.from(g.slice(h,h+r)),h+=r)}}}
function xi(a,b,c){c=c[a];performance.now();var d=K("div",b);d.className="arrws";let e=K("button",d,"<","opacity:.5"),g=K("button",d,">");d=K("table",b);d.id="unittable";b=0;let h=K("thead",d);for(var m=0;m<c.length;m++)if(!c[m].T){b++;var q=K("td",h,N(c[m].name));c[m].y&&eg(K("div",q),-20*c[m].y);c[m].s&&(q=K("span",q),q.className="dataOrder",eg(q,35*c[m].s))}a=li[a];let t=K("tbody",d);for(let x of a){a=document.createElement("tr");for(let y=0;y<c.length;y++){m=x.data[y];let z=c[y];if(z.T)continue;
d=K("td",a);if(0==y){E[196](m);m=N(W.name);d.dataset.title=m;Sg(d,W.C,0,0,W.jb);a.Y=m;continue}d.Y=m;z.la&&(d=M("div",d,"display:flex;gap:4px;align-items:center;justify-content:center"));if(z.j){let A;z.la?(m=!m,Ge(d,C=>{C?(Rd(A),x.data[y]=0,x.j[y].length=0):(A.style.visibility="",x.data[y]=x.j[y].length)},m),A=K("button",d,"\u25a4"),A.onclick=()=>z.click(x,y),m&&Rd(A)):(A=K("button",d,"\u25a4"),A.onclick=()=>z.click(x,y));continue}if(z.A){Ge(d,A=>{x.data[y]=A},m);continue}let w=K(z.select?"select":
"input",d);z.H&&K("span",d," %");if(z.select){for(q=0;q<z.select.length;q+=2){let A=z.select[q];K("option",w,z.select[q+1]).value=A}w.value=m;z.click&&(K("button",d,"\u25a4","margin-left:5px").onclick=()=>z.click(x,y))}else z.la&&(q=m!=2**32-1,Ge(d,A=>{A?(w.style.visibility="",w.value=0):Rd(w)},q,1),q||Rd(w)),w.value=m,w.type="number",w.min=z.min||0,w.max=2**32-1,w.oninput=fi;w.onchange=()=>{x.data[y]=xe(w);if(c[y].Da){let A=x.data[16]*x.data[17];x.data[18]=A;x.j[18].length=A}}}for(let y of t.children)if(y.Y>
a.Y){t.insertBefore(a,y);break}a.parentNode||t.appendChild(a)}let r=0,u=Math.ceil((b-1)/6),v=x=>{r+=x;0>r&&(r=0);r>=u&&(r=u-1);e.style.opacity=r?"":".5";g.style.opacity=r+1>=u?".5":"";for(x=1;x<h.children.length;x++){var y=h.children[x];x<=6*r||x>6*r+6?T(y):Sd(y)}for(let z of t.children)for(x=1;x<z.children.length;x++)y=z.children[x],x<=6*r||x>6*r+6?T(y):Sd(y)};v(0);g.onclick=()=>v(1);e.onclick=()=>v(-1)}
window.selectMulp=function(a,b,c,d,e,g,h,m,q,t){Ei(b,c);xd.style.display="block";l(Ld?"unitname":"kingdom").innerHTML=a+" "+N(58);q?(vd.innerHTML=q,eg(vd,-100),Kd("levelmenu")):R("levelmenu");g?(td.innerHTML=g,Kd("attackmenu")):R("attackmenu");h?(ud.innerHTML=h,Kd("defencemenu")):R("defencemenu");m&&(l("manamenu").style.backgroundPosition="0px -240px",l("manamenu").innerHTML=m,Kd("manamenu"));t?(l("manamenu1").style.backgroundPosition="0px -80px",l("manamenu1").innerHTML=t,Kd("manamenu1")):R("manamenu1");
Ld&&d&&(wd.innerHTML=jd(e,E[29](d)),wd.onclick=()=>{var r=md[e].id;r&&I(60,Pb(r))},l("plavatar").style.background=`url(${Mg(e,d)})`,Kd("plavatar"))};window.updateHealth=function(a){if(l("progressvalue")){var b=l("progressvalue").innerHTML.split("/");b.length&&(l("progressone").value-=a,l("progressvalue").innerHTML=b[0]-a+"/"+b[1])}};window.allybutton=(a,b)=>{a?(ge.show(),ge.style.opacity=b?".25":""):T(ge)};
window.selectionOne0=function(a,b,c,d,e,g,h,m,q,t,r,u,v,x,y,z){ge&&(ge.$=z);R("manamenu");R("manamenu1");R("progressmana");d=Fi||N(d);a&&b?(l("stock").className="",l("manamenu1").style.display="block",l("manamenu1").style.backgroundPosition="0px -80px",l("manamenu1").innerHTML=a):l("stock").className="blocked";1==e&&c&&b&&(a=Math.floor(25*(c-D.W)/1E3),0<a&&(l("manamenu").style.display="block",l("manamenu").style.backgroundPosition="0px -200px",l("manamenu").innerHTML=a+"s"));wd.style.display="block";
yd.textContent!=d&&(yd.textContent=d);g||0==e&&!Ld?(td.innerHTML=g,Kd("attackmenu")):R("attackmenu");0==e&&!Ld||Ld&&h&&0===e||2==e&&h?(ud.innerHTML=h,Kd("defencemenu")):R("defencemenu");r&&226==t&&(eg(l("manamenu1"),-140),Kd("manamenu1"),l("manamenu1").innerHTML=r);q&&(l("manamenu").style.display="block",l("manamenu").innerHTML=m,27===t?(l("manamenu1").style.backgroundPosition="0px -280px",Kd("manamenu1"),l("manamenu1").innerHTML=m,l("manamenu").style.backgroundPosition="0px -240px",l("manamenu").innerHTML=
r):(l("progressmana").value=~~(100*m/q),Kd("progressmana"),l("manamenu").style.backgroundPosition="0px -120px"));y&&(d=l("manamenu1"),74==t&&(x=4),d.style.display="block",d.style.backgroundPosition=["0px -260px","0px -340px","0px -240px","0px -320px","0px -220px"][x]||"",d.innerHTML=y);vd.innerHTML=u;vd.style.display="block";1==e?eg(vd,-180):eg(vd,-100);0===u&&(2==e||1==e||0==e&&Ld)&&(vd.style.display="none");wd.innerHTML=jd(z,E[29](v));wd.onclick=()=>{var w=md[z].id;w&&I(60,Pb(w))};v&&l("plavatar")&&
(l("plavatar").style.background=`url(${Mg(z,v)})`,Kd("plavatar"));xd.style.display="block"};function Gi(a){return a.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,function(){return"*******"})}
window.shresmsg=function(a,b,c){let d=N(a?451:533);a&&(d+=" -> ");if(c||b)d=wg(d,jd(c,b));b=K("li",l("msgs1"),d);for(c=0;4>c;c++)a&1<<c&&(nd(b,c).style.cssText="margin-left:8px;margin-bottom:-1px");Hi()};window.cnsoSPmsg=function(a,b,c){a=N(a);if(c||b)a=wg(a,jd(c,b));l("msgs1").innerHTML+="<li style='border: 30px solid #ff0;border-top: 0px;border-bottom: 0px;padding: 0px 11px;'>"+a+"</li>";Hi()};window.cnsoSP2msg=function(){K("li",l("msgs1")).textContent=he;Hi()};
function $d(a){for(var b,c="",d=0;b=a[d++];)c+=String.fromCharCode(b);return c}function Ei(a,b){0>a?(xd.value=100,xd.max=100,zd.innerHTML=N(40)):(xd.value=a,0>b?(xd.max=100,xd.value=1):xd.max=b,zd.innerHTML=~~a+"/"+b)}window.showHealthOne=Ei;function xh(){}new Float32Array(8);var Ii,Ji,Ki,Li,Mi,Ni,Hc=1,G,Kf,Oi,If,Pi,Qi,Ri,Si,Ti,Ui,Vi,Sh,Wi,Xi,Yi,yg,Zi,$i,aj;new Float32Array(12);var B,bj;function mc(a,b){return new Uint32Array(window.wasmMemory.buffer,a,b)}function cj(a,b){return new Float32Array(window.wasmMemory.buffer,a,b)}function oc(a,b){return new Int32Array(window.wasmMemory.buffer,a,b)}function dj(a,b){return new Int8Array(window.wasmMemory.buffer,a,b)}function ae(a,b){return new Uint16Array(window.wasmMemory.buffer,a,b)}
function ui(a,b){return new Uint8Array(window.wasmMemory.buffer,a,b)}function Hg(){if(!S){for(var a=Cd.Zb.length=0,b=Ad.length;a<b;a++){var c=Ad[a];c.className="blocked";c.style.background="none";c.innerHTML=""}Cd.Qa.className="blocked";Cd.Oa.className="blocked";Cd.Nb.className="blocked";Cd.Wc=1}}window.cleanMenuIcons=Hg;
window.buttonSetup=function(a,b,c,d,e,g,h,m,q,t,r,u){var v=Ad[a];v.Sc=r;v&&!u&&(v.style.cssText="background-position:0px "+48*b+"px;"+(e&&"background-image:url(nehhon/iconunits.webp)"||""),c&&(v.className=""),g&&(v.className="dis"),1==q&&(v.className="invd"),2==q&&(v.className="uinv"),!m&&0<d?(b="",1073741824<d&&(1073741824<d&&(b=d-1073741824+"x"),d=`<span><span>${b}</span>\u221e</span>`),ej(v,d)):m&&1073741824<d&&1!=h&&ej(v,"..."),h&&1<t&&h!=2**31-1&&K("p",v,h+N([837,838,839][h-1]||840)),1==h?v.className=
"crnt":1<h&&(v.className="crnt1"),void 0!=kg&&kg==a&&(Bd.innerHTML="",v.onmouseenter()))};var Ag,V,X,fj,zg,gj,hj,ij,jj,kj,lj,mj,nj,oj,pj,qj,rj,sj,tj,uj,vj,wj,xj;window.gameOver=function(){Lc();fd(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>F</h2><p>${N(386)} ${N(387)}</p>`,1).id="F"};
window.playerWon=function(){Lc();fd(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>${N(388)} ${N(389)}</h2>`,1).id="F"};function yj(a,b){var c=4*Mi,d=B.createBuffer();d.size=b;d.Kc=c;B.bindBuffer(B.ARRAY_BUFFER,d);B.enableVertexAttribArray(a);B.vertexAttribPointer(a,b,B.FLOAT,!1,0,0);B.bufferData(B.ARRAY_BUFFER,c*b,B.STATIC_DRAW);Pa?zj.vertexAttribDivisorANGLE(a,1):B.vertexAttribDivisor(a,1);return d}
function Aj(a,b){var c=b+4E4;b*=4;c*=4;if(Pa)B.bindBuffer(B.ARRAY_BUFFER,a),B.bufferData(B.ARRAY_BUFFER,c*a.size,B.STATIC_DRAW),E[146]();else{var d=B.createBuffer();B.bindBuffer(B.COPY_READ_BUFFER,a);B.bindBuffer(B.ARRAY_BUFFER,d);B.bufferData(B.ARRAY_BUFFER,b*a.size,B.STATIC_DRAW);B.copyBufferSubData(B.COPY_READ_BUFFER,B.ARRAY_BUFFER,0,0,b*a.size);B.bindBuffer(B.COPY_READ_BUFFER,d);B.bindBuffer(B.ARRAY_BUFFER,a);B.bufferData(B.ARRAY_BUFFER,c*a.size,B.STATIC_DRAW);B.copyBufferSubData(B.COPY_READ_BUFFER,
B.ARRAY_BUFFER,0,0,b*a.size);B.bindBuffer(B.COPY_READ_BUFFER,null);B.deleteBuffer(d)}}
function Lf(a){if(G)return E[277](1==f.stdcolors);a=ui(E[17](a),4*(E[28]()+16));B.activeTexture(B.TEXTURE4);var b=B.createTexture();B.bindTexture(B.TEXTURE_2D,b);if(Pa){for(var c=new Uint8Array(16384),d=0;d<c.length;d++)c[d]=a[d];B.texImage2D(B.TEXTURE_2D,0,B.RGBA,64,64,0,B.RGBA,B.UNSIGNED_BYTE,c)}else B.texImage2D(B.TEXTURE_2D,0,B.RGBA,a.length/4,1,0,B.RGBA,B.UNSIGNED_BYTE,a);Bj();B.bindTexture(B.TEXTURE_2D,null);B.bindTexture(B.TEXTURE_2D,b);B.uniform1i(B.getUniformLocation(V,"colorArray"),4);B.activeTexture(B.TEXTURE2)}
window.setupColorGL=Lf;var Cj,Dj;window.scrSetup=function(a,b){Bg(Math.floor(a-Cg.width/2),Math.floor(b-Cg.height/2));xh()};function Ej(){let a=window.devicePixelRatio;1>a&&(a=1);return a}var Pa,Qa,Fj;
async function Gj(a,b){Qa=b;Hc=1;var c=parseInt(f.fogRefresh),d=n[8],e=n[43];d&&(Hj=1E3*n[14]);if(!G){B.getError()===B.CONTEXT_LOST_WEBGL&&(B=Cg.getContext("webgl2",{antialias:!1,alpha:!1}));Pa&&3==c&&(c=2);Fj=3==c&&b;if(!Ij){Y=parseFloat(f.antialiasing2)||1;Jj=1<Y;var g=Math.round(25*parseInt(f.pixelDensity1/25))/100||Ej();1>g&&(Y=1,Jj=!1);g&&!Jj&&(Cg.style.width="100%");Y*=g;V=B.createProgram();X=B.createProgram();g=Pa?1:2;var h=await Kj(g+"vrtxu.glsl");Pa||(h=h.replaceAll("FOG",b),h=h.replaceAll("FUOG",
!!Fj));h=h.replaceAll("GLSCALE",(Y*U).toFixed(4));var m=B.createShader(B.VERTEX_SHADER);B.shaderSource(m,h);B.compileShader(m);h=await Kj(g+"fragu.glsl");Pa?(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d)):(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d),h=h.replaceAll("FUOG",!!Fj));var q=B.createShader(B.FRAGMENT_SHADER);B.shaderSource(q,h);B.compileShader(q);B.attachShader(V,m);B.attachShader(V,q);B.linkProgram(V);B.useProgram(V);
h=Pa?await Kj("1vrtxt.glsl"):await Kj("2vrtxt.glsl");m=B.createShader(B.VERTEX_SHADER);B.shaderSource(m,h);B.compileShader(m);g=await Kj(g+"fragt.glsl");Pa||(g=g.replaceAll("FUOG",!!Fj));g=g.replaceAll("EXPLORED",e);g=g.replaceAll("FOG",b);g=g.replaceAll("BRMODE",d);d=B.createShader(B.FRAGMENT_SHADER);B.shaderSource(d,g);B.compileShader(d);B.attachShader(X,m);B.attachShader(X,d);B.linkProgram(X)}e=B.getAttribLocation(V,"a_position");g=B.getAttribLocation(V,"a_texCoord");d=B.getAttribLocation(V,"a_step");
m=B.getAttribLocation(V,"a_physic");h=B.getAttribLocation(V,"a_margins");B.useProgram(X);Nj=B.getUniformLocation(X,"minimapMargin");pj=B.getUniformLocation(X,"u_translation");lj=B.getUniformLocation(X,"u_resolution");kj=B.getUniformLocation(X,"u_fps");jj=B.getUniformLocation(X,"now");uj=B.getUniformLocation(X,"u_circle0");vj=B.getUniformLocation(X,"u_circle1");zg=B.getUniformLocation(X,"u_ambient");qj=B.getUniformLocation(X,"zoom");mj=B.getUniformLocation(X,"miniMap");Oj(Hc);B.uniform1i(mj,0);B.uniform2fv(pj,
[0,0]);B.uniform1f(kj,-1);B.uniform1f(qj,Y);B.uniform1f(B.getUniformLocation(X,"TSIZE"),rc);B.uniform1f(B.getUniformLocation(X,"mx"),0);Pa?(B.uniform1f(B.getUniformLocation(X,"mapSize"),2**Math.ceil(Math.log2(E[47]()))),B.uniform1f(B.getUniformLocation(X,"mapSize2"),E[47]())):B.uniform1f(B.getUniformLocation(X,"mapSize"),E[47]());B.uniform1f(B.getUniformLocation(X,"scale"),1);Pj=S?[-k.U*Y,-k.L*Y]:[-k.U*Y,Le()?-(window.innerHeight-gh-k.L)*Y:-k.L*Y];B.uniform2fv(Nj,Pj);q=B.getAttribLocation(X,"a_position");
rj=Qj();Rj(rj);var t=B.createBuffer();B.bindBuffer(B.ARRAY_BUFFER,t);B.bufferData(B.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),B.STATIC_DRAW);B.enableVertexAttribArray(q);B.vertexAttribPointer(q,2,B.FLOAT,!1,0,0);Rj(null);B.useProgram(V);B.uniform2fv(Sj,Pj);B.bindBuffer(B.ARRAY_BUFFER,null);sj=Qj();Rj(sj);tj=B.createBuffer();B.bindBuffer(B.ARRAY_BUFFER,tj);B.enableVertexAttribArray(d);Pa?(zj=B.getExtension("ANGLE_instanced_arrays"),B.vertexAttribPointer(d,1,B.FLOAT,!1,0,0),B.bufferData(B.ARRAY_BUFFER,
new Float32Array([0,1,2,1,2,3]),B.STATIC_DRAW),zj.vertexAttribDivisorANGLE(d,0)):(B.vertexAttribIPointer(d,1,B.UNSIGNED_BYTE,0,0),B.bufferData(B.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),B.STATIC_DRAW),B.vertexAttribDivisor(d,0));d=E[47]();Mi=a&&a+4E4||Math.floor(d*d/2);Ii=yj(g,4);Ji=yj(e,3);Ki=yj(m,4);Li=yj(h,4);Rj(null);hj=B.getUniformLocation(V,"u_resolution");Ag=B.getUniformLocation(V,"u_ambient");oj=B.getUniformLocation(V,"u_translation");bj=B.getUniformLocation(V,"zoom");gj=B.getUniformLocation(V,
"now");xj=B.getUniformLocation(V,"u_circle0");wj=B.getUniformLocation(V,"u_circle1");nj=B.getUniformLocation(V,"miniMap");Sj=B.getUniformLocation(V,"minimapMargin");b&&(ij=B.getUniformLocation(V,"miniMapSize"));B.uniform1f(B.getUniformLocation(V,"zMax"),96*E[47]());B.uniform1i(nj,0);B.useProgram(V);a=cj(E[33](),1330);D.Va||(D.Va=2880);D.Wa||(D.Wa=12);b=0;for(e=sg.length;b<e;b++).55>sg[b]&&(sg[b]=.55);ad();B.uniform1f(B.getUniformLocation(V,"mapSize"),E[47]());B.uniform1f(B.getUniformLocation(V,"mx"),
-k.R*Y);B.uniform1f(bj,Y);B.uniform2fv(oj,[0,0]);B.uniform1f(B.getUniformLocation(V,"TSIZE"),rc);window.addEventListener("resize",Tj,!1);Tj();B.blendEquation(B.FUNC_ADD);B.blendFunc(B.SRC_ALPHA,B.ONE_MINUS_SRC_ALPHA);B.disable(B.DITHER);B.disable(B.BLEND);performance.now();if(!Ij){Lf(1==f.stdcolors);B.activeTexture(B.TEXTURE0);e=B.createTexture();B.bindTexture(B.TEXTURE_2D,e);if(Pa){B.getExtension("OES_texture_float");g=new Float32Array(65536);for(b=0;b<g.length;b++)g[4*b]=a[b];B.texImage2D(B.TEXTURE_2D,
0,B.RGBA,128,128,0,B.RGBA,B.FLOAT,g)}else B.texImage2D(B.TEXTURE_2D,0,B.R16F,a.length,1,0,B.RED,B.FLOAT,a);Bj();B.bindTexture(B.TEXTURE_2D,null);B.bindTexture(B.TEXTURE_2D,e);B.uniform1i(B.getUniformLocation(V,"delay"),0);B.activeTexture(B.TEXTURE2)}Uj=B.createTexture();B.bindTexture(B.TEXTURE_2D,Uj);B.texImage2D(B.TEXTURE_2D,0,B.LUMINANCE_ALPHA,d,d,0,B.LUMINANCE_ALPHA,B.UNSIGNED_BYTE,null);Vj();B.useProgram(X);B.uniform1i(B.getUniformLocation(X,"fogMap"),2);B.useProgram(V);B.uniform1i(B.getUniformLocation(V,
"fogMap"),2);Fj&&(B.activeTexture(B.TEXTURE3),fj=B.createTexture(),B.bindTexture(B.TEXTURE_2D,fj),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,1,1,0,B.RGBA,B.UNSIGNED_BYTE,new Uint8Array(4)),Bj(),Wj=B.createFramebuffer(),B.bindFramebuffer(B.FRAMEBUFFER,Wj),Xj=B.createTexture(),B.bindTexture(B.TEXTURE_2D,Xj),a=Cj,b=Dj,B.texImage2D(B.TEXTURE_2D,0,B.RGBA,a,b,0,B.RGBA,B.UNSIGNED_BYTE,null),Bj(),Wj.width=a,Wj.height=b,B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,Xj,0),B.bindFramebuffer(B.FRAMEBUFFER,
null),B.useProgram(X),B.uniform1i(B.getUniformLocation(X,"frmBUFFER"),3),B.useProgram(V),B.uniform1i(B.getUniformLocation(V,"frmBUFFER"),3));B.activeTexture(B.TEXTURE2);B.enable(B.DEPTH_TEST);B.depthFunc(B.LEQUAL);Yj.now=0;Yj.yb=0;Ij=!0}E[13](Y,Mi,c,1!=f.nodecals,1==f.selcolor,G)}window.setupGL=Gj;var Uj;
window.chFFg=function(a,b){let c=b*b*2;c%4&&(c+=2);a=a?ui(a,c):new Uint8Array(c);G?Kf.queue.writeBuffer(Zj,0,a):(B.activeTexture(B.TEXTURE2),B.bindTexture(B.TEXTURE_2D,Uj),B.pixelStorei(B.UNPACK_ALIGNMENT,1),B.texImage2D(B.TEXTURE_2D,0,B.LUMINANCE_ALPHA,b,b,0,B.LUMINANCE_ALPHA,B.UNSIGNED_BYTE,a),Vj(),B.pixelStorei(B.UNPACK_ALIGNMENT,4))};var Xj,ak;window.shk=function(){ak=!0;G&&(Fj=Qa=0)};
function bk(a){a&&(B.activeTexture(B.TEXTURE3),B.uniform1i(nj,3),B.bindFramebuffer(B.FRAMEBUFFER,Wj),B.viewport(0,0,Cj,Dj),B.bindTexture(B.TEXTURE_2D,fj),B.clearColor(0,0,0,0),ak&&B.clearColor(1,1,1,1),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),ak&&B.clearColor(0,0,0,0),B.enable(B.BLEND),B.blendEquation(B.FUNC_ADD),B.blendFunc(B.ONE,B.ONE),Pa?zj.drawArraysInstancedANGLE(B.TRIANGLES,0,6,a):B.drawArraysInstanced(B.TRIANGLES,0,6,a),B.bindTexture(B.TEXTURE_2D,Xj),B.bindFramebuffer(B.FRAMEBUFFER,null),
B.uniform1i(nj,0),B.enable(B.BLEND),B.blendEquation(B.FUNC_ADD),B.blendFunc(B.SRC_ALPHA,B.ONE_MINUS_SRC_ALPHA))}
function ck(){if(dk){var a=dk,b=a.F,c=a.yc,d=a.zc,e=a.kc,g=a.lc,h=a.Ac,m=a.mc,q=Date.now()-b;150<q&&(q=150);var t=ek(),r=t.x;t=t.y;var u=Date.now()-Ef||0,v=Date.now()-zf||0;150<u&&(u=150);150<v&&(v=150);r=Ef<b?r*q:r*u;t=zf<b?t*q:t*v;Math.sign(r)!=Math.sign(fk)&&fk?r+=fk:fk=r;Math.sign(t)!=Math.sign(gk)&&gk?t+=gk:gk=t;150>q?(Hc=m+-(m-h)/150*q,a.Hb?(a=hk(c,d,m,e,g),c=hk(c,d,Hc,e,g),Fc=e-(a.x-c.x),Gc=g-(a.y-c.y)):(Fc=e+-(e-c)/150*q,Gc=g+-(g-d)/150*q)):(a.Hb?(a=hk(c,d,m,e,g),c=hk(c,d,h,e,g),Fc=e-(a.x-
c.x),Gc=g-(a.y-c.y)):(Fc=c,Gc=d),zf=Ef=Date.now(),Ff=Fc+r,Af=Gc+t,Hc=h,dk=void 0);Fc+=r;Gc+=t;Bg(-Fc,-Gc);G?Kf.queue.writeBuffer(Yi,0,new Float32Array([1/Hc])):B.getParameter(B.CURRENT_PROGRAM)==V&&B.uniform1f(bj,Y/Hc);E[19](Hc)}}var fk,gk;function ek(){var a=2.5*parseInt(f.scrollSpeed)/100;return{x:1680*Cf*Hc*a/1E3,y:1680*vf*Hc*a/1E3}}var ik=0,Hj,jk,kk;
window.brconf=function(a,b,c,d,e,g,h,m,q){Hj=d;jk=m;kk=q;G?Kf.queue.writeBuffer(Qi,0,new Float32Array([a,b,c,d,e,g,h,m])):(B.useProgram(V),B.uniform4f(xj,a,b,c,d),B.uniform4f(wj,e,g,h,m),B.useProgram(X),B.uniform4f(uj,a,b,c,d),B.uniform4f(vj,e,g,h,m))};var lk=()=>{if(0!=Cf||0!=vf||dk){var a=ek(),b=a.x;a=a.y;var c=Date.now()-Ef,d=Date.now()-zf,e=!1,g=0,h=0;xf&&(h=Math.sqrt(b**2+a**2)/xf,c>h&&(d=c=h,e=1),g=b/h,h=a/h);dk?ck():(b&&(Fc=Ff+b*c-.5*g*c**2),a&&(Gc=Af+a*d-.5*h*d**2),Bg(-Fc,-Gc),e&&(vf=Cf=0))}};
function Yj(a,b){D.F&&mk++;D.qb||(performance.now(),nk||requestAnimationFrame(Yj),a=Yj.now,Yj.yb++,1==f.hlffps&&Yj.yb%2||(a=Date.now(),a=Zc&&!(200>a-$c)||Sf?$c-Wc+Xc:b||a-Wc+Xc,Yj.now=a,Date.now(),lk(),B.useProgram(V),xh(),B.uniform1f(gj,a),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),b=E[14](),Fj&&bk(b),ok(a),Rj(sj),pk(b),qk(b),ze.update&&ze(1),nk&&(0<Pc&&clearInterval(Pc),Cg.toBlob(function(c){var d=rk;c=URL.createObjectURL(c);d.href=c;d.download=`${sk++}.png`;d.click();window.URL.revokeObjectURL(c);
setTimeout(function(){setTimeout(Sc,9);Yj(0,25*D.W+16)},20)})),tk&&tk.getVideoTracks()[0].requestFrame(),B.finish(),uk()))}
var uk=()=>{pd++;if(!S&&100<=Date.now()-ik&&(ik=Date.now(),E[171](),3>Pf)){var a=D.now()/6E4,b=E[166]();if(b){var c=a/b;if(1>=c){var d=Math.round(510*c);c=Math.round(510*(1-c));255<d&&(d=255);255<c&&(c=255)}else d=255,c=0}1==Pf?300<pd&&(ej(l("tpCPU"),"CPU:"+(bd/10).toFixed(2)+"%"),ej(l("tpGPU"),~~(1E3*pd/(performance.now()-od)+.75)+"FPS"),Ne.show(),od=performance.now(),pd=0):(T(l("tpCPU")),ej(l("tpGPU"),""),T(Ne));ej(l("tpTM"),Vc(D.now()));vk&&(vk.style.color=`rgb(${d},${c},0)`,a>b+5&&J(vk));void 0!=
Hj&&(a=25*E[48](),b=n[21],a=1E3*Math.floor(a/1E3),Hj>a?(c=N(506)+` (${kk||0}/${b}) `+Vc(Hj-a),d="#ff0"):(c=N(505)+` (${kk}/${b}) `+Vc(Hj+jk-a),d="red"),kk==b&&a>Hj+jk&&(c=N(507),d="#f0f"),wk&&(wk.style.color=d,ej(wk,c)));bd=0}},xk=0,yk=0,zk;window.cpperf=function(a){a?zk=performance.now():(yk+=performance.now()-zk,xk++)};function Ak(a){a?Ak.time=performance.now():p("c++",performance.now()-Ak.time)}window.perfw=Ak;
function qk(a){a&&(B.enable(B.BLEND),B.blendEquation(B.FUNC_ADD),B.blendFunc(B.SRC_ALPHA,B.ONE_MINUS_SRC_ALPHA),Pa?zj.drawArraysInstancedANGLE(B.TRIANGLES,0,6,a):B.drawArraysInstanced(B.TRIANGLES,0,6,a),B.disable(B.BLEND))}var Re=!1,Pj;
function pk(a,b){if(1020>window.innerWidth)if(Re)b=!0;else return;B.uniform2fv(oj,[0,0]);B.uniform1f(bj,1);B.uniform1i(nj,1);var c=k.U*U,d=Le()?-k.L:window.innerHeight-gh*U-k.L*U,e=hh*U,g=gh*U;b?(g=e=c=ih(),c=window.innerWidth/2-e/2,d=window.innerHeight/2-g/2,B.uniform2fv(Sj,[-Y*c,-Y*d])):B.uniform2fv(Sj,Pj);B.uniform1f(ij,e*Y);B.viewport(c*Y,Y*d,e*Y,g*Y);qk(a);B.uniform1i(nj,2);qk(1);B.uniform1i(nj,0);B.uniform2fv(oj,[Fc,Gc]);B.uniform1f(bj,Y/Hc);B.viewport(0,0,Cj,Dj);Re&&!b&&pk(a,1)}
function ih(){return Ka?Math.min(window.innerWidth,window.innerHeight)-55:Math.min(window.innerWidth-(Le()?0:250)*U,window.innerHeight-(Le()?250:0)*U)-128}var Nj,Sj;
function ok(a,b){var c=Math.floor(a/100)%5;B.useProgram(X);B.uniform1f(qj,Y/Hc);Rj(rj);B.uniform1f(kj,c);B.uniform1f(jj,a);Of&&tf||B.drawArrays(B.TRIANGLES,0,6);var d=Le();c=k.U*U;var e=d?-k.L*U:window.innerHeight-gh*U-k.L*U,g=hh*U,h=gh*U;if(1020>window.innerWidth)if(Re)b=!0;else{B.viewport(0,0,Cj,Dj);B.useProgram(V);return}if(b){h=g=d=ih();c=window.innerWidth/2-g/2;e=window.innerHeight/2-h/2;B.uniform2fv(Nj,[-Y*c,-Y*e]);if(Ka)for(var m=document.getElementsByClassName("alertdmg"),q=0;q<m.length;q++)m[q].show();
Kd("bigMap");l("bigMap").style.width=d/U+"px";l("bigMap").style.height=d/U+"px"}else B.uniform2fv(Nj,[Pj[0]*U,d?-(window.innerHeight-gh*U-k.L*U)*Y:Pj[1]*U]);Of&&tf?(B.enable(B.SCISSOR_TEST),B.scissor(Y*c,Y*e,Y*g,Y*h),B.clearDepth(-.9),B.clear(B.COLOR_BUFFER_BIT|B.DEPTH_BUFFER_BIT),B.clearDepth(1),B.disable(B.SCISSOR_TEST)):(B.viewport(Y*c,Y*e,Y*g,Y*h),B.uniform1i(mj,1),B.uniform2fv(pj,[0,0]),B.uniform1f(qj,Y*g/32/E[47]()),B.drawArrays(B.TRIANGLES,0,6),B.uniform1i(mj,0),B.uniform2f(lj,Cj,Dj),B.uniform2fv(pj,
[Fc,Gc]),B.viewport(0,0,Cj,Dj));B.useProgram(V);Re&&!b&&ok(a,1)}var Ij=!1,Jj;function Oj(a){Jj&&(1<a?(a=(a-1)/.5,1<a&&(a=1),a=.5*(1-a)):a=.5,Bk!=a&&(Bk=a,a=`calc(-${50*(Y-1)}% + ${a}px)`,Cg.style.transform=`scale(${1/Y}) translate(${a},${a})`))}var Bk;function hk(a,b,c,d,e){var g=Cj,h=Dj;return{x:a*c+-d+(g-c*g/Y)/2,y:b*c+-e+(h-c*h/Y)/2}}function Rh(a,b){var c=Hc,d=Cg.width,e=Cg.height;return{x:a*c+-Fc+(d-c*d)/2,y:b*c+-Gc+(e-c*e)/2}}var dk;
function Gf(a,b,c,d){var e=E[47](),g=window.innerWidth,h=window.innerHeight,m=1!=f.unlimitedZoom&&!S;if(!(a*(g-(!Ka&&k.R||0))/32>e||a*h/32>e)||!m){Oj(a);.25>a&&m&&(a=.25);0>a&&(a=0);ck();if(!b||Re||!Ka&&b<k.R||1!=f.zoomPointer)b=Math.floor(g/2),c=Math.floor(h/2);gk=fk=0;dk={yc:b,zc:c,kc:Fc,lc:Gc,F:Date.now(),Ac:a,mc:Hc,Hb:1};d&&(dk.F-=500,ck());Ck()}}
function Dk(a){if(!ph&&(ef||a.target==Cg)&&(a.ctrlKey&&a.preventDefault(),a.clientX>k.Za||ef||!a.clientX)){var b=a.deltaY/550,c=1+parseFloat(f.zoomMult)/200+Math.abs(b);Gf((0<Math.sign(b)?c:1/c)*Hc,a.clientX,a.clientY)}}function Ck(){if(!G){var a=window.innerWidth+k.R,b=window.innerHeight,c=Hc*a,d=Hc*b;Ek(-Fc+(Y-Hc)*a*.5,-Gc+(Y-Hc)*b*.5,-999999999,0);Fk(c,d,0,0,0)}}var Gk,Hk;
xh=function(){if(Fc!=Gk||Gc!=Hk){Gk=Fc;Hk=Gc;E[20](-Fc,-Gc);var a=[Fc,Gc];G?(Qh&&Ph(Qh[0],Qh[1]),Kf.queue.writeBuffer(Wi,0,new Float32Array(a))):(B.useProgram(X),B.uniform2fv(pj,a),B.useProgram(V),B.uniform2fv(oj,a),Ck())}};function Bj(){B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.NEAREST);B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.NEAREST);B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.REPEAT);B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.REPEAT)}
function Vj(){B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.NEAREST);B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.NEAREST);B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE);B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE)}var Ik,rc;
function Jk(a){B.activeTexture(B.TEXTURE6+a);if(!Ik[a]){a&&!Ik[a-1]&&Jk(a-1);B.useProgram(V);const c=rc;var b=B.createTexture();Ik[a]=b;B.bindTexture(B.TEXTURE_2D,b);Bj();B.texImage2D(B.TEXTURE_2D,0,Kk,c,c,0,Kk,B.UNSIGNED_BYTE,null);B.uniform1i(B.getUniformLocation(V,`img_common[${a}]`),6+a);B.useProgram(X);B.uniform1i(B.getUniformLocation(X,`img_common[${a}]`),6+a)}return Ik[a]}var Kk;
window.setup3Dtexture=function(a,b,c,d){ui(c,a);performance.now();Kk=B.RGBA;performance.now();const e=rc;Ik||=[];a=ui(c,a);c=Math.floor(b/(e*e));b=b/e%e;var g=a.length/(4*e),h=0;do{var m=g-h;b+m>=e&&(m=e-b);B.bindTexture(B.TEXTURE_2D,Jk(c));var q=new Uint8Array(a.buffer,a.byteOffset+h*e*4,m*e*4);B.texSubImage2D(B.TEXTURE_2D,0,0,b,e,m,Kk,B.UNSIGNED_BYTE,q);h+=m;b=0;c++}while(h<g);E[165](d)};var Zj,Wj,Y=1;
function Tj(){var a=Math.round(window.innerWidth*Y),b=Math.round(window.innerHeight*Y);Cj=a;Dj=b;Cg.width=G?window.innerWidth:a;Cg.height=G?window.innerHeight:b;var c=l("menbak1s")&&l("menbak1s").getBoundingClientRect();E[18](Cg.width,Cg.height,window.innerWidth,window.innerHeight,c.y,c.x);G?(Kf.queue.writeBuffer(Xi,0,new Float32Array([window.innerWidth,window.innerHeight])),Lk&&(Lk.destroy(),Lk=Kf.createTexture({size:[Cj,Dj],format:"depth24plus",usage:Mk.RENDER_ATTACHMENT}),Nk.depthStencilAttachment.view=
Lk.createView(),Ok&&Ok())):(B.useProgram(X),B.uniform2f(lj,a,b),B.useProgram(V),Wj&&(Wj.width=a,Wj.height=b,B.bindTexture(B.TEXTURE_2D,Xj),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,a,b,0,B.RGBA,B.UNSIGNED_BYTE,null),Bj()),B.uniform2f(hj,a,b));Bg(-Fc,-Gc,1);Te()}window.animTimer=function(){};function Rj(a){Pa?Pk.bindVertexArrayOES(a):B.bindVertexArray(a)}var Pk,zj;function Qj(){return Pa?(Pk||=B.getExtension("OES_vertex_array_object"),Pk.createVertexArrayOES()):B.createVertexArray()}
Array.prototype.put=function(a){this[this.length]=a};function Qk(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}Array.prototype.add=function(a){0>this.indexOf(a)&&(this[this.length]=a)};function ei(a,b){for(let c=0;c<a.length;c+=2)if(a[c]==b)return c;return-1}var D={},Rk=new Float32Array(4),Sk=new Float32Array(3),Tk=new Float32Array(1),Uk=new Uint32Array(2);new Uint32Array(3);window.bufferDate=function(a,b){Jf[0]=a;a=Ri;1073741823<=b&&(b-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*b+28,Jf)};
window.bufferIMG3=function(a,b,c){Uk[0]=a;Uk[1]=b;a=Ri;1073741823<=c&&(c-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*c+24,Uk)};window.bufferRotation=(a,b)=>{Tk[0]=a;a=Ri;1073741823<=b&&(b-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*b+32,Tk)};window.bufferPhysics3=function(a,b,c,d){Sk[0]=a;Sk[1]=b;Sk[2]=c;a=Ri;1073741823<=d&&(d-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*d+12,Sk)};var Vk;
window.bufferGL3=(a,b,c,d,e,g,h,m,q,t,r,u,v)=>{let x=new Float32Array(12),y=new Uint32Array(x.buffer);x[0]=a;x[1]=b;x[2]=c;x[3]=d;x[4]=e;x[5]=g;y[6]=h;y[7]=m;x[8]=q;y[9]=t;y[10]=r;y[11]=u;a=Ri;1073741823<=v&&(v-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*v,y);v>Wk&&(Wk=v)};window.bufferInfo2=(a,b)=>{Jf[0]=a;a=Ri;1073741823<=b&&(b-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*b+44,Jf)};window.bufferHide=a=>{Tk[0]=-9;let b=Ri;1073741823<=a&&(a-=1073741823,b=Si);Kf.queue.writeBuffer(b,48*a+8,Tk)};
function Ek(a,b,c,d){Sk[0]=a;Sk[1]=b;Sk[2]=c;G?(a=Ri,1073741823<=d&&(d-=1073741823,a=Si),Kf.queue.writeBuffer(a,48*d,Sk)):(B.bindBuffer(B.ARRAY_BUFFER,Ji),B.bufferSubData(B.ARRAY_BUFFER,12*d,Sk))}window.bufferPos=Ek;window.bufferPhysics=function(a,b,c,d,e){G||(Rk[0]=a,Rk[1]=b,Rk[2]=c,Rk[3]=d,B.bindBuffer(B.ARRAY_BUFFER,Ki),B.bufferSubData(B.ARRAY_BUFFER,16*e,Rk))};
window.bufferIMG=function(a,b,c,d,e){Rk[0]=a;Rk[1]=b;Rk[2]=c;Rk[3]=d;B.bindBuffer(B.ARRAY_BUFFER,Ii);B.bufferSubData(B.ARRAY_BUFFER,16*e,Rk)};function Fk(a,b,c,d,e){G||(Rk[0]=a,Rk[1]=b,Rk[2]=c,Rk[3]=d,B.bindBuffer(B.ARRAY_BUFFER,Li),B.bufferSubData(B.ARRAY_BUFFER,16*e,Rk))}window.bufferMargin=Fk;window.bufferColor3=(a,b)=>{Jf[0]=a;a=Ri;1073741823<=b&&(b-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*b+36,Jf)};
window.bufferK3=(a,b)=>{Jf[0]=a;a=Ri;1073741823<=b&&(b-=1073741823,a=Si);Kf.queue.writeBuffer(a,48*b+40,Jf)};window.bufferColor=function(a,b){Tk[0]=a;B.bindBuffer(B.ARRAY_BUFFER,Ii);B.bufferSubData(B.ARRAY_BUFFER,16*b+8,Tk)};
window.sresizeBuffer=function(a,b){if(G){var c=b?Si:Ri;a={size:48*(a+4E4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1};b?Si=Kf.createBuffer(a):Ri=Kf.createBuffer(a);b=b?Si:Ri;a=Kf.createCommandEncoder();a.copyBufferToBuffer(c,0,b,0,c.size);b=a.finish();Kf.queue.submit([b]);c.destroy();Zi()}else Aj(Ii,a),Aj(Ji,a),Aj(Ki,a),Aj(Li,a)};var Xb=["European","Arab","Asian"];
function Xk(a){return`<span class="raceIcon" style="background-position-y:-${20*a}px"></span>`}function wg(a,b,c){if(a)return c&&(a=a.replace("%d",c)),a.replace("%s",b)};function Yk(){for(let a=0,b=Zk.length;a<b;a++){let c=Zk[a];c&&(n[a]="checkbox"==c.type?c.checked?1:0:parseInt(c.value))}return n}var $k,Fb;D.Va=2880;D.Wa=12;function al(){let a=pb(qb);for(let b=0;b<n.length;b++)a[b]=n[b];E[24](n.length)}
function bl(){l("mapconfiguration")&&""!==l("mapconfiguration").innerHTML&&!E[67]()&&(Yk(),1024<n.length&&(n.length=1024),f.mapConfig4=`[${n.join()}]`);D.pb=Math.round(555555*Math.random()+1);n[46]=D.pb;n[0]=cl(n[0],n[16],n[29]);let a=pb(qb);for(let b=0;b<n.length;b++)a[b]=n[b];E[24](n.length);return D}window.SetupGameConfig=bl;var nk,rk,sk,tk;
async function kc(){Id&&(Id.innerHTML="");hc.innerHTML=N(53);k.Db||(k.Db=1);D.l&&(dl(),D.Fc=0);E[47]()||bl();D.Aa=0;D.qb=0;Kg=l("msgs1");D.l||(location.hash="");Kd("content");D.W?D.Xb=25*D.W:(D.F=Date.now(),D.W=0,D.Xb=0);D.Lc=Date.now();D.l||pg();D.now=Qc;D.paused=0;D.Aa=0;Rc();performance.now();D.kb=25;var a=D.kb;0===k.kb&&(a+="&deg;C");l("temperature")&&(l("temperature").innerHTML=a);Hc=1;E[19](Hc);await Gj(E[280](),S?0:n[12]);E[101](~~(1E4*Math.random()));ze(55);el.check();S&&(Xd(),Zd(),E[48]()&&
Va("Editing savegames may be unstable"))}function Q(a){a&&J(a.parentNode.parentNode)}
function el(){gd||J(fl);l("playersinfo")&&(l("playersinfo").innerHTML="");Gg();window.addEventListener("keydown",oh);window.addEventListener("keyup",mh);window.addEventListener("mousemove",Oh);window.onblur=lh;window.addEventListener("touchstart",Fh,{passive:!1});window.addEventListener("touchmove",Mh);window.addEventListener("touchend",Nh);window.addEventListener("wheel",Dk,{passive:!1});window.addEventListener("mousedown",Uh);window.addEventListener("mouseup",Vh);E[149](1==f.deathsounds);da.zb=
performance.now()-da.zb;if(D.l){if(I(32),!gd)E[65]()}else gl()}window.startGameStep0=el;el.check=function(){el.load++;el.load===el.target&&el()};el.check=el.check;el.target=2;function Xh(a){ka?pa(1):a&&(a=document.documentElement,a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen())}var hl=document.getElementsByTagName("main")[0];ka||(window.onbeforeunload=function(){return"Are you sure to leave this page?"});
window.onunload=()=>{sb&&I(57)};var il,fl,hc,jl,U=1,kl=()=>{let a=parseInt(f.UIscale);jl||=K("style",document.body);jl.innerHTML=`main>*,body>div{zoom:${a}%}`;U=a/100;D.o&&(E[119](k.R,Ld,U),Tj(),G&&Kf.queue.writeBuffer(Oi,0,new Float32Array([U])))};100!=f.UIscale&&kl();var vg,ll=()=>{if(!fl){fl=K("div",document.body);fl.id="loading";hc=K("div",fl);K("div",fl,"TZA.RED");var a=K("div",fl);K("div",a).className="svgnehhon";K("div",a,"NETRAL ENGINE")}};
function ml(a){vg=Date.now();Vk=new Float32Array(12);new Uint32Array(Vk.buffer);sf||(f.bshrct||(f.bshrct='{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}'),
sf=JSON.parse(f.bshrct));il=!0;me();ac();if(!B&&!G)return Va("Your browser doesnt support webgl");hl.appendChild(Cg);Q(l("RandomMap")&&l("RandomMap").parentNode);Q(l("CustomMap")&&l("CustomMap").parentNode);J(l("game"));J(l("bak"));J(l("index"));J(l("plinroom"));da={zb:performance.now()};el.load=0;if($k&&nl&&!ol){var b=E[70]();n[0]=Math.round(Math.sqrt(15600*b));b=pb(qb);for(let c=0;c<n.length;c++)b[c]=n[c];E[24](n.length)}9==pl?xc("pepe"):8==pl?xc("e_church1"):7==pl?xc("pepe"):xc($k?"reveal":"bless");
(a||ka)&&"true"==f.fullscreen&&Xh();S?(k.U=0,k.L=0,k.Gb=0,gh=hh=171,k.R=171,k.Za=171):Ld?(gh=hh=k.R=151,k.Za=151,k.Gb=0,k.U=0,k.L=0):(k.R=151,gh=hh=128,k.Za=151,k.Gb=0,k.U=4,k.L=31);E[119](k.R,Ld,U);a=l("minimap");a.style.width=hh+"px";a.style.height=gh+"px";a.style.left=k.U+"px";a.style.top=k.L+"px";ll();oa(S?"Map editor":D.id&&D.id||"Single player",S?void 0:"Playing");if(S){if(!E[67]())for(n=qa,a=pb(qb),b=0;b<n.length;b++)a[b]=n[b];E[102](n.length)}else E[47]()||bl();I(25);D.l||(E[204](),ti());
l("mapconfiguration")&&Q(l("mapconfiguration"));G?ql():pc()}window.startGame=ml;var rl,sl;window.reorderPlayerInfoRank=()=>{};
window.setupPlayerInfoRank=function(a,b,c,d,e,g,h,m,q){e=l("ranknfo");e||(e=K("div",l("content")),e.id="ranknfo");d=b;10<b&&(d=11.5);for(let t of e.children)if(t.$==m){if(10<b&&!q){t.style.top="100%";setTimeout(()=>J(t),3E3);return}t.children[0].textContent=b;t.children[2].textContent=a.toLocaleString("de-DE");t.aa!=b&&(t.aa=b,t.style.top=24*d+30+"px");return}10<b&&!q||(c=jd(h,c),h=K("div",e),h.$=m,h.aa=b,h.style.top=24*d+30+"px",K("span",h,b),K("span",h,c,q?"":"color:#fff"),K("span",h,a.toLocaleString("de-DE")))};
window.updKstate=function(a,b,c){rl&&rl[a]&&(rl[a].className=`${b&&"pldeath"||""}${c&&" pldisc"||""}`);c&&sl&&sl[a]&&(sl[a].innerHTML="")};window.updKping=function(a,b){if(Pf)if(sl&&sl[a])sl[a].innerHTML=2147483647!=b&&b+"ms"||"host";else E[158]()};window.rstPLI=function(){l("playersinfo").innerHTML="";rl=[];sl=[]};
window.setupPlayerInfo=function(a,b,c,d,e,g,h,m,q,t,r){if(!(50<a)){b=jd(q,b);q=l("playersinfo");var u=document.createElement("div");u.Ea=r;h&&!t&&Pf&&(sl[a]=K("span",u,2147483647!=h&&h+"ms"||"host","font-size:8px;color:#00ffb8"));b=K("span",u,b,`border-color:${m&&"#f00"||"#0f0"}`);b.className=`${g&&"pldeath"||""}${t&&" pldisc"||""}`;rl[a]=b;K("div",u,"",`background:rgb(${c},${d},${e})`);a=!0;for(let v of q.children)if(v.Ea<r){q.insertBefore(u,v);a=!1;break}a&&q.appendChild(u)}};
function Yd(a){for(var b=a.length,c=0;c<b;l(a[c++]).style.display="block");}var hh=128,gh=128;window.popInfo=function(a,b){S||ej(l("pop"),a+"/"+b)};window.addEventListener("offline",function(){Ya("Offline","#ff0000")});window.addEventListener("online",function(){Ya("Online","#00ff00")});var Zb=!1;function tl(a){if(!a||!a.target||"BUTTON"!=a.target.tagName){if(this.Mb&&!f.sid)return dc(441,N(444)+" / "+N(861),Lb);D.l&&ul(5);a=this.Ab;Zb=!0;$b(a);ac()}}
function vl(){let a=fd(N(53));a.id="loadingOnline";O("button",a,3,"margin:auto;margin-top:19px;display:block").onclick=function(){location.hash="";location.reload()};setTimeout(()=>{a.show()},500)}window.instplmap=(a,b,c,d,e,g,h,m)=>{b=$d(ae(b,20));h=$d(ae(h,5));md[a]||(md[a]={name:b,id:d,clan:h,avatar:e,role:g,rgb:kd(m),flag:c});gd&&J(fl)};window.iormfull=()=>{J(fl);Db(N(95))};
function wl(a,b){let c=1;do{let e=xl(a,c);c+=3;let g=xl(a,c);c+=3;let h=xl(a,c);c+=3;let m=a[c++],q=a[c++],t=a[c++],r=a[c++],u=a[c++],v=a[c++],x=xl(a,c);c+=3;var d=a[c++];let y=a[c++],z=yl(new Uint8Array(a.buffer,c,d));c+=d;d=yl(new Uint8Array(a.buffer,c,y));c+=y;md[e]={name:z,id:g,clan:d,avatar:m,role:q,team:t,race:u,rgb:kd(x),state:r,flag:v};if(b||!gd)$k&&(zl(E[56](0,u,x,e,0,g,gd,v,h,m,q),17,z),Al()),gd||(("1"!=f.muteroom||D.o)&&xc("unitdone"),b&&Jg(wg(N(531),"<span>"+jd(e)+"</span>"),"4bff4b"))}while(c<
a.length)}window.stplname=(a,b)=>{md[b]&&zl(a,17,md[b].name)};window.stplclan=(a,b)=>{md[b]&&zl(a,5,md[b].clan)};var Bl={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},Ld,Wg,nl,Cl,ol,gd,Dl;
window.dplreq=a=>{let b=K("div",l("content"));b.className="allyRequest";b.$=a;K("img",b).src=Mg(a);var c=K("div",b);K("span",c,wg(N(917),jd(a)));c=K("div",c);O("button",c,675,"color:#0f0").onclick=()=>{E[289](a,1);J(b)};O("button",c,919,"color:red").onclick=()=>{E[289](a,0);J(b)}};
function El(){$k=0;nl=Fl=Wg=k.u=0;oa("Main menu");Gl&&(J(Gl),Gl=void 0);l("mult").children&&l("mult").insertBefore(l("gameList"),l("mult").children[1]);l("gameList")&&l("gameList").show();l("mapconfiguration")&&Q(l("mapconfiguration"))}function Db(a){El();l("game")&&R("game");D.l=0;D.id=void 0;E[266](1);li=void 0;k.ob=!1;H.close();Fa();qg();E[69]();a&&a.constructor==String&&Va(a)}
function Me(){if(l("menubefore")&&l("menuafter")&&l("resourcesbefore")){var a=f.menuOpacity/100;l("menubefore").style.opacity=a;l("menuafter").style.opacity=a;l("resourcesbefore").style.opacity=a}}function ah(a,b){a=K("input",a);a.value=b;a.type="range";Hl(a);return a}function Hl(a){var b=K("span",a.parentNode);b.className="rangeval";a.J=b}var Sf,Rf=()=>{D.l||S||(E[99](),Sf=0,Tc())};
function Ue(){if(D.o){S||Qf||D.l||S||(E[98](),Sf=1);ph=!0;if(!l("playingMenu")){var a=fd("");a.id="playingMenu";document.body.style.cursor="";var b=K("div",a);D.l&&Qa||(O("button",b,73).onclick=re);O("button",b,860).onclick=Wf;!Ld&&!Ka||S||(O("button",b,463).onclick=dd);n&&!S&&(O("button",b,48).onclick=Il);let e=O("button",b,na?885:74);e.onclick=function(r){na?pa(0):Xh(r);e.textContent=N(na?885:74)};O("button",b,75).onclick=se;b=K("div",a);let g=M("div",a,"padding-bottom:37px;position:relative"),
h=K("div",g,N(461)+"...","cursor:url(nehhon/hand.gif),default;position:absolute;bottom:0px;right:7px;font-size:10px;color:#ffd75d8f");g.className="shw3";h.onclick=()=>{g.className="";J(h);g.style.cssText=""};var c=[{i:71,Ba:1,sc:n[34]/100,min:1,max:10,f:function(){this.J.innerHTML="x"+this.value;E[173](xe(this))}},{i:76,Ba:1,B:"zoomMult",f:Jl},{i:77,Ba:1,B:"scrollSpeed",f:Jl},{i:446,B:"stdcolors",fa:Lf},{i:79,B:"nightcycle"},{i:886,B:"menud",fa:()=>{l("content").className="nw "+("1"==f.menud?"nwb":
"");G||(Pj=[-k.U*Y,Le()?-(window.innerHeight-gh-k.L)*Y:-k.L*Y],B.uniform2fv(Nj,Pj));Tj()}},{i:875,B:"selcolor",fa:()=>{E[273](1==f.selcolor)}},{i:82,B:"deathsounds"},{i:404,B:"unlimitedZoom"},{i:456,B:"scrollmouse"},{i:397,B:"zoomPointer"},{i:878,B:"hlffps"}];"true"!=f.theme&&(c.unshift({i:78,Ba:1,B:"menuOpacity",f:Jl,fa:Me}),c[6]=void 0);for(let r of c)if(r){c=r.sc||f[r.B];var d=r.Ba?b:g;if(r.Ba){let u=ah(K("div",d),c);u.oninput=r.f;u.oninput(1);u.onchange=()=>{f[r.B]=u.value;r.fa&&r.fa()};r.min&&
(u.min=r.min,u.max=r.max)}else Ge(d,u=>{f[r.B]=u?1:0;r.fa&&r.fa(u)},"true"==c||1==c);O("div",d,r.i)}b=M("div",a,"position:relative;padding-top:44px");c=K("div",a);let m=ah(K("div",c),f.soundRange);m.oninput=Jl;m.oninput();m.addEventListener("input",()=>{Bc.gain.value=xe(m)/100;f.soundRange=m.value});O("div",c,81);let q=ah(K("div",c),f.musicRange);q.oninput=Jl;q.oninput();q.addEventListener("input",()=>{Kc.volume=xe(q)/100;f.musicRange=q.value});O("div",c,80);O("span",b,833,"position:absolute;top:4px;left:19px;font-size:11px;color:#ffd75d8a");
d=[{i:"Original",B:0},{i:"Orchestral version by Pau Garriga",B:4,a:"https://www.youtube.com/watch?v=zNg7e1N7ZZo"},{i:"Sharp Rain version",B:1,a:"https://www.youtube.com/user/rainheart666787/featured"},{i:"Diemiurgo additional track",B:2,a:"https://soundcloud.com/diemiurgo/tzar-adp-final"},{i:"Remastered",B:3},{i:"Mute",B:"mute"}];c=f.favMusic;let t;for(let r of d){let u=Ge(b,()=>{f.favMusic=r.B;t==u?(t.checked=1,eg(t,0)):(t&&(t.checked=0,t.style.backgroundPositionY=""),t=u,Mc())},r.B==c);r.B==c&&
(t=u);d=K("div",b,!r.a&&r.i||"");r.a&&(d=K("a",d,r.i),d.href=r.a,d.target="_blank")}Mf=K("button",a);Mf.className="closeIcon";Mf.onclick=()=>{T(a.parentNode.parentNode);S||Qf||Rf();ph=!1;rg()}}l("playingMenu").parentNode.parentNode.style.display=""}}function se(){location.hash="";location.reload()}function Kl(){return parseInt(f.color.substr(1),16)}function Ll(a){for(var b=mc(E[59](a.length),a.length),c=0;c<a.length;c++)b[c]=a[c]}
window.nlsndts=function(a,b,c){a=ui(a,4*b);b=new Uint8Array(2+a.length);b[1]=c;b.set(a,2);p(b);I(33,b)};
Vb=function(){var a=fd("",1);a.id="gameForm";let b=M("div",a,"padding:16px;background:#ffffff08;box-shadow: 0 0 20px #000;border:1px solid rgb(243 205 90/8%);display:grid;grid-template-columns:auto auto;gap:14px;text-align:right;font-size:12px;align-items:center");O("span",b,86);let c=K("input",b);c.spellcheck=!1;c.value=f.gameDescription||wg(N(563),k.name);c.Oc=29;O("span",b,87);let d=M("input",b,"width:39px");d.type="number";d.min=2;d.max=150;d.value=8;O("span",b,85);let e=Ge(b,()=>{},!1),g;f.sid&&
(O("span",b,440),g=Ge(b,()=>{},!1));O("button",a,2,"margin-top:18px;font-size:14px;padding:8px;color:#0f0;text-transform:uppercase;width:100%").onclick=()=>{var h=c.value,m=d.value,q=e.checked,t=g&&g.checked;if(E){ac();rg();k.u=1;k.D={description:h.substr(0,30),max:parseInt(m),nc:q,qc:t};2>k.D.max&&(k.D.max=2);150<k.D.max&&(k.D.max=150);f.gameDescription=k.D.description;H.host=!0;t=k.D;Oa();h=t.max;m=t.nc;q=t.qc;var r=k.name;t=Ra(t.description);r=Ra(r);var u=new ArrayBuffer(5+t.length+r.length);u=
new Uint8Array(u);u[1]=h;u[2]=m;u[3]=q;u[4]=t.length;u.set(t,5);u.set(r,5+t.length);h=Ml(0,u);Nl?Ol(h):(vl(),H.v.send(h));D.l=1;k.ob=!0}Q(a)}};function re(){li&&S&&ti();E[176]()}var Pl,Ql=()=>{var a=Pl;return ui(a[0],a[1])};window.svgwss=function(a,b,c,d){Pl=[a>>>0,b];a=new Uint8Array(9);Eb(a,1,c);Eb(a,5,d);p(d);I(64,a)};
window.svggme2=function(){performance.now();var a=E[42](),b=nc();a=ui(a,b[0]);"true"==f.multithreading&&(a=a.slice());b=URL.createObjectURL(new Blob([a],{type:"application/octet-binary"}));a=document.createElement("a");a.style="display: none";a.href=b;b="savegame";S&&(E[240](0),b=he||"map");a.download=b+".tzared";a.click()};function Zf(a,b){a=URL.createObjectURL(a);var c=document.createElement("a");c.style="display: none";c.href=a;c.download=b;c.click()}
function Rl(){for(var a=document.getElementsByClassName("onlPlayer"),b=0;b<a.length;b++)J(a[b]);1==E[70]()-E[68]()?(Sl.M=void 0,D.id=void 0,D.l=0,k.D=void 0,H.close(),qg(5),k.u=0,E[69](1),ml()):(D.jc||bl(),I(7),E[64](~~(1E4*Math.random())))}var Tl,Fl;
function Ul(){if(!Fl||D.o){if(Vl){for(let a of Vl.children)a&&(a.style.width="",a.style.opacity="");Vl.style.cssText=""}clearInterval(Ul.Xa);l("wtr")&&(l("wtr").textContent=Cl?Wl(Cl):N(526),l("quitbutton").dataset.title="")}else Fl--,9>=Fl&&1<=Fl&&xc("crusade"),Tl.innerHTML=Fl}window.hdpsnd=function(a,b,c){a=mc(a,b);(c=Xl(c))&&(c.u||H.host)&&c.send(a)};var vk,wk,Ab,mk=0;
function gl(){setTimeout(()=>{var a=Date.now()-D.F;f.avg_fps=Math.round(mk/(a/1E3));(a=Math.round(Yl/Zl))&&(f.avg_ping=a);f.avg_cpu=Math.round(yk/xk)},6E5);!Oe&&H.host&&I(27);if(!S){let a=E[166]();a&&(vk=K("span",l("topinfo"),`<span style='font-size:15px'>\u262e</span> ${a}:00`));n[8]&&(wk=K("span",l("topinfo"),"","",1))}rg();l("alert")&&R("alert");l("waitList")&&Q(l("waitList"));J(l("plinroom"));D.o=1;D.F=Date.now();Rc();S||Oc();il=!1;E[41]();if(vb){vb=0;for(let a of wb)yb(a);wb.length=0}Tc();G||
Yj();G&&Ya("If you have graphic problems go to #Settings and change GPU to WebGL2")}window.startMovement0=gl;
function Eg(){let a=K("div",document.body);a.className="gifsearch";let b=K("input",a);b.type="text";b.placeholder="\ud83d\udd0e\ufe0e";b.focus();let c=K("div",a),d=K("div",c),e=K("div",c),g=0,h=0,m=K("button",a);m.className="closeIcon";m.onclick=()=>J(a);let q=async t=>{var r=`https://g.tenor.com/v1/search?q=${b.value}&key=${"LIVDSRZULELA"}&limit=${20}`;g?r+="&pos="+20*g:g=0;r=await (await fetch(r)).json();if(t==h){t=1;for(let u of r.results)r=K("img",t?e:d),r.src=u.media[0].nanogif.url,r.onclick=
()=>{p(u);Fg(u.media[0].gif.url);J(a)},t^=1}};c.onscroll=function(){c.offsetHeight+c.scrollTop>=c.scrollHeight&&(g++,q(h))};b.oninput=()=>{Bb(e);Bb(d);g=0;h++;q(h)}}var ne=document.getElementsByTagName("main")[0],ph=!1;function rg(){ph=!1;ne.style.cssText=""}function ul(){R("game");El();for(var a=document.getElementsByClassName("onlPlayer"),b=0;b<a.length;b++)J(a[b]);Sl.M=void 0;Fa();D.id=void 0;D.l=0;k.D=void 0;H.close();qg();k.u=0;E[69]()}
function $l(a){a=parseInt(a);if(2>a||!a)a=2;150<a&&(a=150);l("mmplayers").innerHTML=a;a!==k.D.max&&(k.D.max=a,am());return a}window.updateMax=$l;function bm(){var a=`<p id="onlineTopInfo"></p>
<h3 id="wtr"></h3>
<div id="multi21">
<table class="players">
<thead>
${'<tr style="font-size:16px;text-transform:uppercase;color:var(--color1);border-bottom:2px solid #6e6e6e3b;"><td></td><td></td><td style="padding:15px 11px;">'+(!E[67]()&&N(103)||"")+'</td><td id="onltms">'+N(21)+' <span id="teamlock"></span></td><td id="onlrd">'+N(543)+"</td></tr>"}
</thead>
<tbody id="multiplayertable">
</tbody>
</table>
<div id="chat">
<div id="rominfo" style="font-size:13px;margin-left:10px;color:#ad995f"></div>
<ul id="msgs">
</ul>
<input id="msginput" type="text" autocomplete="off" placeholder="chat"/>
</div>
</div>
<div id="showGameInfo"></div>
<div id="buttons"></div>
<div id="gvw"></div>
`;return l("game")?!1:(a=K("div",document.getElementsByTagName("main")[0],a),a.id="game",a.className="playermenu",!0)}var pl,cm;function dm(){if($k)if(2!=pl&&9!=pl){var a=E[70](),b=4==em?4:5==em?1:2,c=~~(a/b),d=1==b?N(717):c;a%=b;for(let e=0;e<b-1;e++)d+="v"+(c+(0<a?1:0)),a--;l("rominfo").innerHTML=d}else l("rominfo").innerHTML=N(717);else{b=pb(qb);c="";d=!0;for(a=1;64>a;a++)1<b[a]&&(d=!1),b[a]&&(c&&(c+="v"),c+=b[a]);if(!d)for(a=0;a<b[0];a++)c+="v1";l("rominfo").textContent=d?N(717):c}}
window.rminfo=dm;var fm;
function gm(){if(bm()){l("teamlock").onclick=hm;var a=l("gvw");let b=K("div",a,"\u25bc [- - -]");a=K("button",l("chat"),"GIF");a.className="gif";a.onclick=Eg;b.onclick=()=>{fm?(b.innerHTML="\u25bc [- - -]",T(l("gameList"))):(b.innerHTML="\u25b2 [- - -]",l("gameList").show());fm=!fm};Kg=l("msgs");l("msginput");l("msginput").addEventListener("keyup",function(c){13===c.keyCode&&Fg()})}else R("multi21"),l("multiplayertable").innerHTML="",l("showGameInfo").innerHTML="";l("gvw").appendChild(l("gameList"));fm?
l("gameList").show():T(l("gameList"));l("onlrd").style.cssText=nl?"text-align:center":"display:none";l("onltms").style.cssText=$k?"display:none":""}var im,jm,km=()=>"*Score = sum of the individual score of the last 16 games divided by 16<br>*Play at least one match in the last three weeks to be on this ranking";
function lm(){sb?I(34,mm(0)):H.v.addEventListener("open",()=>I(34,mm(0)));let a=fd("",2);a.id="rank";a.style.maxWidth="630px";a.style.minHeight="900px";let b=M("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=["Deiv 1500","PRO LEAGUE 2024",N(890),"Wall of banneds"],d=[0,7,8];for(let e=0;e<c.length;e++){let g=K("button",b,c[e]);e||(g.style.color="#ffca26");g.onclick=()=>{if(!g.style.color){for(let h of b.children)h.style.color="";g.style.color="#ffca26";void 0==d[e]?I(53):I(34,mm(d[e]));jm.innerHTML=
km()}}}im=K("div",a);jm=K("span",im.parentNode,km(),"font-size: 12px; color: rgb(211, 211, 211); height: 35px; display: block;")}var nm;
function Yb(){sb?I(58,mm(0)):H.v.addEventListener("open",()=>I(58,mm(0)));let a=fd("",2);a.id="lastgames";let b=M("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=[N(556),N(899),om(1)],d=0;for(let e of c){let g=d,h=K("button",b,e);h.onclick=()=>{if(!h.style.color){for(let m of b.children)m.style.color="";h.style.color="var(--color1)";I(58,mm(g))}};d++}b.children[0].style.color="var(--color1)";nm=K("div",a)}function Ml(a,b){b?b[0]=a:b=new Uint8Array([a]);return b}
function I(a,b){b?b[0]=a:b=new Uint8Array([a]);sb&&H.v.send(b)}function mm(a){let b=new Uint8Array(2);b[1]=a;return b}
let pm="AD AE AF AG AI AL AM AO AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CT CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EN ER ES ET EU FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NW NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SW SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS WW XK YE YT ZA ZM ZT ZW XX".split(" "),qm=
NaN;(async function(){let a;if(f.CCID)a=parseInt(f.CCID);else{let b=(await (await fetch("https://tza.red/cdn-cgi/trace",{mode:"cors"})).text()).split("loc=")[1].substr(0,2);a=pm.indexOf(b);f.CCID=a}sb?I(36,mm(a)):H.v.addEventListener("open",()=>I(36,mm(a)));navigator.getBattery&&(qm=await navigator.getBattery())})();function rm(a,b,c){a[b]=c&255;a[b+1]=c>>8&255}function Eb(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255;a[b+3]=c>>24&255}
function sm(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255}var tm=(a,b,c,d)=>{c=Ra(c?c.substring(0,d):"");a[b++]=c.length;a.set(c,b);return b+=c.length},Oe;function um(a){let b=new Uint8Array(4);sm(b,1,a);return b}function Ob(a){a=Ra(a);var b=new ArrayBuffer(1+a.length);b=new Uint8Array(b);b.set(a,1);return b}function Gb(a,b){b=Ra(b);var c=new ArrayBuffer(4+b.length);c=new Uint8Array(c);sm(c,1,a);c.set(b,4);return c}function yl(a){return(new TextDecoder).decode(a)}
function vm(a,b){a=new Uint8Array(a.buffer,b||1);return yl(a)}function wm(a,b,c){a=new Uint8Array(a.buffer,b,c);return yl(a)}function xl(a,b){return a[b+2]+(a[b+1]<<8)+(a[b]<<16)}function xm(a,b){return a[b+3]+(a[b+2]<<8)+(a[b+1]<<16)+(a[b]<<24)}function ym(a){return xl(a,1)}
function zm(a){var b=f.name;a=Ra(a);b=Ra(b);let c=Ra("");var d=new ArrayBuffer(3+a.length+b.length+c.length);d=new Uint8Array(d);d[1]=a.length;d[2]=b.length;d.set(a,3);d.set(b,3+a.length);d.set(c,3+a.length+b.length);return d}function Am(a){let b=Ra(f.name),c=Ra("");var d=new ArrayBuffer(6+b.length+c.length);d=new Uint8Array(d);d[1]=0;d[2]=b.length;sm(d,3,a);6<d.length&&(d.set(b,6),d.set(c,6+b.length));return d}function Pb(a){let b=new Uint8Array(5);Eb(b,1,a);return b}
function Ra(a){return(new TextEncoder).encode(a)}window.kllf5=function(a){setTimeout(E[203],8500,a)};zb.prototype.close=function(a){for(var b=this.I.slice(0),c=0;c<b.length;c++)b[c].close(1),p(b[c].timeout),b[c].timeout&&clearTimeout(b[c].timeout);if(a&&H.v)return H.v.close();this.I.length=0;I(1);this.host=!1};function am(){var a=k.D.max-E[68]();I(8,mm(a))}function Bm(a){try{return JSON.parse(a)}catch(b){return p(b),!1}}
window.NHretransmit=function(a,b,c){if(H.host){a=mc(a,b);b=H.I;for(var d=0;d<b.length;d++)b[d].id!=c&&b[d].send(a);Cm()}};var Cb;function Dm(){Cb=1;for(var a=H,b=a.I.slice(0),c=0;c<b.length;c++){var d=b[c];d.closed=!0;d.S&&d.S.close()}p(a.v);a.v.close();Rc()}window.nhcleanclose=Dm;
var xb=[async function(a,b){a=ym(b);b=vm(b,4);if(!Xl(a)){var c=Bm(b);c&&(p(c),b=Em(a),b.setRemoteDescription(new RTCSessionDescription(c)),c=await b.createAnswer(),await b.setLocalDescription(c),p(c),I(4,Gb(a,JSON.stringify(c))))}},async function(a,b){a=ym(b);b=vm(b,4);if(a=Fm(a))if(b=Bm(b))p(b),b=new RTCSessionDescription(b),await a.setRemoteDescription(b)},async function(a,b){a=ym(b);b=vm(b,4);if(a=Fm(a))if(b=Bm(b)){p(b);try{await a.addIceCandidate(b)}catch(c){console.error("Error adding received ice candidate",
c)}}},async function(a,b){var c=ym(b);a=xl(b,4);k.eb="#"+wm(b,8,b.length-(c?8:20));location.replace("#"+k.eb);Oe=b[7];E[66](a);k.K=a;p("message",c,Oe);if(c)gd=ol=Cl=$k=Wg=0,E[204](Oe),Oe?(a=parseInt(c),b=Em(a,!0),c=await b.createOffer(),await b.setLocalDescription(c),I(6,Gb(a,JSON.stringify(c)))):(Gm=c,Hm(c));else{("1"!=f.muteroom||D.o)&&xc("e_barrack1");Oe=0;$k=1;Gm=0;c=b[b.length-15];p(c);Dl=2==c;ol=b[b.length-14];gd=b[b.length-13];Cl=xm(b,b.length-12);Wg=b[b.length-8];cm=b[b.length-7];nl=b[b.length-
6];Im(1);a=b[b.length-2];var d=b[b.length-1];Fb=b=xl(b,b.length-5);pl=a;l("multi21").className=9==pl||7==pl?"prs_br":"";E[204](0,1,Wg,pl,gd);E[55](d+1);gd&&(md={});if(ol)!c&&gd&&(vb=1,wb=[]);else{n=Da[a].slice();if(Wg&&7==pl){c=cm/255*2E3+1E3;c=100*Math.floor(c/100);for(d=0;4>d;d++)n[1+d]=c;n[18]=10}p(n);a&&(n[46]=b+2E3*cm,a=[0,0,0,0,2,4,4,4,6],n[6]=a[cm%a.length]);al()}}},function(a,b){Oe=b[4];a=ym(b);b=vm(b,5);p(a,b);k.eb="#"+b;Im();setTimeout(Jm,5E3);E[204](Oe);E[66](a,1);k.K=a;bl();E[55](k.D.max+
1);zl(E[56](0,f.civi||0,Kl(),a,0),17,k.name);Al()},function(a,b){Km(b)},function(a,b){a=ym(b);(a=Xl(a))&&Lm(a,1)},function(a,b){a=ym(b);Oe?(p(a),0!=a||D.o?(a=Xl(a))&&a.close():(Db(N(95)),xc("ressurect"))):0==a?(Db(N(95)),xc("ressurect")):(p("del",Gm,a),b=jd(a),E[73](a),Fl=0,D.o||(Gm==a&&(Db(N(95)),xc("ressurect")),b&&Jg(wg(N(94),"<span>"+b+"</span>"),"ff4b4b")))},function(){if(!il){Ya("changing host...");H.ha&&(clearTimeout(H.ha),H.ha=void 0);Ta("change host");E[155]();E[66](k.K,0);I(11);H.host=!1;
H.Fa&&(clearTimeout(H.Fa),H.Fa=void 0);for(var a=0;a<H.I.length;a++)H.I[a].closed=!0,H.I[a].close(1);H.I.length=0;Mm=void 0}},async function(a,b){a=ym(b);b=b[4];p("UPDATE",a,b);if(!il){if(a==k.K)p("HOST"),H.Pa=1,H.ha=setTimeout(Nm,1E4),H.Bb=parseInt(b),E[66](k.K,1);else{E[66](k.K,0,1);H.host=!1;b=Em(a,!0);const c=await b.createOffer();await b.setLocalDescription(c);I(6,Gb(a,JSON.stringify(c)))}E[154](a)}},function(a,b){a=ym(b);b=vm(b,4);p(b);f.sid=a;f.nm=b.substr(0,24);b=b.substr(24);f.name=b;l("accb").innerHTML=
N(445);k.name=b;zl(E[53](Kl()),17,b);Q(l("login"))},function(a,b){md={};wl(b);p("USERS_INFO",md,b)},function(){f.sid="";f.nm=""},function(a,b){b=b[1];p(b);"string"==typeof b?(Va("",`Name changed to ${b}`),f.name=b):Va(wg(N(544),b))},function(){},function(a,b){b=b[1];p(b);Nl=b},function(a,b){p(b[1]);b=b[1]-1;a=[96,69,441,519,806,807,900,901][b];rg();Q(l("loadingOnline"));qg();Nb(N(a),1)},function(a,b){a=b[1];if(b=Om(xl(b,2)))a?(b.onclick=void 0,a=b.children[0].children[0],a.className="redCircle",a.style.cssText=
"",b.className="",b.F=Math.floor(Date.now()/1E3),b.oc&&b.Mb&&(b.style.filter="hue-rotate(311deg)"),b.style.height="0px",b.style.opacity="0",b.style.border="none",b.children[3].children[2].innerHTML=b.children[3].children[0].innerHTML,b.children[1].children[0]&&T(b.children[1].children[0]),setTimeout(Pm,1E3,b),b.ba*=-1):b.offsetParent?(b.style.height="0px",b.style.opacity="0",setTimeout(J,1E3,b)):J(b)},function(a,b){a=b[1];if(b=Om(xl(b,2))){if(b.onclick&&b.ib){var c;6>a?c=6:c=a+(2-a%2);b.children[3].children[2].innerHTML=
c}c=b.children[3].children[0];c.offsetParent&&(c.style.color=parseInt(c.innerHTML)<a?"#0f0":"red",setTimeout(Qm,250,c));c.innerHTML=a}},function(a,b){a=b[1];if(b=Om(xl(b,2)))b=b.children[3].children[2],b.offsetParent&&(b.style.color=parseInt(b.innerHTML)<a?"#0f0":"red",setTimeout(Qm,250,b)),b.innerHTML=a},function(a,b){a=vm(b);Va("",`Name changed to ${a}`);f.name=a},function(a,b){a=ym(b);let c=xl(b,4),d=b[7],e=b[8],g=wm(b,9,d);b=wm(b,9+d,e);p(c,b,g);Gl||=K("div",l("game"),`<div style="margin-bottom:14px;color:var(--color1)">${N(520)}</div>`,
"position: fixed; background: rgba(0, 0, 0, 0.55); padding: 17px 24px; box-shadow: var(--boxsp); text-align: center; z-index: 9; right: 0px; top: 81px; border: 1px solid #f3cd5a1f; border-right: none;");K("div",Gl,Xg(b,g,c),"margin-top:6px").O=a},function(a,b){a=ym(b);if(Gl){for(let c of Gl.children)if(c.O==a){J(c);break}1==Gl.children.length&&(J(Gl),Gl=void 0)}},function(a,b){a=ym(b);var c=Xl(a);c&&!c.closed&&(c.S&&Lm(c),Rm(c,a,new Uint32Array(b.buffer,4)))},function(a,b){if(!ub){a=ym(b);var c=md[a];
c&&Rm(c,a,new Uint32Array(b.buffer,4))}},function(a,b){Ab=Date.now();a=xm(b,1);1==ub?(b=new Uint8Array(9),Eb(b,1,E[271]()),Eb(b,5,10*a),I(56,b),ub=2):(E[205](a),performance.now())},function(a,b){Fb=xl(b,1);tb=xm(b,4);E[206]();$k&&gl()},function(){let a=Math.round(performance.now()-Pe);Yl+=a;Zl++;Ne&&ej(Ne,a+"ms")},function(a,b){p("new",b);wl(b,1)},function(a,b){a=ym(b);b=b[4];let c=E[207](a,b);c&&a!=k.K&&Sm[c-1]&&(Sm[c-1].innerHTML=Xk(b))},function(a,b){a=ym(b);let c=b[4],d=b[5];b=b[6];let e=E[208](a,
c,d,b);e&&a!=k.K&&Tm[e-1]&&(Tm[e-1].children[0].style.color="rgb("+c+","+d+","+b+")")},function(){if(Vl){for(let a=0;a<Vl.children.length;a++)a!=em&&(Vl.children[a].style.width="0px",Vl.children[a].style.opacity="0");Vl.style.Ic="0px"}l("wtr").innerHTML=N(529);l("quitbutton")&&(l("quitbutton").dataset.title=N(736));Tl=K("span",l("wtr"),10,"display:inline-block;width:16px;text-align:right;color:var(--color1)");Ul.Xa&&clearInterval(Ul.Xa);Fl=10;Ul.Xa=setInterval(Ul,1E3)},async function(){if(Wg){if(!pl){var a=
1==em?7:2==em?8:3==em?3:4==em?6:5==em?5:0;pl=a;n=Da[a].slice();n[46]=Fb+2E3*cm;a=[0,0,0,0,2,4,4,4,6];n[6]=a[cm%a.length]}8==pl&&(a=await (await fetch("nehhon/deiv_no_magic.tzmod")).arrayBuffer(),Ai(a));E[204](0,1,Wg,pl,gd)}if(ol)Um();else E[209]()},function(a,b){p(b,"teams");a=(b.length-1)/2;for(let c=1;c<a+1;c++)E[210](c,b[c],b[c+a])},function(a,b){a=1;Bb(im);im.style.visibility="";im.style.display="grid";var c=K("div",im);K("div",c);K("div",c);K("div",c);K("div",c,"<div>"+N(478)+"</div>");c=1;let d;
if(1<b.length){do{let q=xl(b,a);a+=3;let t=b[a+1]+(b[a+0]<<8);a+=2;var e=b[a+1]+(b[a+0]<<8);a+=2;let r=b[a++];var g=b[a++],h=wm(b,a,g);a+=g;g=b[a++];var m=wm(b,a,g);a+=g;let u=b[a++];g=K("div",im);let v=c;1==q&&(d=g,c--,v=99);let x=K("div",g),y="#fff";y=3>=v?"#f0f":10>=v?"#0f0":20>=v?"#ff0":"#fff";K("div",x,1<q&&v||"-",99<v&&"font-size:10px").className="pos";K("div",x,"","background:"+y).className="plc";K("div",g,Xg(m,h,u?Yg[u-1]:q)).onclick=()=>{q&&I(60,Pb(q))};h=K("div",g);h.className="plshape";
for(m=0;m<r;m++)K("div",h,"",e&1<<m&&"color:#00db00");e="";1<q&&(e=(Math.round(10*t/16)/10).toString().split("."),e=e[0]+".<span style='font-size:10px'>"+(e[1]?e[1].charAt(0):0)+"</span>");K("div",g,`<div>${e}</div>`);c++}while(a<b.length)}d&&im.appendChild(d)},function(a,b){a=ym(b);b=b[4];md[a].state=b;a!=k.K&&(a=Vm[md[a].La])&&(a.children[0].children[0].checked=b)},function(){Nb(N(714),1);Dm()},function(){Nb(N(711),1)},function(){Nb(N(710),1)},function(a,b){Wm(b)},function(){Wm()},function(a,b){Xm.value=
vm(b,1)},(a,b)=>{a=0;for(let c=1;c<b.length;c++){if(Ym){let d=Ym[c-1];d&&(d.textContent=b[c],d.style.color=b[c]?"":"#787878")}b[c]>b[a+1]&&(a=c-1)}em=a;dm()},(a,b)=>{Kb.innerHTML=N([809,810,909][b[1]])},(a,b)=>{Bb(im);im.style.visibility="";im.style.display="block";a=1;let c=K("section",im);jm.textContent="";do{var d=xl(b,a);a+=3;var e=b[a++],g=b[a++];let m=wm(b,a,g);a+=g;var h=b[a++];g=wm(b,a,h).split(",");a+=h;h=K("div",c);K("span",h,Xg("",m,d));K("img",h).src=`nehhon/Q${e}.webp`;K("span",h,"<span style='font-size:14px'>\u2020</span> "+
g[1],"font-size:11px;color:red");d=K("div",h);for(e=2;e<g.length;e++)K("span",d,g[e])}while(a<b.length)},(a,b)=>{if(a=md[ym(b)])a:{b=new Uint32Array(b.buffer,4);!a.N&&4E3<b[0]&&(a.N=new Uint32Array(b[0]),a.ja=0);if(a.N)if(a.N.set(b,4E3*a.ja),a.ja++,4E3*a.ja>=a.N.length)b=a.N,a.N=void 0;else break a;b=new Uint32Array(b.buffer,4+b.byteOffset);a.Ya=Date.now();Ll(b);E[270]();ub=0;for(let c of wb)yb(c);wb.length=0}},(a,b)=>{E[269](xm(b,4),xm(b,8),xl(b,1))},(a,b)=>{a=2;let c=b[1];if(!c){var d=nm.parentNode;
nm.remove();nm=K("div",d)}if(1<b.length){do{let r;var e=void 0;c||(r=K("div",nm));a+=3;d=b[a++];let u=b[a++];a++;var g=xm(b,a);a+=4;var h=xm(b,a);a+=4;let v=b[a++];c||(e=K("div",r),K("span",e,Zm(d)),K("span",e,$m(h),"color:#ffffff7a"),K("span",e,Uc(g)),e=K("div",r));let x=new Uint32Array(50*v);g=0;var m=void 0;let y=[];h=[];c||(h[u]=M("div",e,9==d?"width:100%":""),h[u].className="winner");for(let z=0;z<v;z++){var q=b[a++];let w=q?wm(b,a,q):"";a+=q;var t=b[a++];q=wm(b,a,t);a+=t;t=xl(b,a);a+=3;m=b[a++];
let A=b[a++],C=b[a++],F=b[a++],L=xl(b,a);a+=3;c||(h[m]||(h.length&&9!=d&&K("div",e,"VS","color:#c5c5c5;font-size:12px;width:auto"),h[m]=M("div",e,9==d?"width:max-content":"")),m=h[m],K("span",m,Xg(w,q,A?Yg[A-1]:t)));for(m=0;50>m;m++)x[g++]=xm(b,a),a+=4;y.push({name:q,rb:w,role:A,id:t,Vb:C,race:F,color:L})}c?Lg(0,{data:x,G:y,Sa:u}):r.onclick=()=>{Lg(0,{data:x,G:y,Sa:u})}}while(a<b.length)}},(a,b)=>{a=xl(b,1);b=xm(b,4);Fb==a&&l("wtr")&&(Cl=b,l("wtr").textContent=Wl(Cl));if(a=Om(a))a.children[1].children[0].textContent=
Wl(b)},(a,b)=>{var c=1;const d=[0,an(b,c),an(b,c+4),an(b,c+8)];c+=12;var e=[0,an(b,c),an(b,c+4),an(b,c+8)];c+=12;var g=[0,an(b,c),an(b,c+4),an(b,c+8)];c+=12;var h=[an(b,c),an(b,c+4),an(b,c+8)];c+=12;var m=an(b,c);c+=4;p(c);var q=bn(b,c);c=q.na;var t=cn(b,c);c=t.na;var r=b[c];c+=1;var u=b[c];c+=1;var v=an(b,c),x=cn(b,c+4+4);c=x.na;for(a=[];c<b.length;)a.push({F:an(b,c),duration:an(b,c+4),Wb:b[c+8],G:b[c+9],points:b[c+10],Ca:b[c+11],Sa:b[c+12],id:an(b,c+13)}),c+=17;Q(dn);b=fd("",2);b.className="playerCard";
dn=b;c=K("div",b);var y=K("section",c);K("img",y).src="nehhon/"+`Q${r}.webp`;K("div",y,Xg(t.result,q.result,u?Yg[u-1]:m));t=K("footer",c);r=K("div",b);u=K("div",r);u.className="rankstats";K("header",u,N(537)+":");c=["Pro league","Deiv 1500","No magic"];p(h);for(y=0;3>y;y++){K("div",u,c[y]);let C=h[y];K("span",u,C?C+"\u00ba":"-")}h=K("div",r);h.className="basicinfo";O("div",h,896);K("span",h,"#"+m);O("div",h,893);K("span",h,en(v));if(x.result){m=O("div",h,897);x=x.result.split(",");v=K("span",h);h=
{};r=0;for(var z of x)if(z!=q.result&&!h[z]&&(h[z]=1,K("span",v,z),5<r++))break;v.children.length||(J(m),J(v))}t.className="statsTable";z=[[N(895),d],[N(902),e],[N(903),g]];K("div",t,"");K("div",t,"\u2211","color:#ce9421;font-size:13px");for(e=0;3>e;e++)M("div",K("div",t),`width:20px;height:20px;background: url(nehhon/civ.webp);background-position-y:-${20*e}px`);for(var w of z){K("div",t,w[0]);e=w[1];for(g=1;4>g;g++)e[0]+=e[g];for(g=0;4>g;g++)q=e[g],x=K("div",t,q),w!=z[0]&&(x.dataset.title=Math.round(q/
d[g]*1E3)/10+"%")}w=K("div",b);w.className="plgamesheader";w=K("div",w);K("div",w);for(let C of[904,478,880,905,906,907])O("div",w,C);w=K("div",b);w.className="plgames";let A;for(let C of a){let F=M("div",w);M("div",F,`border-left:1px solid ${C.Sa?"#0f0":"#f00"}`);K("div",F,C.Ca+"\u00ba<span>"+(["<img src='nehhon/krwn.webp'>"," \u2b24"," <span style='color:#a13d00'>\u2b24</span>"][C.Ca-1]||"")+"</span>");K("div",F,C.points);K("div",F,C.G);K("div",F,Uc(C.duration));K("div",F,Zm(C.Wb));K("div",F,$m(C.F));
1==C.Ca&&(F.style.background="#bfa2482e",F.style.color="var(--color1)");2==C.Ca&&(F.style.background="#e3e3e32e");3==C.Ca&&(F.style.background="#bf74482e");F.onclick=()=>{I(61,Pb(C.id));A&&(A.style.opacity="");A=F;F.style.opacity="0.5"}}w.addEventListener("scroll",function(){})},(a,b)=>{if(!(3>b.length||il||D.o)){fn.style.opacity=1;Bb(fn);a=1;do{let d=xl(b,a);a+=3;let e=b[a++];var c=b[a++];let g=b[a++],h=yl(new Uint8Array(b.buffer,a,c));a+=c;c=yl(new Uint8Array(b.buffer,a,g));a+=g;K("div",fn,Xg(c,
h,e?Yg[e-1]:d))}while(a<b.length);b=fn.getBoundingClientRect();b.bottom>window.innerHeight-10&&(fn.style.top=b.top-(b.bottom-window.innerHeight+10)+"px")}},()=>{let a=Ql();var b=new Uint8Array(a.length+1);b[0]=65;b.set(a,1);H.v.send(b);E[43]()},(a,b)=>{gn(b.buffer,1);vb=1;wb=[]},(a,b)=>{f.tmpid=vm(b,1)},()=>{f.tmpid=""},()=>{let a=Ql();var b=new Uint8Array(a.length+1);b[0]=69;b.set(a,1);H.v.send(b)},()=>{bc("",915)},(a,b)=>{64!=b[1]&&dc(924)}],dn;
function an(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)}function bn(a,b){const c=an(a,b);b+=4;a=new Uint8Array(a.buffer,a.byteOffset+b,c);return{result:(new TextDecoder("utf-8")).decode(a),na:b+c}}function cn(a,b){const c=a[b];b+=1;return 1===c?(a=bn(a,b),{result:a.result,na:a.na}):{result:null,na:b}}
function $m(a){a=new Date(1E3*a);return("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear().toString()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}
var Wl=a=>{57600>a-Date.now()/1E3?(a=new Date(1E3*a),a=N(898)+" "+(("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2))):(a=new Date(1E3*a),a=(new Intl.DateTimeFormat(k.$a||navigator.language,{weekday:"short",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})).format(a),a=a.replace(/,/g,""),a=a.charAt(0).toUpperCase()+a.slice(1));return a};
function en(a){a=new Date(1E3*a);return("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear().toString()}window.gtccles=(a,b,c)=>{b=mc(a,b);a=new Uint32Array(b.length+1);a[0]=a.length;a.set(b,1);if(H.v.readyState)for(let d=0,e=Math.ceil(a.length/4E3);d<e;d++){b=a.length-4E3*d;4E3<b&&(b=4E3);b=new Uint32Array(a.buffer,16E3*d,b);let g=new Uint32Array(b.length+1),h=new Uint8Array(g.buffer);g.set(b,1);h[0]=55;sm(h,1,c);H.v.send(g)}};
var Zm=a=>({7:"Pro League",8:N(890),9:"Battle Royale"})[a]||"Deiv 1500";let em;var Pe,Ne,Gl;function Qm(a){a.style.color=""}var Nl,md=NaN;window.clrNHtimer=function(){clearTimeout(H.Fa);H.Fa=void 0};function Nm(){clearTimeout(H.ha);H.ha=void 0;H.Fa=setTimeout(E[179],3E4);H.host=!0;setTimeout(Jm,5E3);E[66](k.K,1,1);Jm()}window.checkAlive=function(a){Xl(a)||(E[73](a),p("KILL",a))};function Fm(a){if(a=Xl(a))return a.S}
function Xl(a){for(var b=H,c=0,d=b.I.length;c<d;c++)if(b.I[c].id==a)return b.I[c]}function hn(a,b,c){this.id=a;this.wc=[];b&&(this.u=b);if(c){this.S=c;p(b,565656);var d=this;b?(this.channel=c.createDataChannel("nehhof",{ordered:!0}),jn(d)):c.ondatachannel=function(e){d.channel=e.channel;jn(d)}}H.I.push(this);c||(I(9,um(this.id)),this.open())}function kn(a){if(!a.closed){if(12E3<Date.now()-a.Ya)return a.close(),p("TIMEOUT");a.timeout=setTimeout(kn,12E3,a)}}
function Hm(a){zl(E[62](),20,k.name);E[61](a,f.civi||0);Im(1)}hn.prototype.open=function(){this.Pa=!0;this.Ya=Date.now();this.Ob&&clearTimeout(this.Ob);p("DATACHANNEL OPEN");p(this);this.timeout=setTimeout(kn,12E3,this);if(D.o){if(void 0==H.ha&&E[178]()||!E[163](this.id))return this.close();H.Pa++;void 0!==H.ha&&(p(H.Pa,H.Bb,this.id),H.Pa==H.Bb&&Nm())}else this.u&&(k.ob=!0,Hm(this.id))};var Mm;
hn.prototype.send=function(a){var b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);if(this.channel){if("open"==this.channel.readyState)for(let c=0,d=Math.ceil(b.length/4E3);c<d;c++){let e=4E3*c;a=b.length-e;4E3<a&&(a=4E3);a=new Uint32Array(b.buffer,4*e,a);this.channel.send(a)}}else Mm=b};
function ln(a,b,c){if(H.v.readyState)for(let e=0,g=Math.ceil(a.length/4E3);e<g;e++){var d=a.length-4E3*e;4E3<d&&(d=4E3);d=new Uint32Array(a.buffer,16E3*e,d);let h=new Uint32Array(d.length+1),m=new Uint8Array(h.buffer);h.set(d,1);m[0]=b;m[1]=c||0;H.v.send(h)}}function Cm(){Mm&&(ln(Mm,22),Mm=void 0)}window.rlyCheck=Cm;window.nppsnd=function(a,b,c){a=mc(a,b);b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);ln(b,26,c)};
hn.prototype.close=function(a){console.trace();if(this.S)return this.S.close();a||mn(this)};function Lm(a,b){var c=a.S;if(c){var d=a.channel;d&&(d.onopen=null,d.onmessage=null,d.onclose=null,d.close());c.onicecandidate=null;c.onconnectionstatechange=null;c.oniceconnectionstatechange=null;c.onsignalingstatechange=null;c.Qc=null;c.close();p(a.id);p("ALT-8");a.S=null;a.channel=null;b||I(9,um(a.id));a.open()}}
function Rm(a,b,c){!a.N&&4E3<c[0]&&(a.N=new Uint32Array(c[0]),a.ja=0);if(a.N)if(a.N.set(c,4E3*a.ja),a.ja++,4E3*a.ja>=a.N.length)c=a.N,a.N=void 0;else return;c=new Uint32Array(c.buffer,4+c.byteOffset);a.Ya=Date.now();Ll(c);E[60](b)}
function jn(a){const b=a.id,c=a.channel;c.binaryType="arraybuffer";p(a,"SETUP");c.onopen=function(){a.open()};c.onmessage=function(d){"closed"==c.readyState||a.closed||(d=new Uint32Array(d.data),Rm(a,b,d))};c.onclose=function(d){mn(a);c.onmessage=null;p("DATACHANNEL CLOSE",a.id,d)};c.onerror=function(d){p(d,"ONERROR")};c.onbufferedamountlow=function(){var d=a.wc;d.length&&(d=d.shift(),c.send(d),p("SEND22",d))}}
function Em(a,b){const c=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),d=new hn(a,b,c);d.Ob=setTimeout(function(){Lm(d)},6E3);c.onicecandidate=function(e){p("ICE",e);e.candidate&&I(5,Gb(a,JSON.stringify(e.candidate)))};c.onconnectionstatechange=function(e){p(e,c.connectionState,d.closed);d.closed||("connected"==c.connectionState&&(d.ready=!0),"disconnected"==c.connectionState&&mn(d))};c.oniceconnectionstatechange=function(e){p(e);if(!d.closed){p(c.iceConnectionState,
d.id);if(!d.ready&&"failed"==c.iceConnectionState)return Lm(d);"failed"!=c.iceConnectionState&&"disconnected"!=c.iceConnectionState||mn(d)}};c.onsignalingstatechange=function(e){p(e);d.closed||"closed"==c.signalingState&&mn(d)};return c}
var nn,Oa=()=>{var a;if(!nn){nn=1;var b=Intl[atob("RGF0ZVRpbWVGb3JtYXQ=")]().resolvedOptions()[atob("dGltZVpvbmU=")],c=navigator.hardwareConcurrency||0,d=navigator.deviceMemory||0,e=B;e||=document.createElement("canvas").getContext("webgl");if(e){var g=e.getExtension(atob("V0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbw=="));g=e.getParameter(g[atob("VU5NQVNLRURfUkVOREVSRVJfV0VCR0w=")])}var h=navigator.userAgent;e=a="Unknown";-1<h.indexOf("Firefox")?(a="Mozilla Firefox",e=h.substring(h.indexOf("Firefox/")+8)):
-1<h.indexOf("SamsungBrowser")?(a="Samsung Internet",e=h.substring(h.indexOf("SamsungBrowser/")+16)):-1<h.indexOf("Opera")||-1<h.indexOf("OPR")?(a="Opera",-1<h.indexOf("Opera")?e=h.substring(h.indexOf("Opera/")+6):-1<h.indexOf("OPR")&&(e=h.substring(h.indexOf("OPR/")+4))):-1<h.indexOf("Trident")?(a="Microsoft Internet Explorer",e=h.substring(h.indexOf("rv:")+3)):-1<h.indexOf("Edge")?(a="Microsoft Edge",e=h.substring(h.indexOf("Edge/")+5)):-1<h.indexOf("Chrome")?(a="Google Chrome",e=h.substring(h.indexOf("Chrome/")+
7),navigator.brave&&navigator.brave.isBrave&&(a="Brave")):-1<h.indexOf("Safari")?(a="Apple Safari",e=h.substring(h.indexOf("Version/")+8)):-1<h.indexOf("Vivaldi")?(a="Vivaldi",e=h.substring(h.indexOf("Vivaldi/")+8)):-1<h.indexOf("YaBrowser")&&(a="Yandex Browser",e=h.substring(h.indexOf("YaBrowser/")+10));-1<e.indexOf(";")&&(e=e.split(";")[0]);-1<e.indexOf(" ")&&(e=e.split(" ")[0]);h=a;a=e;e=new Uint8Array(1024);b=tm(e,1,b,45);b=tm(e,b,h,45);b=tm(e,b,navigator.languages.join(),45);b=tm(e,b,a,45);b=
tm(e,b,navigator.platform,45);h=window.navigator.userAgent;a=window.navigator.platform;const m=["Win32","Win64","Windows","WinCE"],q=["iPhone","iPad","iPod"];b=tm(e,b,-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?"Mac OS":-1!==q.indexOf(a)?"iOS":-1!==m.indexOf(a)?"Windows":/Android/.test(h)?"Android":/Linux/.test(a)?"Linux":"Unknown",45);b=tm(e,b,g,255);b=tm(e,b,k.va,5);b=tm(e,b,document.referrer,255);g=b++;e[g]=c;c=b++;e[c]=d;d=b++;e[d]=ka;d=b++;e[d]=screen.colorDepth;d=b++;e[d]=navigator.cookieEnabled;
d=b++;e[d]=navigator.maxTouchPoints;d=b++;e[d]=100*qm.level;d=b++;e[d]=qm.charging;d=b++;e[d]=parseInt(f.avg_cpu)||0;d=b++;e[d]=screen.isExtended;rm(e,b,100*window.devicePixelRatio);b+=2;rm(e,b,screen.width);b+=2;rm(e,b,screen.height);b+=2;rm(e,b,window.innerWidth);b+=2;rm(e,b,window.innerHeight);b+=2;rm(e,b,576);b+=2;rm(e,b,parseInt(f.visits)||0);b+=2;rm(e,b,parseInt(f.avg_fps)||0);b+=2;rm(e,b,parseInt(f.avg_ping)||0);I(63,new Uint8Array(e.buffer,0,b+2))}};zb.prototype.send=function(a){this.v.send(JSON.stringify(a))};
function $b(a){var b=H;if(1!=b.v.readyState)return b.v.addEventListener("open",()=>$b(a));E[266](1);li=void 0;Oa();b=new Uint8Array(5);b[1]=parseInt(f.civi)||0;sm(b,2,Kl());I(31,b);!f.sid&&f.tmpid&&I(66,Ob(f.tmpid));b=a.length?Ml(3,zm(a.substr(1))):Ml(3,Am(a));Nl?Ol(b):(vl(),H.v.send(b))}
function on(){if(!D.o){var a=Math.floor(Date.now()/1E3);for(let c=0;2>c;c++){var b=Rb[c].children;for(let d of b)if(b=d.children[2])void 0!=d.F&&0>d.ba&&(b.innerHTML=Math.floor((a-d.F)/60)+" "+N(558)),!d.F&&d.fb&&d.fb-Date.now()/1E3<(d.lb?0:3600)&&(d.style.filter="",d.fb=void 0)}setTimeout(on,5E3)}}var Rb;function Om(a){if(Rb&&!(2>Rb.length))for(let b=0;2>b;b++){let c=Rb[b].children;for(let d of c)if(d.Ab==a)return d}}
var Tb,Sb,Ub,om=a=>a+(N(716)||"v")+a,fn,Yl=0,Zl=0,pn=a=>{if("https://games.crazygames.com/"==document.referrer){var b=Nb("",2),c=K("div",b);c.id="strscrn";var d=K("div",c);K("span",d,N(15)+": ");var e=M("input",d);e.type="text";e.value=f.name;e.onchange=()=>{f.name=e.value};e.maxLength=17;e.spellcheck="false";f.sid&&(e.disabled=!0);K("button",c,N(92)+" \u25b6").onclick=()=>{Zb=!0;$b(a);ac();Q(b);ll()}}};
function Km(a){if(l("index"))if(kb){var b=ym(a),c,d=0,e=Math.floor(Date.now()/1E3);b&&(K("div",l("index"),b).id="ppop");if(a&&4<a.length){b=740>window.innerWidth||650>window.innerHeight?l("index"):Qb;var g=b.scrollTop;let r=4;do{var h=a[r++];let u=a[r++],v=a[r++],x=(a[r++]<<24)+(a[r++]<<16)+(a[r++]<<8)+a[r++],y=(a[r++]<<8)+a[r++];var m=a[r++];let z=(a[r++]<<16)+(a[r++]<<8)+a[r++];var q=a[r++];let w,A;1==m?w=!0:2==m&&(A=!0);m=w?Tb:Sb;let C=document.createElement("div");C.onmouseenter=()=>{if(!il&&
!D.o){d++;c=C;var P=d;setTimeout(()=>{if(c==C&&P==d){J(fn);var ea=C.children[1].getBoundingClientRect();fn=K("div",document.body,"",`${D.l?"right:5px;":`left:${ea.left+ea.width}px;`}top:${ea.top}px;opacity:0`);fn.id="plinroom";I(62,Pb(z));C.Na=1}},400)}};C.onmouseout=()=>{d++;C.Na&&(C.Na=0,fn.style.opacity=0,setTimeout(J,600,fn))};v&&150==u&&(C.ib=1,6>h?u=6:u=h+(2-h%2));var t=yl(new Uint8Array(a.buffer,r,q));r+=q;C.ib&&(t=om(u/2)+"+");v&&kb&&!C.ib&&(t={"BR 1500":N(484)+" 1500","1V1":om(1),"FAST 1V1":N(564)}[t]||
t);let F=z;q="IO"==t;C.lb=q;!w&&v&&(C.className="pbl");let L=K("div",C);3600<x-Date.now()/1E3||x&&C.lb?C.style.filter="grayscale(1)":q&&pn(F);C.fb=x;K("div",L,"",!w&&A&&"color:#00c8c8").className="redCircle"+(!w&&" rgr"||"");t=K("div",C,t?qn(t):N(85),!F&&"color:red");x&&!w&&K("span",t,Wl(x));1==f.sid&&(K("button",t,"X","position:absolute;right:70px;pointer-events: all;margin-left: 30px; margin-top: -11px; background: rgba(255, 0, 0, 0.38); color: red; font-size: 23px; ").onclick=()=>{var P=F;confirm()&&
(P=Pb(P),P[4]=0,I(16,P))});K("div",C,v&&!w?A?N(120==u?899:556):N(557):w?~~(y/60)+" "+(N(558)||"min"):"").className="tbtime";K("div",C,`<span>${h}</span><span>/</span><span>${u}</span>`).className="tbplyrs";v&&w&&2<u&&(C.style.filter="hue-rotate(311deg)");C.Ab=F;y=e-y;if(!v||w)C.F=y,C.ba=y,w&&(C.ba*=-1);C.Mb=A;C.oc=v;!w&&F&&(C.onclick=tl);F||(C.style.opacity=.5);v&&!w&&(C.ba=2E9*u+(A?1:0));h=!0;for(let P of m.children)if(P.ba<=C.ba){m.insertBefore(C,P);h=!1;break}h&&m.appendChild(C);m.offsetParent?
C.hc=rn:C.style.animation="unset"}while(r<a.length);Ka||(b.scrollTop=g)}on.tc||(on.tc=!0,setTimeout(on,5E3))}else mb.put(()=>{Km(a)})}function rn(){this.style.animation="unset";this.hc=void 0}function Pm(a){Tb.appendChild(a);setTimeout(()=>{a.style.height="";a.style.opacity="";a.style.border=""},250)}function sn(){let a=this.C;f.avatar=a;p(this.C);I(19,mm(a));T(this.parentNode);l("avtimg").src="nehhon/Q"+a+".webp"}
function Mb(){let a=fd("",1);a.id="account";O("p",a,15,"color:var(--color1)");let b=Xa(a,f.name);b.minLength=1;b.maxLength=32;let c=O("button",a,443,"margin-left:8px;margin-bottom:6px");O("div",a,545,"color:#ccc;font-size:9px");K("button",a,N(908)+" >","margin-top: 15px; color: rgb(255 255 255); font-size: 16px; letter-spacing: 1px; text-transform: uppercase; margin-right: 20px;").onclick=()=>{var h=parseInt(f.sid);h&&I(60,Pb(h))};K("button",a,`{${N(703)}} >`,"margin-top:15px;color:#81ff81;font-size:16px;letter-spacing:1px;text-transform:uppercase").onclick=
()=>{Q(a);let h=fd("",1);tn=O("div",h,53,"gap:20px;display:flex;flex-direction:column;align-items:flex-start");I(43)};O("p",a,546,"color:var(--color1)");let d=K("div",a);var e=M("img",d,"cursor:url(nehhon/hand.gif),default;box-shadow:#ff00008f 0px 0px 38px;border:1px solid rgba(255, 0, 0, 0.48);");e.src="nehhon/Q"+(f.avatar||113)+".webp";e.id="avtimg";var g=K("div",K("div",d,"","max-height:216px;overflow-y:auto;width:57px;margin:9px"));g.id="avsel";e.onclick=function(){if(""==g.innerHTML)for(let h=
0;199>=h;h++){let m=K("div",g,"");m.onclick=sn;m.C=h}g.show()};c.onclick=function(){let h=b.value;h&&confirm(N(713))&&I(13,Ra(" "+h))};O("button",a,442,"display:block;margin-top:20px;background:#920000").onclick=function(){f.sid="";f.nm="";location.reload()}}var tn,Xm;
window.iodefeated=function(){let a=Nb("");a.id="iodef";a.parentNode.parentNode.style.zIndex=0;K("span",a,`${N(386)} ${N(387)}`);O("p",a,925);let b=K("div",a);O("button",b,913,"color:#0f0").onclick=()=>{E[284]();Q(a)};O("button",b,75,"color:#f00").onclick=se};
function Wm(a){p(a);var b=tn;Bb(tn);if(a){let g=f.sid;var c=a[1];let h=xl(a,2),m=g==h;var d=m?wm(a,8,24):0,e=wm(a,8+(m?24:0),c);c=8+(m?24:0)+c;Wa(b,e);if(m){e=K("div",b);K("span",e,N(704)+" -> ","color:var(--color1)");Xm=Xa(e,d);Xm.style.width="216px";Xm.style.fontSize="11px";Xm.readOnly=!0;let q=M("button",e,"margin-left:9px;width:16px;height:16px;background:url(nehhon/refresh.webp);background-size:cover");q.onclick=()=>{I(42);q.style.visibility="hidden"}}d=K("div",b);K("div",d,N(707)+":","font-size:12px;");
d=M("div",d,"border-left:2px solid rgba(255, 255, 255, 0.19);padding:4px;margin-top:9px;min-width:185px;display:grid;grid-template-columns:repeat(2,max-content);align-items:center;gap:2px 10px");do{let q=xl(a,c);c+=3;e=a[c++];let t=wm(a,c,e);c+=e;let r=K("div",d,Xg("",t,q),(q==h?"color:var(--color1);":"")+"font-size:11px");if(g==h&&q!=h){let u=K("div",d,"\u00d7","color:red;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{I(44,um(q));J(u);J(r)}}else K("div",d);p(t,q)}while(c<a.length);O("button",
b,m?706:712).onclick=()=>{confirm(N(713))&&(I(41),Wm())}}else{O("div",b,703,"color:var(--color1)");a=K("div",b);let g=Xa(a,"");g.style.width="159px";g.placeholder=N(704);g.maxLength=32;O("button",a,708,"margin-left:8px").onclick=()=>{let m=g.value;p(m);m&&I(39,Ra(" "+m))};b=M("div",b,"border-top:2px solid #ffffff45;padding-top:20px");let h=Xa(b,"");h.style.width="105px";h.style.textTransform="uppercase";h.placeholder=N(709);h.maxLength=5;O("button",b,705,"margin-left:8px;margin-bottom:6px").onclick=
()=>{let m=h.value;m&&I(40,Ra(" "+m))}}}
function Im(a){if((k.u||a)&&!D.id&&(a=k.eb,D.id=a,D.l=1,Q(l("loadingOnline")),!gd)){gm();Kg.innerHTML="";R("index");rg();Kd("game");l("multi21").style.display="flex";l("multi21").className="";rg();l("buttons").innerHTML="";oa(a,"Waiting");$k?(Kd("wtr"),l("wtr").textContent=Cl?Wl(Cl):N(526)):R("wtr");a=`<span style="margin-left:80px;"><input id="onlineID" type="text"  /><button id="copyButton">${N(385)}</button></span>`;if(k.u){var b=function(d){var e=E[70](),g=!H.I.length&&Oe?1:0;d<e+g&&(d=e+g);p(d,
e);d=$l(d);E[150](d+1);E[58]()};l("onlineTopInfo").innerHTML=` <button id="addAI" style="padding:6px;margin-right:26px;align-self:center;">${N(90)}</button>${a}<span id="spnpld" style="margin-left:auto"><div id="nplayersO"><img src="nehhon/pop.gif" /><span id="mmplayers">${k.D.max}</span><div id="rmmxctrl"><div id="sumpl">&#9650;</div><div id="respl">&#9660;</div></div></div></span>`;l("sumpl").onclick=function(){E[67]()||b(k.D.max+1)};l("respl").onclick=function(){E[67]()||b(k.D.max-1)};l("addAI").onclick=
function(){if(!E[67]()){var d=E[70]();150>d+1&&(d+(H.I.length?0:1)>=k.D.max&&b(k.D.max+1),zl(E[56](0,0,16777216*Math.random(),0,1),17,"AI"),am(),E[58]())}}}else l("onlineTopInfo").innerHTML=a;var c=K("img",l("onlineTopInfo"));c.src="nehhon/mute.webp";c.onclick=()=>{f.muteroom="1"==f.muteroom?0:1;c.style.opacity="1"==f.muteroom?"1.0":""};c.style.opacity="1"==f.muteroom?"1.0":"";l("copyButton")&&(l("copyButton").onclick=function(){l("onlineID").select();document.execCommand("Copy")});setTimeout(()=>
{l("onlineID").value="http://tza.red/"+location.hash},50);k.u?(location.replace("#"+D.id),l("buttons").innerHTML='<button id="startbutton">'+N(92)+' \u25b6</button><button style="display:none" id="rndmapreturn">'+N(50)+'</button><button id="optionbutton">'+N(48)+'</button><button id="maploadOnline"/>'+N(93).split("|")[0].toUpperCase()+'</button><button id="closebutton">'+N(13)+"</button>",l("startbutton").onclick=Rl,l("optionbutton").onclick=Ce,l("closebutton").onclick=ul,l("maploadOnline").onclick=
un,l("rndmapreturn").onclick=function(){Kd("addAI");l("optionbutton").style.display="inline-table";R("rndmapreturn");E[152](k.D.Cb);bl();b(k.D.Cb)}):(l("buttons").innerHTML='<button id="quitbutton">'+N(91)+"</button>",l("quitbutton").onclick=Db)}}var Gm;
function mn(a){p(a);console.trace();var b=Xl(a.id);b&&!b.closed&&a==b&&(b.closed=!0,!b.u||k.u||D.o?(p(b),H.host&&(Qk(H.I,b),E[73](b.id)),p(b.u,D.o,"admindel"),I(14,um(b.id)),b.u&&D.o&&!il&&I(10,um(b.id)),D.o||(a=jd(b.id))&&K("li",Kg,wg(N(94),a),"color:#ff4b4b")):(Db(N(95)),xc("ressurect")))}window.thereIsAnIdiot=function(a){p(a);if(k.K==a)return Va(N(97)),ul();(a=Xl(a))&&a.close()};
var Tm=document.getElementsByClassName("ucolor"),vn=document.getElementsByClassName("username"),Sm=document.getElementsByClassName("race"),wn=document.getElementsByClassName("team");function Jm(){H.host&&Oe&&(E[156](),Jm.F=Date.now(),setTimeout(Jm,5500))}window.pong=function(a){var b=Date.now()-Jm.F;Xl(a)&&(E[157](a,b),p("pong"),l("game")&&Al())};
function Sl(a){if(k.u&&"BUTTON"!=a.target.tagName&&"DIV"!=a.target.tagName&&"ucolor"!=a.target.className){Sl.M&&(J(Sl.M),Sl.M=void 0);var b=a.pageX;a=a.pageY;var c=this.La;p(c);var d=K("div",l("game"));d.style.top=a+"px";d.style.left=b+"px";d.className="onlPlayer";Sl.M=d;p(this.cb,this.La);if(this.cb.name)O("button",d,100).onclick=function(){E[71](c);k.Tc.Gc("maxPlayers",E[70]());J(d);Sl.M=void 0};else{var e=this.cb;b=document.createElement("button");b.onclick=function(){E[74](c,-1);J(d);Sl.M=void 0};
b.innerHTML=N(101);d.appendChild(b);b=document.createElement("button");b.onclick=function(){E[74](c,1);J(d);Sl.M=void 0};b.innerHTML=N(102);d.appendChild(b);this.ac||(b=document.createElement("button"),b.onclick=function(){p(22222,e);E[71](c);am();J(d);Sl.M=void 0},b.innerHTML=N(100),d.appendChild(b),e&&(K("button",d,"BAN").onclick=function(){p(22222,e);I(18,um(e));E[71](c);J(d);Sl.M=void 0}))}b=document.createElement("button");b.onclick=function(){J(d);Sl.M=void 0};b.innerHTML=N(13);d.appendChild(b)}}
function Al(){var a=l("multiplayertable");if(a){var b=E[28]()-1||14;E[180]();var c=58;if($k){6<b&&(b=6);var d=E[70]();6<=d&&(b=d+2-d%2,d=E[28]()-1,b>d&&(b=d))}7<b&&(c=54);8<b&&(c=49);9<b&&(c=44);10<b&&(c=42);11<b&&(c=39);12<b&&(c=37);14<b&&(c=35);15<b&&(c=33);16<b&&(c=32);26<b&&(c=31);27<b&&(c=30);28<b&&(c=29);29<b&&(c=28);30<b&&(c=27);31<b&&(c=26);32<b&&(c=25);33<b&&(c=24);34<b&&(c=23);35<b&&(c=22);a.innerHTML="";Vm.length=0;for(d=0;d<b;d++){let e=M("tr",a,!1);K("td",e,"<div></div>","height:"+c+
"px").className="ucolor";K("td",e,"  <span style='color:#ffffff73'>&horbar;</span> ").className="username";K("td",e).className="race";$k||(K("td",e).className="team");nl&&Vm.push(K("td",e,"","text-align:center"))}6>b&&K("tr",a,"","height:"+(260-46*b)+"px");E[54]();a=a.clientHeight-67;525<a&&(a=525);l("msgs").style.height=a+"px";l("msgs").scrollTop=l("msgs").scrollHeight}}window.setupPlayermenu=Al;function hm(){if(k.u)E[188]("\ud83d\udd12"!=this.innerHTML)}
window.mapWindow=function(){var a=l("showGameInfo");a&&(Bb(a),a=M("span",a,"display:block;width:516px;padding:4px 19px"),O("div",a,55,"color:var(--color1);text-align:center;border-bottom:2px solid #ffffff38;padding-bottom:3px"),E[240](0),K("div",a,qn(he),"margin-top:19px;color:#fff"),E[240](1),K("div",a,qn(he),"color:#ecd078;margin-left:4px;margin-top:11px;font-size:12px"),E[240](2),he&&K("div",a,"<span style='color:#fff'>"+N(57)+":</span> "+qn(he),"margin-top:11px;font-size:12px"))};var xn;
function Ol(a){xn?(xn=a,window.grecaptcha.reset(),l("nrobotdiv").parentNode.parentNode.parentNode.style.cssText=""):(xn=a,a=document.createElement("script"),a.src="https://www.google.com/recaptcha/api.js?onload=cllrobot&render=explicit",document.body.appendChild(a))}window.cllrobot=function(){fd('<div class="g-recaptcha" id="nrobotdiv"></div>');p(window.grecaptcha);window.grecaptcha.render("nrobotdiv",{callback:yn,theme:"dark",sitekey:"6Lcw5wAaAAAAAC8nGPdUK8dE8LE2BcOFXI7lVtyM"})};
function yn(a){a=Ra(a);let b=new Uint8Array(2+a.length+xn.length);b[0]=23;b[1]=xn.length;b.set(a,2);b.set(xn,2+a.length);H.v.send(b);xn=1;vl();T(l("nrobotdiv").parentNode.parentNode.parentNode)}var Ym,Vl;function Il(){Ce(5)}
window.multiOptions=function(a,b){var c=l("showGameInfo");if(c){c.innerHTML="";var d=oc(a,b);a=d[1];var e=d[2],g=d[3],h=d[4],m=d[7],q=d[6],t=d[12],r=d[0],u=d[9],v=d[10],x=d[18],y=d[19];if(!k.u){n=[];for(let w=0;w<b;w++)n[w]=d[w]}if(Wg&&!pl){c.style.background="none";c.style.padding="0px";c.style.boxShadow="unset";c.style.width="unset";c.style.border="unset";c.style.backdropFilter="unset";var z=[0,"Deiv 1500",7,"PRO - Wolno\u015b\u0107",8,N(890),3,"Deiv 1500<br>"+N(523),0,wg(N(735),4)+"<br>"+N(484)];
let w=K("section",c);Vl=w;Ym=[];for(c=0;c<z.length;c+=2){let A=c/2;a=z[c];e=z[c+1];let C=K("div",w);eg(C,84*-A);g=K("div",C);K("div",g,e);Ym.put(K("span",g));C.onclick=()=>{for(let F of w.children)F.style.outline="";C.style.outline="1px solid #00ff0047";I(45,mm(A))};7==a&&T(C);8==c&&T(C)}}else{c.style.cssText="";b=[N(28),N(29),N(30),N(31),N(32),N(33),N(525),N(524)];1E9<=a&&(a="***");1E9<=e&&(e="***");1E9<=g&&(g="***");1E9<=h&&(h="***");nl&&(r="Auto");b=[N(1),r,N(26),lb[q]&&lb[q].name,N(42),v,N(27),
b[m],N(11),u,N(35),N([36,37,38,39][t]),N(396),x+" "+N(558),N(398),N([399,400,401][y])];E[275]()&&(K("button",c,"Custom version! click here to see the changes","padding:5px;background:#ffff00;color:#000;margin:auto;margin-bottom:18px;font-size:14px").onclick=()=>{De(1)});K("span",c,`${a}<img class='resource' src='nehhon/gold.gif' /> ${e}<img class='resource' src='nehhon/wood.gif' /> ${g}<img class='resource' src='nehhon/food.gif' /> ${h}<img class='resource' src='nehhon/stone.gif' />`,"text-align:center;width:100%;display:block;border-bottom:2px solid rgb(156 137 79 / 27%);margin-bottom:9px;padding-bottom:9px");
a=K("div",c);for(z of b)K("div",a,z);k.u||(K("span",c,"+ "+N(461)+"...","cursor:url(nehhon/hand.gif),default;color:#ffd75dd1;font-size:11px;margin-top:12px;display:block").onclick=Il);z=Ea();p("PR",z);z&&K("span",c,"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714 </span>"+z,"color:rgb(203,255,238);position:absolute;top:20px;right:21px")}}};if(location.search){let a=new URLSearchParams(location.search);if(a.has("desk")){let b=new XMLHttpRequest;b.open("GET","http://localhost:41334"+location.search,!0);b.send(null);Va("","Desktop app open")}console.log(a)}function zn(a){if(Zb)Zb=!1;else if(!k.u){if(a)return location.reload();a=decodeURI(location.hash.substr(1));Zb=!0;$b(a);ac()}}
function An(a){if("RandomMap"==a)return Bn;if("Settings"==a)return Cn;if("About"==a)return Dn;if("Guide"==a)return hf;if("Changelog"==a)return lf;if("Ranking"==a)return lm;location.hash=""}function rb(a){var b=location.hash.substr(1);if(b){if("#"==b.charAt(0))return setTimeout(zn,500,a);D.o||An(b)&&An(b)()}}var Kg;
function jh(a,b,c,d,e,g,h,m,q){b||("1"!=f.muteroom||D.o)&&xc("chat");var t=e?`<span class="ttag">[${N(21)}]</span>`:"";if(c){e=E[77]()?Id:Kg;if(5!==c){if(b)a=`<span style="color:var(--color1)">${N(407)}</span>`;else if(a=qn($d(ae(a,d))),"https://media.tenor.com/"==a.substring(0,24)){var r=a;a=""}else a=Gi(a);a=K("li",e,"<span>"+t+jd(g,c)+" \u2014</span> "+a,e==Id&&void 0!=h&&`border-color:${void 0!=h?`rgb(${h},${m},${q})`:md[g].Vc}`||"");r&&(a=K("img",a),a.src=r,a.className="igif")}else K("li",e,
a);e.scrollTop=e.scrollHeight;E[77]()&&Hi()}}window.chat=jh;function Hi(){if(l("msgs1")){for(;11<=l("msgs1").children.length&&l("msgs1").scrollHeight>l("msgs1").getBoundingClientRect().height;)l("msgs1").removeChild(l("msgs1").children[0]);1==l("msgs1").children.length&&(En=setInterval(Fn,16E3))}}var En;function Fn(){l("msgs1")&&l("msgs1").children[0]&&l("msgs1").removeChild(l("msgs1").children[0]);l("msgs1")&&0==l("msgs1").children.length&&clearInterval(En)}
function qn(a){return String(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Fg(a){let b=a;if(D.o){var c=Id;a||(a=l("msginputGame").value);l("msginputGame").value=""}else c=Kg,a||(a=l("msginput").value),l("msginput").value="";if(!D.l){if("hmspawn"==a.substr(0,7)){Ke(E[110]);return}if("hmpetleva"==a){E[200](0);return}}""!==a&&(b||(a=qn(Gi(a))),M("li",c,`border-color:${md[k.K]&&md[k.K].rgb||k.color}`).innerHTML+=`
    <span>${l("teamchat")&&l("teamchat").checked&&`
    <span class="ttag">[${N(21)}]</span>`||""}`+jd(k.K,-1)+" \u2014</span> "+(b?`<img src="${a}" class="igif">`:a),D.l&&(zl(E[75](),1024,a),E[76](a.length,l("teamchat")&&l("teamchat").checked)),c.scrollTop=c.scrollHeight,D.o&&Hi())}var Gn=document.getElementsByClassName("ucolor1"),Hn=document.getElementsByClassName("username1"),In=document.getElementsByClassName("race1"),Pn=document.getElementsByClassName("team1");
function Qn(a){var b=1;2===a.button&&(b=-1);this.innerHTML=E[51](this.P,b)||"\ud83d\udec7"}function Rn(a){var b=1;2===a.button&&(b=-1);$k?(a=(this.mb+b)%4,0>a&&(a=3),this.mb=a,this.innerHTML=Xk(a),I(29,mm(a))):this.innerHTML=Xk(E[52](this.P,b))}
function Sn(){p(this.gb,this);this.gb&&(k.color=this.value,f.color=this.value);let a=parseInt(this.value.substr(1),16);if($k)I(30,um(a));else E[57](this.P,a);"TD"==this.parentNode.tagName?this.style.color=this.value:Tm&&Tm[this.P-1]&&(Tm[this.P-1].children[0].style.color=this.value,J(this))}function Tn(a){E[50](1+4*a.shiftKey+99*a.altKey)}function Un(a){E[50](-1-4*a.shiftKey-99*a.altKey)}
window.presetuprndtable=function(a){if(l("RandomMap"))Kd("RandomMap");else{var b=fd("",2);b.parentNode.style.verticalAlign="baseline";b.parentNode.parentNode.style.zIndex="0";b=K("div",b,`<div>
        <div id="spbdy"><button id="load1">${N(671)}</button><button id="edmap1">${N(105)}</button></div>
        <div>
        <table class="players" id="oneplayertable">
        <tbody id="oneplayertbody">
        </tbody>
        </table>
        <div style="display:flex;justify-content:center;gap:30px">
        <button id="start2" class="start startButton">${N(92)} \u25b6</button>
        <button class="start optionsButton" id="start1" >${N(48)}</button>
        </div>
        </div>
        </div>`);b.id="RandomMap";b.className="playermenu";l("start1").onclick=Ce;l("start2").onclick=ml;l("load1").onclick=function(){un()};l("edmap1").onclick=Vn}b=l("oneplayertbody");b.innerHTML="";b.insertAdjacentHTML("beforeend",`<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">\u2212</button></td><td>${N(103).toUpperCase()}</td><td>${N(21).toUpperCase()}</td></tr>`);for(let c=0;c<a;c++)b.insertAdjacentHTML("beforeend",'<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>');
l("addPlayer").onclick=Tn;l("removePlayer").onclick=Un};var Yg=["VIP"];function jd(a,b){var c=md[a];b=c&&c.name||0<b&&$d(ae(b,20))||-1==b&&k.name||"";let d=0;if(c){d=c.id;let e=c.role;1==e&&(d=Yg[e-1])}return Xg(c&&c.clan,b,d,!a&&D.l)}
function Xg(a,b,c,d){return`<span class="nmtg">${a&&`<span class="clanTag">{${qn(a)}}</span>`||""}<span ${d?"style='color:#ff0'":""} class="usnm">${qn(b)}</span>${c&&`<span class="verified"${"string"==typeof c?" style='color:#ff6eff'":""}>#${c}</span>`||""}</span>`}
window.recvtrib=function(a,b,c,d,e,g){e=jd(g,e);a="-> <span style='color:#0f0'>"+(a&&`${a} <img src="nehhon/gold.gif">`||"")+(b&&`${b} <img src="nehhon/wood.gif">`||"")+(c&&`${c} <img src="nehhon/food.gif">`||"")+(d&&`${d} <img src="nehhon/stone.gif">`||"")+"</span>";l("msgs1").innerHTML+="<li>"+wg(N(449),a,e)+"</li>";Hi()};
function Wn(a){p(a,this);var b=document.createElement("input");b.type="color";b.P=this.Tb;b.value=this.Sb;b.gb=!0;b.onchange=Sn;b.onblur=Sn;b.style.cssText=`position:absolute;top:${a.clientY}px;left:${a.clientX}px;width:0px;height:0px;opacity:0;padding:0px;border:0px`;document.body.appendChild(b);setTimeout(function(){b.click()},25)}var Vm=[];function ld(a){return(a=md[a])&&255!=a.flag?`<span class="flag" style="background-position-x:-${21*a.flag}px"></span>`:""}
window.onlineTable=function(a,b,c,d,e,g,h,m,q,t){$k&&(t=!0);let r=!E[246]();if(l("teamlock")){ej(l("teamlock"),t?"\ud83d\udd12":"\ud83d\udd13");var u=0==g,v=kd(d),x=g==k.K;b||="\ud83d\udec7";a=jd(g,a);md[g]&&(md[g].La=e);var y=Xl(g);y&&(a+=`<span style='opacity:.5;font-size:8px;color:#${y.S&&"0f0"||"ff0"}'>&nbsp;${y.S&&"P2P"||"proxy"}</span>`);q&&(a+=`<span style='opacity:.5;margin-left:4px;font-size:8px;color:#${"0ff"}'>${q}ms</span>`);if(l("multiplayertable")){q=l("multiplayertable").getElementsByTagName("tr");
var z=e+1;d=Za(v);if(Tm[e]){Tm[e].children[0].style.color="rgb("+d[0]+","+d[1]+","+d[2]+")";vn[e].innerHTML=`<div>${a+ld(g)}</div>`;u||(vn[e].onclick=()=>{var w=md[g].id;w&&I(60,Pb(w))});if(k.u&&x||y&&y.u)vn[e].style.color="#f3cd5a";vn[e].style.color;if(u){if(h){r?(wn[e].innerHTML=b,k.u&&(Bb(wn[e]),a=K("button",wn[e],b),a.onmousedown=Qn,a.P=z)):Bb(wn[e]);wn[e].style.opacity="0.25";Tm[e].style.opacity="0.25";vn[e].style.opacity="0.25";return}vn[e].style.color="#fff900"}if(!h&&(x||u&&k.u)){if(Sm[e].children[0]){wn[e]&&
(wn[e].children[0]?wn[e].children[0].innerHTML=b:wn[e].innerHTML=b);Sm[e].children[0].innerHTML=Xk(c);return}wn[e]&&(wn[e].innerHTML="",t&&!k.u?wn[e].innerHTML=b:(a=K("button",wn[e],b),a.onmousedown=Qn,a.P=z,u&&(a.style.color="#fff900")));a=document.createElement("button");a.onmousedown=Rn;a.P=z;a.mb=c;a.innerHTML=Xk(c);Sm[e].appendChild(a);u&&(a.style.color="#fff900");Tm[e].onclick=Wn;Tm[e].Tb=z;Tm[e].Sb=v}else(r?wn[e]&&(k.u||x&&!t?(Bb(wn[e]),a=K("button",wn[e],b),a.onmousedown=Qn,a.P=z):wn[e].innerHTML=
b):Bb(wn[e]),h)?u||(Sm[e].innerHTML=`(${$d(ae(m,20))})`):Sm[e].innerHTML=Xk(c);nl&&9!=pl&&7!=pl&&(Bb(Vm[e]),c=Xn(Vm[e]),c.checked=md[g].state,x?c.onclick=Yn:(c.disabled=!0,c.parentNode.style.cursor="not-allowed"));k.u&&(q[e].onclick=Sl,q[e].cb=g,q[e].ac=x,q[e].La=e+1)}}}};function Yn(){if(Fl)return this.checked=!this.checked;p(this.checked);I(35,mm(this.checked?1:0))}
window.randomMapTable=function(a,b,c,d,e){for(d=d.toString(16);6>d.length;)d="0"+d;d="#"+d;Hn[e].innerHTML=`<input value="${$d(ae(a,20))}" type="text">`;a=Hn[e].getElementsByTagName("input")[0];a.onchange=Zn;a.Ea=e+1;a.maxLength=20;a=Pn[e].getElementsByTagName("button")[0];a.P=e+1;a.onmousedown=Qn;a.innerHTML=b||"\ud83d\udec7";b=In[e].getElementsByTagName("button")[0];b.P=e+1;b.onmousedown=Rn;b.innerHTML=Xk(c);var g=document.createElement("input");g.type="color";g.P=e+1;g.value=d;g.gb=0==e;g.style.color=
d;Gn[e].appendChild(g);g.onchange=Sn;Gn[e].onclick=()=>g.click()};function Bn(){E[67]()&&Fa();E[50](0,parseInt(f.civi))}function un(){var a=document.createElement("input");a.type="file";a.accept=".tzared";a.onchange=qe;a.click()}function $n(){if(l("CustomMap"))R("customMapcont"),Kd("CustomMap");else{var a=fd("",2);a.parentNode.style.verticalAlign="baseline";a.parentNode.parentNode.style.zIndex="0";a=K("div",a,`<table id="mapcache"></table>
<div id="customMapcont" style="display:none">
<table class="players" id="customaptable">
<tbody id="custombody">
</tbody>
</table>
<div style="display:flex;gap:15px;margin-top:40px;justify-content:center">
<button  id="startCustom" class="start startButton">${N(92)}</button>
<button id="editCustom" class="start"> ${N(105)}</button>
</div>
</div>`);a.id="CustomMap";a.className="playermenu";l("startCustom").onclick=function(){R("customMapcont");ml()};l("editCustom").onclick=Vn}}function Ai(a){p(a);var b=new Uint8Array(a,4);a=(new Uint32Array(a,0,1))[0];p(b,a);var c=E[79](b.length);c=ui(c,b.length);p(c);for(var d=0;d<b.length;d++)c[d]=b[d];c=E[267](a);b=mc(c,a);p("ug",b)}
function zi(a){let b=document.createElement("input");b.type="file";b.accept=".tzmod";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}function ao(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnf";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}
function Vf(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnt";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsText(c)};b.click()}function qe(){D.l||S||$n();var a=this.files[0];p(a);var b=new FileReader;b.onload=bo;b.readAsArrayBuffer(a)}window.rcgini=function(a,b){n=Array.from(oc(a,b).slice(0))};function co(){pc(function(){E[122]();Zd();Lf();E[244]();Vd()})}
var gn=(a,b)=>{var c=new Uint8Array(a,4+b);b=an(new Uint8Array(a,0,8),b);p(b,c,new Uint8Array(a,0,16));a=c.length;for(var d=E[44](a),e=0;e<a;e++)window.HEAPU8[d+e]=c[e];E[45](4*b,a,D.l,1,gd,Dl,1);E[209]()};async function Um(){let a=await (await fetch("nehhon/"+ol+".tzared")).arrayBuffer();gn(a,0)}
function bo(a){li=void 0;wi();D.l&&(k.D.Cb=k.D.max);a=a.target.result;var b=new Uint8Array(a,4),c=(new Uint32Array(a,0,1))[0],d=b.length;a=E[44](d);for(var e=0;e<d;e++)window.HEAPU8[a+e]=b[e];b=E[45](4*c,d,D.l,1,0,0);if(S)b?co():eo(()=>{E[45](4*c,d,D.l);co()});else{if(!b)return Va("too many players for this custon map");if(D.l)return R("addAI"),R("optionbutton"),l("rndmapreturn").style.display="inline-table",Sd(l("nplayersO")),l("maploadOnline").value="",D.jc=!0;Q(l("RandomMap").parentNode);Kd("customMapcont");
l("custombody").innerHTML="";fo.length=0;E[46]()}}function Ec(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(d){d=d.target.response;ka||go({url:a,buffer:d});b(d)};c.send()}function dl(){var a=N(104),b;try{"granted"!=Notification.permission&&Notification.requestPermission(function(){});var c=new Notification(a,{icon:"nehhon/807.png",body:void 0,requireInteraction:!1});b||=5550;setTimeout(function(){c.close()},b)}catch{}}
function ho(a){for(var b="",c=0,d=a.length;c<d;c++)b+=Bl[a[c]];return b}ka||$a[ho([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]===ho([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])||(kc=ja);
function ze(a){if(a){var b=E[47]();if(G)a=mc(E[276](55==a),b*b*3),p(a),Kf.queue.writeBuffer(Ui,0,a);else{a=cj(E[83](55==a),b*b*4);if(Pa)var c=2**Math.ceil(Math.log2(b));var d=performance.now();B.useProgram(X);B.activeTexture(B.TEXTURE1);ze.texture?(B.bindTexture(B.TEXTURE_2D,ze.texture),Pa?(B.getExtension("OES_texture_float"),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,b,b,0,B.RGBA,B.FLOAT,a)):B.texImage2D(B.TEXTURE_2D,0,B.RGBA32F,b,b,0,B.RGBA,B.FLOAT,a)):(ze.texture=B.createTexture(),B.bindTexture(B.TEXTURE_2D,
ze.texture),Pa?(B.getExtension("OES_texture_float"),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,c,c,0,B.RGBA,B.FLOAT,null),B.texSubImage2D(B.TEXTURE_2D,0,0,0,b,b,B.RGBA,B.FLOAT,a)):B.texImage2D(B.TEXTURE_2D,0,B.RGBA32F,b,b,0,B.RGBA,B.FLOAT,a),Bj(),B.uniform1i(B.getUniformLocation(X,"img_data"),1));B.useProgram(V);B.activeTexture(B.TEXTURE2);da.Xc=performance.now()-d;ze.update=!1}}else ze.update=!0}window.setupTerrainTXT=ze;ze.update=!1;window.stpTupdtr=function(){ze.update=!0};var E,qb,Cg;
window.moduleLoaded=function(){var a=window.Module,b=Object.keys(a),c=b.length,d="synchroHash rnd setupRandom randomTerrain test shapoint Uint16Array boolArray test2 searchUnit setupResources movtablexe test3 setupGL getBufferID executeOrder Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen crtStxt configTerrain delTexs touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf updKngs mouseOut rstrRNDmap kngremainng idddamin runnxtcycl pong updtping refreshPlayerInfo tradingsum tradingresum selectoridest strtrading playerReconnect n2addss delAsyncPointer peacetime menustate prvbuild stpTactil checkDelAnim updresources wrkstate chtgspd mapVisibility chvisibility svggame shwRCR ckMnhst dellmitTest rOnlen stdiplomacy dpChange sndTribs shwsts empvtr trrbs trrwtr tmlck chmnlen chscrntype shICNu tchTime gtORDuIC shRCICNu shRCNLY gfastNF rcSEL unittable gtbonuses buildtable gnfoTYPE gdfltprops disctimeout chonltyp onlpulse onlstr pidchngsrc pidchngsrgb strgmonl chonltm wdtsetup wdtunit wdtkingdom wdtterrain dclslen edstdcl ruleadd shwrule eventadd shallrules edrulename shwevent chevactyp chkxkingdom confirmsel selname colorevsel delfromids viewfromids updevent chkxkingdomval areaactv areavw crntIDS ruleprops rulereps rleoprtn stdQ updmapname rtnmapname actntxt rluchkids chkxidsval eddreload chdipcntrl diptype EDmulpselect rluch2kids chk2xidsval chCRcptr chuCRcptr moddipops stphnames spvsVal btbl gtteam mddtable bmddtable mddpnter ordprps ordlen imddtable tmddtable rtrnconsts mddpointer dftstp nhuncomp eduname gtpstcycles onlrec lstrcv shdwn sbyclr shrmdd mddlen cnfTerrain3 updGL3kingdoms smtsel gtbidalpha prdbid suprtree shordnfo updordinfo rplygame rnddecls ioterr gtdblog makeStaticMap dplrequest stRecord".split(" ");E=
[];E.length=d.length;for(var e=0,g=d.length;e<g;e++)for(var h=d[e],m=0;m<c;m++){var q=b[m];if("__"==q.substr(0,2)&&-1<q.indexOf(h)){E[e]=a[q];break}}qb=new lc(E[5](),4096);E[23]();E[23]();E[23]();zl(E[53](Kl()),17,k.name||"Guest");G=3==f.webgl;E[109](576,ka,!!window.indexedDB,Math.floor(Math.random()*2**32),G);Cg=document.createElement("canvas");G||io();ob();window.ontouchstart=function(){p(123123);Ka=!0;E[169](1);window.ontouchstart=void 0}};
var Kj=async a=>await (await fetch("nehhon/"+a)).text(),io=()=>{var a={antialias:!1,alpha:!1,depth:!0};Cg.id="canvas";f.webgl&&"2"!=f.webgl&&"3"!=f.webgl||(B=Cg.getContext("webgl2",a));B||(B=Cg.getContext("webgl",a),Pa=!0)},Mk=window.GPUTextureUsage,Ok,Lk,Nk,Wk=0;
window.txtgpu=async(a,b,c,d,e,g,h,m,q,t,r,u,v)=>{a=ui(a,b*c*4);Kf.queue.writeBuffer(Pi,r,a);b=new Uint32Array([r/4,b,c/(d*e),g,d,t,q,0,0]);c=new Float32Array(b.buffer);c[7]=h;c[8]=m;Kf.queue.writeBuffer(Vi,u*b.length*4,b);await Kf.queue.onSubmittedWorkDone();E[165](v)};window.gl3kngs=(a,b)=>{Kf.queue.writeBuffer($i,0,mc(a,b))};window.gl3nfo=(a,b)=>{Kf.queue.writeBuffer(aj,0,mc(a,b))};
async function ql(){function a(){D.F&&mk++;Jn++;if(1==f.hlffps&&Jn%2)return requestAnimationFrame(a);lk();xh();var ma=Date.now();Kn[0]=Zc&&!(200>ma-$c)||Sf?$c-Wc+Xc:ma-Wc+Xc;Kf.queue.writeBuffer(L,0,Kn);Lj.colorAttachments[0].view=1==Y?e.getCurrentTexture().createView():Mj.createView();ma=c.createCommandEncoder();var ca=ma.beginRenderPass(Lj),Jc=Wk+1;Qa&&(3==Qa&&Fj||(ca.setPipeline(y),ca.setBindGroup(0,ea),ca.draw(6,1,0,0)),Fj&&(ca.setPipeline(z),ca.setBindGroup(0,wa),ca.draw(6,Jc,0,0)));if(Re){var qc=
ih(),Xf=window.innerWidth/2-qc/2,Yf=window.innerHeight/2-qc/2;Kd("bigMap");l("bigMap").style.width=qc/U+"px";l("bigMap").style.height=qc/U+"px";Ln(ca,Xf,Yf,qc,qc,Jc)}qc=Le();Xf=k.U;Yf=qc?window.innerHeight-hh*U:k.L;Ln(ca,Xf,Yf,hh*U,hh*U,Jc);ca.setPipeline(m);ca.setBindGroup(0,Ia);ca.draw(6,Jc,0,0);ca.setPipeline(t);ca.setBindGroup(0,ha);ca.draw(6,1,0,0);E[278]()&&1!=f.selcolor&&(ca.setPipeline(A),ca.setBindGroup(0,Jb),ca.draw(6,Jc,0,0));Jc=E[279]();ca.setPipeline(q);ca.setBindGroup(0,Ba);ca.draw(6,
Jc,0,0);h&&(ca.setPipeline(u),ca.setBindGroup(0,Mn),ca.draw(6,1,0,0));Ig&&(ca.setPipeline(F),ca.setBindGroup(0,nq),ca.draw(6,1,0,0));ca.end();1!=Y&&(ca={colorAttachments:[{view:e.getCurrentTexture().createView(),clearValue:{r:.1,g:.1,b:.1,a:1},loadOp:"clear",storeOp:"store"}]},ca=ma.beginRenderPass(ca),ca.setPipeline(C),ca.setBindGroup(0,Nn),ca.draw(6,1,0,0),ca.end());ze.update&&ze(1);c.queue.submit([ma.finish()]);D.o&&uk();Date.now();requestAnimationFrame(a)}Qa=E[148]();var b=parseInt(f.fogRefresh);
Fj=3==b&&Qa;Y=parseFloat(f.antialiasing2)||1;Y*=Math.round(25*parseInt(f.pixelDensity1/25))/100||Ej();b=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!b||534773760>b.limits.maxStorageBufferBindingSize)G=!1,B||(io(),f.webgl=2,E[109](576,ka,!!window.indexedDB,Math.floor(Math.random()*2**32),G));else{var c=await b.requestDevice({requiredLimits:{maxStorageBufferBindingSize:534773760,maxBufferSize:534773760}});Kf=c;b=Cg;var d=window.innerHeight;b.width=window.innerWidth;b.height=
d;var e=b.getContext("webgpu"),g=navigator.gpu.getPreferredCanvasFormat();e.configure({device:c,format:g,Ec:"opaque"});var h=n[8];b=await fetch("nehhon/obs.wgsl");b=await b.text();b=c.createShaderModule({code:b});var m=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},
depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}}),q=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});
b=await (await fetch("nehhon/trn.wgsl")).text();b=c.createShaderModule({code:b});var t=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/mmap2.wgsl")).text();
b=c.createShaderModule({code:b});var r=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});if(h){b=await Kj("br.wgsl");b=c.createShaderModule({code:b});var u=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,
blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});b=await Kj("brM.wgsl");b=c.createShaderModule({code:b});var v=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},
alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"always",format:"depth24plus"}})}b=await (await fetch("nehhon/mmap.wgsl")).text();b=c.createShaderModule({code:b});var x=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",
srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth24plus"}});if(Qa){b=await fetch("nehhon/"+`fog${2==Qa?"2":"0"}${Fj&&2==Qa?"u":"n"}.wgsl`);b=await b.text();b=c.createShaderModule({code:b});var y=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"one",dstFactor:"zero"},
alpha:{operation:"add",srcFactor:"one",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await fetch("nehhon/obsfog.wgsl");b=await b.text();if(Fj){b=c.createShaderModule({code:b});var z=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"one"},alpha:{operation:"max",
srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"always",format:"depth24plus"}})}b=await fetch("nehhon/mtop.wgsl");b=await b.text();b=c.createShaderModule({code:b});var w=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",
dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}})}b=await fetch("nehhon/"+(1==f.selectionCircle?"obs2c.wgsl":"obs2.wgsl"));b=await b.text();b=c.createShaderModule({code:b});var A=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},
alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth24plus"}});if(1!=Y){b=await (await fetch("nehhon/post.wgsl")).text();b=c.createShaderModule({code:b});var C=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g}]},primitive:{topology:"triangle-list"}})}b=await (await fetch("nehhon/rect.wgsl")).text();
b=c.createShaderModule({code:b});var F=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});Pi=c.createBuffer({size:534773760,usage:GPUBufferUsage.STORAGE|
GPUBufferUsage.COPY_DST,mappedAtCreation:!1});aj=c.createBuffer({size:32*E[90](),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});$i=c.createBuffer({size:24576,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Wi=c.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Sh=c.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Xi=c.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|
GPUBufferUsage.COPY_DST,mappedAtCreation:!1});If=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Oi=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Yi=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Kf.queue.writeBuffer(Yi,0,new Float32Array([1/Hc]));h&&(Qi=c.createBuffer({size:32,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1}));
Tj();b=E[47]();window.addEventListener("resize",Tj,!1);Ni=Mi=Math.round(b**2/5);Ri=c.createBuffer({size:48*Mi,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});Si=c.createBuffer({size:48*Ni,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});Ui=c.createBuffer({size:b*b*12,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Ti=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,
mappedAtCreation:!1});Kf.queue.writeBuffer(Oi,0,new Float32Array([U]));Kf.queue.writeBuffer(Ti,0,new Uint32Array([b]));Vi=c.createBuffer({size:174600,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var L=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});yg=c.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Kf.queue.writeBuffer(yg,0,new Float32Array([1,1,1,1]));d=cj(E[33](),1330);
var P=c.createBuffer({size:4*d.length,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});(new Float32Array(P.getMappedRange())).set(d);P.unmap();b=b*b*2;b%4&&(b+=2);Zj=c.createBuffer({size:b,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var ea,Aa,wa,Ia,Ba,Jb,ha,la,On,Mn,Ah;Zi=()=>{let ma=[{binding:0,resource:{buffer:Pi}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:2,resource:{buffer:Ri}},{binding:3,
resource:{buffer:Vi}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:L}},{binding:6,resource:{buffer:P}},{binding:7,buffer:{type:"uniform"},resource:{buffer:Yi}},{binding:8,resource:{buffer:$i}},{binding:9,resource:{buffer:aj}},{binding:10,resource:{buffer:Ti}},{binding:11,resource:{buffer:If},buffer:{type:"uniform"}},{binding:12,resource:{buffer:yg},buffer:{type:"uniform"}},{binding:13,resource:{buffer:Oi},buffer:{type:"uniform"}}];Ia=
c.createBindGroup({layout:m.getBindGroupLayout(0),entries:ma});ma[2].resource.buffer=Si;Ba=c.createBindGroup({layout:q.getBindGroupLayout(0),entries:ma});Jb=c.createBindGroup({layout:A.getBindGroupLayout(0),entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:1,resource:{buffer:Ri}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:L}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Yi}},
{binding:5,resource:{buffer:aj}},{binding:6,resource:{buffer:Ti}}]});ha=c.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:Pi}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:2,resource:{buffer:Ui}},{binding:3,resource:{buffer:Vi}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:L}},{binding:6,buffer:{type:"uniform"},resource:{buffer:Ti}},{binding:7,
buffer:{type:"uniform"},resource:{buffer:Yi}},{binding:8,resource:{buffer:yg},buffer:{type:"uniform"}}]});Qa&&(ea=c.createBindGroup({layout:y.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:Zj}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:Ti}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Yi}}]}),Fj&&(wa=c.createBindGroup({layout:z.getBindGroupLayout(0),
entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:1,resource:{buffer:Ri}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:L}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Yi}},{binding:5,resource:{buffer:$i}},{binding:6,resource:{buffer:aj}}]})),Aa=c.createBindGroup({layout:w.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:Zj}},{binding:1,buffer:{type:"uniform"},
resource:{buffer:Ti}}]}));la=c.createBindGroup({layout:r.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ti}},{binding:1,resource:{buffer:Ri}},{binding:2,resource:{buffer:Vi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:L}},{binding:4,resource:{buffer:$i}},{binding:5,buffer:{type:"uniform"},resource:{buffer:If}},{binding:6,resource:{buffer:aj}}]});h&&(Mn=c.createBindGroup({layout:u.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ti}},
{binding:1,buffer:{type:"uniform"},resource:{buffer:L}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Yi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:Qi}}]}),On=c.createBindGroup({layout:v.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ti}},{binding:1,buffer:{type:"uniform"},resource:{buffer:L}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Qi}}]}));
Ah=c.createBindGroup({layout:x.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ti}},{binding:1,resource:{buffer:Ui}},{binding:2,resource:{buffer:Vi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:L}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Yi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:Wi}},{binding:6,buffer:{type:"uniform"},resource:{buffer:Xi}}]})};Zi();Lk=b=c.createTexture({size:[Cj,Dj],format:"depth24plus",usage:Mk.RENDER_ATTACHMENT});
var Mj,Nn;1!=Y&&(Ok=()=>{Mj=c.createTexture({size:[Cj,Dj],format:g,depthStencilFormat:"depth24plus",usage:Mk.TEXTURE_BINDING|Mk.RENDER_ATTACHMENT});Nn=c.createBindGroup({layout:C.getBindGroupLayout(0),entries:[{binding:0,resource:Mj.createView()},{binding:1,resource:c.createSampler({magFilter:"linear",minFilter:"linear",mipmapFilter:"linear",maxAnisotropy:8})},{binding:2,resource:c.createSampler({magFilter:"nearest",minFilter:"nearest"})},{binding:3,buffer:{type:"uniform"},resource:{buffer:Yi}}]})},
Ok());var nq=c.createBindGroup({layout:F.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Sh}},{binding:1,buffer:{type:"uniform"},resource:{buffer:Xi}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Yi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:Wi}}]}),Lj={colorAttachments:[{view:void 0,clearValue:{r:.1,g:.1,b:.1,a:3==Qa?0:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:b.createView(),depthClearValue:0,depthLoadOp:"clear",depthStoreOp:"store"}};
Nk=Lj;var Ln=(ma,ca,Jc,qc,Xf,Yf)=>{ma.setViewport(ca*Y,Jc*Y,qc*Y,Xf*Y,0,1);ma.setPipeline(r);ma.setBindGroup(0,la);ma.draw(6,Yf,0,0);ma.setPipeline(x);ma.setBindGroup(0,Ah);ma.draw(6,h?1:Qa?1:2,0,0);Qa&&(ma.setPipeline(w),ma.setBindGroup(0,Aa),ma.draw(6,1,0,2==Qa?1:0),h||(ma.setPipeline(x),ma.setBindGroup(0,Ah),ma.draw(6,1,0,1)));h&&(ma.setPipeline(v),ma.setBindGroup(0,On),ma.draw(6,1,0,0),ma.setPipeline(x),ma.setBindGroup(0,Ah),ma.draw(6,1,0,1));ma.setViewport(0,0,Cj,Dj,0,1)},Jn=0;Date.now();var Kn=
new Uint32Array(1);requestAnimationFrame(a);b=parseInt(f.fogRefresh)}pc()}var Jf=new Uint32Array(1);function zl(a,b,c){if(a){a=ae(a,b);for(var d=0;d<b;d++)a[d]=c.charCodeAt(d)}}
if(window.indexedDB&&!ka){var jo=window.indexedDB.open("nh2019",576),ko;jo.onsuccess=function(){ko=jo.result;ka||lo(function(){})};jo.onupgradeneeded=function(){ko=jo.result;try{ko.objectStoreNames.contains("basic")&&ko.deleteObjectStore("basic"),ko.objectStoreNames.contains("maps")||ko.createObjectStore("maps",{keyPath:"id",autoIncrement:!0}),ko.objectStoreNames.contains("mapsBlobs")||ko.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),ko.objectStoreNames.contains("basic")||ko.createObjectStore("basic",
{keyPath:"url"})}catch(a){console.error(a)}}}function go(a){if(ko)try{ko.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){}}catch(b){console.error(b)}}function lo(a){if(ko&&!ka)try{var b=ko.transaction(["basic"],"readonly");b.objectStore("basic").getAllKeys?b.objectStore("basic").getAllKeys().onsuccess=a:a({target:{result:[]}})}catch{}else a({target:{result:[]}})}
window.changeresources=function(a,b,c,d){if(!S)for(a=[a,b,c,d],b=[Dd,Ed,Fd,Gd],c=0;4>c;c++)a[c]==2**31-1&&(a[c]="***"),ej(b[c],a[c]||"0")};var mo,no,oo=1,po,qo,Z,ro,so,to,uo,vo;
function pe(){if(!l("edsel")){if(l("rules"))return Sd(l("rules").parentNode.parentNode);var a=fd("",2,"",1);a.id="rules";mo=[];var b=[576,wo,637,xo,636,yo];for(var c=0;3>c;c++){var d=K("div",a,"",0<c&&"opacity:0.3;pointer-events:none");O("span",d,b[2*c]);let e=K("div",d);mo[c]=e;K("button",d,"+").onclick=b[2*c+1]}E[220]();a=K("section",a);T(a);no=a;to=K("select",a,"","margin-right:25px;display:none");for(b=0;b<zo.length;b+=2)c=document.createElement("option"),d=N(zo[b]),c.textContent=d,cg(c,to,d),
c.value=b/2;to.onchange=()=>{let e=parseInt(to.value);E[223](e);Ao=e;Bo[1].children[1].innerHTML=N(zo[2*e])};uo=K("select",a,"","margin-right:25px;display:none");for(b=0;b<Co.length;b+=2)c=document.createElement("option"),d=N(Co[b]),c.textContent=d,cg(c,uo,d),c.value=b/2;uo.onchange=()=>{let e=parseInt(uo.value);E[223](e);Ao=e;Bo[2].children[1].innerHTML=N(Co[2*e])};ro=K("span",a);b=K("button",a);b.className="dplbtt";b.onclick=()=>{let e=Do,g=Eo[e];E[237](e,1);e?(mo[1].innerHTML="",mo[2].innerHTML=
"",E[218](Eo[0],0,1)):(mo[0].innerHTML="",E[220]());mo[e].children[g].onclick()};b.dataset.title=N(649);b=K("div",a);so=K("div",b);Z=K("div",b);po=M("span",a,"height: 31px; display: flex; padding: 0px 10px; padding-top: 10px; margin-top: 10px; border-top: 2px solid #ffffff17; justify-content: space-between; align-items: center");qo=M("input",po,"height:20px;border-left:2px solid var(--color2);padding-left:8px;background:#ffffff0a");vo=M("span",po,"display:flex;align-items:center;gap:7px;font-size:12px;color:var(--color1)");
qo.maxLength=40;qo.oninput=()=>{let e=qo.value.substr(0,40).trim(),g=pb(qb);for(let h=0;h<e.length;h++)g[h]=e.charCodeAt(h);Bo[Do]&&(Bo[Do].children[0].textContent=e);E[221](e.length,Do)};if(mo[0].children[0])mo[0].children[0].onclick()}}var Ao,Fo,Go,Ho,Io,Jo,Ko,Lo,Mo,No,Oo,Po,Ro=a=>{a=zo[2*a+1];ro.innerHTML="";Z.innerHTML="";so.innerHTML="";Array.isArray(a)?Qo(a,ro,"#ffffff2e"):a()},So=a=>{a=Co[2*a+1];ro.innerHTML="";Z.innerHTML="";so.innerHTML="";Array.isArray(a)?Qo(a,ro,"#ffffff2e"):a()};
window.btmnu=function(a,b,c,d,e,g,h,m,q,t,r,u,v,x,y,z){ro.innerHTML="";Ao=a;Fo=b;Go=d;Ho=e;Io=g;Lo=m;Mo=q;No=c;Jo=t?mc(r,t):[];Ko=u?mc(v,u):[];Oo=z;Po=y;vo.innerHTML="";1==x?(to.value=a,Sd(to),K("span",vo,N(640)+" ( ! )"),Ge(vo,w=>{Oo=w;To()},Oo),K("span",vo,N(639)+" ( || )","margin-left:12px"),Ge(vo,w=>{Po=w;To()},Po),T(uo),Ro(a)):(uo.value=a,Sd(uo),T(to),So(a))};var Uo,Vo;window.untProps=function(a,b,c){Uo=N(a);Vo=[b,c]};
function Qo(a,b,c,d){for(let e=0;e<a.length;e+=2){let g=O("button",b,a[e]),h=a[e+1];g.onclick=()=>{Z.innerHTML="";b==ro&&(so.innerHTML="");h();b!=ro&&(d?No=e/2:Fo=e/2,To());for(let m of b.children)m.style.cssText="";g.style.background=c;g.style.opacity=1};if(!e&&b==ro)g.onclick()}}function Wo(a){let b=K("div",ne);b.id="edsel";let c=l("rules").parentNode.parentNode;T(c);l("content");O("button",b,112).onclick=()=>{Sd(c);J(b);a()}}var Xo;
function Yo(a){a=a?Ko:Jo;Xo.innerHTML="";for(let b of a){let c=b;E[226](b);let d=K("div",Xo,Uo+` <span style="color:var(--color1)">(${Vo[0]+","+Vo[1]})</span>`,"color:#dedede;line-height:19px;padding:4px 0px;font-size:13px;border-bottom:1px solid #ffffff1f");a=K("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{E[228](c);J(d)};K("button",d,"\ud83d\udc41\ufe0f","margin:0px 10px;padding:1px;float:right;background:#ff00ff29;").onclick=()=>{E[229](c);Wo(()=>E[225](2))}}}
window.ruresize=function(){l("rules")&&(Q(l("rules")),oo=1)};function Zo(a,b){a=$o(a,b?Mo?1:0:Lo?1:0,[625,619],c=>{b?Mo=c:Lo=c});a.style.marginLeft=0;a.style.fontSize="12px";return a}
function ap(a,b){E[234](a);let c=M("div",Z,"display:flex;justify-content:flex-start;align-items:center;gap:30px");Xo=K("div",c,"","padding:10px;height:141px;overflow:auto;width:250px;box-shadow:rgb(0 0 0 / 45%) 0px 0px 10px inset;margin-right:-19px");Yo(a);O("button",c,624,"height:161px;width:93px;font-size:11px").onclick=()=>bp(a);b||(b=M("div",c),K("span",b,N(618)+": ","font-size:14px;color:#a99557"),Zo(b,a))}window.updIDS=function(a,b,c,d){Jo=b?mc(a,b):[];Ko=d?mc(c,d):[]};
function bp(a){let b=K("div",ne);b.id="edsel";let c=l("rules").parentNode.parentNode;T(c);O("button",b,24,"background:#04ff0036").onclick=()=>E[225](1);O("button",b,535,"background:#ff000036").onclick=()=>E[225](0);O("button",b,112).onclick=()=>{Sd(c);E[225](2);J(b);Yo(a)};E[227]()}function To(){E[230](Ao,Fo,No,Go,Ho,Lo,Mo,Io,Oo,Po)}function cp(a){let b=M("div",Z);b.className="centerrule";a&&$o(b,Lo?1:0,[625,619],c=>{Lo=c});O("span",b,643,"opacity:0.6")}
function te(a){a=K("select",a,"","font-size:12px");let b=[625,626,58,59];for(var c=0;c<b.length;c++)O("option",a,b[c]).value=c;for(let d=0,e=E[90]();d<e;d++)if(E[196](d),!W.jb){c=N(W.name)+" ("+Xb[W.race]+")";let g=document.createElement("option");g.value=d+b.length;g.textContent=c;cg(g,a,c)}return a}
function dp(a,b){let c=te(Z);c.value=b?Mo:Lo;c.onclick=()=>{b?Mo=parseInt(c.value):Lo=parseInt(c.value);To()};if(!a){let d=K("select",Z,"","margin-left:5px;font-size:18px;");K("option",d,">").value=0;K("option",d,"<").value=1;d.value=Ho;d.onclick=()=>{Ho=parseInt(d.value);To()};let e=K("input",Z,"","padding:3px;margin-left:5px;width:57px;font-size:18px");e.type="number";e.min=0;e.value=Go;e.onchange=()=>{Go=parseInt(e.value);To()}}K("div",Z,N(6)+":","margin:3px;margin-top:9px;font-size:8px");ep(0,
b)}function fp(a,b,c){let d=Ge(a,()=>{e.style.visibility=d.checked?"":"hidden";e.value=d.checked?0:-2147483647;e.onchange()},-2147483647!=b),e=Xa(a,b,()=>c(xe(e)),"number","transition:none;width:90px;margin-right:24px",2147483647,-2147483647);-2147483647==b&&(e.style.visibility="hidden")}function gp(){K("span",Z,N(635)+": ");$o(Z,Ho,[">=","<=","="],a=>Ho=a)}
function hp(){let a=No<2**24,b=$o(Z,No-2**24,ip(),d=>No=2**24+d);Ge(Z,()=>{No<2**24?(T(c),No=2**24,b.value=0,Sd(b)):(T(b),Sd(c),No=0);c.value=No},a).style.marginBottom="-10px";let c=Xa(Z,No,()=>{No=xe(c);To()},"number","margin:10px;height:23px;width:90px");a?T(b):T(c)}function ip(){let a=[];for(let b=0;16>b;b++)a[b]=N(687)+"-"+(b+1);return a}function jp(){$o(Z,Mo,ip(),a=>Mo=a)}function kp(a,b){let c=b?Mo:Lo;ye(d=>{b?Mo=d:Lo=d;To()},a||Z,1).value=c}
function ye(a,b,c){let d=K("select",b||Z);b=0;for(let g=E[28]();b<g;b++){var e=b?$d(ae(E[111](b),20)):N(23);K("option",d,e).value=b}O("option",d,22).value=2147483647;c&&(O("option",d,642).value=2147483646);d.onclick=()=>a(xe(d));return d}
function ue(a){let b=M("div",a,"height:unset;min-height:61px");b.className="kcheck";let c=[];for(let g=0,h=E[28]();g<h;g++){var d=g?$d(ae(E[111](g),20)):N(23);let m=K("div",b),q=Ge(m,()=>0,!0);c.put(q);K("div",m,d,"word-break:break-all")}var e=g=>{for(let h of c)if(g){if(!h.checked)h.onclick()}else if(h.checked)h.onclick()};a=M("div",a,"display:flex;justify-content:flex-end;margin-top:13px");O("button",a,622,"margin-right:10px;color:#9e8d57").onclick=()=>e(1);O("button",a,623,"color:#9e8d57").onclick=
()=>e(0);return c}function lp(a,b,c){let d=2147483647==c;(a.ra=c)&&!d||eg(a,-28);d&&(a.style.visibility="hidden");a.onclick=()=>{a.ra=!a.ra;eg(a,a.ra?0:-28);E[243](b,a.ra)}}
function ep(a,b){var c=K("div",Z);c.className="kcheck";let d=[],e=E[28]();var g=K("div",c),h=Ge(g,q=>{E[224](e,q,b)},E[231](e,b));d.put(h);O("div",g,642);for(let q=a||0,t=E[28]();q<t;q++)a=q?$d(ae(E[111](q),20)):N(23),g=K("div",c),h=Ge(g,r=>{E[224](q,r,b)},E[231](q,b)),d.put(h),K("div",g,a,"word-break:break-all");var m=q=>{for(let t of d)if(q){if(!t.checked)t.onclick()}else if(t.checked)t.onclick()};c=M("div",Z,"display:flex;justify-content:flex-end;margin-top:13px");O("button",c,622,"margin-right:10px;color:#9e8d57").onclick=
()=>m(1);O("button",c,623,"color:#9e8d57").onclick=()=>m(0)}var mp;function ri(a,b,c,d){let e=M("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];if(!g)continue;let h=document.createElement("option");h.textContent=g;cg(h,e,g);h.value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b}
function ve(a,b,c,d){let e=M("select",a,"font-size:12px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];0<=g?O("option",e,g).value=a:K("option",e,g).value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b;return e}function $o(a,b,c,d){let e=M("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];0<=g?O("option",e,g).value=a:K("option",e,g).value=a}e.onchange=()=>{d(parseInt(e.value));To()};e.value=b;return e}function np(){$o(Z,Mo,[646,645],a=>Mo=a)}
function op(a){mp=K("div",Z);mp.id="ruleprop";E[235](a)}function pp(a,b,c){K("span",Z,N(635)+": ");let d=M("select",Z,"font-size:21px;padding:0px;margin-bottom:12px;margin-left:7px");b=b?[">=","<=","="]:["=","+","\u2212","\u00d7","\u00f7"];for(let e=0;e<b.length;e++)K("option",d,b[e]).value=e;d.onchange=()=>{c?Mo=xe(d):Ho=xe(d);To()};d.value=c?Mo:Ho;a||op(0)}
function qp(){O("button",Z,616,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;").onclick=()=>{E[232](1);Wo(()=>{Io=E[232](0);Z.innerHTML="";qp()})};let a=O("button",Z,617,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;"+(Io?"background:#ff37ff1a":"opacity:0.5"));Io&&(a.onclick=()=>{E[233](1);Wo(()=>E[232](0))})}function rp(a,b){so.innerHTML="";Qo(a,so,"#00ff0026",b);so.children[b?No:Fo].onclick()}
var sp=()=>rp([616,ap,620,dp,642,()=>cp(1)]),tp=()=>rp([616,()=>ap(0,1),620,()=>dp(1,0,1),642,cp]);function cg(a,b,c,d){d&&(c="0"+c);a.fc=c;for(let e of b.children)if(e.fc>c){b.insertBefore(a,e);return}b.append(a)}
function up(a){let b=M("div",Z);b.className="tchgrid";a&&(a=Zo(Z),a.style.display="",a.style.marginBottom="0px",b.style.cssText="height:136px;margin-right:20px");a=E[90]();let c=oc(E[242](a),a);for(let g=0;g<a;g++){var d=E[191](g,0,0,1);if(d){let h=c[g],m=document.createElement("div");var e=N(E[89](g));cg(m,b,e,h);K("div",m,e);e=K("div",m);eg(e,d);e.className="dataOrder";d=M("div",m,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");Ge(d,q=>E[243](g,q),h)}}}
var zo=[608,[612,sp,614,qp],634,[612,sp,482,function(){let a=K("div",Z,"","display:flex;justify-content:center;align-items:center;height:100%;gap:5px"),b=K("input",a,"","width:68px;font-size:23px");b.type="number";b.min=0;b.value=Io;b.onchange=()=>{Io=parseInt(b.value);To()};K("span",a,"m")},631,()=>rp([612,()=>ap(1),620,()=>dp(1,1)],1)],652,[612,sp,653,function(){$o(Z,Io,[658,659,660,661,662],a=>Io=a)},631,()=>rp([620,()=>dp(1,1),612,()=>ap(1)],1)],605,sp,607,sp,668,[62,function(){gp();let a=M("div",
Z,"display:flex;align-items:center;gap:7px"),b=oc(E[242](4),4);for(let c=0;4>c;c++)nd(a,c),fp(a,b[c],d=>E[243](c,d))},6,()=>ep(1)],594,()=>ep(1),593,()=>ep(1),679,function(){$o(Z,Ho,[">","<"],b=>Ho=b);let a=Xa(Z,Go,()=>{Go=xe(a);To()},"number","width:150px");K("span",Z,"ms")},680,()=>ep(1,0),685,[612,()=>rp([620,()=>dp(1),616,ap,642,()=>cp(0)]),656,()=>rp([620,()=>dp(1,1),616,()=>ap(1,1),642,()=>cp(0)],1)],683,[612,()=>rp([616,ap,620,dp,642,()=>cp(1),6,()=>ep(1)]),687,function(){jp();$o(Z,Io,[">",
"<","="],a=>Io=a);hp()}],684,[612,sp,630,()=>pp(0,1,1)],692,[6,()=>ep(1),616,()=>up(1)],871,[687,function(){let a=M("div",Z,"display:flex;align-items:center;gap:7px");ri(a,Io,hg(1),c=>{Io=c;To()});$o(a,Ho,[">=","<=","="],c=>Ho=c);let b=M("input",a,"width:70px");b.type="number";b.onchange=()=>{Lo=xe(b);To()};b.value=Lo},6,()=>ep(1)],122,[6,()=>ep(1)]],Co=[602,[612,function(){var a=K("div",Z,"","display:flex;justify-content:center;flex-direction:column;gap:18px");E[196](Ho);let b=K("button",a,N(W.name),
"height: 48px; background: url(nehhon/iconunits.webp) no-repeat, #00000042; width: max-content; padding-left: 60px;padding-right:12px;outline:1px solid #ffffff0d");eg(b,E[193](Ho));b.onclick=()=>{Ke(e=>{Ho=e;To();E[196](e);b.innerHTML=N(W.name);eg(b,E[193](e))})};let c=K("div",a,N(629)+":"),d=K("input",c,"","margin-top:10px;padding:3px;margin-left:5px;width:60px;");d.type="number";d.min=0;d.value=Go;d.onchange=()=>{Go=parseInt(d.value);To()};a=K("div",a,N(6)+": ");kp(a)},630,()=>op(1),628,()=>rp([614,
qp,620,()=>dp(1,1,1),612,()=>ap(0,1),642,cp])],592,[612,()=>rp([620,()=>dp(1,0,1),612,()=>ap(0,1),642,cp]),627,function(){var a=K("div",Z);let b=K("select",a);a=[632,408,7,664,665,666,674,418,633,243,376,245,412,244,246,415,414,416,282,368,371,814,813,265,413,379,367,373,731,437,410];for(let c=0;c<a.length;c++){let d=document.createElement("option");d.value=c;d.textContent=N(a[c]);cg(d,b,N(a[c]))}b.value=Ho;b.onclick=()=>{Ho=parseInt(b.value);To()}},631,()=>rp([614,qp,620,()=>dp(1,1,1),612,()=>ap(1,
1),642,cp],1)],598,[612,tp,630,()=>rp([644,pp,470,np],1)],586,tp,580,tp,587,tp,582,[612,tp,6,()=>kp(0,1)],594,()=>ep(1,0),593,()=>ep(1,0),597,[65,function(){E[241](0,1);let a=Xa(Z,he,()=>{var b=a;let c=pb(qb);for(let d=0;d<b.value.length;d++)c[d]=b.value.charCodeAt(d);p(a.value.length);E[241](a.value.length)},"text","width:500px");a.placeholder=N(65)},6,()=>ep(1,0)],667,[629,function(){pp(1);let a=M("div",Z,"margin-top:15px;display:flex;align-items:center;gap:7px"),b=oc(E[242](4),4);for(let c=0;4>
c;c++)nd(a,c),fp(a,b[c],d=>E[243](c,d))},6,()=>ep(1,0)],681,[612,()=>rp([616,()=>ap(0,1),620,()=>dp(1,0,1),642,cp,6,()=>ep(1,0)]),687,function(){jp();$o(Z,Io,["=","+","\u2212","\u00d7","\u00f7"],a=>Io=a);hp()}],689,[6,()=>ep(1),616,up],694,[616,function(){let a=K("div",Z);a.className="dplr";let b=oc(E[242](7),7);for(let e=0;7>e;e++)Ge(a,g=>{let h=a.children[e+7];h.style.visibility=g?"":"hidden";g&&(eg(h,-28),h.ra=0);E[243](e,g?0:2147483647)},2147483647!=b[e]);var c=["shenemies","shview","shcontrol"];
for(var d=0;d<c.length;d++){let e=K("div",a);e.className=c[d];lp(e,d,b[d])}for(c=0;4>c;c++)d=K("div",a),d.className="shres",nd(d,c),lp(d,c+3,b[c+3])},695,()=>ep(1,0),696,()=>ep(1,1)],697,[612,()=>rp([616,()=>ap(0,1),620,()=>dp(1,0,1),642,cp]),631,()=>rp([614,qp,620,()=>dp(1,1,1),612,()=>ap(1,1),642,cp],1)],870,[687,()=>{let a=M("div",Z,"display:flex;align-items:center;gap:7px");ri(a,Io,hg(1),c=>{Io=c;To()});$o(a,Ho,["=","+","\u2212","\u00d7","\u00f7"],c=>Ho=c);let b=M("input",a,"width:70px");b.type=
"number";b.onchange=()=>{Lo=xe(b);To()};b.value=Lo},6,()=>ep(1,0)]],Eo=[],Bo=[],vp=[];
window.shrule=function(a,b,c,d){let e=K("div",Z);var g=M("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");O("span",g,638,"color:#ffe594");let h=M("input",g,"width:40px");h.type="number";h.min=0;h.value=a;K("div",g,"0 =","color:#ffffff70");K("div",g,"&infin;","font-size:31px;margin-top:-1px;margin-left:-7px;color:#ffffff70");h.onchange=()=>E[236](parseInt(h.value),-1,-1);g=M("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");O("span",g,648,
"color:#ffe594");let m=M("input",g,"width:80px");m.type="number";m.min=0;m.value=c;m.onchange=()=>E[236](-1,-1,parseInt(m.value));K("div",g,"ms","color:#ffffff70;margin-left:-6px");g=M("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;opacity:0.4");O("span",g,647,"color:#ffe594");let q=M("input",g,"width:80px");q.type="number";q.min=0;q.value=b;q.onchange=()=>E[236](-1,parseInt(q.value),-1);K("div",g,"ms","color:#ffffff70;margin-left:-6px");K("span",e,N(610)+" ->"+(d?"":
" <span style='color:#989898'>"+N(641)+"<span>"));e.id="cond";vp[0]=K("div",e);vp[1]=K("div",e)};window.shrules=function(a,b,c){b?a=$d(ae(a,b)):a=N(611)+"-"+c;wp(0,c,a)};
window.shevents=function(a,b,c,d,e,g,h,m){b?a=$d(ae(a,b)):a=N(1==e?578:577)+"-"+d;wp(e,d,a,c);1==e&&(b=vp[h],h&&K("span",b,"||","color:var(--color1)"),K("span",b,(g&&"<span style='color:red;margin-right:1px'>!</span>"||"")+a,"color:#"+(g?"ff8585":"85ff85")),h||K("span",b,"&&","color:var(--color1)"),m&&(vp[0].lastChild?vp[0].removeChild(vp[0].lastChild):J(vp[1].children[0])))};window.shactions=function(){};var Do;
function wp(a,b,c,d,e){let g=K("div",mo[a]);g.O=b;let h=K("div",g,c);a&&O("span",g,1==a?zo[2*d]:Co[2*d]);g.onclick=q=>{if(!q||q.target!=m)if(Do=a,Bo[a]!=g||!a){if(q=Bo[a])q.style.background="";Eo[a]=g.O;Bo[a]=g;g.style.background="#0028a247";qo.value=h.innerHTML;if(0==a){no.show();Bb(Z);Bb(so);Bb(ro);T(uo);T(to);Bb(vo);for(q=1;3>q;q++){Bb(mo[q]);oo&&(l("rules").children[q+1].style.cssText="");let t=Bo[q];t&&(t.style.background="",Bo[q]=void 0)}oo=0;E[218](g.O,0)}else q=Bo[1==a?2:1],Bo[1==a?2:1]=void 0,
q&&(q.style.background=""),E[222](g.O,a)}};let m=K("button",g,"\u00d7");m.className="closeIcon";m.onclick=()=>{let q=Do;J(g);E[237](a,0,g.O);for(var t=0;3>t;t++){let r=mo[t];for(let u=0;u<r.children.length;u++)r.children[u].O=u}p(Eo[0],g.O);t=Eo[0]==g.O;if(Bo[q]==g||t||!mo[0].children.length)if(q&&Eo[q]==g.O)Bo[0].onclick();else if(mo[0].children[0])mo[0].children[0].onclick();else T(no),Bb(Z),Bb(mo[1]),Bb(mo[2]);else if(t=Bo[q].O,p(t,q),q)E[218](Bo[0].O,1),E[222](t,q,1);else E[218](t,1)};e&&(g.onclick(),
qo.oninput())}function wo(){let a=E[217]();wp(0,a,N(611)+"-"+a,0,1)}function xo(){if(mo[0].children.length){let a=E[219]();wp(1,a,N(578)+"-"+a,0,1)}}function yo(){if(mo[0].children.length){let a=E[219](1);wp(2,a,N(577)+"-"+a,0,1)}}var S=!1;
function eo(a){let b=fd("",1);O("span",b,70,"margin-right:10px");let c=Xa(b,"",void 0,"number","",9999999,0);c.focus();O("button",b,675,"display:block;margin:auto;margin-top:20px").onclick=()=>{let d=E[251](xe(c));1==d?(Q(b),a()):2==d?(Q(b),alert(N(690))):alert(N(688))}}var xp=a=>{G=!1;B||(io(),E[109](576,ka,!!window.indexedDB,Math.floor(Math.random()*2**32),G));S=!0;ml(a)};function Vn(a){E[250]()?eo(xp):xp(a)}
var yp=[{h:1,id:0,V:[0,2]},{h:3,id:1,V:[0,2]},{h:-1,sa:1,id:2},{h:6,sa:1,id:4,V:[0,2]},{h:5,id:6,V:[0,2]}],Fi;window.guname=(a,b)=>{Fi=a?$d(mc(b,a)):""};function Qe(a){let b=pb(qb),c=a.length;20<c&&(c=20);for(let d=0;d<c;d++)b[d]=a.charCodeAt(d);p(a);E[268](c)}
var we=(a,b,c)=>{var d=c||mp;let e=[];b=E[201](b);d=M("div",d);for(let h=0;h<yp.length;h++){let m=yp[h];if(0==m.id){if(!a[m.id]&&1==b)continue}else if(m.V&&0>m.V.indexOf(b))continue;K("div",d,m.name&&N(m.name),`background:url(nehhon/icons2.webp) 0px ${-20*m.h}px;width:20px;height:20px`);var g=a[m.id];let q=K("div",d),t=K("span",q),r;Ge(q,u=>{r.value=u?1:2147483647;if(r.onchange)r.onchange();u?Sd(t):T(t)},2147483647!=g).style.cssText+="float:left;margin-right:5px;margin-top:-1px;";r=K("input",t);2147483647==
g&&T(t);r.type="number";r.value=g;e[m.id]=r;m.sa&&(K("span",t," / ","font-size:21px"),g=K("input",t),g.type="number",g.value=a[m.id+1],e[m.id+1]=g)}for(b=0;b<e.length;b++)e[b]&&(d=e[b],d.max=2147483647,d.min=-1);if(!c)for(c=0;c<a.length;c++)e[c]&&(e[c].onchange=()=>{for(var h=0;h<a.length;h++)e[h]&&(a[h]=parseInt(e[h].value));h=pb(qb);for(let m=0;m<a.length;m++)h[m]=a[m];E[123](2147483647)});return e};window.editProps2=we;
var Cp=(a,b,c,d,e)=>{p(a,c);0>b&&(b=zp(b));if(!a)return E[202](b);var g=[{h:1,id:0,V:[0,2]},{h:3,id:1,V:[0,2]},{h:-1,sa:1,id:2},{h:6,sa:1,id:4,V:[0,2]},{h:5,id:6,V:[0,2]}];let h;e?h=mp:(h=fd(""),h.className="unitProps",d&&(h.className="unitProps viewonly"),h.parentNode.parentNode.style.position="fixed",h.style.minWidth="300px");let m=[],q;0<c||d||(K("span",h,N(516),"margin-right:15px;color:var(--color1)"),q=Xn(h));if(!e){var t=K("button",h);t.className="closeIcon";t.onclick=function(){Q(h);if(!d){for(var v=
0;v<a.length;v++)m[v]&&(a[v]=parseInt(m[v].value));if(c){p(a);v=pb(qb);for(let x=0;x<a.length;x++)v[x]=a[x];E[123](c);p(m)}else{if(q.checked)n[Ap]&&(n[Ap]=0,n.splice(Ap+1,7));else{if(!n[Ap]){for(v=0;7>v;v++)n.splice(Ap+1,0,0);n[Ap]=1}p("s",a);for(v=0;7>v;v++)n[Ap+1+v]=a[v]}Bp(0,n)}}}}b=E[201](b);if(S&&!e){t=M("div",h,!d&&!e&&"margin-top:14px");O("div",t,747);t=M("div",t,"display:flex;gap:11px");let v;Ge(t,x=>{v.style.display=x?"unset":"none";x||(Fi="",E[268](0))},Fi);v=M("input",t,"width:137px");
Fi||T(v);v.maxLength=20;v.onchange=()=>{Qe(v.value)};v.value=Fi}let r=M("div",h,!d&&!e&&"margin-top:34px");for(t=0;t<g.length;t++){let v=g[t];p(v.id,a[v.id]);if(0==v.id){if(!a[v.id]&&1==b)continue}else if(v.V&&0>v.V.indexOf(b))continue;K("div",r,v.name&&N(v.name),`background:url(nehhon/icons2.webp) 0px ${-20*v.h}px;width:20px;height:20px`);var u=K("div",r);let x=K("input",u);x.type="number";x.value=a[v.id];m[v.id]=x;v.sa&&c&&(K("span",u," / ","font-size:21px"),u=K("input",u),u.type="number",u.value=
a[v.id+1],m[v.id+1]=u)}for(g=0;g<m.length;g++)m[g]&&(b=m[g],d&&(b.disabled=!0),b.max=2147483647,b.min=-1,b.oninput=fi);if(c&&!e){K("span",r);b=K("select",r);for(let v=0,x=E[28]();v<x;v++)g=v?$d(ae(E[111](v),20)):N(23),kd(E[132](v)),K("option",b,g).value=v;K("option",b,N(22)).value=2**31-1;b.value=a[7];m[7]=b}q&&(q.parentNode.style.display="inline",n[Ap]||(q.checked=!0,T(r)),q.onclick=function(){q.checked?T(r):r.style.display=""});if(e)for(e=0;e<a.length;e++)m[e]&&(m[e].onchange=()=>{for(var v=0;v<
a.length;v++)m[v]&&(a[v]=parseInt(m[v].value));p(a);v=pb(qb);for(let x=0;x<a.length;x++)v[x]=a[x];E[123](2147483647);p(m)})};window.editProps=Cp;function R(a){l(a)&&(l(a).style.display="none")}function Kd(a){l(a)&&(l(a).style.display="block")}function Fe(){let a=fd("",1),b=E[254](),c=M("div",a,"display:flex;align-items:center;gap:8px");O("div",c,516);Ge(c,e=>{e?Bb(d):(Dp(d),E[252](3));E[254](1,!e)},!b);let d=K("div",a);b&&(Dp(d),E[252](3))}
function Dp(a){let b=E[28]();Ep=M("div",a,`grid-template-columns:repeat(${b},auto)`);Ep.className="dpltbl wbak";for(a=0;a<b**2;a++)K("div",Ep);Ep.children[0].style.height="calc(100% - 12px)"}var Fp=[a=>{Ep=M("div",a,"margin-top:10px;gap:10px 14px;display:grid;grid-template-columns:auto auto");Ep.className="wbak";E[103](2)},a=>{Dp(a);E[103](1)}],Ep;function Ee(){let a=fd("",1);O("span",a,620,"margin-bottom:5px");let b=E[246]();ve(a,b,[673,672],()=>{b=b?0:1;J(Ep);Fp[b](a)});Fp[b](a)}
window.dpltbl0=function(a,b,c,d){b=$d(ae(b,20));M("div",Ep,"padding-left:8px;border-left:2px solid "+kd(c)).textContent=b;let e=Xa(Ep,d,()=>{He(e);E[105](a,xe(e))},"number","width:40px",1E3,0)};function Gp(a,b,c,d){let e=Ep.children;a.onmouseenter=()=>{e[b].style.background="#ffffff47";e[c*d].style.background="#ffffff47"};a.onmouseout=()=>{e[b].style.background="";e[c*d].style.background=""}}
window.dpltbl=function(a,b,c,d){b=$d(ae(b,20));let e=E[28](),g=pb(qb),h=Ep.children;h[a].style.cssText=`align-self:end;writing-mode:vertical-rl;border-top:2px solid ${kd(c)};padding:7px 5px`;h[a*e].style.cssText=`justify-self:end;border-left:2px solid ${kd(c)};padding:5px 7px`;h[a].textContent=b;h[a*e].textContent=b;for(let m=0;m<e-1;m++){let q=m+1;if(3==d){if(q==a)continue;let t=Ge(h[a*e+q],()=>{E[245](t.checked,q,a,d)},g[q]);t.style.backgroundPositionX="0px";Gp(t,q,a,e)}else if(0==d){if(m>=a-1)break;
let t=0,r=0,u=Ge(h[a*e+1+m],()=>{r=1;p(a,m+1,u.checked);E[245](u.checked,a,m+1);if(t)t=0;else v.onclick();r=0},g[m+1]);Gp(u,m+1,a,e);let v=Ge(h[a+(1+m)*e],()=>{r||(t=1,u.onclick())},g[m+1]);v.style.opacity=.25;Gp(v,a,m+1,e)}}};
window.chglmap=function(a,b){B.useProgram(X);Pa?(B.uniform1f(B.getUniformLocation(X,"mapSize"),2**Math.ceil(Math.log2(a))),B.uniform1f(B.getUniformLocation(X,"mapSize2"),a)):B.uniform1f(B.getUniformLocation(X,"mapSize"),a);B.useProgram(V);B.uniform1f(B.getUniformLocation(V,"mapSize"),a);B.uniform1f(B.getUniformLocation(V,"zMax"),96*a);b||(E[130](a),ze())};function kd(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a}
window.setupEditorPlayerTable=function(a,b,c,d,e){c=$d(ae(c,20));var g=kd(b);b=Ae;let h=M("input",b,"width:13px");h.type="color";h.value=g;h.onchange=()=>{E[104](a,parseInt(h.value.substr(1),16));Zd()};g=K("input",b);g.value=c;g.Ea=a;g.onchange=Zn;for(let q=0;4>q;q++){let t=M("input",b,"width:60px");t.type="number";t.value=e[q];t.onchange=()=>{E[107](a,xe(t),q)}}let m=Ge(b,()=>E[141](a,100*m.checked+1,0,1),d);K("button",b,"...","padding:3px 8px").onclick=()=>Hp(a);c=K("button",b);c.className="closeIcon";
c.onclick=()=>E[126](a)};function Ip(){var a=Jp.data,b=Kp.data,c=l("invrtimg").checked;p(c);var d=255*parseInt(l("rngcnvs").value)/100;for(let e=0;e<a.length;e+=4){let g=(a[e]+a[e+1]+a[e+2])/3;c&&g<d||!c&&g>=d?(b[e]=2,b[e+1]=29,b[e+2]=45):(b[e]=34,b[e+1]=55,b[e+2]=0);b[e+3]=255}l("prevcan").getContext("2d").putImageData(Kp,0,0)}var Jp,Kp;
function Xn(a){var b=document.createElement("label");b.className="container";var c=document.createElement("input");c.type="checkbox";c.checked=0;var d=document.createElement("span");d.className="checkmark";b.appendChild(c);b.appendChild(d);a.appendChild(b);return c}function Lp(){this.J.innerHTML='<div style="background:url(nehhon/icons2.webp) no-repeat 0px -200px;width:20px;height:20px;display:inline-block;margin-bottom:-6px;"></div>x'+this.value/100}
function Jl(){this.J.innerHTML=this.value+"%"}function Mp(){this.J.innerHTML=this.value}function Np(){this.J.innerHTML=this.value+"m"}function Op(){this.J.innerHTML=this.value+N(558)}function Pp(){this.J.innerHTML=Vc(1E3*parseInt(this.value))}function Qp(){this.J.innerHTML=this.value+"s"}
async function Ie(){let a=new Image;a.src=window.URL.createObjectURL(this.files[0]);await a.decode();var b=E[47](),c=l("mmimg");c.innerHTML="";var d=M("canvas",c,"position: static;margin:28px;display:block;width:291px");d.id="prevcan";var e=K("input",c);e.type="range";e.id="rngcnvs";Hl(e);e.oninput=function(){this.J.innerHTML=this.value+"%";Ip()};e.J.innerHTML="50%";e.value=50;K("span",c,N(458),"margin-left:10px");c=Xn(c);c.id="invrtimg";c.onchange=Ip;d.width=b;d.height=b;d=d.getContext("2d");d.imageSmoothingEnabled=
!0;d.fillStyle="#fff";d.fillRect(0,0,b,b);c=a.width;e=a.height;var g=b/(c>e?c:e);c=Math.floor(c*g);e=Math.floor(e*g);d.drawImage(a,(b-c)/2,(b-e)/2,c,e);Jp=d.getImageData(0,0,b,b);Kp=new ImageData(b,b);Ip();K("button",l("mmimg"),N(2),"margin-bottom:36px;margin-left:22px").onclick=Rp;URL.revokeObjectURL(a.src)}function Rp(){var a=E[186](),b=E[187](),c=E[47]();c=dj(E[78](1),c*c);var d=Kp.data;for(let e=0;e<d.length;e+=4)c[e/4]=2==d[e]?b:a;p(c);E[124]();ze.update=!0}
function Hp(a){let b=fd("",1);b.id="mapPropsXtra";if(E[141](a)){var c=K("div",b);for(let e=0;2>e;e++)Xa(c,E[141](a,0,e),function(){He(this);this.value=E[141](a,xe(this)+1,e)},"number","",100,e?0:1),O("span",c,[10,34][e])}O("button",b,542,"display:block;margin:auto;margin-bottom:20px").onclick=()=>{E[140](a,1);Q(b);Hp(a)};O("button",b,12,"display:block;margin:auto").onclick=()=>E[140](a);c=M("div",b,"margin-top:20px");let d=ji();d.unshift({name:N(42),id:4},{name:N(11),id:38});for(let e of d)Xa(c,E[139](a,
e.id),function(){E[139](a,e.id,xe(this)+1)},"number"),K("span",c,e.name)}var Ae;function nd(a,b){a=K("img",a);a.src="nehhon/"+["gold","wood","food","stone"][b]+".gif";return a}function Be(){Bb(Ae);K("button",Ae,"+").onclick=function(a){let b=1;a.shiftKey&&(b=5);a.altKey&&(b=100);for(a=0;a<b;a++)E[114](1)};O("div",Ae,6,"justify-self:baseline");for(let a=0;4>a;a++)nd(Ae,a);O("div",Ae,20);K("div",Ae);K("div",Ae);E[103]()}window.editorPlayerTable=Be;
function Zn(){var a=17;this.value.length<a&&(a=this.value.length);for(var b=pb(qb),c=0;17>c;c++)b[c]=0;for(c=0;c<a;c++)b[c]=this.value.charCodeAt(c);E[106](this.Ea);S&&Zd()}function Sp(a){S&&(a.className="onlyrnd",a.dataset.nly="Only random maps")}var fo=[];
window.customMapTable=function(a,b,c,d,e,g,h){var m=l("custombody");m=K("tr",m);M("td",m,`background:rgb(${e},${g},${h})`).className="ucolor1";let q=K("td",m,$d(ae(b,20)),d?"color:var(--color1)":"");q.className="username1";fo[a-1]=q;E[246]()||(K("td",m,c).className="team1");m.onclick=()=>{for(let t of fo)t.style.cssText="";q.style.color="var(--color1)";E[113](a)}};
function Sg(a,b,c,d,e){let g;c&&=N(c);if(d){g=document.createElement("div");let h=null;for(let m=0,q=a.children;m<q.length;m++)if(q[m].$>d){h=q[m];break}g.$=d;a.insertBefore(g,h)}else g=K("div",a);g.className=e?"dataOrder":"dataIcon";g.style.backgroundPositionY=b+"px";c&&(g.dataset.title=c);return g}window.stFST=function(a,b,c,d,e){W={race:a,C:b,name:c,priority:d,jb:e}};var W;
window.strrNFO=function(a,b,c,d,e,g,h,m,q,t){if(c=gg[c])for(let r of c)r.innerHTML="",r.cc=a&&!t,r.className=a?"":"blocked",t&&q&&T(r.parentNode),(m||h)&&(d||e)&&(h?e&&1<=g&&(r.innerHTML="..."):r.innerHTML=e?`<span><span>${e}x</span>\u221e</span>`:d,r.className=g?"crnt1":"crnt"),h&&b&&(r.className="invd"),r.ab&&(r.ab.x=b),q&&(r.dataset.x=b,d?r.dataset.loading=d:delete r.dataset.loading,b?r.parentNode.classList.remove("nobdgs"):r.parentNode.classList.add("nobdgs"))};
var Tp=()=>{T(l("supertree").parentNode.parentNode);E[283](0)},ig,gg,fg;
window.bldmn2=function(a,b,c){2<c&&(c=0);fg=1;var d=fd("",1);d.id="supertree";d.children[0].onclick=Tp;gg=[];dg=[];var e=K("div",d),g=oc(a,b);let h=0,m=[];a=[10,79,64];let q=[10,79,64];for(d={10:0,79:1,64:2};h<b;){let u=g[h++],v={id:u,C:g[h++],name:g[h++],race:g[h++],type:g[h++],Ib:g[h++],order:g[h++],Dc:{}};v.Jb=g.slice(h+1,g[h]+h+1);h+=g[h]+1;v.Uc=g.slice(h+1,g[h]+h+1);h+=g[h]+1;v.$b=g.slice(h+1,g[h]+h+1);h+=g[h]+1;m[u]=v}b=(u,v,x,y,z,w)=>{let A=K("button",v);eg(A,48*x);A.onmouseenter=()=>{E[282](y,
0,u,E[112](),0,0,1);Bd.innerHTML&&(Bd.className="tree",Bd.style.cssText="");document.body.append(Bd);let C=A.getBoundingClientRect(),F=Bd.getBoundingClientRect();Bd.style.top=C.y+60+"px";Bd.style.left=C.x-F.width/2+24+"px"};A.onmouseout=C=>{Bd.innerHTML="";Bd.className="";T(Bd);l("content").append(Bd);if(1!=C){for(let F of dg)F.classList.remove("mrkd"),F.classList.remove("mrkd1");dg.length=0}};A.onmousedown=C=>{if(A.cc&&(E[15](0,C.button,y,z),A.onmouseout(1),w)){let F=m[q[u]],L=gg[F.order];if(F.x||
!L)Tp(),Oh(C,1);else for(let P of L)P.classList.contains("mrkd")||(w.parentNode.classList.add("mrkd"),P.classList.add("mrkd"),setTimeout(()=>{w.parentNode.classList.remove("mrkd");P.classList.remove("mrkd")},2E3))}};gg[y]||(gg[y]=[]);gg[y].put(A);return A};let t=M("div",e,"display:flex;justify-content: center;gap:22px"),r=K("div",e);c=a[c];Qk(a,c);a=[a[0],c,a[1]];for(c=0;3>c;c++){e=a[c];g=m[e];let u=d[e],v=K("button",K("span",t));eg(v,48*g.Ib);v.className="dataOrder";let x=K("div",r);v.parentNode.onclick=
()=>{for(let y of r.children)T(y);for(let y of t.children)y.style.opacity=".3";x.style.cssText="";v.parentNode.style.opacity="";ig=u};g.bb=x;for(let y of m)if(0<=y.$b.indexOf(e)){g=document.createElement("div");g.className="menuord";cg(g,x,-y.Jb.length);b(u,g,y.Ib,y.order,e,v).ab=y;y.bb=K("div",g);y.bb.className="menuord";for(let z of y.Jb)E[260](z),g=b(u,y.bb,$f.icon,z,y.id),2147483647!=$f.Pb&&(g.ab=m[$f.Pb])}gd&&1!=c&&T(v.parentNode)}t.children[1].onclick();E[283](1)};
window.bldmnu2=function(){if(l("supertree"))l("supertree").parentNode.parentNode.style.cssText="",E[283](1);else E[281]()};var Up;
function Ke(a,b){let c=gi();var d=K("table",c);if(b){O("thead",d,763);b=K("td",K("tbody",d));b.className="s3race";b.colSpan=4;var e=pb(Up);for(let m=0;m<e.length;m++){E[196](e[m]);if(!(m%3)){let q=[];var g=K("div",b);g.dataset.title=N(W.name);g.Qb=q;g.onclick=()=>{a(-1-m,q);Q(c)}}var h=W.C;g.Qb.put(h);Sg(g,h,0,W.priority)}}e=K("thead",d);g=K("tbody",d);b=K("tbody",d);K("div",d,N(60),"text-transform:uppercase;padding:11px;padding-top:23px;color:#0f0");d=K("td",K("tbody",d),"","border:none");d.colSpan=
4;c.id="selObj";for(h=0;4>h;h++)K("td",g),K("td",b),K("td",e,Xb[h]);e=E[90]();for(let m=0;m<e;m++){E[196](m);let q=E[194](m,1);h=W.race;let t=g.children[h];q||(q=E[194](m,0,1),t=b.children[h]);q||(q=E[194](m,0,0,1),t=d);q&&(Sg(t,q,W.name,W.priority).onclick=()=>{a(m,q);Q(c)})}}var Vp;function Wp(a,b,c){a=K("div",a);b=b?2==b?N(22):jd(0,E[29](b)):N(23);a.dataset.selplayer=b;a.onclick=Xp;a.ic=c}var Yp;
function Xp(){this.innerHTML="";let a=K("div",this);K("div",a,N(23)).Ua=0;K("div",a,N(22)).Ua=2;Yp=a;document.addEventListener("mouseup",Zp,{once:!0})}function Zp(a){a=a.target;void 0!=a.Ua&&(p(a.parentNode.parentNode),a.parentNode.parentNode.ic(a.Ua),a.parentNode.parentNode.dataset.selplayer=a.innerHTML);J(Yp)}var $p,aq;function bq(){let a=xe(Zk[21]);aq.innerHTML=N(510)+": "+Vc(1E3*(xe(Zk[24])*(a-1)+a*xe(Zk[8])*60))}
function cq(a,b){return`<span>=</span> ${a}\u00d7${b}\u00b2/256\u00b2 <span>=</span> <span style="font-size:12px;font-family:'nh18';color:var(--color1);">${Math.round(a*b**2/65536)||1}</span>`}function dq(){var a=parseInt(this.value);if(0>a||!a)this.value=a=0;9999<a&&(this.value=a=9999);n[this.aa]=a;if(this.Ta){a=n[0];let b=n[this.aa];this.Ta.innerHTML=n[this.aa+3]?cq(b,a):"";this.Ta.Rb=b}}function eq(a){n.push(1,1,a,10,0);Bp(0,n)}function fq(a){n.push(1,0,a,1,0);Bp(0,n)}
function zp(a,b){b||=0;return pb(Up)[-(a+1)+b]}var Ap;
function Bp(a,b){Up=new lc(E[197](),48);pb(Up);Vp.innerHTML="";$p.innerHTML="";for(var c=47;c<b.length;c+=5){let m=c;var d=b[m],e=b[m+1];let q=b[m+2],t=b[m+3],r=b[m+4],u=1==e;var g=K("tr",u?$p:Vp);let v=K("td",g);var h=K("div",v,"",r&&"background-color:#ff00ff17 !important");h.className="sett2";if(r||!a)h.onclick=()=>{Ap=m+4;Cp(r?b.slice(m+5,m+5+7):0,q,0,a)};let x;if(0<=q)E[196](q),x=Sg(v,W.C,W.name);else for(x=K("div",v),x.className="dataIcon3",E[196](zp(q)),x.dataset.title=N(W.name),h=0;3>h;h++){let z=
K("div",x),w=zp(q,h);E[196](w);z.style.backgroundPositionY=W.C+"px"}a||(x.onclick=()=>Ke((z,w)=>{var A=x,C=m+2;p(w);if(0>z){A.className="dataIcon3";ej(A,"");for(let F=0;3>F;F++)K("div",A).style.backgroundPositionY=w[F]+"px"}else A.className="dataIcon",ej(A,""),A.style.backgroundPositionY=w+"px";A.dataset.title=N(E[89](0>z?zp(z):z));b[C]=z;p(z,A,b,C)},u));K("span",v,"\u00d7");let y=K("input",v);y.value=d;y.type="number";y.aa=m;y.oninput=dq;y.onchange=dq;if(u)e=ah(K("td",g,"","text-align:left"),t),
e.aa=m+3,e.max=35,e.style.width="116px",e.J.style.width="36px",e.oninput=function(){this.J.innerHTML=this.value+"m"},e.oninput(),e.onchange=dq;else{let z=Xn(K("td",g));z.checked=t;d=K("td",g);d.className="finalRes";y.Ta=d;y.onchange();z.onchange=()=>{b[m+3]=z.checked?1:0;y.onchange()};a?(e=e?2==e?N(22):void 0:N(23),K("td",g,e,"font-size:13px;text-align:center")):Wp(K("td",g),e,w=>b[m+1]=w)}r&&(c+=7);a||(g=K("div",K("td",g)),g.className="closeIcon",g.onclick=()=>{b.splice(m,5+(r?7:0));Bp(0,b)})}a||
(c=K("div",K("td",K("tr",$p))),c.className="sum",c.onclick=()=>Ke(eq,1),c=K("div",K("td",K("tr",Vp))),c.className="sum",c.onclick=()=>Ke(fq))}function gq(a){return`<td>${a||""}</td>`}function hq(){for(let a of iq)if(a.id&&qa[a.id]!=n[a.id])return!0;return!1}
function jq(a){var b=iq,c=hq();let d=K("div",a);for(let e of b){if(e.Ia){0==d.children.length&&J(d);d=K("div",a);continue}if(!e.id){K("div",d,"","margin-top:20px");K("div",d);continue}b=kq(e.title,e.type,d);"input"==e.type&&(b.type="number");void 0!=e.min&&(b.min=e.min);e.max&&(b.max=e.max);e.step&&(b.step=e.step);e.oninput&&(b.oninput=e.oninput,b.oninput());e.h&&(K("img",b.parentNode,"","margin-right:3px",1).src="nehhon/"+e.h);e.options&&lq(e.options,b);e.tb&&(b.style.cssText=e.tb);e.Da&&K("span",
b.parentNode,e.Da,"margin-left:4px;margin-right:10px",1);e.id&&mq(e.id,b);let g=qa[e.id];if(29==e.id)g+="m";else if(35<=e.id&&38>=e.id)g+="s";else continue;K("div",b.parentNode,N(516)+" -> "+g)}return c}function fi(){He(this)}function He(a){var b=parseInt(a.min),c=parseInt(a.value);c>parseInt(a.max)?a.value=a.max:c<b?a.value=a.min:c||(a.value=0)}
function oe(){for(var a="",b=0,c=lb.length;b<c;b++){var d=lb[b];var e=b==E[97]()?"selected":"";a+=`<option value="${b}" ${e}>${d.name}</option>`}return a}function cl(a,b,c){var d=D.l?E[70]():E[28]()-1;if(0>=d)return a;if(b){if(80>Math.PI*a/d)return a=Math.round(80*d/Math.PI),Ya(wg(N(25),a),"#d2bf61"),a}else if(b=13100*Math.PI*c**2/(5625*Math.PI),a**2/d<b)return a=Math.round(Math.sqrt(b*d)),$k||Ya(wg(N(25),a),"#d2bf61"),a;return a}
window.updtrr=function(){pc(function(){E[122]();ze.update=!0;E[121]();Vd()})};var Le=()=>"1"==f.menud&&"true"==f.theme&&!S;function oq(){var a=n;for(let b=0;b<Zk.length;b++){let c=Zk[b];c&&("checkbox"==c.type?c.checked=a[b]:c.value=a[b],"range"==c.type&&c.oninput&&c.oninput(),c.onchange||(c.onchange=fi))}}
var pq,qq,iq=[{id:42,title:523,type:1},{id:17,title:395,type:1},{id:20,title:491,type:1},{id:40,title:508,type:1},{id:43,title:651,type:1},{id:44,title:869,type:1},{id:45,title:877,type:1},{Ia:1},{id:29,title:494,type:2,oninput:Np,max:256,min:1,tb:"width:167px"},{Ia:1},{id:39,title:504,type:1},{id:33,title:501,type:2,oninput:Lp,min:0,max:200,step:25},{id:32,title:500,oninput:Lp,type:2,min:0,max:200,step:25},{id:31,title:499,oninput:Lp,type:2,min:0,max:200,step:25},{id:34,title:71,oninput:function(){this.J.innerHTML=
"x"+this.value/100},type:2,min:100,max:500,step:100},{Ia:1},{id:41,title:511,type:2,oninput:Mp,min:10,max:1E3,step:10},{Ia:1},{title:502,id:35,h:"gold.gif",type:2,oninput:Qp,min:1,max:30},{id:36,h:"wood.gif",type:2,oninput:Qp,min:1,max:30},{id:37,h:"food1.webp",type:2,oninput:Qp,min:1,max:30},{id:38,h:"stone.gif",type:2,oninput:Qp,min:1,max:30},{},{id:30,title:495,type:"select",options:[89,496,497,498],Da:"\u25bc"},{id:25,h:"gold.gif",type:"input",max:5E4},{id:26,h:"wood.gif",type:"input",max:5E4},
{id:27,h:"food.gif",type:"input",max:5E4},{id:28,h:"stone.gif",type:"input",max:5E4}],rq;function sq(){var a=l("prstnpt").value,b=!tq[a];tq[a]=Yk();f.presets4=JSON.stringify(tq);b&&uq(a,tq,rq)}
function uq(a,b,c,d){let e=K("span",c);K("button",e,(d?"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714</span> ":"")+a,"color:var(--color1);margin-bottom:20px").onclick=()=>{n=b[a].slice(0);pq.checked=0<n[8];pq.onclick();qq.checked=hq();qq.onchange(5);oq();Bp(0,n);Zk[30].onchange();bq();l("prstnpt").value=a};d||(K("button",e,"\ud83d\udfa9","color:red;font-size:14px;line-height:14px;width:18px;background:#ff00002b;padding:0px;border-radius:0px").onclick=()=>{confirm(N(713))&&(tq[a]=void 0,
f.presets4=JSON.stringify(tq),J(e))})}var tq;function kq(a,b,c){K("div",c,a&&N(a)||"");a=K("div",c);return b?1===b?Xn(a):2==b?ah(a):K(b,a):a}function lq(a,b){for(let c=0;c<a.length;c++)K("option",b,N(a[c])).value=c}function Ge(a,b,c,d){let e=K("div",a,"","",d);e.className="check2";c&&(e.checked=c,e.style.backgroundPositionY="0");e.onclick=()=>{e.checked=!e.checked;e.style.backgroundPositionY=e.checked?"0":"";b(e.checked)};return e}var Zk;function mq(a,b){Zk[a]=b;b.aa=a}
function Ce(a){(a=5===a)&&l("mapconfiguration")&&Q(l("mapconfiguration"));if(l("mapconfiguration"))l("mapconfiguration").parentNode.parentNode.style.display="table";else{var b=fd("");b.id="mapconfiguration";Zk=[];a&&(l("mapconfiguration").className="viewonly");var c=K("button",b);c.className="closeIcon";var d=K("div",b);d.id="mainconf";if(!S){var e=K("div",d,"","");for(var g=0;4>g;g++){K("img",e).src="nehhon/"+["gold","wood","food","stone"][g]+".gif";var h=K("input",e);mq(1+g,h);h.min=-1E9;h.max=
1E9;h.step=100;h.type="number"}}if(S){var m=K("div",d);Sp(m)}g=K("div",d);e=kq(1,"input",g);e.step=32;e.min=96;e.max=2048;e.type="number";mq(0,e);e.onchange=function(){var F=xe(this)||0;this.value=F=S?F:cl(F,Zk[16].checked,xe(Zk[29]));let L=document.getElementsByClassName("finalRes");for(let P of L)P.innerHTML&&(P.innerHTML=cq(P.Rb,F));n[0]=F;He(this)};e=kq(26,"select",g);mq(6,e);for(h=0;h<lb.length;h++)K("option",e,lb[h].name).value=h;e=kq(27,"select",S?m:g);mq(7,e);lq([28,29,30,31,32,33,525,524],
e);e=kq(35,"select",g);mq(12,e);lq([36,37,38,39],e);g=K("div",d);e=kq(398,"select",g);mq(19,e);lq([399,400,401],e);S||(e=kq(11,"input",g),mq(9,e),e.type="number",e=kq(42,"input",g),mq(10,e),e.type="number",e.min=100,e.max=5E4);e=kq(396,2,g);e.oninput=Op;mq(18,e);e.style.width="150px";S||(g=K("div",d));e=kq(394,1,S?m:g);mq(16,e);e=kq(393,2,S?m:g);mq(15,e);e.oninput=Jl;e.style.width="150px";S&&m.parentNode.appendChild(m);S||(K("div",g,"","min-height:0px"),e=K("div",g,"","min-height:0px"),e.className=
"diffnfo",e.innerHTML='easy<span style="width:14px"></span>normal<span style="width:14px"></span>hard<span style="width:25px"></span>legend',e=kq(10,2,g),e.oninput=Jl,mq(11,e),e.style.width="150px",e.min=15,e.max=150,e=kq(34,2,g),e.oninput=Jl,mq(13,e),e.style.width="150px");O("button",b,737,"padding: 12px 15px;\n    width:max-content;\n    background: #fbd45c1c;\n    color:var(--color1);\n    box-shadow:0px 0px 20px #000;\n    border:1px solid rgb(243 205 90 / 8%);\n    margin-bottom: 18px;\n    font-size: 16px;\n    margin-top:-23px;\n    ").onclick=
()=>De(a);d=K("div",b);d.id="br";let r=K("div",d);pq=kq(484,1,r);pq.checked=0<n[8];r.children[0].style.color="var(--color1)";let u=kq(487,"select",r);mq(5,u);lq([489,720,509],u);let v=kq(485,2,r);v.min=1;v.max=60;v.oninput=Op;mq(8,v);let x=kq(490,"input",r);x.step=10;x.min=1;x.max=8E4;x.type="number";mq(22,x);let y=kq(486,2,r);y.min=0;y.max=3600;y.step=30;y.oninput=Pp;mq(14,y);let z=kq(488,2,r);z.min=1;z.max=25;z.oninput=Mp;mq(21,z);let w=kq(492,2,r);w.min=0;w.max=100;w.oninput=Np;mq(23,w);let A=
kq(493,"input",r);A.step=10;A.min=0;A.max=600;A.type="number";mq(24,A);K("span",A.parentNode,"s");A.style.width="50px";A.addEventListener("input",bq);v.addEventListener("input",bq);z.addEventListener("input",bq);K("div",r);K("div",r);K("div",r);aq=K("div",r,"","font-size:11px;color:#ffffff4d;line-height:0px;margin-top:11px;text-align:right");pq.onclick=function(){this.checked?(z.value=3,y.value=600,x.value=55,v.value=3,w.value=4,u.value=1,A.value=15,z.oninput(),y.oninput(),v.oninput(),v.min=1,w.oninput(),
bq()):(z.value=0,y.value=0,x.value=0,v.min=0,u.value=0,v.value=0,w.value=0,A.value=0);for(let F=2;F<r.children.length;F++){let L=r.children[F];this.checked?L.show():T(L)}};pq.onclick();a&&(pq.onclick=void 0,pq.disabled=!0);d=K("div",b);d.id="advconf";K("span",d,N(503),"margin-right:9px");qq=Xn(d);let C=K("div",d);qq.checked=jq(C);qq.onchange=function(F){if(qq.checked)C.style.cssText="";else if(T(C),5!=F){for(let P of iq)if(P.id){F=Zk[P.id];var L=qa[P.id];"checkbox"==F.type?F.checked=!!L:F.value=L;
if(Zk[P.id].oninput)Zk[P.id].oninput()}Zk[30].onchange()}};qq.onchange(5);a&&(qq.onchange=void 0,qq.disabled=!0);d=K("div",b);d.id="rndtable";m=K("table",d);Sp(m);e=K("table",d);Sp(e);K("thead",e,`<td colspan=5>${N(481)}</td>`);K("thead",e,gq()+`<td colspan=2>${N(483)}</td>`+gq(N(6)));Vp=K("tbody",e);K("thead",m,`<td colspan=3>${N(480)}</td>`);K("thead",m,gq()+gq(N(482)));$p=K("tbody",m);$p.id="stobjs";if(!a){e=K("div",b,"","margin-top:42px;margin-bottom:-17px;max-width: 1287px;");e.id="presets";
tq=m=f.presets4?JSON.parse(f.presets4):{};rq=b=K("span",e,`<span style="color:#907d44;font-size:13px;">${N(460)}:</span>`);for(var q in va)uq(q,va,b,1);for(var t in m)uq(t,m,b);q=K("span",e);let F=K("input",q,"","width:144px;font-size:12px;color:#ffd75d85");F.id="prstnpt";F.value="custom preset"+(Object.keys(m).length+1);t=K("button",q,N(8));t.onclick=sq;t.Bc=b;K("button",q,N(879)).onclick=()=>{let L=new Blob([new Int32Array(n)],{type:"application/octet-binary"});Zf(L,F.value+".tzcnf")};K("button",
q,N(832)).onclick=()=>{ao(L=>{n=Array.from(new Int32Array(L.target.result));Q(l("mapconfiguration"));Ce()})}}oq();Bp(a,n);pq.checked&&bq();a||(Zk[30].onchange=function(){for(let F=0;4>F;F++)Zk[25+F].parentNode.style.display=0<this.value?"unset":"none"},Zk[30].onchange());c.onclick=a?function(){Q(l("mapconfiguration"))}:function(){if(D.l)bl();else if(S){Yk();al();Q(l("mapconfiguration"));return}l("mapconfiguration").parentNode.parentNode.style.display="none"};if(a){for(c=0;c<Zk.length;c++)Zk[c]&&(Zk[c].disabled=
!0);c=d.getElementsByTagName("input");for(q=0;q<c.length;q++)c[q].disabled=!0}}}function ej(a,b){a.innerHTML!=b&&(a.innerHTML=b)}function Bb(a){a.innerHTML=""}function xe(a){return parseInt(a.value)}function vq(a,b,c){a=K("button",a);a.className="closeIcon";a.onclick=c?function(){T(this.parentNode.parentNode.parentNode)}:b?function(){Q(this.parentNode);location.hash="";setTimeout(pg,200)}:function(){Q(this.parentNode)}}
function Cn(){var a=fd("",2);a.id="Settings";if(1==f.sid){var b=K("div",a);let h=K("input",b);h.type="number";K("button",b,"ban").onclick=function(){confirm()&&I(37,um(parseInt(h.value)))};let m=K("input",b);m.type="number";K("button",b,"panic").onclick=function(){confirm()&&I(47,mm(parseInt(m.value)))};K("input",b).type="number";K("button",b,"vrsn").onclick=function(){confirm()&&I(46)};var c=K("div",b);let q=K("input",c);q.type="number";q.placeholder="04";let t=M("input",c,"margin-left:5px");t.type=
"number";K("button",b,"HRD").onclick=function(){if(confirm()){var y=new Uint8Array(6);y[1]=xe(q);Eb(y,2,xe(t));I(49,y)}};K("button",b,"RE-HRD").onclick=function(){confirm()&&I(50)};K("button",b,"RE-BAN").onclick=function(){confirm()&&I(38)};c=K("div",b);let r=K("input",c);r.placeholder="msg 1s";r.type="number";let u=K("input",c);u.placeholder="connections";u.type="number";let v=K("input",c);v.placeholder="bandwidth";v.type="number";K("button",b,"RATE").onclick=function(){if(confirm()){var y=new Uint8Array(13);
Eb(y,1,xe(r)||2147483647);Eb(y,5,xe(u)||2147483647);Eb(y,9,xe(v)||2147483647);I(59,y)}};K("button",b,"cr io").onclick=function(){confirm()&&I(67,mm(0))};K("button",b,"cr dota").onclick=function(){confirm()&&I(67,mm(1))};K("button",b,"cr ranked").onclick=function(){confirm()&&I(67,mm(2))};K("div",b);let x=K("input",b);x.type="number";K("button",b,"dbg").onclick=function(){alert(3);I(68,mm(parseInt(x.value)))}}b=K("div",a);O("span",b,15);f.sid?(c=M("div",b,"text-align:left"),K("span",c,f.name,"color:#0f0"),
O("span",c,0,"margin-left:5px;color:#f0f;font-size:10px !important")):(c=K("input",b),c.maxLength=17,c.value=String(k.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),c.onchange=wq,c.wa="name",c.spellcheck=!1);O("span",b,103);c=K("select",b);for(var d=0;3>d;d++)K("option",c,Xb[d]).value=d;c.value=f.civi||0;c.onchange=function(){f.civi=this.value};O("span",b,14);c=K("input",b);c.type="color";c.value=k.color;c.onchange=wq;c.wa="color";c.style.backgroundColor=k.color;O("span",b,
718);c=K("select",b);d="en English es Espa\u00f1ol it Italiano pt Portugu\u00eas pl Polski cz \u010ce\u0161tina de Deutsch ru \u0420\u0443\u0441\u0441\u043a\u0438\u0439 bg \u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 ro Romanian".split(" ");for(let h=0;h<d.length;h+=2)K("option",c,d[h+1]).value=d[h];c.value=k.va;c.onchange=function(){f.language=this.value;location.reload()};O("span",b,539);b=K("div",b);var e=K("div",b,"","cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+
21*f.CCID+"px");let g=M("div",b,"max-height:256px;overflow:auto;width:265px;margin-top:5px;display:flex;flex-wrap:wrap;gap:11px");e.onclick=function(){g.innerHTML="";for(let h=0;h<pm.length;h++)M("div",g,"cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*h+"px").onclick=()=>{f.CCID=h;e.style.backgroundPositionX=21*-h+"px";g.innerHTML="";I(36,mm(h))}};e.onchange=function(){f.CCID=this.value};b=K("div",a);O("span",b,569);c=K("select",b);K("option",c,
"WebGL 1").value=1;K("option",c,"WebGL 2").value=2;navigator.gpu&&(K("option",c,"WebGPU").value=3);c.value=G?3:Pa?1:2;c.onchange=function(){f.webgl=this.value;location.reload()};O("span",b,568);a=K("select",b);c=["No","SSAA 2x"];for(d=0;2>d;d++)K("option",a,c[d]).value=d+1;a.value=f.antialiasing2;a.onchange=function(){f.antialiasing2=this.value};O("span",b,540);c=K("select",b);for(a=0;4>a;a++)O("option",c,570+a).value=a;c.value=f.fogRefresh;c.onchange=function(){f.fogRefresh=this.value};O("span",
b,889);Ge(b,h=>{f.selectionCircle=h?1:0},1==f.selectionCircle);O("span",b,878);Ge(b,h=>{f.hlffps=h?1:0},1==f.hlffps);O("span",b,719);Ge(b,h=>{f.shadows=h},"true"==f.shadows);O("span",b,534);Ge(b,h=>{f.nodecals=h?0:1},1!=f.nodecals);O("span",b,459);Ge(b,h=>{f.theme=h},"true"==f.theme);O("span",b,43);Ge(b,h=>{f.fullscreen=h},"true"==f.fullscreen);window.SharedArrayBuffer&&(O("span",b,567),Ge(b,h=>{f.multithreading=h},"true"==f.multithreading));O("span",b,541);a=K("div",b);c=K("input",a);c.type="range";
c.max=100*Ej();c.min=25;c.step=25;c.value=f.pixelDensity1||100*Ej();Hl(c);c.oninput=function(){this.J.innerHTML=this.value+"%"};c.onchange=function(){f.pixelDensity1=this.value};c.oninput(1);c.style.width="96px";O("span",b,887);a=K("div",b);c=K("input",a);c.type="range";c.max=300;c.min=25;c.step=5;c.value=f.UIscale;Hl(c);c.oninput=function(){this.J.innerHTML=this.value+"%"};c.onchange=function(){f.UIscale=this.value;kl()};c.oninput(1);c.style.width="96px"}
function Nb(a,b,c,d){let e=K("div",document.body);e.className="fwindow2";a=K("div",K("div",e),a,c);b&&vq(a,2==b,d);return a}function fd(a,b,c,d){let e=K("div",document.body);e.className="fwindow";a=K("div",K("div",e),a,c);b&&vq(a,2==b,d);return a}
function Dn(){var a=fd("",2);a.id="aboutd";var b=K("div",a);M("div",b,"background-repeat:no-repeat;height:124px;background-position:center;margin-bottom:16px").className="svgnehhon";K("p",b,"Graphics and sounds are property of Haemimont Games");b=K("a",b);b.href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url";b.target="_blank";M("img",b,"margin:19px 0px").src="nehhon/donate.gif";b=K("div",a);K("div",b,"Contact:","margin-bottom:20px");let c=K("a",b,"info@tza.red");
c.href="mailto:info@tza.red";c.target="_blank";K("p",b);b=K("a",b,"@TzaredGame");b.href="https://twitter.com/TzaredGame";b.target="_blank";a=K("div",a);K("div",a,"Special thanks to","margin-bottom:20px");b=K("a",K("p",a),"CRAZYGAMES.COM");b.href="https://www.crazygames.com/c/io";b.target="_blank";M("img",a,"max-width:241px").src="nehhon/cloudflare.svg";M("img",a,"max-width:171px;display:block;margin:31px auto").src="nehhon/fini.png";K("p",a,"&");b='<a href="https://www.youtube.com/MayorceteGamingTV" target="_blank">Mayorcete</a>;Penetrenko;Remi Sluz;David Grau;PuppedToy;Ismael Carvajal;Alvaro Lopez;Gaboal;Nanyo Nanev;Miguel Rexi;Daniel Matos;Mikel Iglesias;Cristian Vargas;Debra Stokes;Irene;Edgaras;Hekas;<a href="https://soundcloud.com/diemiurgo" target="_blank" rel="noopener noreferrer">Diemiurgo</a>;<a href="https://www.youtube.com/user/rainheart666787" target="_blank" rel="noopener noreferrer">Sharp Rain</a>;Johannes Feulner;Marco Adorni;Eric Brown;Tommaso Bruno;PRG;Julian Kazior;JotaVilla;Francesco Castelli;FT21;Manolo;Mikhail;Witold;Michael (Macca);Vanilla Ice;Marcinm;Kurnaq;Gator;Pikachu;Sebaastian;Luca;Edward;Juan;Ivan;Marcel;Olmo;WMLS;Daniel Petkov;Zach Brock;MiTrAnDiR;Mariusz;Jose Manuel;Maria;Atanas;\u0141ukasz;Cristian;Wochnik;German;Power Supersport;Xoordis;Lorenzo'.split(";");
a=M("div",a,"display:flex;flex-wrap:wrap;max-width:527px;gap:5px 11px;justify-content:center");for(let d of b)K("span",a,d,"padding: 2px 4px; border: solid #ffffff54; border-top: 0px; border-bottom: 0px; }")}function wq(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.wa&&(a=qn(a));if(a||"name"!=this.wa)k[this.wa]=a,f[this.wa]=a,zl(E[53](Kl()),17,f.name)}
if(ka){let a=K("button",l("index"));a.onclick=()=>{window.close()};a.style.cssText="z-index:1;position:fixed;top:-10px;right:-29px;font-size:45px;text-shadow: none;font-family: none;background: #7e0000;box-shadow: 0px 0px 20px #000;transform: rotate(45deg);   width: 87px;    height: 46px;";a.innerHTML="+"}l("rnd0").onclick=function(){location.hash="RandomMap"};l("sett").onclick=function(){location.hash="Settings"};let xq=document.getElementsByTagName("head")[0],yq=document.createElement("link");
yq.rel="stylesheet";yq.type="text/css";yq.href=k.Ja+"b.css?v=576";yq.media="all";xq.appendChild(yq);function zq(){this.j="move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha decal".split(" ")}zq.prototype.index=function(a){return this.j.indexOf(a)};f.lastVersion=576;var fe=new zq;ob();var Aq={0:"euro",1:"arab",2:"asia"};function Bq(a,b){const c=b.length,d=a.length;var e=0;a:for(;e<c;e++){for(var g=0;g<d;g++)if(b[e+g]!==a[g])continue a;return e}return!1}function Je(){p(this.files);var a=new FileReader;a.onload=function(){Cq(this.result)};a.readAsArrayBuffer(this.files[0])}
function Cq(a){let b=Dq(a);a={grass:0,summer:4,deset:2,snow:3}[b.vc];p(a);var c=pb(qb);let d=b.ua.length+1;for(var e=0;e<d;e++)c[e]=0;e=1;for(let g of b.ua){for(let h=0;h<d;h++)c[h+e*d]=g.Yb[h];e++}p(c.slice(0,d*d));E[211](b.ua.length,a,b.Fb);pc(function(){E[122]();ze.update=!0;E[121]();Vd();var g=dj(E[78](),b.Fb**2);for(var h=0;h<g.length;h++)g[h]=b.uc[h];p(g);Ll(Eq);E[124](1);ze.update=!0;g=1;for(var m of b.ua){h=pb(qb);for(let q=0;q<m.name.length;q++)h[q]=m.name.charCodeAt(q);E[213](g,m.color[0],
m.color[1],m.color[2],m.IA,m.race,m.resGold,m.resFood,m.resWood,m.resStone,m.name.length);g++}Zd();Lf();for(let q of b.Ha)if(m=q.kingdom,10==m&&(m=0),9==m&&(m=2**31-1),g=Fq[q.type+256*q.race],51==g&&23==q.WW&&(g=46),51==g&&p(q),void 0!=g)E[212](g,m,q.x32,q.y32,q.d,q.attack,q.defence,q.health,q.maxHealth,q.level,q.mana,q.xx21);ce(b.name,0);ce(b.description,1);ce(b.Ub,2);Q(l("mapPropsWindow"))})}
function Gq(a){const b=a.length,c=new Uint16Array(a.length);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function Hq(a,b){return Bq(Gq(a),b)+a.length}function Iq(a,b){a+=String.fromCharCode(0);return Bq(Gq(a),b)}function Jq(a,b,c){var d="";for(b+=a;a<b&&c[a];a++)d+=String.fromCharCode(c[a]);return d}
function Dq(a){a=new Uint8Array(a);var b=Bq([50,109,122,116],a)+6,c=a[b]+256*a[b+1],d=a[b+2]+(a[b+3]<<8)+(a[b+4]<<16);p("mapx:",c,"units",d);p("header",a[Hq(".header",a)],"description",a[Hq(".description",a)],"kingdominfo",a[Hq(".kingdominfo",a)],"diplomacy",a[Hq(".diplomacy",a)],"forbidden.upgrades",a[Hq(".forbidden.upgrades",a)],"tiles",a[Hq(".tiles",a)]);p(a);var e=2*c;b={};b.Fb=c;b.Nc=c;b.pb=!1;c="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 xx22".split(" ");
var g="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 resource".split(" "),h=e/2,m=20480+2*h*h,q={};h=0;for(var t=a.length;h<t;h++){var r=a[h];q[r]||(q[r]=[]);q[r].push(h)}q=[];var u={56:!0,58:!0,88:!0,72:!0};p(a.slice(m));h=m+1;for(t=a.length;h<t;h++)if(r=a[h],u[r]&&u[a[h+4]]){m={};r=72!==r?c:g;var v=h-8;let w=v;m.i2=v;for(var x=0,y=r.length;x<y;x++){var z=
r[x];"kingdom"==z||"race"==z||"xx21"==z||"xx22"==z?(m[z]=a[v],v++):(m[z]=a[v]+256*a[v+1],v+=2)}h+=v-w-8;q.push(m)}b.Ha=q;b.Ha.length>d&&(b.Ha.length=d);d=b.Ha;c=e/2;u=[];g=0;m=[];v=r=a[Hq(".forbidden.upgrades",a)]+1;t=r*=512;for(h=a.length;t<h;t+=2){y=a[t];x=~~(t/512);for(q=8;q<c&&a[q+t]===(y+q/4)%256;q+=4);20<q&&(t=512*x,1==u.length&&(t=512*(x-(2-(x-v)%2))),q=a.slice(r,t),r-t&&(u[g++]=[r,t],m.push(q)),t+=512,2==u.length&&(t-=512),r=t)}u[g++]=[r,a.length];m={64:[u[0]],96:[u[0]],128:[u[0]],192:[u[1],
u[0],u[2],u[3]],256:[u[1],u[0],u[2],u[3]],384:[u[1],u[0],u[2],u[3],u[4],u[5],u[6]],512:[u[1],u[0],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9]]}[c];p(u);u=new Uint8Array(c*c);r=new Uint8Array(c*c);Eq=new Uint8Array(c*c);q=g=0;for(v=m.length;q<v;q++)if(h=m[q],g<c*c)for(t=h[0],h=h[1];t<h;t+=2)u[g]=a[t],r[g]=a[t+1],Eq[g]=r[g]%8,8<=r[g]&&d.push({race:0,type:7,d:~~(r[g]/8)-1,x32:g%c,y32:~~(g/c)}),g++;Kq(u,e);Kq(r,e);b.uc=u;d=(e="grass",Iq("grass",a))||(e="summer",Iq("summer",a))||(e="desert",Iq("desert",a))||
(e="snow",Iq("snow",a));c=Jq(512*(a[Hq(".description",a)]-1),512,a);b.description=c;b.Ub=Jq(d-64,64,a);b.name=Jq(d-128,64,a);b.vc=e;for(e=Bq([192,4],a)+50;!a[e];)e++;d="name tzar active resGold resStone resFood resWood x6 race x8 x9 x10 x11 x12 x13 x14 AI x16 x17 x18 x19 x20".split(" ");c=d.length;g=[];t=[[41,115,255],[231,0,0],[57,115,16],[231,0,231],[255,255,0],[0,181,181],[255,156,33],[90,90,90]];p("kingdoms:",e);b.xc={0:0,9:0,10:0};for(q=0;8>q;q++){u={color:t[q]};for(m=0;m<c;m++)if(r=d[m],"name"==
r||"tzar"==r){for(u[r]="";!a[e];)e++;for(h=e+32;a[e];)u[r]+=String.fromCharCode(a[e]),e++;e=h}else u[r]=a[e]+(a[e+1]<<8)+(a[e+2]<<16)+(a[e+3]<<24),"race"==r&&(u[r]=a[e],u.racestr=Aq[a[e]-1]),e+=4;g.push(u);b.xc[q+1]=g.length;1<g.length&&(u.IA=1);u.resources=[u.resGold,u.resWood,u.resFood,u.resStone];u.race--}p(g);b.ua=g;e=b.ua;d=512*(a[Hq(".diplomacy",a)]-1);c=e.length;for(g=0;g<c;g++)if(h=[0],e[g])for(e[g].Yb=h,t=1;9>t;t++)e[t-1]&&(q=a[d],q=60>q&&t-1!=g?1:0,h.push(q)),d+=4;else d+=32;p(b);return b}
function Kq(a,b){if(a&&a.length){b/=2;var c=~~(a.length/b);if(b){for(var d=document.createElement("canvas"),e=d.getContext("2d"),g=new ImageData(b,c),h=g.data,m=0,q=h.length;m<q;m+=4){var t=a[m/4];h[m]=t;h[m+1]=t;h[m+2]=t;h[m+3]=255}d.width=b;d.height=c;e.putImageData(g,0,0);document.body.appendChild(d)}}}
var Eq,Fq={7:7,15:78,16:77,19:37,20:39,21:38,22:131,23:73,24:75,25:76,27:59,28:58,30:132,31:40,32:130,36:60,38:42,39:55,40:32,41:44,42:56,43:57,61:45,62:13,63:20,64:35,72:43,110:27,133:36,136:74,257:10,258:61,259:0,260:4,261:3,262:6,263:1,264:19,67:51,267:8,270:2,273:5,274:9,300:12,301:14,302:15,303:23,304:30,305:25,306:28,307:18,308:34,309:33,310:41,311:11,312:17,314:26,315:29,316:16,321:24,322:31,513:79,514:90,515:80,516:81,517:83,519:82,522:85,529:89,530:87,541:91,545:86,547:84,556:63,557:102,
558:93,559:95,560:100,561:99,562:103,563:94,564:104,565:101,566:96,568:109,570:97,571:98,572:107,577:108,578:92,581:110,583:106,769:64,771:66,772:67,773:68,778:69,780:128,781:65,785:129,786:127,802:70,805:72,812:62,813:71,814:112,815:114,816:119,817:118,818:121,819:113,820:122,821:120,822:115,824:126,826:116,827:117,828:124,833:125,834:111,838:123,76:21,78:22};
