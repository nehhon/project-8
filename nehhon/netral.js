var aa,ca={},da=NaN,f=window.localStorage;function ea(a,b){void 0===f[a]&&(f[a]=b)}ea("name","Guest"+~~(1E3*Math.random()));ea("color","#0000bd");ea("flag","eu");var l={name:f.name,color:f.color};function fa(){}console.log("%c nehhon %c POWER ","background:#00ffd4;color:#000;font-size:25px","background:#000;color:#00ffd4;font-size:25px");const ha=-1<navigator.userAgent.toLowerCase().indexOf(" electron/");function m(a){return document.getElementById(a)||NaN}window.gid=m;
ha&&(aa=location.search.substr(1,location.search.length));void 0===f.fullscreen&&(f.fullscreen=!0);var n;const ja=[256,5E3,5E3,5E3,5E3,0,0,0,0,500,400,40,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,20,0,21,1,0,20,0,22,1,0,1,1,-4,0,0,12,1,-1,10,0,6,1,-7,14,0,1,1,21,20,0,1,1,22,20,0,4,1,55,24,0,3,2,43,1,0,5,0,234,1,0,15,0,88,1,0];
let ka=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,44,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0],ma=ka.slice(0);ma[0]=192;let na=[256,1500,1500,1500,1500,0,0,1,3,800,800,100,2,100,450,25,1,0,0,0,0,2,1E3,8,90,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,55,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0];
var oa={Default:ja,"Deiv 1500":ka,"Battle Royale":[156,100,50,50,50,1,0,0,1,100,100,80,2,100,30,20,0,0,0,0,0,4,55,4,30,0,0,0,0,16,0,100,100,100,100,7,7,18,7,0,1,100,0,0,0,0,0,1,1,69,0,1,7,0,100,75,100,0,0,1,1,224,2,0,1,1,233,3,0,1,1,223,3,0,2,0,235,1,0,5,0,236,1,0,5,0,237,1,0,5,0,238,1,0,5,0,239,1,0,10,0,221,1,0,10,0,222,1,0,10,0,242,1,0,30,0,226,1,0,15,0,228,1,0,10,0,230,1,0,15,0,229,1,0,1,2,44,1,0,1,1,244,4,0,1,1,222,4,0,50,2,80,1,0,50,2,66,1,0,50,2,0,1,0,50,2,4,1,0],BRx4:na,Diesel:[256,1500,1500,
1500,1500,0,0,0,0,500,400,80,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,8,0,4,1,-31,16,0,12,1,-10,11,0,2,1,21,21,0,2,1,22,21,0,4,1,44,8,0,15,0,88,1,0],Classic:[256,400,400,400,400,0,0,0,0,1,200,80,2,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,12,0,21,1,0,12,0,22,1,0,1,1,-4,0,0,3,1,-1,6,0,1,1,21,15,0,1,1,22,15,0,3,1,32,10,0,15,0,88,1,0]};let pa=ka.slice(0);pa[42]=1;pa[7]=7;
pa[47]=34;let qa=ka.slice(0);qa[16]=1;qa[15]=80;qa[47]=37;qa[52]=37;qa[77]=3;qa[72]=3;let ra=ka.slice(0);ra[8]=3;ra[5]=1;ra[14]=1800;ra[21]=5;ra[22]=55;ra[23]=4;ra[24]=15;let sa=ra.slice(0);sa[14]=3600;var ta=[ka,ma,na,pa,qa,ra,sa];function ua(){a:for(let a in oa){let b=oa[a];if(b.length==n.length){for(let c=1;c<b.length;c++)if(6!=c&&46!=c&&(n[8]||14!=c&&21!=c&&22!=c)&&b[c]!=n[c])continue a;return a}}}function va(){try{n=f.mapConfig4&&JSON.parse(f.mapConfig4)||ja}catch{n=ja}}va();
"true"==f.nightcycle&&(f.nightcycle=1);"true"==f.deathsounds&&(f.deathsounds=1);"true"==f.zoomPointer&&(f.zoomPointer=1);"true"==f.unlimitedZoom&&(f.unlimitedZoom=1);"true"==f.stdcolors&&(f.stdcolors=1);"true"==f.scrollmouse&&(f.scrollmouse=1);ea("favMusic",0);ea("musicRange",75);ea("soundRange",100);ea("nplayed",0);ea("zoomMult",50);ea("scrollSpeed",50);ea("menuOpacity",75);ea("visits",0);ea("shadows",!0);ea("multithreading",!0);ea("deathsounds",1);ea("quality",1);ea("antialiasing2",1);
ea("fogRefresh",2);ea("zoomPointer",1);ea("hlffps",0);ea("unlimitedZoom",1);ea("theme",!0);ea("scrollmouse",1);f.visits++;var q;console.log=()=>{};console.trace=()=>{};q=()=>{};var wa=window[atob("bG9jYXRpb24=")];"dHphLnJlZA=="===btoa(wa[atob("aG9zdG5hbWU=")])||ha||(wa[atob("aHJlZg==")]=atob("aHR0cHM6Ly90emEucmVk"));window.ms=q;const xa=2<navigator.hardwareConcurrency&&window.SharedArrayBuffer&&("true"==f.multithreading||!f.multithreading);var ya=document.createElement("script");
ya.src="nehhon/"+(xa?"em2.js":"em.js")+"?v=521";document.body.appendChild(ya);var Aa,Ba={};
function Ca(a){if(Ba[a]){if(Ba[a]++,10<Ba[a])return}else Ba[a]=1;if(z){var b=z.getExtension("WEBGL_debug_renderer_info"),c=z.getParameter(b.UNMASKED_VENDOR_WEBGL);b=z.getParameter(b.UNMASKED_RENDERER_WEBGL)}var d=(B.now&&B.now()||0)/1E3,e=~~(d/60)%60,g=~~(d/3600);d=~~(d%60);1===(d+"").length&&(d="0"+d);10>e&&(e="0"+e);a=[a,B.l,g+":"+e+":"+d,xa?1:0,D&&D[67]()?1:0,E?3:Ea?1:2,l.name,F.host?1:0,Fa,l.navigator||"Chrome",Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.language,f.visits,ha?1:
0,521,navigator.hardwareConcurrency,navigator.deviceMemory,c,b,l.lang];for(c=0;c<a.length;c++)a[c]||(a[c]=0),a[c].replaceAll&&(a[c]=a[c].replaceAll(",",".|"));G(15,Ga(" "+a.join(",")))}window.fstdD=function(a){Ca(a)};var Ha=0;
window.addEventListener("error",function(a){a=a.error&&a.error.stack?a.error.message+"-"+a.error.stack:a.lineno+":"+a.colno+" "+a.message;z&&z.getExtension("WEBGL_debug_renderer_info");"0:0 Script error."==a&&Ha++;4<Ha&&"0:0 Script error."==a||Ca(a);B.v&&Ia(`<span style="font-size:14px">${a.substr(0,550)}</span>`,"Error")});function J(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function K(a,b,c,d,e){a=document.createElement(a);e?b.prepend(a):b.appendChild(a);void 0!=c&&(a.innerHTML=c);d&&(a.style.cssText=d);return a}function Ja(a,b){var c=document.createElement("div");a.appendChild(c);void 0!=b&&(c.textContent=b);c.style.cssText="color:#81ff81"}function Ka(a,b,c,d,e,g,h){a=L("input",a,e);a.value=b;a.onchange=c;void 0!=g&&(a.max=g);a.type=d||"text";void 0!=h&&(a.min=h);return a}
function La(a,b){m("notifybar")&&J(m("notifybar"));K("div",document.body,a,b&&`color:${b}`||"").id="notifybar";setTimeout(J,6E3,m("notifybar"))}var Ma=location,Na=0<=navigator.userAgent.indexOf(" OPR/"),Oa="undefined"!==typeof InstallTrigger,Pa=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),Qa=!!document.documentMode,Ra=!Qa&&!!window.Ob,Sa=window.chrome,Ta;Na?Ta="Opera":Oa?Ta="Firefox":Pa?Ta="Safari":Qa?Ta="IE":Ra?Ta="Edge":Sa&&(Ta="Chrome");Sa||ha||La("Partially supported browser, use Chrome/Opera/Desktop app instead");
l.wb=f.language||navigator.language||navigator.tc;var Ua={ca:"es",an:"es",gl:"es",eu:"es",ast:"es"}[l.wb.substr(0,2)]||l.wb.substr(0,2);l.version="v52.1";f.version!==l.version&&f.version&&(f.version=l.version,La("Updated to "+l.version));let Va="en es it pt ru pl bg de cz".split(" ").indexOf(Ua);0>Va&&(Va=0,Ua="en");l.lang=Va;l.Ia=Ua;if(4==Va||6==Va)document.title="\u0426\u0430\u0440\u0435\u0434";l.ya=0;l.race=0;l.navigator=Ta;l.R=151;l.Bc=null;l.ab=0;l.Da="nehhon/";
async function Wa(a){return a.split("\n")}function M(a){return da[a]||""}var Xa,Ya,Za=0;function $a(){Za++;if(3==Za){for(let b=0;4>b;b++){var a=M(698+b).split(",");let c=a.length,d=ab(bb),e=0;for(let g of a)for(a=0;20>a;a++)d[e++]=g.length>a?g.charCodeAt(a):0;D[253](c,b)}window.onhashchange=cb;cb()}}var db=0,eb,fb,gb,ib=a=>{if(a.data instanceof ArrayBuffer){let b=new Uint8Array(a.data),c=b[0];if(2==fb&&45!=c)return gb.put(a);if(hb[c])hb[c](0,b)}};
function jb(a){function b(){if(!d){let e=new Uint8Array(1);e[0]=24;c.send(e);setTimeout(b,6E4);kb&&14E3<Date.now()-kb&&c.close()}}this.active=!0;this.G=[];let c=new WebSocket("wss://hhh.tza.red:4333");this.C=c;this.C.binaryType="arraybuffer";let d=kb=0;setTimeout(b,6E4);this.C.onclose=function(e){d=!0;this.C=null;for(var g=F.G.slice(0),h=0;h<g.length;h++){var k=g[h];k.O||k.close()}m("gameList")&&(mb(m("gameList")),O("div",m("gameList"),803,"height:100%;text-align:center"));console.log(e);B.v&&B.l&&
!nb?(setTimeout(()=>{F=new jb(1)},2E3),La(M(835))):(B.l&&La(M(803),"#ff0000"),B.l&&ob())};this.C.onopen=function(){if(a){let e=new Uint8Array(13);pb(e,1,l.K);pb(e,5,eb);pb(e,9,qb);G(54,e);fb=1;gb=[]}else db=1,f.sid&&G(21,rb(parseInt(f.sid),f.nm))};this.C.onerror=function(e){q("error",e)};this.C.onmessage=ib}if(ha)window.require("electron").ipcRenderer.on("accountlog",(a,b)=>{console.log(b);G(12,sb(1,b.code))});var F;F=new jb;var tb,ub;
window.onmessage=function(a){const b=new URLSearchParams(a.data);tb&&b.has("code")&&(q(b,a.data),tb.close(),G(12,sb(ha?1:0,b.get("code"))))};window.opener&&(new URLSearchParams(window.location.search)).has("code")&&window.opener.postMessage(window.location.search,"*");var vb;
function wb(){if(f.sid)xb();else{let a=Ab("",2);a.id="login";let b=K("div",a);vb=b;let c=L("button",b,"background:url(nehhon/discord.webp) no-repeat center;width:150px;height:93px");K("hr",b);K("button",b,"e-mail","color:#d1d1d1;width:150px;height:93px;font-size:15px").onclick=()=>{mb(b);let d=K("input",b);d.type="email";d.placeholder="name@example.com";O("button",b,2).onclick=()=>{let e=d.value;if(!(3>e.length)){mb(b);G(51,Bb(e));O("div",b,808,"font-size:10px;width:174px;color:var(--color1);");var g=
K("input",b);g.placeholder="abcd123";O("button",b,2).onclick=()=>{G(52,Cb(parseInt(g.value.trim(),36)));b.innerHTML="..."}}}};c.onclick=()=>{Db(a);ub=Math.floor(Math.random()*2**32);tb=window.open((ha?"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F%3Fdesk%3D1&response_type=code&scope=identify%20email":"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F&response_type=code&scope=identify%20email")+
"&state="+ub,"Log In","toolbar=no, menubar=no, width=600, height=830, top=10, left=100")}}}var Eb=document.createElement("div");Eb.id="gameList";Fb=Eb.children;Gb=document.createElement("div");Hb=document.createElement("div");Ib=document.createElement("span");Hb.appendChild(Ib);Eb.appendChild(Gb);Eb.appendChild(Hb);var Jb;
function Kb(){Lb=[M(106).split("|")[0],M(107).split("|")[0],M(108).split("|")[0],M(109).toLocaleUpperCase()];for(var a=["rnd0","<span>"+M(110).split("| ")[0]+"</span>","returnmenu",M(112)],b=0,c=a.length;b<c;b+=2)m(a[b])&&(m(a[b]).innerHTML=a[b+1]);a=m("mult");K("div",a,`\u2b9c ${M(98).split("| ")[0]} \u2b9e`);a.appendChild(Eb);Ib.textContent="\u2bc6 "+M(83);Hb.id="rmply";L("div",Eb).id="rln";a=K("section",Eb);K("button",a,M(99).split("| ")[1]+" +").onclick=Jb;O("button",a,537).onclick=()=>location.hash=
"Ranking";K("ul",m("index"),`<li id=about>${M(111)}</li><li id=chlog>${M(536)}</li><li id="yt"><a href="https://youtube.com/c/Tzared" alt="youtube channel" target="blank_"><img src="nehhon/yt.webp" alt="youtube channel"></a></li><li id="discord"></li>${!ha&&`<li id=tzdesk><svg width="24" height="24" viewBox="0 0 24 24" class="icon-nuGd5b"><g fill="currentColor"><path d="M17.707 10.708L16.293 9.29398L13 12.587V2.00098H11V12.587L7.70697 9.29398L6.29297 10.708L12 16.415L17.707 10.708Z"></path><path d="M18 18.001V20.001H6V18.001H4V20.001C4 21.103 4.897 22.001 6 22.001H18C19.104 22.001 20 21.103 20 20.001V18.001H18Z"></path></g></svg> <a id='tzdwd' style='text-decoration:none;color:inherit' href='download/' target="_blank">${M(538)}</a></li>`||
""}<li id=help>${M(114)}</li>`).id="topLinks";m("accb").innerHTML=f.sid?M(445):M(444);m("about").onclick=function(){location.hash="About"};m("help").onclick=function(){location.hash="#Guide"};m("chlog").onclick=function(){location.hash="#Changelog"};m("accb").onclick=wb;if(ha){a=K("span",m("mult"),"","position:absolute;right:0px");b=K("button",a,M(391).split("|")[0],"background:#00000085;color:#c3a447");let d=K("input",a,"","background: #00000085;");d.placeholder="https://tza.red/##room";b.onclick=
()=>{let e=d.value.split("##")[1];e&&(Mb=!0,Nb("#"+e),Pb())}}ha||(m("tzdesk").onclick=function(){m("tzdwd").click()});m("yt").onclick=function(){m("yt").children[0].click()};a=m("discord");a.ariaLabel="Discord";a.onclick=()=>{window.open("https://discord.gg/ndxJHxT","_blank")}}
(async function(){let a=await fetch(l.Da+l.Ia+".nhl");da=await Wa(await a.text());Ya=[{name:M(547)},{name:M(548)},{name:M(549)},{name:M(550)},{name:M(551)},{name:M(552)},{name:M(553)},{name:M(554)},{name:M(555)}];Kb();Xa=1;$a()})();window.spAlert2=function(a,b,c,d){Ia(b&&M(b),M(a),d,M(c))};function Qb(){P("alert")}
function Rb(){var a=M(444)+" / "+M(861);let b=Ab(M(441),1);b.style.fontSize="19px";K("button",b,a,"display:block;margin:28px auto auto;font-size:15px;padding:6px;background:#00ff0030;border-radius:2px").onclick=()=>{J(b.parentNode.parentNode);wb()}}
function Ia(a,b,c,d){var e=m("alert");e||(e=document.createElement("div"),e.id="alert",document.body.appendChild(e),e=m("alert"),q(d),e.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var g=m("alerttitle"),h=m("alerttext");m("alertok").onclick=Qb;e.style.display="block";g.innerHTML=b||da&&M(115)||"Warning";m("alertok").innerHTML=
d||da&&M(116)||"Ok";h.innerHTML=a||"";c?m("alertok").style.display="none":m("alertok").style.display="block"}window.spAlert=Ia;var Sb=0,Tb;function Ub(a){Vb.innerHTML=M(117)+" "+a+"%"}window.showProgress=Ub;function Wb(){Sb++;Sb>=Tb&&(Xb?Xb():Yb())}function Zb(a,b){this.cb=a;this.size=b}function ab(a){return $b(a.cb,a.size)}function ac(){var a=bb;return bc(a.cb,a.size)}
function cc(a){Xb=a;Vb.innerHTML=M(117);var b=1;Q&&(b=1);dc=4096*b;Tb=3;a&&Tb--;Sb=0;D[134]("true"==f.shadows,b,dc);Ub.progress=0;Ub.total=0;Date.now();Wb();Vb.innerHTML=M(117);ec()}var Xb;function ec(){D[136]()==Tb-Sb?(Sb++,Wb()):setTimeout(ec,15)}function fc(){if(!ha){f.update=1;if(window.caches){var a=window.caches;a.keys().then(function(b){for(let c of b)a.delete(c)})}setTimeout(function(){location.reload(!0)},250)}}f.lastVersion&&521!=f.lastVersion&&(f.lastVersion=521,fc());var gc=m("index");
function hc(){f.cache_v||(f.cache_v=3);if(1!=f.update||ha)fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(b){return b.text().then(function(c){K("div",gc,l.version).id="info";521!=c&&fc()})});else if(delete f.update,3!=f.cache_v){f.cache_v=3;var a=indexedDB.deleteDatabase("emscripten_filesystem");a.onsuccess=function(b){q(b)};a=indexedDB.deleteDatabase("nh2019");a.onsuccess=function(b){q(b)}}}ha?K("div",gc,l.version+` ${aa&&` - ${aa}`||""}`).id="info":hc();
!ha&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("sworker.js").then(function(){},function(a){q(a)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)});var ic,jc,kc={},lc="ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.mp3 CAMEL2.mp3 CARPETCMD.mp3 CATAPULT.mp3 CBEAR1.mp3 CBEAR2.mp3 CBEAR3.mp3 CBEAR4.mp3 COW1.mp3 COW2.mp3 COW3.mp3 COW4.mp3 DRAGON1.mp3 DRAGON2.mp3 FLY1.mp3 FLY2.mp3 FOOT1.mp3 FOOT2.mp3 FOOT3.mp3 FOOT4.mp3 FOOT5.mp3 FOOT6.mp3 FOOT7.mp3 FOOT8.mp3 GHOST1CMD.mp3 GHOST2CMD.mp3 GHOST3CMD.mp3 GOLEMCMD.mp3 H%20CMD%201.mp3 H%20CMD%202.mp3 H%20CMD%203.mp3 H%20CMD%204.mp3 HEAVY%20CATAPULT.mp3 INF%20CMD%201.mp3 INF%20CMD%202.mp3 INF%20CMD%203.mp3 INF%20CMD%204.mp3 INF%20CMD%205.mp3 MESSIAHCMD.mp3 ORC%20CMD%201.mp3 ORC%20CMD%202.mp3 ORC%20CMD%203.mp3 ORC%20CMD%204.mp3 ORC%20CMD%205.mp3 ORC%20CMD%206.mp3 SHIP%20CMD%201.mp3 SHIP%20CMD%202.mp3 SKELETON1.mp3 SKELETON2.mp3 SHIP%20SELECT.mp3 E_BARRACK1.mp3 E_BLACKSMITH1.mp3 FIRE1.mp3 FIRE2.mp3 FIRE3.mp3 FIRE4.mp3 FIRE5.mp3 ROCKET.mp3 pepe.mp3 A_MAGE.mp3".split(" "),
mc,nc;function oc(){var a=qc;this.context=ic;this.onload=a}function qc(a,b,c){b=b.split(".")[0].toLowerCase();kc[b]=a;c&&(jc(b,c.x,c.y,c.k,c.Rb,c.I),c.I=0)}
function Pb(){if(!ic){oc.prototype.Qb=function(d,e){var g=this;rc(l.Da+d,function(h){g.context.decodeAudioData(h).then(function(k){k&&qc(k,d,e)})})};for(var a=0,b=lc.length;a<b;a++){var c=lc[a];kc[c.split(".")[0].toLowerCase()]=c}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,ic=new AudioContext,nc=ic.createGain(),mc=new oc,nc.gain.value=parseInt(f.soundRange)/100,nc.connect(ic.destination));jc=function(d,e,g,h,k,p,r){if(mc&&parseInt(f.soundRange)){"string"!==
typeof d&&(d=lc[d].split(".")[0].toLowerCase());var t=d;if((d=kc[d])&&"loading"!==d&&!B.gb){var u=-sc+(window.innerWidth-l.R)/2,v=-tc+window.innerHeight/2;if(d.duration){if(B.v)if(64<B.now()-d.rb||!d.rb)d.rb=B.now();else return;if(!("attack"!=t&&p&&600<Date.now()-p)){if(e){if(k=(-u/32+e)/7,g=(-v/32+g)/7,v=uc,4096<k*k+g*g)return!1}else v=g=k=0;void 0!==h&&h!==l.qb||B.zc||(h=ic.createBufferSource(),h.buffer=d,e?(d=ic.createPanner(),d.panningModel="HRTF",d.setPosition(k,g,v),d.refDistance=1,d.distanceModel=
"inverse",h.connect(d),d.connect(nc)):h.connect(nc),h.start(0))}}else kc[t]="loading",e={x:e,y:g,k:h,Rb:k,I:Date.now(),mid:r},mc.Qb(d,e)}}};window.play=jc}}
const vc=[{name:"Tzar soundtrack",Z:"Kiril Busty Petrushev & Dimitar Sabev",volume:.7,fa:[{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],ma:[{sizes:"141x141",src:"nehhon/cover.png"}],Oa:!0},{name:"Sharp Rain Tzar",Z:"Sharp Rain, Kiril Busty Petrushev & Dimitar Sabev",
volume:1,fa:[{url:"sr1.mp3",name:"Track 1"},{url:"sr2.mp3",name:"Track 2"},{url:"sr3.mp3",name:"Track 3"},{url:"sr4.mp3",name:"Track 4"},{url:"sr5.mp3",name:"Track 5"},{url:"sr6.mp3",name:"Track 6"},{url:"sr7.mp3",name:"Track 7"},{url:"sr8.mp3",name:"Track 8"},{url:"sr9.mp3",name:"Track 9"},{url:"sr10.mp3",name:"Track 10"}],ma:[{sizes:"141x141",src:"nehhon/shr.png"}],Oa:!0},{name:"Tzar soundtrack",Z:"Kiril Busty Petrushev & Dimitar Sabev",volume:1,fa:[{url:"tzaradp.mp3",name:"Tzar ADP",Z:"Diemiurgo"},
{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],ma:[{sizes:"200x200",src:"nehhon/diemiurgo.jpg"}]},{name:"Tzar soundtrack remastered",volume:1,Z:"Kiril Busty Petrushev & Dimitar Sabev",fa:[{url:"o1.mp3",name:"Track 1"},{url:"o2.mp3",name:"Track 2"},
{url:"o3.mp3",name:"Track 3"},{url:"o4.mp3",name:"Track 4"},{url:"o5.mp3",name:"Track 5"},{url:"o6.mp3",name:"Track 6"},{url:"o7.mp3",name:"Track 7"},{url:"o8.mp3",name:"Track 8"},{url:"o9.mp3",name:"Track 9"},{url:"o10.mp3",name:"Track 10"},{url:"outro.mp3",name:"Outro"}],ma:[{sizes:"141x141",src:"nehhon/cover.png"}],Oa:!0},{name:"Tzar soundtrack orchestral version",volume:1,Z:"Pau Garriga, Kiril Busty Petrushev & Dimitar Sabev",fa:[{url:"oc1.mp3",name:"Track 1"},{url:"oc2.mp3",name:"Track 2"},{url:"oc3.mp3",
name:"Track 3"},{url:"oc4.mp3",name:"Track 4"},{url:"oc5.mp3",name:"Track 5"},{url:"oc6.mp3",name:"Track 6"},{url:"oc7.mp3",name:"Track 7"},{url:"oc8.mp3",name:"Track 8"},{url:"oc9.mp3",name:"Track 9"},{url:"oc10.mp3",name:"Track 10"}],ma:[{sizes:"480x360",src:"nehhon/oc.jpg"}],Oa:!0}];var wc;
function xc(){"mute"!=f.favMusic&&wc&&(wc.src="nehhon/F.mp3",wc.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:"Astronomia (Medieval Style)",artist:"Cornelius Link",artwork:[{sizes:"200x200",src:"nehhon/cornelius.jpg"}]})))}
function yc(){this.value&&(f.favMusic=this.value);if("mute"!=f.favMusic){var a=vc[f.favMusic]||vc[0];if(a.Oa){a=a.fa;for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}}}zc.id=0;zc()}
function zc(){var a=f.favMusic;if("mute"==a)return wc.src="";a=vc[a]||vc[0];0>zc.id&&(zc.id=0);var b=a.fa[zc.id++%a.fa.length];wc.src="nehhon/"+b.url;wc.play();"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:b.name,artist:b.Z||a.Z,album:a.name,artwork:a.ma}))}
function Ac(){wc=new Audio;wc.onended=zc;wc.volume=parseInt(f.musicRange)/100;if("mediaSession"in navigator){var a=navigator.mediaSession;a.setActionHandler("play",function(){wc.play();a.playbackState="playing"});a.setActionHandler("pause",function(){wc.pause();a.playbackState="paused"});a.setActionHandler("seekbackward",function(){});a.setActionHandler("seekforward",function(){});a.setActionHandler("previoustrack",function(){zc.id-=2;zc()});a.setActionHandler("nexttrack",zc)}yc()}
window.setupGameMusic=Ac;var Bc;function Cc(){return 25*D[48]()}function Dc(){if(0===B.paused){B.paused=1;void 0!=Bc&&clearInterval(Bc);var a=B.now();B.va+=Date.now();B.now=function(){return a}}else B.va-=Date.now(),B.paused=0,Bc=setInterval(Ec,Ec.speed),B.now=Cc}function Fc(a){a/=1E3;var b=~~(a/60)%60,c=~~(a/3600);a=~~(a%60);1===(a+"").length&&(a="0"+a);0!=c?(c+=":",10>b&&(b="0"+b)):c="";return c+b+":"+a}var Gc=0,Hc=0;
window.invgtech=function(a){a=K("div",Ic,"",`background-position-y:${a}px`);a.className="techdone";setTimeout(J,4020,a)};window.synctm=function(){D[11]()};function Ec(){var a=!0;do{B.Y=D[48]();a?Gc&&(Hc+=Date.now()-Gc-Ec.speed):Hc-=Ec.speed;Gc=Date.now();a=Date.now();D[11]();B.Y=D[48]();var b=Jc;0===B.Y%40&&b();Kc+=Date.now()-a;a=!1}while(!Mc&&Hc>=Ec.speed)}Ec.speed=25;function Nc(){this.Ea=!this.Ea;this.style.backgroundPositionY=-28*!this.Ea+"px";D[182](this.Kb,this.Ea,this.pa)}
function Oc(a){document.body.style.cursor="";m("diplomacy")||Q||(Ab('<table>\n    <tbody id="dpltable">\n    </tbody>\n    </table>\n    ',a).id="diplomacy",D[181]())}
function Pc(){var a=Qc('<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/gold.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/wood.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/food.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/stone.gif"></div>',1);a.className="sndRes";a=K("button",a,M(448),"padding:15px;margin-top:24px;background:#00ff001a");
a.pa=this.pa;a.onclick=Rc}function Rc(){var a=this.parentNode.getElementsByTagName("input");q(a,this);D[183](this.pa,parseInt(a[0].value),parseInt(a[1].value),parseInt(a[2].value),parseInt(a[3].value));Db(this.parentNode)}
window.shdiplomacyrow=function(a,b,c,d,e,g,h,k,p,r,t,u,v,w,A){b=Sc(r,b);var y=document.createElement("tr");const x=D[112]()==u;K("td",y,a);K("td",y,"","padding:0px;width:13px");K("td",y,`<div style="width:4px;background:${Tc(d)};border-radius:1px;height:16px;"></div>`,"padding:0px");K("td",y,b+Uc(r),`color:#ffd75d;${h&&";text-decoration:line-through;color:#f00"||""}`);K("td",y,c);a=n[45]&&D[48]()<2400*n[18];if(x)K("td",y,`<div class="shme" style="color:#ffb100">${D[246]()?"":A||"\ud83d\udec7"}</div>`,
"padding:0 5px;");else{K("td",y,`<div class="${p?"shenemies":"shallies"}">${D[246]()?"":A||"\ud83d\udec7"}</div>`,"padding:0 5px;");Fa&&K("td",y,`<div class="shview" style="background-position-y:${-28*!g}px;${e&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}"></div>`,"padding:0 5px;").children[0];if(!a){e=L("td",y,"padding:0 5px;");for(let C=0;4>C;C++){let I=L("div",e,`background-position-y:${-28*!(t&1<<C)}px;${(w&1<<C?1:0)&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}`);Vc(I,C);I.className=
"shres";p||(I.onclick=()=>{t^=1<<C;I.style.backgroundPositionY=-28*!(t&1<<C)+"px";q(t);D[182](1,t,u)})}e.title="Share resources"}v=K("td",y,`<div class="shcontrol" style="background-position-y:${-28*!k}px;${v&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}"></div>`,"padding:0 5px;").children[0];v.title="Share control of units";p||(a||(p=K("td",y,'<div class="shtrib"></div>',"padding:0 5px;").children[0],p.onclick=Pc,p.pa=u),v.onclick=Nc,v.Kb=2,v.Ea=k,v.pa=u)}m("dpltable").appendChild(y)};
var Kc=0,Wc=0,Xc=0,Yc=[14,12,0,0,0,0,18,18,11,14,7,7,5,5,16,11,16,8,5,5,16,15],Zc=-1;window.cursor=function(a,b){var c=Yc[2*a]||0,d=Yc[2*a+1]||0;b&&(a+="i");a!==Zc&&(Zc=a,document.body.style.cursor=`url("${l.Da}cursor${a}.gif") ${c} ${d}, auto`)};var $c,ad,bd,cd,dd,ed,fd,gd,hd,id,jd,kd,ld,md,nd,od;window.setupArrows=function(a,b,c){a&&(id.Ja.className="");(a+1)*gd.length<b&&(id.Ma.className="");c&&(id.Ab.className="")};const pd=[20,15,14,22];
window.setupTradingmenu=function(a,b,c,d,e,g){m("tradingmenu")?qd("tradingmenu"):(K("div",rd?m("menbak2"):m("menu"),'<button id="tramount"></button>\n<button id="troriginres"></button>\n<button id="trdestres"></button>\n<button id="trorigin"></button>\n<button id="trdest"></button>\n<button id="trdecline" style="top:167px"></button>\n<button id="traccept" style="top:167px"></button>',"",rd).id="tradingmenu",m("tramount").onmouseup=function(h){D[159](h.button?-1:1)},m("troriginres").onmousedown=function(h){this.style.backgroundPositionY=
-48*pd[D[160](h.button?-1:1)]+"px"},m("trdestres").onmousedown=function(h){this.style.backgroundPositionY=-48*pd[D[160](h.button?-1:1,1)]+"px"},m("trorigin").onclick=function(){D[161]()},m("trdest").onclick=function(){D[161](1)},m("trdecline").onclick=function(){P("tradingmenu")},m("traccept").onclick=D[162]);m("traccept").disabled=!g;q(a);m("tramount").innerHTML=a+` (+${g})`;c?m("trorigin").style.cssText=`background:url(nehhon/iconunits.webp) 0px ${48*-c}px`:m("trorigin").style.cssText="";b?m("trdest").style.cssText=
`background:url(nehhon/iconunits.webp) 0px ${48*-b}px`:m("trdest").style.cssText="";m("troriginres").style.backgroundPositionY=-48*pd[e]+"px";m("trdestres").style.backgroundPositionY=-48*pd[d]+"px"};var sd=navigator.Ob;function td(){}sd&&sd.addEventListener("levelchange",td);
window.setupMWmenu=function(){m("magicworkshopmenu")?qd("magicworkshopmenu"):(K("div",rd?m("menbak2"):m("menu"),'<button id="mgbook"></button>\n            <button id="mgpotion"></button>\n            <button id="mgsword"></button>\n            <button id="mgamount"></button>\n            <button id="mgitem"></button>\n            <button id="mgdecline"></button>\n            <button id="mgaccept"></button>',"",rd).id="magicworkshopmenu",m("mgbook").onclick=function(){D[36](0);ud()},m("mgpotion").onclick=
function(){D[36](1);ud()},m("mgsword").onclick=function(){D[36](2);ud()},m("mgdecline").onclick=function(){m("magicworkshopmenu").style.display="none"},m("mgitem").onmousedown=function(a){var b=1;a.button&&(b*=-1);D[37](b);ud()},m("mgaccept").onclick=function(){m("magicworkshopmenu").style.display="none";D[39]()},m("mgamount").onmousedown=function(a){var b=1;a.button&&(b=-1);D[38](b);ud()});ud()};
function ud(){m("mgitem").style.backgroundPositionY=-48*D[35]()+"px";m("mgamount").innerHTML=D[34]()}function vd(a,b){var c=a.X,d=document.createElement("div");d.className="contD";for(var e=0;e<c.length;e++){var g=document.createElement("button"),h=c[e];h.parent=a;g.innerHTML=h.name;g.onclick=wd;g.ia=h;b.appendChild(g);h.X&&(h.hb=d)}b.appendChild(d)}function xd(a){a.style.visibility="hidden"}function R(a){a.style.display="none"}Element.prototype.show=function(){this.style.display="block"};
function yd(a){a.style.display=""}function zd(a){var b=m(a.parent);vd(a,b)}var Ad;function Bd(){var a=Cd,b=Dd();a.X=b;a.sa&&(a.sa.innerHTML="",vd(a,a.sa))}
function wd(){var a=this.ia,b=a.parent;if(a.onclick)a.onclick(a.yb);if(Ad&&b&&b.T!=Ad)for(var c=Ad,d=c.length,e=0;e<d;m(c[e++]).style.display="none");a.T&&(Ed(a.T),Ad=a.T);a.da&&a.da.ia&&a.da.ia.T&&(Ed(a.da.ia.T),Ad=a.da.ia.T);if(a.X){b.da&&(b.da.className="");b.da=this;this.className="clickD";a.sa||(b=document.createElement("div"),a.hb.appendChild(b),vd(a,b),a.sa=b);b=a.hb.children;for(c=0;c<b.length;R(b[c++]));a.sa.show()}}
function Fd(){var a=D[112]();m("selectKingdom").innerHTML="";for(var b=0,c=D[28]();b<c;b++){var d=b?Gd(Hd(D[111](b),20)):M(23),e=Tc(D[132](b));m("selectKingdom").innerHTML+=`<option style="background:${e}" value="${b}" ${b==a&&"selected"||""}>${d}</option>`}m("selectKingdom").innerHTML+="<option value='"+(2**31-1)+"'>"+M(22)+"</option>";m("selectKingdom").onchange(1)}window.activeKingdomSetup=Fd;function Jd(a){D[117](a,!0)}
function Kd(a,b){let c=ab(bb),d=a.length;1024<d&&(d=1024);for(let e=0;e<d;e++)c[e]=a.charCodeAt(e);D[239](d,b)}function Ld(a){m("brushSize").value=a;m("brushSize").onchange()}function Md(a,b){var c=` (${Md.ta.length})`;Md.ta.put({name:"water"==Nd.j[b]&&M(45)+c||M(46)+c,onclick:Jd,yb:a})}window.EDterrainInfo=Md;function Dd(){Md.ta.length=0;D[118]();return Md.ta}var Od;window.fstTXT=function(a,b){b?Od=Gd($b(a,b)):Od=""};var Pd=(a,b)=>a.name.localeCompare(b.name);let Qd;var Rd=1,Sd,Cd;
function Td(){rd="true"==f.theme||1020>window.innerWidth;m("content")||(K("div",Ic).id="content");if(Q){Md.ta=[];m("content").innerHTML=`<div id="mapeditorpanel">
    <div id="mapeditorinfo">
    </div>
    </div>
    <div id="minimap" style="box-shadow:0px 0px 20px #000;position:absolute;top:31px;left:4px"></div>
    <div id="mapeditorinfotop">
   
    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>
    <button style="display:none" id="rotatebutton"></button>
    <button id="mapProps" style="box-shadow:none"></button>
    <button id="mapRules">${M(576)}</button>
    <button style="display:none" id="mapRules"></button>
    <div id="brhSize" style="display:none"><span>${M(728)}: </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>
    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>
    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>
    <div id="EDrndtree" style="display:none"><button id="rndtrees">${M(49)}</button></div>
    <div id="EDterr" style="display:none"><span>${M(26)}: </span><select id="EDtrrsel">${Ud()}</select></div>
    <div id="EDterrRND" style="display:none"><button id="rndtrbutton">${M(50)}</button></div>
    <div><span style="font-size:14px;color:#797979">${M(670)}: </span>
    <select id="selectKingdom">
    </select>
    </div>
    <div><button id="castleRND">${M(52)}</button></div>
    <div><button id="clearMap">${M(51)}</button></div>
    </div>
    <div id="bigMap" style="display:none"></div>
    ${""}
    `;m("mapRules").onclick=Vd;let a=m("mapeditorinfotop");L("button",a,"box-shadow:none;background:url(nehhon/load.webp);opacity:.8;width:20px;height:26px;background-size:20px",1).onclick=()=>{var c=document.createElement("input");c.type="file";c.accept=".tzared";c.onchange=Wd;c.click()};L("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/dwn.webp);background-size:26px;opacity:.8;width:26px;height:26px",1).onclick=Xd;L("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/exit.webp);background-size:30px;opacity:.8;width:30px;height:28px;margin-left:auto").onclick=
Yd;let b=K("button",a,"\u25a4");a.insertBefore(b,m("brhSize")).onclick=()=>{let c=Qc("",1);O("div",c,678,"color:var(--color1);font-size:22px;margin-bottom:32px");let d=Zd(c),e=$d(c),g=K("div",c),h=ae(c,0,[624,598,586,873]),k,p,r;h.onchange=()=>{k=void 0;mb(g);if(1==h.value){g.className="unitProps";k=be([0,0,0,0,0,0,0],ce(d),g);K("span",g,M(676)+": ");let t=de(u=>p=u,g,0);t.style.margin="20px";p=2147483646;O("option",t,677).value=p;t.value=p}else 3==h.value&&(r=K("input",g),r.placeholder=M(747),r.maxLength=
20)};O("button",c,675,"margin-left:15px").onclick=()=>{let t=ab(bb);for(var u=0;u<e.length;u++)t[u+1024]=e[u].checked;if(1==h.value){for(u=0;u<k.length;u++)k[u]&&(t[u]=parseInt(k[u].value));t[7]=p}else if(3==h.value){for(u=0;u<r.value.length;u++)t[u]=r.value.charCodeAt(u);t[1023]=r.value.length}D[247](ce(d),ce(h));Db(c)}};m("castleRND").onclick=function(){D[133](0);ee.update=!0};m("clearMap").onclick=function(){D[133](1)};m("rndtrees").onclick=D[125];m("rndres").onclick=D[129];m("brushDensity").onchange=
function(){D[116](parseInt(m("brushDensity").value))};m("brushSize").onchange=function(){D[115](parseInt(m("brushSize").value))};m("brushMargin").onchange=function(){D[147](parseInt(m("brushMargin").value))};m("rndtrbutton").onclick=function(){D[3]();D[124]();ee.update=!0};m("brushDensity").onchange();m("brushSize").onchange();m("selectKingdom").onchange=function(){D[113](parseInt(this.value));if(this.value!=2**31-1){var c=D[132](parseInt(this.value)),d=c>>16&255,e=c>>8&255;c&=255}else c=e=d=0;this.style.background=
`rgba(${d},${e},${c},0.6)`};m("mapProps").onclick=function(){var c=Qc("",1);c.id="mapPropsWindow";c=K("div",c);fe=K("div",c);fe.id="edks";ge();var d=L("div",c,"margin-bottom:24px;display:flex;justify-content:center;gap:33px"),e=[48,he,737,()=>ie(),463,je,702,()=>ke()];for(let p=0;p<e.length;p+=2)O("button",d,e[p],"text-transform:uppercase").onclick=e[p+1];d=L("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;");O("p",
d,54);let g=K("input",d);g.onchange=()=>Kd(g.value,0);D[240](0);g.value=Od;O("p",d,56);let h=L("textarea",d,"width:694px;height:152px");h.onchange=()=>Kd(h.value,1);D[240](1);h.value=Od;O("p",d,57);let k=K("input",d);k.onchange=()=>Kd(k.value,2);D[240](2);k.value=Od;O("button",d,70,"display:block;margin-top:15px;margin-left:auto").onclick=()=>{let p=Qc("",1),r=D[250]();O("span",p,691,"line-height:31px");let t=le(p,v=>{v?(u.show(),u.value="",u.focus()):(R(u),D[250](1,0),u.value=0)},r);t.style.rc="right";
t.style.marginLeft="6px";let u=Ka(p,r,()=>{me(u);D[250](1,ce(u))},"number","display:block;margin:auto;margin-top:14px",9999999,0);r?u.focus():R(u)};d=L("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;margin-top:30px;width:max-content");K("span",d,M(457)+": ");e=K("input",d,"","display:block;margin-top:10px;background:none");e.onchange=ne;e.type="file";e.accept="image/*";K("div",d).id="mmimg";c=L("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;margin-top:30px;width:max-content");
O("span",c,721);c=K("input",c,"","display:block;margin-top:10px;background:none");c.onchange=oe;c.type="file";c.accept=".wmp"};Cd={name:M(26),X:Md.ta,T:["brhSize"]};Qd=[{name:M(535),onclick:()=>D[117](-1,!0),T:["brhSize"]}];new zd({X:[{name:M(730),onclick:()=>Ld(1),T:["brhSize","brhMargin"],X:[{name:M(729),onclick:()=>pe(D[110])}]},{onclick:()=>Ld(8),name:M(26).toUpperCase(),X:[Cd,{name:M(61),X:[{name:M(61),onclick:D[117],yb:7}],T:["brhSize","brhDnst","EDrndtree"]},{name:M(534),X:Qd,onclick:()=>{Qd.length=
1;let c=D[215]();for(let d=0;d<c;d++)Qd.put({name:d,onclick:()=>{D[216](d)}})}}]}],parent:"mapeditorinfo"})}else rd?(m("content").className="nw",m("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="popr"></div>
    <div id="resources">
    <div><span id="gold"></span></div>
    <div><span id="wood"></span></div>
    <div><span id="food"></span></div>
    <div><span id="stone"></span></div>
    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${B.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"> </span>
    <span id="tpGPU"> </span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menbak0">
    <div id="plavatar"></div>
    ${!Aa&&'<div id="kingdom"></div>'||""}
    </div>
    <div id="menbak1"></div>
    <div id="menbak1s"></div>

    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>

    <div id="topmenuvals">
    <div id="delunit">x</div>
    <div id="progressvalue"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    ${Aa&&'<div id="kingdom"></div>'||""}
    <div id="unitname" contenteditable="true"></div>
    </div>
    <div id="menbak2">
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    <button id="gameMenu">${M(47)}</button>
    </div>
    </div>`):(m("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="resources" style="display:block">
    <div id="goldr"></div>
    <div id="woodr"></div>
    <div id="foodr"></div>
    <div id="stoner"></div>
    <div id="popr"></div>
    <div id="resourcesbefore"></div>
    <div id="gold"></div>
    <div id="wood"></div>
    <div id="food"></div>
    <div id="stone"></div>

    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${B.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"></span>
    <span id="tpGPU"></span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menubefore"></div>
    <div id="menuafter"></div>
    <button id="gameMenu">${M(47)}</button>

    <div id="daynighticon"></div>
    <div id="topmenuvals">
    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>
    <div id="delunit">\ud83d\udec7</div>
    <div id="progressvalue"></div>
    <div id="kingdom"></div>
    <div id="unitname" contenteditable="true"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    </div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>`,m("content").className="dfth"),od=m("msgs1"),qe(),re=L("span",m("topinfo"),"display:none;font-size:8px;color:#00ffff"),!se&&B.l&&(setInterval(()=>{1==te&&(ue=performance.now(),G(28))},15E3),ue=performance.now(),G(28)),id={page:0,Ja:m("aleft"),Ma:m("aright"),Ab:m("stock")},window.actionMenu=id,id.Ja.onclick=function(){D[30](-1)},m("minimap"),jd=m("gold"),kd=m("wood"),ld=m("food"),md=m("stone"),m("resources"),nd=m("daynighticon"),id.Ma.onclick=function(){if("blocked"!=id.Ma.className)D[30](1)},
id.Mb=[],$c=m("attackmenu"),ad=m("defencemenu"),bd=m("levelmenu"),cd=m("kingdom"),dd=m("progressone"),ed=m("unitname"),fd=m("progressvalue"),ed.oninput=()=>{ve(ed.textContent)},m("delunit").onclick=function(){D[32](8,0)},m("menuctrl").onclick=function(){(Rd=!Rd)?(m("menuctrl").style.cssText="",m("menu").style.cssText="",m("resources").style.cssText=""):(m("menuctrl").style.left="0px",m("menuctrl").style.backgroundPosition="100px",R(m("menu")),370>window.innerHeight&&(m("resources").style.cssText=
"width:100%;left:0px"));D[167](Rd)},m("minimapb").onclick=function(){if(we=!we)Sd=Rd,Rd=!0,m("menuctrl").onclick(),m("minimapb").style.filter="drop-shadow(0px 0px 2px #fff)";else{Sd&&(Sd=0,m("menuctrl").onclick());P("bigMap");m("minimapb").style.cssText="";for(var a=document.getElementsByClassName("alertdmg"),b=0;b<a.length;b++)R(a[b])}},m("teamchat").onchange=function(){m("msginputGame").focus()},m("msgButton")&&(m("msgButton").onclick=xe),m("diplomacyButton").onclick=Oc,hd=m("bottominfo"),R(hd),
ye(),m("stock").onclick=D[31],m("gameMenu").onclick=ze;m("minimap").addEventListener("mousedown",Ae);m("bigMap").addEventListener("mousedown",Ae);m("bigMap").addEventListener("touchstart",Ae)}
function ye(){if(!Q){var a=4;if(rd){var b=window.innerHeight;240>b?a=1:295>b?a=2:344>b?a=3:700<b&&1020<window.innerWidth&&(a=window.innerHeight-m("menbak2").getBoundingClientRect().y-132,a=Math.floor((a+5-24)/53),24<a&&(a=24))}a*=2;if(!gd||gd.length!=a){b=m("orders");b.innerHTML&&(b.innerHTML="");gd=[];for(let c=0;c<a;c++){let d=K("button",b);d.ontouchstart=Be;d.ontouchend=Ce;d.onmousedown=De;d.onmouseup=Ee;d.ua=c;d.onmouseenter=Fe;d.onmouseout=Ge;gd[c]=d}D[189](a,!B.v)}}}var He,Ie;
function Be(a){Ie=a.changedTouches[0].pageX;He=a.changedTouches[0].pageY}function Ce(a){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY,d=Math.sign(c-He);q(d,c,He);48<d*(c-He)?(D[32](16,1),D[15](this.ua,0<d?2:0),D[32](16,0)):(55<Math.sign(b-Ie)*(b-Ie)&&(D[32](16,1),D[32](18,1),D[15](this.ua,0),D[32](16,0),D[32](18,0)),q(a))}window.clearleftar=function(){id.Ja.className=""};var Je;
function Ae(a){var b=D[47](),c=a.offsetX,d=a.offsetY;Je=this.getBoundingClientRect();b="touchstart"==a.type;if(0===a.button||b)document.addEventListener(b&&"touchend"||"mouseup",function k(){Ke=!1;document.removeEventListener("mouseup",k);document.removeEventListener("mousemove",Le)}),Ke=!0,Le(a),document.addEventListener(b&&"touchmove"||"mousemove",Le);else if(2===a.button){var e=parseInt(a.target.style.width),g=parseInt(a.target.style.height);b=D[47]();c=Math.floor(b*c/e*32);d=Math.floor(b*d/g*
32);D[22](c,d,2,0,!0,a.shiftKey)}}function Me(a,b,c,d,e,g,h,k,p,r,t,u,v,w){v=g?Me.Pb:m("guideTable").getElementsByTagName("tr")[v].getElementsByTagName("td")[u];var A="";g||(A+=`<span>${Lb[u]}</span>`);A+=`<div ${g&&"class='spchild'"||""}>
    <div class="prevIcon" style="background-position-y:${48*e}px"></div>
    <ul>
    <li class="guiTitle">${M(a)}</li>
    ${w&&`<li class="desc">${M(w)}</li>`||""}
    <li><span>${M(66)+":"}</span> ${k&&k+"<img src='nehhon/gold.gif'>"||""} ${p&&p+"<img src='nehhon/wood.gif'>"||""} ${r&&r+"<img src='nehhon/food.gif'>"||""}  ${t&&t+"<img src='nehhon/stone.gif'>"||""} </li>
    `;h&&1!=h||(A+=`
    <li><span>${M(4)}:</span> ${b}</li>`);h||(A+=`
    <li><span>${M(7)}:</span> ${c}</li>
    <li><span>${M(5)}:</span> ${d}</li>`);a=K("div",v,A+"</ul>\n    </div>\n    ");g||(Me.Pb=a)}window.insertInfo=Me;
async function Ne(){if(!m("guide1")){let k=await (await fetch(`nehhon/hl${({es:1,it:1,pt:1,pl:1,bg:1})[l.Ia]&&l.Ia||"en"}.json`)).json(),p=k.BASICTR;var a=Qc("",2);a.id="guide1";let r=K("h2",a,"","color:var(--color1);font-size:18px;height:46px;margin-top:0px;text-align:left;text-shadow:0px 0px 10px"),t=K("div",a);t.id="hxtrbtn";var b=K("div",a);b.id="helpbtn";let u=K("div",a);u.id="helpcnt";let v="tech unit building item order howto whatis hotkey".split(" ");var c=function(y){y=k[y];let x=K("dl",
u);for(let C in y){let I=y[C];q(I);let H=I.icon.split(",");K("dt",x,`${I.brief}`,`cursor:inherit;background-image:url(nehhon/H${H[0]}.webp); background-position:0px ${-48*(H[1]-1)}px`);K("dd",x,`${I.detail}`,"display:block")}},d=function(y){u.innerHTML="";u.scrollTop=0;for(var x=y.parentNode.children,C=0;C<x.length;C++)x[C].style.border=x[C]==y?"1px solid":""},e=function(y,x){d(x);y=k[y];x=K("dl",u);for(let C in y){let I=y[C],H=I.icon.split(",");K("dt",x,`${I.brief}`,`cursor:inherit;background-image:url(nehhon/H${H[0]}.webp); background-position:0px ${-48*
(H[1]-1)}px`);K("dd",x,`${I.detail.split("~ ")[1]}`,"display:block")}},g=function(y){u.scrollTop=0;if("UNITS"==y){var x=K("button",t,p.table);x.onclick=function(){d(this);Oe(u)};x.onclick();K("button",t,p.bonuses).onclick=function(){d(this);Pe(u)};K("button",t,p.bonuses_inv).onclick=function(){d(this);Pe(u,1)}}"BUILDINGS"==y&&(K("button",t,p.bonuses).onclick=function(){d(this);Pe(u,0,1)},K("button",t,p.bonuses_inv).onclick=function(){d(this);Pe(u,1,1)});var C="TECHNOLOGIES"==y;if(!C&&(x=K("button",
t,`${p.common}`),x.onclick=function(){e(y+" (Common)",this)},"UNITS"!=y))x.onclick();x=K("button",t,`${p.euro}`);x.onclick=function(){e(y+(C&&" (European)"||" (Euro)"),this)};K("button",t,`${p.arab}`).onclick=function(){e(y+" (Arabian)",this)};K("button",t,`${p.asia}`).onclick=function(){e(y+" (Asian)",this)};if(C)x.onclick()},h=function(y){y=k[y];let x=K("dl",u);for(let C in y){let I=y[C],H=K("dt",x,`\u2b9e ${I.brief}`,"padding-left:10px;height:auto"),N=K("dd",x,`${I.detail}`,"padding-left:10px;display:none;margin-top:4px;margin-left:21px;padding-bottom:6px");
H.onclick=()=>{"none"==N.style.display?N.show():R(N)}}};let w=[()=>g("TECHNOLOGIES"),()=>g("UNITS"),()=>g("BUILDINGS"),()=>c("ITEMS"),()=>c("COMMANDS"),()=>h("How to ..."),()=>h("What is ..."),function(){var y=k.HOTKEYS,x="<br>";for(let C in y)x+=`${C} \ud83e\udc26<span style="color:#fff1c6;margin-left:7px">${y[C]}</span><p>`;u.innerHTML=x}],A="";for(let y=0;y<v.length;y++)a=K("button",b,"",`background-position-y:${45*-y}px`),a.onclick=function(){let x=b.children;for(let C=0;C<x.length;C++)x[C]==
this?this.className="active":x[C].className="";A=p[v[y]];r.innerHTML=A;u.innerHTML="";t.innerHTML="";w[y]()},a.onmouseenter=function(){r.innerHTML=p[v[y]]},a.onmouseout=function(){r.innerHTML=A};b.children[1].onclick()}}window.showGuide=Ne;
async function Qe(){let a=Qc("",2);a.id="changelog";O("p",a,536,"font-size:29px;margin-top:0px;border-bottom:1px solid");let b=(await (await fetch("nehhon/changes.txt")).text()).split("##");for(let e=1;e<b.length;e++){let g=b[e].split("\n");var c=g[0].substr(0,3),d=g[0].split(" ")[1];d&&=" - "+d;K("span",a,"v"+c/10+(d||""));c=K("ul",a);for(d=1;d<g.length-1;d++)K("li",c,g[d])}}var Re,Se,Te,Ue,Ve,We;window.propsextend=function(a,b,c,d,e,g,h,k){Re=$b(a,b);Se=$b(c,d);Te=e;Ue=g;Ve=h;We=k};
var Xe,Ye,wf=[{i:856,m:a=>{Ze=a;$e!=af+Ze&&(bf=cf,$e=af+Ze,df=Date.now(),ef=tc)}},{i:857,m:a=>{af=-a;$e!=af+Ze&&(bf=cf,$e=af+Ze,df=Date.now(),ef=tc)}},{i:859,m:a=>{ff=a;gf!=ff+hf&&(bf=cf,gf=ff+hf,jf=Date.now(),kf=sc)}},{i:858,m:a=>{hf=-a;gf!=ff+hf&&(bf=cf,gf=ff+hf,jf=Date.now(),kf=sc)}},{i:862,m:a=>{(we=a)||P("bigMap")}},{i:863,m:a=>{a&&lf(1)}},{i:854,m:function(a){if(a||!mf)if(Ye=a,D[32](220,a),E){var b=nf;of[0]=a;T.queue.writeBuffer(b,0,of)}else z.uniform1i(z.getUniformLocation(U,"hideTrees"),a)}},
{i:446,m:a=>{a||Q||(a=parseInt(f.stdcolors)?0:1,f.stdcolors=a,rf(a))}},{i:47,m:a=>{if(a)if(m("playingMenu")&&"none"!=m("playingMenu").parentNode.parentNode.style.display)sf.onclick();else ze()}},{i:65,m:xe},{i:848,m:a=>{D[32](8,a)}},{i:463,m:a=>{D[32](9,a);tf||(a?Oc():m("diplomacy")&&Db(m("diplomacy")))}},{i:850,m:a=>{D[32](81,a)}},{i:853,m:a=>{D[32](32,a)}},{i:864,m:a=>{uf=a;D[32](17,a)}},{i:865,m:a=>{tf=a;D[32](16,a)}},{i:866,m:a=>{mf=a;D[32](18,a)}},{i:427,m:a=>{D[32](112,a)}},{i:462,m:a=>{D[32](113,
a)}},{i:512,m:a=>{D[32](114,a)}},{i:855,m:a=>{a&&(te=(te+1)%4,D[190](te),2==te?P("playersinfo"):3==te?(P("playersinfo"),P("topinfo")):(yd(m("playersinfo")),qd("topinfo")))}},{i:527,m:a=>{D[32](116,a)}},{i:851,m:a=>{D[32](117,a)}},{i:852,m:a=>{D[32](118,a)}},{i:528,m:a=>{D[32](119,a)}},{i:849,m:a=>{m("msgs1")&&!a&&("none"==m("msgs1").style.display?qd("msgs1"):(P("msgs1"),La("Chat hidden")))}},{i:513,m:a=>{D[32](121,a)}},{i:514,m:a=>{D[32](122,a)}},{i:515,m:a=>{D[32](123,a)}},{i:867,m:a=>{D[32](124,
a)}},{i:868,m:a=>{D[32](125,a)}},{i:872,m:a=>{Q||!B.v||B.l||a||(vf?(J(vf),vf=0,D[99]()):(vf=K("div",document.body,"\u23f8","position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center; pointer-events:none;font-size:44px;text-shadow:0px 0px 20px #000"),D[98]()))}}],vf,xf=a=>" "==a?"SPACE":"ARROWUP"==a?"\u2191":"ARROWDOWN"==a?"\u2193":"ARROWRIGHT"==a?"\u2192":"ARROWLEFT"==a?"\u2190":a,zf=()=>{let a=Qc("",1);Xe||(f.bshrct||(f.bshrct='{\n"basic":[\n"ARROWUP",\n"ARROWDOWN",\n"ARROWLEFT",\n"ARROWRIGHT",\n"X",\n"0",\n"<",\n"Z",\n"ESCAPE",\n"ENTER",\n"DELETE",\n"TAB",\n"Q",\n" ",\n"CONTROL",\n"SHIFT",\n"ALT",\n"F1",\n"F2",\n"F3",\n"F4",\n"F5",\n"F6",\n"F7",\n"F8",\n"F9",\n"F10",\n"F11",\n"F12"\n],"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"]}'),
Xe=JSON.parse(f.bshrct));var b=K("div",a);b.className="btrow";O("button",b,832).onclick=()=>{yf(h=>{Xe=JSON.parse(h.target.result);Db(a);zf()})};O("button",b,8).onclick=()=>{var h=new Blob([JSON.stringify(Xe)],{type:"text"});Af(h,"control.tzcnt")};O("button",b,542).onclick=()=>{Xe=JSON.parse('{\n"basic":[\n"ARROWUP",\n"ARROWDOWN",\n"ARROWLEFT",\n"ARROWRIGHT",\n"X",\n"0",\n"<",\n"Z",\n"ESCAPE",\n"ENTER",\n"DELETE",\n"TAB",\n"Q",\n" ",\n"CONTROL",\n"SHIFT",\n"ALT",\n"F1",\n"F2",\n"F3",\n"F4",\n"F5",\n"F6",\n"F7",\n"F8",\n"F9",\n"F10",\n"F11",\n"F12"\n],"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"]}');
Db(a);zf()};a.children[0].addEventListener("click",()=>{f.bshrct=JSON.stringify(Xe)});var c=K("div",a);c.id="keys0";b=K("div",a);b.id="keys";let d=Xe.basic;var e=0;for(let h of wf){h.id=e++;K("div",c,M(h.i).toLowerCase());let k=K("span",c,xf(d[h.id]));h.J=k;k.onclick=()=>{let p=K("div",document.body,M(846),"position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),r=t=>{if(0>"123456789".split("").indexOf(t.key)){t=t.key.toUpperCase();
for(let u of wf)d[u.id]==t&&(d[u.id]="",u.J.textContent="");d[h.id]=t;k.textContent=xf(t)}J(p);document.removeEventListener("keyup",r)};document.addEventListener("keyup",r)}}for(let h=0,k=D[261]();h<k;h++){D[260](h);var g=Bf.name;if(Bf.Ha||!g||109==g||844==g||845==g)continue;c=document.createElement("div");e=K("div",c);Cf(e);let p=Df[Bf.type]||"";p&&=M(p)+" -> ";g=p+M(g);K("div",e,g);let r=K("span",c),t=Xe[h];if(t)for(let v of t){let w=K("div",r);K("span",w,v);K("div",w,"\u00d7").onclick=()=>{t.splice(t.indexOf(v),
1);J(w)}}let u=K("div",r,"+","background:#00ff0021;font-size:21px;color:#00df00;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{let v=K("div",document.body,M(846),"position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),w=A=>{q(A);let y=A.key.toUpperCase();if((!t||0>t.indexOf(y))&&0>"Tab Shift Control Alt ContextMenu 1 2 3 4 5 6 7 8 9 0 Meta".split(" ").indexOf(A.key)){let x=document.createElement("div");r.insertBefore(x,
u);K("span",x,A.key);K("div",x,"\u00d7").onclick=()=>{t.splice(t.indexOf(A.key),1);J(x)};t||(t=[],Xe[h]=t);t.put(y)}J(v);document.removeEventListener("keyup",w)};document.addEventListener("keyup",w)};Ef(c,b,g)}};
window.writeProps=function(a,b,c,d,e,g,h,k,p,r,t,u,v,w,A,y){let x=hd;if(k){let S=K("span",x,M(67)+": ");S.className="red";var C=bc(D[5](),k);for(let za=0;za<k;za+=2){O("span",S,C[za]);let lb=K("span",S);lb.className="icd1";Ff(lb,48*C[za+1])}}2!=r||t||O("span",x,834,"background:#ff000080;padding:4px");(k=4!=u&&Df[Ue]||"")&&(k="<span style='color:#b5953d'>"+M(k)+" -></span> ");g&&K("span",x,k+M(g),"color:var(--color1)");Ve&&(g=L("div",x,"margin:6px 0px"),g.className="dataIcon",Ff(g,-48*Ve));if(6>u){g=
L("div",x,"width:100%");if(4>u){k=L("div",g,"border:2px solid #141414;padding:6px;background:#00000033");if(0==u)K("span",k,Gf(0,1)[y]+" -> "),K("span",k,2147483647==v?M(40):"+"+v,"color:#0f0");else if(1==u||2==u){O("div",k,765);y=2==u?"%":"";v=[{h:1,id:v},{h:3,id:w},{h:-1,id:A},{h:6,id:p}];for(var I of v)I.id&&(v=L("div",k,"display:flex;gap:3px;align-items:center;margin-top:7px"),L("div",v,`background:url(nehhon/icons2.webp) 0px ${-20*I.h}px;width:20px;height:20px`),K("span",v,"+"+I.id+y,"color:#0f0"))}else 3==
u&&(K("span",k,M(767)+" -> "),K("span",k,100-v+"%","color:#0f0"));if(Se.length){I=L("div",k);I.className="nxtsh";for(var H of Se)D[196](H),We==V.race?(v=document.createElement("div"),I.prepend(v)):v=K("div",I),v.className="dataIcon",Ff(v,V.D/2)}}if(Re.length){K("div",g,M(770)+":","margin-top:15px;color:#0f0");H=L("div",g);H.className="nxtsh";for(let S of Re)D[260](S),I=L("span",H),Cf(I)}if(Re.length||5!=u)h=0}h&&O("span",x,h,"font-size:11px;max-width:232px");if(a||b||c||d||p)h="",a&&(h+=a+"<img src='nehhon/gold.gif' /> "),
b&&(h+=b+"<img src='nehhon/wood.gif' /> "),c&&(h+=c+"<img src='nehhon/food.gif' /> "),d&&(h+=d+"<img src='nehhon/stone.gif' /> "),p&&(h+=p+"<img src='nehhon/mana.webp' /> "),a=K("span",x,h,"display:flex;align-items:center;gap:4px;border-top:2px solid rgba(255, 215, 93, 0.18);padding-top:5px;width:100%"),Te&&(a=L("div",a,"display:flex;gap:3px;align-items:center"),L("div",a,"background:url(nehhon/icons2.webp) 0px -150px;width:15px;height:15px;background-size:100%"),K("span",a,Te+"s"));let N;if(a=Xe[e]){D[272]();
a:for(let S of a)for(a=0;3>a;a++)for(b=0;b<Hf.length;b++)if(c=Hf[b],(d=Xe[c])&&d[a]==S)if(c==e){N=S;break a}else continue a}N&&(K("span",O("span",x,841,"color:#858585;margin-top:8px;font-size:9px;align-self:end"),N).className="shotcut")};var If;function Fe(){if(!Aa){var a=this.ua;D[40](a);hd.innerHTML&&(hd.style.cssText="");If=a}}function Ge(){D[151](this.ua);R(hd);If=void 0;hd.innerHTML=""}function Ee(){}function De(a){D[15](this.ua,a.button)}let Jf;
window.qmenu=function(a,b,c,d,e,g,h,k,p,r,t,u){if(!Q)if(g=m("dataMenu"),void 0==a)g&&(Db(g),clearInterval(Jf),Jf=0);else{let v;g?(v=g,v.innerHTML=""):(v=Qc("",0,"font-size:15px"),v.id="dataMenu",Jf&&clearInterval(Jf),Jf=setInterval(()=>D[238](1),1E3));O("div",v,574,"margin-bottom:16px;color:var(--color1)");g=["gold","wood","food","stone","pop"];a=[a,b,c+e,d,h];b=L("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");
for(c=0;5>c;c++)K("div",b,a[c],"min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+`background:url(${"nehhon/"+g[c]}.gif) no-repeat;`);O("div",v,575,"margin-top:32px;margin-bottom:16px;color:var(--color1)");b=L("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");a=[k,p,r,t];for(k=0;4>k;k++)K("div",b,Kf(a[k]/40,2)+"/s","min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+
`background: url(${"nehhon/"+g[k]}.gif) no-repeat;`);O("div",v,650,"margin-top:36px;margin-bottom:16px;color:var(--color1)");k=ac();p=L("div",v,"display: grid;\n    grid-template-columns: repeat(6,auto);\n    justify-items: center;\n    align-items: center;\n        padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");K("div",p);K("div",p);for(r=0;4>r;r++)K("img",p).src=`${"nehhon/"+g[r]}.gif`;for(g=0;g<u;g+=7)for(r=
g%14?"color:#ffe9a5":"",L("div",p,`width:4px;background:${Tc(k[g])};border-radius:1px;height:16px;`),K("div",p,Sc(k[g+2],k[g+1]),"margin-left:3px;min-width:152px;justify-self:left;"+r),t=0;4>t;t++)K("div",p,Lf(k[g+3+t]),"text-align:center;min-width:68px;padding:6px 4px;"+r)}};function O(a,b,c,d){return K(a,b,M(c),d)}function L(a,b,c,d){return K(a,b,"",c,d)}var Ke;function Mf(){history.pushState("",document.title,window.location.pathname)}
function Nf(a){B.wc||B.v||(yd(gc),Of(),this.parentNode&&(this.parentNode.style.display="none"),B.l=0,5!=a&&(location.hash="",setTimeout(Mf,200)))}var Pf=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1];
window.waitingList=function(){if(m("waitList")){var a=ab(bb),b=D[28]();m("waitList").innerHTML="";for(var c=`<h1 style="font-size: 22px;margin-bottom: 32px;">${M(68)}</h1>
    <table style="font-size:16px;margin:auto;padding-top:12px"><tbody>`,d=1;d<b;d++)if(55==a[3*d]){var e=D[29](d);e=Gd(Hd(e,20));c+=`<tr><td>${e}</td><td>${a[3*d+1]}%</td></tr>`}m("waitList").innerHTML+=c+"</tbody></table>";m("waitList").style.textAlign="center";K("button",m("waitList"),M(91),"font-size:18px;margin-top:50px;").onclick=Yd}};window.waitlistsetup=function(){Qc("").id="waitList"};
function Jc(){if(Q||1!=f.nightcycle)c=new Float32Array([1,1,1,1]);else{var a=(.025*B.Y/B.Ra*24+B.Sa)%24,b=~~a;a-=b;nd&&(nd.style.backgroundPosition="0 -"+36*b+"px");var c=new Float32Array([Pf[4*b],Pf[4*b+1],Pf[4*b+2],Pf[4*b+3]]);b=(b+1)%24;c[0]+=(-c[0]+Pf[4*b])*a;c[1]+=(-c[1]+Pf[4*b+1])*a;c[2]+=(-c[2]+Pf[4*b+2])*a;c[3]+=(-c[3]+Pf[4*b+3])*a}b=c;E?T.queue.writeBuffer(Qf,0,b):(z.useProgram(W),z.uniform4fv(Rf,b),z.useProgram(U),z.uniform4fv(Sf,b))}var sc=0,tc=0,gf=0,$e=0,bf,df,ef,jf,kf;
function Tf(a,b,c){var d=uc;if(1==f.unlimitedZoom||Q)sc=-a,tc=-b;else{var e=window.innerWidth,g=window.innerHeight,h=D[47](),k=Aa?0:d*l.R/32;a/=32;b/=32;var p=d*e/32;d=d*g/32;e=e/32*Y;g=g/32*Y;var r=a+.5*(e-p),t=b+.5*(g-d);e<h&&g<h&&(r<-k?a=.5*-(e-p)-k:r+p>h&&(a=h-p-(e-p)/2),0>t?b=.5*-(g-d):t+d>h&&(b=h-d-(g-d)/2));sc=32*-a;tc=32*-b}if(!c)D[25](0,0,0)}
function Le(a){if("touchmove"==a.type||"touchstart"==a.type)if(a.target==m("bigMap"))a=a.targetTouches[0];else return;var b=a.target==m("bigMap")?23:0,c=D[47](),d=a.pageX-Je.x-b;a=a.pageY-Je.y-b;var e=Je.width-2*b;b=Je.height-2*b;var g=Uf.height*b/(32*c);d-=Uf.width*e/(32*c)*.5;d=Math.round(.5+d*c/e);a=Math.round(.5+(a-.5*g)*c/b);Tf(32*d,32*a);0==Ke&&document.removeEventListener("mousemove",Le)}var uf=0,tf=0,mf,Vf={};function xe(a){if(a&&!Q&&!uf){let c=!1;if(!m("enterwindow")){var b=Qc(`
            <h2 id="sendMessageH2">${M(65)}</h2>
            <input id="msginputGame" />
           
            `,2,"",1);b.parentNode.parentNode.className+=" nobackdrop";b.id="enterwindow";c=!0;let d=K("button",b,"GIF");d.className="gif";d.onclick=()=>{R(m("enterwindow").parentNode.parentNode);Wf()};K("p",b,`${M(405)} <label class="container" style="margin-left:6px;display:inline"><input id="teamchat" type="checkbox"><span class="checkmark"></span></label>`,"text-align:right;color:#c79d45")}b=m("enterwindow").parentNode.parentNode;""!=b.style.cssText||c?(Aa&&m("msgButton")&&(m("msgButton").style.filter=
"drop-shadow(0px 0px 2px #fff)"),b.style.cssText="",m("msginputGame").focus()):(Xf(),R(b),Aa&&m("msgButton")&&(m("msgButton").style.cssText=""))}if(uf)D[32](13,a)}var af=0,Ze=0,hf=0,ff=0,te=0,cf=0,sf;document.oncontextmenu=function(a){return a&&"INPUT"==a.target.nodeName?!0:!1};
function Yf(){if(!Q){m("attackmenu")&&(P("magicworkshopmenu"),P("tradingmenu"),P("attackmenu"),P("defencemenu"),P("levelmenu"),P("progressone"),P("manamenu"),P("manamenu1"),P("progressmana"),P("plavatar"),ed.innerHTML="",$c.innerHTML="",ad.innerHTML="",m("manamenu").innerHTML="",bd.innerHTML="",cd.innerHTML="",fd.innerHTML="",dd.value="",fd.maxLength="");Aa&&(m("delunit").style.display="none");for(let a=0;a<gd.length;gd[a++].innerHTML="");Zf()}}window.menuDefect=Yf;var $f;
function ag(a,b){bg&&(K("li",bg,a,"color:#"+b),bg.scrollTop=bg.scrollHeight)}window.lddsts=function(){let a=K("button",document.body,"STATS","\n    position: fixed;\n    background: #000;\n    padding: 8px;\n    font-size: 20px;\n    width: 209px;\n    text-align: left;\n    border-left: 3px solid #00ff00 !important;\n    top: 66px;\n    right: 0px;\n    box-shadow: 0px 0px 20px #9c0000;"),b=cg();a.onclick=function(){b.parentNode.parentNode.style.display=""}};
function Kf(a,b,c){a=Math.round(a*10**b)/10**b;if(c)return a;a=a.toString().split(".");return a[0]+(a[1]&&"<strong>.</strong>"+a[1]||"")}function Lf(a,b){return 1E6<=a?Kf(a/1E6,1,b)+"M":1E5<=a?Kf(a/1E3,0,b)+"k":1E3<=a?Kf(a/1E3,1,b)+"k":a}function dg(a,b){let c;a?c=a&&eg[a]?eg[a].avatar||113:113:b&&(c=b==D[112]()?f.avatar||113:D[185](b));c||=113;return`nehhon/Q${c}.webp`}var fg;function gg(){var a=m("stbutts").children;for(let b=0;b<a.length;b++)a[b].className=""}var hg;
function ig(a){gg();J(m("auxtab"));m("stats").style.display="table";a.className="a"}var jg;function Ff(a,b){a.style.backgroundPositionY=b+"px"}
function Pe(a,b,c){a=K("div",a);let d=D[90]();a.id="bonustable";let e=ac();for(let k=0;k<d;k++){let p=D[199](k,b,!c);if(!p)continue;D[196](k);var g=K("div",a);g.dataset.title=M(V.name);kg(g,V.D);g=K("div",a);let r={};for(let t=0;t<p;t+=2){let u=e[t];var h=e[t+1];r[h]||(r[h]=K("div",K("div",g,"<div>x"+h/100+"</div>",!b&&100>h||b&&100<h?"color:red":"")));h=K("div",r[h]);D[196](u);h.dataset.title=M(V.name);kg(h,V.D)}}}
function Oe(a){let b=D[198](),c=ac(),d=K("table",a);d.id="unittable";var e=[{name:""},{y:18},{y:1},{y:3},{y:6},{y:13},{y:12},{y:17},{y:10},{name:M(559)},{name:M(560)},{name:M(561)},{name:M(562)}];a=e.length;var g=K("tr",K("thead",d));for(let k=0;k<e.length;k++){let p=K("td",g,e[k].name);e[k].y&&Ff(K("div",p),-20*e[k].y);p.onclick=()=>{var r=k,t=p,u,v=0;var w=!0;var A=1;for(y of t.parentNode.children)y.dataset.order&&(y.dataset.order="");for(q(A);w;){w=!1;var y=d.rows;for(u=1;u<y.length-1;u++){var x=
!1;var C=y[u].getElementsByTagName("TD")[r];var I=y[u+1].getElementsByTagName("TD")[r];if(0==A){if(C.U>I.U){x=!0;break}}else if(1==A&&C.U<I.U){x=!0;break}}x?(y[u].parentNode.insertBefore(y[u+1],y[u]),w=!0,v++):0==v&&1==A&&(A=0,w=!0)}t.dataset.order=A?"\u25b2":"\u25bc"}}e=K("tbody",d);for(g=0;g<b;g+=a){let k=K("tr",e);for(let p=0;p<a;p++){let r=K("td",k);var h=c[g+p];0==p?(D[196](h),h=M(V.name),r.dataset.title=h,kg(r,V.D),r.U=h.charCodeAt(1)+256*h.charCodeAt(0)):(10==p&&(h/=10),r.U=h,r.innerHTML=h)}}}
function lg(a,b,c){b=document.createElementNS("http://www.w3.org/2000/svg",b);for(let d in c)b.setAttribute(d,c[d]);a.appendChild(b);return b}
function mg(a,b,c,d,e){var g=ng;let h=b.length/c;var k=0;let p=1024/(h-1);var r=6*p,t=Math.ceil(70/r);for(var u=0;u<b.length;u++){var v=b[u];v>k&&(k=v)}u=1E3<k?100:10;u=(k=Math.ceil(k/u)*u)?633/k:0;v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.style.width="1204px";v.style.height="693px";v.setAttribute("viewBox","-90 -30 1204 693");v.setAttribute("width","100%");v.setAttribute("height","100%");a.appendChild(v);K("style",v,"\n.p>line{\n    stroke-width:2;\n    opacity:0.5;\n    pointer-events: none;\n}\n.p>line:hover{\n    opacity:0.5\n}\ncircle{\n    stroke-width:12;\n    stroke:#ffffff00;\n    r:1.5\n}\n.p>text{\n    display:none;\n    text-shadow:0px 0px 3px #000;\n    fill:#52ffba\n}\ntext{\n    stroke:none;\n    font-size:16px;\n}\n\ng:not(.op0) .p:hover > text{\n    display:block;\n}\n.op0{\n    opacity:.15;\n\n}\n.stk>.p>line{\n    stroke-width:3;\n    opacity:1\n}\n.stk>.p>circle{\n    r:1;\n    opacity:1\n}\n");
lg(v,"line",{stroke:"#fff",x1:0,x2:0,y1:0,y2:633,"stroke-width":1,opacity:.75});lg(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:633,y2:633,"stroke-width":1,opacity:.75});for(a=0;5>=a;a++){var w=633-126.6*a;a&&lg(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:w,y2:w,"stroke-width":1,opacity:.25});lg(v,"text",{x:-8,y:w,fill:"#fff","text-anchor":"end","alignment-baseline":"middle"}).innerHTML=Lf(Math.round(a/5*k),1)}for(let x=1,C=Math.ceil(10*h/60);x<C;x++)k=x*r,a=0==x%t,lg(v,"line",{stroke:"#fff",x1:k,x2:k,y1:0,
y2:633,"stroke-width":1,opacity:a?.25:.1}),a&&(lg(v,"text",{x:k,y:655,fill:"#fff","text-anchor":"middle"}).innerHTML=x+":00");for(let x=0;x<c;x++)for(r=lg(v,"g"),t=g[x],r.onmouseover=()=>{ng[x].style.color="#0f0"},r.onmouseout=()=>{ng[x].style.color=""},t.Ya=r,t.la&&r.setAttribute("class","op0"),t=0;t<h&&t<e;t++){k=x*h+t;a=633-b[k]*u;w=t*p;let C=lg(r,"g");C.setAttribute("class","p");var A=d[x*jg+jg-1],y=A>>16&255;let I=A>>8&255;A&=255;y||=1;I||=1;A||=1;let H=(y+I+A)/3;90>H&&(y*=90/H,I*=90/H,A*=90/
H);255<y&&(y=255);255<I&&(I=255);255<A&&(A=255);y=`rgb(${y},${I},${A})`;lg(C,"text",{x:w,y:a-15,"text-anchor":"middle"}).innerHTML=Math.round(b[k]);lg(C,"circle",{cx:w,cy:a,fill:y,opacity:t%6?0:1});t<h-1&&t<e-1&&lg(C,"line",{x1:w,x2:w+p,y1:a,y2:633-b[k+1]*u,stroke:y})}}
function cg(){var a=jg=55+(og?2:0),b=D[28]();fg=new Zb(D[184](a),b*a);var c=ab(fg),d=Ab("",1,"",1);d.id="stsp";d.parentNode.style.cssText="vertical-align:top;padding-top:56px";R(d.parentNode.parentNode);var e=c[a-3],g=c[a-5],h=K("div",d);K("img",h,"","display:inline-block;vertical-align:middle;margin-right:16px;box-shadow:0px 0px 78px red;border:1px solid #ff000070").src=dg(e,g);g=K("div",h,"","display:inline-block;vertical-align:middle;");K("span",g,"MVP","display:block;font-size:20px;color:#ffffffb3;");
K("span",g,Sc(e,c[a-2]),"font-size:30px;text-shadow:0px 0px 20px red");e=K("div",d);e.id="stbutts";K("button",e,M(466)).onclick=function(){pg(this,8,1)};K("button",e,M(467)).onclick=function(){pg(this,8,0,1)};K("button",e,M(465)).onclick=function(){pg(this,9,0,1)};K("br",e);g=K("button",e,M(468));g.className="a";g.onclick=function(){ig(this);m("stats").className=""};K("button",e,M(470)).onclick=function(){m("stats").style.minWidth=(hg||m("stats").getBoundingClientRect().width)+"px";ig(this);m("stats").className=
"a"};K("button",e,M(522)).onclick=function(){qg(this)};K("button",e,M(469)).onclick=function(){pg(this,7,0,0,1,!0)};K("button",e,M(521)).onclick=function(){pg(this,7,0,1,0,!0)};K("button",e,M(452)).onclick=function(){pg(this,6,1,1)};K("button",e,M(453)).onclick=function(){pg(this,10,1,0)};K("button",e,M(464)).onclick=function(){pg(this,9,1)};e=K("table",d);e.id="stats";var k=K("thead",e);g=K("tbody",e);var p=[{name:478},{name:21},{name:454},{name:455,Fa:1},{name:464},{name:452,sub:[{name:58},{name:59}]},
{name:453,Fa:1,sub:[{name:58},{name:59}]},{h:"gold.gif",sub:[{h:"gold.gif"},{h:"trade.gif"}]},{h:"wood.gif",sub:[{h:"wood.gif"},{h:"trade.gif"}]},{h:"food.gif",sub:[{h:"food.gif"},{h:"milk.gif"},{h:"food1.gif"},{h:"fish.gif"},{h:"trade.gif"}]},{h:"stone.gif",sub:[{h:"stone.gif"},{h:"trade.gif"}]},{h:"allicons.png",y:96,aa:48,title:477},{h:"icons2.webp",y:-5,aa:20,title:471},{h:"icons2.webp",y:-6,aa:20,title:476},{h:"icons2.webp",y:4,aa:20,title:479},{name:474},{name:475,Fa:1},{name:472},{h:"sgold.webp",
title:473},{h:"swood.webp",title:473},{h:"sfood.webp",title:473},{h:"sstone.webp",title:473},{h:"allicons.png",y:95,aa:48,title:232}];og&&(p.unshift({name:732}),p.unshift({name:530}));h={};e={};var r=K("tr",k);k=K("tr",k);K("th",r,"","background:none;border:none;min-width:0px;").rowSpan=2;K("th",r,"","background:none;border:none").rowSpan=2;K("th",r,"","background:none").rowSpan=2;for(var t=0;t<p.length;t++){var u=p[t],v=u.name&&M(u.name).split(" ").join("\n")||u.y&&`<span style="background:url(nehhon/${u.h}) 0px ${u.y*
u.aa}px;width:${u.w||u.aa}px;height:${u.aa}px"></span>`||`<img src="${"nehhon/"+u.h}">`;u.Fa&&(e[r.children.length]=1);v=K("th",r,v,t+1==p.length?"width:100%":"");2>t&&og&&(K("div",v,"?","position:absolute;right:0px;left:0px;font-size:9px").dataset.title=t?M(734):M(733));u.title&&(v.dataset.title=M(u.title));if(u.sub){var w=K("td",k,"<- ->");w.onclick=rg;w.bc=r.children.length-1;w.kb=u.sub.length+1;w.$=1;w.nc=v;for(v=0;v<u.sub.length;v++)w=u.sub[v],h[r.children.length+-3]=1,u.Fa&&(e[r.children.length]=
1),K("th",r,w.name&&M(w.name)||`<img src="${"nehhon/"+w.h}">`,"display:none")}else v.rowSpan=2}p=1+(og?2:0);for(k=0;k<b-1;k++)for(t=K("tr",g),K("td",t,`<p>${k+1}</p>`),K("td",t,`<div style="background:${Tc(c[k*a+a-1])}"></div>`+Sc(c[k*a+a-3],c[k*a+a-2])),K("td",t,`<aside style="background-position-y:-${20*c[k*a+a-4]}px"></aside>`).className="stsrace",u=0;u<r.children.length+-3;u++)v=Lf(c[u+k*a]),u!=p||v||(v="\ud83d\udec7"),w=K("td",t,v,h[u]&&"display:none"||""),u==p&&(w.style.color=D[256](c[u+k*a])?
"#0f0":"#f00"),og&&!u&&(w.style.color="#0f0"),w.xb=c[u+k*a],c[u+k*a]!=v&&u!=p&&(w.dataset.title=w.xb);a=m("stats").children[0].children[0].children.length;--b;c=m("stats").children[1].getElementsByTagName("td");for(g=3+(og?1:0);g<a;g++){if(og&&6==g||!og&&4==g)continue;h=0;let A,y;r=Infinity;for(p=0;p<b;p++)k=c[p*a+g],t=k.xb,t>h&&(h=t,A=k),t<r&&(r=t,y=k);p=e[g];h&&(A.style.background=p?"#ff000040":"#00ff0040");(r||h)&&A!=y&&(y.style.background=p?"#00ff0040":"#ff000040")}return d}var ng;
function qg(a){gg();J(m("auxtab"));var b=K("div",m("stats").parentNode,"","width:1250px");b.id="auxtab";P("stats");a.className="a";let c=ab(fg),d=D[28]()-1;var e=[M(478),M(464),M(454),M(455),"Gold gathered","Wood gathered","Food gathered","Stone gathered","Population","Peasants",M(477),M(16),M(17),M(18),M(19)];a=K("div",b,"","white-space:break-spaces;margin-top:30px;text-align:left");let g=K("select",b,"","margin:auto;margin-top:15px;display:block;text-transform:uppercase");var h=K("span",b,"","float:right;margin-top:-25px;");
let k=c[0*jg+jg-13]/15,p=Math.floor(k/6),r=sg(h,k);r.oninput=function(){let v=parseInt(this.value);10*v/60>=p&&(v=k-1);this.H.innerHTML=Fc(1E4*v)};h=60*p/10;r.max=h;r.min=6;r.step=6;r.value=h;r.oninput();h=0;for(var t of e)K("option",g,t).value=h,h++;for(t=0;t<d;t++)e=K("span",a,Sc(c[t*jg+jg-3],c[t*jg+jg-2]),"cursor:url(nehhon/hand.gif),default;display:inline-block;background:#ffffff14;padding:2px 4px 2px 6px;margin-right:7px;margin-bottom:7px;border-left:4px solid "+Tc(c[t*jg+jg-1])),e.onclick=tg,
e.onmouseenter=ug,e.onmouseout=vg;let u=K("div",b,"","text-align:center");ng=a.children;g.onchange=function(){let v=parseInt(this.value),w=parseInt(r.value)+1;r.value==r.max&&(w=k);let A=new Uint32Array(w*d);for(let y=0;y<d;y++){let x=ab(new Zb(c[y*jg+jg-11],15*w));for(let C=0;C<w;C++)A[C+y*w]=x[15*C+v]}u.innerHTML="";mg(u,A,d,c,k)};g.onchange();r.addEventListener("change",()=>g.onchange());for(b=0;b<d;b++)if(3<c[b*jg+jg-12]&&c[b*jg+jg-5]!=D[112]())ng[b].onclick()}
function ug(){this.Ya.setAttribute("class","stk")}function vg(){this.Ya.setAttribute("class",this.la?"op0":"")}function tg(a){this.la=!this.la;this.style.opacity=this.la?"0.3":"";this.Ya.setAttribute("class",this.la?"op0":"");if(a)this.onmouseenter()}
function pg(a,b,c,d,e,g){let h=8!=b&&!g&&6!=b&&10!=b,k=D[90]();hg||=1200;var p=ab(fg);gg();J(m("auxtab"));var r=K("table",m("stats").parentNode,"","width:"+hg+"px"),t=K("tbody",r);t.className="tbl2";r.id="auxtab";r=m("stats").children[1].getElementsByTagName("tr");for(var u=0;u<r.length;u++){var v=K("tr",t);K("img",K("td",v)).src=dg(p[u*jg+jg-3],p[u*jg+jg-5]);v.appendChild(r[u].children[1].cloneNode(1))}p=t.children;a.className="a";P("stats");a=ab(fg);for(t=0;t<p.length;t++){r=ab(new Zb(a[t*jg+jg-
b],k));u=K("td",p[t]);v=0;var w=void 0;let x={};do{var A=-1;if(g)for(w=0;w<k;w++)r[w]&&(r[w]<r[A]||0>A)&&!x[w]&&(A=w);else for(w=0;w<k;w++)(r[w]>r[A]||0>A)&&!x[w]&&(A=w);w=r[A];let C=r[A];if(!C)break;x[A]=1;var y=D[191](A,c,d,e);if(y){let I=g?Fc(C):Lf(C);y=K("span",u,`<span>${I}</span>`,(0>y?"background:url(nehhon/iconunits.webp);":"")+`background-position-y:${y}px`);if(g){if(A=D[192](A))y.dataset.title=I+" -> "+Fc(C+A)}else I!=C&&(y.dataset.title=C);h&&(v+=C)}}while(w);h&&K("td",p[t],"\u03a3 = "+
v,"color:var(--color1)")}}function rg(){const a=D[28](),b=m("stats").children[0].children[0].children;let c=b.length;const d=m("stats").children[1].getElementsByTagName("td");let e=this.$?"":"none";this.innerHTML=this.$&&"-> &nbsp; <-"||"<- ->";this.colSpan=this.$?this.kb-1:1;let g=this.bc;for(let h=0;h<this.kb;h++){h?b[g+h].style.display=e:this.$?R(b[g+h]):b[g+h].style.display="";for(let k=0;k<a-1;k++)h?d[k*c+g+h].style.display=e:this.$?R(d[k*c+g+h]):d[k*c+g+h].style.display=""}this.$=!this.$}
var wg,xg;window.popAlert=function(a){if(4==a){if(wg&&8E3>Date.now()-wg)return;wg=Date.now()}else{if(xg&&30>Date.now()-xg)return;xg=Date.now()}if(a=m(["gold","wood","food","stone","pop"][a]))a=a.getBoundingClientRect(),a=K("div",document.body,"",`left:${a.x+a.width/2}px;top:${a.y}px;`),a.className="alertpop",setTimeout(J,3E3,a)};
window.dmgAlert=function(a,b){var c=l.V,d=l.W;jc("attack");Aa&&(we||(setTimeout(function(){m("minimapb").style.cssText=""},8E3),m("minimapb").style.cssText="animation:dmganimdrop .15s alternate infinite;"),yg=zg=c=Ag(),d=(window.innerHeight-c)/2,c=(window.innerWidth-c)/2,"vibrate"in navigator&&window.navigator.vibrate([200,50,200,50,200]),q(c,d));const e=D[47]();a=K("div",document.body,"",`left:${~~(a*zg/e)+c}px;top:${~~(b*zg/e)+d}px`);a.className="alertdmg";Aa&&!we&&R(a);setTimeout(J,12E3,a)};
window.locationAlert=function(a,b,c,d,e){const g=D[47]();if(!(0>a||0>b||a>=g||b>=g||9<document.body.getElementsByClassName("alertloc").length||Aa)){jc("chat%20location");var h=l.V,k=l.W;Bg(0,1,c,0,d,e);a=K("div",document.body,"",`left:${~~(a*zg/g)+h}px;top:${~~(b*zg/g)+k}px`);a.className="alertloc";setTimeout(J,1E4,a)}};document.onkeydown=function(a){return a.ctrlKey&&a.shiftKey?!1:!(-1<[116,115,123].indexOf(a.keyCode))};const Cg=[9,112,113,114,115,116,117,118,119,120,121,123];
function Dg(){for(var a=Object.keys(Vf),b=0;b<a.length;b++)Vf[a[b]]&&Eg({keyCode:a[b],key:Vf[a[b]]})}var Fg=(a,b)=>{if(a&&(a=Xe.basic.indexOf(a.toUpperCase()),-1<a))return wf[a].m(b),!0};
function Gg(a){var b=a.keyCode,c=a.target==m("msginputGame");if(!(a.key&&Hg&&Xe.basic[8]!=a.key.toUpperCase()||"INPUT"==a.target.tagName||"TEXTAREA"==a.target.tagName||"true"==a.target.contentEditable)||c)if(c&&9==b&&(m("teamchat").checked=!m("teamchat").checked),(a.ctrlKey&&!c||a.altKey||0<=Cg.indexOf(b))&&a.preventDefault(),!(!B.v||13!=b&&m("enterwindow")&&"displayblock"==m("enterwindow").className||c&&13!=b||(Vf[b]=a.key,Fg(a.key,1)))){D[272]();a=a.key.toUpperCase();for(c=0;3>c;c++)for(let d=0;d<
Hf.length;d++){let e=Xe[Hf[d]];if(e&&e[c]==a)return D[15](d,2147483647)}48<=b&&57>=b?D&&D[32](b,!0):65<=b&&90>=b&&81!=b&&D&&D[32](b,!0)}}let Hf;window.shdwn=function(a,b){Hf=$b(a,b)};function Eg(a){var b=a.keyCode;a.key&&Hg&&Xe.basic[8]!=a.key.toUpperCase()||!Vf[b]||(Vf[b]=0,(a.ctrlKey||a.altKey||0<=Cg.indexOf(b))&&a.preventDefault(),Fg(a.key,0)||(48<=b&&57>=b?D&&D[32](b,!1):65<=b&&90>=b&&81!=b&&D&&D[32](b,!1)))}window.addEventListener("blur",function(){if(D&&D[32])D[32](16,!1)});
var Ig,Jg,Kg,Lg,Mg=!1;function Ng(a,b){Og||(sc=Kg-(Ig-a)*uc,tc=Lg-(Jg-b)*uc,Tf(-sc,-tc),Pg())}var Og,Qg,Rg,Sg,Tg,Vg;function Wg(a,b){return 30>Math.sqrt((a-Ig)**2+(b-Jg)**2)}
function Xg(a){if(a.target==Uf){Yg=Zg=$e=gf=0;var b=a.changedTouches[0],c=b.pageX;b=b.pageY;1==a.touches.length&&Sg&&300>Date.now()-Sg&&Wg(c,b)?($g(a.pageX,a.pageY),D[21](c,b,0),Tg=!0):(Sg=Date.now(),1<a.touches.length?clearTimeout(Vg):D[168]()||(clearTimeout(Vg),Vg=setTimeout(D[22],350,c,b,2,1,0,0,1),q(Vg)),Kg=sc,Lg=tc,Ig=c,Jg=b,a.preventDefault())}}var ah,bh,ch,Zg,Yg;
function dh(a){var b=a.touches[0].pageX,c=a.touches[0].pageY;if(a.target==Uf){var d=D[168]();Wg(b,c)||clearTimeout(Vg);if(Tg||d)return D[25](b,c,1);2==a.touches.length?(b=a.touches,c=Math.sqrt((b[0].pageX-b[1].pageX)**2+(b[0].pageY-b[1].pageY)**2),Qg?lf(Rg*Qg/c,(b[0].pageX+b[1].pageX)/2,(b[0].pageY+b[1].pageY)/2,1):(Qg=c,Rg=uc,Og=!0)):(a=Date.now()-ch,q("t",a),Zg=-(ah-b)/a,Yg=-(bh-c)/a,ah=b,bh=c,ch=Date.now(),Ng(b,c))}}
function eh(a){if(a.target==Uf){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY;clearTimeout(Vg);if(D[168]())D[25](b,c,1);var d=Wg(b,c)&&300>Date.now()-Sg;if(Tg||d||D[168]())$f=!1,D[22](b,c,2*a.touches.length,Tg?1:2),Tg=!1;Qg=void 0;0==a.touches.length?Date.now()-ch&&(gf=Zg||0,$e=Yg||0,kf=sc,ef=tc,df=jf=Date.now(),bf=1):(b=a.touches[0].pageX,a=a.touches[0].pageY,Kg=sc,Lg=tc,Ig=b,Jg=a);Og=!1}}
function fh(a){if(!Aa){var b=window.innerWidth,c=window.innerHeight,d=a.pageX,e=a.pageY;if(a.target==Uf){if(Mg)return Ng(d,e);gh(a.pageX,a.pageY);D[25](a.pageX,a.pageY,1)}if(screen.height-10<=c&&1==f.scrollmouse&&!Hg){if(1.2===Math.abs(gf)||0===gf)gf||(jf=Date.now(),kf=sc),bf=0,gf=1.2*((10>d)-(d>b-10));if(1.2===Math.abs($e)||0===$e)$e||(df=Date.now(),ef=tc),bf=0,$e=1.2*((10>e)-(e>c-10))}}}
var $g=(a,b)=>{E&&(hh=[a,b],a=ih(a,b),$f=!0,T.queue.writeBuffer(jh,0,new Float32Array([a.x,a.y,a.x,a.y])))},gh=(a,b)=>{E&&$f&&(hh=[a,b],a=ih(a,b),T.queue.writeBuffer(jh,8,new Float32Array([a.x,a.y])))},hh;function kh(a){if(a.target==Uf)if(1==a.button&&a.pageX>l.R){Mg=!0;var b=a.pageX;a=a.pageY;Kg=sc;Lg=tc;Ig=b;Jg=a}else Mg=!1,0==a.button&&$g(a.pageX,a.pageY),D[21](a.pageX,a.pageY,a.button)}
function lh(a){2<a.button&&a.preventDefault();if(a.target==Uf)if(Mg)Mg=!1;else return $f=!1,D[22](a.pageX,a.pageY,a.button,0,!1,a.shiftKey,a.ctrlKey,a.altKey)}window.addEventListener("mouseup",function(a){2<a.button&&a.preventDefault()});var mh=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){mh||(mh=!0,nh())});window.fstordprop=(a,b,c,d,e,g)=>{Bf={icon:a,name:b,jb:c,Ha:d,unit:e,type:g}};
var Bf,Cf=(a,b)=>{let c=K("div",a);c.className="dataOrder";Ff(c,48*Bf.icon);Bf.unit&&!b&&(K("span",a,"->"),a=K("div",a),a.className="dataIcon",Ff(a,48*Bf.unit))};function oh(a,b,c){D[260](a);if(!Bf.Ha){var d=K("div",b);b=K("button",d,"\u00d7");b.className="closeIcon";b.onclick=()=>{c.splice(c.indexOf(a),1);J(d)};Cf(d);K("span",d,(Bf.name&&M(Bf.name)||"")+(Bf.jb&&" - "+M(Bf.jb)||""))}}
var Df=[842,843,689,847],ph=(a,b,c)=>{b=K("div",b);a=D[193](a);K("span",b,c,"font-size:23px;color:#"+("-"==c?"f00":"0f0"));c=K("div",b);Ff(c,a);c.className="dataIcon"},qh=(a,b,c)=>{D[260](a);Bf.Ha||((a=Df[Bf.type]||"")&&(a=M(a)+" -> "),b=K("div",b,`<span style="font-size:23px">${c}</span> `+(Bf.name&&a+M(Bf.name)||""),`filter:hue-rotate(${"+"==c?90:-45}deg);margin:7px 0px`),Cf(b,1))};
function rh(a,b){var c=sh();c=K("div",c);c.className="ordermod";let d=K("div",c),e=a.j[b];for(let g of e)oh(g,d,e);a=K("button",c);a.className="sum";a.onclick=()=>{let g=sh();var h=K("div",g);h.className="ordermod ord2";h=K("div",h);for(let p=0,r=D[261]();p<r;p++){D[260](p);if(Bf.Ha)continue;let t=document.createElement("div");var k=Df[Bf.type]||"";k&&=M(k)+" -> ";k=Bf.name&&k+M(Bf.name)||"";Ef(t,h,k||"zz");Cf(t);K("span",t,k);t.onclick=()=>{e.push(p);oh(p,d,e);Db(g)}}}}
var th=(a,b,c,d)=>{if(c!=b){D[196](a);a=K("div",d);d=K("div",a);d.className="dataIcon";Ff(d,V.D);var e=d=255,g=255;b>c&&(d=255/(b/c),g=255/(b/c));b<c&&(e=255/(c/b),g=255/(c/b));0>d&&(d=0);0>e&&(e=0);0>g&&(g=0);a=K("div",a);K("span",a,c+"%","color:#fff");K("span",a,"->","color:var(--color1);margin:0px 6px");K("span",a,b+"%",`color:rgb(${d},${e},${g})`)}};
function uh(a,b,c,d){D[196](b);let e=K("div",a);a=K("button",e,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(vh(c,b),2);J(e)};a=K("div",e);a.className="dataIcon";Ff(a,V.D);O("div",e,V.name);a=K("div",e);let g=L("input",a,"width:58px");g.oninput=wh;g.max=2**32-1;g.min=0;g.type="number";g.value=d;g.onchange=()=>{c[vh(c,b)+1]=ce(g)};K("span",a," %")}var sh=()=>{let a=Qc("",2);a.parentNode.parentNode.style.top=window.scrollY+"px";return a};
function xh(a,b){b=K("div",b);b.className="mddunit bonusedit";q(a);let c=K("div",b);for(var d of a)yh(c,d,a);d=K("button",b);d.className="sum";d.onclick=()=>pe(e=>{yh(c,e,a);a.push(e)})}let zh=a=>{a=Gf(0,0,a);let b=[];for(let c=0;c<a.length;c++)a[c]&&b.push({name:a[c],id:c});b.sort(Pd);return b};
function Ah(a){a=K("div",a);a.id="consts";let b=Bh[3][0].data,c=zh();for(let d=0;d<c.length;d++){let e=c[d],g=b[e.id],h=K("input",a);h.value=g;h.type="number";h.onchange=()=>{b[e.id]=ce(h)};K("div",a,e.name)}}function yh(a,b,c){D[196](b);let d=K("div",a);a=K("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(c.indexOf(b),1);J(d)};a=K("div",d);a.className="dataIcon";Ff(a,V.D);O("div",d,V.name)}
function Ch(a,b){let c=a.j[b];a=sh();a=K("div",a);a.className="bonusedit";q(c);let d=K("div",a);for(b=0;b<c.length;b+=2)uh(d,c[b],c,c[b+1]);a=K("button",a);a.className="sum";a.onclick=()=>pe(e=>{uh(d,e,c,100);c.push(e,100)})}
function Dh(a,b){q(a,b);b=sh();b=K("div",b);b.className="buildgrid";q(a);let c=a.data[16],d=a.data[17],e=a.j[18];q(c,d);b.style.gridTemplateColumns=`repeat(${c},auto)`;for(let g=0;g<c*d;g++){let h=e[g],k=L("div",b,"background:#"+(h?"ff0000c0":"00ff00c0"));k.onmousedown=()=>{h=!h;k.style.background="#"+(h?"ff0000c0":"00ff00c0");e[g]=h}}}
var Gf=(a,b,c)=>[Eh(M(771),M(16)),Eh(M(771),M(17)),Eh(M(771),M(18)),Eh(M(771),M(19)),!c&&(!Q||a)&&(a&&" "||"")+M(42)+(b&&" (%)"||""),M(772)+" (%)",M(773),M(774),M(775),M(776),M(241)+" - "+M(561),M(377)+" - "+M(561),M(369)+" - "+M(561),M(364)+" - "+M(561),M(366)+" - "+M(561),M(370)+" - "+M(561),M(372)+" - "+M(561),M(367)+" - "+M(561),M(379)+" - "+M(561),M(378)+" - "+M(561),M(380)+" - "+M(561),M(777),M(778),M(779),void 0,M(363)+" - "+M(561),void 0,void 0,M(373)+" - "+M(561),M(780),void 0,M(368)+" - "+
M(561),M(375)+" - "+M(561),M(371)+" - "+M(561),M(374)+" - "+M(561),M(365)+" - "+M(561),void 0,void 0,a&&M(11)||void 0,M(377)+" - "+M(782),M(781),M(377)+" - "+M(383),M(377)+" - "+M(786),M(799),M(785),M(376)+" - "+M(383),M(364)+" - "+M(383),M(372)+" - "+M(383),M(366)+" - "+M(383),M(364)+" - "+M(782),M(364)+" - "+M(784),M(378)+" - "+M(784),M(787),M(378)+" - "+M(786),M(364)+" - "+M(786),M(366)+" - "+M(786),void 0,void 0,void 0,M(380)+" - "+M(786),M(372)+" - "+M(784),M(369)+" - "+M(383),M(370)+" - "+M(383),
M(801),M(802),void 0,M(788),M(363)+" - "+M(383),M(368)+" - "+M(383),M(371)+" - "+M(383),M(374)+" - "+M(383),M(375)+" - "+M(383),M(365)+" - "+M(782),M(365)+" - "+M(786),M(365)+" - "+M(383),M(380)+" - "+M(383),M(378)+" - "+M(383),M(379)+" - "+M(383),M(367)+" - "+M(383),M(800)+" - "+M(383),M(373)+" - "+M(383),M(800)+" - "+M(784),M(790),M(791),M(792),M(793),M(794),M(795),M(796),M(797),M(798),M(374)+" - "+M(782),M(416)+" - "+M(383),M(363)+" - "+M(784),M(363)+" - "+M(825),M(363)+" - "+M(782),M(363)+" - "+
M(786),M(826),M(827),M(828),M(829),M(830)],Gh=(a,b,c)=>{c=K("div",c);K("span",c,"+"+a,"color:#fff");K("span",c,"->","color:var(--color1);margin:0px 6px");K("span",c,"+"+b,"color:"+Fh(a,b))},Fh=(a,b)=>{let c=255,d=255,e=255;b>a&&(c=255/(b/a),e=255/(b/a));b<a&&(d=255/(a/b),e=255/(a/b));0>c&&(c=0);0>d&&(d=0);0>e&&(e=0);return`rgb(${c},${d},${e})`};
function Hh(a,b){let c=a.data;var d=c[1];if(5==d)return rh(a,4);var e=a.j[b];b=sh();b=K("div",b);b.className="techcf";q(e);if(0==d){Ih(b,c[10],Gf(),k=>{q(k);c[10]=k});K("span",b,"+");let h=K("input",b);h.value=c[12];h.type="number";h.onchange=()=>c[12]=ce(h)}else{if(1==d||2==d){var g=K("div",b);e=K("div",g);g.className="unitProps";g=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let h of g){L("div",e,`background:url(nehhon/icons2.webp) 0px ${-20*h.h}px;width:20px;height:20px`);
g=K("div",e,"+");let k=K("input",g);k.value=c[h.id];k.type="number";k.onchange=()=>c[h.id]=ce(k);2==d&&K("span",g," %")}}else if(3==d){d=L("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=L("input",d);h.value=c[12];h.type="number";h.onchange=()=>c[12]=ce(h);K("span",d,"%")}else{if(4==d){D[196](c[12]);a=L("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=L("div",a,"margin-right:8px");h.className="dataIcon";Ff(h,V.D);let k=O("div",a,V.name);
h.onclick=()=>pe(p=>{D[196](p);c[12]=p;Ff(h,V.D);k.textContent=M(V.name)});return}if(333==d)for(d=L("div",b,"display:flex;gap:10px;align-items:center"),e=0;4>e;e++){Vc(d,e);let h=2+e,k=L("input",d,"margin-right:8px");k.value=c[h];k.type="number";k.onchange=()=>c[h]=ce(k)}}xh(a.j[8],b)}}
function Jh(a,b){let c=a.j[b];a=sh();O("button",a,622,"margin-right:5px;margin-bottom:5px;color:var(--color1);padding:5px").onclick=()=>{for(let k of d.children){let p=k.children[2].children[0];if(!p.checked)p.onclick()}};O("button",a,623,"color:var(--color1);padding:5px").onclick=()=>{for(let k of d.children){let p=k.children[2].children[0];if(p.checked)p.onclick()}};let d=K("div",a);d.className="tchgrid cnttkk";a=D[90]();q(c);for(b=0;3>b;b++)for(let k=0;k<a;k++){var e=D[194](k,!b,1==b,2==b);if(e){var g=
-1<c.indexOf(k);let p=document.createElement("div");var h=M(D[89](k));Ef(p,d,b+h,g);K("div",p,h);h=K("div",p);Ff(h,e);h.className="dataIcon";e=L("div",p,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");g=le(e,r=>{r?c.push(k):c.splice(c.indexOf(k),1)},g);h.onclick=g.onclick}}}
function Kh(a){if(Bh){var b=[60,55,23,155,0,0,0,0],c=[],d=2*b.length;for(var e of Bh){c.push(d,e.length);for(var g of e){d+=g.data.length;for(var h in g.j)d+=g.j[h].length,g.data[h]=g.j[h].length}}c.push(0,0,0,0,0,0,0,0);d=a?new Uint32Array(d):$b(D[265](d),d);d.set(c);q(c);for(e=0;e<b.length;e++)if(Bh[e]){g=Bh[e];h=b[e];let p=c[2*e],r=p+h*g.length;for(var k of g){d.set(k.data,p);p+=h;for(let t in k.j)d.set(k.j[t],r),r+=k.j[t].length}}if(a){a=new Uint8Array(d.buffer);b=4*d.length;c=D[79](b);c=Lh(c,
b);for(k=0;k<b;k++)c[k]=a[k+0];c=D[80]();a=D[81]();a=Lh(c,a);b=new Blob([new Uint32Array([d.length]),a.slice(0)],{type:"application/octet-binary"});Af(b,"tzared.tzmod");q(a)}q(d)}}
var Mh=()=>[[{name:""},{y:18},{y:1},{y:3},{y:13},{y:17},{y:12},{y:16},{y:6},{y:10},{name:559},{name:824},{name:561},{name:562},{name:739,ha:1,P:1},{name:740},{name:741,j:1,click:rh},{name:742},{name:743,select:[0,M(757),1,M(758),2,M(759)]},{name:744,select:[1,"1x1",2,"2x2",3,"3x3",4,"4x4"]},{P:1,name:745,select:[0,M(16),1,M(17),2,M(18),3,M(19),4,M(754),55,M(677)]},{P:1,name:746,select:[0,M(16),1,M(17),2,M(18),3,M(19),55,M(677)]},{name:747,P:1},{name:748},{name:749,select:[0,M(755),1,M(756),2,M(811)]},
{name:726},{name:750,j:1,click:Jh,ha:1},{name:751},{name:752,select:[0,M(46),1,M(45)],P:1},{name:753},{name:738,j:1,click:Ch},{name:804},{name:821},{name:812,u:1},{name:818,u:1},{name:819,u:1},{name:820,u:1},{name:823,u:1},{o:264,F:1},{o:99,F:1},{o:25,F:1},{o:159,F:1},{o:219,F:1},{o:263,F:1},{o:78,F:1},{o:28,F:1},{o:217,u:1},{o:77,u:1},{o:76,u:1},{o:87,u:1},{o:23,u:1},{o:128,u:1},{o:32,u:1},{name:805,u:1}],[{name:""},{y:18},{y:13},{y:17},{y:12},{y:16},{y:10},{name:741,j:1,click:rh},{y:1},{name:559},
{name:824},{name:561},{name:739,ha:1,P:1},{name:740},{name:742},{name:743,select:[0,M(757),1,M(758),2,M(759)]},{name:760,xa:1,min:1},{name:761,xa:1,min:1},{name:762,j:1,click:Dh},{name:745,select:[0,M(16),1,M(17),2,M(18),3,M(19),4,M(754),55,M(677)]},{name:746,select:[0,M(16),1,M(17),2,M(18),3,M(19),55,M(677)]},{name:747,P:1},{name:748},{name:749,select:[0,M(755),1,M(756),2,M(811)]},{name:726},{name:822},{name:750,j:1,click:Jh,ha:1},{name:751},{name:752,select:[0,M(46),1,M(45)],P:1},{name:738,j:1,
click:Ch},{name:804},{name:821},{name:22,u:1},{name:812,u:1},{name:818,u:1,P:1},{name:823,u:1},{o:264,F:1},{o:99,F:1},{o:25,F:1},{o:159,F:1},{o:219,F:1},{o:263,F:1},{o:78,F:1},{o:28,F:1},{o:217,u:1},{o:77,u:1},{o:76,u:1},{name:805,u:1}],[{name:""},{name:620,click:Hh,select:[0,M(764),1,M(765),2,M(766),3,M(767),4,M(768),5,M(769)]},{y:13},{y:10},{name:770,j:1,click:rh},{y:17},{y:12},{y:16},{P:1,j:1},{name:805,u:1}]];window.shmdchngs=()=>{ie(1)};
function ie(a){let b=Qc("",1);b.id="mdd";Nh();let c=Mh();var d=[{Aa:58,click:()=>{Oh(0,h,c)}},{Aa:59,click:()=>{Oh(1,h,c)}},{Aa:469,click:()=>{Oh(2,h,c)}},{Aa:470,click:()=>{Ah(h)}},{Aa:874,click:()=>{var k=Bh,p=Ph,r=Mh();let t=K("div",h);t.id="modchanges";for(var u=0;3>u;u++){var v=p[u],w=k[u],A=r[u];for(let yb=0;yb<w.length;yb++){var y=void 0;let Da=w[yb].data,zb=v[yb].data;for(let ba=0;ba<A.length;ba++)if(!(1==u&&21==ba||!u&&22==ba)){var x=Da[ba],C=zb[ba],I=w[yb].data[0],H=A[ba];if(H.j){var N=
!1,S=v[yb].j[ba],za=w[yb].j[ba];if(16==ba||8==ba||26==ba||7==ba||4==ba||8==ba){for(let ia of za)0>S.indexOf(ia)&&(N=!0);for(let ia of S)0>za.indexOf(ia)&&(N=!0)}else if(30==ba||29==ba){for(var lb=0;lb<za.length;lb+=2)0>vh(S,za[lb])&&(N=!0);for(lb=0;lb<S.length;lb+=2)0>vh(za,S[lb])&&(N=!0)}if(!N)continue}else if(2==u&&1==ba){N=!1;S=[1,10,11,12,13,14,15];for(let ia of S)if(zb[ia]!=Da[ia]){N=!0;break}if(!N)continue}else if(x==C)continue;y||(y=t,N=u,S=document.createElement("div"),D[196](I),I=M(V.name),
kg(L("div",S,"background:#00000082"),V.D,0,0,V.$a),K("div",S,I,"color:var(--color1);border-color:#ffd75d40;background:#00000082"),Ef(S,y,N+I),y=S);I=K("div",y);H.name?K("div",I,M(H.name)):H.y?Ff(L("div",I,"background:url(nehhon/icons2.webp);width:20px;height:20px;filter:drop-shadow(0px 0px 3px #000)"),-20*H.y):H.o&&(I=K("div",I),I.className="dataOrder",Ff(I,48*H.o));if(H.u)C=K("div",K("div",y)),C.className="check2",C.style.backgroundPositionY=x?"0":"";else if(H.j)if(C=L("div",y,"display:block"),x=
K("div",C),I=K("div",C),C=v[yb].j[ba],H=w[yb].j[ba],16==ba||7==ba||4==ba){for(let ia of H)0>C.indexOf(ia)&&qh(ia,x,"+");for(let ia of C)0>H.indexOf(ia)&&qh(ia,I,"-")}else if(26==ba||26==ba||8==ba){for(let ia of H)0>C.indexOf(ia)&&ph(ia,x,"+");for(let ia of C)0>H.indexOf(ia)&&ph(ia,x,"-")}else{if(30==ba||29==ba){x.style.flexDirection="column";for(I=0;I<H.length;I+=2)N=H[I],S=H[I+1],za=C.indexOf(N),0<=za?th(N,S,C[za+1],x):th(N,S,100,x);for(I=0;I<C.length;I+=2)N=C[I],S=C[I+1],0>H.indexOf(N)&&th(N,100,
S,x)}}else if(S=N=I=255,H.select?(x=H.select.indexOf(x)+1,C=H.select[H.select.indexOf(C)+1],x=H.select[x]):(x>C&&(I=255/(x/C),S=255/(x/C)),x<C&&(N=255/(C/x),S=255/(C/x)),0>I&&(I=0),0>N&&(N=0),0>S&&(S=0)),H=H.F?"%":"",za=K("div",y),K("span",za,C+H),C!=x&&(K("span",za,"->","color:var(--color1)"),K("span",za,x+H,`color:rgb(${I},${N},${S})`)),2==u&&1==ba)if(H=L("div",za,"flex-direction:column;margin-left:10px"),x==C)if(x=zb[ba],0==x)x=Gf(),C=K("div",H),K("div",C,x[Da[10]]),zb[10]==Da[10]?Gh(zb[12],Da[12],
C):K("div",C,"+"+Da[12]);else if(1==x||2==x){x=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];q(213123);for(let ia of x)zb[ia.id]!=Da[ia.id]&&(x=K("div",H),L("div",x,`background:url(nehhon/icons2.webp) 0px ${-20*ia.h}px;width:20px;height:20px`),Gh(zb[ia.id],Da[ia.id],x))}else 3==x?(x=zb[12],C=Da[12],H=K("div",H),K("span",H,"x"+x+"%","color:#fff"),K("span",H,"->","color:var(--color1);margin:0px 6px"),K("span",H,"x"+C+"%","color:"+Fh(x,C))):4==x&&(x=K("div",H),D[196](zb[12]),C=L("div",
x),C.className="dataIcon",Ff(C,V.D),K("span",x,"->"),D[196](Da[12]),x=L("div",x),x.className="dataIcon",Ff(x,V.D));else if(x=Da[ba],0==x)x=Gf(),C=K("div",H),K("div",C,x[Da[10]]),K("div",C,"+"+Da[12]);else if(1==x||2==x){x=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let ia of x)Da[ia.id]&&(x=K("div",H),L("div",x,`background:url(nehhon/icons2.webp) 0px ${-20*ia.h}px;width:20px;height:20px`),K("div",x,Da[ia.id]))}else 3==x?K("div",H,"x"+Da[12]+"%"):4==x&&(x=K("div",H),K("span",
x,"->"),D[196](Da[12]),x=L("div",x),x.className="dataIcon",Ff(x,V.D))}}}let Id;k=k[3][0].data;p=p[3][0].data;r=zh(1);for(v=0;v<r.length;v++)w=r[v],p[w.id]!=k[w.id]&&4!=v&&38!=v&&(Id||=K("div",t),K("div",Id,w.name),u=p[w.id],w=k[w.id],A=K("div",Id),K("span",A,u,"color:#fff"),K("span",A,"->","color:var(--color1);margin:0px 6px"),K("span",A,w,"color:"+Fh(u,w)))}}];let e=K("div",b),g=K("div",e),h=K("div",e);for(let k of d){let p=O("button",g,k.Aa);p.onclick=()=>{for(let r of g.children)r.style.background=
"";p.style.background="#ff00ff45";h.innerHTML="";k.click(h)}}if(a)for(d=0;5>d;d++)4!=d&&(g.children[d].style.display="none");K("button",g,M(8).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content;margin-left:auto").onclick=()=>{Kh(1)};a||(K("button",g,M(832).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{Qh(k=>{var p=k;q(p);p=p.target.result;k=new Uint8Array(p,4);p=(new Uint32Array(p,0,1))[0];q(k,p);var r=D[79](k.length);r=Lh(r,k.length);q(r);for(var t=
0;t<k.length;t++)r[t]=k[t];r=D[267](p);k=$b(r,p);q("ug",k);Bh=void 0;Db(b);ie()})},O("button",g,542,"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{confirm(M(713))&&(D[266](),Bh=void 0,Db(b),ie(),B.l&&l.s&&!B.v&&(Rh=1,Kh(),D[274]()))});Bh||(Bh=[],Sh(0,60,257,c,Bh),Sh(1,55,258,c,Bh),Sh(2,23,263,c,Bh),Bh[3]=[{j:{},data:new Uint32Array($b(D[264](),155))}]);g.children[a?4:0].onclick();Q&&R(g.children[3]);b.children[0].addEventListener("click",()=>{Q?(Kh(),D[265](2147483647)):B.l&&l.s&&
!B.v&&(Th()||Rh)&&(Rh=1,Kh(),D[274]())})}var Rh,Th=()=>{if(Bh)for(let b=0;b<Bh.length;b++){let c=Bh[b],d=Ph[b];for(let e=0;e<c.length;e++){let g=c[e],h=d[e];for(var a=0;a<g.data.length;a++)if(g.data[a]!=h.data[a])return!0;for(let k in g.j)for(a=0;a<g.j[k].length;a++)if(g.j[k][a]!=h.j[k][a])return!0}}return!1},Ph,Nh=a=>{a&&(Bh=void 0);Ph||(a=Mh(),Ph=[],Sh(0,60,257,a,Ph),Sh(1,55,258,a,Ph),Sh(2,23,263,a,Ph),Ph[3]=[{j:{},data:new Uint32Array($b(D[264](),155))}])};window.gtorimod=Nh;var Bh;
function Sh(a,b,c,d,e){d=d[a];e[a]=[];performance.now();c=D[c]();let g=$b(D[259]()),h=c;for(let k=0;k<c;k+=b){let p={data:g.slice(k,k+b),j:{}};e[a].put(p);for(let r=0;r<d.length;r++){let t=p.data[r];d[r].j&&!p.j[r]&&(p.j[r]=Array.from(g.slice(h,h+t)),h+=t)}}}
function Oh(a,b,c){c=c[a];performance.now();var d=K("div",b);d.className="arrws";let e=K("button",d,"<","opacity:.5"),g=K("button",d,">");d=K("table",b);d.id="unittable";b=0;let h=K("thead",d);for(var k=0;k<c.length;k++)if(!c[k].P){b++;var p=K("td",h,M(c[k].name));c[k].y&&Ff(K("div",p),-20*c[k].y);c[k].o&&(p=K("span",p),p.className="dataOrder",Ff(p,35*c[k].o))}a=Bh[a];let r=K("tbody",d);for(let w of a){a=document.createElement("tr");for(let A=0;A<c.length;A++){k=w.data[A];let y=c[A];if(y.P)continue;
d=K("td",a);if(0==A){D[196](k);k=M(V.name);d.dataset.title=k;kg(d,V.D,0,0,V.$a);a.U=k;continue}d.U=k;y.ha&&(d=L("div",d,"display:flex;gap:4px;align-items:center;justify-content:center"));if(y.j){let C;y.ha?(k=!k,le(d,I=>{I?(xd(C),w.data[A]=0):(C.style.visibility="",w.data[A]=w.j[A].length)},k),C=K("button",d,"\u25a4"),C.onclick=()=>y.click(w,A),k&&xd(C)):(C=K("button",d,"\u25a4"),C.onclick=()=>y.click(w,A));continue}if(y.u){le(d,C=>{w.data[A]=C},k);continue}let x=K(y.select?"select":"input",d);y.F&&
K("span",d," %");if(y.select){for(p=0;p<y.select.length;p+=2){let C=y.select[p];K("option",x,y.select[p+1]).value=C}x.value=k;y.click&&(K("button",d,"\u25a4","margin-left:5px").onclick=()=>y.click(w,A))}else y.ha&&(p=k!=2**32-1,le(d,C=>{C?(x.style.visibility="",x.value=0):xd(x)},p,1),p||xd(x)),x.value=k,x.type="number",x.min=y.min||0,x.max=2**32-1,x.oninput=wh;x.onchange=()=>{w.data[A]=ce(x);if(c[A].xa){let C=w.data[16]*w.data[17];w.data[18]=C;w.j[18].length=C}}}for(let A of r.children)if(A.U>a.U){r.insertBefore(a,
A);break}a.parentNode||r.appendChild(a)}let t=0,u=Math.ceil((b-1)/6),v=w=>{t+=w;0>t&&(t=0);t>=u&&(t=u-1);e.style.opacity=t?"":".5";g.style.opacity=t+1>=u?".5":"";for(w=1;w<h.children.length;w++){var A=h.children[w];w<=6*t||w>6*t+6?R(A):yd(A)}for(let y of r.children)for(w=1;w<y.children.length;w++)A=y.children[w],w<=6*t||w>6*t+6?R(A):yd(A)};v(0);g.onclick=()=>v(1);e.onclick=()=>v(-1)}
window.selectMulp=function(a,b,c,d,e,g,h,k,p,r){Uh(b,c);dd.style.display="block";m(rd?"unitname":"kingdom").innerHTML=a+" "+M(58);p?(bd.innerHTML=p,Ff(bd,-100),qd("levelmenu")):P("levelmenu");g?($c.innerHTML=g,qd("attackmenu")):P("attackmenu");h?(ad.innerHTML=h,qd("defencemenu")):P("defencemenu");k&&(m("manamenu").style.backgroundPosition="0px -240px",m("manamenu").innerHTML=k,qd("manamenu"));r?(m("manamenu1").style.backgroundPosition="0px -80px",m("manamenu1").innerHTML=r,qd("manamenu1")):P("manamenu1");
rd&&d&&(cd.innerHTML=Sc(e,D[29](d)),m("plavatar").style.background=`url(${dg(e,d)})`,qd("plavatar"))};window.updateHealth=function(a){if(m("progressvalue")){var b=m("progressvalue").innerHTML.split("/");b.length&&(m("progressone").value-=a,m("progressvalue").innerHTML=b[0]-a+"/"+b[1])}};
window.selectionOne0=function(a,b,c,d,e,g,h,k,p,r,t,u,v,w,A,y){P("manamenu");P("manamenu1");P("progressmana");d=Vh||M(d);a&&b?(m("stock").className="",m("manamenu1").style.display="block",m("manamenu1").style.backgroundPosition="0px -80px",m("manamenu1").innerHTML=a):m("stock").className="blocked";1==e&&c&&b&&(a=Math.floor(25*(c-B.Y)/1E3),0<a&&(m("manamenu").style.display="block",m("manamenu").style.backgroundPosition="0px -200px",m("manamenu").innerHTML=a+"s"));cd.style.display="block";ed.textContent!=
d&&(ed.textContent=d);g||0==e&&!rd?($c.innerHTML=g,qd("attackmenu")):P("attackmenu");0==e&&!rd||rd&&h&&0===e||2==e&&h?(ad.innerHTML=h,qd("defencemenu")):P("defencemenu");t&&226==r&&(Ff(m("manamenu1"),-140),qd("manamenu1"),m("manamenu1").innerHTML=t);p&&(m("manamenu").style.display="block",m("manamenu").innerHTML=k,27===r?(m("manamenu1").style.backgroundPosition="0px -280px",qd("manamenu1"),m("manamenu1").innerHTML=k,m("manamenu").style.backgroundPosition="0px -240px",m("manamenu").innerHTML=t):(m("progressmana").value=
~~(100*k/p),qd("progressmana"),m("manamenu").style.backgroundPosition="0px -120px"));A&&(d=m("manamenu1"),74==r&&(w=4),d.style.display="block",d.style.backgroundPosition=["0px -260px","0px -340px","0px -240px","0px -320px","0px -220px"][w]||"",d.innerHTML=A);bd.innerHTML=u;bd.style.display="block";1==e?Ff(bd,-180):Ff(bd,-100);0===u&&(2==e||1==e||0==e&&rd)&&(bd.style.display="none");cd.innerHTML=Sc(y,D[29](v));v&&m("plavatar")&&(m("plavatar").style.background=`url(${dg(y,v)})`,qd("plavatar"));dd.style.display=
"block"};function Wh(a){return a.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,function(){return"*******"})}window.shresmsg=function(a,b,c){let d=M(a?451:533);a&&(d+=" -> ");if(c||b)d=Eh(d,Sc(c,b));b=K("li",m("msgs1"),d);for(c=0;4>c;c++)a&1<<c&&(Vc(b,c).style.cssText="margin-left:8px;margin-bottom:-1px");Xh()};
window.cnsoSPmsg=function(a,b,c){a=M(a);if(c||b)a=Eh(a,Sc(c,b));m("msgs1").innerHTML+="<li style='border: 30px solid #ff0;border-top: 0px;border-bottom: 0px;padding: 0px 11px;'>"+a+"</li>";Xh()};window.cnsoSP2msg=function(){K("li",m("msgs1")).textContent=Od;Xh()};function Gd(a){for(var b,c="",d=0;b=a[d++];)c+=String.fromCharCode(b);return c}function Uh(a,b){0>a?(dd.value=100,dd.max=100,fd.innerHTML=M(40)):(dd.value=a,0>b?(dd.max=100,dd.value=1):dd.max=b,fd.innerHTML=~~a+"/"+b)}
window.showHealthOne=Uh;function Pg(){}new Float32Array(8);var Yh,Zh,$h,ai,bi,ci,uc=1,E,T,nf,di,ei,fi,gi,hi,ii,ji,jh,ki,li,mi,Qf,ni,oi,pi;new Float32Array(12);var z,qi;function $b(a,b){return new Uint32Array(window.wasmMemory.buffer,a,b)}function ri(a,b){return new Float32Array(window.wasmMemory.buffer,a,b)}function bc(a,b){return new Int32Array(window.wasmMemory.buffer,a,b)}function si(a,b){return new Int8Array(window.wasmMemory.buffer,a,b)}function Hd(a,b){return new Uint16Array(window.wasmMemory.buffer,a,b)}
function Lh(a,b){return new Uint8Array(window.wasmMemory.buffer,a,b)}function Zf(){if(!Q){for(var a=id.Mb.length=0,b=gd.length;a<b;a++){var c=gd[a];c.className="blocked";c.style.background="none";c.innerHTML=""}id.Ma.className="blocked";id.Ja.className="blocked";id.Ab.className="blocked";id.Ec=1}}window.cleanMenuIcons=Zf;
window.buttonSetup=function(a,b,c,d,e,g,h,k,p,r,t,u){var v=gd[a];v.Cc=t;v&&!u&&(v.style.cssText="background-position:0px "+48*b+"px;"+(e&&"background-image:url(nehhon/iconunits.webp)"||""),c&&(v.className=""),g&&(v.className="dis"),1==p&&(v.className="invd"),2==p&&(v.className="uinv"),!k&&0<d?(b="",1073741824<d&&(1073741825<d&&(b=d-1073741824+"x"),d=`<span><span>${b}</span>\u221e</span>`),ti(v,d)):k&&1073741824<d&&ti(v,"..."),h&&1<r&&h!=2**31-1&&K("p",v,h+M([837,838,839][h-1]||840)),1==h?v.className=
"crnt":1<h&&(v.className="crnt1"),void 0!=If&&If==a&&(hd.innerHTML="",v.onmouseenter()))};var Sf,U,W,ui,Rf,vi,wi,xi,yi,zi,Ai,Bi,Ci,Di,Ei,Fi,Gi,Hi,Ii,Ji,Ki,Li,Mi;window.gameOver=function(){xc();Qc(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>F</h2><p>${M(386)} ${M(387)}</p>`,1).id="F"};
window.playerWon=function(){xc();Qc(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>${M(388)} ${M(389)}</h2>`,1).id="F"};function Ni(a,b){var c=4*bi,d=z.createBuffer();d.size=b;d.uc=c;z.bindBuffer(z.ARRAY_BUFFER,d);z.enableVertexAttribArray(a);z.vertexAttribPointer(a,b,z.FLOAT,!1,0,0);z.bufferData(z.ARRAY_BUFFER,c*b,z.STATIC_DRAW);Ea?Oi.vertexAttribDivisorANGLE(a,1):z.vertexAttribDivisor(a,1);return d}
function Pi(a,b){var c=b+4E4;b*=4;c*=4;if(Ea)z.bindBuffer(z.ARRAY_BUFFER,a),z.bufferData(z.ARRAY_BUFFER,c*a.size,z.STATIC_DRAW),D[146]();else{var d=z.createBuffer();z.bindBuffer(z.COPY_READ_BUFFER,a);z.bindBuffer(z.ARRAY_BUFFER,d);z.bufferData(z.ARRAY_BUFFER,b*a.size,z.STATIC_DRAW);z.copyBufferSubData(z.COPY_READ_BUFFER,z.ARRAY_BUFFER,0,0,b*a.size);z.bindBuffer(z.COPY_READ_BUFFER,d);z.bindBuffer(z.ARRAY_BUFFER,a);z.bufferData(z.ARRAY_BUFFER,c*a.size,z.STATIC_DRAW);z.copyBufferSubData(z.COPY_READ_BUFFER,
z.ARRAY_BUFFER,0,0,b*a.size);z.bindBuffer(z.COPY_READ_BUFFER,null);z.deleteBuffer(d)}}
function rf(a){if(E)return D[277](1==f.stdcolors);a=Lh(D[17](a),4*(D[28]()+16));z.activeTexture(z.TEXTURE4);var b=z.createTexture();z.bindTexture(z.TEXTURE_2D,b);if(Ea){for(var c=new Uint8Array(16384),d=0;d<c.length;d++)c[d]=a[d];z.texImage2D(z.TEXTURE_2D,0,z.RGBA,64,64,0,z.RGBA,z.UNSIGNED_BYTE,c)}else z.texImage2D(z.TEXTURE_2D,0,z.RGBA,a.length/4,1,0,z.RGBA,z.UNSIGNED_BYTE,a);Qi();z.bindTexture(z.TEXTURE_2D,null);z.bindTexture(z.TEXTURE_2D,b);z.uniform1i(z.getUniformLocation(U,"colorArray"),4);z.activeTexture(z.TEXTURE2)}
window.setupColorGL=rf;var Ri,Si;window.scrSetup=function(a,b){Tf(Math.floor(a-Uf.width/2),Math.floor(b-Uf.height/2));Pg()};function Ti(){let a=window.devicePixelRatio;1>a&&(a=1);return a}var Ea,Fa,Ui;
async function Vi(a,b){Fa=b;uc=1;var c=parseInt(f.fogRefresh),d=n[8],e=n[43];d&&(Wi=1E3*n[14]);if(!E){z.getError()===z.CONTEXT_LOST_WEBGL&&(z=Uf.getContext("webgl2",{antialias:!1,alpha:!1}));Ea&&3==c&&(c=2);Ui=3==c&&b;if(!Zi){Y=parseFloat(f.antialiasing2)||1;$i=1<Y;var g=Math.round(25*parseInt(f.pixelDensity1/25))/100||Ti();1>g&&(Y=1,$i=!1);g&&!$i&&(Uf.style.width="100%");Y*=g;U=z.createProgram();W=z.createProgram();g=Ea?1:2;var h=await aj(g+"vrtxu.glsl");Ea||(h=h.replaceAll("FOG",b),h=h.replaceAll("FUOG",
!!Ui));h=h.replaceAll("GLSCALE",Y.toFixed(4));var k=z.createShader(z.VERTEX_SHADER);z.shaderSource(k,h);z.compileShader(k);h=await aj(g+"fragu.glsl");Ea?(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d)):(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d),h=h.replaceAll("FUOG",!!Ui));var p=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(p,h);z.compileShader(p);z.attachShader(U,k);z.attachShader(U,p);z.linkProgram(U);z.useProgram(U);h=Ea?
await aj("1vrtxt.glsl"):await aj("2vrtxt.glsl");k=z.createShader(z.VERTEX_SHADER);z.shaderSource(k,h);z.compileShader(k);g=await aj(g+"fragt.glsl");Ea||(g=g.replaceAll("FUOG",!!Ui));g=g.replaceAll("EXPLORED",e);g=g.replaceAll("FOG",b);g=g.replaceAll("BRMODE",d);d=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(d,g);z.compileShader(d);z.attachShader(W,k);z.attachShader(W,d);z.linkProgram(W)}e=z.getAttribLocation(U,"a_position");g=z.getAttribLocation(U,"a_texCoord");d=z.getAttribLocation(U,"a_step");
k=z.getAttribLocation(U,"a_physic");h=z.getAttribLocation(U,"a_margins");z.useProgram(W);bj=z.getUniformLocation(W,"minimapMargin");Ei=z.getUniformLocation(W,"u_translation");Ai=z.getUniformLocation(W,"u_resolution");zi=z.getUniformLocation(W,"u_fps");yi=z.getUniformLocation(W,"now");Ji=z.getUniformLocation(W,"u_circle0");Ki=z.getUniformLocation(W,"u_circle1");Rf=z.getUniformLocation(W,"u_ambient");Fi=z.getUniformLocation(W,"zoom");Bi=z.getUniformLocation(W,"miniMap");cj(uc);z.uniform1i(Bi,0);z.uniform2fv(Ei,
[0,0]);z.uniform1f(zi,-1);z.uniform1f(Fi,Y);z.uniform1f(z.getUniformLocation(W,"TSIZE"),dc);z.uniform1f(z.getUniformLocation(W,"mx"),0);Ea?(z.uniform1f(z.getUniformLocation(W,"mapSize"),2**Math.ceil(Math.log2(D[47]()))),z.uniform1f(z.getUniformLocation(W,"mapSize2"),D[47]())):z.uniform1f(z.getUniformLocation(W,"mapSize"),D[47]());z.uniform1f(z.getUniformLocation(W,"scale"),1);dj=[-l.V*Y,-l.W*Y];z.uniform2fv(bj,dj);p=z.getAttribLocation(W,"a_position");Gi=ej();fj(Gi);var r=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,
r);z.bufferData(z.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),z.STATIC_DRAW);z.enableVertexAttribArray(p);z.vertexAttribPointer(p,2,z.FLOAT,!1,0,0);fj(null);z.useProgram(U);z.uniform2fv(gj,dj);z.bindBuffer(z.ARRAY_BUFFER,null);Hi=ej();fj(Hi);Ii=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,Ii);z.enableVertexAttribArray(d);Ea?(Oi=z.getExtension("ANGLE_instanced_arrays"),z.vertexAttribPointer(d,1,z.FLOAT,!1,0,0),z.bufferData(z.ARRAY_BUFFER,new Float32Array([0,1,2,1,2,3]),z.STATIC_DRAW),
Oi.vertexAttribDivisorANGLE(d,0)):(z.vertexAttribIPointer(d,1,z.UNSIGNED_BYTE,0,0),z.bufferData(z.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),z.STATIC_DRAW),z.vertexAttribDivisor(d,0));d=D[47]();bi=a&&a+4E4||Math.floor(d*d/2);Yh=Ni(g,4);Zh=Ni(e,3);$h=Ni(k,4);ai=Ni(h,4);fj(null);wi=z.getUniformLocation(U,"u_resolution");Sf=z.getUniformLocation(U,"u_ambient");Di=z.getUniformLocation(U,"u_translation");qi=z.getUniformLocation(U,"zoom");vi=z.getUniformLocation(U,"now");Mi=z.getUniformLocation(U,"u_circle0");
Li=z.getUniformLocation(U,"u_circle1");Ci=z.getUniformLocation(U,"miniMap");gj=z.getUniformLocation(U,"minimapMargin");b&&(xi=z.getUniformLocation(U,"miniMapSize"));z.uniform1f(z.getUniformLocation(U,"zMax"),96*D[47]());z.uniform1i(Ci,0);z.useProgram(U);a=ri(D[33](),1323);B.Ra||(B.Ra=2880);B.Sa||(B.Sa=12);b=0;for(e=Pf.length;b<e;b++).55>Pf[b]&&(Pf[b]=.55);Jc();z.uniform1f(z.getUniformLocation(U,"mapSize"),D[47]());z.uniform1f(z.getUniformLocation(U,"mx"),-l.R*Y);z.uniform1f(qi,Y);z.uniform2fv(Di,
[0,0]);z.uniform1f(z.getUniformLocation(U,"TSIZE"),dc);window.addEventListener("resize",hj,!1);hj();z.blendEquation(z.FUNC_ADD);z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA);z.disable(z.DITHER);z.disable(z.BLEND);performance.now();if(!Zi){rf(1==f.stdcolors);z.activeTexture(z.TEXTURE0);e=z.createTexture();z.bindTexture(z.TEXTURE_2D,e);if(Ea){z.getExtension("OES_texture_float");g=new Float32Array(65536);for(b=0;b<g.length;b++)g[4*b]=a[b];z.texImage2D(z.TEXTURE_2D,0,z.RGBA,128,128,0,z.RGBA,z.FLOAT,
g)}else z.texImage2D(z.TEXTURE_2D,0,z.R16F,a.length,1,0,z.RED,z.FLOAT,a);Qi();z.bindTexture(z.TEXTURE_2D,null);z.bindTexture(z.TEXTURE_2D,e);z.uniform1i(z.getUniformLocation(U,"delay"),0);z.activeTexture(z.TEXTURE2)}ij=z.createTexture();z.bindTexture(z.TEXTURE_2D,ij);z.texImage2D(z.TEXTURE_2D,0,z.LUMINANCE_ALPHA,d,d,0,z.LUMINANCE_ALPHA,z.UNSIGNED_BYTE,null);jj();z.useProgram(W);z.uniform1i(z.getUniformLocation(W,"fogMap"),2);z.useProgram(U);z.uniform1i(z.getUniformLocation(U,"fogMap"),2);Ui&&(z.activeTexture(z.TEXTURE3),
ui=z.createTexture(),z.bindTexture(z.TEXTURE_2D,ui),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,1,1,0,z.RGBA,z.UNSIGNED_BYTE,new Uint8Array(4)),Qi(),kj=z.createFramebuffer(),z.bindFramebuffer(z.FRAMEBUFFER,kj),lj=z.createTexture(),z.bindTexture(z.TEXTURE_2D,lj),a=Ri,b=Si,z.texImage2D(z.TEXTURE_2D,0,z.RGBA,a,b,0,z.RGBA,z.UNSIGNED_BYTE,null),Qi(),kj.width=a,kj.height=b,z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,lj,0),z.bindFramebuffer(z.FRAMEBUFFER,null),z.useProgram(W),z.uniform1i(z.getUniformLocation(W,
"frmBUFFER"),3),z.useProgram(U),z.uniform1i(z.getUniformLocation(U,"frmBUFFER"),3));z.activeTexture(z.TEXTURE2);z.enable(z.DEPTH_TEST);z.depthFunc(z.LEQUAL);mj.now=0;mj.lb=0;Zi=!0}D[13](Y,bi,c,1!=f.nodecals,1==f.selcolor,E)}window.setupGL=Vi;var ij;
window.chFFg=function(a,b){let c=b*b*2;c%4&&(c+=2);a=Lh(a,c);E?T.queue.writeBuffer(nj,0,a):(z.activeTexture(z.TEXTURE2),z.bindTexture(z.TEXTURE_2D,ij),z.pixelStorei(z.UNPACK_ALIGNMENT,1),z.texImage2D(z.TEXTURE_2D,0,z.LUMINANCE_ALPHA,b,b,0,z.LUMINANCE_ALPHA,z.UNSIGNED_BYTE,a),jj(),z.pixelStorei(z.UNPACK_ALIGNMENT,4))};var lj,oj;window.shk=function(){oj=!0;E&&(Ui=Fa=0)};
function pj(a){a&&(z.activeTexture(z.TEXTURE3),z.uniform1i(Ci,3),z.bindFramebuffer(z.FRAMEBUFFER,kj),z.viewport(0,0,Ri,Si),z.bindTexture(z.TEXTURE_2D,ui),z.clearColor(0,0,0,0),oj&&z.clearColor(1,1,1,1),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),oj&&z.clearColor(0,0,0,0),z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.ONE,z.ONE),Ea?Oi.drawArraysInstancedANGLE(z.TRIANGLES,0,6,a):z.drawArraysInstanced(z.TRIANGLES,0,6,a),z.bindTexture(z.TEXTURE_2D,lj),z.bindFramebuffer(z.FRAMEBUFFER,null),
z.uniform1i(Ci,0),z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA))}
function qj(){if(rj){var a=rj,b=a.I,c=a.jc,d=a.kc,e=a.Wb,g=a.Xb,h=a.lc,k=a.Yb,p=Date.now()-b;150<p&&(p=150);var r=sj(),t=r.x;r=r.y;var u=Date.now()-jf||0,v=Date.now()-df||0;150<u&&(u=150);150<v&&(v=150);t=jf<b?t*p:t*u;r=df<b?r*p:r*v;Math.sign(t)!=Math.sign(tj)&&tj?t+=tj:tj=t;Math.sign(r)!=Math.sign(uj)&&uj?r+=uj:uj=r;150>p?(uc=k+-(k-h)/150*p,a.vb?(a=vj(c,d,k,e,g),c=vj(c,d,uc,e,g),sc=e-(a.x-c.x),tc=g-(a.y-c.y)):(sc=e+-(e-c)/150*p,tc=g+-(g-d)/150*p)):(a.vb?(a=vj(c,d,k,e,g),c=vj(c,d,h,e,g),sc=e-(a.x-
c.x),tc=g-(a.y-c.y)):(sc=c,tc=d),df=jf=Date.now(),kf=sc+t,ef=tc+r,uc=h,rj=void 0);sc+=t;tc+=r;Tf(-sc,-tc);E?T.queue.writeBuffer(mi,0,new Float32Array([1/uc])):z.getParameter(z.CURRENT_PROGRAM)==U&&z.uniform1f(qi,Y/uc);D[19](uc)}}var tj,uj;function sj(){var a=2.5*parseInt(f.scrollSpeed)/100;return{x:1680*gf*uc*a/1E3,y:1680*$e*uc*a/1E3}}var wj=0,Wi,xj,yj;
window.brconf=function(a,b,c,d,e,g,h,k,p){Wi=d;xj=k;yj=p;E?T.queue.writeBuffer(ei,0,new Float32Array([a,b,c,d,e,g,h,k])):(z.useProgram(U),z.uniform4f(Mi,a,b,c,d),z.uniform4f(Li,e,g,h,k),z.useProgram(W),z.uniform4f(Ji,a,b,c,d),z.uniform4f(Ki,e,g,h,k))};var zj=()=>{if(0!=gf||0!=$e||rj){var a=sj(),b=a.x;a=a.y;var c=Date.now()-jf,d=Date.now()-df,e=!1,g=0,h=0;bf&&(h=Math.sqrt(b**2+a**2)/bf,c>h&&(d=c=h,e=1),g=b/h,h=a/h);rj?qj():(b&&(sc=kf+b*c-.5*g*c**2),a&&(tc=ef+a*d-.5*h*d**2),Tf(-sc,-tc),e&&($e=gf=0))}};
function mj(a,b){B.gb||(performance.now(),Mc||requestAnimationFrame(mj),a=mj.now,mj.lb++,1==f.hlffps&&mj.lb%2||(a=b||Date.now()-Gc+25*D[48](),mj.now=a,Date.now(),zj(),z.useProgram(U),Pg(),z.uniform1f(vi,a),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),b=D[14](),Ui&&pj(b),Aj(a),fj(Hi),Bj(b),Cj(b),ee.update&&ee(1),Mc&&(0<Bc&&clearInterval(Bc),Uf.toBlob(function(c){var d=Dj;c=URL.createObjectURL(c);d.href=c;d.download=`${Ej++}.png`;d.click();window.URL.revokeObjectURL(c);setTimeout(function(){setTimeout(Ec,
9);mj(0,25*B.Y+16)},20)})),Fj&&Fj.getVideoTracks()[0].requestFrame(),z.finish(),Gj()))}
var Gj=()=>{Xc++;if(!Q&&100<=Date.now()-wj&&(wj=Date.now(),D[171](),3>te)){var a=B.now()/6E4,b=D[166]();if(b){var c=a/b;if(1>=c){var d=Math.round(510*c);c=Math.round(510*(1-c));255<d&&(d=255);255<c&&(c=255)}else d=255,c=0}1==te?300<Xc&&(ti(m("tpCPU"),"CPU:"+(Kc/10).toFixed(2)+"%"),ti(m("tpGPU"),~~(1E3*Xc/(performance.now()-Wc)+.75)+"FPS"),re.show(),Wc=performance.now(),Xc=0):(R(m("tpCPU")),ti(m("tpGPU"),""),R(re));ti(m("tpTM"),Fc(B.now()));Hj&&(Hj.style.color=`rgb(${d},${c},0)`,a>b+5&&J(Hj));void 0!=
Wi&&(a=25*D[48](),b=n[21],a=1E3*Math.floor(a/1E3),Wi>a?(c=M(506)+` (${yj||0}/${b}) `+Fc(Wi-a),d="#ff0"):(c=M(505)+` (${yj}/${b}) `+Fc(Wi+xj-a),d="red"),yj==b&&a>Wi+xj&&(c=M(507),d="#f0f"),Ij&&(Ij.style.color=d,ti(Ij,c)));Kc=0}};function Jj(a){a?Jj.time=performance.now():q("c++",performance.now()-Jj.time)}window.perfw=Jj;
function Cj(a){a&&(z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA),Ea?Oi.drawArraysInstancedANGLE(z.TRIANGLES,0,6,a):z.drawArraysInstanced(z.TRIANGLES,0,6,a),z.disable(z.BLEND))}var we=!1,dj;
function Bj(a,b){if(1020>window.innerWidth)if(we)b=!0;else return;z.uniform2fv(Di,[0,0]);z.uniform1f(qi,1);z.uniform1i(Ci,1);var c=l.V,d=window.innerHeight-yg-l.W,e=zg,g=yg;b?(g=e=c=Ag(),c=window.innerWidth/2-e/2,d=window.innerHeight/2-g/2,z.uniform2fv(gj,[-Y*c,-Y*d])):z.uniform2fv(gj,dj);z.uniform1f(xi,e*Y);z.viewport(c*Y,Y*d,e*Y,g*Y);Cj(a);z.uniform1i(Ci,2);Cj(1);z.uniform1i(Ci,0);z.uniform2fv(Di,[sc,tc]);z.uniform1f(qi,Y/uc);z.viewport(0,0,Ri,Si);we&&!b&&Bj(a,1)}
function Ag(){return Math.min(window.innerWidth,window.innerHeight)-128}var bj,gj;
function Aj(a,b){var c=Math.floor(a/100)%5;z.useProgram(W);z.uniform1f(Fi,Y/uc);fj(Gi);z.uniform1f(zi,c);z.uniform1f(yi,a);uf&&Ye||z.drawArrays(z.TRIANGLES,0,6);c=l.V;var d=window.innerHeight-yg-l.W,e=zg,g=yg;if(1020>window.innerWidth)if(we)b=!0;else{z.viewport(0,0,Ri,Si);z.useProgram(U);return}if(b){var h=Ag();g=e=h;c=window.innerWidth/2-e/2;d=window.innerHeight/2-g/2;z.uniform2fv(bj,[-Y*c,-Y*d]);if(Aa)for(var k=document.getElementsByClassName("alertdmg"),p=0;p<k.length;p++)k[p].show();qd("bigMap");
m("bigMap").style.width=h+"px";m("bigMap").style.height=h+"px"}else z.uniform2fv(bj,dj);uf&&Ye?(z.enable(z.SCISSOR_TEST),z.scissor(Y*c,Y*d,Y*e,Y*g),z.clearDepth(-.9),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),z.clearDepth(1),z.disable(z.SCISSOR_TEST)):(z.viewport(Y*c,Y*d,Y*e,Y*g),z.uniform1i(Bi,1),z.uniform2fv(Ei,[0,0]),z.uniform1f(Fi,Y*e/32/D[47]()),z.drawArrays(z.TRIANGLES,0,6),z.uniform1i(Bi,0),z.uniform2f(Ai,Ri,Si),z.uniform2fv(Ei,[sc,tc]),z.viewport(0,0,Ri,Si));z.useProgram(U);we&&!b&&Aj(a,
1)}var Zi=!1,$i;function cj(a){$i&&(1<a?(a=(a-1)/.5,1<a&&(a=1),a=.5*(1-a)):a=.5,Kj!=a&&(Kj=a,a=`calc(-${50*(Y-1)}% + ${a}px)`,Uf.style.transform=`scale(${1/Y}) translate(${a},${a})`))}var Kj;function vj(a,b,c,d,e){var g=Ri,h=Si;return{x:a*c+-d+(g-c*g/Y)/2,y:b*c+-e+(h-c*h/Y)/2}}function ih(a,b){var c=uc,d=Uf.width,e=Uf.height;return{x:a*c+-sc+(d-c*d)/2,y:b*c+-tc+(e-c*e)/2}}var rj;
function lf(a,b,c,d){var e=D[47](),g=window.innerWidth,h=window.innerHeight,k=1!=f.unlimitedZoom&&!Q;if(!(a*(g-(!Aa&&l.R||0))/32>e||a*h/32>e)||!k){cj(a);.25>a&&k&&(a=.25);0>a&&(a=0);qj();if(!b||we||!Aa&&b<l.R||1!=f.zoomPointer)b=Math.floor(g/2),c=Math.floor(h/2);uj=tj=0;rj={jc:b,kc:c,Wb:sc,Xb:tc,I:Date.now(),lc:a,Yb:uc,vb:1};d&&(rj.I-=500,qj());Lj()}}
function Mj(a){if(!Hg&&(Ke||a.target==Uf)&&(a.ctrlKey&&a.preventDefault(),a.clientX>l.Va||Ke||!a.clientX)){var b=a.deltaY/550,c=1+parseFloat(f.zoomMult)/200+Math.abs(b);lf((0<Math.sign(b)?c:1/c)*uc,a.clientX,a.clientY)}}function Lj(){if(!E){var a=window.innerWidth+l.R,b=window.innerHeight,c=uc*a,d=uc*b;Nj(-sc+(Y-uc)*a*.5,-tc+(Y-uc)*b*.5,-999999999,0);Oj(c,d,0,0,0)}}var Pj,Qj;
Pg=function(){if(sc!=Pj||tc!=Qj){Pj=sc;Qj=tc;D[20](-sc,-tc);var a=[sc,tc];E?(hh&&gh(hh[0],hh[1]),T.queue.writeBuffer(ki,0,new Float32Array(a))):(z.useProgram(W),z.uniform2fv(Ei,a),z.useProgram(U),z.uniform2fv(Di,a),Lj())}};function Qi(){z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.REPEAT);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.REPEAT)}
function jj(){z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE)}var Rj,dc;
function Sj(a){z.activeTexture(z.TEXTURE6+a);if(!Rj[a]){a&&!Rj[a-1]&&Sj(a-1);z.useProgram(U);const c=dc;var b=z.createTexture();Rj[a]=b;z.bindTexture(z.TEXTURE_2D,b);Qi();z.texImage2D(z.TEXTURE_2D,0,Tj,c,c,0,Tj,z.UNSIGNED_BYTE,null);z.uniform1i(z.getUniformLocation(U,`img_common[${a}]`),6+a);z.useProgram(W);z.uniform1i(z.getUniformLocation(W,`img_common[${a}]`),6+a)}return Rj[a]}var Tj;
window.setup3Dtexture=function(a,b,c,d){Lh(c,a);performance.now();Tj=z.RGBA;performance.now();const e=dc;Rj||=[];a=Lh(c,a);c=Math.floor(b/(e*e));b=b/e%e;var g=a.length/(4*e),h=0;do{var k=g-h;b+k>=e&&(k=e-b);z.bindTexture(z.TEXTURE_2D,Sj(c));var p=new Uint8Array(a.buffer,a.byteOffset+h*e*4,k*e*4);z.texSubImage2D(z.TEXTURE_2D,0,0,b,e,k,Tj,z.UNSIGNED_BYTE,p);h+=k;b=0;c++}while(h<g);D[165](d)};var nj,kj,Y=1;
function hj(){var a=Math.round(window.innerWidth*Y),b=Math.round(window.innerHeight*Y);Ri=a;Si=b;Uf.width=E?window.innerWidth:a;Uf.height=E?window.innerHeight:b;var c=m("menbak1s")&&m("menbak1s").getBoundingClientRect();D[18](Uf.width,Uf.height,window.innerWidth,window.innerHeight,c.y);E?(console.log(E),T.queue.writeBuffer(li,0,new Float32Array([window.innerWidth,window.innerHeight])),Uj&&(Uj.destroy(),Uj=T.createTexture({size:[Ri,Si],format:"depth24plus",usage:Vj.RENDER_ATTACHMENT}),Wj.depthStencilAttachment.view=
Uj.createView(),Xj&&Xj())):(z.useProgram(W),z.uniform2f(Ai,a,b),z.useProgram(U),kj&&(kj.width=a,kj.height=b,z.bindTexture(z.TEXTURE_2D,lj),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,a,b,0,z.RGBA,z.UNSIGNED_BYTE,null),Qi()),z.uniform2f(wi,a,b));Tf(-sc,-tc,1);ye()}window.animTimer=function(){};function fj(a){Ea?Yj.bindVertexArrayOES(a):z.bindVertexArray(a)}var Yj,Oi;function ej(){return Ea?(Yj||=z.getExtension("OES_vertex_array_object"),Yj.createVertexArrayOES()):z.createVertexArray()}
Array.prototype.put=function(a){this[this.length]=a};Array.prototype.add=function(a){0>this.indexOf(a)&&(this[this.length]=a)};function vh(a,b){for(let c=0;c<a.length;c+=2)if(a[c]==b)return c;return-1}var B={},Zj=new Float32Array(4),ak=new Float32Array(3),bk=new Float32Array(1),ck=new Uint32Array(2);new Uint32Array(3);window.bufferDate=function(a,b){of[0]=a;a=fi;1073741823<=b&&(b-=1073741823,a=gi);T.queue.writeBuffer(a,48*b+28,of)};
window.bufferIMG3=function(a,b,c){ck[0]=a;ck[1]=b;a=fi;1073741823<=c&&(c-=1073741823,a=gi);T.queue.writeBuffer(a,48*c+24,ck)};window.bufferRotation=(a,b)=>{bk[0]=a;a=fi;1073741823<=b&&(b-=1073741823,a=gi);T.queue.writeBuffer(a,48*b+32,bk)};window.bufferPhysics3=function(a,b,c,d){ak[0]=a;ak[1]=b;ak[2]=c;a=fi;1073741823<=d&&(d-=1073741823,a=gi);T.queue.writeBuffer(a,48*d+12,ak)};var dk;
window.bufferGL3=(a,b,c,d,e,g,h,k,p,r,t,u,v)=>{let w=new Float32Array(11),A=new Uint32Array(w.buffer);w[0]=a;w[1]=b;w[2]=c;w[3]=d;w[4]=e;w[5]=g;A[6]=h;A[7]=k;w[8]=p;A[9]=r;A[10]=t;A[11]=u;a=fi;1073741823<=v&&(v-=1073741823,a=gi);T.queue.writeBuffer(a,48*v,A);v>ek&&(ek=v)};window.bufferInfo2=(a,b)=>{of[0]=a;a=fi;1073741823<=b&&(b-=1073741823,a=gi);T.queue.writeBuffer(a,48*b+44,of)};window.bufferHide=a=>{bk[0]=-9;let b=fi;1073741823<=a&&(a-=1073741823,b=gi);T.queue.writeBuffer(b,48*a+8,bk)};
function Nj(a,b,c,d){ak[0]=a;ak[1]=b;ak[2]=c;E?(a=fi,1073741823<=d&&(d-=1073741823,a=gi),T.queue.writeBuffer(a,48*d,ak)):(z.bindBuffer(z.ARRAY_BUFFER,Zh),z.bufferSubData(z.ARRAY_BUFFER,12*d,ak))}window.bufferPos=Nj;window.bufferPhysics=function(a,b,c,d,e){E||(Zj[0]=a,Zj[1]=b,Zj[2]=c,Zj[3]=d,z.bindBuffer(z.ARRAY_BUFFER,$h),z.bufferSubData(z.ARRAY_BUFFER,16*e,Zj))};
window.bufferIMG=function(a,b,c,d,e){Zj[0]=a;Zj[1]=b;Zj[2]=c;Zj[3]=d;z.bindBuffer(z.ARRAY_BUFFER,Yh);z.bufferSubData(z.ARRAY_BUFFER,16*e,Zj)};function Oj(a,b,c,d,e){E||(Zj[0]=a,Zj[1]=b,Zj[2]=c,Zj[3]=d,z.bindBuffer(z.ARRAY_BUFFER,ai),z.bufferSubData(z.ARRAY_BUFFER,16*e,Zj))}window.bufferMargin=Oj;window.bufferColor3=(a,b)=>{of[0]=a;a=fi;1073741823<=b&&(b-=1073741823,a=gi);T.queue.writeBuffer(a,48*b+36,of)};
window.bufferK3=(a,b)=>{of[0]=a;a=fi;1073741823<=b&&(b-=1073741823,a=gi);T.queue.writeBuffer(a,48*b+40,of)};window.bufferColor=function(a,b){bk[0]=a;z.bindBuffer(z.ARRAY_BUFFER,Yh);z.bufferSubData(z.ARRAY_BUFFER,16*b+8,bk)};
window.sresizeBuffer=function(a,b){if(E){var c=b?gi:fi;a={size:48*(a+4E4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1};b?gi=T.createBuffer(a):fi=T.createBuffer(a);b=b?gi:fi;a=T.createCommandEncoder();a.copyBufferToBuffer(c,0,b,0,c.size);b=a.finish();T.queue.submit([b]);c.destroy();ni()}else Pi(Yh,a),Pi(Zh,a),Pi($h,a),Pi(ai,a)};var Lb=["European","Arab","Asian"];
function fk(a){return`<span class="raceIcon" style="background-position-y:-${20*a}px"></span>`}function Eh(a,b,c){if(a)return c&&(a=a.replace("%d",c)),a.replace("%s",b)};function gk(){for(let a=0,b=hk.length;a<b;a++){let c=hk[a];c&&(n[a]="checkbox"==c.type?c.checked?1:0:parseInt(c.value))}return n}var ik,qb;B.Ra=2880;B.Sa=12;function jk(){let a=ab(bb);for(let b=0;b<n.length;b++)a[b]=n[b];D[24](n.length)}
function kk(){m("mapconfiguration")&&""!==m("mapconfiguration").innerHTML&&!D[67]()&&(gk(),1024<n.length&&(n.length=1024),f.mapConfig4=`[${n.join()}]`);B.fb=Math.round(555555*Math.random()+1);n[46]=B.fb;n[0]=lk(n[0],n[16],n[29]);let a=ab(bb);for(let b=0;b<n.length;b++)a[b]=n[b];D[24](n.length);return B}window.SetupGameConfig=kk;var Mc,Dj,Ej,Fj;
async function Yb(){od&&(od.innerHTML="");Vb.innerHTML=M(53);l.qb||(l.qb=1);B.l&&(mk(),B.pc=0);D[47]()||kk();B.va=0;B.gb=0;bg=m("msgs1");B.l||(location.hash="");qd("content");B.Y?B.Jb=25*B.Y:(B.I=Date.now(),B.Y=0,B.Jb=0);B.vc=Date.now();B.l||Mf();B.now=Cc;B.paused=0;B.va=0;Dc();performance.now();B.Hb=!0;B.ab=25;var a=B.ab;0===l.ab&&(a+="&deg;C");m("temperature")&&(m("temperature").innerHTML=a);uc=1;await Vi(D[280](),Q?0:n[12]);D[101](~~(1E4*Math.random()));ee(55);nk.check();Q&&(Dd(),Fd(),D[48]()&&
Ia("Editing savegames may be unstable"))}function Db(a){J(a.parentNode.parentNode)}
function nk(){J(ok);m("playersinfo")&&(m("playersinfo").innerHTML="");Yf();window.addEventListener("keydown",Gg);window.addEventListener("keyup",Eg);window.addEventListener("mousemove",fh);window.onblur=Dg;window.addEventListener("touchstart",Xg,{passive:!1});window.addEventListener("touchmove",dh);window.addEventListener("touchend",eh);window.addEventListener("wheel",Mj,{passive:!1});window.addEventListener("mousedown",kh);window.addEventListener("mouseup",lh);D[149](1==f.deathsounds);ca.mb=performance.now()-
ca.mb;B.l?(ik&&G(32),D[65]()):pk();B.Hb=!1}window.startGameStep0=nk;nk.check=function(){nk.load++;nk.load===nk.target&&nk()};nk.check=nk.check;nk.target=2;function nh(a){if(a||!ha)a=document.documentElement,a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}var qk=document.getElementsByTagName("main")[0];ha||(window.onbeforeunload=function(){return"Are you sure to leave this page?"});
window.onunload=()=>{db&&G(57)};var rk,ok,Vb;
function sk(a){dk=new Float32Array(12);new Uint32Array(dk.buffer);Xe||(f.bshrct||(f.bshrct='{\n"basic":[\n"ARROWUP",\n"ARROWDOWN",\n"ARROWLEFT",\n"ARROWRIGHT",\n"X",\n"0",\n"<",\n"Z",\n"ESCAPE",\n"ENTER",\n"DELETE",\n"TAB",\n"Q",\n" ",\n"CONTROL",\n"SHIFT",\n"ALT",\n"F1",\n"F2",\n"F3",\n"F4",\n"F5",\n"F6",\n"F7",\n"F8",\n"F9",\n"F10",\n"F11",\n"F12"\n],"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"]}'),Xe=
JSON.parse(f.bshrct));rk=!0;Td();Pb();if(!z&&!E)return Ia("Your browser doesnt support webgl");qk.appendChild(Uf);J(m("RandomMap"));J(m("CustomMap"));J(m("game"));J(m("bak"));J(m("index"));ca={mb:performance.now()};nk.load=0;if(ik&&tk){var b=D[70]();n[0]=Math.round(Math.sqrt(15600*b));b=ab(bb);for(let c=0;c<n.length;c++)b[c]=n[c];D[24](n.length)}jc(ik?"reveal":"bless");a&&"true"==f.fullscreen&&nh();Q?(l.V=0,l.W=0,l.ub=0,yg=zg=171,l.R=171,l.Va=171):rd?(yg=zg=l.R=151,l.Va=151,l.ub=0,l.V=0,l.W=0):(l.R=
151,yg=zg=128,l.Va=151,l.ub=0,l.V=4,l.W=31);D[119](l.R,rd);a=m("minimap");a.style.width=zg+"px";a.style.height=yg+"px";a.style.left=l.V+"px";a.style.top=l.W+"px";ok=K("div",document.body);ok.id="loading";Vb=K("div",ok);K("div",ok,"TZA.RED");a=K("div",ok);K("div",a).className="svgnehhon";K("div",a,"NEHHON NETRAL ENGINE");if(Q){if(!D[67]())for(n=ja,a=ab(bb),b=0;b<n.length;b++)a[b]=n[b];D[102](n.length)}else D[47]()||kk();G(25);if(B.l)Ca("start game");else D[204]();B.l||Kh();m("mapconfiguration")&&Db(m("mapconfiguration"));
E?uk():cc()}window.startGame=sk;var vk,wk;window.updKstate=function(a,b,c){vk&&vk[a]&&(vk[a].className=`${b&&"pldeath"||""}${c&&" pldisc"||""}`);c&&wk&&wk[a]&&(wk[a].innerHTML="")};window.updKping=function(a,b){if(te)if(wk&&wk[a])wk[a].innerHTML=2147483647!=b&&b+"ms"||"host";else D[158]()};window.rstPLI=function(){m("playersinfo").innerHTML="";vk=[];wk=[]};
window.setupPlayerInfo=function(a,b,c,d,e,g,h,k,p,r,t){if(!(32<a)){b=Sc(p,b);p=m("playersinfo");var u=document.createElement("div");u.ya=t;h&&!r&&te&&(wk[a]=K("span",u,2147483647!=h&&h+"ms"||"host","font-size:8px;color:#00ffb8"));b=K("span",u,b,`border-color:${k&&"#f00"||"#0f0"}`);b.className=`${g&&"pldeath"||""}${r&&" pldisc"||""}`;vk[a]=b;K("div",u,"",`background:rgb(${c},${d},${e})`);a=!0;for(let v of p.children)if(v.ya<t){p.insertBefore(u,v);a=!1;break}a&&p.appendChild(u)}};
function Ed(a){for(var b=a.length,c=0;c<b;m(a[c++]).style.display="block");}var zg=128,yg=128;window.popInfo=function(a,b){Q||ti(m("pop"),a+"/"+b)};window.addEventListener("offline",function(){La("Offline","#ff0000")});window.addEventListener("online",function(){La("Online","#00ff00")});var Mb=!1;function xk(a){if(!a||!a.target||"BUTTON"!=a.target.tagName){if(this.zb&&!f.sid)return Rb();B.l&&yk(5);a=this.nb;Mb=!0;Nb(a);Pb()}}function zk(){let a=Qc(M(53));a.id="loadingOnline";O("button",a,3,"margin:auto;margin-top:19px;display:block").onclick=function(){location.href=""}}
function Ak(a,b){let c=1;do{let e=Bk(a,c);c+=3;let g=Bk(a,c);c+=3;let h=a[c++],k=a[c++],p=a[c++],r=a[c++],t=a[c++],u=a[c++],v=Bk(a,c);c+=3;var d=a[c++];let w=a[c++],A=Ck(new Uint8Array(a.buffer,c,d));c+=d;d=Ck(new Uint8Array(a.buffer,c,w));c+=w;eg[e]={name:A,id:g,clan:d,avatar:h,role:k,team:p,race:t,rgb:v,state:r,flag:u};ik&&(Dk(D[56](0,t,v,e,0,g),17,A),Ek());jc("unitdone");b&&ag(Eh(M(531),"<span>"+Sc(e)+"</span>"),"4bff4b")}while(c<a.length)}
var Fk={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},rd,og,tk;
function Gk(){ik=0;tk=Hk=og=l.s=0;Ik&&(J(Ik),Ik=void 0);m("mult").children&&m("mult").insertBefore(m("gameList"),m("mult").children[1]);m("gameList")&&m("gameList").show();m("mapconfiguration")&&Db(m("mapconfiguration"))}function ob(a){Gk();m("game")&&P("game");B.l=0;B.id=void 0;D[266](1);Bh=void 0;l.eb=!1;F.close();va();Nf();D[69]();a&&a.constructor==String&&Ia(a)}
function qe(){if(m("menubefore")&&m("menuafter")&&m("resourcesbefore")){var a=f.menuOpacity/100;m("menubefore").style.opacity=a;m("menuafter").style.opacity=a;m("resourcesbefore").style.opacity=a}}function sg(a,b){a=K("input",a);a.value=b;a.type="range";Jk(a);return a}function Jk(a){var b=K("span",a.parentNode);b.className="rangeval";a.H=b}
function ze(){if(B.v){if(!Q&&!vf)D[98]();Hg=!0;if(!m("playingMenu")){var a=Qc("");a.id="playingMenu";document.body.style.cursor="";var b=K("div",a);B.l&&Fa||(O("button",b,73).onclick=Xd);var c=O("button",b,860);c.className="updnew";c.onclick=zf;!rd&&!Aa||Q||(O("button",b,463).onclick=Oc);n&&!Q&&(O("button",b,48).onclick=Kk);ha||(O("button",b,74).onclick=nh);O("button",b,75).onclick=Yd;b=K("div",a);let e=L("div",a,"padding-bottom:37px;position:relative"),g=K("div",e,M(461)+"...","cursor:url(nehhon/hand.gif),default;position:absolute;bottom:0px;right:7px;font-size:10px;color:#ffd75d8f");
e.className="shw3";g.onclick=()=>{e.className="";J(g);e.style.cssText=""};c=[{i:71,wa:1,cc:n[34]/100,min:1,max:10,f:function(){this.H.innerHTML="x"+this.value;D[173](ce(this))}},{i:76,wa:1,B:"zoomMult",f:Lk},{i:77,wa:1,B:"scrollSpeed",f:Lk},{i:446,B:"stdcolors",ga:rf},{i:79,B:"nightcycle"},{i:875,B:"selcolor",ga:()=>{D[273](1==f.selcolor)}},{i:82,B:"deathsounds"},{i:404,B:"unlimitedZoom"},{i:456,B:"scrollmouse"},{i:397,B:"zoomPointer"},{i:878,B:"hlffps"}];"true"!=f.theme&&c.unshift({i:78,wa:1,B:"menuOpacity",
f:Lk,ga:qe});for(let r of c){c=r.cc||f[r.B];var d=r.wa?b:e;if(r.wa){let t=sg(K("div",d),c);t.oninput=r.f;t.oninput(1);t.onchange=()=>{f[r.B]=t.value;r.ga&&r.ga()};r.min&&(t.min=r.min,t.max=r.max)}else le(d,t=>{f[r.B]=t?1:0;r.ga&&r.ga(t)},"true"==c||1==c);O("div",d,r.i)}b=L("div",a,"position:relative;padding-top:44px");c=K("div",a);let h=sg(K("div",c),f.soundRange);h.oninput=Lk;h.oninput();h.addEventListener("input",()=>{nc.gain.value=ce(h)/100;f.soundRange=h.value});O("div",c,81);let k=sg(K("div",
c),f.musicRange);k.oninput=Lk;k.oninput();k.addEventListener("input",()=>{wc.volume=ce(k)/100;f.musicRange=k.value});O("div",c,80);O("span",b,833,"position:absolute;top:4px;left:19px;font-size:11px;color:#ffd75d8a");d=[{i:"Original",B:0},{i:"Orchestral version by Pau Garriga",B:4,a:"https://www.youtube.com/watch?v=zNg7e1N7ZZo"},{i:"Sharp Rain version",B:1,a:"https://www.youtube.com/user/rainheart666787/featured"},{i:"Diemiurgo additional track",B:2,a:"https://soundcloud.com/diemiurgo/tzar-adp-final"},
{i:"Remastered",B:3},{i:"Mute",B:"mute"}];c=f.favMusic;let p;for(let r of d){let t=le(b,()=>{f.favMusic=r.B;p==t?(p.checked=1,Ff(p,0)):(p&&(p.checked=0,p.style.backgroundPositionY=""),p=t,yc())},r.B==c);r.B==c&&(p=t);d=K("div",b,!r.a&&r.i||"");r.a&&(d=K("a",d,r.i),d.href=r.a,d.target="_blank")}sf=K("button",a);sf.className="closeIcon";sf.onclick=()=>{R(a.parentNode.parentNode);if(!Q&&!vf)D[99]();Hg=!1;Of()}}m("playingMenu").parentNode.parentNode.style.display=""}}function Yd(){location.href=""}
function Mk(){return parseInt(f.color.substr(1),16)}function Nk(a){for(var b=$b(D[59](a.length),a.length),c=0;c<a.length;c++)b[c]=a[c]}window.nlsndts=function(a,b,c){a=Lh(a,4*b);b=new Uint8Array(2+a.length);b[1]=c;b.set(a,2);q(b);G(33,b)};
Jb=function(){var a=Qc("",1);a.id="gameForm";let b=L("div",a,"padding:16px;background:#ffffff08;box-shadow: 0 0 20px #000;border:1px solid rgb(243 205 90/8%);display:grid;grid-template-columns:auto auto;gap:14px;text-align:right;font-size:12px;align-items:center");O("span",b,86);let c=K("input",b);c.spellcheck=!1;c.value=f.gameDescription||Eh(M(563),l.name);c.yc=29;O("span",b,87);let d=L("input",b,"width:39px");d.type="number";d.min=2;d.max=50;d.value=8;O("span",b,85);let e=le(b,()=>{},!1),g;f.sid&&
(O("span",b,440),g=le(b,()=>{},!1));O("button",a,2,"margin-top:18px;font-size:14px;padding:8px;color:#0f0;text-transform:uppercase;width:100%").onclick=()=>{var h=c.value,k=d.value,p=e.checked,r=g&&g.checked;if(D){Pb();Of();l.s=1;l.A={description:h.substr(0,30),max:parseInt(k),Zb:p,ac:r};2>l.A.max&&(l.A.max=2);50<l.A.max&&(l.A.max=50);f.gameDescription=l.A.description;F.host=!0;h=l.A;Ok();k=h.max;p=h.Zb;r=h.ac;var t=l.name;let v=Ga(h.description);t=Ga(t);var u=new ArrayBuffer(5+v.length+t.length);
u=new Uint8Array(u);u[1]=k;u[2]=p;u[3]=r;u[4]=v.length;u.set(v,5);u.set(t,5+v.length);k=Pk(0,u);Ca("crt game: "+h.description);Qk?Rk(k):(zk(),F.C.send(k));B.l=1;l.eb=!0}Db(a)}};function Xd(){Bh&&Q&&Kh();D[176]()}
window.svggme2=function(){var a=D[42](),b=ac(),c=Lh(a,b[0]);b=b[1];q(c,a);if("true"==f.multithreading){a=c;c=new Uint8Array(c.length);for(var d=0;d<c.length;d++)c[d]=a[d]}c=new Blob([new Uint32Array([b]),c],{type:"application/octet-binary"});b=URL.createObjectURL(c);c=document.createElement("a");c.style="display: none";c.href=b;b="savegame";Q&&(D[240](0),b=Od||"map");c.download=b+".tzared";c.click()};
function Af(a,b){a=URL.createObjectURL(a);var c=document.createElement("a");c.style="display: none";c.href=a;c.download=b;c.click()}function Sk(){for(var a=document.getElementsByClassName("onlPlayer"),b=0;b<a.length;b++)J(a[b]);1==D[70]()-D[68]()?(Tk.J=void 0,B.id=void 0,B.l=0,l.A=void 0,F.close(),Nf(5),l.s=0,D[69](1),sk()):(B.Vb||kk(),G(7),D[64](~~(1E4*Math.random())))}var Uk,Hk;
function Vk(){if(!Hk||B.v){if(Wk){for(let a of Wk.children)a&&(a.style.width="",a.style.opacity="");Wk.style.cssText=""}clearInterval(Vk.Ta);m("wtr")&&(m("wtr").textContent=M(526),m("quitbutton").dataset.title="")}else Hk--,9>=Hk&&1<=Hk&&jc("crusade"),Uk.innerHTML=Hk}window.hdpsnd=function(a,b,c){a=$b(a,b);(c=Xk(c))&&(c.s||F.host)&&c.send(a)};var Hj,Ij,kb;
function pk(){!se&&F.host&&G(27);if(!Q){let a=D[166]();a&&(Hj=K("span",m("topinfo"),`<span style='font-size:15px'>\u262e</span> ${a}:00`));n[8]&&(Ij=K("span",m("topinfo"),"","",1))}Of();m("alert")&&P("alert");m("waitList")&&Db(m("waitList"));B.v=1;B.I=Date.now();Dc();Q||Ac();rk=!1;D[41]();E||mj();E&&La("If you have graphic problems go to #Settings and change GPU to WebGL2")}window.startMovement0=pk;
function Wf(){let a=K("div",document.body);a.className="gifsearch";let b=K("input",a);b.type="text";b.placeholder="\ud83d\udd0e\ufe0e";b.focus();let c=K("div",a),d=K("div",c),e=K("div",c),g=0,h=0,k=K("button",a);k.className="closeIcon";k.onclick=()=>J(a);let p=async r=>{var t=`https://g.tenor.com/v1/search?q=${b.value}&key=${"LIVDSRZULELA"}&limit=${20}`;g?t+="&pos="+20*g:g=0;t=await (await fetch(t)).json();if(r==h){r=1;for(let u of t.results)t=K("img",r?e:d),t.src=u.media[0].nanogif.url,t.onclick=
()=>{q(u);Xf(u.media[0].gif.url);J(a)},r^=1}};c.onscroll=function(){c.offsetHeight+c.scrollTop>=c.scrollHeight&&(g++,p(h))};b.oninput=()=>{mb(e);mb(d);g=0;h++;p(h)}}var Ic=document.getElementsByTagName("main")[0],Hg=!1;function Of(){Hg=!1;Ic.style.cssText=""}function yk(){P("game");Gk();for(var a=document.getElementsByClassName("onlPlayer"),b=0;b<a.length;b++)J(a[b]);Tk.J=void 0;va();B.id=void 0;B.l=0;l.A=void 0;F.close();Nf(5);l.s=0;D[69]()}
function Yk(a){a=parseInt(a);if(2>a||!a)a=2;50<a&&(a=50);m("mmplayers").innerHTML=a;a!==l.A.max&&(l.A.max=a,Zk());return a}window.updateMax=Yk;function $k(){var a=`<p id="onlineTopInfo"></p>
<h3 id="wtr"></h3>
<div id="multi21">
<table class="players">
<thead>
${'<tr style="font-size:16px;text-transform:uppercase;color:var(--color1);border-bottom:2px solid #6e6e6e3b;"><td></td><td></td><td style="padding:15px 11px;">'+(!D[67]()&&M(103)||"")+'</td><td id="onltms">'+M(21)+' <span id="teamlock"></span></td><td id="onlrd">'+M(543)+"</td></tr>"}
</thead>
<tbody id="multiplayertable">
</tbody>
</table>
<div id="chat">
<div id="rominfo" style="font-size:13px;margin-left:10px;color:#ad995f"></div>
<ul id="msgs">
</ul>
<input id="msginput" type="text" autocomplete="off" placeholder="chat"/>
</div>
</div>
<div id="showGameInfo"></div>
<div id="buttons"></div>
<div id="gvw"></div>
`;return m("game")?!1:(a=K("div",document.getElementsByTagName("main")[0],a),a.id="game",a.className="playermenu",!0)}var al,bl;function cl(){if(ik)if(2!=al){var a=D[70](),b=1==dl?3:2==dl?4:5==dl?1:2,c=~~(a/b),d=1==b?M(717):c;a%=b;for(let e=0;e<b-1;e++)d+="v"+(c+(0<a?1:0)),a--;m("rominfo").innerHTML=d}else m("rominfo").innerHTML=M(717);else{b=ab(bb);c="";d=!0;for(a=1;64>a;a++)1<b[a]&&(d=!1),b[a]&&(c&&(c+="v"),c+=b[a]);if(!d)for(a=0;a<b[0];a++)c+="v1";m("rominfo").textContent=d?M(717):c}}
window.rminfo=cl;var el;
function fl(){if($k()){m("teamlock").onclick=gl;var a=m("gvw");let b=K("div",a,"\u25bc [- - -]");a=K("button",m("chat"),"GIF");a.className="gif";a.onclick=Wf;b.onclick=()=>{el?(b.innerHTML="\u25bc [- - -]",R(m("gameList"))):(b.innerHTML="\u25b2 [- - -]",m("gameList").show());el=!el};bg=m("msgs");m("msginput");m("msginput").addEventListener("keyup",function(c){13===c.keyCode&&Xf()})}else P("multi21"),m("multiplayertable").innerHTML="",m("showGameInfo").innerHTML="";m("gvw").appendChild(m("gameList"));el?
m("gameList").show():R(m("gameList"));m("onlrd").style.cssText=tk?"text-align:center":"display:none";m("onltms").style.cssText=ik?"display:none":""}var hl,il,jl=()=>"*To be here a minimum of 2 matches and at least 1 match played in the last 3 weeks is required";
function kl(){db?G(34,ll(0)):F.C.addEventListener("open",()=>G(34,ll(0)));let a=Qc("",2);a.id="rank";a.style.maxWidth="630px";a.style.minHeight="900px";let b=L("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=[M(556)+" - "+M(715)+" ~ 1500",M(556)+" - "+`1${M(716)}1 ~ 1500`,"Wall of banneds"];for(let d=0;d<c.length;d++){let e=K("button",b,c[d]);d||(e.style.opacity=1);e.onclick=()=>{if(1!=e.style.opacity){hl.style.visibility="hidden";for(let g of b.children)g.style.opacity="";e.style.opacity=1;2==
d?G(53):G(34,ll(d));il.textContent=jl()}}}hl=K("div",a,M(53));il=K("span",hl.parentNode,jl())}function Pk(a,b){b?b[0]=a:b=new Uint8Array([a]);return b}function G(a,b){b?b[0]=a:b=new Uint8Array([a]);db&&F.C.send(b)}function ll(a){let b=new Uint8Array(2);b[1]=a;return b}let ml="AD AE AF AG AI AL AM AO AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CT CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EN ER ES ET EU FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NW NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SW SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS WW XK YE YT ZA ZM ZT ZW XX".split(" ");
(async function(){let a;if(f.CCID)a=parseInt(f.CCID);else{let b=(await (await fetch("https://tza.red/cdn-cgi/trace",{mode:"cors"})).text()).split("loc=")[1].substr(0,2);a=ml.indexOf(b);f.CCID=a}db?G(36,ll(a)):F.C.addEventListener("open",()=>G(36,ll(a)))})();function pb(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255;a[b+3]=c>>24&255}var se;function nl(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255}function ol(a){let b=new Uint8Array(4);nl(b,1,a);return b}
function sb(a,b){b=Ga(b);var c=new ArrayBuffer(2+b.length);c=new Uint8Array(c);c[1]=a;c.set(b,2);return c}function Bb(a){a=Ga(a);var b=new ArrayBuffer(1+a.length);b=new Uint8Array(b);b.set(a,1);return b}function rb(a,b){b=Ga(b);var c=new ArrayBuffer(4+b.length);c=new Uint8Array(c);nl(c,1,a);c.set(b,4);return c}function Ck(a){return(new TextDecoder).decode(a)}function pl(a,b){a=new Uint8Array(a.buffer,b||1);return Ck(a)}function ql(a,b,c){a=new Uint8Array(a.buffer,b,c);return Ck(a)}
function Bk(a,b){return a[b+2]+(a[b+1]<<8)+(a[b]<<16)}function rl(a,b){return a[b+3]+(a[b+2]<<8)+(a[b+1]<<16)+(a[b]<<24)}function sl(a){return Bk(a,1)}function tl(a){var b=f.name;a=Ga(a);b=Ga(b);let c=Ga("");var d=new ArrayBuffer(3+a.length+b.length+c.length);d=new Uint8Array(d);d[1]=a.length;d[2]=b.length;d.set(a,3);d.set(b,3+a.length);d.set(c,3+a.length+b.length);return d}
function ul(a){let b=Ga(f.name),c=Ga("");var d=new ArrayBuffer(6+b.length+c.length);d=new Uint8Array(d);d[1]=0;d[2]=b.length;nl(d,3,a);q(d);6<d.length&&(d.set(b,6),d.set(c,6+b.length));return d}function Cb(a){let b=new Uint8Array(5);pb(b,1,a);return b}function Ga(a){return(new TextEncoder).encode(a)}window.kllf5=function(a){setTimeout(D[203],8500,a)};
jb.prototype.close=function(a){for(var b=this.G.slice(0),c=0;c<b.length;c++)b[c].close(1),q(b[c].timeout),b[c].timeout&&clearTimeout(b[c].timeout);if(a&&F.C)return F.C.close();this.G.length=0;G(1);this.host=!1};function Zk(){var a=l.A.max-D[68]();G(8,ll(a))}function vl(a){try{return JSON.parse(a)}catch(b){return q(b),!1}}window.NHretransmit=function(a,b,c){if(F.host){a=$b(a,b);b=F.G;for(var d=0;d<b.length;d++)b[d].id!=c&&b[d].send(a);wl()}};var nb;
function xl(){nb=1;for(var a=F,b=a.G.slice(0),c=0;c<b.length;c++){var d=b[c];d.closed=!0;d.O&&d.O.close()}q(a.C);a.C.close();Dc()}window.nhcleanclose=xl;
var hb=[async function(a,b){a=sl(b);b=pl(b,4);if(!Xk(a)){var c=vl(b);c&&(q(c),b=yl(a),b.setRemoteDescription(new RTCSessionDescription(c)),c=await b.createAnswer(),await b.setLocalDescription(c),q(c),G(4,rb(a,JSON.stringify(c))))}},async function(a,b){a=sl(b);b=pl(b,4);if(a=zl(a))if(b=vl(b))q(b),b=new RTCSessionDescription(b),await a.setRemoteDescription(b)},async function(a,b){a=sl(b);b=pl(b,4);if(a=zl(a))if(b=vl(b)){q(b);try{await a.addIceCandidate(b)}catch(c){console.error("Error adding received ice candidate",
c)}}},async function(a,b){var c=sl(b);a=Bk(b,4);l.Na="#"+ql(b,8,b.length-(c?8:16));location.replace("#"+l.Na);se=b[7];D[66](a);l.K=a;q("message",c,se);c?(ik=og=0,D[204](se),se?(b=parseInt(c),a=yl(b,!0),c=await a.createOffer(),await a.setLocalDescription(c),G(6,rb(b,JSON.stringify(c)))):(Al=c,Bl(c))):(jc("e_barrack1"),se=0,ik=1,Al=0,og=b[b.length-8],bl=b[b.length-7],tk=b[b.length-6],Cl(1),a=b[b.length-2],c=b[b.length-1],qb=b=Bk(b,b.length-5),al=a,D[204](0,1,og),D[55](c+1),n=ta[a].slice(),q(n),a&&(n[46]=
b+2E3*bl,b=[0,0,0,0,2,4,4,4,6],n[6]=b[bl%b.length]),jk())},function(a,b){se=b[4];a=sl(b);b=pl(b,5);q(a,b);l.Na="#"+b;Cl();setTimeout(Dl,5E3);D[204](se);D[66](a,1);l.K=a;kk();D[55](l.A.max+1);Dk(D[56](0,f.civi||0,Mk(),a,0),17,l.name);Ek()},function(a,b){El(b)},function(a,b){a=sl(b);(a=Xk(a))&&Fl(a,1)},function(a,b){a=sl(b);se?(q(a),0!=a||B.v?(a=Xk(a))&&a.close():(ob(M(95)),jc("ressurect"))):0==a?(ob(M(95)),jc("ressurect")):(q("del",Al,a),b=Sc(a),D[73](a),Hk=0,B.v||(Al==a&&(ob(M(95)),jc("ressurect")),
b&&ag(Eh(M(94),"<span>"+b+"</span>"),"ff4b4b")))},function(){if(!rk){La("changing host...");F.ba&&(clearTimeout(F.ba),F.ba=void 0);Ca("change host");D[155]();D[66](l.K,0);G(11);F.host=!1;F.za&&(clearTimeout(F.za),F.za=void 0);for(var a=0;a<F.G.length;a++)F.G[a].closed=!0,F.G[a].close(1);F.G.length=0;Gl=void 0}},async function(a,b){a=sl(b);b=b[4];q("UPDATE",a,b);if(!rk){if(a==l.K)q("HOST"),F.La=1,F.ba=setTimeout(Hl,1E4),F.ob=parseInt(b),D[66](l.K,1);else{D[66](l.K,0,1);F.host=!1;b=yl(a,!0);const c=
await b.createOffer();await b.setLocalDescription(c);G(6,rb(a,JSON.stringify(c)))}D[154](a)}},function(a,b){a=sl(b);b=pl(b,4);q(b);f.sid=a;f.nm=b.substr(0,24);f.name=b.substr(24);m("accb").innerHTML=M(445);l.name=f.name;Dk(D[53](Mk()),17,l.name);window.onbeforeunload=void 0;location.reload()},function(a,b){eg={};Ak(b);q(eg)},function(){f.sid="";f.nm=""},function(a,b){b=b[1];q(b);"string"==typeof b?(Ia("",`Name changed to ${b}`),f.name=b):Ia(Eh(M(544),b))},function(){},function(a,b){b=b[1];q(b);Qk=
b},function(a,b){b=b[1]-1;a=[96,69,441,519,806,807][b];Of();Db(m("loadingOnline"));Nf();Ab(M(a),1)},function(a,b){a=b[1];if(b=Il(Bk(b,2)))a?(b.onclick=void 0,a=b.children[0].children[0],a.className="redCircle",a.style.cssText="",b.className="",b.I=Math.floor(Date.now()/1E3),b.$b&&b.zb&&(b.style.filter="hue-rotate(311deg)"),b.style.height="0px",b.style.opacity="0",b.style.border="none",b.children[3].children[2].innerHTML=b.children[3].children[0].innerHTML,setTimeout(Jl,1E3,b)):b.offsetParent?(b.style.height=
"0px",b.style.opacity="0",setTimeout(J,1E3,b)):J(b)},function(a,b){a=b[1];if(b=Il(Bk(b,2))){if(b.onclick&&b.Za){var c;6>a?c=6:c=a+(2-a%2);b.children[3].children[2].innerHTML=c}c=b.children[3].children[0];c.offsetParent&&(c.style.color=parseInt(c.innerHTML)<a?"#0f0":"red",setTimeout(Kl,250,c));c.innerHTML=a}},function(a,b){a=b[1];if(b=Il(Bk(b,2)))b=b.children[3].children[2],b.offsetParent&&(b.style.color=parseInt(b.innerHTML)<a?"#0f0":"red",setTimeout(Kl,250,b)),b.innerHTML=a},function(a,b){a=pl(b);
Ia("",`Name changed to ${a}`);f.name=a},function(a,b){a=sl(b);let c=Bk(b,4),d=b[7],e=b[8],g=ql(b,9,d);b=ql(b,9+d,e);q(c,b,g);Ik||=K("div",m("game"),`<div style="margin-bottom:14px;color:var(--color1)">${M(520)}</div>`,"position: fixed; background: rgba(0, 0, 0, 0.55); padding: 17px 24px; box-shadow: var(--boxsp); text-align: center; z-index: 9; right: 0px; top: 81px; border: 1px solid #f3cd5a1f; border-right: none;");K("div",Ik,Ll(b,g,c),"margin-top:6px").M=a},function(a,b){a=sl(b);if(Ik){for(let c of Ik.children)if(c.M==
a){J(c);break}1==Ik.children.length&&(J(Ik),Ik=void 0)}},function(a,b){a=sl(b);var c=Xk(a);c&&!c.closed&&(c.O&&Fl(c),Ml(c,a,new Uint32Array(b.buffer,4)))},function(a,b){if(!fb){a=sl(b);var c=eg[a];c&&Ml(c,a,new Uint32Array(b.buffer,4))}},function(a,b){kb=Date.now();a=rl(b,1);1==fb?(b=new Uint8Array(9),pb(b,1,D[271]()),pb(b,5,10*a),G(56,b),fb=2):(D[205](a),performance.now())},function(a,b){qb=Bk(b,1);eb=rl(b,4);ik&&pk();D[206]()},function(){ti(re,Math.round(performance.now()-ue)+"ms")},function(a,
b){Ak(b,1)},function(a,b){a=sl(b);b=b[4];let c=D[207](a,b);q(c,b);c&&a!=l.K&&Nl[c-1]&&(Nl[c-1].innerHTML=fk(b))},function(a,b){a=sl(b);let c=b[4],d=b[5];b=b[6];let e=D[208](a,c,d,b);e&&a!=l.K&&Ol[e-1]&&(Ol[e-1].children[0].style.color="rgb("+c+","+d+","+b+")")},function(){if(Wk){for(let a=0;a<Wk.children.length;a++)a!=dl&&(Wk.children[a].style.width="0px",Wk.children[a].style.opacity="0");Wk.style.sc="0px"}m("wtr").innerHTML=M(529);m("quitbutton").dataset.title=M(736);Uk=K("span",m("wtr"),10,"display:inline-block;width:16px;text-align:right;color:var(--color1)");
Vk.Ta&&clearInterval(Vk.Ta);Hk=10;Vk.Ta=setInterval(Vk,1E3)},function(){if(og&&!al){n=ta[1==dl||2==dl?6:dl].slice();n[46]=qb+2E3*bl;let a=[0,0,0,0,2,4,4,4,6];n[6]=a[bl%a.length]}D[209]()},function(a,b){q(b,"teams");a=(b.length-1)/2;for(let c=1;c<a+1;c++)D[210](c,b[c],b[c+a])},function(a,b){a=1;mb(hl);hl.style.visibility="";hl.style.display="grid";var c=K("div",hl);K("div",c);K("div",c);K("div",c);K("div",c,"<div>"+M(478)+"</div>");c=1;let d;if(1<b.length){do{let p=Bk(b,a);a+=3;let r=b[a+1]+(b[a+0]<<
8);a+=2;var e=b[a+1]+(b[a+0]<<8);a+=2;let t=b[a++];var g=b[a++],h=ql(b,a,g);a+=g;g=b[a++];var k=ql(b,a,g);a+=g;g=K("div",hl);let u=c;1==p&&(d=g,c--,u=99);let v=K("div",g),w;w=3>=u?"#f0f":10>=u?"#0f0":20>=u?"#ff0":"#fff";K("div",v,1<p&&u||"-",99<u&&"font-size:10px").className="pos";K("div",v,"","background:"+w).className="plc";K("div",g,Ll(k,h,p));h=K("div",g);h.className="plshape";for(k=0;k<t;k++)K("div",h,"",e&1<<k&&"color:#00db00");e="";1<p&&(e=(Math.round(10*r/16)/10).toString().split("."),e=e[0]+
".<span style='font-size:10px'>"+(e[1]?e[1].charAt(0):0)+"</span>");K("div",g,`<div>${e}</div>`);c++}while(a<b.length)}d&&hl.appendChild(d)},function(a,b){a=sl(b);b=b[4];eg[a].state=b;a!=l.K&&(a=Pl[eg[a].Ga])&&(a.children[0].children[0].checked=b)},function(){Ab(M(714),1);xl()},function(){Ab(M(711),1)},function(){Ab(M(710),1)},function(a,b){Ql(b)},function(){Ql()},function(a,b){Rl.value=pl(b,1)},(a,b)=>{a=0;for(let c=1;c<b.length;c++){if(Sl){let d=Sl[c-1];d&&(d.textContent=b[c],d.style.color=b[c]?
"":"#787878")}b[c]>b[a+1]&&(a=c-1)}dl=a;cl()},(a,b)=>{vb.innerHTML=M([809,810][b[1]])},(a,b)=>{mb(hl);hl.style.visibility="";hl.style.display="block";a=1;let c=K("section",hl);il.textContent="";do{var d=Bk(b,a);a+=3;var e=b[a++],g=b[a++];let k=ql(b,a,g);a+=g;var h=b[a++];g=ql(b,a,h).split(",");a+=h;h=K("div",c);K("span",h,Ll("",k,d));K("img",h).src=`nehhon/Q${e}.webp`;K("span",h,"<span style='font-size:14px'>\u2020</span> "+g[1],"font-size:11px;color:red");d=K("div",h);for(e=2;e<g.length;e++)K("span",
d,g[e])}while(a<b.length)},(a,b)=>{if(a=eg[sl(b)])a:{b=new Uint32Array(b.buffer,4);!a.L&&4E3<b[0]&&(a.L=new Uint32Array(b[0]),a.ea=0);if(a.L)if(a.L.set(b,4E3*a.ea),a.ea++,4E3*a.ea>=a.L.length)b=a.L,a.L=void 0;else break a;b=new Uint32Array(b.buffer,4+b.byteOffset);a.Ua=Date.now();Nk(b);D[270]();fb=0;for(let c of gb)ib(c);gb.length=0}},(a,b)=>{D[269](rl(b,4),rl(b,8),Bk(b,1))}];
window.gtccles=(a,b,c)=>{b=$b(a,b);a=new Uint32Array(b.length+1);a[0]=a.length;a.set(b,1);for(let d=0,e=Math.ceil(a.length/4E3);d<e;d++){b=a.length-4E3*d;4E3<b&&(b=4E3);b=new Uint32Array(a.buffer,16E3*d,b);let g=new Uint32Array(b.length+1),h=new Uint8Array(g.buffer);g.set(b,1);h[0]=55;nl(h,1,c);F.C.send(g)}};let dl;var ue,re,Ik;function Kl(a){a.style.color=""}var Qk,eg=NaN;window.clrNHtimer=function(){clearTimeout(F.za);F.za=void 0};
function Hl(){clearTimeout(F.ba);F.ba=void 0;F.za=setTimeout(D[179],3E4);F.host=!0;setTimeout(Dl,5E3);D[66](l.K,1,1);Dl()}window.checkAlive=function(a){Xk(a)||(D[73](a),q("KILL",a))};function zl(a){if(a=Xk(a))return a.O}function Xk(a){for(var b=F,c=0,d=b.G.length;c<d;c++)if(b.G[c].id==a)return b.G[c]}
function Tl(a,b,c){this.id=a;this.hc=[];b&&(this.s=b);if(c){this.O=c;q(b,565656);var d=this;b?(this.channel=c.createDataChannel("nehhof",{ordered:!0}),Ul(d)):c.ondatachannel=function(e){d.channel=e.channel;Ul(d)}}F.G.push(this);c||(G(9,ol(this.id)),this.open())}function Vl(a){if(!a.closed){if(12E3<Date.now()-a.Ua)return a.close(),q("TIMEOUT");a.timeout=setTimeout(Vl,12E3,a)}}function Bl(a){Dk(D[62](),20,l.name);D[61](a,f.civi||0);Cl(1)}
Tl.prototype.open=function(){this.La=!0;this.Ua=Date.now();this.Bb&&clearTimeout(this.Bb);q("DATACHANNEL OPEN");q(this);this.timeout=setTimeout(Vl,12E3,this);if(B.v){if(void 0==F.ba&&D[178]()||!D[163](this.id))return this.close();F.La++;void 0!==F.ba&&(q(F.La,F.ob,this.id),F.La==F.ob&&Hl())}else this.s&&(l.eb=!0,Bl(this.id))};var Gl;
Tl.prototype.send=function(a){var b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);if(this.channel){if("open"==this.channel.readyState)for(let c=0,d=Math.ceil(b.length/4E3);c<d;c++){let e=4E3*c;a=b.length-e;4E3<a&&(a=4E3);a=new Uint32Array(b.buffer,4*e,a);this.channel.send(a)}}else Gl=b};
function Wl(a,b,c){for(let e=0,g=Math.ceil(a.length/4E3);e<g;e++){var d=a.length-4E3*e;4E3<d&&(d=4E3);d=new Uint32Array(a.buffer,16E3*e,d);let h=new Uint32Array(d.length+1),k=new Uint8Array(h.buffer);h.set(d,1);k[0]=b;k[1]=c||0;F.C.send(h)}}function wl(){Gl&&(Wl(Gl,22),Gl=void 0)}window.rlyCheck=wl;window.nppsnd=function(a,b,c){a=$b(a,b);b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);Wl(b,26,c)};Tl.prototype.close=function(a){console.trace();if(this.O)return this.O.close();a||Xl(this)};
function Fl(a,b){var c=a.O;if(c){var d=a.channel;d&&(d.onopen=null,d.onmessage=null,d.onclose=null,d.close());c.onicecandidate=null;c.onconnectionstatechange=null;c.oniceconnectionstatechange=null;c.onsignalingstatechange=null;c.Ac=null;c.close();q(a.id);q("ALT-8");a.O=null;a.channel=null;b||G(9,ol(a.id));a.open()}}
function Ml(a,b,c){!a.L&&4E3<c[0]&&(a.L=new Uint32Array(c[0]),a.ea=0);if(a.L)if(a.L.set(c,4E3*a.ea),a.ea++,4E3*a.ea>=a.L.length)c=a.L,a.L=void 0;else return;c=new Uint32Array(c.buffer,4+c.byteOffset);a.Ua=Date.now();Nk(c);D[60](b)}
function Ul(a){const b=a.id,c=a.channel;c.binaryType="arraybuffer";q(a,"SETUP");c.onopen=function(){a.open()};c.onmessage=function(d){"closed"==c.readyState||a.closed||(d=new Uint32Array(d.data),Ml(a,b,d))};c.onclose=function(d){Xl(a);c.onmessage=null;q("DATACHANNEL CLOSE",a.id,d)};c.onerror=function(d){q(d,"ONERROR")};c.onbufferedamountlow=function(){var d=a.hc;d.length&&(d=d.shift(),c.send(d),q("SEND22",d))}}
function yl(a,b){const c=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),d=new Tl(a,b,c);d.Bb=setTimeout(function(){Fl(d)},6E3);c.onicecandidate=function(e){q("ICE",e);e.candidate&&G(5,rb(a,JSON.stringify(e.candidate)))};c.onconnectionstatechange=function(e){q(e,c.connectionState,d.closed);d.closed||("connected"==c.connectionState&&(d.ready=!0),"disconnected"==c.connectionState&&Xl(d))};c.oniceconnectionstatechange=function(e){q(e);if(!d.closed){q(c.iceConnectionState,
d.id);if(!d.ready&&"failed"==c.iceConnectionState)return Fl(d);"failed"!=c.iceConnectionState&&"disconnected"!=c.iceConnectionState||Xl(d)}};c.onsignalingstatechange=function(e){q(e);d.closed||"closed"==c.signalingState&&Xl(d)};return c}
function Yl(){function a(k){for(var p=-1,r=0,t=k.length;r<t;r++)p=p>>>8^b[(p^k.charCodeAt(r))&255];return(p^-1)>>>0}let b="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ").map(function(k){return parseInt(k,16)}),
c=navigator.language,d=Intl[atob("RGF0ZVRpbWVGb3JtYXQ=")]().resolvedOptions()[atob("dGltZVpvbmU=")],e=navigator.hardwareConcurrency||0,g=navigator.deviceMemory||0;if(z){var h=z.getExtension(atob("V0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbw=="));h=z.getParameter(h[atob("VU5NQVNLRURfUkVOREVSRVJfV0VCR0w=")]);h.replaceAll&&(h=h.replaceAll(",",".|"))}return[a(h+d),a(e+"."+g+h),a(e+"."+g+h+c),a(e+"."+g+h+d),a(h+d+c)]}
var Zl,Ok=()=>{if(!Zl){var a=Yl(),b=new Uint8Array(1+4*a.length);for(let c=0;c<a.length;c++)pb(b,4*c+1,a[c]);G(48,b);Zl=1}};jb.prototype.send=function(a){this.C.send(JSON.stringify(a))};function Nb(a){var b=F;if(1!=b.C.readyState)return b.C.addEventListener("open",()=>Nb(a));D[266](1);Bh=void 0;Ok();b=new Uint8Array(5);b[1]=parseInt(f.civi)||0;nl(b,2,Mk());G(31,b);q(b);b=a.length?Pk(3,tl(a.substr(1))):Pk(3,ul(a));Qk?Rk(b):(zk(),F.C.send(b))}
function $l(){if(!B.v){var a=Math.floor(Date.now()/1E3);for(let c=0;2>c;c++){var b=Fb[c].children;for(let d of b)(b=d.children[2])&&void 0!=d.I&&(b.innerHTML=Math.floor((a-d.I)/60)+" "+M(558))}setTimeout($l,5E3)}}var Fb;function Il(a){if(Fb&&!(2>Fb.length))for(let b=0;2>b;b++){let c=Fb[b].children;for(let d of c)if(d.nb==a)return d}}var Hb,Gb,Ib,am=a=>a+(M(716)||"v")+a;
function El(a){if(m("index")){var b=sl(a),c=Math.floor(Date.now()/1E3);b&&(K("div",m("index"),b).id="ppop");if(a&&4<a.length){b=740>window.innerWidth||650>window.innerHeight?m("index"):Eb;var d=b.scrollTop;let k=4;do{var e=a[k++];let p=a[k++],r=a[k++],t=(a[k++]<<8)+a[k++];var g=a[k++],h=(a[k++]<<16)+(a[k++]<<8)+a[k++];let u=a[k++],v,w;1==g?v=!0:2==g&&(w=!0);g=v?Hb:Gb;let A=document.createElement("div");r&&50==p&&(A.Za=1,6>e?p=6:p=e+(2-e%2));let y=A.Za?am(p/2)+"+":Ck(new Uint8Array(a.buffer,k,u));
k+=u;r&&Xa&&!A.Za&&(y={"BR 1500":M(484)+" 1500","1V1":am(1),"FAST 1V1":M(564)}[y]||y);let x=h;!v&&r&&(A.className="pbl");h=K("div",A);K("div",h,"",!v&&w&&"color:#00c8c8").className="redCircle"+(!v&&" rgr"||"");h=K("div",A,y?bm(y):M(85),!x&&"color:red");1==f.sid&&(K("button",h,"X","margin-left: 20px; margin-top: -11px; background: rgba(255, 0, 0, 0.38); color: red; font-size: 23px; ").onclick=()=>cm(x,0),K("button",h,"X","margin-left: 24px; margin-top: -11px; background: rgba(255, 255, 0, 0.38); color: red; font-size: 23px; ").onclick=
()=>cm(x,1));K("div",A,r&&!v?w?M(556):M(557):~~(t/60)+" "+(M(558)||"min")).className="tbtime";K("div",A,`<span>${e}</span><span>/</span><span>${p}</span>`).className="tbplyrs";r&&v&&2<p&&(A.style.filter="hue-rotate(311deg)");A.nb=x;t=c-t;if(!r||v)A.I=t,A.ka=t,v&&(A.ka*=-1);A.zb=w;A.$b=r;!v&&x&&(A.onclick=xk);x||(A.style.opacity=.5);r&&!v&&(A.ka=2E9*p+(w?1:0));e=!0;for(let C of g.children)if(C.ka<=A.ka){g.insertBefore(A,C);e=!1;break}e&&g.appendChild(A);g.offsetParent?A.Tb=dm:A.style.animation="unset"}while(k<
a.length);Aa||(b.scrollTop=d)}$l.dc||($l.dc=!0,setTimeout($l,5E3))}}function dm(){this.style.animation="unset";this.Tb=void 0}function Jl(a){Hb.appendChild(a);setTimeout(()=>{a.style.height="";a.style.opacity="";a.style.border=""},250)}function em(){let a=this.D;f.avatar=a;q(this.D);G(19,ll(a));R(this.parentNode);m("avtimg").src="nehhon/Q"+a+".webp"}
function xb(){let a=Ab("",1);a.id="account";O("p",a,15,"color:var(--color1)");let b=Ka(a,f.name);b.minLength=1;b.maxLength=32;let c=O("button",a,443,"margin-left:8px;margin-bottom:6px");O("div",a,545,"color:#ccc;font-size:9px");K("button",a,`{${M(703)}} >`,"margin-top:15px;color:#81ff81;font-size:16px;letter-spacing:1px;text-transform:uppercase").onclick=()=>{Db(a);let h=Qc("",1);fm=O("div",h,53,"gap:20px;display:flex;flex-direction:column;align-items:flex-start");G(43)};O("p",a,546,"color:var(--color1)");
let d=K("div",a);var e=L("img",d,"cursor:url(nehhon/hand.gif),default;box-shadow:#ff00008f 0px 0px 38px;border:1px solid rgba(255, 0, 0, 0.48);");e.src="nehhon/Q"+(f.avatar||113)+".webp";e.id="avtimg";var g=K("div",K("div",d,"","max-height:216px;overflow-y:auto;width:57px;margin:9px"));g.id="avsel";e.onclick=function(){if(""==g.innerHTML)for(let h=0;199>=h;h++){let k=K("div",g,"");k.onclick=em;k.D=h}g.show()};c.onclick=function(){let h=b.value;q(h,"name");h&&G(13,Ga(" "+h))};O("button",a,442,"display:block;margin-top:20px;background:#920000").onclick=
function(){f.sid="";f.nm="";location.reload()}}var fm,Rl;
function Ql(a){q(a);var b=fm;mb(fm);if(a){let g=f.sid;var c=a[1];let h=Bk(a,2),k=g==h;var d=k?ql(a,8,24):0,e=ql(a,8+(k?24:0),c);c=8+(k?24:0)+c;Ja(b,e);if(k){e=K("div",b);K("span",e,M(704)+" -> ","color:var(--color1)");Rl=Ka(e,d);Rl.style.width="216px";Rl.style.fontSize="11px";Rl.readOnly=!0;let p=L("button",e,"margin-left:9px;width:16px;height:16px;background:url(nehhon/refresh.webp);background-size:cover");p.onclick=()=>{G(42);p.style.visibility="hidden"}}d=K("div",b);K("div",d,M(707)+":","font-size:12px;");
d=L("div",d,"border-left:2px solid rgba(255, 255, 255, 0.19);padding:4px;margin-top:9px;min-width:185px;display:grid;grid-template-columns:repeat(2,max-content);align-items:center;gap:2px 10px");do{let p=Bk(a,c);c+=3;e=a[c++];let r=ql(a,c,e);c+=e;let t=K("div",d,Ll("",r,p),(p==h?"color:var(--color1);":"")+"font-size:11px");if(g==h&&p!=h){let u=K("div",d,"\u00d7","color:red;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{G(44,ol(p));J(u);J(t)}}else K("div",d);q(r,p)}while(c<a.length);O("button",
b,k?706:712).onclick=()=>{confirm(M(713))&&(G(41),Ql())}}else{O("div",b,703,"color:var(--color1)");a=K("div",b);let g=Ka(a,"");g.style.width="159px";g.placeholder=M(704);g.maxLength=32;O("button",a,708,"margin-left:8px").onclick=()=>{let k=g.value;q(k);k&&G(39,Ga(" "+k))};b=L("div",b,"border-top:2px solid #ffffff45;padding-top:20px");let h=Ka(b,"");h.style.width="105px";h.style.textTransform="uppercase";h.placeholder=M(709);h.maxLength=5;O("button",b,705,"margin-left:8px;margin-bottom:6px").onclick=
()=>{let k=h.value;k&&G(40,Ga(" "+k))}}}
function Cl(a){if((l.s||a)&&!B.id){fl();bg.innerHTML="";P("index");Of();Db(m("loadingOnline"));qd("game");m("multi21").style.display="flex";Of();a=l.Na;q(l.A||NaN);B.id=a;B.l=1;m("buttons").innerHTML="";ik?(qd("wtr"),m("wtr").innerHTML=M(526)):P("wtr");a=`<span style="margin-left:80px;"><input id="onlineID" type="text" value="https://tza.red/#${l.Na}" /><button id="copyButton">${M(385)}</button></span>`;if(l.s){var b=function(c){var d=D[70](),e=!F.G.length&&se?1:0;c<d+e&&(c=d+e);q(c,d);c=Yk(c);D[150](c+
1);D[58]()};m("onlineTopInfo").innerHTML=` <button id="addAI" style="padding:6px;margin-right:26px;align-self:center;">${M(90)}</button>${a}<span id="spnpld" style="margin-left:auto"><div id="nplayersO"><img src="nehhon/pop.gif" /><span id="mmplayers">${l.A.max}</span><div id="rmmxctrl"><div id="sumpl">&#9650;</div><div id="respl">&#9660;</div></div></div></span>`;m("sumpl").onclick=function(){D[67]()||b(l.A.max+1)};m("respl").onclick=function(){D[67]()||b(l.A.max-1)};m("addAI").onclick=function(){if(!D[67]()){var c=
D[70]();50>c+1&&(c+(F.G.length?0:1)>=l.A.max&&b(l.A.max+1),Dk(D[56](0,0,16777216*Math.random(),0,1),17,"AI"),Zk(),D[58]())}}}else m("onlineTopInfo").innerHTML=a;m("copyButton")&&(m("copyButton").onclick=function(){m("onlineID").select();document.execCommand("Copy")},m("onlineID").value="http://tza.red/#"+B.id);l.s?(location.replace("#"+B.id),m("buttons").innerHTML='<button id="startbutton">'+M(92)+' \u25b6</button><button style="display:none" id="rndmapreturn">'+M(50)+'</button><button id="optionbutton">'+
M(48)+'</button><button id="maploadOnline"/>'+M(93).split("|")[0].toUpperCase()+'</button><button id="closebutton">'+M(13)+"</button>",m("startbutton").onclick=Sk,m("optionbutton").onclick=he,m("closebutton").onclick=yk,m("maploadOnline").onclick=gm,m("rndmapreturn").onclick=function(){qd("addAI");m("optionbutton").style.display="inline-table";P("rndmapreturn");D[152](l.A.pb);kk();b(l.A.pb)}):(m("buttons").innerHTML='<button id="quitbutton">'+M(91)+"</button>",m("quitbutton").onclick=ob)}}var Al;
function Xl(a){q(a);console.trace();var b=Xk(a.id);if(b&&!b.closed&&a==b)if(b.closed=!0,!b.s||l.s||B.v){q(b);if(F.host){a=F.G;var c=a.indexOf(b);-1<c&&a.splice(c,1);D[73](b.id)}q(b.s,B.v,"admindel");G(14,ol(b.id));b.s&&B.v&&!rk&&G(10,ol(b.id));B.v||(b=Sc(b.id))&&K("li",bg,Eh(M(94),b),"color:#ff4b4b")}else ob(M(95)),jc("ressurect")}function cm(a,b){confirm("AUSB")&&(a=Cb(a),a[4]=b,G(16,a))}window.thereIsAnIdiot=function(a){q(a);if(l.K==a)return Ia(M(97)),yk();(a=Xk(a))&&a.close()};
function hm(a,b){a=K("a",a,M(112));a.className="returnmenu";a.onclick=Nf;b&&a.addEventListener("click",b)}var Ol=document.getElementsByClassName("ucolor"),im=document.getElementsByClassName("username"),Nl=document.getElementsByClassName("race"),jm=document.getElementsByClassName("team");function Dl(){F.host&&se&&(D[156](),Dl.I=Date.now(),setTimeout(Dl,5500))}window.pong=function(a){var b=Date.now()-Dl.I;Xk(a)&&(D[157](a,b),q("pong"),m("game")&&Ek())};
function Tk(a){if(l.s&&"BUTTON"!=a.target.tagName&&"DIV"!=a.target.tagName&&"ucolor"!=a.target.className){Tk.J&&(J(Tk.J),Tk.J=void 0);var b=a.pageX;a=a.pageY;var c=this.Ga;q(c);var d=K("div",m("game"));d.style.top=a+"px";d.style.left=b+"px";d.className="onlPlayer";Tk.J=d;q(this.Wa,this.Ga);if(this.Wa.name)O("button",d,100).onclick=function(){D[71](c);l.Dc.qc("maxPlayers",D[70]());J(d);Tk.J=void 0};else{var e=this.Wa;b=document.createElement("button");b.onclick=function(){D[74](c,-1);J(d);Tk.J=void 0};
b.innerHTML=M(101);d.appendChild(b);b=document.createElement("button");b.onclick=function(){D[74](c,1);J(d);Tk.J=void 0};b.innerHTML=M(102);d.appendChild(b);this.Nb||(b=document.createElement("button"),b.onclick=function(){q(22222,e);D[71](c);Zk();J(d);Tk.J=void 0},b.innerHTML=M(100),d.appendChild(b),e&&(K("button",d,"BAN").onclick=function(){q(22222,e);G(18,ol(e));D[71](c);J(d);Tk.J=void 0}))}b=document.createElement("button");b.onclick=function(){J(d);Tk.J=void 0};b.innerHTML=M(13);d.appendChild(b)}}
function Ek(){var a=m("multiplayertable");if(a){var b=D[28]()-1||14;D[180]();var c=58;if(ik){6<b&&(b=6);var d=D[70]();6<=d&&(b=d+2-d%2,d=D[28]()-1,b>d&&(b=d))}7<b&&(c=54);8<b&&(c=49);9<b&&(c=44);10<b&&(c=42);11<b&&(c=39);12<b&&(c=37);14<b&&(c=35);15<b&&(c=33);16<b&&(c=32);26<b&&(c=31);27<b&&(c=30);28<b&&(c=29);29<b&&(c=28);30<b&&(c=27);31<b&&(c=26);32<b&&(c=25);33<b&&(c=24);34<b&&(c=23);35<b&&(c=22);a.innerHTML="";Pl.length=0;for(d=0;d<b;d++){let e=L("tr",a,!1);K("td",e,"<div></div>","height:"+c+
"px").className="ucolor";K("td",e,"  <span style='color:#ffffff73'>&horbar;</span> ").className="username";K("td",e).className="race";ik||(K("td",e).className="team");tk&&Pl.push(K("td",e,"","text-align:center"))}6>b&&K("tr",a,"","height:"+(260-46*b)+"px");D[54]();a=a.clientHeight-67;525<a&&(a=525);m("msgs").style.height=a+"px";m("msgs").scrollTop=m("msgs").scrollHeight}}window.setupPlayermenu=Ek;function gl(){if(l.s)D[188]("\ud83d\udd12"!=this.innerHTML)}
window.mapWindow=function(){var a=m("showGameInfo");a&&(mb(a),a=L("span",a,"display:block;width:516px;padding:4px 19px"),O("div",a,55,"color:var(--color1);text-align:center;border-bottom:2px solid #ffffff38;padding-bottom:3px"),D[240](0),K("div",a,bm(Od),"margin-top:19px;color:#fff"),D[240](1),K("div",a,bm(Od),"color:#ecd078;margin-left:4px;margin-top:11px;font-size:12px"),D[240](2),Od&&K("div",a,"<span style='color:#fff'>"+M(57)+":</span> "+bm(Od),"margin-top:11px;font-size:12px"))};var km;
function Rk(a){km?(km=a,window.grecaptcha.reset(),m("nrobotdiv").parentNode.parentNode.parentNode.style.cssText=""):(km=a,a=document.createElement("script"),a.src="https://www.google.com/recaptcha/api.js?onload=cllrobot&render=explicit",document.body.appendChild(a))}window.cllrobot=function(){Qc('<div class="g-recaptcha" id="nrobotdiv"></div>');q(window.grecaptcha);window.grecaptcha.render("nrobotdiv",{callback:lm,theme:"dark",sitekey:"6Lcw5wAaAAAAAC8nGPdUK8dE8LE2BcOFXI7lVtyM"})};
function lm(a){a=Ga(a);let b=new Uint8Array(2+a.length+km.length);b[0]=23;b[1]=km.length;b.set(a,2);b.set(km,2+a.length);F.C.send(b);km=1;zk();R(m("nrobotdiv").parentNode.parentNode.parentNode)}var Sl,Wk;function Kk(){he(5)}
window.multiOptions=function(a,b){var c=m("showGameInfo");if(c){c.innerHTML="";var d=bc(a,b);a=d[1];var e=d[2],g=d[3],h=d[4],k=d[7],p=d[6],r=d[12],t=d[0],u=d[9],v=d[10],w=d[18],A=d[19];if(!l.s){n=[];for(let x=0;x<b;x++)n[x]=d[x]}if(og&&!al){c.style.background="none";c.style.padding="0px";c.style.boxShadow="unset";c.style.width="unset";c.style.border="unset";c.style.backdropFilter="unset";var y=[0,Eh(M(735),2),0,Eh(M(735),3)+"<br>"+M(484),0,Eh(M(735),4)+"<br>"+M(484),3,Eh(M(735),2)+"<br>"+M(523),4,
Eh(M(735),2)+"<br>"+M(394),5,M(717)+"<br>"+M(484)];let x=K("section",c);Wk=x;Sl=[];for(c=0;c<y.length;c+=2){let C=c/2;a=y[c];e=y[c+1];let I=K("div",x);Ff(I,84*-C);g=K("div",I);K("div",g,e);Sl.put(K("span",g));I.onclick=()=>{for(let H of x.children)H.style.outline="";I.style.outline="1px solid #00ff0047";G(45,ll(C))};140<bl&&3==a&&R(I)}}else{c.style.cssText="";b=[M(28),M(29),M(30),M(31),M(32),M(33),M(525),M(524)];1E9<=a&&(a="***");1E9<=e&&(e="***");1E9<=g&&(g="***");1E9<=h&&(h="***");tk&&(t="Auto");
b=[M(1),t,M(26),Ya[p]&&Ya[p].name,M(42),v,M(27),b[k],M(11),u,M(35),M([36,37,38,39][r]),M(396),w+" "+M(558),M(398),M([399,400,401][A])];D[275]()&&(K("button",c,"Custom version! click here to see the changes","padding:5px;background:#ffff00;color:#000;margin:auto;margin-bottom:18px;font-size:14px").onclick=()=>{ie(1)});K("span",c,`${a}<img class='resource' src='nehhon/gold.gif' /> ${e}<img class='resource' src='nehhon/wood.gif' /> ${g}<img class='resource' src='nehhon/food.gif' /> ${h}<img class='resource' src='nehhon/stone.gif' />`,
"text-align:center;width:100%;display:block;border-bottom:2px solid rgb(156 137 79 / 27%);margin-bottom:9px;padding-bottom:9px");a=K("div",c);for(y of b)K("div",a,y);l.s||(K("span",c,"+ "+M(461)+"...","cursor:url(nehhon/hand.gif),default;color:#ffd75dd1;font-size:11px;margin-top:12px;display:block").onclick=Kk);y=ua();q("PR",y);y&&K("span",c,"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714 </span>"+y,"color:rgb(203,255,238);position:absolute;top:20px;right:21px")}}};if(location.search){let a=new URLSearchParams(location.search);if(a.has("desk")){let b=new XMLHttpRequest;b.open("GET","http://localhost:41334"+location.search,!0);b.send(null);Ia("","Desktop app open")}console.log(a)}function mm(a){if(Mb)Mb=!1;else if(!l.s){if(a)return location.reload();a=decodeURI(location.hash.substr(1));Mb=!0;Nb(a);Pb()}}
function nm(a){if("RandomMap"==a)return om;if("Settings"==a)return pm;if("About"==a)return qm;if("Guide"==a)return Ne;if("Changelog"==a)return Qe;if("Ranking"==a)return kl;location.hash=""}function cb(a){var b=location.hash.substr(1);if(b){if("#"==b.charAt(0))return setTimeout(mm,500,a);B.v||nm(b)&&nm(b)()}}var bg;
function Bg(a,b,c,d,e,g,h,k,p){b||jc("chat");var r=e?`<span class="ttag">[${M(21)}]</span>`:"";if(c){e=D[77]()?od:bg;if(5!==c){if(b)a=`<span style="color:var(--color1)">${M(407)}</span>`;else if(a=bm(Gd(Hd(a,d))),"https://media.tenor.com/"==a.substring(0,24)){var t=a;a=""}else a=Wh(a);a=K("li",e,"<span>"+r+Sc(g,c)+" \u2014</span> "+a,e==od&&void 0!=h&&`border-color:rgb(${h},${k},${p})`||"");t&&(a=K("img",a),a.src=t,a.className="igif")}else K("li",e,a);e.scrollTop=e.scrollHeight;D[77]()&&Xh()}}
window.chat=Bg;function Xh(){m("msgs1")&&(11==m("msgs1").children.length&&m("msgs1").removeChild(m("msgs1").children[0]),1==m("msgs1").children.length&&(rm=setInterval(sm,16E3)))}var rm;function sm(){m("msgs1")&&m("msgs1").children[0]&&m("msgs1").removeChild(m("msgs1").children[0]);m("msgs1")&&0==m("msgs1").children.length&&clearInterval(rm)}function bm(a){return String(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function Xf(a){let b=a;if(B.v){var c=od;a||(a=m("msginputGame").value);m("msginputGame").value=""}else c=bg,a||(a=m("msginput").value),m("msginput").value="";if(!B.l){if("hmspawn"==a.substr(0,7)){pe(D[110]);return}if("hmpetleva"==a){D[200](0);return}}""!==a&&(b||(a=bm(Wh(a))),L("li",c,`border-color:${l.color}`).innerHTML+=`
    <span>${m("teamchat")&&m("teamchat").checked&&`
    <span class="ttag">[${M(21)}]</span>`||""}`+Sc(l.K,-1)+" \u2014</span> "+(b?`<img src="${a}" class="igif">`:a),B.l&&(Dk(D[75](),1024,a),D[76](a.length,m("teamchat")&&m("teamchat").checked)),c.scrollTop=c.scrollHeight,B.v&&Xh())}var tm=document.getElementsByClassName("ucolor1"),zm=document.getElementsByClassName("username1"),Am=document.getElementsByClassName("race1"),Bm=document.getElementsByClassName("team1");
function Cm(a){var b=1;2===a.button&&(b=-1);this.innerHTML=D[51](this.N,b)||"\ud83d\udec7"}function Dm(a){var b=1;2===a.button&&(b=-1);ik?(a=(this.bb+b)%4,0>a&&(a=3),this.bb=a,this.innerHTML=fk(a),G(29,ll(a))):this.innerHTML=fk(D[52](this.N,b))}
function Em(){q(this.Xa,this);this.Xa&&(l.color=this.value,f.color=this.value);let a=parseInt(this.value.substr(1),16);if(ik)G(30,ol(a));else D[57](this.N,a);"TD"==this.parentNode.tagName?this.style.color=this.value:Ol&&Ol[this.N-1]&&(Ol[this.N-1].children[0].style.color=this.value,J(this))}function Fm(a){D[50](1+4*a.shiftKey+99*a.altKey)}function Gm(a){D[50](-1-4*a.shiftKey-99*a.altKey)}
window.presetuprndtable=function(a){if(m("RandomMap"))qd("RandomMap");else{var b=K("div",document.getElementsByTagName("main")[0],`<div>
        <div id="spbdy"><div id="load1" style="border-right:0px">${M(671)}</div><div id="edmap1">${M(105)}</div></div>
        <div>
        <table class="players" id="oneplayertable">
        <tbody id="oneplayertbody">
        </tbody>
        </table>
        <div style="display:flex;justify-content:center;gap:30px">
        <button id="start2" class="start startButton">${M(92)} \u25b6</button>
        <button class="start optionsButton" id="start1" >${M(48)}</button>
        </div>
        </div>
        </div>`);b.id="RandomMap";b.className="playermenu";hm(b);m("start1").onclick=he;m("start2").onclick=sk;m("load1").onclick=function(){gm()};m("edmap1").onclick=Hm}b=m("oneplayertbody");b.innerHTML="";b.insertAdjacentHTML("beforeend",`<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">\u2212</button></td><td>${M(103).toUpperCase()}</td><td>${M(21).toUpperCase()}</td></tr>`);for(let c=0;c<a;c++)b.insertAdjacentHTML("beforeend",'<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>');
m("addPlayer").onclick=Fm;m("removePlayer").onclick=Gm};var Im=["VIP"];function Sc(a,b){var c=eg[a];b=c&&c.name||0<b&&Gd(Hd(b,20))||-1==b&&l.name||"";let d=0;if(c){d=c.id;let e=c.role;1==e&&(d=Im[e-1])}return Ll(c&&c.clan,b,d,!a&&B.l)}
function Ll(a,b,c,d){return`<span class="nmtg">${a&&`<span class="clanTag">{${bm(a)}}</span>`||""}<span ${d?"style='color:#ff0'":""} class="usnm">${bm(b)}</span>${c&&`<span class="verified"${"string"==typeof c?" style='color:#ff6eff'":""}>#${c}</span>`||""}</span>`}
window.recvtrib=function(a,b,c,d,e,g){e=Sc(g,e);a="-> <span style='color:#0f0'>"+(a&&`${a} <img src="nehhon/gold.gif">`||"")+(b&&`${b} <img src="nehhon/wood.gif">`||"")+(c&&`${c} <img src="nehhon/food.gif">`||"")+(d&&`${d} <img src="nehhon/stone.gif">`||"")+"</span>";m("msgs1").innerHTML+="<li>"+Eh(M(449),a,e)+"</li>";Xh()};
function Jm(a){q(a,this);var b=document.createElement("input");b.type="color";b.N=this.Gb;b.value=this.Fb;b.Xa=!0;b.onchange=Em;b.onblur=Em;b.style.cssText=`position:absolute;top:${a.clientY}px;left:${a.clientX}px;width:0px;height:0px;opacity:0;padding:0px;border:0px`;document.body.appendChild(b);setTimeout(function(){b.click()},25)}var Pl=[];function Uc(a){return(a=eg[a])&&255!=a.flag?`<span class="flag" style="background-position-x:-${21*a.flag}px"></span>`:""}
window.onlineTable=function(a,b,c,d,e,g,h,k,p,r){ik&&(r=!0);let t=!D[246]();if(m("teamlock")){ti(m("teamlock"),r?"\ud83d\udd12":"\ud83d\udd13");var u=0==g,v=Tc(d),w=g==l.K;b||="\ud83d\udec7";a=Sc(g,a);eg[g]&&(eg[g].Ga=e);var A=Xk(g);A&&(a+=`<span style='opacity:.5;font-size:8px;color:#${A.O&&"0f0"||"ff0"}'>&nbsp;${A.O&&"P2P"||"proxy"}</span>`);p&&(a+=`<span style='opacity:.5;margin-left:4px;font-size:8px;color:#${"0ff"}'>${p}ms</span>`);if(m("multiplayertable")){p=m("multiplayertable").getElementsByTagName("tr");
var y=e+1;d=parseInt(v.substr(1),16);d=[d>>16&255,d>>8&255,d&255];if(Ol[e]){Ol[e].children[0].style.color="rgb("+d[0]+","+d[1]+","+d[2]+")";im[e].innerHTML=`<div>${a+Uc(g)}</div>`;if(l.s&&w||A&&A.s)im[e].style.color="#f3cd5a";im[e].style.color;if(u){if(h){t?(jm[e].innerHTML=b,l.s&&(mb(jm[e]),a=K("button",jm[e],b),a.onmousedown=Cm,a.N=y)):mb(jm[e]);jm[e].style.opacity="0.25";Ol[e].style.opacity="0.25";im[e].style.opacity="0.25";return}im[e].style.color="#fff900"}if(!h&&(w||u&&l.s)){if(Nl[e].children[0]){jm[e]&&
(jm[e].children[0]?jm[e].children[0].innerHTML=b:jm[e].innerHTML=b);Nl[e].children[0].innerHTML=fk(c);return}jm[e]&&(jm[e].innerHTML="",r&&!l.s?jm[e].innerHTML=b:(a=K("button",jm[e],b),a.onmousedown=Cm,a.N=y,u&&(a.style.color="#fff900")));a=document.createElement("button");a.onmousedown=Dm;a.N=y;a.bb=c;a.innerHTML=fk(c);Nl[e].appendChild(a);u&&(a.style.color="#fff900");Ol[e].onclick=Jm;Ol[e].Gb=y;Ol[e].Fb=v}else(t?jm[e]&&(l.s||w&&!r?(mb(jm[e]),a=K("button",jm[e],b),a.onmousedown=Cm,a.N=y):jm[e].innerHTML=
b):mb(jm[e]),h)?u||(Nl[e].innerHTML=`(${Gd(Hd(k,20))})`):Nl[e].innerHTML=fk(c);tk&&(mb(Pl[e]),c=Km(Pl[e]),c.checked=eg[g].state,w?c.onclick=Lm:(c.disabled=!0,c.parentNode.style.cursor="not-allowed"));l.s&&(p[e].onclick=Tk,p[e].Wa=g,p[e].Nb=w,p[e].Ga=e+1)}}}};function Lm(){if(Hk)return this.checked=!this.checked;q(this.checked);G(35,ll(this.checked?1:0))}
window.randomMapTable=function(a,b,c,d,e){for(d=d.toString(16);6>d.length;)d="0"+d;d="#"+d;zm[e].innerHTML=`<input value="${Gd(Hd(a,20))}" type="text">`;a=zm[e].getElementsByTagName("input")[0];a.onchange=Mm;a.ya=e+1;a.maxLength=20;a=Bm[e].getElementsByTagName("button")[0];a.N=e+1;a.onmousedown=Cm;a.innerHTML=b||"\ud83d\udec7";b=Am[e].getElementsByTagName("button")[0];b.N=e+1;b.onmousedown=Dm;b.innerHTML=fk(c);var g=document.createElement("input");g.type="color";g.N=e+1;g.value=d;g.Xa=0==e;g.style.color=
d;tm[e].appendChild(g);g.onchange=Em;tm[e].onclick=()=>g.click()};function om(){P("index");D[67]()&&va();D[50](0,parseInt(f.civi))}function gm(){var a=document.createElement("input");a.type="file";a.accept=".tzared";a.onchange=Wd;a.click()}function Nm(){P("index");if(m("CustomMap"))P("customMapcont"),qd("CustomMap");else{var a=K("div",document.getElementsByTagName("main")[0],`<table id="mapcache"></table>
<div id="customMapcont" style="display:none">
<table class="players" id="customaptable">
<tbody id="custombody">
</tbody>
</table>
<div style="display:flex;gap:15px;margin-top:15px;justify-content:center">
<button  id="startCustom" class="start startButton">${M(92)}</button>
<button id="editCustom" class="start"> ${M(105)}</button>
</div>
</div>`);a.id="CustomMap";a.className="playermenu";hm(a,function(){J(m("CustomMap"))});m("startCustom").onclick=function(){P("customMapcont");sk()};m("editCustom").onclick=Hm}}function Qh(a){let b=document.createElement("input");b.type="file";b.accept=".tzmod";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}
function Om(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnf";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}function yf(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnt";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsText(c)};b.click()}function Wd(){B.l||Q||Nm();var a=this.files[0];q(a);var b=new FileReader;b.onload=Pm;b.readAsArrayBuffer(a)}window.rcgini=function(a,b){n=bc(a,b).slice(0)};
function Qm(){cc(function(){D[122]();Fd();rf();D[244]();Bd()})}
function Pm(a){q(a);Bh=void 0;Nh();B.l&&(l.A.pb=l.A.max);a=a.target.result;var b=new Uint8Array(a,4),c=(new Uint32Array(a,0,1))[0];q(c,b);var d=b.length;a=D[44](d);for(var e=0;e<d;e++)window.HEAPU8[a+e]=b[e];b=D[45](4*c,d,B.l,1);if(Q)b?Qm():Rm(()=>{D[45](4*c,d,B.l);Qm()});else{if(!b)return Ia("too many players for this custon map");if(B.l)return P("addAI"),P("optionbutton"),m("rndmapreturn").style.display="inline-table",yd(m("nplayersO")),m("maploadOnline").value="",B.Vb=!0;P("RandomMap");qd("customMapcont");
m("custombody").innerHTML="";Sm.length=0;D[46]()}}function rc(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(d){d=d.target.response;ha||Tm({url:a,buffer:d});b(d)};c.send()}function mk(){var a=M(104),b;try{"granted"!=Notification.permission&&Notification.requestPermission(function(){});var c=new Notification(a,{icon:"nehhon/807.png",body:void 0,requireInteraction:!1});b||=5550;setTimeout(function(){c.close()},b)}catch{}}
function Um(a){for(var b="",c=0,d=a.length;c<d;c++)b+=Fk[a[c]];return b}ha||Ma[Um([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]===Um([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])||(Yb=fa);
function ee(a){if(a){var b=D[47]();if(E)a=$b(D[276](55==a),b*b*3),q(a),T.queue.writeBuffer(ii,0,a);else{a=ri(D[83](55==a),b*b*4);if(Ea)var c=2**Math.ceil(Math.log2(b));var d=performance.now();z.useProgram(W);z.activeTexture(z.TEXTURE1);ee.texture?(z.bindTexture(z.TEXTURE_2D,ee.texture),Ea?(z.getExtension("OES_texture_float"),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,b,b,0,z.RGBA,z.FLOAT,a)):z.texImage2D(z.TEXTURE_2D,0,z.RGBA32F,b,b,0,z.RGBA,z.FLOAT,a)):(ee.texture=z.createTexture(),z.bindTexture(z.TEXTURE_2D,
ee.texture),Ea?(z.getExtension("OES_texture_float"),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,c,c,0,z.RGBA,z.FLOAT,null),z.texSubImage2D(z.TEXTURE_2D,0,0,0,b,b,z.RGBA,z.FLOAT,a)):z.texImage2D(z.TEXTURE_2D,0,z.RGBA32F,b,b,0,z.RGBA,z.FLOAT,a),Qi(),z.uniform1i(z.getUniformLocation(W,"img_data"),1));z.useProgram(U);z.activeTexture(z.TEXTURE2);ca.Fc=performance.now()-d;ee.update=!1}}else ee.update=!0}window.setupTerrainTXT=ee;ee.update=!1;window.stpTupdtr=function(){ee.update=!0};var D,bb,Uf;
window.moduleLoaded=function(){var a=window.Module,b=Object.keys(a),c=b.length,d="synchroHash rnd setupRandom randomTerrain test shapoint Uint16Array boolArray test2 searchUnit setupResources movtablexe test3 setupGL getBufferID executeOrder Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen crtStxt configTerrain delTexs touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf updKngs mouseOut rstrRNDmap kngremainng idddamin runnxtcycl pong updtping refreshPlayerInfo tradingsum tradingresum selectoridest strtrading playerReconnect n2addss delAsyncPointer peacetime menustate prvbuild stpTactil checkDelAnim updresources wrkstate chtgspd mapVisibility chvisibility svggame shwRCR ckMnhst dellmitTest rOnlen stdiplomacy dpChange sndTribs shwsts empvtr trrbs trrwtr tmlck chmnlen chscrntype shICNu tchTime gtORDuIC shRCICNu shRCNLY gfastNF rcSEL unittable gtbonuses buildtable gnfoTYPE gdfltprops disctimeout chonltyp onlpulse onlstr pidchngsrc pidchngsrgb strgmonl chonltm wdtsetup wdtunit wdtkingdom wdtterrain dclslen edstdcl ruleadd shwrule eventadd shallrules edrulename shwevent chevactyp chkxkingdom confirmsel selname colorevsel delfromids viewfromids updevent chkxkingdomval areaactv areavw crntIDS ruleprops rulereps rleoprtn stdQ updmapname rtnmapname actntxt rluchkids chkxidsval eddreload chdipcntrl diptype EDmulpselect rluch2kids chk2xidsval chCRcptr chuCRcptr moddipops stphnames spvsVal btbl gtteam mddtable bmddtable mddpnter ordprps ordlen imddtable tmddtable rtrnconsts mddpointer dftstp nhuncomp eduname gtpstcycles onlrec lstrcv shdwn sbyclr shrmdd mddlen cnfTerrain3 updGL3kingdoms smtsel gtbidalpha prdbid".split(" ");D=
[];D.length=d.length;for(var e=0,g=d.length;e<g;e++)for(var h=d[e],k=0;k<c;k++){var p=b[k];if("__"==p.substr(0,2)&&-1<p.indexOf(h)){D[e]=a[p];break}}bb=new Zb(D[5](),4096);D[23]();D[23]();D[23]();Dk(D[53](Mk()),17,l.name||"Guest");E=3==f.webgl;D[109](521,ha,!!window.indexedDB,Math.floor(Math.random()*2**32),E);Uf=document.createElement("canvas");E||Vm();$a();window.ontouchstart=function(){q(123123);Aa=!0;D[169](1);window.ontouchstart=void 0}};
var aj=async a=>await (await fetch("nehhon/"+a)).text(),Vm=()=>{var a={antialias:!1,alpha:!1,depth:!0};Uf.id="canvas";f.webgl&&"2"!=f.webgl&&"3"!=f.webgl||(z=Uf.getContext("webgl2",a));z||(z=Uf.getContext("webgl",a),Ea=!0)},Vj=window.GPUTextureUsage,Xj,Uj,Wj,ek=0;
window.txtgpu=async(a,b,c,d,e,g,h,k,p,r,t,u,v)=>{a=Lh(a,b*c*4);T.queue.writeBuffer(di,t,a);b=new Uint32Array([t/4,b,c/(d*e),g,d,r,p,0,0]);c=new Float32Array(b.buffer);c[7]=h;c[8]=k;T.queue.writeBuffer(ji,u*b.length*4,b);await T.queue.onSubmittedWorkDone();D[165](v)};window.gl3kngs=(a,b)=>{T.queue.writeBuffer(oi,0,$b(a,b))};window.gl3nfo=(a,b)=>{T.queue.writeBuffer(pi,0,$b(a,b))};
async function uk(){function a(){um++;if(1==f.hlffps&&um%2)return requestAnimationFrame(a);zj();Pg();T.queue.writeBuffer(N,0,new Uint32Array([Date.now()-Gc+25*D[48]()]));Xi.colorAttachments[0].view=1==Y?e.getCurrentTexture().createView():Yi.createView();const la=d.createCommandEncoder();var X=la.beginRenderPass(Xi),pc=ek+1;Fa&&(3==Fa&&Ui||(X.setPipeline(A),X.setBindGroup(0,za),X.draw(6,1,0,0)),Ui&&(X.setPipeline(y),X.setBindGroup(0,Id),X.draw(6,pc,0,0)));if(we){var Lc=Ag(),pf=window.innerWidth/2-
Lc/2,qf=window.innerHeight/2-Lc/2;qd("bigMap");m("bigMap").style.width=Lc+"px";m("bigMap").style.height=Lc+"px";vm(X,pf,qf,Lc,Lc,pc)}pf=l.V;qf=l.W;vm(X,pf,qf,zg,zg,pc);X.setPipeline(k);X.setBindGroup(0,yb);X.draw(6,pc,0,0);X.setPipeline(r);X.setBindGroup(0,ba);X.draw(6,1,0,0);D[278]()&&1!=f.selcolor&&(X.setPipeline(C),X.setBindGroup(0,zb),X.draw(6,pc,0,0));pc=D[279]();X.setPipeline(p);X.setBindGroup(0,Da);X.draw(6,pc,0,0);h&&(X.setPipeline(u),X.setBindGroup(0,wm),X.draw(6,1,0,0));$f&&(X.setPipeline(H),
X.setBindGroup(0,ap),X.draw(6,1,0,0));X.end();1!=Y&&(X={colorAttachments:[{view:e.getCurrentTexture().createView(),clearValue:{r:.1,g:.1,b:.1,a:1},loadOp:"clear",storeOp:"store"}]},X=la.beginRenderPass(X),X.setPipeline(I),X.setBindGroup(0,xm),X.draw(6,1,0,0),X.end());ee.update&&ee(1);d.queue.submit([la.finish()]);B.v&&Gj();Date.now();requestAnimationFrame(a)}Fa=D[148]();var b=parseInt(f.fogRefresh);Ui=3==b&&Fa;Y=parseFloat(f.antialiasing2)||1;Y*=Math.round(25*parseInt(f.pixelDensity1/25))/100||Ti();
if((b=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}))||b){var c=b.limits.maxStorageBufferBindingSize;q("maxBufferSize",c/1048576);var d=await b.requestDevice({requiredLimits:{maxStorageBufferBindingSize:c}});T=d;b=Uf;c=window.innerHeight;b.width=window.innerWidth;b.height=c;var e=b.getContext("webgpu"),g=navigator.gpu.getPreferredCanvasFormat();e.configure({device:d,format:g,oc:"opaque"});var h=n[8];b=await fetch("nehhon/obs.wgsl");b=await b.text();b=d.createShaderModule({code:b});
var k=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}}),p=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,
entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/trn.wgsl")).text();b=d.createShaderModule({code:b});var r=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,
entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/mmap2.wgsl")).text();b=d.createShaderModule({code:b});var t=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",
targets:[{format:g}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});if(h){b=await aj("br.wgsl");b=d.createShaderModule({code:b});var u=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},
depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});b=await aj("brM.wgsl");b=d.createShaderModule({code:b});var v=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"always",
format:"depth24plus"}})}b=await (await fetch("nehhon/mmap.wgsl")).text();b=d.createShaderModule({code:b});var w=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",
format:"depth24plus"}});if(Fa){b=await fetch("nehhon/"+`fog${2==Fa?"2":"0"}${Ui&&2==Fa?"u":"n"}.wgsl`);b=await b.text();b=d.createShaderModule({code:b});var A=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"one",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"one",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",
format:"depth24plus"}});b=await fetch("nehhon/obsfog.wgsl");b=await b.text();if(Ui){b=d.createShaderModule({code:b});var y=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"zero"},alpha:{operation:"max",srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"always",format:"depth24plus"}})}b=
await fetch("nehhon/mtop.wgsl");b=await b.text();b=d.createShaderModule({code:b});var x=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}})}b=
await fetch("nehhon/obs2.wgsl");b=await b.text();b=d.createShaderModule({code:b});var C=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth24plus"}});if(1!=Y){b=
await (await fetch("nehhon/post.wgsl")).text();b=d.createShaderModule({code:b});var I=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g}]},primitive:{topology:"triangle-list"}})}b=await (await fetch("nehhon/rect.wgsl")).text();b=d.createShaderModule({code:b});var H=d.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:g,blend:{color:{operation:"add",
srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});di=d.createBuffer({size:534773760,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});pi=d.createBuffer({size:16*D[90](),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});oi=d.createBuffer({size:24576,usage:GPUBufferUsage.STORAGE|
GPUBufferUsage.COPY_DST,mappedAtCreation:!1});ki=d.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});jh=d.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});li=d.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});nf=d.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});mi=d.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|
GPUBufferUsage.COPY_DST,mappedAtCreation:!1});T.queue.writeBuffer(mi,0,new Float32Array([1/uc]));h&&(ei=d.createBuffer({size:32,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1}));hj();b=D[47]();window.addEventListener("resize",hj,!1);ci=bi=Math.round(b**2/5);fi=d.createBuffer({size:48*bi,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});gi=d.createBuffer({size:48*ci,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,
mappedAtCreation:!1});ii=d.createBuffer({size:b*b*12,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});hi=d.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});T.queue.writeBuffer(hi,0,new Uint32Array([b]));ji=d.createBuffer({size:174600,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var N=d.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Qf=d.createBuffer({size:16,
usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});T.queue.writeBuffer(Qf,0,new Float32Array([1,1,1,1]));c=ri(D[33](),1323);var S=d.createBuffer({size:4*c.length,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});(new Float32Array(S.getMappedRange())).set(c);S.unmap();b=b*b*2;b%4&&(b+=2);nj=d.createBuffer({size:b,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var za,lb,Id,yb,Da,zb,ba,ia,ym,wm,Ug;ni=()=>{let la=[{binding:0,
resource:{buffer:di}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:li}},{binding:2,resource:{buffer:fi}},{binding:3,resource:{buffer:ji}},{binding:4,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:5,buffer:{type:"uniform"},resource:{buffer:N}},{binding:6,resource:{buffer:S}},{binding:7,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:8,resource:{buffer:oi}},{binding:9,resource:{buffer:pi}},{binding:10,resource:{buffer:hi}},{binding:11,resource:{buffer:nf},
buffer:{type:"uniform"}},{binding:12,resource:{buffer:Qf},buffer:{type:"uniform"}}];yb=d.createBindGroup({layout:k.getBindGroupLayout(0),entries:la});la[2].resource.buffer=gi;Da=d.createBindGroup({layout:p.getBindGroupLayout(0),entries:la});zb=d.createBindGroup({layout:C.getBindGroupLayout(0),entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:li}},{binding:1,resource:{buffer:fi}},{binding:2,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:3,buffer:{type:"uniform"},
resource:{buffer:N}},{binding:4,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:5,resource:{buffer:pi}},{binding:6,resource:{buffer:hi}}]});ba=d.createBindGroup({layout:r.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:di}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:li}},{binding:2,resource:{buffer:ii}},{binding:3,resource:{buffer:ji}},{binding:4,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:5,buffer:{type:"uniform"},resource:{buffer:N}},
{binding:6,buffer:{type:"uniform"},resource:{buffer:hi}},{binding:7,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:8,resource:{buffer:Qf},buffer:{type:"uniform"}}]});Fa&&(za=d.createBindGroup({layout:A.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:nj}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:li}},{binding:2,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:3,buffer:{type:"uniform"},resource:{buffer:hi}},{binding:4,buffer:{type:"uniform"},
resource:{buffer:mi}}]}),Ui&&(Id=d.createBindGroup({layout:y.getBindGroupLayout(0),entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:li}},{binding:1,resource:{buffer:fi}},{binding:2,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:3,buffer:{type:"uniform"},resource:{buffer:N}},{binding:4,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:5,resource:{buffer:oi}},{binding:6,resource:{buffer:pi}}]})),lb=d.createBindGroup({layout:x.getBindGroupLayout(0),
entries:[{binding:0,resource:{buffer:nj}},{binding:1,buffer:{type:"uniform"},resource:{buffer:hi}}]}));ia=d.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:hi}},{binding:1,resource:{buffer:fi}},{binding:2,resource:{buffer:ji}},{binding:3,buffer:{type:"uniform"},resource:{buffer:N}},{binding:4,resource:{buffer:oi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:nf}},{binding:6,resource:{buffer:pi}}]});h&&(wm=d.createBindGroup({layout:u.getBindGroupLayout(0),
entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:hi}},{binding:1,buffer:{type:"uniform"},resource:{buffer:N}},{binding:2,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:4,buffer:{type:"uniform"},resource:{buffer:li}},{binding:5,buffer:{type:"uniform"},resource:{buffer:ei}}]}),ym=d.createBindGroup({layout:v.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:hi}},{binding:1,buffer:{type:"uniform"},
resource:{buffer:N}},{binding:2,buffer:{type:"uniform"},resource:{buffer:ei}}]}));Ug=d.createBindGroup({layout:w.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:hi}},{binding:1,resource:{buffer:ii}},{binding:2,resource:{buffer:ji}},{binding:3,buffer:{type:"uniform"},resource:{buffer:N}},{binding:4,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:ki}},{binding:6,buffer:{type:"uniform"},resource:{buffer:li}}]})};ni();
Uj=b=d.createTexture({size:[Ri,Si],format:"depth24plus",usage:Vj.RENDER_ATTACHMENT});var Yi,xm;1!=Y&&(Xj=()=>{Yi=d.createTexture({size:[Ri,Si],format:g,depthStencilFormat:"depth24plus",usage:Vj.TEXTURE_BINDING|Vj.RENDER_ATTACHMENT});xm=d.createBindGroup({layout:I.getBindGroupLayout(0),entries:[{binding:0,resource:Yi.createView()},{binding:1,resource:d.createSampler({magFilter:"linear",minFilter:"linear",mipmapFilter:"linear",maxAnisotropy:8})},{binding:2,resource:d.createSampler({magFilter:"nearest",
minFilter:"nearest"})},{binding:3,buffer:{type:"uniform"},resource:{buffer:mi}}]})},Xj());var ap=d.createBindGroup({layout:H.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:jh}},{binding:1,buffer:{type:"uniform"},resource:{buffer:li}},{binding:2,buffer:{type:"uniform"},resource:{buffer:mi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:ki}}]}),Xi={colorAttachments:[{view:void 0,clearValue:{r:.1,g:.1,b:.1,a:3==Fa?0:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:b.createView(),
depthClearValue:0,depthLoadOp:"clear",depthStoreOp:"store"}};Wj=Xi;var vm=(la,X,pc,Lc,pf,qf)=>{la.setViewport(X*Y,pc*Y,Lc*Y,pf*Y,0,1);la.setPipeline(t);la.setBindGroup(0,ia);la.draw(6,qf,0,0);la.setPipeline(w);la.setBindGroup(0,Ug);la.draw(6,h?1:Fa?1:2,0,0);Fa&&(la.setPipeline(x),la.setBindGroup(0,lb),la.draw(6,1,0,2==Fa?1:0),h||(la.setPipeline(w),la.setBindGroup(0,Ug),la.draw(6,1,0,1)));h&&(la.setPipeline(v),la.setBindGroup(0,ym),la.draw(6,1,0,0),la.setPipeline(w),la.setBindGroup(0,Ug),la.draw(6,
1,0,1));la.setViewport(0,0,Ri,Si,0,1)},um=0;Date.now();requestAnimationFrame(a);b=parseInt(f.fogRefresh)}else E=!1,z||(Vm(),f.webgl=2,D[109](521,ha,!!window.indexedDB,Math.floor(Math.random()*2**32),E));cc()}var of=new Uint32Array(1);function Dk(a,b,c){a=Hd(a,b);for(var d=0;d<b;d++)a[d]=c.charCodeAt(d)}
if(window.indexedDB&&!ha){var Wm=window.indexedDB.open("nh2019",521),Xm;Wm.onsuccess=function(){Xm=Wm.result;ha||Ym(function(){})};Wm.onupgradeneeded=function(){Xm=Wm.result;try{Xm.objectStoreNames.contains("basic")&&Xm.deleteObjectStore("basic"),Xm.objectStoreNames.contains("maps")||Xm.createObjectStore("maps",{keyPath:"id",autoIncrement:!0}),Xm.objectStoreNames.contains("mapsBlobs")||Xm.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),Xm.objectStoreNames.contains("basic")||Xm.createObjectStore("basic",
{keyPath:"url"})}catch(a){console.error(a)}}}function Tm(a){if(Xm)try{Xm.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){}}catch(b){console.error(b)}}function Ym(a){if(Xm&&!ha)try{var b=Xm.transaction(["basic"],"readonly");b.objectStore("basic").getAllKeys?b.objectStore("basic").getAllKeys().onsuccess=a:a({target:{result:[]}})}catch{}else a({target:{result:[]}})}
window.changeresources=function(a,b,c,d){if(!Q)for(a=[a,b,c,d],b=[jd,kd,ld,md],c=0;4>c;c++)a[c]==2**31-1&&(a[c]="***"),ti(b[c],a[c]||"0")};var Zm,$m,an=1,bn,cn,Z,dn,en,fn,gn,hn;
function Vd(){if(!m("edsel")){if(m("rules"))return yd(m("rules").parentNode.parentNode);var a=Qc("",2,"",1);a.id="rules";Zm=[];var b=[576,jn,637,kn,636,ln];for(var c=0;3>c;c++){var d=K("div",a,"",0<c&&"opacity:0.3;pointer-events:none");O("span",d,b[2*c]);let e=K("div",d);Zm[c]=e;K("button",d,"+").onclick=b[2*c+1]}D[220]();a=K("section",a);R(a);$m=a;fn=K("select",a,"","margin-right:25px;display:none");for(b=0;b<mn.length;b+=2)c=document.createElement("option"),d=M(mn[b]),c.textContent=d,Ef(c,fn,d),
c.value=b/2;fn.onchange=()=>{let e=parseInt(fn.value);D[223](e);nn=e;on[1].children[1].innerHTML=M(mn[2*e])};gn=K("select",a,"","margin-right:25px;display:none");for(b=0;b<pn.length;b+=2)c=document.createElement("option"),d=M(pn[b]),c.textContent=d,Ef(c,gn,d),c.value=b/2;gn.onchange=()=>{let e=parseInt(gn.value);D[223](e);nn=e;on[2].children[1].innerHTML=M(pn[2*e])};dn=K("span",a);b=K("button",a);b.className="dplbtt";b.onclick=()=>{let e=qn,g=rn[e];D[237](e,1);e?(Zm[1].innerHTML="",Zm[2].innerHTML=
"",D[218](rn[0],0,1)):(Zm[0].innerHTML="",D[220]());Zm[e].children[g].onclick()};b.dataset.title=M(649);b=K("div",a);en=K("div",b);Z=K("div",b);bn=L("span",a,"height: 31px; display: flex; padding: 0px 10px; padding-top: 10px; margin-top: 10px; border-top: 2px solid #ffffff17; justify-content: space-between; align-items: center");cn=L("input",bn,"height:20px;border-left:2px solid var(--color2);padding-left:8px;background:#ffffff0a");hn=L("span",bn,"display:flex;align-items:center;gap:7px;font-size:12px;color:var(--color1)");
cn.maxLength=40;cn.oninput=()=>{let e=cn.value.substr(0,40).trim(),g=ab(bb);for(let h=0;h<e.length;h++)g[h]=e.charCodeAt(h);on[qn]&&(on[qn].children[0].textContent=e);D[221](e.length,qn)};if(Zm[0].children[0])Zm[0].children[0].onclick()}}var nn,sn,tn,un,vn,wn,xn,yn,zn,An,Bn,Cn,En=a=>{a=mn[2*a+1];dn.innerHTML="";Z.innerHTML="";en.innerHTML="";Array.isArray(a)?Dn(a,dn,"#ffffff2e"):a()},Fn=a=>{a=pn[2*a+1];dn.innerHTML="";Z.innerHTML="";en.innerHTML="";Array.isArray(a)?Dn(a,dn,"#ffffff2e"):a()};
window.btmnu=function(a,b,c,d,e,g,h,k,p,r,t,u,v,w,A,y){dn.innerHTML="";nn=a;sn=b;tn=d;un=e;vn=g;yn=k;zn=p;An=c;wn=r?$b(t,r):[];xn=u?$b(v,u):[];Bn=y;Cn=A;hn.innerHTML="";1==w?(fn.value=a,yd(fn),K("span",hn,M(640)+" ( ! )"),le(hn,x=>{Bn=x;Gn()},Bn),K("span",hn,M(639)+" ( || )","margin-left:12px"),le(hn,x=>{Cn=x;Gn()},Cn),R(gn),En(a)):(gn.value=a,yd(gn),R(fn),Fn(a))};var Hn,In;window.untProps=function(a,b,c){Hn=M(a);In=[b,c]};
function Dn(a,b,c,d){for(let e=0;e<a.length;e+=2){let g=O("button",b,a[e]),h=a[e+1];g.onclick=()=>{Z.innerHTML="";b==dn&&(en.innerHTML="");h();b!=dn&&(d?An=e/2:sn=e/2,Gn());for(let k of b.children)k.style.cssText="";g.style.background=c;g.style.opacity=1};if(!e&&b==dn)g.onclick()}}function Jn(a){let b=K("div",Ic);b.id="edsel";let c=m("rules").parentNode.parentNode;R(c);m("content");O("button",b,112).onclick=()=>{yd(c);J(b);a()}}var Kn;
function Ln(a){a=a?xn:wn;Kn.innerHTML="";for(let b of a){let c=b;D[226](b);let d=K("div",Kn,Hn+` <span style="color:var(--color1)">(${In[0]+","+In[1]})</span>`,"color:#dedede;line-height:19px;padding:4px 0px;font-size:13px;border-bottom:1px solid #ffffff1f");a=K("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{D[228](c);J(d)};K("button",d,"\ud83d\udc41\ufe0f","margin:0px 10px;padding:1px;float:right;background:#ff00ff29;").onclick=()=>{D[229](c);Jn(()=>D[225](2))}}}
window.ruresize=function(){m("rules")&&(Db(m("rules")),an=1)};function Mn(a,b){a=Nn(a,b?zn?1:0:yn?1:0,[625,619],c=>{b?zn=c:yn=c});a.style.marginLeft=0;a.style.fontSize="12px";return a}
function On(a,b){D[234](a);let c=L("div",Z,"display:flex;justify-content:flex-start;align-items:center;gap:30px");Kn=K("div",c,"","padding:10px;height:141px;overflow:auto;width:250px;box-shadow:rgb(0 0 0 / 45%) 0px 0px 10px inset;margin-right:-19px");Ln(a);O("button",c,624,"height:161px;width:93px;font-size:11px").onclick=()=>Pn(a);b||(b=L("div",c),K("span",b,M(618)+": ","font-size:14px;color:#a99557"),Mn(b,a))}window.updIDS=function(a,b,c,d){wn=b?$b(a,b):[];xn=d?$b(c,d):[]};
function Pn(a){let b=K("div",Ic);b.id="edsel";let c=m("rules").parentNode.parentNode;R(c);O("button",b,24,"background:#04ff0036").onclick=()=>D[225](1);O("button",b,535,"background:#ff000036").onclick=()=>D[225](0);O("button",b,112).onclick=()=>{yd(c);D[225](2);J(b);Ln(a)};D[227]()}function Gn(){D[230](nn,sn,An,tn,un,yn,zn,vn,Bn,Cn)}function Qn(a){let b=L("div",Z);b.className="centerrule";a&&Nn(b,yn?1:0,[625,619],c=>{yn=c});O("span",b,643,"opacity:0.6")}
function Zd(a){a=K("select",a,"","font-size:12px");let b=[625,626,58,59];for(var c=0;c<b.length;c++)O("option",a,b[c]).value=c;for(let d=0,e=D[90]();d<e;d++)if(D[196](d),!V.$a){c=M(V.name)+" ("+Lb[V.race]+")";let g=document.createElement("option");g.value=d+b.length;g.textContent=c;Ef(g,a,c)}return a}
function Rn(a,b){let c=Zd(Z);c.value=b?zn:yn;c.onclick=()=>{b?zn=parseInt(c.value):yn=parseInt(c.value);Gn()};if(!a){let d=K("select",Z,"","margin-left:5px;font-size:18px;");K("option",d,">").value=0;K("option",d,"<").value=1;d.value=un;d.onclick=()=>{un=parseInt(d.value);Gn()};let e=K("input",Z,"","padding:3px;margin-left:5px;width:57px;font-size:18px");e.type="number";e.min=0;e.value=tn;e.onchange=()=>{tn=parseInt(e.value);Gn()}}K("div",Z,M(6)+":","margin:3px;margin-top:9px;font-size:8px");Sn(0,
b)}function Tn(a,b,c){let d=le(a,()=>{e.style.visibility=d.checked?"":"hidden";e.value=d.checked?0:-2147483647;e.onchange()},-2147483647!=b),e=Ka(a,b,()=>c(ce(e)),"number","transition:none;width:90px;margin-right:24px",2147483647,-2147483647);-2147483647==b&&(e.style.visibility="hidden")}function Un(){K("span",Z,M(635)+": ");Nn(Z,un,[">=","<=","="],a=>un=a)}
function Vn(){let a=An<2**24,b=Nn(Z,An-2**24,Wn(),d=>An=2**24+d);le(Z,()=>{An<2**24?(R(c),An=2**24,b.value=0,yd(b)):(R(b),yd(c),An=0);c.value=An},a).style.marginBottom="-10px";let c=Ka(Z,An,()=>{An=ce(c);Gn()},"number","margin:10px;height:23px;width:90px");a?R(b):R(c)}function Wn(){let a=[];for(let b=0;16>b;b++)a[b]=M(687)+"-"+(b+1);return a}function Xn(){Nn(Z,zn,Wn(),a=>zn=a)}function Yn(a,b){let c=b?zn:yn;de(d=>{b?zn=d:yn=d;Gn()},a||Z,1).value=c}
function de(a,b,c){let d=K("select",b||Z);b=0;for(let g=D[28]();b<g;b++){var e=b?Gd(Hd(D[111](b),20)):M(23);K("option",d,e).value=b}O("option",d,22).value=2147483647;c&&(O("option",d,642).value=2147483646);d.onclick=()=>a(ce(d));return d}
function $d(a){let b=L("div",a,"height:unset;min-height:61px");b.className="kcheck";let c=[];for(let g=0,h=D[28]();g<h;g++){var d=g?Gd(Hd(D[111](g),20)):M(23);let k=K("div",b),p=le(k,()=>0,!0);c.put(p);K("div",k,d,"word-break:break-all")}var e=g=>{for(let h of c)if(g){if(!h.checked)h.onclick()}else if(h.checked)h.onclick()};a=L("div",a,"display:flex;justify-content:flex-end;margin-top:13px");O("button",a,622,"margin-right:10px;color:#9e8d57").onclick=()=>e(1);O("button",a,623,"color:#9e8d57").onclick=
()=>e(0);return c}function Zn(a,b,c){let d=2147483647==c;(a.na=c)&&!d||Ff(a,-28);d&&(a.style.visibility="hidden");a.onclick=()=>{a.na=!a.na;Ff(a,a.na?0:-28);D[243](b,a.na)}}
function Sn(a,b){var c=K("div",Z);c.className="kcheck";let d=[],e=D[28]();var g=K("div",c),h=le(g,p=>{D[224](e,p,b)},D[231](e,b));d.put(h);O("div",g,642);for(let p=a||0,r=D[28]();p<r;p++)a=p?Gd(Hd(D[111](p),20)):M(23),g=K("div",c),h=le(g,t=>{D[224](p,t,b)},D[231](p,b)),d.put(h),K("div",g,a,"word-break:break-all");var k=p=>{for(let r of d)if(p){if(!r.checked)r.onclick()}else if(r.checked)r.onclick()};c=L("div",Z,"display:flex;justify-content:flex-end;margin-top:13px");O("button",c,622,"margin-right:10px;color:#9e8d57").onclick=
()=>k(1);O("button",c,623,"color:#9e8d57").onclick=()=>k(0)}var $n;function Ih(a,b,c,d){let e=L("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];if(!g)continue;let h=document.createElement("option");h.textContent=g;Ef(h,e,g);h.value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b}
function ae(a,b,c,d){let e=L("select",a,"font-size:12px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];0<=g?O("option",e,g).value=a:K("option",e,g).value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b;return e}function Nn(a,b,c,d){let e=L("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let g=c[a];0<=g?O("option",e,g).value=a:K("option",e,g).value=a}e.onchange=()=>{d(parseInt(e.value));Gn()};e.value=b;return e}function ao(){Nn(Z,zn,[646,645],a=>zn=a)}
function bo(a){$n=K("div",Z);$n.id="ruleprop";D[235](a)}function co(a,b,c){K("span",Z,M(635)+": ");let d=L("select",Z,"font-size:21px;padding:0px;margin-bottom:12px;margin-left:7px");b=b?[">=","<=","="]:["=","+","\u2212","\u00d7","\u00f7"];for(let e=0;e<b.length;e++)K("option",d,b[e]).value=e;d.onchange=()=>{c?zn=ce(d):un=ce(d);Gn()};d.value=c?zn:un;a||bo(0)}
function eo(){O("button",Z,616,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;").onclick=()=>{D[232](1);Jn(()=>{vn=D[232](0);Z.innerHTML="";eo()})};let a=O("button",Z,617,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;"+(vn?"background:#ff37ff1a":"opacity:0.5"));vn&&(a.onclick=()=>{D[233](1);Jn(()=>D[232](0))})}function fo(a,b){en.innerHTML="";Dn(a,en,"#00ff0026",b);en.children[b?An:sn].onclick()}
var go=()=>fo([616,On,620,Rn,642,()=>Qn(1)]),ho=()=>fo([616,()=>On(0,1),620,()=>Rn(1,0,1),642,Qn]);function Ef(a,b,c,d){d&&(c="0"+c);a.Sb=c;for(let e of b.children)if(e.Sb>c){b.insertBefore(a,e);return}b.append(a)}
function io(a){let b=L("div",Z);b.className="tchgrid";a&&(a=Mn(Z),a.style.display="",a.style.marginBottom="0px",b.style.cssText="height:136px;margin-right:20px");a=D[90]();let c=bc(D[242](a),a);for(let g=0;g<a;g++){var d=D[191](g,0,0,1);if(d){let h=c[g],k=document.createElement("div");var e=M(D[89](g));Ef(k,b,e,h);K("div",k,e);e=K("div",k);Ff(e,d);e.className="dataOrder";d=L("div",k,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");le(d,p=>D[243](g,p),h)}}}
var mn=[608,[612,go,614,eo],634,[612,go,482,function(){let a=K("div",Z,"","display:flex;justify-content:center;align-items:center;height:100%;gap:5px"),b=K("input",a,"","width:68px;font-size:23px");b.type="number";b.min=0;b.value=vn;b.onchange=()=>{vn=parseInt(b.value);Gn()};K("span",a,"m")},631,()=>fo([612,()=>On(1),620,()=>Rn(1,1)],1)],652,[612,go,653,function(){Nn(Z,vn,[658,659,660,661,662],a=>vn=a)},631,()=>fo([620,()=>Rn(1,1),612,()=>On(1)],1)],605,go,607,go,668,[62,function(){Un();let a=L("div",
Z,"display:flex;align-items:center;gap:7px"),b=bc(D[242](4),4);for(let c=0;4>c;c++)Vc(a,c),Tn(a,b[c],d=>D[243](c,d))},6,()=>Sn(1)],594,()=>Sn(1),593,()=>Sn(1),679,function(){Nn(Z,un,[">","<"],b=>un=b);let a=Ka(Z,tn,()=>{tn=ce(a);Gn()},"number","width:150px");K("span",Z,"ms")},680,()=>Sn(1,0),685,[612,()=>fo([620,()=>Rn(1),616,On,642,()=>Qn(0)]),656,()=>fo([620,()=>Rn(1,1),616,()=>On(1,1),642,()=>Qn(0)],1)],683,[612,()=>fo([616,On,620,Rn,642,()=>Qn(1),6,()=>Sn(1)]),687,function(){Xn();Nn(Z,vn,[">",
"<","="],a=>vn=a);Vn()}],684,[612,go,630,()=>co(0,1,1)],692,[6,()=>Sn(1),616,()=>io(1)],871,[687,function(){let a=L("div",Z,"display:flex;align-items:center;gap:7px");Ih(a,vn,Gf(1),c=>{vn=c;Gn()});Nn(a,un,[">=","<=","="],c=>un=c);let b=L("input",a,"width:70px");b.type="number";b.onchange=()=>{yn=ce(b);Gn()};b.value=yn},6,()=>Sn(1)],122,[6,()=>Sn(1)]],pn=[602,[612,function(){var a=K("div",Z,"","display:flex;justify-content:center;flex-direction:column;gap:18px");D[196](un);let b=K("button",a,M(V.name),
"height: 48px; background: url(nehhon/iconunits.webp) no-repeat, #00000042; width: max-content; padding-left: 60px;padding-right:12px;outline:1px solid #ffffff0d");Ff(b,D[193](un));b.onclick=()=>{pe(e=>{un=e;Gn();D[196](e);b.innerHTML=M(V.name);Ff(b,D[193](e))})};let c=K("div",a,M(629)+":"),d=K("input",c,"","margin-top:10px;padding:3px;margin-left:5px;width:60px;");d.type="number";d.min=0;d.value=tn;d.onchange=()=>{tn=parseInt(d.value);Gn()};a=K("div",a,M(6)+": ");Yn(a)},630,()=>bo(1),628,()=>fo([614,
eo,620,()=>Rn(1,1,1),612,()=>On(0,1),642,Qn])],592,[612,()=>fo([620,()=>Rn(1,0,1),612,()=>On(0,1),642,Qn]),627,function(){var a=K("div",Z);let b=K("select",a);a=[632,408,7,664,665,666,674,418,633,243,376,245,412,244,246,415,414,416,282,368,371,814,813,265,413,379,367,373,731,437,410];for(let c=0;c<a.length;c++){let d=document.createElement("option");d.value=c;d.textContent=M(a[c]);Ef(d,b,M(a[c]))}b.value=un;b.onclick=()=>{un=parseInt(b.value);Gn()}},631,()=>fo([614,eo,620,()=>Rn(1,1,1),612,()=>On(1,
1),642,Qn],1)],598,[612,ho,630,()=>fo([644,co,470,ao],1)],586,ho,580,ho,587,ho,582,[612,ho,6,()=>Yn(0,1)],594,()=>Sn(1,0),593,()=>Sn(1,0),597,[65,function(){D[241](0,1);let a=Ka(Z,Od,()=>{var b=a;let c=ab(bb);for(let d=0;d<b.value.length;d++)c[d]=b.value.charCodeAt(d);q(a.value.length);D[241](a.value.length)},"text","width:500px");a.placeholder=M(65)},6,()=>Sn(1,0)],667,[629,function(){co(1);let a=L("div",Z,"margin-top:15px;display:flex;align-items:center;gap:7px"),b=bc(D[242](4),4);for(let c=0;4>
c;c++)Vc(a,c),Tn(a,b[c],d=>D[243](c,d))},6,()=>Sn(1,0)],681,[612,()=>fo([616,()=>On(0,1),620,()=>Rn(1,0,1),642,Qn,6,()=>Sn(1,0)]),687,function(){Xn();Nn(Z,vn,["=","+","\u2212","\u00d7","\u00f7"],a=>vn=a);Vn()}],689,[6,()=>Sn(1),616,io],694,[616,function(){let a=K("div",Z);a.className="dplr";let b=bc(D[242](7),7);for(let e=0;7>e;e++)le(a,g=>{let h=a.children[e+7];h.style.visibility=g?"":"hidden";g&&(Ff(h,-28),h.na=0);D[243](e,g?0:2147483647)},2147483647!=b[e]);var c=["shenemies","shview","shcontrol"];
for(var d=0;d<c.length;d++){let e=K("div",a);e.className=c[d];Zn(e,d,b[d])}for(c=0;4>c;c++)d=K("div",a),d.className="shres",Vc(d,c),Zn(d,c+3,b[c+3])},695,()=>Sn(1,0),696,()=>Sn(1,1)],697,[612,()=>fo([616,()=>On(0,1),620,()=>Rn(1,0,1),642,Qn]),631,()=>fo([614,eo,620,()=>Rn(1,1,1),612,()=>On(1,1),642,Qn],1)],870,[687,()=>{let a=L("div",Z,"display:flex;align-items:center;gap:7px");Ih(a,vn,Gf(1),c=>{vn=c;Gn()});Nn(a,un,["=","+","\u2212","\u00d7","\u00f7"],c=>un=c);let b=L("input",a,"width:70px");b.type=
"number";b.onchange=()=>{yn=ce(b);Gn()};b.value=yn},6,()=>Sn(1,0)]],rn=[],on=[],jo=[];
window.shrule=function(a,b,c,d){let e=K("div",Z);var g=L("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");O("span",g,638,"color:#ffe594");let h=L("input",g,"width:40px");h.type="number";h.min=0;h.value=a;K("div",g,"0 =","color:#ffffff70");K("div",g,"&infin;","font-size:31px;margin-top:-1px;margin-left:-7px;color:#ffffff70");h.onchange=()=>D[236](parseInt(h.value),-1,-1);g=L("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");O("span",g,648,
"color:#ffe594");let k=L("input",g,"width:80px");k.type="number";k.min=0;k.value=c;k.onchange=()=>D[236](-1,-1,parseInt(k.value));K("div",g,"ms","color:#ffffff70;margin-left:-6px");g=L("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;opacity:0.4");O("span",g,647,"color:#ffe594");let p=L("input",g,"width:80px");p.type="number";p.min=0;p.value=b;p.onchange=()=>D[236](-1,parseInt(p.value),-1);K("div",g,"ms","color:#ffffff70;margin-left:-6px");K("span",e,M(610)+" ->"+(d?"":
" <span style='color:#989898'>"+M(641)+"<span>"));e.id="cond";jo[0]=K("div",e);jo[1]=K("div",e)};window.shrules=function(a,b,c){b?a=Gd(Hd(a,b)):a=M(611)+"-"+c;ko(0,c,a)};
window.shevents=function(a,b,c,d,e,g,h,k){b?a=Gd(Hd(a,b)):a=M(1==e?578:577)+"-"+d;ko(e,d,a,c);1==e&&(b=jo[h],h&&K("span",b,"||","color:var(--color1)"),K("span",b,(g&&"<span style='color:red;margin-right:1px'>!</span>"||"")+a,"color:#"+(g?"ff8585":"85ff85")),h||K("span",b,"&&","color:var(--color1)"),k&&(jo[0].lastChild?jo[0].removeChild(jo[0].lastChild):J(jo[1].children[0])))};window.shactions=function(){};var qn;
function ko(a,b,c,d,e){let g=K("div",Zm[a]);g.M=b;let h=K("div",g,c);a&&O("span",g,1==a?mn[2*d]:pn[2*d]);g.onclick=p=>{if(!p||p.target!=k)if(qn=a,on[a]!=g||!a){if(p=on[a])p.style.background="";rn[a]=g.M;on[a]=g;g.style.background="#0028a247";cn.value=h.innerHTML;if(0==a){$m.show();mb(Z);mb(en);mb(dn);R(gn);R(fn);mb(hn);for(p=1;3>p;p++){mb(Zm[p]);an&&(m("rules").children[p+1].style.cssText="");let r=on[p];r&&(r.style.background="",on[p]=void 0)}an=0;D[218](g.M,0)}else p=on[1==a?2:1],on[1==a?2:1]=void 0,
p&&(p.style.background=""),D[222](g.M,a)}};let k=K("button",g,"\u00d7");k.className="closeIcon";k.onclick=()=>{let p=qn;J(g);D[237](a,0,g.M);for(var r=0;3>r;r++){let t=Zm[r];for(let u=0;u<t.children.length;u++)t.children[u].M=u}q(rn[0],g.M);r=rn[0]==g.M;if(on[p]==g||r||!Zm[0].children.length)if(p&&rn[p]==g.M)on[0].onclick();else if(Zm[0].children[0])Zm[0].children[0].onclick();else R($m),mb(Z),mb(Zm[1]),mb(Zm[2]);else if(r=on[p].M,q(r,p),p)D[218](on[0].M,1),D[222](r,p,1);else D[218](r,1)};e&&(g.onclick(),
cn.oninput())}function jn(){let a=D[217]();ko(0,a,M(611)+"-"+a,0,1)}function kn(){if(Zm[0].children.length){let a=D[219]();ko(1,a,M(578)+"-"+a,0,1)}}function ln(){if(Zm[0].children.length){let a=D[219](1);ko(2,a,M(577)+"-"+a,0,1)}}var Q=!1;
function Rm(a){let b=Qc("",1);O("span",b,70,"margin-right:10px");let c=Ka(b,"",void 0,"number","",9999999,0);c.focus();O("button",b,675,"display:block;margin:auto;margin-top:20px").onclick=()=>{let d=D[251](ce(c));1==d?(Db(b),a()):2==d?(Db(b),alert(M(690))):alert(M(688))}}var lo=a=>{E=!1;z||(Vm(),D[109](521,ha,!!window.indexedDB,Math.floor(Math.random()*2**32),E));Q=!0;sk(a)};function Hm(a){D[250]()?Rm(lo):lo(a)}
var mo=[{h:1,id:0,S:[0,2]},{h:3,id:1,S:[0,2]},{h:-1,oa:1,id:2},{h:6,oa:1,id:4,S:[0,2]},{h:5,id:6,S:[0,2]}],Vh;window.guname=(a,b)=>{Vh=a?Gd($b(b,a)):""};function ve(a){let b=ab(bb),c=a.length;20<c&&(c=20);for(let d=0;d<c;d++)b[d]=a.charCodeAt(d);q(a);D[268](c)}
var be=(a,b,c)=>{var d=c||$n;let e=[];b=D[201](b);d=L("div",d);for(let h=0;h<mo.length;h++){let k=mo[h];if(0==k.id){if(!a[k.id]&&1==b)continue}else if(k.S&&0>k.S.indexOf(b))continue;K("div",d,k.name&&M(k.name),`background:url(nehhon/icons2.webp) 0px ${-20*k.h}px;width:20px;height:20px`);var g=a[k.id];let p=K("div",d),r=K("span",p),t;le(p,u=>{t.value=u?1:2147483647;if(t.onchange)t.onchange();u?yd(r):R(r)},2147483647!=g).style.cssText+="float:left;margin-right:5px;margin-top:-1px;";t=K("input",r);2147483647==
g&&R(r);t.type="number";t.value=g;e[k.id]=t;k.oa&&(K("span",r," / ","font-size:21px"),g=K("input",r),g.type="number",g.value=a[k.id+1],e[k.id+1]=g)}for(b=0;b<e.length;b++)e[b]&&(d=e[b],d.max=2147483647,d.min=-1);if(!c)for(c=0;c<a.length;c++)e[c]&&(e[c].onchange=()=>{for(var h=0;h<a.length;h++)e[h]&&(a[h]=parseInt(e[h].value));h=ab(bb);for(let k=0;k<a.length;k++)h[k]=a[k];D[123](2147483647)});return e};window.editProps2=be;
var qo=(a,b,c,d,e)=>{q(a,c);0>b&&(b=no(b));if(!a)return D[202](b);var g=[{h:1,id:0,S:[0,2]},{h:3,id:1,S:[0,2]},{h:-1,oa:1,id:2},{h:6,oa:1,id:4,S:[0,2]},{h:5,id:6,S:[0,2]}];let h;e?h=$n:(h=Qc(""),h.className="unitProps",d&&(h.className="viewonly"),h.parentNode.parentNode.style.position="fixed",h.style.minWidth="300px");let k=[],p;0<c||d||(K("span",h,M(516),"margin-right:15px;color:var(--color1)"),p=Km(h));if(!e){var r=K("button",h);r.className="closeIcon";r.onclick=function(){Db(h);if(!d){for(var v=
0;v<a.length;v++)k[v]&&(a[v]=parseInt(k[v].value));if(c){q(a);v=ab(bb);for(let w=0;w<a.length;w++)v[w]=a[w];D[123](c);q(k)}else{if(p.checked)n[oo]&&(n[oo]=0,n.splice(oo+1,7));else{if(!n[oo]){for(v=0;7>v;v++)n.splice(oo+1,0,0);n[oo]=1}q("s",a);for(v=0;7>v;v++)n[oo+1+v]=a[v]}po(0,n)}}}}b=D[201](b);if(Q&&!e){r=L("div",h,!d&&!e&&"margin-top:14px");O("div",r,747);r=L("div",r,"display:flex;gap:11px");let v;le(r,w=>{v.style.display=w?"unset":"none";w||(Vh="",D[268](0))},Vh);v=L("input",r,"width:137px");
Vh||R(v);v.maxLength=20;v.onchange=()=>{ve(v.value)};v.value=Vh}let t=L("div",h,!d&&!e&&"margin-top:34px");for(r=0;r<g.length;r++){let v=g[r];q(v.id,a[v.id]);if(0==v.id){if(!a[v.id]&&1==b)continue}else if(v.S&&0>v.S.indexOf(b))continue;K("div",t,v.name&&M(v.name),`background:url(nehhon/icons2.webp) 0px ${-20*v.h}px;width:20px;height:20px`);var u=K("div",t);let w=K("input",u);w.type="number";w.value=a[v.id];k[v.id]=w;v.oa&&c&&(K("span",u," / ","font-size:21px"),u=K("input",u),u.type="number",u.value=
a[v.id+1],k[v.id+1]=u)}for(g=0;g<k.length;g++)k[g]&&(b=k[g],d&&(b.disabled=!0),b.max=2147483647,b.min=-1,b.oninput=wh);if(c&&!e){K("span",t);b=K("select",t);for(let v=0,w=D[28]();v<w;v++)g=v?Gd(Hd(D[111](v),20)):M(23),Tc(D[132](v)),K("option",b,g).value=v;K("option",b,M(22)).value=2**31-1;b.value=a[7];k[7]=b}p&&(p.parentNode.style.display="inline",n[oo]||(p.checked=!0,R(t)),p.onclick=function(){p.checked?R(t):t.style.display=""});if(e)for(e=0;e<a.length;e++)k[e]&&(k[e].onchange=()=>{for(var v=0;v<
a.length;v++)k[v]&&(a[v]=parseInt(k[v].value));q(a);v=ab(bb);for(let w=0;w<a.length;w++)v[w]=a[w];D[123](2147483647);q(k)})};window.editProps=qo;function P(a){m(a)&&(m(a).style.display="none")}function qd(a){m(a)&&(m(a).style.display="block")}function ke(){let a=Qc("",1),b=D[254](),c=L("div",a,"display:flex;align-items:center;gap:8px");O("div",c,516);le(c,e=>{e?mb(d):(ro(d),D[252](3));D[254](1,!e)},!b);let d=K("div",a);b&&(ro(d),D[252](3))}
function ro(a){let b=D[28]();so=L("div",a,`grid-template-columns:repeat(${b},auto)`);so.className="dpltbl wbak";for(a=0;a<b**2;a++)K("div",so);so.children[0].style.height="calc(100% - 12px)"}var to=[a=>{so=L("div",a,"margin-top:10px;gap:10px 14px;display:grid;grid-template-columns:auto auto");so.className="wbak";D[103](2)},a=>{ro(a);D[103](1)}],so;function je(){let a=Qc("",1);O("span",a,620,"margin-bottom:5px");let b=D[246]();ae(a,b,[673,672],()=>{b=b?0:1;J(so);to[b](a)});to[b](a)}
window.dpltbl0=function(a,b,c,d){b=Gd(Hd(b,20));L("div",so,"padding-left:8px;border-left:2px solid "+Tc(c)).textContent=b;let e=Ka(so,d,()=>{me(e);D[105](a,ce(e))},"number","width:40px",1E3,0)};function uo(a,b,c,d){let e=so.children;a.onmouseenter=()=>{e[b].style.background="#ffffff47";e[c*d].style.background="#ffffff47"};a.onmouseout=()=>{e[b].style.background="";e[c*d].style.background=""}}
window.dpltbl=function(a,b,c,d){b=Gd(Hd(b,20));let e=D[28](),g=ab(bb),h=so.children;h[a].style.cssText=`align-self:end;writing-mode:vertical-rl;border-top:2px solid ${Tc(c)};padding:7px 5px`;h[a*e].style.cssText=`justify-self:end;border-left:2px solid ${Tc(c)};padding:5px 7px`;h[a].textContent=b;h[a*e].textContent=b;for(let k=0;k<e-1;k++){let p=k+1;if(3==d){if(p==a)continue;let r=le(h[a*e+p],()=>{D[245](r.checked,p,a,d)},g[p]);r.style.backgroundPositionX="0px";uo(r,p,a,e)}else if(0==d){if(k>=a-1)break;
let r=0,t=0,u=le(h[a*e+1+k],()=>{t=1;q(a,k+1,u.checked);D[245](u.checked,a,k+1);if(r)r=0;else v.onclick();t=0},g[k+1]);uo(u,k+1,a,e);let v=le(h[a+(1+k)*e],()=>{t||(r=1,u.onclick())},g[k+1]);v.style.opacity=.25;uo(v,a,k+1,e)}}};
window.chglmap=function(a,b){z.useProgram(W);Ea?(z.uniform1f(z.getUniformLocation(W,"mapSize"),2**Math.ceil(Math.log2(a))),z.uniform1f(z.getUniformLocation(W,"mapSize2"),a)):z.uniform1f(z.getUniformLocation(W,"mapSize"),a);z.useProgram(U);z.uniform1f(z.getUniformLocation(U,"mapSize"),a);z.uniform1f(z.getUniformLocation(U,"zMax"),96*a);b||(D[130](a),ee())};function Tc(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a}
window.setupEditorPlayerTable=function(a,b,c,d,e){c=Gd(Hd(c,20));var g=Tc(b);b=fe;let h=L("input",b,"width:13px");h.type="color";h.value=g;h.onchange=()=>{D[104](a,parseInt(h.value.substr(1),16));Fd()};g=K("input",b);g.value=c;g.ya=a;g.onchange=Mm;for(let p=0;4>p;p++){let r=L("input",b,"width:60px");r.type="number";r.value=e[p];r.onchange=()=>{D[107](a,ce(r),p)}}let k=le(b,()=>D[141](a,100*k.checked+1,0,1),d);K("button",b,"...","padding:3px 8px").onclick=()=>vo(a);c=K("button",b);c.className="closeIcon";
c.onclick=()=>D[126](a)};function wo(){var a=xo.data,b=yo.data,c=m("invrtimg").checked;q(c);var d=255*parseInt(m("rngcnvs").value)/100;for(let e=0;e<a.length;e+=4){let g=(a[e]+a[e+1]+a[e+2])/3;c&&g<d||!c&&g>=d?(b[e]=2,b[e+1]=29,b[e+2]=45):(b[e]=34,b[e+1]=55,b[e+2]=0);b[e+3]=255}m("prevcan").getContext("2d").putImageData(yo,0,0)}var xo,yo;
function Km(a){var b=document.createElement("label");b.className="container";var c=document.createElement("input");c.type="checkbox";c.checked=0;var d=document.createElement("span");d.className="checkmark";b.appendChild(c);b.appendChild(d);a.appendChild(b);return c}function zo(){this.H.innerHTML='<div style="background:url(nehhon/icons2.webp) no-repeat 0px -200px;width:20px;height:20px;display:inline-block;margin-bottom:-6px;"></div>x'+this.value/100}
function Lk(){this.H.innerHTML=this.value+"%"}function Ao(){this.H.innerHTML=this.value}function Bo(){this.H.innerHTML=this.value+"m"}function Co(){this.H.innerHTML=this.value+M(558)}function Do(){this.H.innerHTML=Fc(1E3*parseInt(this.value))}function Eo(){this.H.innerHTML=this.value+"s"}
async function ne(){let a=new Image;a.src=window.URL.createObjectURL(this.files[0]);await a.decode();var b=D[47](),c=m("mmimg");c.innerHTML="";var d=L("canvas",c,"position: static;margin:28px;display:block;width:291px");d.id="prevcan";var e=K("input",c);e.type="range";e.id="rngcnvs";Jk(e);e.oninput=function(){this.H.innerHTML=this.value+"%";wo()};e.H.innerHTML="50%";e.value=50;K("span",c,M(458),"margin-left:10px");c=Km(c);c.id="invrtimg";c.onchange=wo;d.width=b;d.height=b;d=d.getContext("2d");d.imageSmoothingEnabled=
!0;d.fillStyle="#fff";d.fillRect(0,0,b,b);c=a.width;e=a.height;var g=b/(c>e?c:e);c=Math.floor(c*g);e=Math.floor(e*g);d.drawImage(a,(b-c)/2,(b-e)/2,c,e);xo=d.getImageData(0,0,b,b);yo=new ImageData(b,b);wo();K("button",m("mmimg"),M(2),"margin-bottom:36px;margin-left:22px").onclick=Fo;URL.revokeObjectURL(a.src)}function Fo(){var a=D[186](),b=D[187](),c=D[47]();c=si(D[78](1),c*c);var d=yo.data;for(let e=0;e<d.length;e+=4)c[e/4]=2==d[e]?b:a;q(c);D[124]();ee.update=!0}
function vo(a){let b=Qc("",1);b.id="mapPropsXtra";if(D[141](a)){var c=K("div",b);for(let e=0;2>e;e++)Ka(c,D[141](a,0,e),function(){me(this);this.value=D[141](a,ce(this)+1,e)},"number","",100,e?0:1),O("span",c,[10,34][e])}O("button",b,542,"display:block;margin:auto;margin-bottom:20px").onclick=()=>{D[140](a,1);Db(b);vo(a)};O("button",b,12,"display:block;margin:auto").onclick=()=>D[140](a);c=L("div",b,"margin-top:20px");let d=zh();d.unshift({name:M(42),id:4},{name:M(11),id:38});for(let e of d)Ka(c,
D[139](a,e.id),function(){D[139](a,e.id,ce(this)+1)},"number"),K("span",c,e.name)}var fe;function Vc(a,b){a=K("img",a);a.src="nehhon/"+["gold","wood","food","stone"][b]+".gif";return a}function ge(){mb(fe);K("button",fe,"+").onclick=()=>D[114](1);O("div",fe,6,"justify-self:baseline");for(let a=0;4>a;a++)Vc(fe,a);O("div",fe,20);K("div",fe);K("div",fe);D[103]()}window.editorPlayerTable=ge;
function Mm(){var a=17;this.value.length<a&&(a=this.value.length);for(var b=ab(bb),c=0;17>c;c++)b[c]=0;for(c=0;c<a;c++)b[c]=this.value.charCodeAt(c);D[106](this.ya);Q&&Fd()}function Go(a){Q&&(a.className="onlyrnd",a.dataset.nly="Only random maps")}var Sm=[];
window.customMapTable=function(a,b,c,d,e,g,h){var k=m("custombody");k=K("tr",k);L("td",k,`background:rgb(${e},${g},${h})`).className="ucolor1";let p=K("td",k,Gd(Hd(b,20)),d?"color:var(--color1)":"");p.className="username1";Sm[a-1]=p;D[246]()||(K("td",k,c).className="team1");k.onclick=()=>{for(let r of Sm)r.style.cssText="";p.style.color="var(--color1)";D[113](a)}};
function kg(a,b,c,d,e){let g;c&&=M(c);if(d){g=document.createElement("div");let h=null;for(let k=0,p=a.children;k<p.length;k++)if(p[k].Eb>d){h=p[k];break}g.Eb=d;a.insertBefore(g,h)}else g=K("div",a);g.className=e?"dataOrder":"dataIcon";g.style.backgroundPositionY=b+"px";c&&(g.dataset.title=c);return g}window.stFST=function(a,b,c,d,e){V={race:a,D:b,name:c,priority:d,$a:e}};var V,Ho;
function pe(a,b){let c=Ab("",1);var d=K("table",c);if(b){O("thead",d,763);b=K("td",K("tbody",d));b.className="s3race";b.colSpan=4;var e=ab(Ho);for(let k=0;k<e.length;k++){D[196](e[k]);if(!(k%3)){let p=[];var g=K("div",b);g.dataset.title=M(V.name);g.Cb=p;g.onclick=()=>{a(-1-k,p);Db(c)}}var h=V.D;g.Cb.put(h);kg(g,h,0,V.priority)}}e=K("thead",d);g=K("tbody",d);b=K("tbody",d);c.parentNode.parentNode.style.position="fixed";K("div",d,M(60),"text-transform:uppercase;padding:11px;padding-top:23px;color:#0f0");
d=K("td",K("tbody",d),"","border:none");d.colSpan=4;c.id="selObj";for(h=0;4>h;h++)K("td",g),K("td",b),K("td",e,Lb[h]);e=D[90]();for(let k=0;k<e;k++){D[196](k);let p=D[194](k,1);h=V.race;let r=g.children[h];p||(p=D[194](k,0,1),r=b.children[h]);p||(p=D[194](k,0,0,1),r=d);p&&(kg(r,p,V.name,V.priority).onclick=()=>{a(k,p);Db(c)})}}var Io;function Jo(a,b,c){a=K("div",a);b=b?2==b?M(22):Sc(0,D[29](b)):M(23);a.dataset.selplayer=b;a.onclick=Ko;a.Ub=c}var Lo;
function Ko(){this.innerHTML="";let a=K("div",this);K("div",a,M(23)).Qa=0;K("div",a,M(22)).Qa=2;Lo=a;document.addEventListener("mouseup",Mo,{once:!0})}function Mo(a){a=a.target;void 0!=a.Qa&&(q(a.parentNode.parentNode),a.parentNode.parentNode.Ub(a.Qa),a.parentNode.parentNode.dataset.selplayer=a.innerHTML);J(Lo)}var No,Oo;function Po(){let a=ce(hk[21]);Oo.innerHTML=M(510)+": "+Fc(1E3*(ce(hk[24])*(a-1)+a*ce(hk[8])*60))}
function Qo(a,b){return`<span>=</span> ${a}\u00d7${b}\u00b2/256\u00b2 <span>=</span> <span style="font-size:12px;font-family:'nh18';color:var(--color1);">${Math.round(a*b**2/65536)||1}</span>`}function Ro(){var a=parseInt(this.value);if(0>a||!a)this.value=a=0;9999<a&&(this.value=a=9999);n[this.ja]=a;if(this.Pa){a=n[0];let b=n[this.ja];this.Pa.innerHTML=n[this.ja+3]?Qo(b,a):"";this.Pa.Db=b}}function So(a){n.push(1,1,a,10,0);po(0,n)}function To(a){n.push(1,0,a,1,0);po(0,n)}
function no(a,b){b||=0;return ab(Ho)[-(a+1)+b]}var oo;
function po(a,b){Ho=new Zb(D[197](),48);ab(Ho);Io.innerHTML="";No.innerHTML="";for(var c=47;c<b.length;c+=5){let k=c;var d=b[k],e=b[k+1];let p=b[k+2],r=b[k+3],t=b[k+4],u=1==e;var g=K("tr",u?No:Io);let v=K("td",g);var h=K("div",v,"",t&&"background-color:#ff00ff17 !important");h.className="sett2";if(t||!a)h.onclick=()=>{oo=k+4;qo(t?b.slice(k+5,k+5+7):0,p,0,a)};let w;if(0<=p)D[196](p),w=kg(v,V.D,V.name);else for(w=K("div",v),w.className="dataIcon3",D[196](no(p)),w.dataset.title=M(V.name),h=0;3>h;h++){let y=
K("div",w),x=no(p,h);D[196](x);y.style.backgroundPositionY=V.D+"px"}a||(w.onclick=()=>pe((y,x)=>{var C=w,I=k+2;q(x);if(0>y){C.className="dataIcon3";ti(C,"");for(let H=0;3>H;H++)K("div",C).style.backgroundPositionY=x[H]+"px"}else C.className="dataIcon",ti(C,""),C.style.backgroundPositionY=x+"px";C.dataset.title=M(D[89](0>y?no(y):y));b[I]=y;q(y,C,b,I)},u));K("span",v,"\u00d7");let A=K("input",v);A.value=d;A.type="number";A.ja=k;A.oninput=Ro;A.onchange=Ro;if(u)e=sg(K("td",g,"","text-align:left"),r),
e.ja=k+3,e.max=35,e.style.width="116px",e.H.style.width="36px",e.oninput=function(){this.H.innerHTML=this.value+"m"},e.oninput(),e.onchange=Ro;else{let y=Km(K("td",g));y.checked=r;d=K("td",g);d.className="finalRes";A.Pa=d;A.onchange();y.onchange=()=>{b[k+3]=y.checked?1:0;A.onchange()};a?(e=e?2==e?M(22):void 0:M(23),K("td",g,e,"font-size:13px;text-align:center")):Jo(K("td",g),e,x=>b[k+1]=x)}t&&(c+=7);a||(g=K("div",K("td",g)),g.className="closeIcon",g.onclick=()=>{b.splice(k,5+(t?7:0));po(0,b)})}a||
(c=K("div",K("td",K("tr",No))),c.className="sum",c.onclick=()=>pe(So,1),c=K("div",K("td",K("tr",Io))),c.className="sum",c.onclick=()=>pe(To))}function Uo(a){return`<td>${a||""}</td>`}function Vo(){for(let a of Wo)if(a.id&&ja[a.id]!=n[a.id])return!0;return!1}
function Xo(a){var b=Wo,c=Vo();let d=K("div",a);for(let e of b){if(e.Ca){0==d.children.length&&J(d);d=K("div",a);continue}if(!e.id){K("div",d,"","margin-top:20px");K("div",d);continue}b=Yo(e.title,e.type,d);"input"==e.type&&(b.type="number");void 0!=e.min&&(b.min=e.min);e.max&&(b.max=e.max);e.step&&(b.step=e.step);e.oninput&&(b.oninput=e.oninput,b.oninput());e.h&&(K("img",b.parentNode,"","margin-right:3px",1).src="nehhon/"+e.h);e.options&&Zo(e.options,b);e.ib&&(b.style.cssText=e.ib);e.xa&&K("span",
b.parentNode,e.xa,"margin-left:4px;margin-right:10px",1);e.id&&$o(e.id,b);let g=ja[e.id];if(29==e.id)g+="m";else if(35<=e.id&&38>=e.id)g+="s";else continue;K("div",b.parentNode,M(516)+" -> "+g)}return c}function wh(){me(this)}function me(a){var b=parseInt(a.min),c=parseInt(a.value);c>parseInt(a.max)?a.value=a.max:c<b?a.value=a.min:c||(a.value=0)}
function Ud(){for(var a="",b=0,c=Ya.length;b<c;b++){var d=Ya[b];var e=b==D[97]()?"selected":"";a+=`<option value="${b}" ${e}>${d.name}</option>`}return a}function lk(a,b,c){var d=B.l?D[70]():D[28]()-1;if(0>=d)return a;if(b){if(80>Math.PI*a/d)return a=Math.round(80*d/Math.PI),La(Eh(M(25),a),"#d2bf61"),a}else if(b=13100*Math.PI*c**2/(5625*Math.PI),a**2/d<b)return a=Math.round(Math.sqrt(b*d)),ik||La(Eh(M(25),a),"#d2bf61"),a;return a}
window.updtrr=function(){cc(function(){D[122]();ee.update=!0;D[121]();Bd()})};function bp(){var a=n;for(let b=0;b<hk.length;b++){let c=hk[b];c&&("checkbox"==c.type?c.checked=a[b]:c.value=a[b],"range"==c.type&&c.oninput&&c.oninput(),c.onchange||(c.onchange=wh))}}
var cp,dp,Wo=[{id:42,title:523,type:1},{id:17,title:395,type:1},{id:20,title:491,type:1},{id:40,title:508,type:1},{id:43,title:651,type:1},{id:44,title:869,type:1},{id:45,title:877,type:1},{Ca:1},{id:29,title:494,type:2,oninput:Bo,max:256,min:1,ib:"width:167px"},{Ca:1},{id:39,title:504,type:1},{id:33,title:501,type:2,oninput:zo,min:0,max:200,step:25},{id:32,title:500,oninput:zo,type:2,min:0,max:200,step:25},{id:31,title:499,oninput:zo,type:2,min:0,max:200,step:25},{id:34,title:71,oninput:function(){this.H.innerHTML=
"x"+this.value/100},type:2,min:100,max:500,step:100},{Ca:1},{id:41,title:511,type:2,oninput:Ao,min:10,max:1E3,step:10},{Ca:1},{title:502,id:35,h:"gold.gif",type:2,oninput:Eo,min:1,max:30},{id:36,h:"wood.gif",type:2,oninput:Eo,min:1,max:30},{id:37,h:"food1.webp",type:2,oninput:Eo,min:1,max:30},{id:38,h:"stone.gif",type:2,oninput:Eo,min:1,max:30},{},{id:30,title:495,type:"select",options:[89,496,497,498],xa:"\u25bc"},{id:25,h:"gold.gif",type:"input",max:5E4},{id:26,h:"wood.gif",type:"input",max:5E4},
{id:27,h:"food.gif",type:"input",max:5E4},{id:28,h:"stone.gif",type:"input",max:5E4}],ep;function fp(){var a=m("prstnpt").value,b=!gp[a];gp[a]=gk();f.presets4=JSON.stringify(gp);b&&hp(a,n,ep)}
function hp(a,b,c,d){let e=K("span",c);K("button",e,(d?"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714</span> ":"")+a,"color:var(--color1);margin-bottom:20px").onclick=()=>{n=b.slice();cp.checked=0<n[8];cp.onclick();dp.checked=Vo();dp.onchange(5);bp();po(0,n);hk[30].onchange();Po()};d||(K("button",e,"\ud83d\udfa9","color:red;font-size:14px;line-height:14px;width:18px;background:#ff00002b;padding:0px;border-radius:0px").onclick=()=>{gp[a]=void 0;f.presets4=JSON.stringify(gp);J(e)})}var gp;
function Yo(a,b,c){K("div",c,a&&M(a)||"");a=K("div",c);return b?1===b?Km(a):2==b?sg(a):K(b,a):a}function Zo(a,b){for(let c=0;c<a.length;c++)K("option",b,M(a[c])).value=c}function le(a,b,c,d){let e=K("div",a,"","",d);e.className="check2";c&&(e.checked=c,e.style.backgroundPositionY="0");e.onclick=()=>{e.checked=!e.checked;e.style.backgroundPositionY=e.checked?"0":"";b(e.checked)};return e}var hk;function $o(a,b){hk[a]=b;b.ja=a}
function he(a){(a=5===a)&&m("mapconfiguration")&&Db(m("mapconfiguration"));if(m("mapconfiguration"))m("mapconfiguration").parentNode.parentNode.style.display="table";else{var b=Qc("");b.id="mapconfiguration";hk=[];a&&(m("mapconfiguration").className="viewonly");var c=K("button",b);c.className="closeIcon";var d=K("div",b);d.id="mainconf";if(!Q){var e=K("div",d,"","");for(var g=0;4>g;g++){K("img",e).src="nehhon/"+["gold","wood","food","stone"][g]+".gif";var h=K("input",e);$o(1+g,h);h.min=-1E9;h.max=
1E9;h.step=100;h.type="number"}}if(Q){var k=K("div",d);Go(k)}g=K("div",d);e=Yo(1,"input",g);e.step=32;e.min=96;e.max=2048;e.type="number";$o(0,e);e.onchange=function(){var H=ce(this)||0;this.value=H=Q?H:lk(H,hk[16].checked,ce(hk[29]));let N=document.getElementsByClassName("finalRes");for(let S of N)S.innerHTML&&(S.innerHTML=Qo(S.Db,H));n[0]=H;me(this)};e=Yo(26,"select",g);$o(6,e);for(h=0;h<Ya.length;h++)K("option",e,Ya[h].name).value=h;e=Yo(27,"select",Q?k:g);$o(7,e);Zo([28,29,30,31,32,33,525,524],
e);e=Yo(35,"select",g);$o(12,e);Zo([36,37,38,39],e);g=K("div",d);e=Yo(398,"select",g);$o(19,e);Zo([399,400,401],e);Q||(e=Yo(11,"input",g),$o(9,e),e.type="number",e=Yo(42,"input",g),$o(10,e),e.type="number",e.min=100,e.max=5E4);e=Yo(396,2,g);e.oninput=Co;$o(18,e);e.style.width="150px";Q||(g=K("div",d));e=Yo(394,1,Q?k:g);$o(16,e);e=Yo(393,2,Q?k:g);$o(15,e);e.oninput=Lk;e.style.width="150px";Q&&k.parentNode.appendChild(k);Q||(K("div",g,"","min-height:0px"),e=K("div",g,"","min-height:0px"),e.className=
"diffnfo",e.innerHTML='easy<span style="width:14px"></span>normal<span style="width:14px"></span>hard<span style="width:25px"></span>legend',e=Yo(10,2,g),e.oninput=Lk,$o(11,e),e.style.width="150px",e.min=15,e.max=150,e=Yo(34,2,g),e.oninput=Lk,$o(13,e),e.style.width="150px");O("button",b,737,"padding: 12px 15px;\n    width:max-content;\n    background: #fbd45c1c;\n    color:var(--color1);\n    box-shadow:0px 0px 20px #000;\n    border:1px solid rgb(243 205 90 / 8%);\n    margin-bottom: 18px;\n    font-size: 16px;\n    margin-top:-23px;\n    ").onclick=
()=>ie(a);d=K("div",b);d.id="br";let t=K("div",d);cp=Yo(484,1,t);cp.checked=0<n[8];t.children[0].style.color="var(--color1)";let u=Yo(487,"select",t);$o(5,u);Zo([489,720,509],u);let v=Yo(485,2,t);v.min=1;v.max=60;v.oninput=Co;$o(8,v);let w=Yo(490,"input",t);w.step=10;w.min=1;w.max=8E4;w.type="number";$o(22,w);let A=Yo(486,2,t);A.min=0;A.max=3600;A.step=30;A.oninput=Do;$o(14,A);let y=Yo(488,2,t);y.min=1;y.max=25;y.oninput=Ao;$o(21,y);let x=Yo(492,2,t);x.min=0;x.max=100;x.oninput=Bo;$o(23,x);let C=
Yo(493,"input",t);C.step=10;C.min=0;C.max=600;C.type="number";$o(24,C);K("span",C.parentNode,"s");C.style.width="50px";C.addEventListener("input",Po);v.addEventListener("input",Po);y.addEventListener("input",Po);K("div",t);K("div",t);K("div",t);Oo=K("div",t,"","font-size:11px;color:#ffffff4d;line-height:0px;margin-top:11px;text-align:right");cp.onclick=function(){this.checked?(y.value=3,A.value=600,w.value=55,v.value=3,x.value=4,u.value=1,C.value=15,y.oninput(),A.oninput(),v.oninput(),v.min=1,x.oninput(),
Po()):(y.value=0,A.value=0,w.value=0,v.min=0,u.value=0,v.value=0,x.value=0,C.value=0);for(let H=2;H<t.children.length;H++){let N=t.children[H];this.checked?N.show():R(N)}};cp.onclick();a&&(cp.onclick=void 0,cp.disabled=!0);d=K("div",b);d.id="advconf";K("span",d,M(503),"margin-right:9px");dp=Km(d);let I=K("div",d);dp.checked=Xo(I);dp.onchange=function(H){if(dp.checked)I.style.cssText="";else if(R(I),5!=H){for(let S of Wo)if(S.id){H=hk[S.id];var N=ja[S.id];"checkbox"==H.type?H.checked=!!N:H.value=N;
if(hk[S.id].oninput)hk[S.id].oninput()}hk[30].onchange()}};dp.onchange(5);a&&(dp.onchange=void 0,dp.disabled=!0);d=K("div",b);d.id="rndtable";k=K("table",d);Go(k);e=K("table",d);Go(e);K("thead",e,`<td colspan=5>${M(481)}</td>`);K("thead",e,Uo()+`<td colspan=2>${M(483)}</td>`+Uo(M(6)));Io=K("tbody",e);K("thead",k,`<td colspan=3>${M(480)}</td>`);K("thead",k,Uo()+Uo(M(482)));No=K("tbody",k);No.id="stobjs";if(!a){e=K("div",b,"","margin-top:42px;margin-bottom:-17px;max-width: 1287px;");e.id="presets";
gp=k=f.presets4?JSON.parse(f.presets4):{};ep=b=K("span",e,`<span style="color:#907d44;font-size:13px;">${M(460)}:</span>`);for(var p in oa)hp(p,oa[p],b,1);for(var r in k)hp(r,k[r],b);p=K("span",e);let H=K("input",p,"","width:144px;font-size:12px;color:#ffd75d85");H.id="prstnpt";H.value="custom preset"+(Object.keys(k).length+1);r=K("button",p,M(8));r.onclick=fp;r.mc=b;K("button",p,M(879)).onclick=()=>{let N=new Blob([new Int32Array(n)],{type:"application/octet-binary"});Af(N,H.value+".tzcnf")};K("button",
p,M(832)).onclick=()=>{Om(N=>{n=Array.from(new Int32Array(N.target.result));Db(m("mapconfiguration"));he()})}}bp();po(a,n);cp.checked&&Po();a||(hk[30].onchange=function(){for(let H=0;4>H;H++)hk[25+H].parentNode.style.display=0<this.value?"unset":"none"},hk[30].onchange());c.onclick=a?function(){Db(m("mapconfiguration"))}:function(){if(B.l)kk();else if(Q){gk();jk();Db(m("mapconfiguration"));return}m("mapconfiguration").parentNode.parentNode.style.display="none"};if(a){for(c=0;c<hk.length;c++)hk[c]&&
(hk[c].disabled=!0);c=d.getElementsByTagName("input");for(p=0;p<c.length;p++)c[p].disabled=!0}}}function ti(a,b){a.innerHTML!=b&&(a.innerHTML=b)}function mb(a){a.innerHTML=""}function ce(a){return parseInt(a.value)}function ip(a,b,c){a=K("button",a);a.className="closeIcon";a.onclick=c?function(){R(this.parentNode.parentNode.parentNode)}:b?function(){Db(this.parentNode);location.hash="";setTimeout(Mf,200)}:function(){Db(this.parentNode)}}
function pm(){var a=Qc("",2);a.id="Settings";if(1==f.sid){var b=K("div",a);let h=K("input",b);h.type="number";K("button",b,"ban").onclick=function(){q(parseInt(h.value),h.value);G(37,ol(parseInt(h.value)));alert(1)};let k=K("input",b);k.type="number";K("button",b,"panic").onclick=function(){alert(3);G(47,ll(parseInt(k.value)))};let p=K("input",b);p.type="number";K("button",b,"vrsn").onclick=function(){alert(4);var u=parseInt(p.value);let v=new Uint8Array(3);v[1]=u&255;v[2]=u>>8&255;G(46,v)};var c=
K("div",b);let r=K("input",c);r.type="number";r.placeholder="04";let t=L("input",c,"margin-left:5px");t.type="number";K("button",b,"HRD").onclick=function(){let u=new Uint8Array(6);u[1]=ce(r);pb(u,2,ce(t));q(u);G(49,u)};K("button",b,"RE-HRD").onclick=function(){G(50)};K("button",b,"RE-BAN").onclick=function(){G(38);alert(2)}}b=K("div",a);O("span",b,15);f.sid?(c=L("div",b,"text-align:left"),K("span",c,f.name,"color:#0f0"),O("span",c,0,"margin-left:5px;color:#f0f;font-size:10px !important")):(c=K("input",
b),c.maxLength=17,c.value=String(l.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),c.onchange=jp,c.ra="name",c.spellcheck=!1);O("span",b,103);c=K("select",b);for(var d=0;3>d;d++)K("option",c,Lb[d]).value=d;c.value=f.civi||0;c.onchange=function(){f.civi=this.value};O("span",b,14);c=K("input",b);c.type="color";c.value=l.color;c.onchange=jp;c.ra="color";c.style.backgroundColor=l.color;O("span",b,718);c=K("select",b);d="en English es Espa\u00f1ol it Italiano pt Portugu\u00eas pl Polski cz \u010ce\u0161tina de Deutsch ru \u0420\u0443\u0441\u0441\u043a\u0438\u0439 bg \u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438".split(" ");
for(let h=0;h<d.length;h+=2)K("option",c,d[h+1]).value=d[h];c.value=l.Ia;c.onchange=function(){f.language=this.value;location.href=""};O("span",b,539);b=K("div",b);var e=K("div",b,"","cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*f.CCID+"px");let g=L("div",b,"max-height:256px;overflow:auto;width:265px;margin-top:5px;display:flex;flex-wrap:wrap;gap:11px");e.onclick=function(){g.innerHTML="";for(let h=0;h<ml.length;h++)L("div",g,"cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+
21*h+"px").onclick=()=>{f.CCID=h;e.style.backgroundPositionX=21*-h+"px";g.innerHTML="";G(36,ll(h))}};e.onchange=function(){f.CCID=this.value};b=K("div",a);O("span",b,569);c=K("select",b);K("option",c,"WebGL 1").value=1;K("option",c,"WebGL 2").value=2;navigator.gpu&&(K("option",c,"WebGPU").value=3);c.value=E?3:Ea?1:2;c.onchange=function(){f.webgl=this.value;location.href=""};O("span",b,568);a=K("select",b);c=["No","SSAA 2x"];for(d=0;2>d;d++)K("option",a,c[d]).value=d+1;a.value=f.antialiasing2;a.onchange=
function(){f.antialiasing2=this.value};O("span",b,540);c=K("select",b);for(a=0;4>a;a++)O("option",c,570+a).value=a;c.value=f.fogRefresh;c.onchange=function(){f.fogRefresh=this.value};O("span",b,878);le(b,h=>{f.hlffps=h?1:0},1==f.hlffps);O("span",b,719);le(b,h=>{f.shadows=h},"true"==f.shadows);O("span",b,534);le(b,h=>{f.nodecals=h?0:1},1!=f.nodecals);O("span",b,459);le(b,h=>{f.theme=h},"true"==f.theme);ha||(O("span",b,43),le(b,h=>{f.fullscreen=h},"true"==f.fullscreen));window.SharedArrayBuffer&&(O("span",
b,567),le(b,h=>{f.multithreading=h},"true"==f.multithreading));O("span",b,541);b=K("div",b);c=K("input",b);c.type="range";c.max=100*Ti();c.min=25;c.step=25;c.value=f.pixelDensity1||100*Ti();Jk(c);c.oninput=function(){this.H.innerHTML=this.value+"%"};c.onchange=function(){f.pixelDensity1=this.value};c.oninput(1);c.style.width="96px"}function Ab(a,b,c,d){let e=K("div",document.body);e.className="fwindow2";a=K("div",K("div",e),a,c);b&&ip(a,2==b,d);return a}
function Qc(a,b,c,d){let e=K("div",document.body);e.className="fwindow";a=K("div",K("div",e),a,c);b&&ip(a,2==b,d);return a}
function qm(){var a=Qc("",2);a.id="aboutd";var b=K("div",a);L("div",b,"background-repeat:no-repeat;height:124px;background-position:center;margin-bottom:16px").className="svgnehhon";K("p",b,"Graphics and sounds are property of Haemimont Games");b=K("a",b);b.href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url";b.target="_blank";L("img",b,"margin:19px 0px").src="nehhon/donate.gif";b=K("div",a);var c=[{i:"BTC",Ka:"3Nm6Mtj4rkeEKZRwnnZvFFkuwbt63NLymv"},{i:"ETH",
Ka:"0x4E89bAa9e83964634D4eB73E7325DF250f926517"},{i:"ZEN",Ka:"znhb95iBoiQtCdNCVgurHQgA75eYVqXuUMH"},{i:"XRP",Ka:"rKV8HEL3vLc6q9waTiJcewdRdSFyx67QFb",sb:"1009251507"}];for(var d of c){c=L("div",b,"text-align:left;margin:7px 0px");K("span",c,d.i,"width:42px;display:inline-block;color:var(--color1)");let e=L("input",c,"width:350px;cursor:text");e.disabled=!0;e.value=d.Ka;d.sb&&(K("span",c," memo: ","font-size:10px"),c=L("input",c,"width:80px;cursor:text"),c.disabled=!0,c.value=d.sb)}d=K("div",a);K("div",
d,"Contact:","margin-bottom:20px");b=K("a",d,"webmaster@nehhon.com");b.href="mailto:webmaster@nehhon.com";b.target="_blank";K("p",d);d=K("a",d,"@TzaredGame");d.href="https://twitter.com/TzaredGame";d.target="_blank";a=K("div",a);K("div",a,"Special thanks to","margin-bottom:20px");d=K("a",K("p",a),"CRAZYGAMES.COM");d.href="https://www.crazygames.com/c/io";d.target="_blank";L("img",a,"max-width:241px").src="nehhon/cloudflare.svg";K("p",a,"&");d='<a href="https://www.youtube.com/MayorceteGamingTV" target="_blank">Mayorcete</a>;Penetrenko;Remi Sluz;David Grau;PuppedToy;Ismael Carvajal;Alvaro Lopez;Gaboal;Nanyo Nanev;Miguel Rexi;Daniel Matos;Mikel Iglesias;Cristian Vargas;Debra Stokes;Irene;Edgaras;Hekas;<a href="https://soundcloud.com/diemiurgo" target="_blank" rel="noopener noreferrer">Diemiurgo</a>;<a href="https://www.youtube.com/user/rainheart666787" target="_blank" rel="noopener noreferrer">Sharp Rain</a>;Johannes Feulner;Marco Adorni;Eric Brown;Tommaso Bruno;PRG;Julian Kazior;JotaVilla;Francesco Castelli;FT21;Manolo;Mikhail;Witold;Michael (Macca);Vanilla Ice;Marcinm;Kurnaq;Gator;Pikachu;Sebaastian;Luca;Edward;Juan;Ivan;Marcel;Olmo;WMLS;Daniel Petkov;Zach Brock;MiTrAnDiR;Mariusz;Jose Manuel;Maria;Atanas;\u0141ukasz;Cristian'.split(";");
a=L("div",a,"display:flex;flex-wrap:wrap;max-width:527px;gap:5px 11px;justify-content:center");for(let e of d)K("span",a,e,"padding: 2px 4px; border: solid #ffffff54; border-top: 0px; border-bottom: 0px; }")}function jp(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.ra&&(a=bm(a));if(a||"name"!=this.ra)l[this.ra]=a,f[this.ra]=a,Dk(D[53](Mk()),17,f.name)}
if(ha){let a=K("button",m("index"));a.onclick=()=>{window.close()};a.style.cssText="z-index:1;position:fixed;top:-10px;right:-29px;font-size:45px;text-shadow: none;font-family: none;background: #7e0000;box-shadow: 0px 0px 20px #000;transform: rotate(45deg);   width: 87px;    height: 46px;";a.innerHTML="+"}m("rnd0").onclick=function(){location.hash="RandomMap"};m("sett").onclick=function(){location.hash="Settings"};let kp=document.getElementsByTagName("head")[0],lp=document.createElement("link");
lp.rel="stylesheet";lp.type="text/css";lp.href=l.Da+"b.css?v=521";lp.media="all";kp.appendChild(lp);function mp(){this.j="move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha decal".split(" ")}mp.prototype.index=function(a){return this.j.indexOf(a)};f.lastVersion=521;var Nd=new mp;$a();var np={0:"euro",1:"arab",2:"asia"};function op(a,b){const c=b.length,d=a.length;var e=0;a:for(;e<c;e++){for(var g=0;g<d;g++)if(b[e+g]!==a[g])continue a;return e}return!1}function oe(){q(this.files);var a=new FileReader;a.onload=function(){pp(this.result)};a.readAsArrayBuffer(this.files[0])}
function pp(a){let b=qp(a);a={grass:0,summer:4,deset:2,snow:3}[b.fc];q(a);var c=ab(bb);let d=b.qa.length+1;for(var e=0;e<d;e++)c[e]=0;e=1;for(let g of b.qa){for(let h=0;h<d;h++)c[h+e*d]=g.Lb[h];e++}q(c.slice(0,d*d));D[211](b.qa.length,a,b.tb);cc(function(){D[122]();ee.update=!0;D[121]();Bd();var g=si(D[78](),b.tb**2);for(var h=0;h<g.length;h++)g[h]=b.ec[h];q(g);Nk(rp);D[124](1);ee.update=!0;g=1;for(var k of b.qa){h=ab(bb);for(let p=0;p<k.name.length;p++)h[p]=k.name.charCodeAt(p);D[213](g,k.color[0],
k.color[1],k.color[2],k.IA,k.race,k.resGold,k.resFood,k.resWood,k.resStone,k.name.length);g++}Fd();rf();for(let p of b.Ba)if(k=p.kingdom,10==k&&(k=0),9==k&&(k=2**31-1),g=sp[p.type+256*p.race],51==g&&23==p.WW&&(g=46),51==g&&q(p),void 0!=g)D[212](g,k,p.x32,p.y32,p.d,p.attack,p.defence,p.health,p.maxHealth,p.level,p.mana,p.xx21);Kd(b.name,0);Kd(b.description,1);Kd(b.Ib,2);Db(m("mapPropsWindow"))})}
function tp(a){const b=a.length,c=new Uint16Array(a.length);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function up(a,b){return op(tp(a),b)+a.length}function vp(a,b){a+=String.fromCharCode(0);return op(tp(a),b)}function wp(a,b,c){var d="";for(b+=a;a<b&&c[a];a++)d+=String.fromCharCode(c[a]);return d}
function qp(a){a=new Uint8Array(a);var b=op([50,109,122,116],a)+6,c=a[b]+256*a[b+1],d=a[b+2]+(a[b+3]<<8)+(a[b+4]<<16);q("mapx:",c,"units",d);q("header",a[up(".header",a)],"description",a[up(".description",a)],"kingdominfo",a[up(".kingdominfo",a)],"diplomacy",a[up(".diplomacy",a)],"forbidden.upgrades",a[up(".forbidden.upgrades",a)],"tiles",a[up(".tiles",a)]);q(a);var e=2*c;b={};b.tb=c;b.xc=c;b.fb=!1;c="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 xx22".split(" ");
var g="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 resource".split(" "),h=e/2,k=20480+2*h*h,p={};h=0;for(var r=a.length;h<r;h++){var t=a[h];p[t]||(p[t]=[]);p[t].push(h)}p=[];var u={56:!0,58:!0,88:!0,72:!0};q(a.slice(k));h=k+1;for(r=a.length;h<r;h++)if(t=a[h],u[t]&&u[a[h+4]]){k={};t=72!==t?c:g;var v=h-8;let x=v;k.i2=v;for(var w=0,A=t.length;w<A;w++){var y=
t[w];"kingdom"==y||"race"==y||"xx21"==y||"xx22"==y?(k[y]=a[v],v++):(k[y]=a[v]+256*a[v+1],v+=2)}h+=v-x-8;p.push(k)}b.Ba=p;b.Ba.length>d&&(b.Ba.length=d);d=b.Ba;c=e/2;u=[];g=0;k=[];v=t=a[up(".forbidden.upgrades",a)]+1;r=t*=512;for(h=a.length;r<h;r+=2){A=a[r];w=~~(r/512);for(p=8;p<c&&a[p+r]===(A+p/4)%256;p+=4);20<p&&(r=512*w,1==u.length&&(r=512*(w-(2-(w-v)%2))),p=a.slice(t,r),t-r&&(u[g++]=[t,r],k.push(p)),r+=512,2==u.length&&(r-=512),t=r)}u[g++]=[t,a.length];k={64:[u[0]],96:[u[0]],128:[u[0]],192:[u[1],
u[0],u[2],u[3]],256:[u[1],u[0],u[2],u[3]],384:[u[1],u[0],u[2],u[3],u[4],u[5],u[6]],512:[u[1],u[0],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9]]}[c];q(u);u=new Uint8Array(c*c);t=new Uint8Array(c*c);rp=new Uint8Array(c*c);p=g=0;for(v=k.length;p<v;p++)if(h=k[p],g<c*c)for(r=h[0],h=h[1];r<h;r+=2)u[g]=a[r],t[g]=a[r+1],rp[g]=t[g]%8,8<=t[g]&&d.push({race:0,type:7,d:~~(t[g]/8)-1,x32:g%c,y32:~~(g/c)}),g++;xp(u,e);xp(t,e);b.ec=u;d=(e="grass",vp("grass",a))||(e="summer",vp("summer",a))||(e="desert",vp("desert",a))||
(e="snow",vp("snow",a));c=wp(512*(a[up(".description",a)]-1),512,a);b.description=c;b.Ib=wp(d-64,64,a);b.name=wp(d-128,64,a);b.fc=e;for(e=op([192,4],a)+50;!a[e];)e++;d="name tzar active resGold resStone resFood resWood x6 race x8 x9 x10 x11 x12 x13 x14 AI x16 x17 x18 x19 x20".split(" ");c=d.length;g=[];r=[[41,115,255],[231,0,0],[57,115,16],[231,0,231],[255,255,0],[0,181,181],[255,156,33],[90,90,90]];q("kingdoms:",e);b.ic={0:0,9:0,10:0};for(p=0;8>p;p++){u={color:r[p]};for(k=0;k<c;k++)if(t=d[k],"name"==
t||"tzar"==t){for(u[t]="";!a[e];)e++;for(h=e+32;a[e];)u[t]+=String.fromCharCode(a[e]),e++;e=h}else u[t]=a[e]+(a[e+1]<<8)+(a[e+2]<<16)+(a[e+3]<<24),"race"==t&&(u[t]=a[e],u.racestr=np[a[e]-1]),e+=4;g.push(u);b.ic[p+1]=g.length;1<g.length&&(u.IA=1);u.resources=[u.resGold,u.resWood,u.resFood,u.resStone];u.race--}q(g);b.qa=g;e=b.qa;d=512*(a[up(".diplomacy",a)]-1);c=e.length;for(g=0;g<c;g++)if(h=[0],e[g])for(e[g].Lb=h,r=1;9>r;r++)e[r-1]&&(p=a[d],p=60>p&&r-1!=g?1:0,h.push(p)),d+=4;else d+=32;q(b);return b}
function xp(a,b){if(a&&a.length){b/=2;var c=~~(a.length/b);if(b){for(var d=document.createElement("canvas"),e=d.getContext("2d"),g=new ImageData(b,c),h=g.data,k=0,p=h.length;k<p;k+=4){var r=a[k/4];h[k]=r;h[k+1]=r;h[k+2]=r;h[k+3]=255}d.width=b;d.height=c;e.putImageData(g,0,0);document.body.appendChild(d)}}}
var rp,sp={7:7,15:78,16:77,19:37,20:39,21:38,22:131,23:73,24:75,25:76,27:59,28:58,30:132,31:40,32:130,36:60,38:42,39:55,40:32,41:44,42:56,43:57,61:45,62:13,63:20,64:35,72:43,110:27,133:36,136:74,257:10,258:61,259:0,260:4,261:3,262:6,263:1,264:19,67:51,267:8,270:2,273:5,274:9,300:12,301:14,302:15,303:23,304:30,305:25,306:28,307:18,308:34,309:33,310:41,311:11,312:17,314:26,315:29,316:16,321:24,322:31,513:79,514:90,515:80,516:81,517:83,519:82,522:85,529:89,530:87,541:91,545:86,547:84,556:63,557:102,
558:93,559:95,560:100,561:99,562:103,563:94,564:104,565:101,566:96,568:109,570:97,571:98,572:107,577:108,578:92,581:110,583:106,769:64,771:66,772:67,773:68,778:69,780:128,781:65,785:129,786:127,802:70,805:72,812:62,813:71,814:112,815:114,816:119,817:118,818:121,819:113,820:122,821:120,822:115,824:126,826:116,827:117,828:124,833:125,834:111,838:123,76:21,78:22};
