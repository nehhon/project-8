var aa,da,ea={},ha=NaN,g=window.localStorage;function ia(a,b){void 0===g[a]&&(g[a]=b)}ia("name","Guest"+~~(1E3*Math.random()));ia("color","#0000bd");ia("flag","eu");var l={name:g.name,color:g.color};function ja(){}const ka=-1<navigator.userAgent.toLowerCase().indexOf(" electron/");var ma=0,na=(a,b)=>{ka&&window.ipcRender&&window.ipcRender.dscd&&window.ipcRender.dscd([a,b])};if(ka){var pa=a=>{ma=a;window.ipcRender&&window.ipcRender.fullScreen&&window.ipcRender.fullScreen(a)};na("Main menu");pa(0)}
function m(a){return document.getElementById(a)||NaN}window.gid=m;ka&&(aa=location.search.substring(1,location.search.length),da=parseInt(aa.replaceAll(".","")),115<=da&&ia("webgl",3));void 0===g.fullscreen&&(g.fullscreen=!0);var n;const ra=[256,5E3,5E3,5E3,5E3,0,0,0,0,500,400,40,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,20,0,21,1,0,20,0,22,1,0,1,1,-4,0,0,12,1,-1,10,0,6,1,-7,14,0,1,1,21,20,0,1,1,22,20,0,4,1,55,24,0,3,2,43,1,0,5,0,234,1,0,15,0,88,1,0];
let sa=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,44,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0],ta=sa.slice(0);ta[0]=192;
let ua=[384,1500,1500,1500,1500,0,0,1,0,450,450,100,2,100,0,25,0,0,10,1,0,1,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,1,494094,17,0,21,1,1,0,0,1E4,8E3,0,0,0,17,0,22,1,1,0,0,1E4,8E3,0,0,0,1,1,-4,0,0,20,1,-1,11,0,6,1,56,16,0,2,1,21,20,1,0,0,16E3,8E3,0,0,0,2,1,22,20,1,0,0,16E3,8E3,0,0,0,50,0,88,1,0,10,0,248,1,0,7,0,223,1,1,15,0,25,25,0,0,0,7,0,225,1,1,15,0,25,25,0,0,0,12,0,230,1,1,0,0,25,25,200,100,0,1,2,234,0,1,75,5,1E3,70,0,0,0],va=[256,1500,1500,1500,1500,0,0,1,3,800,800,100,2,100,
450,25,1,0,0,0,0,2,1E3,8,90,0,0,0,0,75,0,100,100,100,100,7,7,14,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,11,0,4,1,55,16,0,2,1,21,20,0,2,1,22,20,0,50,0,88,1,0];
var wa={Default:ra,"Deiv 1500":sa,"PRO - Wolno\u015b\u0107":ua,"Battle Royale":[156,100,50,50,50,1,0,0,1,100,100,80,2,100,30,20,0,0,0,0,0,4,20,4,30,0,0,0,0,16,0,100,100,100,100,7,7,18,7,0,1,100,0,0,0,0,299123,1,1,69,0,1,7,0,100,75,100,0,0,1,1,224,2,0,1,1,233,3,0,1,1,223,3,0,2,0,235,1,0,5,0,236,1,0,5,0,237,1,0,5,0,238,1,0,5,0,239,1,0,10,0,221,1,0,10,0,222,1,0,10,0,242,1,0,30,0,226,1,0,15,0,228,1,0,10,0,230,1,0,15,0,229,1,0,1,2,44,1,0,1,1,244,4,0,1,1,222,4,0,50,2,80,1,0,50,2,66,1,0,50,2,0,1,0,50,2,
4,1,0,4,1,13,6,1,0,0,1,2E3,0,0,0],BRx4:va,Diesel:[256,1500,1500,1500,1500,0,0,0,0,500,400,80,0,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,17,0,21,1,0,17,0,22,1,0,1,1,-4,0,0,20,1,-1,8,0,4,1,-31,16,0,12,1,-10,11,0,2,1,21,21,0,2,1,22,21,0,4,1,44,8,0,15,0,88,1,0],Classic:[256,400,400,400,400,0,0,0,0,1,200,80,2,100,0,20,0,0,0,0,0,0,0,0,0,0,0,0,0,75,0,100,100,100,100,7,7,18,7,0,0,100,0,0,0,0,0,12,0,21,1,0,12,0,22,1,0,1,1,-4,0,0,3,1,-1,6,0,1,1,21,15,0,1,1,22,15,0,
3,1,32,10,0,15,0,88,1,0]};let xa=sa.slice(0);xa[42]=1;xa[7]=7;xa[47]=34;let ya=sa.slice(0);ya[16]=1;ya[15]=80;ya[47]=37;ya[52]=37;ya[77]=3;ya[72]=3;let Aa=sa.slice(0);Aa[8]=3;Aa[5]=1;Aa[14]=1800;Aa[21]=5;Aa[22]=55;Aa[23]=4;Aa[24]=15;let Ba=Aa.slice(0);Ba[14]=3600;var Ca=[sa,ta,va,xa,ya,Aa,Ba,ua,sa,wa["Battle Royale"]];function Da(){a:for(let a in wa){let b=wa[a];if(b.length==n.length){for(let c=1;c<b.length;c++)if(6!=c&&46!=c&&(n[8]||14!=c&&21!=c&&22!=c)&&b[c]!=n[c])continue a;return a}}}
function Ea(){try{n=g.mapConfig4&&JSON.parse(g.mapConfig4)||ra}catch{n=ra}}Ea();"true"==g.nightcycle&&(g.nightcycle=1);"true"==g.deathsounds&&(g.deathsounds=1);"true"==g.zoomPointer&&(g.zoomPointer=1);"true"==g.unlimitedZoom&&(g.unlimitedZoom=1);"true"==g.stdcolors&&(g.stdcolors=1);"true"==g.scrollmouse&&(g.scrollmouse=1);ia("favMusic",0);ia("musicRange",75);ia("soundRange",100);ia("nplayed",0);ia("UIscale",100);ia("zoomMult",50);ia("scrollSpeed",50);ia("menuOpacity",75);ia("visits",0);
ia("shadows",!0);ia("multithreading",!0);ia("deathsounds",1);ia("quality",1);ia("antialiasing2",1);ia("fogRefresh",2);ia("zoomPointer",1);ia("hlffps",0);ia("selectionCircle",1);ia("unlimitedZoom",1);ia("theme",!0);ia("scrollmouse",1);g.visits++;var p;console.log=()=>{};console.trace=()=>{};p=()=>{};var Fa=window[atob("bG9jYXRpb24=")];"dHphLnJlZA=="===btoa(Fa[atob("aG9zdG5hbWU=")])||ka||(Fa[atob("aHJlZg==")]=atob("aHR0cHM6Ly90emEucmVk"));window.ms=p;
const Ha=2<navigator.hardwareConcurrency&&window.SharedArrayBuffer&&("true"==g.multithreading||!g.multithreading);var Ia=document.createElement("script");Ia.src="nehhon/"+(Ha?"em2.js":"em.js")+"?v=545";document.body.appendChild(Ia);var Ja,Ka={};
function La(a){if(Ka[a]){if(Ka[a]++,10<Ka[a])return}else Ka[a]=1;if(z){var b=z.getExtension("WEBGL_debug_renderer_info"),c=z.getParameter(b.UNMASKED_VENDOR_WEBGL);b=z.getParameter(b.UNMASKED_RENDERER_WEBGL)}var d=(C.now&&C.now()||0)/1E3,e=~~(d/60)%60,f=~~(d/3600);d=~~(d%60);1===(d+"").length&&(d="0"+d);10>e&&(e="0"+e);a=[a,C.l,f+":"+e+":"+d,Ha?1:0,D&&D[67]()?1:0,E?3:Ma?1:2,l.name,F.host?1:0,Na,l.navigator||"Chrome",Intl.DateTimeFormat().resolvedOptions().timeZone,navigator.language,g.visits,ka?1:
0,545,navigator.hardwareConcurrency,navigator.deviceMemory,c,b,l.lang];for(c=0;c<a.length;c++)a[c]||(a[c]=0),a[c].replaceAll&&(a[c]=a[c].replaceAll(",",".|"));G(15,Oa(" "+a.join(",")))}window.fstdD=function(a){La(a)};var Pa=0;
window.addEventListener("error",function(a){a=a.error&&a.error.stack?a.error.message+"-"+a.error.stack:a.lineno+":"+a.colno+" "+a.message;z&&z.getExtension("WEBGL_debug_renderer_info");"0:0 Script error."==a&&Pa++;4<Pa&&"0:0 Script error."==a||La(a);C.s&&Qa(`<span style="font-size:14px">${a.substr(0,550)}</span>`,"Error")});function J(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function L(a,b,c,d,e){a=document.createElement(a);e?b.prepend(a):b.appendChild(a);void 0!=c&&(a.innerHTML=c);d&&(a.style.cssText=d);return a}function Ra(a,b){var c=document.createElement("div");a.appendChild(c);void 0!=b&&(c.textContent=b);c.style.cssText="color:#81ff81"}function Sa(a,b,c,d,e,f,h){a=M("input",a,e);a.value=b;a.onchange=c;void 0!=f&&(a.max=f);a.type=d||"text";void 0!=h&&(a.min=h);return a}
function Ta(a,b){m("notifybar")&&J(m("notifybar"));L("div",document.body,a,b&&`color:${b}`||"").id="notifybar";setTimeout(J,6E3,m("notifybar"))}var Ua=location,Va=0<=navigator.userAgent.indexOf(" OPR/"),Wa="undefined"!==typeof InstallTrigger,Xa=0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"),Ya=!!document.documentMode,Za=!Ya&&!!window.Zb,$a=window.chrome,ab;Va?ab="Opera":Wa?ab="Firefox":Xa?ab="Safari":Ya?ab="IE":Za?ab="Edge":$a&&(ab="Chrome");$a||ka||Ta("Partially supported browser, use Chrome/Opera/Desktop app instead");
l.Wa=g.language||navigator.language||navigator.Ic;var bb={ca:"es",an:"es",gl:"es",eu:"es",ast:"es"}[l.Wa.substr(0,2)]||l.Wa.substr(0,2);l.version="v54.5";g.version!==l.version&&g.version&&(g.version=l.version,Ta("Updated to "+l.version));let cb="en es it pt ru pl bg de cz".split(" ").indexOf(bb);0>cb&&(cb=0,bb="en");l.lang=cb;l.Ja=bb;if(4==cb||6==cb)document.title="\u0426\u0430\u0440\u0435\u0434";l.za=0;l.race=0;l.navigator=ab;l.R=151;l.Qc=null;l.gb=0;l.Ea="nehhon/";
async function eb(a){return a.split("\n")}function N(a){return ha[a]||""}var fb,gb,hb=0;function ib(){hb++;if(3==hb){for(let b=0;4>b;b++){var a=N(698+b).split(",");let c=a.length,d=jb(kb),e=0;for(let f of a)for(a=0;20>a;a++)d[e++]=f.length>a?f.charCodeAt(a):0;D[253](c,b)}window.onhashchange=lb;lb()}}var mb=0,nb,ob,pb,rb=a=>{if(a.data instanceof ArrayBuffer){let b=new Uint8Array(a.data),c=b[0];if(2==ob&&45!=c)return pb.put(a);if(qb[c])qb[c](0,b)}};
function sb(a){function b(){if(!d){let e=new Uint8Array(1);e[0]=24;c.send(e);setTimeout(b,6E4);tb&&14E3<Date.now()-tb&&c.close()}}this.active=!0;this.G=[];let c=new WebSocket("wss://korwin.tza.red:4334");this.C=c;this.C.binaryType="arraybuffer";let d=tb=0;setTimeout(b,6E4);this.C.onclose=function(e){d=!0;this.C=null;for(var f=F.G.slice(0),h=0;h<f.length;h++){var k=f[h];k.S||k.close()}m("gameList")&&(ub(m("gameList")),O("div",m("gameList"),803,"height:100%;text-align:center"));console.log(e);C.s&&
C.l&&!vb?(setTimeout(()=>{F=new sb(1)},2E3),Ta(N(835))):(C.l&&Ta(N(803),"#ff0000"),C.l&&wb())};this.C.onopen=function(){if(a){let e=new Uint8Array(13);xb(e,1,l.M);xb(e,5,nb);xb(e,9,yb);G(54,e);ob=1;pb=[]}else mb=1,g.sid&&G(21,zb(parseInt(g.sid),g.nm))};this.C.onerror=function(e){p("error",e)};this.C.onmessage=rb}var F;F=new sb;var Ab,Bb;
window.onmessage=function(a){var b=new URLSearchParams(a.data);if(Ab&&b.has("code")){p(b,a.data);Ab.close();a=ka?1:0;b=b.get("code");b=Oa(b);var c=new ArrayBuffer(2+b.length);c=new Uint8Array(c);c[1]=a;c.set(b,2);G(12,c)}};window.opener&&(new URLSearchParams(window.location.search)).has("code")&&window.opener.postMessage(window.location.search,"*");var Cb;
function Db(){if(g.sid)Fb();else{let a=Gb("",2);a.id="login";let b=L("div",a);Cb=b;ka||(M("button",b,"background:url(nehhon/discord.webp) no-repeat center;width:150px;height:93px").onclick=()=>{Hb(a);Bb=Math.floor(Math.random()*2**32);Ab=window.open((ka?"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F%3Fdesk%3D1&response_type=code&scope=identify%20email":"https://discord.com/api/oauth2/authorize?client_id=499870491960672256&redirect_uri=https%3A%2F%2Ftza.red%2F&response_type=code&scope=identify%20email")+
"&state="+Bb,"Log In","toolbar=no, menubar=no, width=600, height=830, top=10, left=100")});L("hr",b);L("button",b,"e-mail","color:#d1d1d1;width:150px;height:93px;font-size:15px").onclick=()=>{ub(b);let c=L("input",b);c.type="email";c.placeholder="name@example.com";c.onkeydown=e=>{if("Enter"==e.key)d.onclick()};c.focus();let d=O("button",b,2);d.onclick=()=>{let e=c.value;if(!(3>e.length)){ub(b);G(51,Ib(e));O("div",b,808,"font-size:10px;width:174px;color:var(--color1);");var f=L("input",b);f.placeholder=
"abcd123";f.focus();f.onkeydown=k=>{if("Enter"==k.key)h.onclick()};var h=O("button",b,2);h.onclick=()=>{G(52,Jb(parseInt(f.value.trim(),36)));b.innerHTML="..."}}}}}}var Kb=document.createElement("div");Kb.id="gameList";Lb=Kb.children;Mb=document.createElement("div");Nb=document.createElement("div");Ob=document.createElement("span");Nb.appendChild(Ob);Kb.appendChild(Mb);Kb.appendChild(Nb);var Pb;
function Qb(){Rb=[N(106).split("|")[0],N(107).split("|")[0],N(108).split("|")[0],N(109).toLocaleUpperCase()];for(var a=["rnd0","<span>"+N(110).split("| ")[0]+"</span>","returnmenu",N(112)],b=0,c=a.length;b<c;b+=2)m(a[b])&&(m(a[b]).innerHTML=a[b+1]);a=m("mult");L("div",a,`\u2b9c ${N(98).split("| ")[0]} \u2b9e`);a.appendChild(Kb);Ob.textContent="\u2bc6 "+N(83);Nb.id="rmply";M("div",Kb).id="rln";a=L("section",Kb);L("button",a,N(99).split("| ")[1]+" +").onclick=Pb;O("button",a,537).onclick=()=>location.hash=
"Ranking";O("button",a,884).onclick=()=>Sb();L("ul",m("index"),`<li id=about>${N(111)}</li><li id=chlog>${N(536)}</li><li id="yt"><a href="https://youtube.com/c/Tzared" alt="youtube channel" target="blank_"><img src="nehhon/yt.webp" alt="youtube channel"></a></li><li id="discord"></li>${!ka&&`<li id=tzdesk><svg width="24" height="24" viewBox="0 0 24 24" class="icon-nuGd5b"><g fill="currentColor"><path d="M17.707 10.708L16.293 9.29398L13 12.587V2.00098H11V12.587L7.70697 9.29398L6.29297 10.708L12 16.415L17.707 10.708Z"></path><path d="M18 18.001V20.001H6V18.001H4V20.001C4 21.103 4.897 22.001 6 22.001H18C19.104 22.001 20 21.103 20 20.001V18.001H18Z"></path></g></svg> <a id='tzdwd' style='text-decoration:none;color:inherit' href='download/' target="_blank">${N(538)}</a></li>`||
""}<li id=help>${N(114)}</li>`).id="topLinks";m("accb").innerHTML=g.sid?N(445):N(444);m("about").onclick=function(){location.hash="About"};m("help").onclick=function(){location.hash="#Guide"};m("chlog").onclick=function(){location.hash="#Changelog"};m("accb").onclick=Db;if(ka){a=L("span",m("mult"),"","position:absolute;right:0px");b=L("button",a,N(391).split("|")[0],"background:#00000085;color:#c3a447");let d=L("input",a,"","background: #00000085;");d.placeholder="https://tza.red/##room";b.onclick=
()=>{let e=d.value.split("##")[1];e&&(Tb=!0,Ub("#"+e),Vb())}}ka||(m("tzdesk").onclick=function(){m("tzdwd").click()});m("yt").onclick=function(){m("yt").children[0].click()};a=m("discord");a.ariaLabel="Discord";a.onclick=()=>{window.open("https://discord.gg/ndxJHxT","_blank")}}
(async function(){let a=await fetch(l.Ea+l.Ja+".nhl");ha=await eb(await a.text());gb=[{name:N(547)},{name:N(548)},{name:N(549)},{name:N(550)},{name:N(551)},{name:N(552)},{name:N(553)},{name:N(554)},{name:N(555)}];Qb();fb=1;ib()})();window.spAlert2=function(a,b,c,d){Qa(b&&N(b),N(a),d,N(c))};function Wb(){P("alert")}
function Xb(){var a=N(444)+" / "+N(861);let b=Gb(N(441),1);b.style.fontSize="19px";L("button",b,a,"display:block;margin:28px auto auto;font-size:15px;padding:6px;background:#00ff0030;border-radius:2px").onclick=()=>{J(b.parentNode.parentNode);Db()}}
function Qa(a,b,c,d){var e=m("alert");e||(e=document.createElement("div"),e.id="alert",document.body.appendChild(e),e=m("alert"),p(d),e.innerHTML='\n                <div>\n                    <h3 id="alerttitle"></h3>\n                    <div id="alerttext"></div>\n                    <button id="alertok"></button>\n                </div>\n           ');var f=m("alerttitle"),h=m("alerttext");m("alertok").onclick=Wb;e.style.display="block";f.innerHTML=b||ha&&N(115)||"Warning";m("alertok").innerHTML=
d||ha&&N(116)||"Ok";h.innerHTML=a||"";c?m("alertok").style.display="none":m("alertok").style.display="block"}window.spAlert=Qa;var Yb=0,$b;function ac(a){bc.innerHTML=N(117)+" "+a+"%"}window.showProgress=ac;function cc(){Yb++;Yb>=$b&&(dc?dc():ec())}function fc(a,b){this.ib=a;this.size=b}function jb(a){return gc(a.ib,a.size)}function hc(){var a=kb;return ic(a.ib,a.size)}
function jc(a){dc=a;bc.innerHTML=N(117);var b=1;Q&&(b=1);lc=4096*b;$b=3;a&&$b--;Yb=0;D[134]("true"==g.shadows,b,lc);ac.progress=0;ac.total=0;Date.now();cc();bc.innerHTML=N(117);mc()}var dc;function mc(){D[136]()==$b-Yb?(Yb++,cc()):setTimeout(mc,15)}function nc(){if(!ka){g.update=1;if(window.caches){var a=window.caches;a.keys().then(function(b){for(let c of b)a.delete(c)})}setTimeout(function(){location.reload(!0)},250)}}g.lastVersion&&545!=g.lastVersion&&(g.lastVersion=545,nc());var oc=m("index");
function pc(){g.cache_v||(g.cache_v=5);if(1!=g.update||ka)fetch("https://tza.red/version.txt",{cache:"no-store"}).then(function(b){return b.text().then(function(c){L("div",oc,l.version).id="info";545!=c&&nc()})});else if(delete g.update,5!=g.cache_v){g.cache_v=5;var a=indexedDB.deleteDatabase("emscripten_filesystem");a.onsuccess=function(b){p(b)};a=indexedDB.deleteDatabase("nh2019");a.onsuccess=function(b){p(b)}}}ka?L("div",oc,l.version+` ${aa&&` - ${aa}`||""}`).id="info":pc();
!ka&&"serviceWorker"in navigator&&(navigator.serviceWorker.register("sworker.js").then(function(){},function(a){p(a)}),navigator.serviceWorker.oncontrollerchange=function(){location.reload(!0)});var qc,rc,sc={},tc="ATTACK.mp3 BALLISTA.mp3 BLDGDONE.mp3 CHAT%20LOCATION.mp3 TECHDONE.mp3 UNITDONE.mp3 CHAT.mp3 E_CASTLE1.mp3 E_CATHEDRAL1.mp3 E_CATHEDRAL2.mp3 E_FARM1.mp3 E_CHURCH1.mp3 E_FARM2.mp3 E_HARBOR1.mp3 E_LUMBER1.mp3 E_MAGETOWER1.mp3 E_MAGETOWER2.mp3 E_MAGETOWER3.mp3 E_MARKET1.mp3 E_SHIPYARD1.mp3 E_STABLES1.mp3 E_STORAGE1.mp3 E_OUTPOST1.mp3 E_STORAGE2.mp3 E_TAVERN1.mp3 E_WARACADEMY1.mp3 E_WORKSHOP1.mp3 EVILCASTLE.mp3 GATE1.mp3 GATE2.mp3 GATE3.mp3 GATE4.mp3 GATE5.mp3 GATE6.mp3 GATEWAY.mp3 HOUSE1.mp3 HOUSE2.mp3 HOUSE3.mp3 HOUSE4.mp3 HOUSE5.mp3 MERCHANT.mp3 MINE1.mp3 MONASTERY1.mp3 MONASTERY2.mp3 R_CATHEDRAL1.mp3 R_CHURCH1.mp3 SHAOLIN2.mp3 SHAOLIN.mp3 CHOP%201.mp3 CHOP%202.mp3 CHOP%203.mp3 CHOP%204.mp3 CHOP%205.mp3 CHOP%206.mp3 CHOP%207.mp3 CHOP%208.mp3 CHOP%209.mp3 CHOP%2010.mp3 CHOP%2011.mp3 DIG%201.mp3 DIG%202.mp3 DIG%203.mp3 MINE%201.mp3 MINE%202.mp3 MINE%203.mp3 HIT%201.mp3 HIT%202.mp3 HIT%203.mp3 HIT%204.mp3 HIT%205.mp3 HIT%206.mp3 HIT%207.mp3 GHOST1.mp3 GHOST2.mp3 GOLEM1.mp3 GOLEM2.mp3 H%20SWORD%201.mp3 H%20SWORD%202.mp3 H%20SWORD%203.mp3 H%20SWORD%204.mp3 H%20SWORD%205.mp3 H%20SWORD%206.mp3 H%20SWORD%207.mp3 H%20SWORD%208.mp3 H%20SWORD%209.mp3 H%20SWORD%2010.mp3 H%20SWORD%2011.mp3 H%20SWORD%2012.mp3 HAND1.mp3 HAND2.mp3 HAND3.mp3 HAND4.mp3 MAGE%20ATTACK.mp3 MESSIAH.mp3 ORC%20SWORD%201.mp3 ORC%20SWORD%202.mp3 ORC%20SWORD%203.mp3 ORC%20SWORD%204.mp3 ORC%20SWORD%205.mp3 ORC%20SWORD%206.mp3 ORC%20SWORD%20V1.mp3 ORC%20SWORD%20V2.mp3 ORC%20SWORD%20V3.mp3 SHIP%20CANNON%201.mp3 SHIP%20CANNON%202.mp3 SHIP%20CANNON%203.mp3 SHIP%20CANNON%204.mp3 SHIP%20CANNON%205.mp3 SHIP%20CANNON%206.mp3 SHIP%20CANNON%207.mp3 SIEGE.mp3 SWORD%201.mp3 SWORD%202.mp3 SWORD%203.mp3 SWORD%204.mp3 SWORD%205.mp3 SWORD%206.mp3 SWORD%207.mp3 SWORD%208.mp3 SWORD%209.mp3 SWORD%2010.mp3 SWORD%2011.mp3 SWORD%2012.mp3 SWORD%2013.mp3 SWORD%2014.mp3 SWORD%2015.mp3 SWORD%2016.mp3 V%20SWORD%201.mp3 V%20SWORD%202.mp3 V%20SWORD%203.mp3 V%20SWORD%204.mp3 V%20SWORD%205.mp3 V%20SWORD%206.mp3 V%20SWORD%207.mp3 ADRAGON2.mp3 ADRAGON3.mp3 ARROW%201.mp3 ARROW%202.mp3 ARROW%203.mp3 ARROW%204.mp3 ARROW%205.mp3 ARROW%206.mp3 ARROW%20V1.mp3 ARROW%20V2.mp3 ARROW%20V3.mp3 ARROW%20V4.mp3 BEAR1.mp3 BEAR2.mp3 BEAR3.mp3 BEAR4.mp3 BEAR5.mp3 MWORKSHOP.mp3 DESTROY%20BUILDING.mp3 DESTROY%20MINE.mp3 LIGHTING2.mp3 LIGHTING.mp3 METEOR.mp3 SMALL%20EXPLOSION.mp3 WATER%20BLOP.mp3 SPY%20KILL%201.mp3 SPY%20KILL%203.mp3 SPY%20KILL%202.mp3 PRIEST%20ATTACK.mp3 LIGHTNING.mp3 INVISIBLE.mp3 HEAL.mp3 FREEZE.mp3 FLAME%20BALL.mp3 CURSE.mp3 CRUSADE.mp3 CONFUSION.mp3 BLESS.mp3 WHIRLPOOL.mp3 TURN%20TO%20STONE.mp3 TEACH.mp3 SUMMON10.mp3 SUMMON9.mp3 SUMMON8.mp3 SUMMON7.mp3 SUMMON6.mp3 SUMMON5.mp3 SUMMON4.mp3 SUMMON3.mp3 SUMMON2.mp3 SUMMON1.mp3 REVEAL.mp3 RESSURECT.mp3 COWDIE1.mp3 COWDIE2.mp3 COWDIE3.mp3 COWDIE4.mp3 DIE%201.mp3 DIE%202.mp3 DIE%203.mp3 DIE%204.mp3 DIE%205.mp3 DIE%206.mp3 DIE%207.mp3 DIE%208.mp3 DIE%209.mp3 DIE%2010.mp3 DRAGON%20DIE%201.mp3 DRAGON%20DIE%202.mp3 GOLEM.mp3 H%20DIE%201.mp3 H%20DIE%202.mp3 H%20DIE%203.mp3 H%20DIE%204.mp3 H%20DIE%205.mp3 H%20DIE%206.mp3 H%20DIE%207.mp3 H%20DIE%208.mp3 H%20DIE%209.mp3 H%20DIE%2010.mp3 MAGE.mp3 ORC%20DIE%201.mp3 ORC%20DIE%202.mp3 SHIP%20SINK.mp3 SIEGE%20DIE%201.mp3 SIEGE%20DIE%202.mp3 SIEGE%20DIE%203.mp3 SIEGE%20DIE%204.mp3 SKELETON%20DIE%201.mp3 SKELETON%20DIE%202.mp3 SKELETON%20DIE%203.mp3 SKELETON%20DIE%204.mp3 MESSIAH_ATTACK.mp3 C%20DIE%201.mp3 C%20DIE%202.mp3 C%20DIE%203.mp3 C%20DIE%204.mp3 C%20DIE%205.mp3 CAMELDIE1.mp3 CAMELDIE2.mp3 CAMELDIE3.mp3 BAT%20ATTACK.mp3 BAT%20CMD.mp3 BAT%20DIE.mp3 CAMEL1.mp3 CAMEL2.mp3 CARPETCMD.mp3 CATAPULT.mp3 CBEAR1.mp3 CBEAR2.mp3 CBEAR3.mp3 CBEAR4.mp3 COW1.mp3 COW2.mp3 COW3.mp3 COW4.mp3 DRAGON1.mp3 DRAGON2.mp3 FLY1.mp3 FLY2.mp3 FOOT1.mp3 FOOT2.mp3 FOOT3.mp3 FOOT4.mp3 FOOT5.mp3 FOOT6.mp3 FOOT7.mp3 FOOT8.mp3 GHOST1CMD.mp3 GHOST2CMD.mp3 GHOST3CMD.mp3 GOLEMCMD.mp3 H%20CMD%201.mp3 H%20CMD%202.mp3 H%20CMD%203.mp3 H%20CMD%204.mp3 HEAVY%20CATAPULT.mp3 INF%20CMD%201.mp3 INF%20CMD%202.mp3 INF%20CMD%203.mp3 INF%20CMD%204.mp3 INF%20CMD%205.mp3 MESSIAHCMD.mp3 ORC%20CMD%201.mp3 ORC%20CMD%202.mp3 ORC%20CMD%203.mp3 ORC%20CMD%204.mp3 ORC%20CMD%205.mp3 ORC%20CMD%206.mp3 SHIP%20CMD%201.mp3 SHIP%20CMD%202.mp3 SKELETON1.mp3 SKELETON2.mp3 SHIP%20SELECT.mp3 E_BARRACK1.mp3 E_BLACKSMITH1.mp3 FIRE1.mp3 FIRE2.mp3 FIRE3.mp3 FIRE4.mp3 FIRE5.mp3 ROCKET.mp3 pepe.mp3 A_MAGE.mp3".split(" "),
uc,vc;function wc(){var a=xc;this.context=qc;this.onload=a}function xc(a,b,c){b=b.split(".")[0].toLowerCase();sc[b]=a;c&&(rc(b,c.x,c.y,c.k,c.cc,c.I),c.I=0)}
function Vb(){if(!qc){wc.prototype.bc=function(d,e){var f=this;yc(l.Ea+d,function(h){f.context.decodeAudioData(h).then(function(k){k&&xc(k,d,e)})})};for(var a=0,b=tc.length;a<b;a++){var c=tc[a];sc[c.split(".")[0].toLowerCase()]=c}"undefined"!==typeof AudioContext&&(window.AudioContext=window.AudioContext||window.webkitAudioContext,qc=new AudioContext,vc=qc.createGain(),uc=new wc,vc.gain.value=parseInt(g.soundRange)/100,vc.connect(qc.destination));rc=function(d,e,f,h,k,q,t){if(uc&&(parseInt(g.soundRange)||
!C.s)){"string"!==typeof d&&(d=tc[d].split(".")[0].toLowerCase());var r=d;if((d=sc[d])&&"loading"!==d&&!C.lb){var u=-Ac+(window.innerWidth-l.R)/2,v=-Bc+window.innerHeight/2;if(d.duration){if(C.s)if(64<C.now()-d.yb||!d.yb)d.yb=C.now();else return;if(!("attack"!=r&&q&&600<Date.now()-q)){if(e){if(k=(-u/32+e)/7,f=(-v/32+f)/7,v=Cc,4096<k*k+f*f)return!1}else v=f=k=0;void 0!==h&&h!==l.xb||C.Oc||(h=qc.createBufferSource(),h.buffer=d,e?(d=qc.createPanner(),d.panningModel="HRTF",d.setPosition(k,f,v),d.refDistance=
1,d.distanceModel="inverse",h.connect(d),d.connect(vc)):h.connect(C.s?vc:qc.destination),h.start(0))}}else sc[r]="loading",e={x:e,y:f,k:h,cc:k,I:Date.now(),mid:t},uc.bc(d,e)}}};window.play=rc}}
const Dc=[{name:"Tzar soundtrack",aa:"Kiril Busty Petrushev & Dimitar Sabev",volume:.7,ha:[{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],na:[{sizes:"141x141",src:"nehhon/cover.png"}],Oa:!0},{name:"Sharp Rain Tzar",aa:"Sharp Rain, Kiril Busty Petrushev & Dimitar Sabev",
volume:1,ha:[{url:"sr1.mp3",name:"Track 1"},{url:"sr2.mp3",name:"Track 2"},{url:"sr3.mp3",name:"Track 3"},{url:"sr4.mp3",name:"Track 4"},{url:"sr5.mp3",name:"Track 5"},{url:"sr6.mp3",name:"Track 6"},{url:"sr7.mp3",name:"Track 7"},{url:"sr8.mp3",name:"Track 8"},{url:"sr9.mp3",name:"Track 9"},{url:"sr10.mp3",name:"Track 10"}],na:[{sizes:"141x141",src:"nehhon/shr.png"}],Oa:!0},{name:"Tzar soundtrack",aa:"Kiril Busty Petrushev & Dimitar Sabev",volume:1,ha:[{url:"tzaradp.mp3",name:"Tzar ADP",aa:"Diemiurgo"},
{url:"ts1.mp3",name:"Track 1"},{url:"ts2.mp3",name:"Track 2"},{url:"ts3.mp3",name:"Track 3"},{url:"ts4.mp3",name:"Track 4"},{url:"ts5.mp3",name:"Track 5"},{url:"ts6.mp3",name:"Track 6"},{url:"ts7.mp3",name:"Track 7"},{url:"ts8.mp3",name:"Track 8"},{url:"ts9.mp3",name:"Track 9"},{url:"ts10.mp3",name:"Track 10"}],na:[{sizes:"200x200",src:"nehhon/diemiurgo.jpg"}]},{name:"Tzar soundtrack remastered",volume:1,aa:"Kiril Busty Petrushev & Dimitar Sabev",ha:[{url:"o1.mp3",name:"Track 1"},{url:"o2.mp3",name:"Track 2"},
{url:"o3.mp3",name:"Track 3"},{url:"o4.mp3",name:"Track 4"},{url:"o5.mp3",name:"Track 5"},{url:"o6.mp3",name:"Track 6"},{url:"o7.mp3",name:"Track 7"},{url:"o8.mp3",name:"Track 8"},{url:"o9.mp3",name:"Track 9"},{url:"o10.mp3",name:"Track 10"},{url:"outro.mp3",name:"Outro"}],na:[{sizes:"141x141",src:"nehhon/cover.png"}],Oa:!0},{name:"Tzar soundtrack orchestral version",volume:1,aa:"Pau Garriga, Kiril Busty Petrushev & Dimitar Sabev",ha:[{url:"oc1.mp3",name:"Track 1"},{url:"oc2.mp3",name:"Track 2"},
{url:"oc3.mp3",name:"Track 3"},{url:"oc4.mp3",name:"Track 4"},{url:"oc5.mp3",name:"Track 5"},{url:"oc6.mp3",name:"Track 6"},{url:"oc7.mp3",name:"Track 7"},{url:"oc8.mp3",name:"Track 8"},{url:"oc9.mp3",name:"Track 9"},{url:"oc10.mp3",name:"Track 10"}],na:[{sizes:"480x360",src:"nehhon/oc.jpg"}],Oa:!0}];var Ec;
function Fc(){"mute"!=g.favMusic&&Ec&&(Ec.src="nehhon/F.mp3",Ec.play(),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:"Astronomia (Medieval Style)",artist:"Cornelius Link",artwork:[{sizes:"200x200",src:"nehhon/cornelius.jpg"}]})))}
function Gc(){this.value&&(g.favMusic=this.value);if("mute"!=g.favMusic){var a=Dc[g.favMusic]||Dc[0];if(a.Oa){a=a.ha;for(let b=a.length-1;0<b;b--){const c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}}}Hc.id=0;Hc()}
function Hc(){var a=g.favMusic;if("mute"==a)return Ec.src="";a=Dc[a]||Dc[0];0>Hc.id&&(Hc.id=0);var b=a.ha[Hc.id++%a.ha.length];Ec.src="nehhon/"+b.url;Ec.play();"mediaSession"in navigator&&(navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new window.MediaMetadata({title:b.name,artist:b.aa||a.aa,album:a.name,artwork:a.na}))}
function Ic(){Ec=new Audio;Ec.onended=Hc;Ec.volume=parseInt(g.musicRange)/100;if("mediaSession"in navigator){var a=navigator.mediaSession;a.setActionHandler("play",function(){Ec.play();a.playbackState="playing"});a.setActionHandler("pause",function(){Ec.pause();a.playbackState="paused"});a.setActionHandler("seekbackward",function(){});a.setActionHandler("seekforward",function(){});a.setActionHandler("previoustrack",function(){Hc.id-=2;Hc()});a.setActionHandler("nexttrack",Hc)}Gc()}
window.setupGameMusic=Ic;var Jc;function Kc(){return 25*D[48]()}function Lc(){if(0===C.paused){C.paused=1;void 0!=Jc&&clearInterval(Jc);var a=C.now();C.wa+=Date.now();C.now=function(){return a}}else C.wa-=Date.now(),C.paused=0,Jc=setInterval(Mc,Mc.speed),C.now=Kc}function Nc(a){var b=Math.floor(a/3600);let c=Math.floor(a%3600/60);a=1<b?`${b} h`:1===b?"1h":"";b=b&&!c?"":`${c} ${N(558)}`;return a+(a&&b?" ":"")+b}
function Oc(a){a/=1E3;var b=~~(a/60)%60,c=~~(a/3600);a=~~(a%60);1===(a+"").length&&(a="0"+a);0!=c?(c+=":",10>b&&(b="0"+b)):c="";return c+b+":"+a}var Pc=0,Qc=0;window.invgtech=function(a){a=L("div",document.body,"",`background-position-y:${a}px`);a.className="techdone";setTimeout(J,4020,a)};window.synctm=function(){D[11]()};
function Mc(){var a=!0;do{C.Z=D[48]();a?Pc&&(Qc+=Date.now()-Pc-Mc.speed):Qc-=Mc.speed;Pc=Date.now();a=Date.now();D[11]();C.Z=D[48]();var b=Rc;0===C.Z%40&&b();Sc+=Date.now()-a;a=!1}while(!Tc&&Qc>=Mc.speed)}Mc.speed=25;function Uc(){this.Fa=!this.Fa;this.style.backgroundPositionY=-28*!this.Fa+"px";D[182](this.Ub,this.Fa,this.qa)}function Vc(a){document.body.style.cursor="";m("diplomacy")||Q||(Gb('<table>\n    <tbody id="dpltable">\n    </tbody>\n    </table>\n    ',a).id="diplomacy",D[181]())}
function Wc(){var a=Xc('<div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/gold.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/wood.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/food.gif"></div><div><input type="number" min="0" max="2147483647" step="100" value="0"><img src="nehhon/stone.gif"></div>',1);a.className="sndRes";a=L("button",a,N(448),"padding:15px;margin-top:24px;background:#00ff001a");
a.qa=this.qa;a.onclick=Yc}function Yc(){var a=this.parentNode.getElementsByTagName("input");p(a,this);D[183](this.qa,parseInt(a[0].value),parseInt(a[1].value),parseInt(a[2].value),parseInt(a[3].value));Hb(this.parentNode)}
window.shdiplomacyrow=function(a,b,c,d,e,f,h,k,q,t,r,u,v,w,A){b=Zc(t,b);var x=document.createElement("tr");const y=D[112]()==u;L("td",x,a);L("td",x,"","padding:0px;width:13px");L("td",x,`<div style="width:4px;background:${$c(d)};border-radius:1px;height:16px;"></div>`,"padding:0px");L("td",x,b+ad(t),`color:#ffd75d;${h&&";text-decoration:line-through;color:#f00"||""}`);L("td",x,c);a=n[45]&&D[48]()<2400*n[18];if(y)L("td",x,`<div class="shme" style="color:#ffb100">${D[246]()?"":A||"\ud83d\udec7"}</div>`,
"padding:0 5px;");else{L("td",x,`<div class="${q?"shenemies":"shallies"}">${D[246]()?"":A||"\ud83d\udec7"}</div>`,"padding:0 5px;");Na&&L("td",x,`<div class="shview" style="background-position-y:${-28*!f}px;${e&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}"></div>`,"padding:0 5px;").children[0];if(!a){e=M("td",x,"padding:0 5px;");for(let B=0;4>B;B++){let I=M("div",e,`background-position-y:${-28*!(r&1<<B)}px;${(w&1<<B?1:0)&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}`);bd(I,B);I.className=
"shres";q||(I.onclick=()=>{r^=1<<B;I.style.backgroundPositionY=-28*!(r&1<<B)+"px";p(r);D[182](1,r,u)})}e.title="Share resources"}v=L("td",x,`<div class="shcontrol" style="background-position-y:${-28*!k}px;${v&&"box-shadow: 0px 0px 0px 1px inset #197b10;"||""}"></div>`,"padding:0 5px;").children[0];v.title="Share control of units";q||(a||(q=L("td",x,'<div class="shtrib"></div>',"padding:0 5px;").children[0],q.onclick=Wc,q.qa=u),v.onclick=Uc,v.Ub=2,v.Fa=k,v.qa=u)}m("dpltable").appendChild(x)};
var Sc=0,cd=0,dd=0,ed=[14,12,0,0,0,0,18,18,11,14,7,7,5,5,16,11,16,8,5,5,16,15],fd=-1;window.cursor=function(a,b){var c=ed[2*a]||0,d=ed[2*a+1]||0;b&&(a+="i");a!==fd&&(fd=a,document.body.style.cursor=`url("${l.Ea}cursor${a}.gif") ${c} ${d}, auto`)};var gd,hd,id,jd,kd,ld,md,nd,od,pd,qd,rd,sd,td,ud,vd,wd;window.setupArrows=function(a,b,c){a&&(qd.Ka.className="");(a+1)*od.length<b&&(qd.Na.className="");c&&(qd.Ib.className="")};const xd=[20,15,14,22];
window.setupTradingmenu=function(a,b,c,d,e,f){m("tradingmenu")?yd("tradingmenu"):(L("div",zd?m("menbak2"):m("menu"),'<button id="tramount"></button>\n<button id="troriginres"></button>\n<button id="trdestres"></button>\n<button id="trorigin"></button>\n<button id="trdest"></button>\n<button id="trdecline" style="top:167px"></button>\n<button id="traccept" style="top:167px"></button>',"",zd).id="tradingmenu",m("tramount").onmouseup=function(h){D[159](h.button?-1:1)},m("troriginres").onmousedown=function(h){this.style.backgroundPositionY=
-48*xd[D[160](h.button?-1:1)]+"px"},m("trdestres").onmousedown=function(h){this.style.backgroundPositionY=-48*xd[D[160](h.button?-1:1,1)]+"px"},m("trorigin").onclick=function(){D[161]()},m("trdest").onclick=function(){D[161](1)},m("trdecline").onclick=function(){P("tradingmenu")},m("traccept").onclick=D[162]);m("traccept").disabled=!f;p(a);m("tramount").innerHTML=a+` (+${f})`;c?m("trorigin").style.cssText=`background:url(nehhon/iconunits.webp) 0px ${48*-c}px`:m("trorigin").style.cssText="";b?m("trdest").style.cssText=
`background:url(nehhon/iconunits.webp) 0px ${48*-b}px`:m("trdest").style.cssText="";m("troriginres").style.backgroundPositionY=-48*xd[e]+"px";m("trdestres").style.backgroundPositionY=-48*xd[d]+"px"};var Ad=navigator.Zb;function Bd(){}Ad&&Ad.addEventListener("levelchange",Bd);
window.setupMWmenu=function(){m("magicworkshopmenu")?yd("magicworkshopmenu"):(L("div",zd?m("menbak2"):m("menu"),'<button id="mgbook"></button>\n            <button id="mgpotion"></button>\n            <button id="mgsword"></button>\n            <button id="mgamount"></button>\n            <button id="mgitem"></button>\n            <button id="mgdecline"></button>\n            <button id="mgaccept"></button>',"",zd).id="magicworkshopmenu",m("mgbook").onclick=function(){D[36](0);Cd()},m("mgpotion").onclick=
function(){D[36](1);Cd()},m("mgsword").onclick=function(){D[36](2);Cd()},m("mgdecline").onclick=function(){m("magicworkshopmenu").style.display="none"},m("mgitem").onmousedown=function(a){var b=1;a.button&&(b*=-1);D[37](b);Cd()},m("mgaccept").onclick=function(){m("magicworkshopmenu").style.display="none";D[39]()},m("mgamount").onmousedown=function(a){var b=1;a.button&&(b=-1);D[38](b);Cd()});Cd()};
function Cd(){m("mgitem").style.backgroundPositionY=-48*D[35]()+"px";m("mgamount").innerHTML=D[34]()}function Dd(a,b){var c=a.Y,d=document.createElement("div");d.className="contD";for(var e=0;e<c.length;e++){var f=document.createElement("button"),h=c[e];h.parent=a;f.innerHTML=h.name;f.onclick=Ed;f.ja=h;b.appendChild(f);h.Y&&(h.nb=d)}b.appendChild(d)}function Fd(a){a.style.visibility="hidden"}function R(a){a.style.display="none"}Element.prototype.show=function(){this.style.display="block"};
function Gd(a){a.style.display=""}function Hd(a){var b=m(a.parent);Dd(a,b)}var Id;function Jd(){var a=Kd,b=Ld();a.Y=b;a.ta&&(a.ta.innerHTML="",Dd(a,a.ta))}
function Ed(){var a=this.ja,b=a.parent;if(a.onclick)a.onclick(a.Gb);if(Id&&b&&b.W!=Id)for(var c=Id,d=c.length,e=0;e<d;m(c[e++]).style.display="none");a.W&&(Md(a.W),Id=a.W);a.fa&&a.fa.ja&&a.fa.ja.W&&(Md(a.fa.ja.W),Id=a.fa.ja.W);if(a.Y){b.fa&&(b.fa.className="");b.fa=this;this.className="clickD";a.ta||(b=document.createElement("div"),a.nb.appendChild(b),Dd(a,b),a.ta=b);b=a.nb.children;for(c=0;c<b.length;R(b[c++]));a.ta.show()}}
function Nd(){var a=D[112]();m("selectKingdom").innerHTML="";for(var b=0,c=D[28]();b<c;b++){var d=b?Od(Pd(D[111](b),20)):N(23),e=$c(D[132](b));m("selectKingdom").innerHTML+=`<option style="background:${e}" value="${b}" ${b==a&&"selected"||""}>${d}</option>`}m("selectKingdom").innerHTML+="<option value='"+(2**31-1)+"'>"+N(22)+"</option>";m("selectKingdom").onchange(1)}window.activeKingdomSetup=Nd;function Qd(a){D[117](a,!0)}
function Rd(a,b){let c=jb(kb),d=a.length;1024<d&&(d=1024);for(let e=0;e<d;e++)c[e]=a.charCodeAt(e);D[239](d,b)}function Sd(a){m("brushSize").value=a;m("brushSize").onchange()}function Td(a,b){var c=` (${Td.ua.length})`;Td.ua.put({name:"water"==Ud.j[b]&&N(45)+c||N(46)+c,onclick:Qd,Gb:a})}window.EDterrainInfo=Td;function Ld(){Td.ua.length=0;D[118]();return Td.ua}var Vd;window.fstTXT=function(a,b){b?Vd=Od(gc(a,b)):Vd=""};var Wd=(a,b)=>a.name.localeCompare(b.name);let Xd;var Yd=1,Zd,Kd;
function $d(){zd="true"==g.theme||1020>window.innerWidth;m("content")||(L("div",ae).id="content");if(Q){Td.ua=[];m("content").innerHTML=`<div id="mapeditorpanel">
    <div id="mapeditorinfo">
    </div>
    </div>
    <div id="minimap" style="box-shadow:0px 0px 20px #000;position:absolute;top:31px;left:4px"></div>
    <div id="mapeditorinfotop">
   
    <button style="display:none" id="deleteUnit" style="color:#f00;font-weight:bold;font-size:19px">x</button>
    <button style="display:none" id="rotatebutton"></button>
    <button id="mapProps" style="box-shadow:none"></button>
    <button id="mapRules">${N(576)}</button>
    <button style="display:none" id="mapRules"></button>
    <div id="brhSize" style="display:none"><span>${N(728)}: </span><input type="number" min="1" max="512" value="8" id="brushSize"/></div>
    <div id="brhMargin" style="display:none"><span>Brush margin: </span><input type="number" min="0" max="512" value="0" id="brushMargin"/></div>
    <div id="brhDnst" style="display:none"><span>Brush density: </span><input type="number" min="1" max="100" value="25" id="brushDensity"/></div>
    <div id="EDrndtree" style="display:none"><button id="rndtrees">${N(49)}</button></div>
    <div id="EDterr" style="display:none"><span>${N(26)}: </span><select id="EDtrrsel">${be()}</select></div>
    <div id="EDterrRND" style="display:none"><button id="rndtrbutton">${N(50)}</button></div>
    <div><span style="font-size:14px;color:#797979">${N(670)}: </span>
    <select id="selectKingdom">
    </select>
    </div>
    <div><button id="castleRND">${N(52)}</button></div>
    <div><button id="clearMap">${N(51)}</button></div>
    </div>
    <div id="bigMap" style="display:none"></div>
    ${""}
    `;m("mapRules").onclick=ce;var a=m("mapeditorinfotop");M("button",a,"box-shadow:none;background:url(nehhon/load.webp);opacity:.8;width:20px;height:26px;background-size:20px",1).onclick=()=>{var c=document.createElement("input");c.type="file";c.accept=".tzared";c.onchange=de;c.click()};M("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/dwn.webp);background-size:26px;opacity:.8;width:26px;height:26px",1).onclick=ee;M("button",a,"box-shadow:none;margin-right:-6px;background:url(nehhon/exit.webp);background-size:30px;opacity:.8;width:30px;height:28px;margin-left:auto").onclick=
fe;let b=L("button",a,"\u25a4");a.insertBefore(b,m("brhSize")).onclick=()=>{let c=Xc("",1);O("div",c,678,"color:var(--color1);font-size:22px;margin-bottom:32px");let d=ge(c),e=he(c),f=L("div",c),h=ie(c,0,[624,598,586,873]),k,q,t;h.onchange=()=>{k=void 0;ub(f);if(1==h.value){f.className="unitProps";k=je([0,0,0,0,0,0,0],S(d),f);L("span",f,N(676)+": ");let r=ke(u=>q=u,f,0);r.style.margin="20px";q=2147483646;O("option",r,677).value=q;r.value=q}else 3==h.value&&(t=L("input",f),t.placeholder=N(747),t.maxLength=
20)};O("button",c,675,"margin-left:15px").onclick=()=>{let r=jb(kb);for(var u=0;u<e.length;u++)r[u+1024]=e[u].checked;if(1==h.value){for(u=0;u<k.length;u++)k[u]&&(r[u]=parseInt(k[u].value));r[7]=q}else if(3==h.value){for(u=0;u<t.value.length;u++)r[u]=t.value.charCodeAt(u);r[1023]=t.value.length}D[247](S(d),S(h));Hb(c)}};m("castleRND").onclick=function(){D[133](0);le.update=!0};m("clearMap").onclick=function(){D[133](1)};m("rndtrees").onclick=D[125];m("rndres").onclick=D[129];m("brushDensity").onchange=
function(){D[116](parseInt(m("brushDensity").value))};m("brushSize").onchange=function(){D[115](parseInt(m("brushSize").value))};m("brushMargin").onchange=function(){D[147](parseInt(m("brushMargin").value))};m("rndtrbutton").onclick=function(){D[3]();D[124]();le.update=!0};m("brushDensity").onchange();m("brushSize").onchange();m("selectKingdom").onchange=function(){D[113](parseInt(this.value));if(this.value!=2**31-1){var c=D[132](parseInt(this.value)),d=c>>16&255,e=c>>8&255;c&=255}else c=e=d=0;this.style.background=
`rgba(${d},${e},${c},0.6)`};m("mapProps").onclick=function(){var c=Xc("",1);c.id="mapPropsWindow";c=L("div",c);me=L("div",c);me.id="edks";ne();var d=M("div",c,"margin-bottom:24px;display:flex;justify-content:center;gap:33px"),e=[48,oe,737,()=>pe(),463,qe,702,()=>re()];for(let q=0;q<e.length;q+=2)O("button",d,e[q],"text-transform:uppercase").onclick=e[q+1];d=M("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;");O("p",
d,54);let f=L("input",d);f.onchange=()=>Rd(f.value,0);D[240](0);f.value=Vd;O("p",d,56);let h=M("textarea",d,"width:694px;height:152px");h.onchange=()=>Rd(h.value,1);D[240](1);h.value=Vd;O("p",d,57);let k=L("input",d);k.onchange=()=>Rd(k.value,2);D[240](2);k.value=Vd;O("button",d,70,"display:block;margin-top:15px;margin-left:auto").onclick=()=>{let q=Xc("",1),t=D[250]();O("span",q,691,"line-height:31px");let r=se(q,v=>{v?(u.show(),u.value="",u.focus()):(R(u),D[250](1,0),u.value=0)},t);r.style.Gc="right";
r.style.marginLeft="6px";let u=Sa(q,t,()=>{te(u);D[250](1,S(u))},"number","display:block;margin:auto;margin-top:14px",9999999,0);t?u.focus():R(u)};d=M("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;margin-top:30px;width:max-content");L("span",d,N(457)+": ");e=L("input",d,"","display:block;margin-top:10px;background:none");e.onchange=ue;e.type="file";e.accept="image/*";L("div",d).id="mmimg";c=M("div",c,"background:rgba(255,255,255,0.03);box-shadow:rgb(0 0 0) 0px 0px 20px;border:1px solid rgba(243,205,90,0.08);padding:12px;margin-top:30px;width:max-content");
O("span",c,721);c=L("input",c,"","display:block;margin-top:10px;background:none");c.onchange=ve;c.type="file";c.accept=".wmp"};Kd={name:N(26),Y:Td.ua,W:["brhSize"]};Xd=[{name:N(535),onclick:()=>D[117](-1,!0),W:["brhSize"]}];new Hd({Y:[{name:N(730),onclick:()=>Sd(1),W:["brhSize","brhMargin"],Y:[{name:N(729),onclick:()=>we(D[110])}]},{onclick:()=>Sd(8),name:N(26).toUpperCase(),Y:[Kd,{name:N(61),Y:[{name:N(61),onclick:D[117],Gb:7}],W:["brhSize","brhDnst","EDrndtree"]},{name:N(534),Y:Xd,onclick:()=>{Xd.length=
1;let c=D[215]();for(let d=0;d<c;d++)Xd.put({name:d,onclick:()=>{D[216](d)}})}}]}],parent:"mapeditorinfo"})}else zd?(a=xe()?"nwb":"",m("content").className="nw "+a,m("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="popr"></div>
    <div id="resources">
    <div><span id="gold"></span></div>
    <div><span id="wood"></span></div>
    <div><span id="food"></span></div>
    <div><span id="stone"></span></div>
    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${C.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"> </span>
    <span id="tpGPU"> </span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menbak0">
    <div id="plavatar"></div>
    ${!Ja&&'<div id="kingdom"></div>'||""}
    </div>
    <div id="menbak1"></div>
    <div id="menbak1s"></div>

    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>

    <div id="topmenuvals">
    <div id="delunit">x</div>
    <div id="progressvalue"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    ${Ja&&'<div id="kingdom"></div>'||""}
    <div id="unitname" contenteditable="true"></div>
    </div>
    <div id="menbak2">
    <div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>
    <button id="gameMenu">${N(47)}</button>
    </div>
    </div>`):(m("content").innerHTML=`<ul id="msgs1"></ul>
    <div id="playersinfo"></div>
    <div id="pop"></div>
    <div id="resources" style="display:block">
    <div id="goldr"></div>
    <div id="woodr"></div>
    <div id="foodr"></div>
    <div id="stoner"></div>
    <div id="popr"></div>
    <div id="resourcesbefore"></div>
    <div id="gold"></div>
    <div id="wood"></div>
    <div id="food"></div>
    <div id="stone"></div>

    <div id="temperature"></div>
    </div>
    <div id="diplomacyButton"></div>
    ${C.l&&'<div id="msgButton"></div>'||""}
    <div id="topinfo">
    <span id="tpCPU"></span>
    <span id="tpGPU"></span>
    <span id="tpTM"></span>
    </div>
    <div id="bottominfo"></div>

    <div id="minimap" style="position:absolute;top:31px;left:4px;z-index:1"></div>
    <div style="display:none" id="bigMap"></div>
    <button id="minimapb"></button>
    <button id="menuctrl"></button>
    <div id="menu" style="display:block">
    <div id="menubefore"></div>
    <div id="menuafter"></div>
    <button id="gameMenu">${N(47)}</button>

    <div id="daynighticon"></div>
    <div id="topmenuvals">
    <div id="icons20">
    <div id="attackmenu" style="display:none"></div>
    <div id="defencemenu" style="display:none"></div>
    <div id="levelmenu" style="display:none"></div>
    <div id="manamenu" style="display:none"></div>
    <div id="manamenu1" style="display:none"></div>
    </div>
    <div id="delunit">\ud83d\udec7</div>
    <div id="progressvalue"></div>
    <div id="kingdom"></div>
    <div id="unitname" contenteditable="true"></div>
    <progress id="progressone" style="display:none"></progress>
    <progress id="progressmana" style="display:none" max="100"></progress>
    </div>
    <div id="navigation">
    <button id="aleft"></button>
    <button id="stock"></button>
    <button id="aright"></button>
    </div>
    <div id="orders">
    </div>
    </div>`,m("content").className="dfth"),wd=m("msgs1"),ye(),ze=M("span",m("topinfo"),"display:none;font-size:8px;color:#00ffff"),!Ae&&C.l&&(setInterval(()=>{1==Be&&(Ce=performance.now(),G(28))},15E3),Ce=performance.now(),G(28)),qd={page:0,Ka:m("aleft"),Na:m("aright"),Ib:m("stock")},window.actionMenu=qd,qd.Ka.onclick=function(){D[30](-1)},gd=m("minimap"),rd=m("gold"),sd=m("wood"),td=m("food"),ud=m("stone"),m("resources"),vd=m("daynighticon"),qd.Na.onclick=function(){if("blocked"!=qd.Na.className)D[30](1)},
qd.Wb=[],hd=m("attackmenu"),id=m("defencemenu"),jd=m("levelmenu"),kd=m("kingdom"),ld=m("progressone"),md=m("unitname"),nd=m("progressvalue"),md.oninput=()=>{De(md.textContent)},m("delunit").onclick=function(){D[32](8,0)},m("menuctrl").onclick=function(){(Yd=!Yd)?(m("menuctrl").style.cssText="",m("menu").style.cssText="",m("resources").style.cssText=""):(m("menuctrl").style.left="0px",m("menuctrl").style.backgroundPosition="100px",R(m("menu")),370>window.innerHeight&&(m("resources").style.cssText=
"width:100%;left:0px"));D[167](Yd)},m("minimapb").onclick=function(){if(Ee=!Ee)Zd=Yd,Yd=!0,m("menuctrl").onclick(),m("minimapb").style.filter="drop-shadow(0px 0px 2px #fff)";else{Zd&&(Zd=0,m("menuctrl").onclick());P("bigMap");m("minimapb").style.cssText="";for(var b=document.getElementsByClassName("alertdmg"),c=0;c<b.length;c++)R(b[c])}},m("teamchat").onchange=function(){m("msginputGame").focus()},m("msgButton")&&(m("msgButton").onclick=Fe),m("diplomacyButton").onclick=Vc,pd=m("bottominfo"),R(pd),
Ge(),m("stock").onclick=D[31],m("gameMenu").onclick=He;m("minimap").addEventListener("mousedown",Ie);m("bigMap").addEventListener("mousedown",Ie);m("bigMap").addEventListener("touchstart",Ie)}
function Ge(){if(!Q){var a=4;if(zd){var b=xe(),c=b?window.innerWidth/T:window.innerHeight/T;240>c?a=1:295>c?a=2:344>c?a=3:700<c&&1020<window.innerWidth/T&&(a=b?window.innerWidth/T-m("menbak2").getBoundingClientRect().x-132:window.innerHeight/T-m("menbak2").getBoundingClientRect().y-132,a=Math.floor((a+5-24)/53),24<a&&(a=24))}a*=2;if(!od||od.length!=a){b=m("orders");b.innerHTML&&(b.innerHTML="");od=[];for(c=0;c<a;c++){let d=L("button",b);d.ontouchstart=Je;d.ontouchend=Ke;d.onmousedown=Le;d.onmouseup=
Me;d.va=c;d.onmouseenter=Ne;d.onmouseout=Oe;od[c]=d}D[189](a,!C.s)}}}var Pe,Qe;function Je(a){Qe=a.changedTouches[0].pageX;Pe=a.changedTouches[0].pageY}function Ke(a){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY,d=Math.sign(c-Pe);p(d,c,Pe);48<d*(c-Pe)?(D[32](16,1),D[15](this.va,0<d?2:0),D[32](16,0)):(55<Math.sign(b-Qe)*(b-Qe)&&(D[32](16,1),D[32](18,1),D[15](this.va,0),D[32](16,0),D[32](18,0)),p(a))}window.clearleftar=function(){qd.Ka.className=""};var Re;
function Ie(a){var b=D[47](),c=a.offsetX,d=a.offsetY;Re=this.getBoundingClientRect();b="touchstart"==a.type;if(0===a.button||b)document.addEventListener(b&&"touchend"||"mouseup",function k(){Se=!1;document.removeEventListener("mouseup",k);document.removeEventListener("mousemove",Te)}),Se=!0,Te(a),document.addEventListener(b&&"touchmove"||"mousemove",Te);else if(2===a.button){var e=parseInt(a.target.style.width),f=parseInt(a.target.style.height);b=D[47]();c=Math.floor(b*c/e*32)/T;d=Math.floor(b*d/
f*32)/T;D[22](c,d,2,0,!0,a.shiftKey)}}function Ue(a,b,c,d,e,f,h,k,q,t,r,u,v,w){v=f?Ue.$b:m("guideTable").getElementsByTagName("tr")[v].getElementsByTagName("td")[u];var A="";f||(A+=`<span>${Rb[u]}</span>`);A+=`<div ${f&&"class='spchild'"||""}>
    <div class="prevIcon" style="background-position-y:${48*e}px"></div>
    <ul>
    <li class="guiTitle">${N(a)}</li>
    ${w&&`<li class="desc">${N(w)}</li>`||""}
    <li><span>${N(66)+":"}</span> ${k&&k+"<img src='nehhon/gold.gif'>"||""} ${q&&q+"<img src='nehhon/wood.gif'>"||""} ${t&&t+"<img src='nehhon/food.gif'>"||""}  ${r&&r+"<img src='nehhon/stone.gif'>"||""} </li>
    `;h&&1!=h||(A+=`
    <li><span>${N(4)}:</span> ${b}</li>`);h||(A+=`
    <li><span>${N(7)}:</span> ${c}</li>
    <li><span>${N(5)}:</span> ${d}</li>`);a=L("div",v,A+"</ul>\n    </div>\n    ");f||(Ue.$b=a)}window.insertInfo=Ue;
async function Ve(){if(!m("guide1")){let k=await (await fetch(`nehhon/hl${({es:1,it:1,pt:1,pl:1,bg:1})[l.Ja]&&l.Ja||"en"}.json`)).json(),q=k.BASICTR;var a=Xc("",2);a.id="guide1";let t=L("h2",a,"","color:var(--color1);font-size:18px;height:46px;margin-top:0px;text-align:left;text-shadow:0px 0px 10px"),r=L("div",a);r.id="hxtrbtn";var b=L("div",a);b.id="helpbtn";let u=L("div",a);u.id="helpcnt";let v="tech unit building item order howto whatis hotkey".split(" ");var c=function(x){x=k[x];let y=L("dl",
u);for(let B in x){let I=x[B];p(I);let H=I.icon.split(",");L("dt",y,`${I.brief}`,`cursor:inherit;background-image:url(nehhon/H${H[0]}.webp); background-position:0px ${-48*(H[1]-1)}px`);L("dd",y,`${I.detail}`,"display:block")}},d=function(x){u.innerHTML="";u.scrollTop=0;for(var y=x.parentNode.children,B=0;B<y.length;B++)y[B].style.border=y[B]==x?"1px solid":""},e=function(x,y){d(y);x=k[x];y=L("dl",u);for(let B in x){let I=x[B],H=I.icon.split(",");L("dt",y,`${I.brief}`,`cursor:inherit;background-image:url(nehhon/H${H[0]}.webp); background-position:0px ${-48*
(H[1]-1)}px`);L("dd",y,`${I.detail.split("~ ")[1]}`,"display:block")}},f=function(x){u.scrollTop=0;if("UNITS"==x){var y=L("button",r,q.table);y.onclick=function(){d(this);We(u)};y.onclick();L("button",r,q.bonuses).onclick=function(){d(this);Xe(u)};L("button",r,q.bonuses_inv).onclick=function(){d(this);Xe(u,1)}}"BUILDINGS"==x&&(L("button",r,q.bonuses).onclick=function(){d(this);Xe(u,0,1)},L("button",r,q.bonuses_inv).onclick=function(){d(this);Xe(u,1,1)});var B="TECHNOLOGIES"==x;if(!B&&(y=L("button",
r,`${q.common}`),y.onclick=function(){e(x+" (Common)",this)},"UNITS"!=x))y.onclick();y=L("button",r,`${q.euro}`);y.onclick=function(){e(x+(B&&" (European)"||" (Euro)"),this)};L("button",r,`${q.arab}`).onclick=function(){e(x+" (Arabian)",this)};L("button",r,`${q.asia}`).onclick=function(){e(x+" (Asian)",this)};if(B)y.onclick()},h=function(x){x=k[x];let y=L("dl",u);for(let B in x){let I=x[B],H=L("dt",y,`\u2b9e ${I.brief}`,"padding-left:10px;height:auto"),K=L("dd",y,`${I.detail}`,"padding-left:10px;display:none;margin-top:4px;margin-left:21px;padding-bottom:6px");
H.onclick=()=>{"none"==K.style.display?K.show():R(K)}}};let w=[()=>f("TECHNOLOGIES"),()=>f("UNITS"),()=>f("BUILDINGS"),()=>c("ITEMS"),()=>c("COMMANDS"),()=>h("How to ..."),()=>h("What is ..."),function(){var x=k.HOTKEYS,y="<br>";for(let B in x)y+=`${B} \ud83e\udc26<span style="color:#fff1c6;margin-left:7px">${x[B]}</span><p>`;u.innerHTML=y}],A="";for(let x=0;x<v.length;x++)a=L("button",b,"",`background-position-y:${45*-x}px`),a.onclick=function(){let y=b.children;for(let B=0;B<y.length;B++)y[B]==
this?this.className="active":y[B].className="";A=q[v[x]];t.innerHTML=A;u.innerHTML="";r.innerHTML="";w[x]()},a.onmouseenter=function(){t.innerHTML=q[v[x]]},a.onmouseout=function(){t.innerHTML=A};b.children[1].onclick()}}window.showGuide=Ve;
async function Ye(){let a=Xc("",2);a.id="changelog";O("p",a,536,"font-size:29px;margin-top:0px;border-bottom:1px solid");let b=(await (await fetch("nehhon/changes.txt")).text()).split("##");for(let e=1;e<b.length;e++){let f=b[e].split("\n");var c=f[0].substr(0,3),d=f[0].split(" ")[1];d&&=" - "+d;L("span",a,"v"+c/10+(d||""));c=L("ul",a);for(d=1;d<f.length-1;d++)L("li",c,f[d])}}var Ze,$e,af,bf,cf,df;window.propsextend=function(a,b,c,d,e,f,h,k){Ze=gc(a||0,b||0);$e=gc(c||0,d||0);af=e;bf=f;cf=h;df=k};
var ef,ff,Ff=[{i:856,m:a=>{gf=a;hf!=jf+gf&&(kf=lf,hf=jf+gf,mf=Date.now(),nf=Bc)}},{i:857,m:a=>{jf=-a;hf!=jf+gf&&(kf=lf,hf=jf+gf,mf=Date.now(),nf=Bc)}},{i:859,m:a=>{of=a;pf!=of+qf&&(kf=lf,pf=of+qf,rf=Date.now(),sf=Ac)}},{i:858,m:a=>{qf=-a;pf!=of+qf&&(kf=lf,pf=of+qf,rf=Date.now(),sf=Ac)}},{i:862,m:a=>{(Ee=a)||P("bigMap")}},{i:863,m:a=>{a&&tf(1)}},{i:854,m:function(a){if(a||!uf)if(ff=a,D[32](220,a),E){var b=vf;wf[0]=a;xf.queue.writeBuffer(b,0,wf)}else z.uniform1i(z.getUniformLocation(V,"hideTrees"),
a)}},{i:446,m:a=>{a||Q||(a=parseInt(g.stdcolors)?0:1,g.stdcolors=a,yf(a))}},{i:47,m:a=>{if(a)if(m("playingMenu")&&"none"!=m("playingMenu").parentNode.parentNode.style.display)zf.onclick();else He()}},{i:65,m:Fe},{i:848,m:a=>{D[32](8,a)}},{i:463,m:a=>{D[32](9,a);Af||(a?Vc():m("diplomacy")&&Hb(m("diplomacy")))}},{i:850,m:a=>{D[32](81,a)}},{i:853,m:a=>{D[32](32,a)}},{i:864,m:a=>{Bf=a;D[32](17,a)}},{i:865,m:a=>{Af=a;D[32](16,a)}},{i:866,m:a=>{uf=a;D[32](18,a)}},{i:427,m:a=>{D[32](112,a)}},{i:462,m:a=>
{D[32](113,a)}},{i:512,m:a=>{D[32](114,a)}},{i:855,m:a=>{a&&(Be=(Be+1)%4,D[190](Be),2==Be?P("playersinfo"):3==Be?(P("playersinfo"),P("topinfo")):(Gd(m("playersinfo")),yd("topinfo")))}},{i:527,m:a=>{D[32](116,a)}},{i:851,m:a=>{D[32](117,a)}},{i:852,m:a=>{D[32](118,a)}},{i:528,m:a=>{D[32](119,a)}},{i:849,m:a=>{m("msgs1")&&!a&&("none"==m("msgs1").style.display?yd("msgs1"):(P("msgs1"),Ta("Chat hidden")))}},{i:513,m:a=>{D[32](121,a)}},{i:514,m:a=>{D[32](122,a)}},{i:515,m:a=>{D[32](123,a)}},{i:867,m:a=>
{D[32](124,a)}},{i:868,m:a=>{D[32](125,a)}},{i:872,m:a=>{Q||!C.s||C.l||a||(Cf?(J(Cf),Cf=0,D[99]()):(Cf=L("div",document.body,"\u23f8","position:absolute;width:100%;height:100%;display:flex;justify-content:center;align-items:center; pointer-events:none;font-size:44px;text-shadow:0px 0px 20px #000"),D[98]()))}}],Cf,Gf=a=>" "==a?"SPACE":"ARROWUP"==a?"\u2191":"ARROWDOWN"==a?"\u2193":"ARROWRIGHT"==a?"\u2192":"ARROWLEFT"==a?"\u2190":a,If=()=>{let a=Xc("",1);ef||(g.bshrct||(g.bshrct='{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}'),
ef=JSON.parse(g.bshrct));var b=L("div",a);b.className="btrow";O("button",b,832).onclick=()=>{Hf(h=>{ef=JSON.parse(h.target.result);Hb(a);If()})};O("button",b,8).onclick=()=>{var h=new Blob([JSON.stringify(ef)],{type:"text"});Jf(h,"control.tzcnt")};O("button",b,542).onclick=()=>{ef=JSON.parse('{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}');
Hb(a);If()};a.children[0].addEventListener("click",()=>{g.bshrct=JSON.stringify(ef)});var c=L("div",a);c.id="keys0";b=L("div",a);b.id="keys";let d=ef.basic;var e=0;for(let h of Ff){h.id=e++;L("div",c,N(h.i).toLowerCase());let k=L("span",c,Gf(d[h.id]));h.L=k;k.onclick=()=>{let q=L("div",document.body,N(846),"z-index:4;position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),t=r=>{if(0>"123456789".split("").indexOf(r.key)){r=
r.key.toUpperCase();for(let u of Ff)d[u.id]==r&&(d[u.id]="",u.L.textContent="");d[h.id]=r;k.textContent=Gf(r)}J(q);document.removeEventListener("keyup",t)};document.addEventListener("keyup",t)}}for(let h=0,k=D[261]();h<k;h++){D[260](h);var f=Kf.name;if(Kf.Ia||!f||109==f||844==f||845==f)continue;c=document.createElement("div");e=L("div",c);Lf(e);let q=Mf[Kf.type]||"";q&&=N(q)+" -> ";f=q+N(f);L("div",e,f);let t=L("span",c),r=ef[h];if(r)for(let v of r){let w=L("div",t);L("span",w,v);L("div",w,"\u00d7").onclick=
()=>{r.splice(r.indexOf(v),1);J(w)}}let u=L("div",t,"+","background:#00ff0021;font-size:21px;color:#00df00;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{let v=L("div",document.body,N(846),"z-index:4;position:fixed;background:#000000e6;width:100%;height:100%;font-size:17px;display:flex;justify-content:center;align-items:center"),w=A=>{p(A);let x=A.key.toUpperCase();if((!r||0>r.indexOf(x))&&0>"Tab Shift Control Alt ContextMenu 1 2 3 4 5 6 7 8 9 0 Meta".split(" ").indexOf(A.key)){let y=document.createElement("div");
t.insertBefore(y,u);L("span",y,A.key);L("div",y,"\u00d7").onclick=()=>{r.splice(r.indexOf(A.key),1);J(y)};r||(r=[],ef[h]=r);r.put(x)}J(v);document.removeEventListener("keyup",w)};document.addEventListener("keyup",w)};Nf(c,b,f)}},Of;
window.writeProps=function(a,b,c,d,e,f,h,k,q,t,r,u,v,w,A,x){let y=pd;if(k){let ca=L("span",y);L("span",ca,N(67)+": ","color:rgb(255 116 121)");ca.className="red";var B=ic(D[5](),k);let qa=0;for(let Ga=0;Ga<k;Ga+=4){var I=O("div",ca);let db=L("span",I);O("span",I,B[Ga]);qa+=!B[Ga+3];db.className="icd1"+(B[Ga+3]?" invd":"");Pf(db,48*B[Ga+1]);if(Qf&&(I=Rf[B[Ga+2]]))for(let za of I)za.classList.add("mrkd"),Of.push(za)}qa||(ca.style.opacity=".4",ca.style.background="#ffffff0f")}2!=t||r||O("span",y,834,
"background:#ff000080;padding:4px");(k=4!=u&&Mf[bf]||"")&&(k="<span style='color:#b5953d'>"+N(k)+" -></span> ");f&&L("span",y,k+N(f),"color:var(--color1)");cf&&(f=M("div",y,"margin:6px 0px"),f.className="dataIcon",Pf(f,-48*cf));if(6>u&&(f=M("div",y,"width:100%"),4>u)){f=M("div",f,"border:2px solid #141414;padding:6px;background:#00000033");if(0==u)L("span",f,Sf(0,1)[x]+" -> "),L("span",f,2147483647==v?N(40):"+"+v,"color:#0f0");else if(1==u||2==u){O("div",f,765);x=2==u?"%":"";v=[{h:1,id:v},{h:3,id:w},
{h:-1,id:A},{h:6,id:q}];for(var H of v)H.id&&(v=M("div",f,"display:flex;gap:3px;align-items:center;margin-top:7px"),M("div",v,`background:url(nehhon/icons2.webp) 0px ${-20*H.h}px;width:20px;height:20px`),L("span",v,"+"+H.id+x,"color:#0f0"))}else 3==u&&(L("span",f,N(767)+" -> "),L("span",f,100-v+"%","color:#0f0"));if($e.length){H=M("div",f);H.className="nxtsh";for(var K of $e)D[196](K),df==W.race?(v=document.createElement("div"),H.prepend(v)):v=L("div",H),v.className="dataIcon",Pf(v,W.D/2)}}if(Ze.length){K=
M("div",y,"width:100%");K=M("div",K,"background:#004a0091");L("span",K,N(770)+":","color:rgb(116 255 128)");K.className="red";for(let ca of Ze)if(D[260](ca,Tf),Kf.nc&&(H=M("div",K),Lf(H),O("span",H,Kf.name),Qf&&(H=Rf[ca])))for(let qa of H)qa.classList.add("mrkd1"),Of.push(qa)}if(Ze.length||5!=u)h=0;h&&O("span",y,h,"font-size:11px;max-width:232px");if(a||b||c||d||q)h="",a&&(h+=a+"<img src='nehhon/gold.gif' /> "),b&&(h+=b+"<img src='nehhon/wood.gif' /> "),c&&(h+=c+"<img src='nehhon/food.gif' /> "),
d&&(h+=d+"<img src='nehhon/stone.gif' /> "),q&&(h+=q+"<img src='nehhon/mana.webp' /> "),a=L("span",y,h,"display:flex;align-items:center;gap:4px;border-top:2px solid rgba(255, 215, 93, 0.18);padding-top:5px;width:100%"),af&&(a=M("div",a,"display:flex;gap:3px;align-items:center"),M("div",a,"background:url(nehhon/icons2.webp) 0px -150px;width:15px;height:15px;background-size:100%"),L("span",a,af+"s"));let U;if(a=ef[e]){D[272]();a:for(let ca of a)for(a=0;3>a;a++)for(b=0;b<Uf.length;b++)if(c=Uf[b],(d=
ef[c])&&d[a]==ca)if(c==e){U=ca;break a}else continue a}U&&(L("span",O("span",y,841,"color:#858585;margin-top:8px;font-size:9px;align-self:end"),U).className="shotcut")};var Vf;function Ne(){if(!Ja){var a=this.va;D[40](a);pd.innerHTML&&(pd.style.cssText="");Vf=a}}function Oe(){D[151](this.va);R(pd);Vf=void 0;pd.innerHTML=""}function Me(){}function Le(a){D[15](this.va,a.button)}let Wf;
window.qmenu=function(a,b,c,d,e,f,h,k,q,t,r,u){if(!Q)if(f=m("dataMenu"),void 0==a)f&&(Hb(f),clearInterval(Wf),Wf=0);else{let v;f?(v=f,v.innerHTML=""):(v=Xc("",0,"font-size:15px"),v.id="dataMenu",Wf&&clearInterval(Wf),Wf=setInterval(()=>D[238](1),1E3));O("div",v,574,"margin-bottom:16px;color:var(--color1)");f=["gold","wood","food","stone","pop"];a=[a,b,c+e,d,h];b=M("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");
for(c=0;5>c;c++)L("div",b,a[c],"min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+`background:url(${"nehhon/"+f[c]}.gif) no-repeat;`);O("div",v,575,"margin-top:32px;margin-bottom:16px;color:var(--color1)");b=M("div",v,"    padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");a=[k,q,t,r];for(k=0;4>k;k++)L("div",b,Xf(a[k]/40,2)+"/s","min-width:75px;margin-right:8px;display:inline-block;padding-left:28px;height:20px;"+
`background: url(${"nehhon/"+f[k]}.gif) no-repeat;`);O("div",v,650,"margin-top:36px;margin-bottom:16px;color:var(--color1)");k=hc();q=M("div",v,"display: grid;\n    grid-template-columns: repeat(6,auto);\n    justify-items: center;\n    align-items: center;\n        padding: 16px;\n        background: #ffffff08;\n        box-shadow: 0px 0px 20px #000;\n        border: 1px solid rgb(243 205 90 / 8%);");L("div",q);L("div",q);for(t=0;4>t;t++)L("img",q).src=`${"nehhon/"+f[t]}.gif`;for(f=0;f<u;f+=7)for(t=
f%14?"color:#ffe9a5":"",M("div",q,`width:4px;background:${$c(k[f])};border-radius:1px;height:16px;`),L("div",q,Zc(k[f+2],k[f+1]),"margin-left:3px;min-width:152px;justify-self:left;"+t),r=0;4>r;r++)L("div",q,Yf(k[f+3+r]),"text-align:center;min-width:68px;padding:6px 4px;"+t)}};function O(a,b,c,d){return L(a,b,N(c),d)}function M(a,b,c,d){return L(a,b,"",c,d)}var Se;function Zf(){history.pushState("",document.title,window.location.pathname)}
function $f(a){C.Lc||C.s||(Gd(oc),ag(),this.parentNode&&(this.parentNode.style.display="none"),C.l=0,5!=a&&(location.hash="",setTimeout(Zf,200)))}var bg=[.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.25,.3,1,.3,.27,.3,1,.5,.5,.5,1,.62,.62,.62,1,.74,.74,.74,1,.88,.88,.88,1,.94,.94,.94,1,1,1,1,1,1.06,1.06,1.06,1,1.12,1.12,1.12,1,1.08,1.08,1.08,1,1.04,1.04,1.04,1,1,1,1,1,.95,.95,.95,1,.88,.8,.7,1,.84,.72,.6,1,.7,.62,.5,1,.6,.55,.45,1,.5,.44,.42,1,.4,.37,.35,1];
function cg(){if(dg){ub(dg);for(var a=jb(kb),b=D[28](),c=1;c<b;c++)L("div",dg,Zc(a[3*c+2])),L("div",dg,a[3*c+1]+"%")}}window.waitingList=cg;let dg;var gg=()=>{if(m("waitList")){var a=45-Math.floor((Date.now()-eg)/1E3);0>a&&(a=0);cg.rb&&(cg.rb.textContent=fg(N(891),a));setTimeout(gg,1E3)}};
window.waitlistsetup=function(){let a=Xc("");a.id="waitList";a.parentNode.parentNode.style.background="#000";a.innerHTML="";O("span",a,68);cg.rb=L("span",a,"...","display: block; color: rgb(0, 255, 0); font-size: 12px; margin-top: 9px; font-variant: tabular-nums;");dg=L("div",a);L("button",m("waitList"),N(91)).onclick=fe;gg()};
function Rc(){if(Q||1!=g.nightcycle)c=new Float32Array([1,1,1,1]);else{var a=(.025*C.Z/C.Ra*24+C.Sa)%24,b=~~a;a-=b;vd&&(vd.style.backgroundPosition="0 -"+36*b+"px");var c=new Float32Array([bg[4*b],bg[4*b+1],bg[4*b+2],bg[4*b+3]]);b=(b+1)%24;c[0]+=(-c[0]+bg[4*b])*a;c[1]+=(-c[1]+bg[4*b+1])*a;c[2]+=(-c[2]+bg[4*b+2])*a;c[3]+=(-c[3]+bg[4*b+3])*a}b=c;E?xf.queue.writeBuffer(hg,0,b):(z.useProgram(X),z.uniform4fv(ig,b),z.useProgram(V),z.uniform4fv(jg,b))}var Ac=0,Bc=0,pf=0,hf=0,kf,mf,nf,rf,sf;
function kg(a,b,c){var d=Cc;if(1==g.unlimitedZoom||Q)Ac=-a,Bc=-b;else{var e=window.innerWidth,f=window.innerHeight,h=D[47](),k=Ja?0:d*l.R/32;a/=32;b/=32;var q=d*e/32;d=d*f/32;e=e/32*Y;f=f/32*Y;var t=a+.5*(e-q),r=b+.5*(f-d);e<h&&f<h&&(t<-k?a=.5*-(e-q)-k:t+q>h&&(a=h-q-(e-q)/2),0>r?b=.5*-(f-d):r+d>h&&(b=h-d-(f-d)/2));Ac=32*-a;Bc=32*-b}if(!c)D[25](0,0,0)}
function Te(a){if("touchmove"==a.type||"touchstart"==a.type)if(a.target==m("bigMap"))a=a.targetTouches[0];else return;var b=a.target==m("bigMap")?23:0,c=D[47](),d=a.pageX-(Re.x+b)*T;a=a.pageY-(Re.y+b)*T;var e=Re.width-2*b;b=Re.height-2*b;var f=lg.height*b/(32*c)*T;d-=lg.width*e/(32*c)*T*.5;d=Math.round(.5+d*c/e)/T;a=Math.round(.5+(a-.5*f)*c/b)/T;kg(32*d,32*a);0==Se&&document.removeEventListener("mousemove",Te)}var Bf=0,Af=0,uf,mg={};
function Fe(a){if(a&&!Q&&!Bf){let c=!1;if(!m("enterwindow")){var b=Xc(`
            <h2 id="sendMessageH2">${N(65)}</h2>
            <input id="msginputGame" />
           
            `,2,"",1);b.parentNode.parentNode.className+=" nobackdrop";b.id="enterwindow";c=!0;let d=L("button",b,"GIF");d.className="gif";d.onclick=()=>{R(m("enterwindow").parentNode.parentNode);ng()};L("p",b,`${N(405)} <label class="container" style="margin-left:6px;display:inline"><input id="teamchat" type="checkbox"><span class="checkmark"></span></label>`,"text-align:right;color:#c79d45")}b=m("enterwindow").parentNode.parentNode;""!=b.style.cssText||c?(Ja&&m("msgButton")&&(m("msgButton").style.filter=
"drop-shadow(0px 0px 2px #fff)"),b.style.cssText="",m("msginputGame").focus()):(og(),R(b),Ja&&m("msgButton")&&(m("msgButton").style.cssText=""))}if(Bf)D[32](13,a)}var jf=0,gf=0,qf=0,of=0,Be=0,lf=0,zf;document.oncontextmenu=function(a){return a&&"INPUT"==a.target.nodeName?!0:!1};
function pg(){if(!Q){m("attackmenu")&&(P("magicworkshopmenu"),P("tradingmenu"),P("attackmenu"),P("defencemenu"),P("levelmenu"),P("progressone"),P("manamenu"),P("manamenu1"),P("progressmana"),P("plavatar"),md.innerHTML="",hd.innerHTML="",id.innerHTML="",m("manamenu").innerHTML="",jd.innerHTML="",kd.innerHTML="",nd.innerHTML="",ld.value="",nd.maxLength="");Ja&&(m("delunit").style.display="none");for(let a=0;a<od.length;od[a++].innerHTML="");qg()}}window.menuDefect=pg;var rg;
function sg(a,b){tg&&(L("li",tg,a,"color:#"+b),tg.scrollTop=tg.scrollHeight)}window.lddsts=function(){m("msgs1").className="gameFinished";let a=L("button",document.body,"STATS","\n    position: fixed;\n    background: #000;\n    padding: 8px;\n    font-size: 20px;\n    width: 209px;\n    text-align: left;\n    border-left: 3px solid #00ff00 !important;\n    top: 66px;\n    right: 0px;\n    box-shadow: 0px 0px 20px #9c0000;"),b=ug(1);a.onclick=function(){b.parentNode.parentNode.style.display=""}};
function Xf(a,b,c){a=Math.round(a*10**b)/10**b;if(c)return a;a=a.toString().split(".");return a[0]+(a[1]&&"<strong>.</strong>"+a[1]||"")}function Yf(a,b){return 1E6<=a?Xf(a/1E6,1,b)+"M":1E5<=a?Xf(a/1E3,0,b)+"k":1E3<=a?Xf(a/1E3,1,b)+"k":a}function vg(a,b){let c;a?c=a&&wg[a]?wg[a].avatar||113:113:b&&(c=b==D[112]()?g.avatar||113:D[185](b));c||=113;return`nehhon/Q${c}.webp`}var xg;function yg(){var a=m("stbutts").children;for(let b=0;b<a.length;b++)a[b].className=""}var zg;
function Ag(a){yg();J(m("auxtab"));m("stats").style.display="table";a.className="a"}var Bg;function Pf(a,b){a.style.backgroundPositionY=b+"px"}
function Xe(a,b,c){a=L("div",a);let d=D[90]();a.id="bonustable";let e=hc();for(let k=0;k<d;k++){let q=D[199](k,b,!c);if(!q)continue;D[196](k);var f=L("div",a);f.dataset.title=N(W.name);Cg(f,W.D);f=L("div",a);let t={};for(let r=0;r<q;r+=2){let u=e[r];var h=e[r+1];t[h]||(t[h]=L("div",L("div",f,"<div>x"+h/100+"</div>",!b&&100>h||b&&100<h?"color:red":"")));h=L("div",t[h]);D[196](u);h.dataset.title=N(W.name);Cg(h,W.D)}}}
function We(a){let b=D[198](),c=hc(),d=L("table",a);d.id="unittable";var e=[{name:""},{y:18},{y:1},{y:3},{y:6},{y:13},{y:12},{y:17},{y:10},{name:N(559)},{name:N(560)},{name:N(561)},{name:N(562)}];a=e.length;var f=L("tr",L("thead",d));for(let k=0;k<e.length;k++){let q=L("td",f,e[k].name);e[k].y&&Pf(L("div",q),-20*e[k].y);q.onclick=()=>{var t=k,r=q,u,v=0;var w=!0;var A=1;for(x of r.parentNode.children)x.dataset.order&&(x.dataset.order="");for(p(A);w;){w=!1;var x=d.rows;for(u=1;u<x.length-1;u++){var y=
!1;var B=x[u].getElementsByTagName("TD")[t];var I=x[u+1].getElementsByTagName("TD")[t];if(0==A){if(B.X>I.X){y=!0;break}}else if(1==A&&B.X<I.X){y=!0;break}}y?(x[u].parentNode.insertBefore(x[u+1],x[u]),w=!0,v++):0==v&&1==A&&(A=0,w=!0)}r.dataset.order=A?"\u25b2":"\u25bc"}}e=L("tbody",d);for(f=0;f<b;f+=a){let k=L("tr",e);for(let q=0;q<a;q++){let t=L("td",k);var h=c[f+q];0==q?(D[196](h),h=N(W.name),t.dataset.title=h,Cg(t,W.D),t.X=h.charCodeAt(1)+256*h.charCodeAt(0)):(10==q&&(h/=10),t.X=h,t.innerHTML=h)}}}
function Dg(a,b,c){b=document.createElementNS("http://www.w3.org/2000/svg",b);for(let d in c)b.setAttribute(d,c[d]);a.appendChild(b);return b}
function Eg(a,b,c,d,e){var f=Fg;let h=b.length/c;var k=0;let q=1024/(h-1);var t=6*q,r=Math.ceil(70/t);for(var u=0;u<b.length;u++){var v=b[u];v>k&&(k=v)}u=1E3<k?100:10;u=(k=Math.ceil(k/u)*u)?633/k:0;v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.style.width="1204px";v.style.height="693px";v.setAttribute("viewBox","-90 -30 1204 693");v.setAttribute("width","100%");v.setAttribute("height","100%");a.appendChild(v);L("style",v,"\n.p>line{\n    stroke-width:2;\n    opacity:0.5;\n    pointer-events: none;\n}\n.p>line:hover{\n    opacity:0.5\n}\ncircle{\n    stroke-width:12;\n    stroke:#ffffff00;\n    r:1.5\n}\n.p>text{\n    display:none;\n    text-shadow:0px 0px 3px #000;\n    fill:#52ffba\n}\ntext{\n    stroke:none;\n    font-size:16px;\n}\n\ng:not(.op0) .p:hover > text{\n    display:block;\n}\n.op0{\n    opacity:.15;\n\n}\n.stk>.p>line{\n    stroke-width:3;\n    opacity:1\n}\n.stk>.p>circle{\n    r:1;\n    opacity:1\n}\n");
Dg(v,"line",{stroke:"#fff",x1:0,x2:0,y1:0,y2:633,"stroke-width":1,opacity:.75});Dg(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:633,y2:633,"stroke-width":1,opacity:.75});for(a=0;5>=a;a++){var w=633-126.6*a;a&&Dg(v,"line",{stroke:"#fff",x1:0,x2:1024,y1:w,y2:w,"stroke-width":1,opacity:.25});Dg(v,"text",{x:-8,y:w,fill:"#fff","text-anchor":"end","alignment-baseline":"middle"}).innerHTML=Yf(Math.round(a/5*k),1)}for(let y=1,B=Math.ceil(10*h/60);y<B;y++)k=y*t,a=0==y%r,Dg(v,"line",{stroke:"#fff",x1:k,x2:k,y1:0,
y2:633,"stroke-width":1,opacity:a?.25:.1}),a&&(Dg(v,"text",{x:k,y:655,fill:"#fff","text-anchor":"middle"}).innerHTML=y+":00");for(let y=0;y<c;y++)for(t=Dg(v,"g"),r=f[y],t.onmouseover=()=>{Fg[y].style.color="#0f0"},t.onmouseout=()=>{Fg[y].style.color=""},r.cb=t,r.ma&&t.setAttribute("class","op0"),r=0;r<h&&r<e;r++){k=y*h+r;a=633-b[k]*u;w=r*q;let B=Dg(t,"g");B.setAttribute("class","p");var A=d[y*Bg+Bg-1],x=A>>16&255;let I=A>>8&255;A&=255;x||=1;I||=1;A||=1;let H=(x+I+A)/3;90>H&&(x*=90/H,I*=90/H,A*=90/
H);255<x&&(x=255);255<I&&(I=255);255<A&&(A=255);x=`rgb(${x},${I},${A})`;Dg(B,"text",{x:w,y:a-15,"text-anchor":"middle"}).innerHTML=Math.round(b[k]);Dg(B,"circle",{cx:w,cy:a,fill:x,opacity:r%6?0:1});r<h-1&&r<e-1&&Dg(B,"line",{x1:w,x2:w+q,y1:a,y2:633-b[k+1]*u,stroke:x})}}
function ug(a,b){b||=NaN;Bg=b?50:61+(Gg?2:0);let c=Gg||b;var d=Bg;const e=b&&b.J.length+1||D[28]();xg=b.data||new fc(D[184](d),e*d);var f=b.data||jb(xg),h=Gb("",1,"",a);h.id="stsp";h.parentNode.style.cssText="vertical-align:top;padding-top:56px";a&&R(h.parentNode.parentNode);a=b&&b.J[0].id||f[d-3];var k=b&&b.J[0].id||f[d-5],q=L("div",h);L("img",q,"","display:inline-block;vertical-align:middle;height:96px;margin-right:16px;box-shadow:0px 0px 78px red;border:1px solid #ff000070").src=b&&`nehhon/Q${b.J[0].Sb}.webp`||
vg(a,k);k=L("div",q,"","display:inline-block;vertical-align:middle;");k.id="MVPspan";L("span",k,"MVP","display:block;font-size:20px;color:#ffffffb3;");L("span",k,b?Hg(b.J[0].mb,b.J[0].name,b.J[0].role?Ig[b.J[0].role-1]:b.id):Zc(a,f[d-2]),"font-size:30px;text-shadow:0px 0px 20px red");a=L("div",h);a.id="stbutts";b||(L("button",a,N(466)).onclick=function(){Jg(this,8,1)});b||(L("button",a,N(467)).onclick=function(){Jg(this,8,0,1)});b||(L("button",a,N(465)).onclick=function(){Jg(this,9,0,1)});L("br",
a);k=L("button",a,N(468));k.className="a";k.onclick=function(){Ag(this);m("stats").className=c?"r":"nr"};L("button",a,N(470)).onclick=function(){Ag(this);m("stats").className=c?"ra":"a"};L("button",a,N(470)+" 2").onclick=function(){Ag(this);m("stats").className=c?"rb":"b"};b||(L("button",a,N(522)).onclick=function(){Kg(this)},L("button",a,N(469)).onclick=function(){Jg(this,7,0,0,1,!0)},L("button",a,N(521)).onclick=function(){Jg(this,7,0,1,0,!0)},L("button",a,N(452)).onclick=function(){Jg(this,6,1,
1)},L("button",a,N(453)).onclick=function(){Jg(this,10,1,0)},L("button",a,N(464)).onclick=function(){Jg(this,9,1)});a=L("table",h);a.id="stats";a.className=c?"r":"nr";var t=L("thead",a);k=L("tbody",a);var r=[{name:478},{name:21},{name:454},{name:455,Ga:1},{name:452,sub:[{name:58},{name:59}]},{name:453,Ga:1,sub:[{name:58},{name:59}]},{h:"icons2.webp",y:-10,$:20,title:881},{h:"gold.gif",sub:[{h:"gold.gif"},{h:"trade.gif"}]},{h:"wood.gif",sub:[{h:"wood.gif"},{h:"trade.gif"}]},{h:"food.gif",sub:[{h:"food.gif"},
{h:"milk.gif"},{h:"food1.gif"},{h:"fish.gif"},{h:"trade.gif"}]},{h:"stone.gif",sub:[{h:"stone.gif"},{h:"trade.gif"}]},{h:"allicons.png",y:96,$:48,title:477},{h:"allicons.png",y:95,$:48,title:232},{h:"icons2.webp",y:-5,$:20,title:471},{h:"icons2.webp",y:-6,$:20,title:476},{h:"icons2.webp",y:4,$:20,title:479},{name:464},{name:474},{name:475,Ga:1},{name:472},{h:"sgold.webp",title:473},{h:"swood.webp",title:473},{h:"sfood.webp",title:473},{h:"sstone.webp",title:473},{h:"ngold.webp",title:882},{h:"nwood.webp",
title:882},{h:"nfood.webp",title:882},{h:"nstone.webp",title:882},{h:"rgold.webp",title:883},{h:"rwood.webp",title:883},{h:"rfood.webp",title:883},{h:"rstone.webp",title:883}];c&&(r.unshift({name:732}),r.unshift({name:530}));q={};a={};var u=L("tr",t);t=L("tr",t);L("th",u,"","background:none;border:none;min-width:0px;").rowSpan=2;L("th",u,"","background:none;border:none").rowSpan=2;L("th",u,"","background:none").rowSpan=2;for(var v=0;v<r.length;v++){var w=r[v],A=w.name&&N(w.name).split(" ").join("\n")||
w.y&&`<span style="background:url(nehhon/${w.h}) 0px ${w.y*w.$}px;width:${w.w||w.$}px;height:${w.$}px"></span>`||`<img src="${"nehhon/"+w.h}">`;w.Ga&&(a[u.children.length]=1);A=L("th",u,A);2>v&&c&&(L("div",A,"?","position:absolute;right:0px;left:0px;font-size:9px").dataset.title=v?N(734):N(733));w.title&&(A.dataset.title=N(w.title));if(w.sub){let y=L("td",t,"<- ->");y.onclick=()=>{var B=y;const I=m("stats").children[0].children[0].children;let H=I.length;const K=m("stats").children[1].getElementsByTagName("td");
let U=B.da?"":"none";B.innerHTML=B.da&&"-> &nbsp; <-"||"<- ->";B.colSpan=B.da?B.qb-1:1;let ca=B.pc;for(let qa=0;qa<B.qb;qa++){qa?I[ca+qa].style.display=U:B.da?R(I[ca+qa]):I[ca+qa].style.display="";for(let Ga=0;Ga<e-1;Ga++)qa?K[Ga*H+ca+qa].style.display=U:B.da?R(K[Ga*H+ca+qa]):K[Ga*H+ca+qa].style.display=""}B.da=!B.da};y.pc=u.children.length-1;y.qb=w.sub.length+1;y.da=1;y.Bc=A;for(A=0;A<w.sub.length;A++){var x=w.sub[A];q[u.children.length+-3]=1;w.Ga&&(a[u.children.length]=1);L("th",u,x.name&&N(x.name)||
`<img src="${"nehhon/"+x.h}">`,"display:none")}}else A.rowSpan=2}r=1+(c?2:0);for(t=0;t<e-1;t++)for(v=L("tr",k),L("td",v,`<p>${t+1}</p>`),L("td",v,`<div style="background:${$c(b?b.J[t].color:f[t*d+d-1])}"></div>`+(b?Hg(b.J[t].mb,b.J[t].name,b.J[t].role?Ig[b.J[t].role-1]:b.J[t].id):Zc(f[t*d+d-3],f[t*d+d-2]))).className=f[b?t*d+d-1:t*d+d-14]?"winner":"loser",L("td",v,`<aside style="background-position-y:-${20*(b?b.J[t].race:f[t*d+d-4])}px"></aside>`).className="stsrace",w=0;w<u.children.length+-3;w++)A=
Yf(f[w+t*d]),u.children[w- -3].dataset.title==N(881)&&(A=Nc(f[w+t*d])),w!=r||A||(A="\ud83d\udec7"),x=L("td",v,A,q[w]&&"display:none"||""),w==r&&(x.style.color=f[w+t*d]==b.wc||!b&&D[256](f[w+t*d])?"#0f0":"#f00"),c&&!w&&(x.style.color="#0f0"),x.Fb=f[w+t*d],f[w+t*d]!=A&&w!=r&&(x.dataset.title=x.Fb);b=m("stats").children[0].children[0].children.length;d=e-1;f=m("stats").children[1].getElementsByTagName("td");for(k=3+(c?1:0);k<b;k++){if(c&&6==k||!c&&4==k)continue;q=0;let y,B;u=Infinity;for(r=0;r<d;r++)t=
f[r*b+k],v=t.Fb,v>q&&(q=v,y=t),v<u&&(u=v,B=t);r=a[k];q&&(y.style.background=r?"#ff000040":"#00ff0040");(u||q)&&y!=B&&(B.style.background=r?"#00ff0040":"#ff000040")}return h}var Fg;
function Kg(a){yg();J(m("auxtab"));var b=L("div",m("stats").parentNode,"","width:1250px");b.id="auxtab";P("stats");a.className="a";let c=jb(xg),d=D[28]()-1;var e=[N(478),N(464),N(454),N(455),"Gold gathered","Wood gathered","Food gathered","Stone gathered","Population","Peasants",N(477),N(16),N(17),N(18),N(19)];a=L("div",b,"","white-space:break-spaces;margin-top:30px;text-align:left");let f=L("select",b,"","margin:auto;margin-top:15px;display:block;text-transform:uppercase");var h=L("span",b,"","float:right;margin-top:-25px;");
let k=c[0*Bg+Bg-13]/15,q=Math.floor(k/6),t=Lg(h,k);t.oninput=function(){let v=parseInt(this.value);10*v/60>=q&&(v=k-1);this.H.innerHTML=Oc(1E4*v)};h=60*q/10;t.max=h;t.min=6;t.step=6;t.value=h;t.oninput();h=0;for(var r of e)L("option",f,r).value=h,h++;for(r=0;r<d;r++)e=L("span",a,Zc(c[r*Bg+Bg-3],c[r*Bg+Bg-2]),"cursor:url(nehhon/hand.gif),default;display:inline-block;background:#ffffff14;padding:2px 4px 2px 6px;margin-right:7px;margin-bottom:7px;border-left:4px solid "+$c(c[r*Bg+Bg-1])),e.onclick=Mg,
e.onmouseenter=Ng,e.onmouseout=Og;let u=L("div",b,"","text-align:center");Fg=a.children;f.onchange=function(){let v=parseInt(this.value),w=parseInt(t.value)+1;t.value==t.max&&(w=k);let A=new Uint32Array(w*d);for(let x=0;x<d;x++){let y=jb(new fc(c[x*Bg+Bg-11],15*w));for(let B=0;B<w;B++)A[B+x*w]=y[15*B+v]}u.innerHTML="";Eg(u,A,d,c,k)};f.onchange();t.addEventListener("change",()=>f.onchange());for(b=0;b<d;b++)if(3<c[b*Bg+Bg-12]&&c[b*Bg+Bg-5]!=D[112]())Fg[b].onclick()}
function Ng(){this.cb.setAttribute("class","stk")}function Og(){this.cb.setAttribute("class",this.ma?"op0":"")}function Mg(a){this.ma=!this.ma;this.style.opacity=this.ma?"0.3":"";this.cb.setAttribute("class",this.ma?"op0":"");if(a)this.onmouseenter()}
function Jg(a,b,c,d,e,f){let h=8!=b&&!f&&6!=b&&10!=b,k=D[90]();zg||=1200;var q=jb(xg);yg();J(m("auxtab"));var t=L("table",m("stats").parentNode,"","width:"+zg+"px"),r=L("tbody",t);r.className="tbl2";t.id="auxtab";t=m("stats").children[1].getElementsByTagName("tr");for(var u=0;u<t.length;u++){var v=L("tr",r);L("img",L("td",v)).src=vg(q[u*Bg+Bg-3],q[u*Bg+Bg-5]);v.appendChild(t[u].children[1].cloneNode(1))}q=r.children;a.className="a";P("stats");a=jb(xg);for(r=0;r<q.length;r++){t=jb(new fc(a[r*Bg+Bg-
b],k));u=L("td",q[r]);v=0;var w=void 0;let y={};do{var A=-1;if(f)for(w=0;w<k;w++)t[w]&&(t[w]<t[A]||0>A)&&!y[w]&&(A=w);else for(w=0;w<k;w++)(t[w]>t[A]||0>A)&&!y[w]&&(A=w);w=t[A];let B=t[A];if(!B)break;y[A]=1;var x=D[191](A,c,d,e);if(x){let I=f?Oc(B):Yf(B);x=L("span",u,`<span>${I}</span>`,(0>x?"background:url(nehhon/iconunits.webp);":"")+`background-position-y:${x}px`);if(f){if(A=D[192](A))x.dataset.title=I+" -> "+Oc(B+A)}else I!=B&&(x.dataset.title=B);h&&(v+=B)}}while(w);h&&L("td",q[r],"\u03a3 = "+
v,"color:var(--color1)")}}var Pg,Qg;window.popAlert=function(a){if(4==a){if(Pg&&8E3>Date.now()-Pg)return;Pg=Date.now()}else{if(Qg&&30>Date.now()-Qg)return;Qg=Date.now()}if(a=m(["gold","wood","food","stone","pop"][a]))a=a.getBoundingClientRect(),a=L("div",document.body,"",`left:${a.x+a.width/2}px;top:${a.y}px;`),a.className="alertpop",setTimeout(J,3E3,a)};
window.dmgAlert=function(a,b){var c=l.U,d=gd.getBoundingClientRect().top;rc("attack");Ja&&(Ee||(setTimeout(function(){m("minimapb").style.cssText=""},8E3),m("minimapb").style.cssText="animation:dmganimdrop .15s alternate infinite;"),Rg=Sg=c=Tg(),d=(window.innerHeight-c)/2,c=(window.innerWidth-c)/2,"vibrate"in navigator&&window.navigator.vibrate([200,50,200,50,200]),p(c,d));const e=D[47]();a=L("div",document.body,"",`left:${~~(a*Sg/e)+c}px;top:${~~(b*Sg/e)+d}px`);a.className="alertdmg";Ja&&!Ee&&R(a);
setTimeout(J,16E3,a)};window.locationAlert=function(a,b,c,d,e){const f=D[47]();if(!(0>a||0>b||a>=f||b>=f||9<document.body.getElementsByClassName("alertloc").length||Ja)){rc("chat%20location");var h=l.U,k=gd.getBoundingClientRect().top;Ug(0,1,c,0,d,e);a=L("div",document.body,"",`left:${~~(a*Sg/f)+h}px;top:${~~(b*Sg/f)+k}px`);a.className="alertloc";setTimeout(J,1E4,a)}};document.onkeydown=function(a){return a.ctrlKey&&a.shiftKey?!1:!(-1<[116,115,123].indexOf(a.keyCode))};
const Vg=[9,112,113,114,115,116,117,118,119,120,121,123];function Wg(){for(var a=Object.keys(mg),b=0;b<a.length;b++)mg[a[b]]&&Xg({keyCode:a[b],key:mg[a[b]]})}var Yg=(a,b)=>{if(a&&(a=ef.basic.indexOf(a.toUpperCase()),-1<a))return Ff[a].m(b),!0};
function Zg(a){var b=a.keyCode,c=a.target==m("msginputGame");if(!(a.key&&$g&&ef.basic[8]!=a.key.toUpperCase()||"INPUT"==a.target.tagName||"TEXTAREA"==a.target.tagName||"true"==a.target.contentEditable)||c)if(c&&9==b&&(m("teamchat").checked=!m("teamchat").checked),(a.ctrlKey&&!c||a.altKey||0<=Vg.indexOf(b))&&a.preventDefault(),!(!C.s||13!=b&&m("enterwindow")&&"displayblock"==m("enterwindow").className||c&&13!=b||(mg[b]=a.key,Yg(a.key,1)))){D[272]();a=a.key.toUpperCase();for(c=0;3>c;c++)for(let d=0;d<
Uf.length;d++){let e=ef[Uf[d]];if(e&&e[c]==a)return D[15](d,2147483647)}48<=b&&57>=b?D&&D[32](b,!0):65<=b&&90>=b&&81!=b&&D&&D[32](b,!0)}}let Uf;window.shdwn=function(a,b){Uf=gc(a,b)};function Xg(a){var b=a.keyCode;a.key&&$g&&ef.basic[8]!=a.key.toUpperCase()||!mg[b]||(mg[b]=0,(a.ctrlKey||a.altKey||0<=Vg.indexOf(b))&&a.preventDefault(),Yg(a.key,0)||(48<=b&&57>=b?D&&D[32](b,!1):65<=b&&90>=b&&81!=b&&D&&D[32](b,!1)))}window.addEventListener("blur",function(){if(D&&D[32])D[32](16,!1)});
var ah,bh,ch,dh,eh=!1;function fh(a,b){gh||(Ac=ch-(ah-a)*Cc,Bc=dh-(bh-b)*Cc,kg(-Ac,-Bc),hh())}var gh,ih,kh,lh,mh,nh;function oh(a,b){return 30>Math.sqrt((a-ah)**2+(b-bh)**2)}
function ph(a){if(a.target==lg){qh=rh=hf=pf=0;var b=a.changedTouches[0],c=b.pageX;b=b.pageY;1==a.touches.length&&lh&&300>Date.now()-lh&&oh(c,b)?(sh(a.pageX,a.pageY),D[21](c,b,0),mh=!0):(lh=Date.now(),1<a.touches.length?clearTimeout(nh):D[168]()||(clearTimeout(nh),nh=setTimeout(D[22],350,c,b,2,1,0,0,1),p(nh)),ch=Ac,dh=Bc,ah=c,bh=b,a.preventDefault())}}var th,uh,vh,rh,qh;
function wh(a){var b=a.touches[0].pageX,c=a.touches[0].pageY;if(a.target==lg){var d=D[168]();oh(b,c)||clearTimeout(nh);if(mh||d)return D[25](b,c,1);2==a.touches.length?(b=a.touches,c=Math.sqrt((b[0].pageX-b[1].pageX)**2+(b[0].pageY-b[1].pageY)**2),ih?tf(kh*ih/c,(b[0].pageX+b[1].pageX)/2,(b[0].pageY+b[1].pageY)/2,1):(ih=c,kh=Cc,gh=!0)):(a=Date.now()-vh,rh=-(th-b)/a,qh=-(uh-c)/a,th=b,uh=c,vh=Date.now(),fh(b,c))}}
function xh(a){if(a.target==lg){var b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY;clearTimeout(nh);if(D[168]())D[25](b,c,1);var d=oh(b,c)&&300>Date.now()-lh;if(mh||d||D[168]())rg=!1,D[22](b,c,2*a.touches.length,mh?1:2),mh=!1;ih=void 0;0==a.touches.length?Date.now()-vh&&(pf=rh||0,hf=qh||0,sf=Ac,nf=Bc,mf=rf=Date.now(),kf=1):(b=a.touches[0].pageX,a=a.touches[0].pageY,ch=Ac,dh=Bc,ah=b,bh=a);gh=!1}}
function yh(a,b){if(!Ja){var c=window.innerWidth,d=window.innerHeight,e=a.pageX,f=a.pageY;if(a.target==lg||b){if(eh)return fh(e,f);zh(a.pageX,a.pageY);D[25](a.pageX,a.pageY,1)}if(screen.height-10<=d&&1==g.scrollmouse&&!$g){if(1.2===Math.abs(pf)||0===pf)pf||(rf=Date.now(),sf=Ac),kf=0,pf=1.2*((10>e)-(e>c-10));if(1.2===Math.abs(hf)||0===hf)hf||(mf=Date.now(),nf=Bc),kf=0,hf=1.2*((10>f)-(f>d-10))}}}
var sh=(a,b)=>{E&&(Ah=[a,b],a=Bh(a,b),rg=!0,xf.queue.writeBuffer(Ch,0,new Float32Array([a.x,a.y,a.x,a.y])))},zh=(a,b)=>{E&&rg&&(Ah=[a,b],a=Bh(a,b),xf.queue.writeBuffer(Ch,8,new Float32Array([a.x,a.y])))},Ah,Dh;function Eh(a){if(a.target!=lg)return Dh=0;if(1==a.button&&a.pageX>l.R){eh=!0;var b=a.pageX;a=a.pageY;ch=Ac;dh=Bc;ah=b;bh=a}else eh=!1,0==a.button&&sh(a.pageX,a.pageY),D[21](a.pageX,a.pageY,a.button),Dh=1}
function Fh(a){2<a.button&&a.preventDefault();if(a.target==lg||Dh)if(eh)eh=!1;else return rg=!1,D[22](a.pageX,a.pageY,a.button,0,!1,a.shiftKey,a.ctrlKey,a.altKey)}window.addEventListener("mouseup",function(a){2<a.button&&a.preventDefault()});var Gh=!1;window.self!==window.top&&window.addEventListener("mousedown",function(){Gh||(Gh=!0,Hh())});window.fstordprop=(a,b,c,d,e,f,h,k)=>{Kf={icon:a,name:b,pb:c,Ia:d,unit:e,type:f,Kb:h,nc:k}};
var Kf,Lf=(a,b)=>{let c=L("div",a);c.className="dataOrder";Pf(c,48*Kf.icon);Kf.unit&&!b&&(L("span",a,"->"),a=L("div",a),a.className="dataIcon",Pf(a,48*Kf.unit))};function Ih(a,b,c){D[260](a);if(!Kf.Ia){var d=L("div",b);b=L("button",d,"\u00d7");b.className="closeIcon";b.onclick=()=>{c.splice(c.indexOf(a),1);J(d)};Lf(d);L("span",d,(Kf.name&&N(Kf.name)||"")+(Kf.pb&&" - "+N(Kf.pb)||""))}}
var Mf=[842,843,689,847],Jh=(a,b,c)=>{b=L("div",b);a=D[193](a);L("span",b,c,"font-size:23px;color:#"+("-"==c?"f00":"0f0"));c=L("div",b);Pf(c,a);c.className="dataIcon"},Kh=(a,b,c)=>{D[260](a);Kf.Ia||((a=Mf[Kf.type]||"")&&(a=N(a)+" -> "),b=L("div",b,`<span style="font-size:23px">${c}</span> `+(Kf.name&&a+N(Kf.name)||""),`filter:hue-rotate(${"+"==c?90:-45}deg);margin:7px 0px`),Lf(b,1))};
function Lh(a,b){var c=Mh();c=L("div",c);c.className="ordermod";let d=L("div",c),e=a.j[b];for(let f of e)Ih(f,d,e);a=L("button",c);a.className="sum";a.onclick=()=>{let f=Mh();var h=L("div",f);h.className="ordermod ord2";h=L("div",h);for(let q=0,t=D[261]();q<t;q++){D[260](q);if(Kf.Ia)continue;let r=document.createElement("div");var k=Mf[Kf.type]||"";k&&=N(k)+" -> ";k=Kf.name&&k+N(Kf.name)||"";Nf(r,h,k||"zz");Lf(r);L("span",r,k);r.onclick=()=>{e.push(q);Ih(q,d,e);Hb(f)}}}}
var Nh=(a,b,c,d)=>{if(c!=b){D[196](a);a=L("div",d);d=L("div",a);d.className="dataIcon";Pf(d,W.D);var e=d=255,f=255;b>c&&(d=255/(b/c),f=255/(b/c));b<c&&(e=255/(c/b),f=255/(c/b));0>d&&(d=0);0>e&&(e=0);0>f&&(f=0);a=L("div",a);L("span",a,c+"%","color:#fff");L("span",a,"->","color:var(--color1);margin:0px 6px");L("span",a,b+"%",`color:rgb(${d},${e},${f})`)}};
function Oh(a,b,c,d){D[196](b);let e=L("div",a);a=L("button",e,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(Ph(c,b),2);J(e)};a=L("div",e);a.className="dataIcon";Pf(a,W.D);O("div",e,W.name);a=L("div",e);let f=M("input",a,"width:58px");f.oninput=Qh;f.max=2**32-1;f.min=0;f.type="number";f.value=d;f.onchange=()=>{c[Ph(c,b)+1]=S(f)};L("span",a," %")}var Mh=()=>{let a=Xc("",2);a.parentNode.parentNode.style.top=window.scrollY/T+"px";return a};
function Rh(a,b){b=L("div",b);b.className="mddunit bonusedit";p(a);let c=L("div",b);for(var d of a)Sh(c,d,a);d=L("button",b);d.className="sum";d.onclick=()=>we(e=>{Sh(c,e,a);a.push(e)})}let Th=a=>{a=Sf(0,0,a);let b=[];for(let c=0;c<a.length;c++)a[c]&&b.push({name:a[c],id:c});b.sort(Wd);return b};
function Uh(a){a=L("div",a);a.id="consts";let b=Vh[3][0].data,c=Th();for(let d=0;d<c.length;d++){let e=c[d],f=b[e.id],h=L("input",a);h.value=f;h.type="number";h.onchange=()=>{b[e.id]=S(h)};L("div",a,e.name)}}function Sh(a,b,c){D[196](b);let d=L("div",a);a=L("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{c.splice(c.indexOf(b),1);J(d)};a=L("div",d);a.className="dataIcon";Pf(a,W.D);O("div",d,W.name)}
function Wh(a,b){let c=a.j[b];a=Mh();a=L("div",a);a.className="bonusedit";p(c);let d=L("div",a);for(b=0;b<c.length;b+=2)Oh(d,c[b],c,c[b+1]);a=L("button",a);a.className="sum";a.onclick=()=>we(e=>{Oh(d,e,c,100);c.push(e,100)})}
function Xh(a,b){p(a,b);b=Mh();b=L("div",b);b.className="buildgrid";p(a);let c=a.data[16],d=a.data[17],e=a.j[18];p(c,d);b.style.gridTemplateColumns=`repeat(${c},auto)`;for(let f=0;f<c*d;f++){let h=e[f],k=M("div",b,"background:#"+(h?"ff0000c0":"00ff00c0"));k.onmousedown=()=>{h=!h;k.style.background="#"+(h?"ff0000c0":"00ff00c0");e[f]=h}}}
var Sf=(a,b,c)=>[fg(N(771),N(16)),fg(N(771),N(17)),fg(N(771),N(18)),fg(N(771),N(19)),!c&&(!Q||a)&&(a&&" "||"")+N(42)+(b&&" (%)"||""),N(772)+" (%)",N(773),N(774),N(775),N(776),N(241)+" - "+N(561),N(377)+" - "+N(561),N(369)+" - "+N(561),N(364)+" - "+N(561),N(366)+" - "+N(561),N(370)+" - "+N(561),N(372)+" - "+N(561),N(367)+" - "+N(561),N(379)+" - "+N(561),N(378)+" - "+N(561),N(380)+" - "+N(561),N(777),N(778),N(779),void 0,N(363)+" - "+N(561),void 0,void 0,N(373)+" - "+N(561),N(780),void 0,N(368)+" - "+
N(561),N(375)+" - "+N(561),N(371)+" - "+N(561),N(374)+" - "+N(561),N(365)+" - "+N(561),void 0,void 0,a&&N(11)||void 0,N(377)+" - "+N(782),N(781),N(377)+" - "+N(383),N(377)+" - "+N(786),N(799),N(785),N(376)+" - "+N(383),N(364)+" - "+N(383),N(372)+" - "+N(383),N(366)+" - "+N(383),N(364)+" - "+N(782),N(364)+" - "+N(784),N(378)+" - "+N(784),N(787),N(378)+" - "+N(786),N(364)+" - "+N(786),N(366)+" - "+N(786),void 0,void 0,void 0,N(380)+" - "+N(786),N(372)+" - "+N(784),N(369)+" - "+N(383),N(370)+" - "+N(383),
N(801),N(802),void 0,N(788),N(363)+" - "+N(383),N(368)+" - "+N(383),N(371)+" - "+N(383),N(374)+" - "+N(383),N(375)+" - "+N(383),N(365)+" - "+N(782),N(365)+" - "+N(786),N(365)+" - "+N(383),N(380)+" - "+N(383),N(378)+" - "+N(383),N(379)+" - "+N(383),N(367)+" - "+N(383),N(800)+" - "+N(383),N(373)+" - "+N(383),N(800)+" - "+N(784),N(790),N(791),N(792),N(793),N(794),N(795),N(796),N(797),N(798),N(374)+" - "+N(782),N(416)+" - "+N(383),N(363)+" - "+N(784),N(363)+" - "+N(825),N(363)+" - "+N(782),N(363)+" - "+
N(786),N(826),N(827),N(828),N(829),N(830)],Zh=(a,b,c)=>{c=L("div",c);L("span",c,"+"+a,"color:#fff");L("span",c,"->","color:var(--color1);margin:0px 6px");L("span",c,"+"+b,"color:"+Yh(a,b))},Yh=(a,b)=>{let c=255,d=255,e=255;b>a&&(c=255/(b/a),e=255/(b/a));b<a&&(d=255/(a/b),e=255/(a/b));0>c&&(c=0);0>d&&(d=0);0>e&&(e=0);return`rgb(${c},${d},${e})`};
function $h(a,b){let c=a.data;var d=c[1];if(5==d)return Lh(a,4);var e=a.j[b];b=Mh();b=L("div",b);b.className="techcf";p(e);if(0==d){ai(b,c[10],Sf(),k=>{p(k);c[10]=k});L("span",b,"+");let h=L("input",b);h.value=c[12];h.type="number";h.onchange=()=>c[12]=S(h)}else{if(1==d||2==d){var f=L("div",b);e=L("div",f);f.className="unitProps";f=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let h of f){M("div",e,`background:url(nehhon/icons2.webp) 0px ${-20*h.h}px;width:20px;height:20px`);
f=L("div",e,"+");let k=L("input",f);k.value=c[h.id];k.type="number";k.onchange=()=>c[h.id]=S(k);2==d&&L("span",f," %")}}else if(3==d){d=M("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=M("input",d);h.value=c[12];h.type="number";h.onchange=()=>c[12]=S(h);L("span",d,"%")}else{if(4==d){D[196](c[12]);a=M("div",b,"display:flex;justify-content:center;gap:3px;align-items:center");let h=M("div",a,"margin-right:8px");h.className="dataIcon";Pf(h,W.D);let k=O("div",a,W.name);
h.onclick=()=>we(q=>{D[196](q);c[12]=q;Pf(h,W.D);k.textContent=N(W.name)});return}if(333==d)for(d=M("div",b,"display:flex;gap:10px;align-items:center"),e=0;4>e;e++){bd(d,e);let h=2+e,k=M("input",d,"margin-right:8px");k.value=c[h];k.type="number";k.onchange=()=>c[h]=S(k)}}Rh(a.j[8],b)}}
function bi(a,b){let c=a.j[b];a=Mh();O("button",a,622,"margin-right:5px;margin-bottom:5px;color:var(--color1);padding:5px").onclick=()=>{for(let k of d.children){let q=k.children[2].children[0];if(!q.checked)q.onclick()}};O("button",a,623,"color:var(--color1);padding:5px").onclick=()=>{for(let k of d.children){let q=k.children[2].children[0];if(q.checked)q.onclick()}};let d=L("div",a);d.className="tchgrid cnttkk";a=D[90]();p(c);for(b=0;3>b;b++)for(let k=0;k<a;k++){var e=D[194](k,!b,1==b,2==b);if(e){var f=
-1<c.indexOf(k);let q=document.createElement("div");var h=N(D[89](k));Nf(q,d,b+h,f);L("div",q,h);h=L("div",q);Pf(h,e);h.className="dataIcon";e=M("div",q,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");f=se(e,t=>{t?c.push(k):c.splice(c.indexOf(k),1)},f);h.onclick=f.onclick}}}
function ci(a){if(Vh){var b=[60,55,23,155,0,0,0,0],c=[],d=2*b.length;for(var e of Vh){c.push(d,e.length);for(var f of e){d+=f.data.length;for(var h in f.j)d+=f.j[h].length,f.data[h]=f.j[h].length}}c.push(0,0,0,0,0,0,0,0);d=a?new Uint32Array(d):gc(D[265](d),d);d.set(c);p(c);for(e=0;e<b.length;e++)if(Vh[e]){f=Vh[e];h=b[e];let q=c[2*e],t=q+h*f.length;for(var k of f){d.set(k.data,q);q+=h;for(let r in k.j)d.set(k.j[r],t),t+=k.j[r].length}}if(a){a=new Uint8Array(d.buffer);b=4*d.length;c=D[79](b);c=di(c,
b);for(k=0;k<b;k++)c[k]=a[k+0];c=D[80]();a=D[81]();a=di(c,a);b=new Blob([new Uint32Array([d.length]),a.slice(0)],{type:"application/octet-binary"});Jf(b,"tzared.tzmod");p(a)}p(d)}}
var ei=()=>[[{name:""},{y:18},{y:1},{y:3},{y:13},{y:17},{y:12},{y:16},{y:6},{y:10},{name:559},{name:824},{name:561},{name:562},{name:739,ia:1,T:1},{name:740},{name:741,j:1,click:Lh},{name:742},{name:743,select:[0,N(757),1,N(758),2,N(759)]},{name:744,select:[1,"1x1",2,"2x2",3,"3x3",4,"4x4"]},{T:1,name:745,select:[0,N(16),1,N(17),2,N(18),3,N(19),4,N(754),55,N(677)]},{T:1,name:746,select:[0,N(16),1,N(17),2,N(18),3,N(19),55,N(677)]},{name:747,T:1},{name:748},{name:749,select:[0,N(755),1,N(756),2,N(811)]},
{name:726},{name:750,j:1,click:bi,ia:1},{name:751},{name:752,select:[0,N(46),1,N(45)],T:1},{name:753},{name:738,j:1,click:Wh},{name:804},{name:821},{name:812,v:1},{name:818,v:1},{name:819,v:1},{name:820,v:1},{name:823,v:1},{o:264,F:1},{o:99,F:1},{o:25,F:1},{o:159,F:1},{o:219,F:1},{o:263,F:1},{o:78,F:1},{o:28,F:1},{o:217,v:1},{o:77,v:1},{o:76,v:1},{o:87,v:1},{o:23,v:1},{o:128,v:1},{o:32,v:1},{name:805,v:1}],[{name:""},{y:18},{y:13},{y:17},{y:12},{y:16},{y:10},{name:741,j:1,click:Lh},{y:1},{name:559},
{name:824},{name:561},{name:739,ia:1,T:1},{name:740},{name:742},{name:743,select:[0,N(757),1,N(758),2,N(759)]},{name:760,ya:1,min:1},{name:761,ya:1,min:1},{name:762,j:1,click:Xh},{name:745,select:[0,N(16),1,N(17),2,N(18),3,N(19),4,N(754),55,N(677)]},{name:746,select:[0,N(16),1,N(17),2,N(18),3,N(19),55,N(677)]},{name:747,T:1},{name:748},{name:749,select:[0,N(755),1,N(756),2,N(811)]},{name:726},{name:822},{name:750,j:1,click:bi,ia:1},{name:751},{name:752,select:[0,N(46),1,N(45)],T:1},{name:738,j:1,
click:Wh},{name:804},{name:821},{name:22,v:1},{name:812,v:1},{name:818,v:1,T:1},{name:823,v:1},{o:264,F:1},{o:99,F:1},{o:25,F:1},{o:159,F:1},{o:219,F:1},{o:263,F:1},{o:78,F:1},{o:28,F:1},{o:217,v:1},{o:77,v:1},{o:76,v:1},{name:805,v:1}],[{name:""},{name:620,click:$h,select:[0,N(764),1,N(765),2,N(766),3,N(767),4,N(768),5,N(769)]},{y:13},{y:10},{name:770,j:1,click:Lh},{y:17},{y:12},{y:16},{T:1,j:1},{name:805,v:1}]];window.shmdchngs=()=>{pe(1)};
function pe(a){let b=Xc("",1);b.id="mdd";fi();let c=ei();var d=[{Ba:58,click:()=>{gi(0,h,c)}},{Ba:59,click:()=>{gi(1,h,c)}},{Ba:469,click:()=>{gi(2,h,c)}},{Ba:470,click:()=>{Uh(h)}},{Ba:874,click:()=>{var k=Vh,q=hi,t=ei();let r=L("div",h);r.id="modchanges";for(var u=0;3>u;u++){var v=q[u],w=k[u],A=t[u];for(let db=0;db<w.length;db++){var x=void 0;let za=w[db].data,Eb=v[db].data;for(let fa=0;fa<A.length;fa++)if(!(1==u&&21==fa||!u&&22==fa)){var y=za[fa],B=Eb[fa],I=w[db].data[0],H=A[fa];if(H.j){var K=
!1,U=v[db].j[fa],ca=w[db].j[fa];if(16==fa||8==fa||26==fa||7==fa||4==fa||8==fa){for(let la of ca)0>U.indexOf(la)&&(K=!0);for(let la of U)0>ca.indexOf(la)&&(K=!0)}else if(30==fa||29==fa){for(var qa=0;qa<ca.length;qa+=2)0>Ph(U,ca[qa])&&(K=!0);for(qa=0;qa<U.length;qa+=2)0>Ph(ca,U[qa])&&(K=!0)}if(!K)continue}else if(2==u&&1==fa){K=!1;U=[1,10,11,12,13,14,15];for(let la of U)if(Eb[la]!=za[la]){K=!0;break}if(!K)continue}else if(y==B)continue;x||(x=r,K=u,U=document.createElement("div"),D[196](I),I=N(W.name),
Cg(M("div",U,"background:#00000082"),W.D,0,0,W.fb),L("div",U,I,"color:var(--color1);border-color:#ffd75d40;background:#00000082"),Nf(U,x,K+I),x=U);I=L("div",x);H.name?L("div",I,N(H.name)):H.y?Pf(M("div",I,"background:url(nehhon/icons2.webp);width:20px;height:20px;filter:drop-shadow(0px 0px 3px #000)"),-20*H.y):H.o&&(I=L("div",I),I.className="dataOrder",Pf(I,48*H.o));if(H.v)B=L("div",L("div",x)),B.className="check2",B.style.backgroundPositionY=y?"0":"";else if(H.j)if(B=M("div",x,"display:block"),y=
L("div",B),I=L("div",B),B=v[db].j[fa],H=w[db].j[fa],16==fa||7==fa||4==fa){for(let la of H)0>B.indexOf(la)&&Kh(la,y,"+");for(let la of B)0>H.indexOf(la)&&Kh(la,I,"-")}else if(26==fa||26==fa||8==fa){for(let la of H)0>B.indexOf(la)&&Jh(la,y,"+");for(let la of B)0>H.indexOf(la)&&Jh(la,y,"-")}else{if(30==fa||29==fa){y.style.flexDirection="column";for(I=0;I<H.length;I+=2)K=H[I],U=H[I+1],ca=Ph(B,K),0<=ca?Nh(K,U,B[ca+1],y):Nh(K,U,100,y);for(I=0;I<B.length;I+=2)K=B[I],U=B[I+1],0>Ph(H,K)&&Nh(K,100,U,y)}}else if(U=
K=I=255,H.select?(y=H.select.indexOf(y)+1,B=H.select[H.select.indexOf(B)+1],y=H.select[y]):(y>B&&(I=255/(y/B),U=255/(y/B)),y<B&&(K=255/(B/y),U=255/(B/y)),0>I&&(I=0),0>K&&(K=0),0>U&&(U=0)),H=H.F?"%":"",ca=L("div",x),L("span",ca,B+H),B!=y&&(L("span",ca,"->","color:var(--color1)"),L("span",ca,y+H,`color:rgb(${I},${K},${U})`)),2==u&&1==fa)if(H=M("div",ca,"flex-direction:column;margin-left:10px"),y==B)if(y=Eb[fa],0==y)y=Sf(),B=L("div",H),L("div",B,y[za[10]]),Eb[10]==za[10]?Zh(Eb[12],za[12],B):L("div",
B,"+"+za[12]);else if(1==y||2==y){y=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];p(213123);for(let la of y)Eb[la.id]!=za[la.id]&&(y=L("div",H),M("div",y,`background:url(nehhon/icons2.webp) 0px ${-20*la.h}px;width:20px;height:20px`),Zh(Eb[la.id],za[la.id],y))}else 3==y?(y=Eb[12],B=za[12],H=L("div",H),L("span",H,"x"+y+"%","color:#fff"),L("span",H,"->","color:var(--color1);margin:0px 6px"),L("span",H,"x"+B+"%","color:"+Yh(y,B))):4==y&&(y=L("div",H),D[196](Eb[12]),B=M("div",y),B.className=
"dataIcon",Pf(B,W.D),L("span",y,"->"),D[196](za[12]),y=M("div",y),y.className="dataIcon",Pf(y,W.D));else if(y=za[fa],0==y)y=Sf(),B=L("div",H),L("div",B,y[za[10]]),L("div",B,"+"+za[12]);else if(1==y||2==y){y=[{h:1,id:12},{h:3,id:13},{h:-1,id:11},{h:6,id:14},{h:5,id:15}];for(let la of y)za[la.id]&&(y=L("div",H),M("div",y,`background:url(nehhon/icons2.webp) 0px ${-20*la.h}px;width:20px;height:20px`),L("div",y,za[la.id]))}else 3==y?L("div",H,"x"+za[12]+"%"):4==y&&(y=L("div",H),L("span",y,"->"),D[196](za[12]),
y=M("div",y),y.className="dataIcon",Pf(y,W.D))}}}let Ga;k=k[3][0].data;q=q[3][0].data;t=Th(1);for(v=0;v<t.length;v++)w=t[v],q[w.id]!=k[w.id]&&4!=v&&38!=v&&(Ga||=L("div",r),L("div",Ga,w.name),u=q[w.id],w=k[w.id],A=L("div",Ga),L("span",A,u,"color:#fff"),L("span",A,"->","color:var(--color1);margin:0px 6px"),L("span",A,w,"color:"+Yh(u,w)))}}];let e=L("div",b),f=L("div",e),h=L("div",e);for(let k of d){let q=O("button",f,k.Ba);q.onclick=()=>{for(let t of f.children)t.style.background="";q.style.background=
"#ff00ff45";h.innerHTML="";k.click(h)}}if(a)for(d=0;5>d;d++)4!=d&&(f.children[d].style.display="none");L("button",f,N(8).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content;margin-left:auto").onclick=()=>{ci(1)};a||(L("button",f,N(832).toLowerCase(),"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{ii(k=>{ji(k.target.result);Vh=void 0;Hb(b);pe()})},O("button",f,542,"margin-top:auto;padding-top:8px;height:max-content").onclick=()=>{confirm(N(713))&&(D[266](),Vh=void 0,
Hb(b),pe(),C.l&&l.u&&!C.s&&(ki=1,ci(),D[274]()))});Vh||(Vh=[],li(0,60,257,c,Vh),li(1,55,258,c,Vh),li(2,23,263,c,Vh),Vh[3]=[{j:{},data:new Uint32Array(gc(D[264](),155))}]);f.children[a?4:0].onclick();Q&&R(f.children[3]);b.children[0].addEventListener("click",()=>{Q?(ci(),D[265](2147483647)):C.l&&l.u&&!C.s&&(mi()||ki)&&(ki=1,ci(),D[274]())})}
var ki,mi=()=>{if(Vh)for(let b=0;b<Vh.length;b++){let c=Vh[b],d=hi[b];for(let e=0;e<c.length;e++){let f=c[e],h=d[e];for(var a=0;a<f.data.length;a++)if(f.data[a]!=h.data[a])return!0;for(let k in f.j)for(a=0;a<f.j[k].length;a++)if(f.j[k][a]!=h.j[k][a])return!0}}return!1},hi,fi=a=>{a&&(Vh=void 0);hi||(a=ei(),hi=[],li(0,60,257,a,hi),li(1,55,258,a,hi),li(2,23,263,a,hi),hi[3]=[{j:{},data:new Uint32Array(gc(D[264](),155))}])};window.gtorimod=fi;var Vh;
function li(a,b,c,d,e){d=d[a];e[a]=[];performance.now();c=D[c]();let f=gc(D[259]()),h=c;for(let k=0;k<c;k+=b){let q={data:f.slice(k,k+b),j:{}};e[a].put(q);for(let t=0;t<d.length;t++){let r=q.data[t];d[t].j&&!q.j[t]&&(q.j[t]=Array.from(f.slice(h,h+r)),h+=r)}}}
function gi(a,b,c){c=c[a];performance.now();var d=L("div",b);d.className="arrws";let e=L("button",d,"<","opacity:.5"),f=L("button",d,">");d=L("table",b);d.id="unittable";b=0;let h=L("thead",d);for(var k=0;k<c.length;k++)if(!c[k].T){b++;var q=L("td",h,N(c[k].name));c[k].y&&Pf(L("div",q),-20*c[k].y);c[k].o&&(q=L("span",q),q.className="dataOrder",Pf(q,35*c[k].o))}a=Vh[a];let t=L("tbody",d);for(let w of a){a=document.createElement("tr");for(let A=0;A<c.length;A++){k=w.data[A];let x=c[A];if(x.T)continue;
d=L("td",a);if(0==A){D[196](k);k=N(W.name);d.dataset.title=k;Cg(d,W.D,0,0,W.fb);a.X=k;continue}d.X=k;x.ia&&(d=M("div",d,"display:flex;gap:4px;align-items:center;justify-content:center"));if(x.j){let B;x.ia?(k=!k,se(d,I=>{I?(Fd(B),w.data[A]=0,w.j[A].length=0):(B.style.visibility="",w.data[A]=w.j[A].length)},k),B=L("button",d,"\u25a4"),B.onclick=()=>x.click(w,A),k&&Fd(B)):(B=L("button",d,"\u25a4"),B.onclick=()=>x.click(w,A));continue}if(x.v){se(d,B=>{w.data[A]=B},k);continue}let y=L(x.select?"select":
"input",d);x.F&&L("span",d," %");if(x.select){for(q=0;q<x.select.length;q+=2){let B=x.select[q];L("option",y,x.select[q+1]).value=B}y.value=k;x.click&&(L("button",d,"\u25a4","margin-left:5px").onclick=()=>x.click(w,A))}else x.ia&&(q=k!=2**32-1,se(d,B=>{B?(y.style.visibility="",y.value=0):Fd(y)},q,1),q||Fd(y)),y.value=k,y.type="number",y.min=x.min||0,y.max=2**32-1,y.oninput=Qh;y.onchange=()=>{w.data[A]=S(y);if(c[A].ya){let B=w.data[16]*w.data[17];w.data[18]=B;w.j[18].length=B}}}for(let A of t.children)if(A.X>
a.X){t.insertBefore(a,A);break}a.parentNode||t.appendChild(a)}let r=0,u=Math.ceil((b-1)/6),v=w=>{r+=w;0>r&&(r=0);r>=u&&(r=u-1);e.style.opacity=r?"":".5";f.style.opacity=r+1>=u?".5":"";for(w=1;w<h.children.length;w++){var A=h.children[w];w<=6*r||w>6*r+6?R(A):Gd(A)}for(let x of t.children)for(w=1;w<x.children.length;w++)A=x.children[w],w<=6*r||w>6*r+6?R(A):Gd(A)};v(0);f.onclick=()=>v(1);e.onclick=()=>v(-1)}
window.selectMulp=function(a,b,c,d,e,f,h,k,q,t){ni(b,c);ld.style.display="block";m(zd?"unitname":"kingdom").innerHTML=a+" "+N(58);q?(jd.innerHTML=q,Pf(jd,-100),yd("levelmenu")):P("levelmenu");f?(hd.innerHTML=f,yd("attackmenu")):P("attackmenu");h?(id.innerHTML=h,yd("defencemenu")):P("defencemenu");k&&(m("manamenu").style.backgroundPosition="0px -240px",m("manamenu").innerHTML=k,yd("manamenu"));t?(m("manamenu1").style.backgroundPosition="0px -80px",m("manamenu1").innerHTML=t,yd("manamenu1")):P("manamenu1");
zd&&d&&(kd.innerHTML=Zc(e,D[29](d)),m("plavatar").style.background=`url(${vg(e,d)})`,yd("plavatar"))};window.updateHealth=function(a){if(m("progressvalue")){var b=m("progressvalue").innerHTML.split("/");b.length&&(m("progressone").value-=a,m("progressvalue").innerHTML=b[0]-a+"/"+b[1])}};
window.selectionOne0=function(a,b,c,d,e,f,h,k,q,t,r,u,v,w,A,x){P("manamenu");P("manamenu1");P("progressmana");d=oi||N(d);a&&b?(m("stock").className="",m("manamenu1").style.display="block",m("manamenu1").style.backgroundPosition="0px -80px",m("manamenu1").innerHTML=a):m("stock").className="blocked";1==e&&c&&b&&(a=Math.floor(25*(c-C.Z)/1E3),0<a&&(m("manamenu").style.display="block",m("manamenu").style.backgroundPosition="0px -200px",m("manamenu").innerHTML=a+"s"));kd.style.display="block";md.textContent!=
d&&(md.textContent=d);f||0==e&&!zd?(hd.innerHTML=f,yd("attackmenu")):P("attackmenu");0==e&&!zd||zd&&h&&0===e||2==e&&h?(id.innerHTML=h,yd("defencemenu")):P("defencemenu");r&&226==t&&(Pf(m("manamenu1"),-140),yd("manamenu1"),m("manamenu1").innerHTML=r);q&&(m("manamenu").style.display="block",m("manamenu").innerHTML=k,27===t?(m("manamenu1").style.backgroundPosition="0px -280px",yd("manamenu1"),m("manamenu1").innerHTML=k,m("manamenu").style.backgroundPosition="0px -240px",m("manamenu").innerHTML=r):(m("progressmana").value=
~~(100*k/q),yd("progressmana"),m("manamenu").style.backgroundPosition="0px -120px"));A&&(d=m("manamenu1"),74==t&&(w=4),d.style.display="block",d.style.backgroundPosition=["0px -260px","0px -340px","0px -240px","0px -320px","0px -220px"][w]||"",d.innerHTML=A);jd.innerHTML=u;jd.style.display="block";1==e?Pf(jd,-180):Pf(jd,-100);0===u&&(2==e||1==e||0==e&&zd)&&(jd.style.display="none");kd.innerHTML=Zc(x,D[29](v));v&&m("plavatar")&&(m("plavatar").style.background=`url(${vg(x,v)})`,yd("plavatar"));ld.style.display=
"block"};function pi(a){return a.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi,function(){return"*******"})}window.shresmsg=function(a,b,c){let d=N(a?451:533);a&&(d+=" -> ");if(c||b)d=fg(d,Zc(c,b));b=L("li",m("msgs1"),d);for(c=0;4>c;c++)a&1<<c&&(bd(b,c).style.cssText="margin-left:8px;margin-bottom:-1px");qi()};
window.cnsoSPmsg=function(a,b,c){a=N(a);if(c||b)a=fg(a,Zc(c,b));m("msgs1").innerHTML+="<li style='border: 30px solid #ff0;border-top: 0px;border-bottom: 0px;padding: 0px 11px;'>"+a+"</li>";qi()};window.cnsoSP2msg=function(){L("li",m("msgs1")).textContent=Vd;qi()};function Od(a){for(var b,c="",d=0;b=a[d++];)c+=String.fromCharCode(b);return c}function ni(a,b){0>a?(ld.value=100,ld.max=100,nd.innerHTML=N(40)):(ld.value=a,0>b?(ld.max=100,ld.value=1):ld.max=b,nd.innerHTML=~~a+"/"+b)}
window.showHealthOne=ni;function hh(){}new Float32Array(8);var ri,si,ti,ui,vi,wi,Cc=1,E,xf,xi,vf,yi,zi,Ai,Bi,Ci,Di,Ei,Ch,Fi,Gi,Hi,hg,Ii,Ji,Ki;new Float32Array(12);var z,Li;function gc(a,b){return new Uint32Array(window.wasmMemory.buffer,a,b)}function Mi(a,b){return new Float32Array(window.wasmMemory.buffer,a,b)}function ic(a,b){return new Int32Array(window.wasmMemory.buffer,a,b)}function Ni(a,b){return new Int8Array(window.wasmMemory.buffer,a,b)}function Pd(a,b){return new Uint16Array(window.wasmMemory.buffer,a,b)}
function di(a,b){return new Uint8Array(window.wasmMemory.buffer,a,b)}function qg(){if(!Q){for(var a=qd.Wb.length=0,b=od.length;a<b;a++){var c=od[a];c.className="blocked";c.style.background="none";c.innerHTML=""}qd.Na.className="blocked";qd.Ka.className="blocked";qd.Ib.className="blocked";qd.Uc=1}}window.cleanMenuIcons=qg;
window.buttonSetup=function(a,b,c,d,e,f,h,k,q,t,r,u){var v=od[a];v.Rc=r;v&&!u&&(v.style.cssText="background-position:0px "+48*b+"px;"+(e&&"background-image:url(nehhon/iconunits.webp)"||""),c&&(v.className=""),f&&(v.className="dis"),1==q&&(v.className="invd"),2==q&&(v.className="uinv"),!k&&0<d?(b="",1073741824<d&&(1073741824<d&&(b=d-1073741824+"x"),d=`<span><span>${b}</span>\u221e</span>`),Oi(v,d)):k&&1073741824<d&&1!=h&&Oi(v,"..."),h&&1<t&&h!=2**31-1&&L("p",v,h+N([837,838,839][h-1]||840)),1==h?v.className=
"crnt":1<h&&(v.className="crnt1"),void 0!=Vf&&Vf==a&&(pd.innerHTML="",v.onmouseenter()))};var jg,V,X,Pi,ig,Qi,Ri,Si,Ti,Ui,Vi,Wi,Xi,Yi,Zi,$i,aj,bj,cj,dj,ej,fj,gj;window.gameOver=function(){Fc();Xc(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>F</h2><p>${N(386)} ${N(387)}</p>`,1).id="F"};
window.playerWon=function(){Fc();Xc(`<img src="nehhon/F.png" style="width:404px;image-rendering:auto;margin-bottom:15px;filter:drop-shadow(0px 0px 16px #000)"><h2>${N(388)} ${N(389)}</h2>`,1).id="F"};function hj(a,b){var c=4*vi,d=z.createBuffer();d.size=b;d.Jc=c;z.bindBuffer(z.ARRAY_BUFFER,d);z.enableVertexAttribArray(a);z.vertexAttribPointer(a,b,z.FLOAT,!1,0,0);z.bufferData(z.ARRAY_BUFFER,c*b,z.STATIC_DRAW);Ma?ij.vertexAttribDivisorANGLE(a,1):z.vertexAttribDivisor(a,1);return d}
function jj(a,b){var c=b+4E4;b*=4;c*=4;if(Ma)z.bindBuffer(z.ARRAY_BUFFER,a),z.bufferData(z.ARRAY_BUFFER,c*a.size,z.STATIC_DRAW),D[146]();else{var d=z.createBuffer();z.bindBuffer(z.COPY_READ_BUFFER,a);z.bindBuffer(z.ARRAY_BUFFER,d);z.bufferData(z.ARRAY_BUFFER,b*a.size,z.STATIC_DRAW);z.copyBufferSubData(z.COPY_READ_BUFFER,z.ARRAY_BUFFER,0,0,b*a.size);z.bindBuffer(z.COPY_READ_BUFFER,d);z.bindBuffer(z.ARRAY_BUFFER,a);z.bufferData(z.ARRAY_BUFFER,c*a.size,z.STATIC_DRAW);z.copyBufferSubData(z.COPY_READ_BUFFER,
z.ARRAY_BUFFER,0,0,b*a.size);z.bindBuffer(z.COPY_READ_BUFFER,null);z.deleteBuffer(d)}}
function yf(a){if(E)return D[277](1==g.stdcolors);a=di(D[17](a),4*(D[28]()+16));z.activeTexture(z.TEXTURE4);var b=z.createTexture();z.bindTexture(z.TEXTURE_2D,b);if(Ma){for(var c=new Uint8Array(16384),d=0;d<c.length;d++)c[d]=a[d];z.texImage2D(z.TEXTURE_2D,0,z.RGBA,64,64,0,z.RGBA,z.UNSIGNED_BYTE,c)}else z.texImage2D(z.TEXTURE_2D,0,z.RGBA,a.length/4,1,0,z.RGBA,z.UNSIGNED_BYTE,a);kj();z.bindTexture(z.TEXTURE_2D,null);z.bindTexture(z.TEXTURE_2D,b);z.uniform1i(z.getUniformLocation(V,"colorArray"),4);z.activeTexture(z.TEXTURE2)}
window.setupColorGL=yf;var lj,mj;window.scrSetup=function(a,b){kg(Math.floor(a-lg.width/2),Math.floor(b-lg.height/2));hh()};function nj(){let a=window.devicePixelRatio;1>a&&(a=1);return a}var Ma,Na,qj;
async function rj(a,b){Na=b;Cc=1;var c=parseInt(g.fogRefresh),d=n[8],e=n[43];d&&(sj=1E3*n[14]);if(!E){z.getError()===z.CONTEXT_LOST_WEBGL&&(z=lg.getContext("webgl2",{antialias:!1,alpha:!1}));Ma&&3==c&&(c=2);qj=3==c&&b;if(!tj){Y=parseFloat(g.antialiasing2)||1;uj=1<Y;var f=Math.round(25*parseInt(g.pixelDensity1/25))/100||nj();1>f&&(Y=1,uj=!1);f&&!uj&&(lg.style.width="100%");Y*=f;V=z.createProgram();X=z.createProgram();f=Ma?1:2;var h=await vj(f+"vrtxu.glsl");Ma||(h=h.replaceAll("FOG",b),h=h.replaceAll("FUOG",
!!qj));h=h.replaceAll("GLSCALE",(Y*T).toFixed(4));var k=z.createShader(z.VERTEX_SHADER);z.shaderSource(k,h);z.compileShader(k);h=await vj(f+"fragu.glsl");Ma?(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d)):(h=h.replaceAll("EXPLORED",e),h=h.replaceAll("FOG",b),h=h.replaceAll("BRMODE",d),h=h.replaceAll("FUOG",!!qj));var q=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(q,h);z.compileShader(q);z.attachShader(V,k);z.attachShader(V,q);z.linkProgram(V);z.useProgram(V);
h=Ma?await vj("1vrtxt.glsl"):await vj("2vrtxt.glsl");k=z.createShader(z.VERTEX_SHADER);z.shaderSource(k,h);z.compileShader(k);f=await vj(f+"fragt.glsl");Ma||(f=f.replaceAll("FUOG",!!qj));f=f.replaceAll("EXPLORED",e);f=f.replaceAll("FOG",b);f=f.replaceAll("BRMODE",d);d=z.createShader(z.FRAGMENT_SHADER);z.shaderSource(d,f);z.compileShader(d);z.attachShader(X,k);z.attachShader(X,d);z.linkProgram(X)}e=z.getAttribLocation(V,"a_position");f=z.getAttribLocation(V,"a_texCoord");d=z.getAttribLocation(V,"a_step");
k=z.getAttribLocation(V,"a_physic");h=z.getAttribLocation(V,"a_margins");z.useProgram(X);wj=z.getUniformLocation(X,"minimapMargin");Zi=z.getUniformLocation(X,"u_translation");Vi=z.getUniformLocation(X,"u_resolution");Ui=z.getUniformLocation(X,"u_fps");Ti=z.getUniformLocation(X,"now");dj=z.getUniformLocation(X,"u_circle0");ej=z.getUniformLocation(X,"u_circle1");ig=z.getUniformLocation(X,"u_ambient");$i=z.getUniformLocation(X,"zoom");Wi=z.getUniformLocation(X,"miniMap");xj(Cc);z.uniform1i(Wi,0);z.uniform2fv(Zi,
[0,0]);z.uniform1f(Ui,-1);z.uniform1f($i,Y);z.uniform1f(z.getUniformLocation(X,"TSIZE"),lc);z.uniform1f(z.getUniformLocation(X,"mx"),0);Ma?(z.uniform1f(z.getUniformLocation(X,"mapSize"),2**Math.ceil(Math.log2(D[47]()))),z.uniform1f(z.getUniformLocation(X,"mapSize2"),D[47]())):z.uniform1f(z.getUniformLocation(X,"mapSize"),D[47]());z.uniform1f(z.getUniformLocation(X,"scale"),1);yj=Q?[-l.U*Y,-l.K*Y]:[-l.U*Y,xe()?-(window.innerHeight-Rg-l.K)*Y:-l.K*Y];z.uniform2fv(wj,yj);q=z.getAttribLocation(X,"a_position");
aj=zj();Aj(aj);var t=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,t);z.bufferData(z.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,1,-1,1,1,-1,1]),z.STATIC_DRAW);z.enableVertexAttribArray(q);z.vertexAttribPointer(q,2,z.FLOAT,!1,0,0);Aj(null);z.useProgram(V);z.uniform2fv(Bj,yj);z.bindBuffer(z.ARRAY_BUFFER,null);bj=zj();Aj(bj);cj=z.createBuffer();z.bindBuffer(z.ARRAY_BUFFER,cj);z.enableVertexAttribArray(d);Ma?(ij=z.getExtension("ANGLE_instanced_arrays"),z.vertexAttribPointer(d,1,z.FLOAT,!1,0,0),z.bufferData(z.ARRAY_BUFFER,
new Float32Array([0,1,2,1,2,3]),z.STATIC_DRAW),ij.vertexAttribDivisorANGLE(d,0)):(z.vertexAttribIPointer(d,1,z.UNSIGNED_BYTE,0,0),z.bufferData(z.ARRAY_BUFFER,new Uint8Array([0,1,2,1,2,3]),z.STATIC_DRAW),z.vertexAttribDivisor(d,0));d=D[47]();vi=a&&a+4E4||Math.floor(d*d/2);ri=hj(f,4);si=hj(e,3);ti=hj(k,4);ui=hj(h,4);Aj(null);Ri=z.getUniformLocation(V,"u_resolution");jg=z.getUniformLocation(V,"u_ambient");Yi=z.getUniformLocation(V,"u_translation");Li=z.getUniformLocation(V,"zoom");Qi=z.getUniformLocation(V,
"now");gj=z.getUniformLocation(V,"u_circle0");fj=z.getUniformLocation(V,"u_circle1");Xi=z.getUniformLocation(V,"miniMap");Bj=z.getUniformLocation(V,"minimapMargin");b&&(Si=z.getUniformLocation(V,"miniMapSize"));z.uniform1f(z.getUniformLocation(V,"zMax"),96*D[47]());z.uniform1i(Xi,0);z.useProgram(V);a=Mi(D[33](),1323);C.Ra||(C.Ra=2880);C.Sa||(C.Sa=12);b=0;for(e=bg.length;b<e;b++).55>bg[b]&&(bg[b]=.55);Rc();z.uniform1f(z.getUniformLocation(V,"mapSize"),D[47]());z.uniform1f(z.getUniformLocation(V,"mx"),
-l.R*Y);z.uniform1f(Li,Y);z.uniform2fv(Yi,[0,0]);z.uniform1f(z.getUniformLocation(V,"TSIZE"),lc);window.addEventListener("resize",Cj,!1);Cj();z.blendEquation(z.FUNC_ADD);z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA);z.disable(z.DITHER);z.disable(z.BLEND);performance.now();if(!tj){yf(1==g.stdcolors);z.activeTexture(z.TEXTURE0);e=z.createTexture();z.bindTexture(z.TEXTURE_2D,e);if(Ma){z.getExtension("OES_texture_float");f=new Float32Array(65536);for(b=0;b<f.length;b++)f[4*b]=a[b];z.texImage2D(z.TEXTURE_2D,
0,z.RGBA,128,128,0,z.RGBA,z.FLOAT,f)}else z.texImage2D(z.TEXTURE_2D,0,z.R16F,a.length,1,0,z.RED,z.FLOAT,a);kj();z.bindTexture(z.TEXTURE_2D,null);z.bindTexture(z.TEXTURE_2D,e);z.uniform1i(z.getUniformLocation(V,"delay"),0);z.activeTexture(z.TEXTURE2)}Dj=z.createTexture();z.bindTexture(z.TEXTURE_2D,Dj);z.texImage2D(z.TEXTURE_2D,0,z.LUMINANCE_ALPHA,d,d,0,z.LUMINANCE_ALPHA,z.UNSIGNED_BYTE,null);Ej();z.useProgram(X);z.uniform1i(z.getUniformLocation(X,"fogMap"),2);z.useProgram(V);z.uniform1i(z.getUniformLocation(V,
"fogMap"),2);qj&&(z.activeTexture(z.TEXTURE3),Pi=z.createTexture(),z.bindTexture(z.TEXTURE_2D,Pi),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,1,1,0,z.RGBA,z.UNSIGNED_BYTE,new Uint8Array(4)),kj(),Fj=z.createFramebuffer(),z.bindFramebuffer(z.FRAMEBUFFER,Fj),Gj=z.createTexture(),z.bindTexture(z.TEXTURE_2D,Gj),a=lj,b=mj,z.texImage2D(z.TEXTURE_2D,0,z.RGBA,a,b,0,z.RGBA,z.UNSIGNED_BYTE,null),kj(),Fj.width=a,Fj.height=b,z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,Gj,0),z.bindFramebuffer(z.FRAMEBUFFER,
null),z.useProgram(X),z.uniform1i(z.getUniformLocation(X,"frmBUFFER"),3),z.useProgram(V),z.uniform1i(z.getUniformLocation(V,"frmBUFFER"),3));z.activeTexture(z.TEXTURE2);z.enable(z.DEPTH_TEST);z.depthFunc(z.LEQUAL);Hj.now=0;Hj.sb=0;tj=!0}D[13](Y,vi,c,1!=g.nodecals,1==g.selcolor,E)}window.setupGL=rj;var Dj;
window.chFFg=function(a,b){let c=b*b*2;c%4&&(c+=2);a=a?di(a,c):new Uint8Array(c);E?xf.queue.writeBuffer(Ij,0,a):(z.activeTexture(z.TEXTURE2),z.bindTexture(z.TEXTURE_2D,Dj),z.pixelStorei(z.UNPACK_ALIGNMENT,1),z.texImage2D(z.TEXTURE_2D,0,z.LUMINANCE_ALPHA,b,b,0,z.LUMINANCE_ALPHA,z.UNSIGNED_BYTE,a),Ej(),z.pixelStorei(z.UNPACK_ALIGNMENT,4))};var Gj,Jj;window.shk=function(){Jj=!0;E&&(qj=Na=0)};
function Kj(a){a&&(z.activeTexture(z.TEXTURE3),z.uniform1i(Xi,3),z.bindFramebuffer(z.FRAMEBUFFER,Fj),z.viewport(0,0,lj,mj),z.bindTexture(z.TEXTURE_2D,Pi),z.clearColor(0,0,0,0),Jj&&z.clearColor(1,1,1,1),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),Jj&&z.clearColor(0,0,0,0),z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.ONE,z.ONE),Ma?ij.drawArraysInstancedANGLE(z.TRIANGLES,0,6,a):z.drawArraysInstanced(z.TRIANGLES,0,6,a),z.bindTexture(z.TEXTURE_2D,Gj),z.bindFramebuffer(z.FRAMEBUFFER,null),
z.uniform1i(Xi,0),z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA))}
function Lj(){if(Mj){var a=Mj,b=a.I,c=a.xc,d=a.yc,e=a.ic,f=a.jc,h=a.zc,k=a.kc,q=Date.now()-b;150<q&&(q=150);var t=Nj(),r=t.x;t=t.y;var u=Date.now()-rf||0,v=Date.now()-mf||0;150<u&&(u=150);150<v&&(v=150);r=rf<b?r*q:r*u;t=mf<b?t*q:t*v;Math.sign(r)!=Math.sign(Oj)&&Oj?r+=Oj:Oj=r;Math.sign(t)!=Math.sign(Pj)&&Pj?t+=Pj:Pj=t;150>q?(Cc=k+-(k-h)/150*q,a.Cb?(a=Qj(c,d,k,e,f),c=Qj(c,d,Cc,e,f),Ac=e-(a.x-c.x),Bc=f-(a.y-c.y)):(Ac=e+-(e-c)/150*q,Bc=f+-(f-d)/150*q)):(a.Cb?(a=Qj(c,d,k,e,f),c=Qj(c,d,h,e,f),Ac=e-(a.x-
c.x),Bc=f-(a.y-c.y)):(Ac=c,Bc=d),mf=rf=Date.now(),sf=Ac+r,nf=Bc+t,Cc=h,Mj=void 0);Ac+=r;Bc+=t;kg(-Ac,-Bc);E?xf.queue.writeBuffer(Hi,0,new Float32Array([1/Cc])):z.getParameter(z.CURRENT_PROGRAM)==V&&z.uniform1f(Li,Y/Cc);D[19](Cc)}}var Oj,Pj;function Nj(){var a=2.5*parseInt(g.scrollSpeed)/100;return{x:1680*pf*Cc*a/1E3,y:1680*hf*Cc*a/1E3}}var Rj=0,sj,Sj,Tj;
window.brconf=function(a,b,c,d,e,f,h,k,q){sj=d;Sj=k;Tj=q;E?xf.queue.writeBuffer(zi,0,new Float32Array([a,b,c,d,e,f,h,k])):(z.useProgram(V),z.uniform4f(gj,a,b,c,d),z.uniform4f(fj,e,f,h,k),z.useProgram(X),z.uniform4f(dj,a,b,c,d),z.uniform4f(ej,e,f,h,k))};var Uj=()=>{if(0!=pf||0!=hf||Mj){var a=Nj(),b=a.x;a=a.y;var c=Date.now()-rf,d=Date.now()-mf,e=!1,f=0,h=0;kf&&(h=Math.sqrt(b**2+a**2)/kf,c>h&&(d=c=h,e=1),f=b/h,h=a/h);Mj?Lj():(b&&(Ac=sf+b*c-.5*f*c**2),a&&(Bc=nf+a*d-.5*h*d**2),kg(-Ac,-Bc),e&&(hf=pf=0))}};
function Hj(a,b){C.lb||(performance.now(),Tc||requestAnimationFrame(Hj),a=Hj.now,Hj.sb++,1==g.hlffps&&Hj.sb%2||(a=b||Date.now()-Pc+25*D[48](),Hj.now=a,Date.now(),Uj(),z.useProgram(V),hh(),z.uniform1f(Qi,a),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),b=D[14](),qj&&Kj(b),Vj(a),Aj(bj),Wj(b),Xj(b),le.update&&le(1),Tc&&(0<Jc&&clearInterval(Jc),lg.toBlob(function(c){var d=Yj;c=URL.createObjectURL(c);d.href=c;d.download=`${Zj++}.png`;d.click();window.URL.revokeObjectURL(c);setTimeout(function(){setTimeout(Mc,
9);Hj(0,25*C.Z+16)},20)})),ak&&ak.getVideoTracks()[0].requestFrame(),z.finish(),bk()))}
var bk=()=>{dd++;if(!Q&&100<=Date.now()-Rj&&(Rj=Date.now(),D[171](),3>Be)){var a=C.now()/6E4,b=D[166]();if(b){var c=a/b;if(1>=c){var d=Math.round(510*c);c=Math.round(510*(1-c));255<d&&(d=255);255<c&&(c=255)}else d=255,c=0}1==Be?300<dd&&(Oi(m("tpCPU"),"CPU:"+(Sc/10).toFixed(2)+"%"),Oi(m("tpGPU"),~~(1E3*dd/(performance.now()-cd)+.75)+"FPS"),ze.show(),cd=performance.now(),dd=0):(R(m("tpCPU")),Oi(m("tpGPU"),""),R(ze));Oi(m("tpTM"),Oc(C.now()));ck&&(ck.style.color=`rgb(${d},${c},0)`,a>b+5&&J(ck));void 0!=
sj&&(a=25*D[48](),b=n[21],a=1E3*Math.floor(a/1E3),sj>a?(c=N(506)+` (${Tj||0}/${b}) `+Oc(sj-a),d="#ff0"):(c=N(505)+` (${Tj}/${b}) `+Oc(sj+Sj-a),d="red"),Tj==b&&a>sj+Sj&&(c=N(507),d="#f0f"),dk&&(dk.style.color=d,Oi(dk,c)));Sc=0}};function ek(a){a?ek.time=performance.now():p("c++",performance.now()-ek.time)}window.perfw=ek;
function Xj(a){a&&(z.enable(z.BLEND),z.blendEquation(z.FUNC_ADD),z.blendFunc(z.SRC_ALPHA,z.ONE_MINUS_SRC_ALPHA),Ma?ij.drawArraysInstancedANGLE(z.TRIANGLES,0,6,a):z.drawArraysInstanced(z.TRIANGLES,0,6,a),z.disable(z.BLEND))}var Ee=!1,yj;
function Wj(a,b){if(1020>window.innerWidth)if(Ee)b=!0;else return;z.uniform2fv(Yi,[0,0]);z.uniform1f(Li,1);z.uniform1i(Xi,1);var c=l.U*T,d=xe()?-l.K:window.innerHeight-Rg*T-l.K*T,e=Sg*T,f=Rg*T;b?(f=e=c=Tg(),c=window.innerWidth/2-e/2,d=window.innerHeight/2-f/2,z.uniform2fv(Bj,[-Y*c,-Y*d])):z.uniform2fv(Bj,yj);z.uniform1f(Si,e*Y);z.viewport(c*Y,Y*d,e*Y,f*Y);Xj(a);z.uniform1i(Xi,2);Xj(1);z.uniform1i(Xi,0);z.uniform2fv(Yi,[Ac,Bc]);z.uniform1f(Li,Y/Cc);z.viewport(0,0,lj,mj);Ee&&!b&&Wj(a,1)}
function Tg(){return Ja?Math.min(window.innerWidth,window.innerHeight)-55:Math.min(window.innerWidth-(xe()?0:250)*T,window.innerHeight-(xe()?250:0)*T)-128}var wj,Bj;
function Vj(a,b){var c=Math.floor(a/100)%5;z.useProgram(X);z.uniform1f($i,Y/Cc);Aj(aj);z.uniform1f(Ui,c);z.uniform1f(Ti,a);Bf&&ff||z.drawArrays(z.TRIANGLES,0,6);var d=xe();c=l.U*T;var e=d?-l.K*T:window.innerHeight-Rg*T-l.K*T,f=Sg*T,h=Rg*T;if(1020>window.innerWidth)if(Ee)b=!0;else{z.viewport(0,0,lj,mj);z.useProgram(V);return}if(b){h=f=d=Tg();c=window.innerWidth/2-f/2;e=window.innerHeight/2-h/2;z.uniform2fv(wj,[-Y*c,-Y*e]);if(Ja)for(var k=document.getElementsByClassName("alertdmg"),q=0;q<k.length;q++)k[q].show();
yd("bigMap");m("bigMap").style.width=d/T+"px";m("bigMap").style.height=d/T+"px"}else z.uniform2fv(wj,[yj[0]*T,d?-(window.innerHeight-Rg*T-l.K*T)*Y:yj[1]*T]);Bf&&ff?(z.enable(z.SCISSOR_TEST),z.scissor(Y*c,Y*e,Y*f,Y*h),z.clearDepth(-.9),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),z.clearDepth(1),z.disable(z.SCISSOR_TEST)):(z.viewport(Y*c,Y*e,Y*f,Y*h),z.uniform1i(Wi,1),z.uniform2fv(Zi,[0,0]),z.uniform1f($i,Y*f/32/D[47]()),z.drawArrays(z.TRIANGLES,0,6),z.uniform1i(Wi,0),z.uniform2f(Vi,lj,mj),z.uniform2fv(Zi,
[Ac,Bc]),z.viewport(0,0,lj,mj));z.useProgram(V);Ee&&!b&&Vj(a,1)}var tj=!1,uj;function xj(a){uj&&(1<a?(a=(a-1)/.5,1<a&&(a=1),a=.5*(1-a)):a=.5,fk!=a&&(fk=a,a=`calc(-${50*(Y-1)}% + ${a}px)`,lg.style.transform=`scale(${1/Y}) translate(${a},${a})`))}var fk;function Qj(a,b,c,d,e){var f=lj,h=mj;return{x:a*c+-d+(f-c*f/Y)/2,y:b*c+-e+(h-c*h/Y)/2}}function Bh(a,b){var c=Cc,d=lg.width,e=lg.height;return{x:a*c+-Ac+(d-c*d)/2,y:b*c+-Bc+(e-c*e)/2}}var Mj;
function tf(a,b,c,d){var e=D[47](),f=window.innerWidth,h=window.innerHeight,k=1!=g.unlimitedZoom&&!Q;if(!(a*(f-(!Ja&&l.R||0))/32>e||a*h/32>e)||!k){xj(a);.25>a&&k&&(a=.25);0>a&&(a=0);Lj();if(!b||Ee||!Ja&&b<l.R||1!=g.zoomPointer)b=Math.floor(f/2),c=Math.floor(h/2);Pj=Oj=0;Mj={xc:b,yc:c,ic:Ac,jc:Bc,I:Date.now(),zc:a,kc:Cc,Cb:1};d&&(Mj.I-=500,Lj());gk()}}
function hk(a){if(!$g&&(Se||a.target==lg)&&(a.ctrlKey&&a.preventDefault(),a.clientX>l.Va||Se||!a.clientX)){var b=a.deltaY/550,c=1+parseFloat(g.zoomMult)/200+Math.abs(b);tf((0<Math.sign(b)?c:1/c)*Cc,a.clientX,a.clientY)}}function gk(){if(!E){var a=window.innerWidth+l.R,b=window.innerHeight,c=Cc*a,d=Cc*b;ik(-Ac+(Y-Cc)*a*.5,-Bc+(Y-Cc)*b*.5,-999999999,0);jk(c,d,0,0,0)}}var kk,lk;
hh=function(){if(Ac!=kk||Bc!=lk){kk=Ac;lk=Bc;D[20](-Ac,-Bc);var a=[Ac,Bc];E?(Ah&&zh(Ah[0],Ah[1]),xf.queue.writeBuffer(Fi,0,new Float32Array(a))):(z.useProgram(X),z.uniform2fv(Zi,a),z.useProgram(V),z.uniform2fv(Yi,a),gk())}};function kj(){z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.REPEAT);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.REPEAT)}
function Ej(){z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.NEAREST);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE);z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE)}var mk,lc;
function nk(a){z.activeTexture(z.TEXTURE6+a);if(!mk[a]){a&&!mk[a-1]&&nk(a-1);z.useProgram(V);const c=lc;var b=z.createTexture();mk[a]=b;z.bindTexture(z.TEXTURE_2D,b);kj();z.texImage2D(z.TEXTURE_2D,0,ok,c,c,0,ok,z.UNSIGNED_BYTE,null);z.uniform1i(z.getUniformLocation(V,`img_common[${a}]`),6+a);z.useProgram(X);z.uniform1i(z.getUniformLocation(X,`img_common[${a}]`),6+a)}return mk[a]}var ok;
window.setup3Dtexture=function(a,b,c,d){di(c,a);performance.now();ok=z.RGBA;performance.now();const e=lc;mk||=[];a=di(c,a);c=Math.floor(b/(e*e));b=b/e%e;var f=a.length/(4*e),h=0;do{var k=f-h;b+k>=e&&(k=e-b);z.bindTexture(z.TEXTURE_2D,nk(c));var q=new Uint8Array(a.buffer,a.byteOffset+h*e*4,k*e*4);z.texSubImage2D(z.TEXTURE_2D,0,0,b,e,k,ok,z.UNSIGNED_BYTE,q);h+=k;b=0;c++}while(h<f);D[165](d)};var Ij,Fj,Y=1;
function Cj(){var a=Math.round(window.innerWidth*Y),b=Math.round(window.innerHeight*Y);lj=a;mj=b;lg.width=E?window.innerWidth:a;lg.height=E?window.innerHeight:b;var c=m("menbak1s")&&m("menbak1s").getBoundingClientRect();D[18](lg.width,lg.height,window.innerWidth,window.innerHeight,c.y,c.x);E?(console.log(E),xf.queue.writeBuffer(Gi,0,new Float32Array([window.innerWidth,window.innerHeight])),pk&&(pk.destroy(),pk=xf.createTexture({size:[lj,mj],format:"depth24plus",usage:qk.RENDER_ATTACHMENT}),rk.depthStencilAttachment.view=
pk.createView(),sk&&sk())):(z.useProgram(X),z.uniform2f(Vi,a,b),z.useProgram(V),Fj&&(Fj.width=a,Fj.height=b,z.bindTexture(z.TEXTURE_2D,Gj),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,a,b,0,z.RGBA,z.UNSIGNED_BYTE,null),kj()),z.uniform2f(Ri,a,b));kg(-Ac,-Bc,1);Ge()}window.animTimer=function(){};function Aj(a){Ma?tk.bindVertexArrayOES(a):z.bindVertexArray(a)}var tk,ij;function zj(){return Ma?(tk||=z.getExtension("OES_vertex_array_object"),tk.createVertexArrayOES()):z.createVertexArray()}
Array.prototype.put=function(a){this[this.length]=a};function uk(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}Array.prototype.add=function(a){0>this.indexOf(a)&&(this[this.length]=a)};function Ph(a,b){for(let c=0;c<a.length;c+=2)if(a[c]==b)return c;return-1}var C={},vk=new Float32Array(4),wk=new Float32Array(3),xk=new Float32Array(1),yk=new Uint32Array(2);new Uint32Array(3);window.bufferDate=function(a,b){wf[0]=a;a=Ai;1073741823<=b&&(b-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*b+28,wf)};
window.bufferIMG3=function(a,b,c){yk[0]=a;yk[1]=b;a=Ai;1073741823<=c&&(c-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*c+24,yk)};window.bufferRotation=(a,b)=>{xk[0]=a;a=Ai;1073741823<=b&&(b-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*b+32,xk)};window.bufferPhysics3=function(a,b,c,d){wk[0]=a;wk[1]=b;wk[2]=c;a=Ai;1073741823<=d&&(d-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*d+12,wk)};var zk;
window.bufferGL3=(a,b,c,d,e,f,h,k,q,t,r,u,v)=>{let w=new Float32Array(11),A=new Uint32Array(w.buffer);w[0]=a;w[1]=b;w[2]=c;w[3]=d;w[4]=e;w[5]=f;A[6]=h;A[7]=k;w[8]=q;A[9]=t;A[10]=r;A[11]=u;a=Ai;1073741823<=v&&(v-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*v,A);v>Ak&&(Ak=v)};window.bufferInfo2=(a,b)=>{wf[0]=a;a=Ai;1073741823<=b&&(b-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*b+44,wf)};window.bufferHide=a=>{xk[0]=-9;let b=Ai;1073741823<=a&&(a-=1073741823,b=Bi);xf.queue.writeBuffer(b,48*a+8,xk)};
function ik(a,b,c,d){wk[0]=a;wk[1]=b;wk[2]=c;E?(a=Ai,1073741823<=d&&(d-=1073741823,a=Bi),xf.queue.writeBuffer(a,48*d,wk)):(z.bindBuffer(z.ARRAY_BUFFER,si),z.bufferSubData(z.ARRAY_BUFFER,12*d,wk))}window.bufferPos=ik;window.bufferPhysics=function(a,b,c,d,e){E||(vk[0]=a,vk[1]=b,vk[2]=c,vk[3]=d,z.bindBuffer(z.ARRAY_BUFFER,ti),z.bufferSubData(z.ARRAY_BUFFER,16*e,vk))};
window.bufferIMG=function(a,b,c,d,e){vk[0]=a;vk[1]=b;vk[2]=c;vk[3]=d;z.bindBuffer(z.ARRAY_BUFFER,ri);z.bufferSubData(z.ARRAY_BUFFER,16*e,vk)};function jk(a,b,c,d,e){E||(vk[0]=a,vk[1]=b,vk[2]=c,vk[3]=d,z.bindBuffer(z.ARRAY_BUFFER,ui),z.bufferSubData(z.ARRAY_BUFFER,16*e,vk))}window.bufferMargin=jk;window.bufferColor3=(a,b)=>{wf[0]=a;a=Ai;1073741823<=b&&(b-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*b+36,wf)};
window.bufferK3=(a,b)=>{wf[0]=a;a=Ai;1073741823<=b&&(b-=1073741823,a=Bi);xf.queue.writeBuffer(a,48*b+40,wf)};window.bufferColor=function(a,b){xk[0]=a;z.bindBuffer(z.ARRAY_BUFFER,ri);z.bufferSubData(z.ARRAY_BUFFER,16*b+8,xk)};
window.sresizeBuffer=function(a,b){if(E){var c=b?Bi:Ai;a={size:48*(a+4E4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1};b?Bi=xf.createBuffer(a):Ai=xf.createBuffer(a);b=b?Bi:Ai;a=xf.createCommandEncoder();a.copyBufferToBuffer(c,0,b,0,c.size);b=a.finish();xf.queue.submit([b]);c.destroy();Ii()}else jj(ri,a),jj(si,a),jj(ti,a),jj(ui,a)};var Rb=["European","Arab","Asian"];
function Bk(a){return`<span class="raceIcon" style="background-position-y:-${20*a}px"></span>`}function fg(a,b,c){if(a)return c&&(a=a.replace("%d",c)),a.replace("%s",b)};function Ck(){for(let a=0,b=Dk.length;a<b;a++){let c=Dk[a];c&&(n[a]="checkbox"==c.type?c.checked?1:0:parseInt(c.value))}return n}var Ek,yb;C.Ra=2880;C.Sa=12;function Fk(){let a=jb(kb);for(let b=0;b<n.length;b++)a[b]=n[b];D[24](n.length)}
function Gk(){m("mapconfiguration")&&""!==m("mapconfiguration").innerHTML&&!D[67]()&&(Ck(),1024<n.length&&(n.length=1024),g.mapConfig4=`[${n.join()}]`);C.kb=Math.round(555555*Math.random()+1);n[46]=C.kb;n[0]=Hk(n[0],n[16],n[29]);let a=jb(kb);for(let b=0;b<n.length;b++)a[b]=n[b];D[24](n.length);return C}window.SetupGameConfig=Gk;var Tc,Yj,Zj,ak;
async function ec(){wd&&(wd.innerHTML="");bc.innerHTML=N(53);l.xb||(l.xb=1);C.l&&(Ik(),C.Ec=0);D[47]()||Gk();C.wa=0;C.lb=0;tg=m("msgs1");C.l||(location.hash="");yd("content");C.Z?C.Tb=25*C.Z:(C.I=Date.now(),C.Z=0,C.Tb=0);C.Kc=Date.now();C.l||Zf();C.now=Kc;C.paused=0;C.wa=0;Lc();performance.now();C.Qb=!0;C.gb=25;var a=C.gb;0===l.gb&&(a+="&deg;C");m("temperature")&&(m("temperature").innerHTML=a);Cc=1;D[19](Cc);await rj(D[280](),Q?0:n[12]);D[101](~~(1E4*Math.random()));le(55);Jk.check();Q&&(Ld(),Nd(),
D[48]()&&Qa("Editing savegames may be unstable"))}function Hb(a){a&&J(a.parentNode.parentNode)}
function Jk(){J(Kk);m("playersinfo")&&(m("playersinfo").innerHTML="");pg();window.addEventListener("keydown",Zg);window.addEventListener("keyup",Xg);window.addEventListener("mousemove",yh);window.onblur=Wg;window.addEventListener("touchstart",ph,{passive:!1});window.addEventListener("touchmove",wh);window.addEventListener("touchend",xh);window.addEventListener("wheel",hk,{passive:!1});window.addEventListener("mousedown",Eh);window.addEventListener("mouseup",Fh);D[149](1==g.deathsounds);ea.tb=performance.now()-
ea.tb;C.l?(G(32),D[65]()):Lk();C.Qb=!1}window.startGameStep0=Jk;Jk.check=function(){Jk.load++;Jk.load===Jk.target&&Jk()};Jk.check=Jk.check;Jk.target=2;function Hh(a){ka?pa(1):a&&(a=document.documentElement,a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen())}var Mk=document.getElementsByTagName("main")[0];ka||(window.onbeforeunload=function(){return"Are you sure to leave this page?"});
window.onunload=()=>{mb&&G(57)};var Nk,Kk,bc,Ok,T=1,Pk=()=>{let a=parseInt(g.UIscale);Ok||=L("style",document.body);Ok.innerHTML=`main>*,body>div{zoom:${a}%}`;T=a/100;C.s&&(D[119](l.R,zd,T),Cj(),E&&xf.queue.writeBuffer(xi,0,new Float32Array([T])))};100!=g.UIscale&&Pk();var eg;
function Qk(a){eg=Date.now();zk=new Float32Array(12);new Uint32Array(zk.buffer);ef||(g.bshrct||(g.bshrct='{"0":["M"],"1":["A"],"2":["G"],"3":["R","P"],"4":["P"],"5":["E"],"6":["S"],"7":["N"],"10":["O"],"11":["D"],"12":["S"],"13":["G"],"14":["F"],"15":["A"],"16":["M"],"17":["P"],"18":["L"],"19":["K"],"60":["P"],"63":["S"],"64":["E"],"65":["D"],"66":["A"],"67":["L"],"68":["P"],"69":["P"],"70":["N"],"71":["R"],"74":["R","A"],"75":["I"],"76":["H"],"83":["G"],"84":["S"],"85":["C"],"91":["H"],"94":["B"],"96":["M"],"110":["P"],"111":["C"],"112":["F"],"113":["D","F"],"120":["I"],"121":["C"],"122":["C"],"123":["F"],"124":["A"],"125":["S"],"126":["P"],"127":["C"],"128":["J"],"129":["D"],"130":["T"],"132":["M"],"133":["H"],"134":["G"],"135":["G"],"136":["C"],"137":["C"],"138":["H"],"140":["E"],"141":["T"],"142":["P"],"143":["T"],"144":["H"],"145":["S","A"],"146":["C"],"147":["B"],"148":["W"],"149":["C"],"150":["F"],"151":["P"],"154":["H"],"155":["G"],"173":["R"],"174":["A"],"175":["S"],"176":["H"],"177":["M"],"178":["M"],"179":["P"],"180":["P"],"183":["O"],"184":["C"],"186":["R"],"188":["H"],"189":["B"],"190":["B"],"191":["B"],"192":["T"],"193":["S"],"194":["L"],"195":["L"],"196":["I"],"197":["C"],"198":["C"],"199":["C"],"201":["E"],"205":["U"],"207":["M"],"208":["M"],"209":["Y"],"210":["F"],"211":["K"],"212":["P"],"213":["P"],"214":["A"],"215":["A"],"216":["N"],"217":["H"],"218":["R"],"219":["O"],"220":["W"],"222":["D"],"223":["F"],"224":["C"],"225":["U"],"226":["W"],"227":["F"],"228":["G"],"229":["L"],"230":["B"],"231":["T"],"233":["I"],"236":["H"],"237":["H"],"238":["L"],"239":["S"],"240":["S"],"241":["F"],"242":["F"],"243":["R"],"244":["R"],"245":["K"],"246":["K"],"247":["P"],"248":["U"],"249":["U"],"250":["N"],"251":["N"],"254":["A"],"255":["O"],"256":["O"],"258":["M"],"265":["U"],"266":["J"],"270":["B"],"272":["C"],"273":["J"],"274":["V"],"275":["R"],"276":["D"],"277":["M"],"278":["P"],"279":["H"],"280":["S"],"292":["Y"],"300":["B"],"301":["B"],"354":["B"],"basic":["ARROWUP","ARROWDOWN","ARROWLEFT","ARROWRIGHT","X","0","<","Z","ESCAPE","ENTER","DELETE","TAB","Q"," ","CONTROL","SHIFT","ALT","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"]}'),ef=
JSON.parse(g.bshrct));Nk=!0;$d();Vb();if(!z&&!E)return Qa("Your browser doesnt support webgl");Mk.appendChild(lg);Hb(m("RandomMap")&&m("RandomMap").parentNode);Hb(m("CustomMap")&&m("CustomMap").parentNode);J(m("game"));J(m("bak"));J(m("index"));ea={tb:performance.now()};Jk.load=0;if(Ek&&Rk){var b=D[70]();n[0]=Math.round(Math.sqrt(15600*b));b=jb(kb);for(let c=0;c<n.length;c++)b[c]=n[c];D[24](n.length)}9==Sk?rc("pepe"):8==Sk?rc("e_church1"):7==Sk?rc("dragon die 1"):rc(Ek?"reveal":"bless");(a||ka)&&
"true"==g.fullscreen&&Hh();Q?(l.U=0,l.K=0,l.Bb=0,Rg=Sg=171,l.R=171,l.Va=171):zd?(Rg=Sg=l.R=151,l.Va=151,l.Bb=0,l.U=0,l.K=0):(l.R=151,Rg=Sg=128,l.Va=151,l.Bb=0,l.U=4,l.K=31);D[119](l.R,zd,T);a=m("minimap");a.style.width=Sg+"px";a.style.height=Rg+"px";a.style.left=l.U+"px";a.style.top=l.K+"px";Kk=L("div",document.body);Kk.id="loading";bc=L("div",Kk);L("div",Kk,"TZA.RED");a=L("div",Kk);L("div",a).className="svgnehhon";L("div",a,"NEHHON NETRAL ENGINE");na(Q?"Map editor":C.id&&C.id||"Single player",Q?
void 0:"Playing");if(Q){if(!D[67]())for(n=ra,a=jb(kb),b=0;b<n.length;b++)a[b]=n[b];D[102](n.length)}else D[47]()||Gk();G(25);if(C.l)La("start game");else D[204]();C.l||ci();m("mapconfiguration")&&Hb(m("mapconfiguration"));E?Tk():jc()}window.startGame=Qk;var Uk,Vk;window.updKstate=function(a,b,c){Uk&&Uk[a]&&(Uk[a].className=`${b&&"pldeath"||""}${c&&" pldisc"||""}`);c&&Vk&&Vk[a]&&(Vk[a].innerHTML="")};window.updKping=function(a,b){if(Be)if(Vk&&Vk[a])Vk[a].innerHTML=2147483647!=b&&b+"ms"||"host";else D[158]()};
window.rstPLI=function(){m("playersinfo").innerHTML="";Uk=[];Vk=[]};
window.setupPlayerInfo=function(a,b,c,d,e,f,h,k,q,t,r){if(!(50<a)){b=Zc(q,b);q=m("playersinfo");var u=document.createElement("div");u.za=r;h&&!t&&Be&&(Vk[a]=L("span",u,2147483647!=h&&h+"ms"||"host","font-size:8px;color:#00ffb8"));b=L("span",u,b,`border-color:${k&&"#f00"||"#0f0"}`);b.className=`${f&&"pldeath"||""}${t&&" pldisc"||""}`;Uk[a]=b;L("div",u,"",`background:rgb(${c},${d},${e})`);a=!0;for(let v of q.children)if(v.za<r){q.insertBefore(u,v);a=!1;break}a&&q.appendChild(u)}};
function Md(a){for(var b=a.length,c=0;c<b;m(a[c++]).style.display="block");}var Sg=128,Rg=128;window.popInfo=function(a,b){Q||Oi(m("pop"),a+"/"+b)};window.addEventListener("offline",function(){Ta("Offline","#ff0000")});window.addEventListener("online",function(){Ta("Online","#00ff00")});var Tb=!1;function Wk(a){if(!a||!a.target||"BUTTON"!=a.target.tagName){if(this.Hb&&!g.sid)return Xb();C.l&&Xk(5);a=this.ub;Tb=!0;Ub(a);Vb()}}function Yk(){let a=Xc(N(53));a.id="loadingOnline";O("button",a,3,"margin:auto;margin-top:19px;display:block").onclick=function(){location.href=""}}
function Zk(a,b){let c=1;do{let e=$k(a,c);c+=3;let f=$k(a,c);c+=3;let h=a[c++],k=a[c++],q=a[c++],t=a[c++],r=a[c++],u=a[c++],v=$k(a,c);c+=3;var d=a[c++];let w=a[c++],A=al(new Uint8Array(a.buffer,c,d));c+=d;d=al(new Uint8Array(a.buffer,c,w));c+=w;wg[e]={name:A,id:f,clan:d,avatar:h,role:k,team:q,race:r,rgb:v,state:t,flag:u};Ek&&(bl(D[56](0,r,v,e,0,f),17,A),cl());("1"!=g.muteroom||C.s)&&rc("unitdone");b&&sg(fg(N(531),"<span>"+Zc(e)+"</span>"),"4bff4b")}while(c<a.length)}
var dl={6400900:".",28462225:"a",29052100:"b",29648025:"c",3025E4:"d",30858025:"e",31472100:"f",32092225:"g",32718400:"h",33350625:"i",33988900:"j",34633225:"k",35283600:"l",35940025:"m",36602500:"n",37271025:"o",37945600:"p",38626225:"q",39312900:"r",40005625:"s",40704400:"t",41409225:"u",42120100:"v",42837025:"w",4356E4:"x",44289025:"y",45024100:"z"},zd,Gg,Rk,el;
function fl(){Ek=0;Rk=gl=Gg=l.u=0;na("Main menu");hl&&(J(hl),hl=void 0);m("mult").children&&m("mult").insertBefore(m("gameList"),m("mult").children[1]);m("gameList")&&m("gameList").show();m("mapconfiguration")&&Hb(m("mapconfiguration"))}function wb(a){fl();m("game")&&P("game");C.l=0;C.id=void 0;D[266](1);Vh=void 0;l.jb=!1;F.close();Ea();$f();D[69]();a&&a.constructor==String&&Qa(a)}
function ye(){if(m("menubefore")&&m("menuafter")&&m("resourcesbefore")){var a=g.menuOpacity/100;m("menubefore").style.opacity=a;m("menuafter").style.opacity=a;m("resourcesbefore").style.opacity=a}}function Lg(a,b){a=L("input",a);a.value=b;a.type="range";il(a);return a}function il(a){var b=L("span",a.parentNode);b.className="rangeval";a.H=b}
function He(){if(C.s){if(!Q&&!Cf)D[98]();$g=!0;if(!m("playingMenu")){var a=Xc("");a.id="playingMenu";document.body.style.cursor="";var b=L("div",a);C.l&&Na||(O("button",b,73).onclick=ee);O("button",b,860).onclick=If;!zd&&!Ja||Q||(O("button",b,463).onclick=Vc);n&&!Q&&(O("button",b,48).onclick=jl);let e=O("button",b,ma?885:74);e.onclick=function(r){ma?pa(0):Hh(r);e.textContent=N(ma?885:74)};O("button",b,75).onclick=fe;b=L("div",a);let f=M("div",a,"padding-bottom:37px;position:relative"),h=L("div",f,
N(461)+"...","cursor:url(nehhon/hand.gif),default;position:absolute;bottom:0px;right:7px;font-size:10px;color:#ffd75d8f");f.className="shw3";h.onclick=()=>{f.className="";J(h);f.style.cssText=""};var c=[{i:71,xa:1,qc:n[34]/100,min:1,max:10,f:function(){this.H.innerHTML="x"+this.value;D[173](S(this))}},{i:76,xa:1,A:"zoomMult",f:kl},{i:77,xa:1,A:"scrollSpeed",f:kl},{i:446,A:"stdcolors",ba:yf},{i:79,A:"nightcycle"},{i:886,A:"menud",ba:()=>{m("content").className="nw "+("1"==g.menud?"nwb":"");E||(yj=
[-l.U*Y,xe()?-(window.innerHeight-Rg-l.K)*Y:-l.K*Y],z.uniform2fv(wj,yj));Cj()}},{i:875,A:"selcolor",ba:()=>{D[273](1==g.selcolor)}},{i:82,A:"deathsounds"},{i:404,A:"unlimitedZoom"},{i:456,A:"scrollmouse"},{i:397,A:"zoomPointer"},{i:878,A:"hlffps"}];"true"!=g.theme&&(c.unshift({i:78,xa:1,A:"menuOpacity",f:kl,ba:ye}),c[6]=void 0);for(let r of c)if(r){c=r.qc||g[r.A];var d=r.xa?b:f;if(r.xa){let u=Lg(L("div",d),c);u.oninput=r.f;u.oninput(1);u.onchange=()=>{g[r.A]=u.value;r.ba&&r.ba()};r.min&&(u.min=r.min,
u.max=r.max)}else se(d,u=>{g[r.A]=u?1:0;r.ba&&r.ba(u)},"true"==c||1==c);O("div",d,r.i)}b=M("div",a,"position:relative;padding-top:44px");c=L("div",a);let k=Lg(L("div",c),g.soundRange);k.oninput=kl;k.oninput();k.addEventListener("input",()=>{vc.gain.value=S(k)/100;g.soundRange=k.value});O("div",c,81);let q=Lg(L("div",c),g.musicRange);q.oninput=kl;q.oninput();q.addEventListener("input",()=>{Ec.volume=S(q)/100;g.musicRange=q.value});O("div",c,80);O("span",b,833,"position:absolute;top:4px;left:19px;font-size:11px;color:#ffd75d8a");
d=[{i:"Original",A:0},{i:"Orchestral version by Pau Garriga",A:4,a:"https://www.youtube.com/watch?v=zNg7e1N7ZZo"},{i:"Sharp Rain version",A:1,a:"https://www.youtube.com/user/rainheart666787/featured"},{i:"Diemiurgo additional track",A:2,a:"https://soundcloud.com/diemiurgo/tzar-adp-final"},{i:"Remastered",A:3},{i:"Mute",A:"mute"}];c=g.favMusic;let t;for(let r of d){let u=se(b,()=>{g.favMusic=r.A;t==u?(t.checked=1,Pf(t,0)):(t&&(t.checked=0,t.style.backgroundPositionY=""),t=u,Gc())},r.A==c);r.A==c&&
(t=u);d=L("div",b,!r.a&&r.i||"");r.a&&(d=L("a",d,r.i),d.href=r.a,d.target="_blank")}zf=L("button",a);zf.className="closeIcon";zf.onclick=()=>{R(a.parentNode.parentNode);if(!Q&&!Cf)D[99]();$g=!1;ag()}}m("playingMenu").parentNode.parentNode.style.display=""}}function fe(){location.href=""}function ll(){return parseInt(g.color.substr(1),16)}function ml(a){for(var b=gc(D[59](a.length),a.length),c=0;c<a.length;c++)b[c]=a[c]}
window.nlsndts=function(a,b,c){a=di(a,4*b);b=new Uint8Array(2+a.length);b[1]=c;b.set(a,2);p(b);G(33,b)};
Pb=function(){var a=Xc("",1);a.id="gameForm";let b=M("div",a,"padding:16px;background:#ffffff08;box-shadow: 0 0 20px #000;border:1px solid rgb(243 205 90/8%);display:grid;grid-template-columns:auto auto;gap:14px;text-align:right;font-size:12px;align-items:center");O("span",b,86);let c=L("input",b);c.spellcheck=!1;c.value=g.gameDescription||fg(N(563),l.name);c.Nc=29;O("span",b,87);let d=M("input",b,"width:39px");d.type="number";d.min=2;d.max=80;d.value=8;O("span",b,85);let e=se(b,()=>{},!1),f;g.sid&&
(O("span",b,440),f=se(b,()=>{},!1));O("button",a,2,"margin-top:18px;font-size:14px;padding:8px;color:#0f0;text-transform:uppercase;width:100%").onclick=()=>{var h=c.value,k=d.value,q=e.checked,t=f&&f.checked;if(D){Vb();ag();l.u=1;l.B={description:h.substr(0,30),max:parseInt(k),lc:q,oc:t};2>l.B.max&&(l.B.max=2);80<l.B.max&&(l.B.max=80);g.gameDescription=l.B.description;F.host=!0;h=l.B;nl();k=h.max;q=h.lc;t=h.oc;var r=l.name;let v=Oa(h.description);r=Oa(r);var u=new ArrayBuffer(5+v.length+r.length);
u=new Uint8Array(u);u[1]=k;u[2]=q;u[3]=t;u[4]=v.length;u.set(v,5);u.set(r,5+v.length);k=ol(0,u);La("crt game: "+h.description);pl?ql(k):(Yk(),F.C.send(k));C.l=1;l.jb=!0}Hb(a)}};function ee(){Vh&&Q&&ci();D[176]()}
window.svggme2=function(){var a=D[42](),b=hc(),c=di(a,b[0]);b=b[1];p(c,a);if("true"==g.multithreading){a=c;c=new Uint8Array(c.length);for(var d=0;d<c.length;d++)c[d]=a[d]}c=new Blob([new Uint32Array([b]),c],{type:"application/octet-binary"});b=URL.createObjectURL(c);c=document.createElement("a");c.style="display: none";c.href=b;b="savegame";Q&&(D[240](0),b=Vd||"map");c.download=b+".tzared";c.click()};
function Jf(a,b){a=URL.createObjectURL(a);var c=document.createElement("a");c.style="display: none";c.href=a;c.download=b;c.click()}function rl(){for(var a=document.getElementsByClassName("onlPlayer"),b=0;b<a.length;b++)J(a[b]);1==D[70]()-D[68]()?(sl.L=void 0,C.id=void 0,C.l=0,l.B=void 0,F.close(),$f(5),l.u=0,D[69](1),Qk()):(C.hc||Gk(),G(7),D[64](~~(1E4*Math.random())))}var tl,gl;
function ul(){if(!gl||C.s){if(vl){for(let a of vl.children)a&&(a.style.width="",a.style.opacity="");vl.style.cssText=""}clearInterval(ul.Ta);m("wtr")&&(m("wtr").textContent=el?wl(el):N(526),m("quitbutton").dataset.title="")}else gl--,9>=gl&&1<=gl&&rc("crusade"),tl.innerHTML=gl}window.hdpsnd=function(a,b,c){a=gc(a,b);(c=xl(c))&&(c.u||F.host)&&c.send(a)};var ck,dk,tb;
function Lk(){!Ae&&F.host&&G(27);if(!Q){let a=D[166]();a&&(ck=L("span",m("topinfo"),`<span style='font-size:15px'>\u262e</span> ${a}:00`));n[8]&&(dk=L("span",m("topinfo"),"","",1))}ag();m("alert")&&P("alert");m("waitList")&&Hb(m("waitList"));C.s=1;C.I=Date.now();Lc();Q||Ic();Nk=!1;D[41]();E||Hj();E&&Ta("If you have graphic problems go to #Settings and change GPU to WebGL2")}window.startMovement0=Lk;
function ng(){let a=L("div",document.body);a.className="gifsearch";let b=L("input",a);b.type="text";b.placeholder="\ud83d\udd0e\ufe0e";b.focus();let c=L("div",a),d=L("div",c),e=L("div",c),f=0,h=0,k=L("button",a);k.className="closeIcon";k.onclick=()=>J(a);let q=async t=>{var r=`https://g.tenor.com/v1/search?q=${b.value}&key=${"LIVDSRZULELA"}&limit=${20}`;f?r+="&pos="+20*f:f=0;r=await (await fetch(r)).json();if(t==h){t=1;for(let u of r.results)r=L("img",t?e:d),r.src=u.media[0].nanogif.url,r.onclick=
()=>{p(u);og(u.media[0].gif.url);J(a)},t^=1}};c.onscroll=function(){c.offsetHeight+c.scrollTop>=c.scrollHeight&&(f++,q(h))};b.oninput=()=>{ub(e);ub(d);f=0;h++;q(h)}}var ae=document.getElementsByTagName("main")[0],$g=!1;function ag(){$g=!1;ae.style.cssText=""}function Xk(){P("game");fl();for(var a=document.getElementsByClassName("onlPlayer"),b=0;b<a.length;b++)J(a[b]);sl.L=void 0;Ea();C.id=void 0;C.l=0;l.B=void 0;F.close();$f(5);l.u=0;D[69]()}
function yl(a){a=parseInt(a);if(2>a||!a)a=2;80<a&&(a=80);m("mmplayers").innerHTML=a;a!==l.B.max&&(l.B.max=a,zl());return a}window.updateMax=yl;function Al(){var a=`<p id="onlineTopInfo"></p>
<h3 id="wtr"></h3>
<div id="multi21">
<table class="players">
<thead>
${'<tr style="font-size:16px;text-transform:uppercase;color:var(--color1);border-bottom:2px solid #6e6e6e3b;"><td></td><td></td><td style="padding:15px 11px;">'+(!D[67]()&&N(103)||"")+'</td><td id="onltms">'+N(21)+' <span id="teamlock"></span></td><td id="onlrd">'+N(543)+"</td></tr>"}
</thead>
<tbody id="multiplayertable">
</tbody>
</table>
<div id="chat">
<div id="rominfo" style="font-size:13px;margin-left:10px;color:#ad995f"></div>
<ul id="msgs">
</ul>
<input id="msginput" type="text" autocomplete="off" placeholder="chat"/>
</div>
</div>
<div id="showGameInfo"></div>
<div id="buttons"></div>
<div id="gvw"></div>
`;return m("game")?!1:(a=L("div",document.getElementsByTagName("main")[0],a),a.id="game",a.className="playermenu",!0)}var Sk,Bl;function Cl(){if(Ek)if(2!=Sk&&9!=Sk){var a=D[70](),b=4==Dl?4:5==Dl?1:2,c=~~(a/b),d=1==b?N(717):c;a%=b;for(let e=0;e<b-1;e++)d+="v"+(c+(0<a?1:0)),a--;m("rominfo").innerHTML=d}else m("rominfo").innerHTML=N(717);else{b=jb(kb);c="";d=!0;for(a=1;64>a;a++)1<b[a]&&(d=!1),b[a]&&(c&&(c+="v"),c+=b[a]);if(!d)for(a=0;a<b[0];a++)c+="v1";m("rominfo").textContent=d?N(717):c}}
window.rminfo=Cl;var El;
function Fl(){if(Al()){m("teamlock").onclick=Gl;var a=m("gvw");let b=L("div",a,"\u25bc [- - -]");a=L("button",m("chat"),"GIF");a.className="gif";a.onclick=ng;b.onclick=()=>{El?(b.innerHTML="\u25bc [- - -]",R(m("gameList"))):(b.innerHTML="\u25b2 [- - -]",m("gameList").show());El=!El};tg=m("msgs");m("msginput");m("msginput").addEventListener("keyup",function(c){13===c.keyCode&&og()})}else P("multi21"),m("multiplayertable").innerHTML="",m("showGameInfo").innerHTML="";m("gvw").appendChild(m("gameList"));El?
m("gameList").show():R(m("gameList"));m("onlrd").style.cssText=Rk?"text-align:center":"display:none";m("onltms").style.cssText=Ek?"display:none":""}var Hl,Il,Jl=()=>"*Score = sum of the individual score of the last 16 games divided by 16<br>*Play at least one match in the last three weeks to be on this ranking";
function Kl(){mb?G(34,Ll(0)):F.C.addEventListener("open",()=>G(34,Ll(0)));let a=Xc("",2);a.id="rank";a.style.maxWidth="630px";a.style.minHeight="900px";let b=M("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=["Deiv 1500","PRO LEAGUE 2024",N(890),"Wall of banneds"],d=[0,7,8];for(let e=0;e<c.length;e++){let f=L("button",b,c[e]);e||(f.style.color="#ffca26");f.onclick=()=>{if(!f.style.color){Hl.style.visibility="hidden";for(let h of b.children)h.style.color="";f.style.color="#ffca26";void 0==d[e]?G(53):
G(34,Ll(d[e]));Il.innerHTML=Jl()}}}Hl=L("div",a);Il=L("span",Hl.parentNode,Jl(),"font-size: 12px; color: rgb(211, 211, 211); height: 35px; display: block;")}var Ml;
function Sb(){mb?G(58,Ll(0)):F.C.addEventListener("open",()=>G(58,Ll(0)));let a=Xc("",2);a.id="lastgames";let b=M("span",a,"display:flex;gap:7px;flex-wrap:wrap"),c=[N(556),N(899),Nl(1)],d=0;for(let e of c){let f=d,h=L("button",b,e);h.onclick=()=>{if(!h.style.color){for(let k of b.children)k.style.color="";h.style.color="var(--color1)";G(58,Ll(f))}};d++}b.children[0].style.color="var(--color1)";Ml=L("div",a)}function ol(a,b){b?b[0]=a:b=new Uint8Array([a]);return b}
function G(a,b){b?b[0]=a:b=new Uint8Array([a]);mb&&F.C.send(b)}function Ll(a){let b=new Uint8Array(2);b[1]=a;return b}let Ol="AD AE AF AG AI AL AM AO AR AS AT AU AW AX AZ BA BB BD BE BF BG BH BI BJ BL BM BN BO BR BS BT BV BW BY BZ CA CC CD CF CG CH CI CK CL CM CN CO CR CT CU CV CW CX CY CZ DE DJ DK DM DO DZ EC EE EG EN ER ES ET EU FI FJ FK FM FO FR GA GB GD GE GF GG GH GI GL GM GN GP GQ GR GS GT GU GW GY HK HM HN HR HT HU ID IE IL IM IN IO IQ IR IS IT JE JM JO JP KE KG KH KI KM KN KP KR KW KY KZ LA LB LC LI LK LR LS LT LU LV LY MA MC MD ME MF MG MH MK ML MM MN MO MP MQ MR MS MT MU MV MW MX MY MZ NA NC NE NF NG NI NL NO NP NR NU NW NZ OM PA PE PF PG PH PK PL PM PN PR PS PT PW PY QA RE RO RS RU RW SA SB SC SD SE SG SH SI SJ SK SL SM SN SO SR SS ST SV SW SX SY SZ TC TD TF TG TH TJ TK TL TM TN TO TR TT TV TW TZ UA UG UM US UY UZ VA VC VE VG VI VN VU WF WS WW XK YE YT ZA ZM ZT ZW XX".split(" ");
(async function(){let a;if(g.CCID)a=parseInt(g.CCID);else{let b=(await (await fetch("https://tza.red/cdn-cgi/trace",{mode:"cors"})).text()).split("loc=")[1].substr(0,2);a=Ol.indexOf(b);g.CCID=a}mb?G(36,Ll(a)):F.C.addEventListener("open",()=>G(36,Ll(a)))})();function xb(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255;a[b+3]=c>>24&255}var Ae;function Pl(a,b,c){a[b]=c&255;a[b+1]=c>>8&255;a[b+2]=c>>16&255}function Ql(a){let b=new Uint8Array(4);Pl(b,1,a);return b}
function Ib(a){a=Oa(a);var b=new ArrayBuffer(1+a.length);b=new Uint8Array(b);b.set(a,1);return b}function zb(a,b){b=Oa(b);var c=new ArrayBuffer(4+b.length);c=new Uint8Array(c);Pl(c,1,a);c.set(b,4);return c}function al(a){return(new TextDecoder).decode(a)}function Rl(a,b){a=new Uint8Array(a.buffer,b||1);return al(a)}function Sl(a,b,c){a=new Uint8Array(a.buffer,b,c);return al(a)}function $k(a,b){return a[b+2]+(a[b+1]<<8)+(a[b]<<16)}
function Tl(a,b){return a[b+3]+(a[b+2]<<8)+(a[b+1]<<16)+(a[b]<<24)}function Ul(a){return $k(a,1)}function Vl(a){var b=g.name;a=Oa(a);b=Oa(b);let c=Oa("");var d=new ArrayBuffer(3+a.length+b.length+c.length);d=new Uint8Array(d);d[1]=a.length;d[2]=b.length;d.set(a,3);d.set(b,3+a.length);d.set(c,3+a.length+b.length);return d}
function Wl(a){let b=Oa(g.name),c=Oa("");var d=new ArrayBuffer(6+b.length+c.length);d=new Uint8Array(d);d[1]=0;d[2]=b.length;Pl(d,3,a);6<d.length&&(d.set(b,6),d.set(c,6+b.length));return d}function Jb(a){let b=new Uint8Array(5);xb(b,1,a);return b}function Oa(a){return(new TextEncoder).encode(a)}window.kllf5=function(a){setTimeout(D[203],8500,a)};
sb.prototype.close=function(a){for(var b=this.G.slice(0),c=0;c<b.length;c++)b[c].close(1),p(b[c].timeout),b[c].timeout&&clearTimeout(b[c].timeout);if(a&&F.C)return F.C.close();this.G.length=0;G(1);this.host=!1};function zl(){var a=l.B.max-D[68]();G(8,Ll(a))}function Xl(a){try{return JSON.parse(a)}catch(b){return p(b),!1}}window.NHretransmit=function(a,b,c){if(F.host){a=gc(a,b);b=F.G;for(var d=0;d<b.length;d++)b[d].id!=c&&b[d].send(a);Yl()}};var vb;
function Zl(){vb=1;for(var a=F,b=a.G.slice(0),c=0;c<b.length;c++){var d=b[c];d.closed=!0;d.S&&d.S.close()}p(a.C);a.C.close();Lc()}window.nhcleanclose=Zl;
var qb=[async function(a,b){a=Ul(b);b=Rl(b,4);if(!xl(a)){var c=Xl(b);c&&(p(c),b=$l(a),b.setRemoteDescription(new RTCSessionDescription(c)),c=await b.createAnswer(),await b.setLocalDescription(c),p(c),G(4,zb(a,JSON.stringify(c))))}},async function(a,b){a=Ul(b);b=Rl(b,4);if(a=am(a))if(b=Xl(b))p(b),b=new RTCSessionDescription(b),await a.setRemoteDescription(b)},async function(a,b){a=Ul(b);b=Rl(b,4);if(a=am(a))if(b=Xl(b)){p(b);try{await a.addIceCandidate(b)}catch(c){console.error("Error adding received ice candidate",
c)}}},async function(a,b){var c=Ul(b);a=$k(b,4);l.$a="#"+Sl(b,8,b.length-(c?8:20));location.replace("#"+l.$a);Ae=b[7];D[66](a);l.M=a;p("message",c,Ae);if(c)Ek=Gg=0,D[204](Ae),Ae?(a=parseInt(c),b=$l(a,!0),c=await b.createOffer(),await b.setLocalDescription(c),G(6,zb(a,JSON.stringify(c)))):(bm=c,cm(c));else{("1"!=g.muteroom||C.s)&&rc("e_barrack1");Ae=0;Ek=1;bm=0;el=Tl(b,b.length-12);Gg=b[b.length-8];Bl=b[b.length-7];Rk=b[b.length-6];dm(1);a=b[b.length-2];c=b[b.length-1];yb=b=$k(b,b.length-5);Sk=a;m("multi21").className=
9==Sk||7==Sk?"prs_br":"";D[204](0,1,Gg,Sk);D[55](c+1);n=Ca[a].slice();if(Gg&&7==Sk){c=Bl/255*2E3+1E3;c=100*Math.floor(c/100);for(let d=0;4>d;d++)n[1+d]=c;n[18]=10}p(n);a&&(n[46]=b+2E3*Bl,a=[0,0,0,0,2,4,4,4,6,7,8],n[6]=a[Bl%a.length]);Fk()}},function(a,b){Ae=b[4];a=Ul(b);b=Rl(b,5);p(a,b);l.$a="#"+b;dm();setTimeout(em,5E3);D[204](Ae);D[66](a,1);l.M=a;Gk();D[55](l.B.max+1);bl(D[56](0,g.civi||0,ll(),a,0),17,l.name);cl()},function(a,b){fm(b)},function(a,b){a=Ul(b);(a=xl(a))&&gm(a,1)},function(a,b){a=Ul(b);
Ae?(p(a),0!=a||C.s?(a=xl(a))&&a.close():(wb(N(95)),rc("ressurect"))):0==a?(wb(N(95)),rc("ressurect")):(p("del",bm,a),b=Zc(a),D[73](a),gl=0,C.s||(bm==a&&(wb(N(95)),rc("ressurect")),b&&sg(fg(N(94),"<span>"+b+"</span>"),"ff4b4b")))},function(){if(!Nk){Ta("changing host...");F.ea&&(clearTimeout(F.ea),F.ea=void 0);La("change host");D[155]();D[66](l.M,0);G(11);F.host=!1;F.Aa&&(clearTimeout(F.Aa),F.Aa=void 0);for(var a=0;a<F.G.length;a++)F.G[a].closed=!0,F.G[a].close(1);F.G.length=0;hm=void 0}},async function(a,
b){a=Ul(b);b=b[4];p("UPDATE",a,b);if(!Nk){if(a==l.M)p("HOST"),F.Ma=1,F.ea=setTimeout(im,1E4),F.vb=parseInt(b),D[66](l.M,1);else{D[66](l.M,0,1);F.host=!1;b=$l(a,!0);const c=await b.createOffer();await b.setLocalDescription(c);G(6,zb(a,JSON.stringify(c)))}D[154](a)}},function(a,b){a=Ul(b);b=Rl(b,4);p(b);g.sid=a;g.nm=b.substr(0,24);g.name=b.substr(24);m("accb").innerHTML=N(445);l.name=g.name;bl(D[53](ll()),17,l.name);window.onbeforeunload=void 0;location.reload()},function(a,b){wg={};Zk(b);p(wg)},function(){g.sid=
"";g.nm=""},function(a,b){b=b[1];p(b);"string"==typeof b?(Qa("",`Name changed to ${b}`),g.name=b):Qa(fg(N(544),b))},function(){},function(a,b){b=b[1];p(b);pl=b},function(a,b){p(b[1]);b=b[1]-1;a=[96,69,441,519,806,807,900][b];ag();Hb(m("loadingOnline"));$f();Gb(N(a),1)},function(a,b){a=b[1];if(b=jm($k(b,2)))a?(b.onclick=void 0,a=b.children[0].children[0],a.className="redCircle",a.style.cssText="",b.className="",b.I=Math.floor(Date.now()/1E3),b.mc&&b.Hb&&(b.style.filter="hue-rotate(311deg)"),b.style.height=
"0px",b.style.opacity="0",b.style.border="none",b.children[3].children[2].innerHTML=b.children[3].children[0].innerHTML,b.children[1].children[0]&&R(b.children[1].children[0]),setTimeout(km,1E3,b)):b.offsetParent?(b.style.height="0px",b.style.opacity="0",setTimeout(J,1E3,b)):J(b)},function(a,b){a=b[1];if(b=jm($k(b,2))){if(b.onclick&&b.eb){var c;6>a?c=6:c=a+(2-a%2);b.children[3].children[2].innerHTML=c}c=b.children[3].children[0];c.offsetParent&&(c.style.color=parseInt(c.innerHTML)<a?"#0f0":"red",
setTimeout(lm,250,c));c.innerHTML=a}},function(a,b){a=b[1];if(b=jm($k(b,2)))b=b.children[3].children[2],b.offsetParent&&(b.style.color=parseInt(b.innerHTML)<a?"#0f0":"red",setTimeout(lm,250,b)),b.innerHTML=a},function(a,b){a=Rl(b);Qa("",`Name changed to ${a}`);g.name=a},function(a,b){a=Ul(b);let c=$k(b,4),d=b[7],e=b[8],f=Sl(b,9,d);b=Sl(b,9+d,e);p(c,b,f);hl||=L("div",m("game"),`<div style="margin-bottom:14px;color:var(--color1)">${N(520)}</div>`,"position: fixed; background: rgba(0, 0, 0, 0.55); padding: 17px 24px; box-shadow: var(--boxsp); text-align: center; z-index: 9; right: 0px; top: 81px; border: 1px solid #f3cd5a1f; border-right: none;");
L("div",hl,Hg(b,f,c),"margin-top:6px").O=a},function(a,b){a=Ul(b);if(hl){for(let c of hl.children)if(c.O==a){J(c);break}1==hl.children.length&&(J(hl),hl=void 0)}},function(a,b){a=Ul(b);var c=xl(a);c&&!c.closed&&(c.S&&gm(c),mm(c,a,new Uint32Array(b.buffer,4)))},function(a,b){if(!ob){a=Ul(b);var c=wg[a];c&&mm(c,a,new Uint32Array(b.buffer,4))}},function(a,b){tb=Date.now();a=Tl(b,1);1==ob?(b=new Uint8Array(9),xb(b,1,D[271]()),xb(b,5,10*a),G(56,b),ob=2):(D[205](a),performance.now())},function(a,b){yb=
$k(b,1);nb=Tl(b,4);Ek&&Lk();D[206]()},function(){Oi(ze,Math.round(performance.now()-Ce)+"ms")},function(a,b){Zk(b,1)},function(a,b){a=Ul(b);b=b[4];let c=D[207](a,b);p(c,b);c&&a!=l.M&&nm[c-1]&&(nm[c-1].innerHTML=Bk(b))},function(a,b){a=Ul(b);let c=b[4],d=b[5];b=b[6];let e=D[208](a,c,d,b);e&&a!=l.M&&om[e-1]&&(om[e-1].children[0].style.color="rgb("+c+","+d+","+b+")")},function(){if(vl){for(let a=0;a<vl.children.length;a++)a!=Dl&&(vl.children[a].style.width="0px",vl.children[a].style.opacity="0");vl.style.Hc=
"0px"}m("wtr").innerHTML=N(529);m("quitbutton").dataset.title=N(736);tl=L("span",m("wtr"),10,"display:inline-block;width:16px;text-align:right;color:var(--color1)");ul.Ta&&clearInterval(ul.Ta);gl=10;ul.Ta=setInterval(ul,1E3)},async function(){if(Gg){if(!Sk){var a=1==Dl?7:2==Dl?8:3==Dl?3:4==Dl?6:5==Dl?5:0;Sk=a;n=Ca[a].slice();n[46]=yb+2E3*Bl;a=[0,0,0,0,2,4,4,4,6];n[6]=a[Bl%a.length]}8==Sk&&(a=await (await fetch("nehhon/deiv_no_magic.tzmod")).arrayBuffer(),ji(a));D[204](0,1,Gg,Sk)}D[209]()},function(a,
b){p(b,"teams");a=(b.length-1)/2;for(let c=1;c<a+1;c++)D[210](c,b[c],b[c+a])},function(a,b){a=1;ub(Hl);Hl.style.visibility="";Hl.style.display="grid";var c=L("div",Hl);L("div",c);L("div",c);L("div",c);L("div",c,"<div>"+N(478)+"</div>");c=1;let d;if(1<b.length){do{let q=$k(b,a);a+=3;let t=b[a+1]+(b[a+0]<<8);a+=2;var e=b[a+1]+(b[a+0]<<8);a+=2;let r=b[a++];var f=b[a++],h=Sl(b,a,f);a+=f;f=b[a++];var k=Sl(b,a,f);a+=f;let u=b[a++];f=L("div",Hl);let v=c;1==q&&(d=f,c--,v=99);let w=L("div",f),A;A=3>=v?"#f0f":
10>=v?"#0f0":20>=v?"#ff0":"#fff";L("div",w,1<q&&v||"-",99<v&&"font-size:10px").className="pos";L("div",w,"","background:"+A).className="plc";L("div",f,Hg(k,h,u?Ig[u-1]:q));h=L("div",f);h.className="plshape";for(k=0;k<r;k++)L("div",h,"",e&1<<k&&"color:#00db00");e="";1<q&&(e=(Math.round(10*t/16)/10).toString().split("."),e=e[0]+".<span style='font-size:10px'>"+(e[1]?e[1].charAt(0):0)+"</span>");L("div",f,`<div>${e}</div>`);c++}while(a<b.length)}d&&Hl.appendChild(d)},function(a,b){a=Ul(b);b=b[4];wg[a].state=
b;a!=l.M&&(a=pm[wg[a].Ha])&&(a.children[0].children[0].checked=b)},function(){Gb(N(714),1);Zl()},function(){Gb(N(711),1)},function(){Gb(N(710),1)},function(a,b){qm(b)},function(){qm()},function(a,b){rm.value=Rl(b,1)},(a,b)=>{a=0;for(let c=1;c<b.length;c++){if(sm){let d=sm[c-1];d&&(d.textContent=b[c],d.style.color=b[c]?"":"#787878")}b[c]>b[a+1]&&(a=c-1)}Dl=a;Cl()},(a,b)=>{Cb.innerHTML=N([809,810][b[1]])},(a,b)=>{ub(Hl);Hl.style.visibility="";Hl.style.display="block";a=1;let c=L("section",Hl);Il.textContent=
"";do{var d=$k(b,a);a+=3;var e=b[a++],f=b[a++];let k=Sl(b,a,f);a+=f;var h=b[a++];f=Sl(b,a,h).split(",");a+=h;h=L("div",c);L("span",h,Hg("",k,d));L("img",h).src=`nehhon/Q${e}.webp`;L("span",h,"<span style='font-size:14px'>\u2020</span> "+f[1],"font-size:11px;color:red");d=L("div",h);for(e=2;e<f.length;e++)L("span",d,f[e])}while(a<b.length)},(a,b)=>{if(a=wg[Ul(b)])a:{b=new Uint32Array(b.buffer,4);!a.N&&4E3<b[0]&&(a.N=new Uint32Array(b[0]),a.ga=0);if(a.N)if(a.N.set(b,4E3*a.ga),a.ga++,4E3*a.ga>=a.N.length)b=
a.N,a.N=void 0;else break a;b=new Uint32Array(b.buffer,4+b.byteOffset);a.Ua=Date.now();ml(b);D[270]();ob=0;for(let c of pb)rb(c);pb.length=0}},(a,b)=>{D[269](Tl(b,4),Tl(b,8),$k(b,1))},(a,b)=>{a=1;var c=Ml.parentNode;Ml.remove();Ml=L("div",c);if(1<b.length){do{c=L("div",Ml);a+=3;let t=b[a++],r=b[a++];a++;var d=Tl(b,a);a+=4;var e=Tl(b,a);a+=4;let u=b[a++];var f=L("div",c);L("span",f,{7:"Pro League",8:N(890),9:"Battle Royale"}[t]||"Deiv 1500");L("span",f,tm(e),"color:#ffffff7a");L("span",f,Nc(d));d=
L("div",c);let v=new Uint32Array(50*u);e=0;var h=void 0;let w=[];f=[];f[r]=M("div",d,9==t?"width:100%":"");f[r].className="winner";for(let A=0;A<u;A++){var k=b[a++];let x=k?Sl(b,a,k):"";a+=k;var q=b[a++];k=Sl(b,a,q);a+=q;q=$k(b,a);a+=3;h=b[a++];let y=b[a++],B=b[a++],I=b[a++],H=$k(b,a);a+=3;f[h]||(f.length&&9!=t&&L("div",d,"VS","color:var(--color1);font-size:14px;width:auto"),f[h]=M("div",d,9==t?"width:max-content":""));h=f[h];L("span",h,Hg(x,k,y?Ig[y-1]:q));for(h=0;50>h;h++)v[e++]=Tl(b,a),a+=4;w.push({name:k,
mb:x,role:y,id:q,Sb:B,race:I,color:H})}c.onclick=()=>{ug(0,{data:v,J:w,wc:r})}}while(a<b.length)}},(a,b)=>{a=$k(b,1);b=Tl(b,4);yb==a&&m("wtr")&&(el=b,m("wtr").textContent=wl(el));if(a=jm(a))a.children[1].children[0].textContent=wl(b)}];function tm(a){a=new Date(1E3*a);return("0"+a.getDate()).slice(-2)+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear().toString()+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)}
var wl=a=>{57600>a-Date.now()/1E3?(a=new Date(1E3*a),a=N(898)+" "+(("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2))):(a=new Date(1E3*a),a=(new Intl.DateTimeFormat(l.Wa||navigator.language,{weekday:"short",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})).format(a),a=a.replace(/,/g,""),a=a.charAt(0).toUpperCase()+a.slice(1));return a};
window.gtccles=(a,b,c)=>{b=gc(a,b);a=new Uint32Array(b.length+1);a[0]=a.length;a.set(b,1);for(let d=0,e=Math.ceil(a.length/4E3);d<e;d++){b=a.length-4E3*d;4E3<b&&(b=4E3);b=new Uint32Array(a.buffer,16E3*d,b);let f=new Uint32Array(b.length+1),h=new Uint8Array(f.buffer);f.set(b,1);h[0]=55;Pl(h,1,c);F.C.send(f)}};let Dl;var Ce,ze,hl;function lm(a){a.style.color=""}var pl,wg=NaN;window.clrNHtimer=function(){clearTimeout(F.Aa);F.Aa=void 0};
function im(){clearTimeout(F.ea);F.ea=void 0;F.Aa=setTimeout(D[179],3E4);F.host=!0;setTimeout(em,5E3);D[66](l.M,1,1);em()}window.checkAlive=function(a){xl(a)||(D[73](a),p("KILL",a))};function am(a){if(a=xl(a))return a.S}function xl(a){for(var b=F,c=0,d=b.G.length;c<d;c++)if(b.G[c].id==a)return b.G[c]}
function um(a,b,c){this.id=a;this.uc=[];b&&(this.u=b);if(c){this.S=c;p(b,565656);var d=this;b?(this.channel=c.createDataChannel("nehhof",{ordered:!0}),vm(d)):c.ondatachannel=function(e){d.channel=e.channel;vm(d)}}F.G.push(this);c||(G(9,Ql(this.id)),this.open())}function wm(a){if(!a.closed){if(12E3<Date.now()-a.Ua)return a.close(),p("TIMEOUT");a.timeout=setTimeout(wm,12E3,a)}}function cm(a){bl(D[62](),20,l.name);D[61](a,g.civi||0);dm(1)}
um.prototype.open=function(){this.Ma=!0;this.Ua=Date.now();this.Jb&&clearTimeout(this.Jb);p("DATACHANNEL OPEN");p(this);this.timeout=setTimeout(wm,12E3,this);if(C.s){if(void 0==F.ea&&D[178]()||!D[163](this.id))return this.close();F.Ma++;void 0!==F.ea&&(p(F.Ma,F.vb,this.id),F.Ma==F.vb&&im())}else this.u&&(l.jb=!0,cm(this.id))};var hm;
um.prototype.send=function(a){var b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);if(this.channel){if("open"==this.channel.readyState)for(let c=0,d=Math.ceil(b.length/4E3);c<d;c++){let e=4E3*c;a=b.length-e;4E3<a&&(a=4E3);a=new Uint32Array(b.buffer,4*e,a);this.channel.send(a)}}else hm=b};
function xm(a,b,c){for(let e=0,f=Math.ceil(a.length/4E3);e<f;e++){var d=a.length-4E3*e;4E3<d&&(d=4E3);d=new Uint32Array(a.buffer,16E3*e,d);let h=new Uint32Array(d.length+1),k=new Uint8Array(h.buffer);h.set(d,1);k[0]=b;k[1]=c||0;F.C.send(h)}}function Yl(){hm&&(xm(hm,22),hm=void 0)}window.rlyCheck=Yl;window.nppsnd=function(a,b,c){a=gc(a,b);b=new Uint32Array(a.length+1);b[0]=b.length;b.set(a,1);xm(b,26,c)};um.prototype.close=function(a){console.trace();if(this.S)return this.S.close();a||ym(this)};
function gm(a,b){var c=a.S;if(c){var d=a.channel;d&&(d.onopen=null,d.onmessage=null,d.onclose=null,d.close());c.onicecandidate=null;c.onconnectionstatechange=null;c.oniceconnectionstatechange=null;c.onsignalingstatechange=null;c.Pc=null;c.close();p(a.id);p("ALT-8");a.S=null;a.channel=null;b||G(9,Ql(a.id));a.open()}}
function mm(a,b,c){!a.N&&4E3<c[0]&&(a.N=new Uint32Array(c[0]),a.ga=0);if(a.N)if(a.N.set(c,4E3*a.ga),a.ga++,4E3*a.ga>=a.N.length)c=a.N,a.N=void 0;else return;c=new Uint32Array(c.buffer,4+c.byteOffset);a.Ua=Date.now();ml(c);D[60](b)}
function vm(a){const b=a.id,c=a.channel;c.binaryType="arraybuffer";p(a,"SETUP");c.onopen=function(){a.open()};c.onmessage=function(d){"closed"==c.readyState||a.closed||(d=new Uint32Array(d.data),mm(a,b,d))};c.onclose=function(d){ym(a);c.onmessage=null;p("DATACHANNEL CLOSE",a.id,d)};c.onerror=function(d){p(d,"ONERROR")};c.onbufferedamountlow=function(){var d=a.uc;d.length&&(d=d.shift(),c.send(d),p("SEND22",d))}}
function $l(a,b){const c=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),d=new um(a,b,c);d.Jb=setTimeout(function(){gm(d)},6E3);c.onicecandidate=function(e){p("ICE",e);e.candidate&&G(5,zb(a,JSON.stringify(e.candidate)))};c.onconnectionstatechange=function(e){p(e,c.connectionState,d.closed);d.closed||("connected"==c.connectionState&&(d.ready=!0),"disconnected"==c.connectionState&&ym(d))};c.oniceconnectionstatechange=function(e){p(e);if(!d.closed){p(c.iceConnectionState,
d.id);if(!d.ready&&"failed"==c.iceConnectionState)return gm(d);"failed"!=c.iceConnectionState&&"disconnected"!=c.iceConnectionState||ym(d)}};c.onsignalingstatechange=function(e){p(e);d.closed||"closed"==c.signalingState&&ym(d)};return c}
function zm(){function a(k){for(var q=-1,t=0,r=k.length;t<r;t++)q=q>>>8^b[(q^k.charCodeAt(t))&255];return(q^-1)>>>0}let b="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ").map(function(k){return parseInt(k,16)}),
c=navigator.language,d=Intl[atob("RGF0ZVRpbWVGb3JtYXQ=")]().resolvedOptions()[atob("dGltZVpvbmU=")],e=navigator.hardwareConcurrency||0,f=navigator.deviceMemory||0;if(z){var h=z.getExtension(atob("V0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mbw=="));h=z.getParameter(h[atob("VU5NQVNLRURfUkVOREVSRVJfV0VCR0w=")]);h.replaceAll&&(h=h.replaceAll(",",".|"))}return[a(h+d),a(e+"."+f+h),a(e+"."+f+h+c),a(e+"."+f+h+d),a(h+d+c)]}
var Am,nl=()=>{if(!Am){var a=zm(),b=new Uint8Array(1+4*a.length);for(let c=0;c<a.length;c++)xb(b,4*c+1,a[c]);G(48,b);Am=1}};sb.prototype.send=function(a){this.C.send(JSON.stringify(a))};function Ub(a){var b=F;console.log("id",a);if(1!=b.C.readyState)return b.C.addEventListener("open",()=>Ub(a));D[266](1);Vh=void 0;nl();b=new Uint8Array(5);b[1]=parseInt(g.civi)||0;Pl(b,2,ll());G(31,b);b=a.length?ol(3,Vl(a.substr(1))):ol(3,Wl(a));pl?ql(b):(Yk(),F.C.send(b))}
function Bm(){if(!C.s){var a=Math.floor(Date.now()/1E3);for(let c=0;2>c;c++){var b=Lb[c].children;for(let d of b)if(b=d.children[2])void 0!=d.I&&(b.innerHTML=Math.floor((a-d.I)/60)+" "+N(558)),!d.I&&d.ab&&3600>d.ab-Date.now()/1E3&&(d.style.filter="",d.ab=void 0)}setTimeout(Bm,5E3)}}var Lb;function jm(a){if(Lb&&!(2>Lb.length))for(let b=0;2>b;b++){let c=Lb[b].children;for(let d of c)if(d.ub==a)return d}}var Nb,Mb,Ob,Nl=a=>a+(N(716)||"v")+a;
function fm(a){if(m("index")){var b=Ul(a),c=Math.floor(Date.now()/1E3);b&&(L("div",m("index"),b).id="ppop");if(a&&4<a.length){b=740>window.innerWidth||650>window.innerHeight?m("index"):Kb;var d=b.scrollTop;let k=4;do{var e=a[k++];let q=a[k++],t=a[k++],r=(a[k++]<<24)+(a[k++]<<16)+(a[k++]<<8)+a[k++],u=(a[k++]<<8)+a[k++];var f=a[k++],h=(a[k++]<<16)+(a[k++]<<8)+a[k++];let v=a[k++],w,A;1==f?w=!0:2==f&&(A=!0);f=w?Nb:Mb;let x=document.createElement("div");t&&80==q&&(x.eb=1,6>e?q=6:q=e+(2-e%2));let y=al(new Uint8Array(a.buffer,
k,v));k+=v;x.eb&&(y=Nl(q/2)+"+");t&&fb&&!x.eb&&(y={"BR 1500":N(484)+" 1500","1V1":Nl(1),"FAST 1V1":N(564)}[y]||y);let B=h;!w&&t&&(x.className="pbl");h=L("div",x);3600<r-Date.now()/1E3&&(x.style.filter="grayscale(1)");x.ab=r;L("div",h,"",!w&&A&&"color:#00c8c8").className="redCircle"+(!w&&" rgr"||"");h=L("div",x,y?Cm(y):N(85),!B&&"color:red");r&&!w&&L("span",h,wl(r));1==g.sid&&(L("button",h,"X","margin-left: 30px; margin-top: -11px; background: rgba(255, 0, 0, 0.38); color: red; font-size: 23px; ").onclick=
()=>Dm(B,0),L("button",h,"X","left: 350px; margin-top: -11px; background: rgba(255, 255, 0, 0.38); color: red; font-size: 23px; ").onclick=()=>Dm(B,1));L("div",x,t&&!w?A?N(64==q?899:556):N(557):~~(u/60)+" "+(N(558)||"min")).className="tbtime";L("div",x,`<span>${e}</span><span>/</span><span>${q}</span>`).className="tbplyrs";t&&w&&2<q&&(x.style.filter="hue-rotate(311deg)");x.ub=B;u=c-u;if(!t||w)x.I=u,x.la=u,w&&(x.la*=-1);x.Hb=A;x.mc=t;!w&&B&&(x.onclick=Wk);B||(x.style.opacity=.5);t&&!w&&(x.la=2E9*q+
(A?1:0));e=!0;for(let I of f.children)if(I.la<=x.la){f.insertBefore(x,I);e=!1;break}e&&f.appendChild(x);f.offsetParent?x.ec=Em:x.style.animation="unset"}while(k<a.length);Ja||(b.scrollTop=d)}Bm.rc||(Bm.rc=!0,setTimeout(Bm,5E3))}}function Em(){this.style.animation="unset";this.ec=void 0}function km(a){Nb.appendChild(a);setTimeout(()=>{a.style.height="";a.style.opacity="";a.style.border=""},250)}
function Fm(){let a=this.D;g.avatar=a;p(this.D);G(19,Ll(a));R(this.parentNode);m("avtimg").src="nehhon/Q"+a+".webp"}
function Fb(){let a=Gb("",1);a.id="account";O("p",a,15,"color:var(--color1)");let b=Sa(a,g.name);b.minLength=1;b.maxLength=32;let c=O("button",a,443,"margin-left:8px;margin-bottom:6px");O("div",a,545,"color:#ccc;font-size:9px");L("button",a,`{${N(703)}} >`,"margin-top:15px;color:#81ff81;font-size:16px;letter-spacing:1px;text-transform:uppercase").onclick=()=>{Hb(a);let h=Xc("",1);Gm=O("div",h,53,"gap:20px;display:flex;flex-direction:column;align-items:flex-start");G(43)};O("p",a,546,"color:var(--color1)");
let d=L("div",a);var e=M("img",d,"cursor:url(nehhon/hand.gif),default;box-shadow:#ff00008f 0px 0px 38px;border:1px solid rgba(255, 0, 0, 0.48);");e.src="nehhon/Q"+(g.avatar||113)+".webp";e.id="avtimg";var f=L("div",L("div",d,"","max-height:216px;overflow-y:auto;width:57px;margin:9px"));f.id="avsel";e.onclick=function(){if(""==f.innerHTML)for(let h=0;199>=h;h++){let k=L("div",f,"");k.onclick=Fm;k.D=h}f.show()};c.onclick=function(){let h=b.value;p(h,"name");h&&G(13,Oa(" "+h))};O("button",a,442,"display:block;margin-top:20px;background:#920000").onclick=
function(){g.sid="";g.nm="";location.reload()}}var Gm,rm;
function qm(a){p(a);var b=Gm;ub(Gm);if(a){let f=g.sid;var c=a[1];let h=$k(a,2),k=f==h;var d=k?Sl(a,8,24):0,e=Sl(a,8+(k?24:0),c);c=8+(k?24:0)+c;Ra(b,e);if(k){e=L("div",b);L("span",e,N(704)+" -> ","color:var(--color1)");rm=Sa(e,d);rm.style.width="216px";rm.style.fontSize="11px";rm.readOnly=!0;let q=M("button",e,"margin-left:9px;width:16px;height:16px;background:url(nehhon/refresh.webp);background-size:cover");q.onclick=()=>{G(42);q.style.visibility="hidden"}}d=L("div",b);L("div",d,N(707)+":","font-size:12px;");
d=M("div",d,"border-left:2px solid rgba(255, 255, 255, 0.19);padding:4px;margin-top:9px;min-width:185px;display:grid;grid-template-columns:repeat(2,max-content);align-items:center;gap:2px 10px");do{let q=$k(a,c);c+=3;e=a[c++];let t=Sl(a,c,e);c+=e;let r=L("div",d,Hg("",t,q),(q==h?"color:var(--color1);":"")+"font-size:11px");if(f==h&&q!=h){let u=L("div",d,"\u00d7","color:red;cursor:url(nehhon/hand.gif),default");u.onclick=()=>{G(44,Ql(q));J(u);J(r)}}else L("div",d);p(t,q)}while(c<a.length);O("button",
b,k?706:712).onclick=()=>{confirm(N(713))&&(G(41),qm())}}else{O("div",b,703,"color:var(--color1)");a=L("div",b);let f=Sa(a,"");f.style.width="159px";f.placeholder=N(704);f.maxLength=32;O("button",a,708,"margin-left:8px").onclick=()=>{let k=f.value;p(k);k&&G(39,Oa(" "+k))};b=M("div",b,"border-top:2px solid #ffffff45;padding-top:20px");let h=Sa(b,"");h.style.width="105px";h.style.textTransform="uppercase";h.placeholder=N(709);h.maxLength=5;O("button",b,705,"margin-left:8px;margin-bottom:6px").onclick=
()=>{let k=h.value;k&&G(40,Oa(" "+k))}}}
function dm(a){if((l.u||a)&&!C.id){Fl();tg.innerHTML="";P("index");ag();Hb(m("loadingOnline"));yd("game");m("multi21").style.display="flex";m("multi21").className="";ag();a=l.$a;p(l.B||NaN);C.id=a;C.l=1;m("buttons").innerHTML="";na(a,"Waiting");Ek?(yd("wtr"),m("wtr").textContent=el?wl(el):N(526)):P("wtr");a=`<span style="margin-left:80px;"><input id="onlineID" type="text"  /><button id="copyButton">${N(385)}</button></span>`;if(l.u){var b=function(d){var e=D[70](),f=!F.G.length&&Ae?1:0;d<e+f&&(d=
e+f);p(d,e);d=yl(d);D[150](d+1);D[58]()};m("onlineTopInfo").innerHTML=` <button id="addAI" style="padding:6px;margin-right:26px;align-self:center;">${N(90)}</button>${a}<span id="spnpld" style="margin-left:auto"><div id="nplayersO"><img src="nehhon/pop.gif" /><span id="mmplayers">${l.B.max}</span><div id="rmmxctrl"><div id="sumpl">&#9650;</div><div id="respl">&#9660;</div></div></div></span>`;m("sumpl").onclick=function(){D[67]()||b(l.B.max+1)};m("respl").onclick=function(){D[67]()||b(l.B.max-1)};
m("addAI").onclick=function(){if(!D[67]()){var d=D[70]();80>d+1&&(d+(F.G.length?0:1)>=l.B.max&&b(l.B.max+1),bl(D[56](0,0,16777216*Math.random(),0,1),17,"AI"),zl(),D[58]())}}}else m("onlineTopInfo").innerHTML=a;var c=L("img",m("onlineTopInfo"));c.src="nehhon/mute.webp";c.onclick=()=>{g.muteroom="1"==g.muteroom?0:1;c.style.opacity="1"==g.muteroom?"1.0":""};c.style.opacity="1"==g.muteroom?"1.0":"";m("copyButton")&&(m("copyButton").onclick=function(){m("onlineID").select();document.execCommand("Copy")});
setTimeout(()=>{m("onlineID").value="http://tza.red/"+location.hash},50);l.u?(location.replace("#"+C.id),m("buttons").innerHTML='<button id="startbutton">'+N(92)+' \u25b6</button><button style="display:none" id="rndmapreturn">'+N(50)+'</button><button id="optionbutton">'+N(48)+'</button><button id="maploadOnline"/>'+N(93).split("|")[0].toUpperCase()+'</button><button id="closebutton">'+N(13)+"</button>",m("startbutton").onclick=rl,m("optionbutton").onclick=oe,m("closebutton").onclick=Xk,m("maploadOnline").onclick=
Hm,m("rndmapreturn").onclick=function(){yd("addAI");m("optionbutton").style.display="inline-table";P("rndmapreturn");D[152](l.B.wb);Gk();b(l.B.wb)}):(m("buttons").innerHTML='<button id="quitbutton">'+N(91)+"</button>",m("quitbutton").onclick=wb)}}var bm;
function ym(a){p(a);console.trace();var b=xl(a.id);b&&!b.closed&&a==b&&(b.closed=!0,!b.u||l.u||C.s?(p(b),F.host&&(uk(F.G,b),D[73](b.id)),p(b.u,C.s,"admindel"),G(14,Ql(b.id)),b.u&&C.s&&!Nk&&G(10,Ql(b.id)),C.s||(a=Zc(b.id))&&L("li",tg,fg(N(94),a),"color:#ff4b4b")):(wb(N(95)),rc("ressurect")))}function Dm(a,b){confirm("AUSB")&&(a=Jb(a),a[4]=b,G(16,a))}window.thereIsAnIdiot=function(a){p(a);if(l.M==a)return Qa(N(97)),Xk();(a=xl(a))&&a.close()};
var om=document.getElementsByClassName("ucolor"),Im=document.getElementsByClassName("username"),nm=document.getElementsByClassName("race"),Jm=document.getElementsByClassName("team");function em(){F.host&&Ae&&(D[156](),em.I=Date.now(),setTimeout(em,5500))}window.pong=function(a){var b=Date.now()-em.I;xl(a)&&(D[157](a,b),p("pong"),m("game")&&cl())};
function sl(a){if(l.u&&"BUTTON"!=a.target.tagName&&"DIV"!=a.target.tagName&&"ucolor"!=a.target.className){sl.L&&(J(sl.L),sl.L=void 0);var b=a.pageX;a=a.pageY;var c=this.Ha;p(c);var d=L("div",m("game"));d.style.top=a+"px";d.style.left=b+"px";d.className="onlPlayer";sl.L=d;p(this.Za,this.Ha);if(this.Za.name)O("button",d,100).onclick=function(){D[71](c);l.Sc.Fc("maxPlayers",D[70]());J(d);sl.L=void 0};else{var e=this.Za;b=document.createElement("button");b.onclick=function(){D[74](c,-1);J(d);sl.L=void 0};
b.innerHTML=N(101);d.appendChild(b);b=document.createElement("button");b.onclick=function(){D[74](c,1);J(d);sl.L=void 0};b.innerHTML=N(102);d.appendChild(b);this.Yb||(b=document.createElement("button"),b.onclick=function(){p(22222,e);D[71](c);zl();J(d);sl.L=void 0},b.innerHTML=N(100),d.appendChild(b),e&&(L("button",d,"BAN").onclick=function(){p(22222,e);G(18,Ql(e));D[71](c);J(d);sl.L=void 0}))}b=document.createElement("button");b.onclick=function(){J(d);sl.L=void 0};b.innerHTML=N(13);d.appendChild(b)}}
function cl(){var a=m("multiplayertable");if(a){var b=D[28]()-1||14;D[180]();var c=58;if(Ek){6<b&&(b=6);var d=D[70]();6<=d&&(b=d+2-d%2,d=D[28]()-1,b>d&&(b=d))}7<b&&(c=54);8<b&&(c=49);9<b&&(c=44);10<b&&(c=42);11<b&&(c=39);12<b&&(c=37);14<b&&(c=35);15<b&&(c=33);16<b&&(c=32);26<b&&(c=31);27<b&&(c=30);28<b&&(c=29);29<b&&(c=28);30<b&&(c=27);31<b&&(c=26);32<b&&(c=25);33<b&&(c=24);34<b&&(c=23);35<b&&(c=22);a.innerHTML="";pm.length=0;for(d=0;d<b;d++){let e=M("tr",a,!1);L("td",e,"<div></div>","height:"+c+
"px").className="ucolor";L("td",e,"  <span style='color:#ffffff73'>&horbar;</span> ").className="username";L("td",e).className="race";Ek||(L("td",e).className="team");Rk&&pm.push(L("td",e,"","text-align:center"))}6>b&&L("tr",a,"","height:"+(260-46*b)+"px");D[54]();a=a.clientHeight-67;525<a&&(a=525);m("msgs").style.height=a+"px";m("msgs").scrollTop=m("msgs").scrollHeight}}window.setupPlayermenu=cl;function Gl(){if(l.u)D[188]("\ud83d\udd12"!=this.innerHTML)}
window.mapWindow=function(){var a=m("showGameInfo");a&&(ub(a),a=M("span",a,"display:block;width:516px;padding:4px 19px"),O("div",a,55,"color:var(--color1);text-align:center;border-bottom:2px solid #ffffff38;padding-bottom:3px"),D[240](0),L("div",a,Cm(Vd),"margin-top:19px;color:#fff"),D[240](1),L("div",a,Cm(Vd),"color:#ecd078;margin-left:4px;margin-top:11px;font-size:12px"),D[240](2),Vd&&L("div",a,"<span style='color:#fff'>"+N(57)+":</span> "+Cm(Vd),"margin-top:11px;font-size:12px"))};var Km;
function ql(a){Km?(Km=a,window.grecaptcha.reset(),m("nrobotdiv").parentNode.parentNode.parentNode.style.cssText=""):(Km=a,a=document.createElement("script"),a.src="https://www.google.com/recaptcha/api.js?onload=cllrobot&render=explicit",document.body.appendChild(a))}window.cllrobot=function(){Xc('<div class="g-recaptcha" id="nrobotdiv"></div>');p(window.grecaptcha);window.grecaptcha.render("nrobotdiv",{callback:Lm,theme:"dark",sitekey:"6Lcw5wAaAAAAAC8nGPdUK8dE8LE2BcOFXI7lVtyM"})};
function Lm(a){a=Oa(a);let b=new Uint8Array(2+a.length+Km.length);b[0]=23;b[1]=Km.length;b.set(a,2);b.set(Km,2+a.length);F.C.send(b);Km=1;Yk();R(m("nrobotdiv").parentNode.parentNode.parentNode)}var sm,vl;function jl(){oe(5)}
window.multiOptions=function(a,b){var c=m("showGameInfo");if(c){c.innerHTML="";var d=ic(a,b);a=d[1];var e=d[2],f=d[3],h=d[4],k=d[7],q=d[6],t=d[12],r=d[0],u=d[9],v=d[10],w=d[18],A=d[19];if(!l.u){n=[];for(let y=0;y<b;y++)n[y]=d[y]}if(Gg&&!Sk){c.style.background="none";c.style.padding="0px";c.style.boxShadow="unset";c.style.width="unset";c.style.border="unset";c.style.backdropFilter="unset";var x=[0,"Deiv 1500",7,"PRO - Wolno\u015b\u0107",8,N(890),3,"Deiv 1500<br>"+N(523),0,fg(N(735),4)+"<br>"+N(484)];
let y=L("section",c);vl=y;sm=[];for(c=0;c<x.length;c+=2){let B=c/2;a=x[c];e=x[c+1];let I=L("div",y);Pf(I,84*-B);f=L("div",I);L("div",f,e);sm.put(L("span",f));I.onclick=()=>{for(let H of y.children)H.style.outline="";I.style.outline="1px solid #00ff0047";G(45,Ll(B))};7==a&&R(I);8==c&&R(I)}}else{c.style.cssText="";b=[N(28),N(29),N(30),N(31),N(32),N(33),N(525),N(524)];1E9<=a&&(a="***");1E9<=e&&(e="***");1E9<=f&&(f="***");1E9<=h&&(h="***");Rk&&(r="Auto");b=[N(1),r,N(26),gb[q]&&gb[q].name,N(42),v,N(27),
b[k],N(11),u,N(35),N([36,37,38,39][t]),N(396),w+" "+N(558),N(398),N([399,400,401][A])];D[275]()&&(L("button",c,"Custom version! click here to see the changes","padding:5px;background:#ffff00;color:#000;margin:auto;margin-bottom:18px;font-size:14px").onclick=()=>{pe(1)});L("span",c,`${a}<img class='resource' src='nehhon/gold.gif' /> ${e}<img class='resource' src='nehhon/wood.gif' /> ${f}<img class='resource' src='nehhon/food.gif' /> ${h}<img class='resource' src='nehhon/stone.gif' />`,"text-align:center;width:100%;display:block;border-bottom:2px solid rgb(156 137 79 / 27%);margin-bottom:9px;padding-bottom:9px");
a=L("div",c);for(x of b)L("div",a,x);l.u||(L("span",c,"+ "+N(461)+"...","cursor:url(nehhon/hand.gif),default;color:#ffd75dd1;font-size:11px;margin-top:12px;display:block").onclick=jl);x=Da();p("PR",x);x&&L("span",c,"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714 </span>"+x,"color:rgb(203,255,238);position:absolute;top:20px;right:21px")}}};if(location.search){let a=new URLSearchParams(location.search);if(a.has("desk")){let b=new XMLHttpRequest;b.open("GET","http://localhost:41334"+location.search,!0);b.send(null);Qa("","Desktop app open")}console.log(a)}function Mm(a){if(Tb)Tb=!1;else if(!l.u){if(a)return location.reload();a=decodeURI(location.hash.substr(1));Tb=!0;Ub(a);Vb()}}
function Nm(a){if("RandomMap"==a)return Om;if("Settings"==a)return Pm;if("About"==a)return Qm;if("Guide"==a)return Ve;if("Changelog"==a)return Ye;if("Ranking"==a)return Kl;location.hash=""}function lb(a){var b=location.hash.substr(1);if(b){if("#"==b.charAt(0))return setTimeout(Mm,500,a);C.s||Nm(b)&&Nm(b)()}}var tg;
function Ug(a,b,c,d,e,f,h,k,q){b||("1"!=g.muteroom||C.s)&&rc("chat");var t=e?`<span class="ttag">[${N(21)}]</span>`:"";if(c){e=D[77]()?wd:tg;if(5!==c){if(b)a=`<span style="color:var(--color1)">${N(407)}</span>`;else if(a=Cm(Od(Pd(a,d))),"https://media.tenor.com/"==a.substring(0,24)){var r=a;a=""}else a=pi(a);a=L("li",e,"<span>"+t+Zc(f,c)+" \u2014</span> "+a,e==wd&&void 0!=h&&`border-color:rgb(${h},${k},${q})`||"");r&&(a=L("img",a),a.src=r,a.className="igif")}else L("li",e,a);e.scrollTop=e.scrollHeight;
D[77]()&&qi()}}window.chat=Ug;function qi(){if(m("msgs1")){for(;11<=m("msgs1").children.length&&m("msgs1").scrollHeight>m("msgs1").getBoundingClientRect().height;)m("msgs1").removeChild(m("msgs1").children[0]);1==m("msgs1").children.length&&(Rm=setInterval(Sm,16E3))}}var Rm;function Sm(){m("msgs1")&&m("msgs1").children[0]&&m("msgs1").removeChild(m("msgs1").children[0]);m("msgs1")&&0==m("msgs1").children.length&&clearInterval(Rm)}
function Cm(a){return String(a).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function og(a){let b=a;if(C.s){var c=wd;a||(a=m("msginputGame").value);m("msginputGame").value=""}else c=tg,a||(a=m("msginput").value),m("msginput").value="";if(!C.l){if("hmspawn"==a.substr(0,7)){we(D[110]);return}if("hmpetleva"==a){D[200](0);return}}""!==a&&(b||(a=Cm(pi(a))),M("li",c,`border-color:${l.color}`).innerHTML+=`
    <span>${m("teamchat")&&m("teamchat").checked&&`
    <span class="ttag">[${N(21)}]</span>`||""}`+Zc(l.M,-1)+" \u2014</span> "+(b?`<img src="${a}" class="igif">`:a),C.l&&(bl(D[75](),1024,a),D[76](a.length,m("teamchat")&&m("teamchat").checked)),c.scrollTop=c.scrollHeight,C.s&&qi())}var Tm=document.getElementsByClassName("ucolor1"),Um=document.getElementsByClassName("username1"),$m=document.getElementsByClassName("race1"),an=document.getElementsByClassName("team1");
function bn(a){var b=1;2===a.button&&(b=-1);this.innerHTML=D[51](this.P,b)||"\ud83d\udec7"}function cn(a){var b=1;2===a.button&&(b=-1);Ek?(a=(this.hb+b)%4,0>a&&(a=3),this.hb=a,this.innerHTML=Bk(a),G(29,Ll(a))):this.innerHTML=Bk(D[52](this.P,b))}
function dn(){p(this.bb,this);this.bb&&(l.color=this.value,g.color=this.value);let a=parseInt(this.value.substr(1),16);if(Ek)G(30,Ql(a));else D[57](this.P,a);"TD"==this.parentNode.tagName?this.style.color=this.value:om&&om[this.P-1]&&(om[this.P-1].children[0].style.color=this.value,J(this))}function en(a){D[50](1+4*a.shiftKey+99*a.altKey)}function fn(a){D[50](-1-4*a.shiftKey-99*a.altKey)}
window.presetuprndtable=function(a){if(m("RandomMap"))yd("RandomMap");else{var b=Xc("",2);b.parentNode.style.verticalAlign="baseline";b.parentNode.parentNode.style.zIndex="0";b=L("div",b,`<div>
        <div id="spbdy"><button id="load1">${N(671)}</button><button id="edmap1">${N(105)}</button></div>
        <div>
        <table class="players" id="oneplayertable">
        <tbody id="oneplayertbody">
        </tbody>
        </table>
        <div style="display:flex;justify-content:center;gap:30px">
        <button id="start2" class="start startButton">${N(92)} \u25b6</button>
        <button class="start optionsButton" id="start1" >${N(48)}</button>
        </div>
        </div>
        </div>`);b.id="RandomMap";b.className="playermenu";m("start1").onclick=oe;m("start2").onclick=Qk;m("load1").onclick=function(){Hm()};m("edmap1").onclick=gn}b=m("oneplayertbody");b.innerHTML="";b.insertAdjacentHTML("beforeend",`<tr style="color:#f3cd5a"><td></td><td id="addremove"><button id="addPlayer">+</button><button id="removePlayer">\u2212</button></td><td>${N(103).toUpperCase()}</td><td>${N(21).toUpperCase()}</td></tr>`);for(let c=0;c<a;c++)b.insertAdjacentHTML("beforeend",'<tr><td class="ucolor1"></td><td class="username1"></td><td class="race1"><button></button></td><td class="team1"><button></button></td></tr>');
m("addPlayer").onclick=en;m("removePlayer").onclick=fn};var Ig=["VIP"];function Zc(a,b){var c=wg[a];b=c&&c.name||0<b&&Od(Pd(b,20))||-1==b&&l.name||"";let d=0;if(c){d=c.id;let e=c.role;1==e&&(d=Ig[e-1])}return Hg(c&&c.clan,b,d,!a&&C.l)}
function Hg(a,b,c,d){return`<span class="nmtg">${a&&`<span class="clanTag">{${Cm(a)}}</span>`||""}<span ${d?"style='color:#ff0'":""} class="usnm">${Cm(b)}</span>${c&&`<span class="verified"${"string"==typeof c?" style='color:#ff6eff'":""}>#${c}</span>`||""}</span>`}
window.recvtrib=function(a,b,c,d,e,f){e=Zc(f,e);a="-> <span style='color:#0f0'>"+(a&&`${a} <img src="nehhon/gold.gif">`||"")+(b&&`${b} <img src="nehhon/wood.gif">`||"")+(c&&`${c} <img src="nehhon/food.gif">`||"")+(d&&`${d} <img src="nehhon/stone.gif">`||"")+"</span>";m("msgs1").innerHTML+="<li>"+fg(N(449),a,e)+"</li>";qi()};
function hn(a){p(a,this);var b=document.createElement("input");b.type="color";b.P=this.Pb;b.value=this.Ob;b.bb=!0;b.onchange=dn;b.onblur=dn;b.style.cssText=`position:absolute;top:${a.clientY}px;left:${a.clientX}px;width:0px;height:0px;opacity:0;padding:0px;border:0px`;document.body.appendChild(b);setTimeout(function(){b.click()},25)}var pm=[];function ad(a){return(a=wg[a])&&255!=a.flag?`<span class="flag" style="background-position-x:-${21*a.flag}px"></span>`:""}
window.onlineTable=function(a,b,c,d,e,f,h,k,q,t){Ek&&(t=!0);let r=!D[246]();if(m("teamlock")){Oi(m("teamlock"),t?"\ud83d\udd12":"\ud83d\udd13");var u=0==f,v=$c(d),w=f==l.M;b||="\ud83d\udec7";a=Zc(f,a);wg[f]&&(wg[f].Ha=e);var A=xl(f);A&&(a+=`<span style='opacity:.5;font-size:8px;color:#${A.S&&"0f0"||"ff0"}'>&nbsp;${A.S&&"P2P"||"proxy"}</span>`);q&&(a+=`<span style='opacity:.5;margin-left:4px;font-size:8px;color:#${"0ff"}'>${q}ms</span>`);if(m("multiplayertable")){q=m("multiplayertable").getElementsByTagName("tr");
var x=e+1;d=parseInt(v.substr(1),16);d=[d>>16&255,d>>8&255,d&255];if(om[e]){om[e].children[0].style.color="rgb("+d[0]+","+d[1]+","+d[2]+")";Im[e].innerHTML=`<div>${a+ad(f)}</div>`;if(l.u&&w||A&&A.u)Im[e].style.color="#f3cd5a";Im[e].style.color;if(u){if(h){r?(Jm[e].innerHTML=b,l.u&&(ub(Jm[e]),a=L("button",Jm[e],b),a.onmousedown=bn,a.P=x)):ub(Jm[e]);Jm[e].style.opacity="0.25";om[e].style.opacity="0.25";Im[e].style.opacity="0.25";return}Im[e].style.color="#fff900"}if(!h&&(w||u&&l.u)){if(nm[e].children[0]){Jm[e]&&
(Jm[e].children[0]?Jm[e].children[0].innerHTML=b:Jm[e].innerHTML=b);nm[e].children[0].innerHTML=Bk(c);return}Jm[e]&&(Jm[e].innerHTML="",t&&!l.u?Jm[e].innerHTML=b:(a=L("button",Jm[e],b),a.onmousedown=bn,a.P=x,u&&(a.style.color="#fff900")));a=document.createElement("button");a.onmousedown=cn;a.P=x;a.hb=c;a.innerHTML=Bk(c);nm[e].appendChild(a);u&&(a.style.color="#fff900");om[e].onclick=hn;om[e].Pb=x;om[e].Ob=v}else(r?Jm[e]&&(l.u||w&&!t?(ub(Jm[e]),a=L("button",Jm[e],b),a.onmousedown=bn,a.P=x):Jm[e].innerHTML=
b):ub(Jm[e]),h)?u||(nm[e].innerHTML=`(${Od(Pd(k,20))})`):nm[e].innerHTML=Bk(c);Rk&&9!=Sk&&7!=Sk&&(ub(pm[e]),c=jn(pm[e]),c.checked=wg[f].state,w?c.onclick=kn:(c.disabled=!0,c.parentNode.style.cursor="not-allowed"));l.u&&(q[e].onclick=sl,q[e].Za=f,q[e].Yb=w,q[e].Ha=e+1)}}}};function kn(){if(gl)return this.checked=!this.checked;p(this.checked);G(35,Ll(this.checked?1:0))}
window.randomMapTable=function(a,b,c,d,e){for(d=d.toString(16);6>d.length;)d="0"+d;d="#"+d;Um[e].innerHTML=`<input value="${Od(Pd(a,20))}" type="text">`;a=Um[e].getElementsByTagName("input")[0];a.onchange=ln;a.za=e+1;a.maxLength=20;a=an[e].getElementsByTagName("button")[0];a.P=e+1;a.onmousedown=bn;a.innerHTML=b||"\ud83d\udec7";b=$m[e].getElementsByTagName("button")[0];b.P=e+1;b.onmousedown=cn;b.innerHTML=Bk(c);var f=document.createElement("input");f.type="color";f.P=e+1;f.value=d;f.bb=0==e;f.style.color=
d;Tm[e].appendChild(f);f.onchange=dn;Tm[e].onclick=()=>f.click()};function Om(){D[67]()&&Ea();D[50](0,parseInt(g.civi))}function Hm(){var a=document.createElement("input");a.type="file";a.accept=".tzared";a.onchange=de;a.click()}function mn(){if(m("CustomMap"))P("customMapcont"),yd("CustomMap");else{var a=Xc("",2);a.parentNode.style.verticalAlign="baseline";a.parentNode.parentNode.style.zIndex="0";a=L("div",a,`<table id="mapcache"></table>
<div id="customMapcont" style="display:none">
<table class="players" id="customaptable">
<tbody id="custombody">
</tbody>
</table>
<div style="display:flex;gap:15px;margin-top:40px;justify-content:center">
<button  id="startCustom" class="start startButton">${N(92)}</button>
<button id="editCustom" class="start"> ${N(105)}</button>
</div>
</div>`);a.id="CustomMap";a.className="playermenu";m("startCustom").onclick=function(){P("customMapcont");Qk()};m("editCustom").onclick=gn}}function ji(a){p(a);var b=new Uint8Array(a,4);a=(new Uint32Array(a,0,1))[0];p(b,a);var c=D[79](b.length);c=di(c,b.length);p(c);for(var d=0;d<b.length;d++)c[d]=b[d];c=D[267](a);b=gc(c,a);p("ug",b)}
function ii(a){let b=document.createElement("input");b.type="file";b.accept=".tzmod";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}function nn(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnf";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsArrayBuffer(c)};b.click()}
function Hf(a){let b=document.createElement("input");b.type="file";b.accept=".tzcnt";b.onchange=()=>{let c=b.files[0],d=new FileReader;d.onload=a;d.readAsText(c)};b.click()}function de(){C.l||Q||mn();var a=this.files[0];p(a);var b=new FileReader;b.onload=on;b.readAsArrayBuffer(a)}window.rcgini=function(a,b){n=Array.from(ic(a,b).slice(0))};function pn(){jc(function(){D[122]();Nd();yf();D[244]();Jd()})}
function on(a){p(a);Vh=void 0;fi();C.l&&(l.B.wb=l.B.max);a=a.target.result;var b=new Uint8Array(a,4),c=(new Uint32Array(a,0,1))[0];p(c,b);var d=b.length;a=D[44](d);for(var e=0;e<d;e++)window.HEAPU8[a+e]=b[e];b=D[45](4*c,d,C.l,1);if(Q)b?pn():qn(()=>{D[45](4*c,d,C.l);pn()});else{if(!b)return Qa("too many players for this custon map");if(C.l)return P("addAI"),P("optionbutton"),m("rndmapreturn").style.display="inline-table",Gd(m("nplayersO")),m("maploadOnline").value="",C.hc=!0;Hb(m("RandomMap").parentNode);
yd("customMapcont");m("custombody").innerHTML="";rn.length=0;D[46]()}}function yc(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="arraybuffer";c.onload=function(d){d=d.target.response;ka||sn({url:a,buffer:d});b(d)};c.send()}function Ik(){var a=N(104),b;try{"granted"!=Notification.permission&&Notification.requestPermission(function(){});var c=new Notification(a,{icon:"nehhon/807.png",body:void 0,requireInteraction:!1});b||=5550;setTimeout(function(){c.close()},b)}catch{}}
function tn(a){for(var b="",c=0,d=a.length;c<d;c++)b+=dl[a[c]];return b}ka||Ua[tn([32718400,37271025,40005625,40704400,36602500,28462225,35940025,30858025])]===tn([40704400,45024100,28462225,6400900,39312900,30858025,3025E4])||(ec=ja);
function le(a){if(a){var b=D[47]();if(E)a=gc(D[276](55==a),b*b*3),p(a),xf.queue.writeBuffer(Di,0,a);else{a=Mi(D[83](55==a),b*b*4);if(Ma)var c=2**Math.ceil(Math.log2(b));var d=performance.now();z.useProgram(X);z.activeTexture(z.TEXTURE1);le.texture?(z.bindTexture(z.TEXTURE_2D,le.texture),Ma?(z.getExtension("OES_texture_float"),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,b,b,0,z.RGBA,z.FLOAT,a)):z.texImage2D(z.TEXTURE_2D,0,z.RGBA32F,b,b,0,z.RGBA,z.FLOAT,a)):(le.texture=z.createTexture(),z.bindTexture(z.TEXTURE_2D,
le.texture),Ma?(z.getExtension("OES_texture_float"),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,c,c,0,z.RGBA,z.FLOAT,null),z.texSubImage2D(z.TEXTURE_2D,0,0,0,b,b,z.RGBA,z.FLOAT,a)):z.texImage2D(z.TEXTURE_2D,0,z.RGBA32F,b,b,0,z.RGBA,z.FLOAT,a),kj(),z.uniform1i(z.getUniformLocation(X,"img_data"),1));z.useProgram(V);z.activeTexture(z.TEXTURE2);ea.Vc=performance.now()-d;le.update=!1}}else le.update=!0}window.setupTerrainTXT=le;le.update=!1;window.stpTupdtr=function(){le.update=!0};var D,kb,lg;
window.moduleLoaded=function(){var a=window.Module,b=Object.keys(a),c=b.length,d="synchroHash rnd setupRandom randomTerrain test shapoint Uint16Array boolArray test2 searchUnit setupResources movtablexe test3 setupGL getBufferID executeOrder Uint32Array getColorTexture canvasSize setupZoom setupTranslation mouseDown mouseUp sharedFloatID setupGame mouseMove setupOdin empXY nkingdom empName changePage checkStock runKey sharedDelayID amount mwicon mwSelect mwMore mwamount createItems mouseEnter startMovement savegame finishSavegame readSavegame0 readSVG customMapTable mapWidth gcycle dbgspd randomKingdoms chTeam changeRace userConfig onlineKingdoms setupOnlTable onlADD changeColor sndNfo tempointeradd onldata shareName mnameadd configRandomMap strOnl plready setupOnlID preldd nAIs closeRoom onlCount userKick pidkingdom deletePlayer updown tempstradd liveChat gstarted trradd nh19add nhcomp nhlen crtStxt configTerrain delTexs touchStart touchMove touchEnd showrndobjs ginfoname nfolen updateRNDtype updateRNDkingdom updateRNDnumber updateRNDeach256 addRNDobj RNDdelete getTerrain pause0 resume0 removeAnim preSetup setupEditor editorKingdoms EDchangeColor EDchangeTeam EDchangeName EDchangeRes unitSearchValid setupVersion EDbuild kname myk cmyk addEditorKingdom EDbrushchs EDbrushchd EDbrush0 EDgetTerrainInfo stmenummx chterr adpterr EDbrushstop svprops wtrcheck rndforest delEditorKingdom RNDobjexp stprndobjs rndRes chmapsize plymapeditor krgb fullRNDmap downloadGra superLen txtLoad setupGuide getorders knVal equalk knAIVal sstextStart ss1text naddss readSUP resetGLbuffer EDbrushMrg vsblt sndCnf updKngs mouseOut rstrRNDmap kngremainng idddamin runnxtcycl pong updtping refreshPlayerInfo tradingsum tradingresum selectoridest strtrading playerReconnect n2addss delAsyncPointer peacetime menustate prvbuild stpTactil checkDelAnim updresources wrkstate chtgspd mapVisibility chvisibility svggame shwRCR ckMnhst dellmitTest rOnlen stdiplomacy dpChange sndTribs shwsts empvtr trrbs trrwtr tmlck chmnlen chscrntype shICNu tchTime gtORDuIC shRCICNu shRCNLY gfastNF rcSEL unittable gtbonuses buildtable gnfoTYPE gdfltprops disctimeout chonltyp onlpulse onlstr pidchngsrc pidchngsrgb strgmonl chonltm wdtsetup wdtunit wdtkingdom wdtterrain dclslen edstdcl ruleadd shwrule eventadd shallrules edrulename shwevent chevactyp chkxkingdom confirmsel selname colorevsel delfromids viewfromids updevent chkxkingdomval areaactv areavw crntIDS ruleprops rulereps rleoprtn stdQ updmapname rtnmapname actntxt rluchkids chkxidsval eddreload chdipcntrl diptype EDmulpselect rluch2kids chk2xidsval chCRcptr chuCRcptr moddipops stphnames spvsVal btbl gtteam mddtable bmddtable mddpnter ordprps ordlen imddtable tmddtable rtrnconsts mddpointer dftstp nhuncomp eduname gtpstcycles onlrec lstrcv shdwn sbyclr shrmdd mddlen cnfTerrain3 updGL3kingdoms smtsel gtbidalpha prdbid suprtree shordnfo updordinfo".split(" ");D=
[];D.length=d.length;for(var e=0,f=d.length;e<f;e++)for(var h=d[e],k=0;k<c;k++){var q=b[k];if("__"==q.substr(0,2)&&-1<q.indexOf(h)){D[e]=a[q];break}}kb=new fc(D[5](),4096);D[23]();D[23]();D[23]();bl(D[53](ll()),17,l.name||"Guest");E=3==g.webgl;D[109](545,ka,!!window.indexedDB,Math.floor(Math.random()*2**32),E);lg=document.createElement("canvas");E||un();ib();window.ontouchstart=function(){p(123123);Ja=!0;D[169](1);window.ontouchstart=void 0}};
var vj=async a=>await (await fetch("nehhon/"+a)).text(),un=()=>{var a={antialias:!1,alpha:!1,depth:!0};lg.id="canvas";g.webgl&&"2"!=g.webgl&&"3"!=g.webgl||(z=lg.getContext("webgl2",a));z||(z=lg.getContext("webgl",a),Ma=!0)},qk=window.GPUTextureUsage,sk,pk,rk,Ak=0;
window.txtgpu=async(a,b,c,d,e,f,h,k,q,t,r,u,v)=>{a=di(a,b*c*4);xf.queue.writeBuffer(yi,r,a);b=new Uint32Array([r/4,b,c/(d*e),f,d,t,q,0,0]);c=new Float32Array(b.buffer);c[7]=h;c[8]=k;xf.queue.writeBuffer(Ei,u*b.length*4,b);await xf.queue.onSubmittedWorkDone();D[165](v)};window.gl3kngs=(a,b)=>{xf.queue.writeBuffer(Ji,0,gc(a,b))};window.gl3nfo=(a,b)=>{xf.queue.writeBuffer(Ki,0,gc(a,b))};
async function Tk(){function a(){Vm++;if(1==g.hlffps&&Vm%2)return requestAnimationFrame(a);Uj();hh();xf.queue.writeBuffer(K,0,new Uint32Array([Date.now()-Pc+25*D[48]()]));oj.colorAttachments[0].view=1==Y?e.getCurrentTexture().createView():pj.createView();const oa=c.createCommandEncoder();var ba=oa.beginRenderPass(oj),zc=Ak+1;Na&&(3==Na&&qj||(ba.setPipeline(A),ba.setBindGroup(0,ca),ba.draw(6,1,0,0)),qj&&(ba.setPipeline(x),ba.setBindGroup(0,Ga),ba.draw(6,zc,0,0)));if(Ee){var kc=Tg(),Df=window.innerWidth/
2-kc/2,Ef=window.innerHeight/2-kc/2;yd("bigMap");m("bigMap").style.width=kc/T+"px";m("bigMap").style.height=kc/T+"px";Wm(ba,Df,Ef,kc,kc,zc)}kc=xe();Df=l.U;Ef=kc?window.innerHeight-Sg*T:l.K;Wm(ba,Df,Ef,Sg*T,Sg*T,zc);ba.setPipeline(k);ba.setBindGroup(0,db);ba.draw(6,zc,0,0);ba.setPipeline(t);ba.setBindGroup(0,fa);ba.draw(6,1,0,0);D[278]()&&1!=g.selcolor&&(ba.setPipeline(B),ba.setBindGroup(0,Eb),ba.draw(6,zc,0,0));zc=D[279]();ba.setPipeline(q);ba.setBindGroup(0,za);ba.draw(6,zc,0,0);h&&(ba.setPipeline(u),
ba.setBindGroup(0,Xm),ba.draw(6,1,0,0));rg&&(ba.setPipeline(H),ba.setBindGroup(0,Ap),ba.draw(6,1,0,0));ba.end();1!=Y&&(ba={colorAttachments:[{view:e.getCurrentTexture().createView(),clearValue:{r:.1,g:.1,b:.1,a:1},loadOp:"clear",storeOp:"store"}]},ba=oa.beginRenderPass(ba),ba.setPipeline(I),ba.setBindGroup(0,Ym),ba.draw(6,1,0,0),ba.end());le.update&&le(1);c.queue.submit([oa.finish()]);C.s&&bk();Date.now();requestAnimationFrame(a)}Na=D[148]();var b=parseInt(g.fogRefresh);qj=3==b&&Na;Y=parseFloat(g.antialiasing2)||
1;Y*=Math.round(25*parseInt(g.pixelDensity1/25))/100||nj();if((b=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}))||b){var c=await b.requestDevice({requiredLimits:{maxStorageBufferBindingSize:534773760,maxBufferSize:534773760}});xf=c;b=lg;var d=window.innerHeight;b.width=window.innerWidth;b.height=d;var e=b.getContext("webgpu"),f=navigator.gpu.getPreferredCanvasFormat();e.configure({device:c,format:f,Dc:"opaque"});var h=n[8];b=await fetch("nehhon/obs.wgsl");b=await b.text();
b=c.createShaderModule({code:b});var k=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}}),q=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},
fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/trn.wgsl")).text();b=c.createShaderModule({code:b});var t=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},
fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"dst-alpha",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});b=await (await fetch("nehhon/mmap2.wgsl")).text();b=c.createShaderModule({code:b});var r=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,
entryPoint:"frag_main",targets:[{format:f}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth24plus"}});if(h){b=await vj("br.wgsl");b=c.createShaderModule({code:b});var u=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},
primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});b=await vj("brM.wgsl");b=c.createShaderModule({code:b});var v=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"src"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,
depthCompare:"always",format:"depth24plus"}})}b=await (await fetch("nehhon/mmap.wgsl")).text();b=c.createShaderModule({code:b});var w=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,
depthCompare:"greater",format:"depth24plus"}});if(Na){b=await fetch("nehhon/"+`fog${2==Na?"2":"0"}${qj&&2==Na?"u":"n"}.wgsl`);b=await b.text();b=c.createShaderModule({code:b});var A=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"one",dstFactor:"zero"},alpha:{operation:"add",srcFactor:"one",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,
depthCompare:"greater-equal",format:"depth24plus"}});b=await fetch("nehhon/obsfog.wgsl");b=await b.text();if(qj){b=c.createShaderModule({code:b});var x=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"zero",dstFactor:"zero"},alpha:{operation:"max",srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"always",
format:"depth24plus"}})}b=await fetch("nehhon/mtop.wgsl");b=await b.text();b=c.createShaderModule({code:b});var y=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",
format:"depth24plus"}})}b=await fetch("nehhon/"+(1==g.selectionCircle?"obs2c.wgsl":"obs2.wgsl"));b=await b.text();b=c.createShaderModule({code:b});var B=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"zero",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!0,
depthCompare:"greater",format:"depth24plus"}});if(1!=Y){b=await (await fetch("nehhon/post.wgsl")).text();b=c.createShaderModule({code:b});var I=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,entryPoint:"frag_main",targets:[{format:f}]},primitive:{topology:"triangle-list"}})}b=await (await fetch("nehhon/rect.wgsl")).text();b=c.createShaderModule({code:b});var H=c.createRenderPipeline({layout:"auto",vertex:{module:b,entryPoint:"vert_main"},fragment:{module:b,
entryPoint:"frag_main",targets:[{format:f,blend:{color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"src-alpha",dstFactor:"dst-alpha"}}}]},primitive:{topology:"triangle-list"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth24plus"}});yi=c.createBuffer({size:534773760,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Ki=c.createBuffer({size:32*D[90](),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,
mappedAtCreation:!1});Ji=c.createBuffer({size:24576,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Fi=c.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Ch=c.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Gi=c.createBuffer({size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});vf=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,
mappedAtCreation:!1});xi=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Hi=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});xf.queue.writeBuffer(Hi,0,new Float32Array([1/Cc]));h&&(zi=c.createBuffer({size:32,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1}));Cj();b=D[47]();window.addEventListener("resize",Cj,!1);wi=vi=Math.round(b**2/5);Ai=c.createBuffer({size:48*vi,usage:GPUBufferUsage.STORAGE|
GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});Bi=c.createBuffer({size:48*wi,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC,mappedAtCreation:!1});Di=c.createBuffer({size:b*b*12,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});Ci=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});xf.queue.writeBuffer(xi,0,new Float32Array([T]));xf.queue.writeBuffer(Ci,0,new Uint32Array([b]));
Ei=c.createBuffer({size:174600,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var K=c.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});hg=c.createBuffer({size:16,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});xf.queue.writeBuffer(hg,0,new Float32Array([1,1,1,1]));d=Mi(D[33](),1323);var U=c.createBuffer({size:4*d.length,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!0});(new Float32Array(U.getMappedRange())).set(d);
U.unmap();b=b*b*2;b%4&&(b+=2);Ij=c.createBuffer({size:b,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,mappedAtCreation:!1});var ca,qa,Ga,db,za,Eb,fa,la,Zm,Xm,jh;Ii=()=>{let oa=[{binding:0,resource:{buffer:yi}},{binding:1,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Gi}},{binding:2,resource:{buffer:Ai}},{binding:3,resource:{buffer:Ei}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:K}},{binding:6,resource:{buffer:U}},
{binding:7,buffer:{type:"uniform"},resource:{buffer:Hi}},{binding:8,resource:{buffer:Ji}},{binding:9,resource:{buffer:Ki}},{binding:10,resource:{buffer:Ci}},{binding:11,resource:{buffer:vf},buffer:{type:"uniform"}},{binding:12,resource:{buffer:hg},buffer:{type:"uniform"}},{binding:13,resource:{buffer:xi},buffer:{type:"uniform"}}];db=c.createBindGroup({layout:k.getBindGroupLayout(0),entries:oa});oa[2].resource.buffer=Bi;za=c.createBindGroup({layout:q.getBindGroupLayout(0),entries:oa});Eb=c.createBindGroup({layout:B.getBindGroupLayout(0),
entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Gi}},{binding:1,resource:{buffer:Ai}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:K}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Hi}},{binding:5,resource:{buffer:Ki}},{binding:6,resource:{buffer:Ci}}]});fa=c.createBindGroup({layout:t.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:yi}},{binding:1,visibility:GPUShaderStage.VERTEX,
buffer:{type:"uniform"},resource:{buffer:Gi}},{binding:2,resource:{buffer:Di}},{binding:3,resource:{buffer:Ei}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:K}},{binding:6,buffer:{type:"uniform"},resource:{buffer:Ci}},{binding:7,buffer:{type:"uniform"},resource:{buffer:Hi}},{binding:8,resource:{buffer:hg},buffer:{type:"uniform"}}]});Na&&(ca=c.createBindGroup({layout:A.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:Ij}},{binding:1,
visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Gi}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:Ci}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Hi}}]}),qj&&(Ga=c.createBindGroup({layout:x.getBindGroupLayout(0),entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"uniform"},resource:{buffer:Gi}},{binding:1,resource:{buffer:Ai}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:3,
buffer:{type:"uniform"},resource:{buffer:K}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Hi}},{binding:5,resource:{buffer:Ji}},{binding:6,resource:{buffer:Ki}}]})),qa=c.createBindGroup({layout:y.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:Ij}},{binding:1,buffer:{type:"uniform"},resource:{buffer:Ci}}]}));la=c.createBindGroup({layout:r.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ci}},{binding:1,resource:{buffer:Ai}},{binding:2,resource:{buffer:Ei}},
{binding:3,buffer:{type:"uniform"},resource:{buffer:K}},{binding:4,resource:{buffer:Ji}},{binding:5,buffer:{type:"uniform"},resource:{buffer:vf}},{binding:6,resource:{buffer:Ki}}]});h&&(Xm=c.createBindGroup({layout:u.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ci}},{binding:1,buffer:{type:"uniform"},resource:{buffer:K}},{binding:2,buffer:{type:"uniform"},resource:{buffer:Hi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:4,buffer:{type:"uniform"},
resource:{buffer:Gi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:zi}}]}),Zm=c.createBindGroup({layout:v.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ci}},{binding:1,buffer:{type:"uniform"},resource:{buffer:K}},{binding:2,buffer:{type:"uniform"},resource:{buffer:zi}}]}));jh=c.createBindGroup({layout:w.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ci}},{binding:1,resource:{buffer:Di}},{binding:2,resource:{buffer:Ei}},
{binding:3,buffer:{type:"uniform"},resource:{buffer:K}},{binding:4,buffer:{type:"uniform"},resource:{buffer:Hi}},{binding:5,buffer:{type:"uniform"},resource:{buffer:Fi}},{binding:6,buffer:{type:"uniform"},resource:{buffer:Gi}}]})};Ii();pk=b=c.createTexture({size:[lj,mj],format:"depth24plus",usage:qk.RENDER_ATTACHMENT});var pj,Ym;1!=Y&&(sk=()=>{pj=c.createTexture({size:[lj,mj],format:f,depthStencilFormat:"depth24plus",usage:qk.TEXTURE_BINDING|qk.RENDER_ATTACHMENT});Ym=c.createBindGroup({layout:I.getBindGroupLayout(0),
entries:[{binding:0,resource:pj.createView()},{binding:1,resource:c.createSampler({magFilter:"linear",minFilter:"linear",mipmapFilter:"linear",maxAnisotropy:8})},{binding:2,resource:c.createSampler({magFilter:"nearest",minFilter:"nearest"})},{binding:3,buffer:{type:"uniform"},resource:{buffer:Hi}}]})},sk());var Ap=c.createBindGroup({layout:H.getBindGroupLayout(0),entries:[{binding:0,buffer:{type:"uniform"},resource:{buffer:Ch}},{binding:1,buffer:{type:"uniform"},resource:{buffer:Gi}},{binding:2,buffer:{type:"uniform"},
resource:{buffer:Hi}},{binding:3,buffer:{type:"uniform"},resource:{buffer:Fi}}]}),oj={colorAttachments:[{view:void 0,clearValue:{r:.1,g:.1,b:.1,a:3==Na?0:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:b.createView(),depthClearValue:0,depthLoadOp:"clear",depthStoreOp:"store"}};rk=oj;var Wm=(oa,ba,zc,kc,Df,Ef)=>{oa.setViewport(ba*Y,zc*Y,kc*Y,Df*Y,0,1);oa.setPipeline(r);oa.setBindGroup(0,la);oa.draw(6,Ef,0,0);oa.setPipeline(w);oa.setBindGroup(0,jh);oa.draw(6,h?1:Na?1:2,0,0);Na&&(oa.setPipeline(y),
oa.setBindGroup(0,qa),oa.draw(6,1,0,2==Na?1:0),h||(oa.setPipeline(w),oa.setBindGroup(0,jh),oa.draw(6,1,0,1)));h&&(oa.setPipeline(v),oa.setBindGroup(0,Zm),oa.draw(6,1,0,0),oa.setPipeline(w),oa.setBindGroup(0,jh),oa.draw(6,1,0,1));oa.setViewport(0,0,lj,mj,0,1)},Vm=0;Date.now();requestAnimationFrame(a);b=parseInt(g.fogRefresh)}else E=!1,z||(un(),g.webgl=2,D[109](545,ka,!!window.indexedDB,Math.floor(Math.random()*2**32),E));jc()}var wf=new Uint32Array(1);
function bl(a,b,c){a=Pd(a,b);for(var d=0;d<b;d++)a[d]=c.charCodeAt(d)}
if(window.indexedDB&&!ka){var vn=window.indexedDB.open("nh2019",545),wn;vn.onsuccess=function(){wn=vn.result;ka||xn(function(){})};vn.onupgradeneeded=function(){wn=vn.result;try{wn.objectStoreNames.contains("basic")&&wn.deleteObjectStore("basic"),wn.objectStoreNames.contains("maps")||wn.createObjectStore("maps",{keyPath:"id",autoIncrement:!0}),wn.objectStoreNames.contains("mapsBlobs")||wn.createObjectStore("mapsBlobs",{keyPath:"id2",autoIncrement:!0}),wn.objectStoreNames.contains("basic")||wn.createObjectStore("basic",
{keyPath:"url"})}catch(a){console.error(a)}}}function sn(a){if(wn)try{wn.transaction(["basic"],"readwrite").objectStore("basic").add(a).onsuccess=function(){}}catch(b){console.error(b)}}function xn(a){if(wn&&!ka)try{var b=wn.transaction(["basic"],"readonly");b.objectStore("basic").getAllKeys?b.objectStore("basic").getAllKeys().onsuccess=a:a({target:{result:[]}})}catch{}else a({target:{result:[]}})}
window.changeresources=function(a,b,c,d){if(!Q)for(a=[a,b,c,d],b=[rd,sd,td,ud],c=0;4>c;c++)a[c]==2**31-1&&(a[c]="***"),Oi(b[c],a[c]||"0")};var yn,zn,An=1,Bn,Cn,Z,Dn,En,Fn,Gn,Hn;
function ce(){if(!m("edsel")){if(m("rules"))return Gd(m("rules").parentNode.parentNode);var a=Xc("",2,"",1);a.id="rules";yn=[];var b=[576,In,637,Jn,636,Kn];for(var c=0;3>c;c++){var d=L("div",a,"",0<c&&"opacity:0.3;pointer-events:none");O("span",d,b[2*c]);let e=L("div",d);yn[c]=e;L("button",d,"+").onclick=b[2*c+1]}D[220]();a=L("section",a);R(a);zn=a;Fn=L("select",a,"","margin-right:25px;display:none");for(b=0;b<Ln.length;b+=2)c=document.createElement("option"),d=N(Ln[b]),c.textContent=d,Nf(c,Fn,d),
c.value=b/2;Fn.onchange=()=>{let e=parseInt(Fn.value);D[223](e);Mn=e;Nn[1].children[1].innerHTML=N(Ln[2*e])};Gn=L("select",a,"","margin-right:25px;display:none");for(b=0;b<On.length;b+=2)c=document.createElement("option"),d=N(On[b]),c.textContent=d,Nf(c,Gn,d),c.value=b/2;Gn.onchange=()=>{let e=parseInt(Gn.value);D[223](e);Mn=e;Nn[2].children[1].innerHTML=N(On[2*e])};Dn=L("span",a);b=L("button",a);b.className="dplbtt";b.onclick=()=>{let e=Pn,f=Qn[e];D[237](e,1);e?(yn[1].innerHTML="",yn[2].innerHTML=
"",D[218](Qn[0],0,1)):(yn[0].innerHTML="",D[220]());yn[e].children[f].onclick()};b.dataset.title=N(649);b=L("div",a);En=L("div",b);Z=L("div",b);Bn=M("span",a,"height: 31px; display: flex; padding: 0px 10px; padding-top: 10px; margin-top: 10px; border-top: 2px solid #ffffff17; justify-content: space-between; align-items: center");Cn=M("input",Bn,"height:20px;border-left:2px solid var(--color2);padding-left:8px;background:#ffffff0a");Hn=M("span",Bn,"display:flex;align-items:center;gap:7px;font-size:12px;color:var(--color1)");
Cn.maxLength=40;Cn.oninput=()=>{let e=Cn.value.substr(0,40).trim(),f=jb(kb);for(let h=0;h<e.length;h++)f[h]=e.charCodeAt(h);Nn[Pn]&&(Nn[Pn].children[0].textContent=e);D[221](e.length,Pn)};if(yn[0].children[0])yn[0].children[0].onclick()}}var Mn,Rn,Sn,Tn,Un,Vn,Wn,Xn,Yn,Zn,$n,ao,co=a=>{a=Ln[2*a+1];Dn.innerHTML="";Z.innerHTML="";En.innerHTML="";Array.isArray(a)?bo(a,Dn,"#ffffff2e"):a()},eo=a=>{a=On[2*a+1];Dn.innerHTML="";Z.innerHTML="";En.innerHTML="";Array.isArray(a)?bo(a,Dn,"#ffffff2e"):a()};
window.btmnu=function(a,b,c,d,e,f,h,k,q,t,r,u,v,w,A,x){Dn.innerHTML="";Mn=a;Rn=b;Sn=d;Tn=e;Un=f;Xn=k;Yn=q;Zn=c;Vn=t?gc(r,t):[];Wn=u?gc(v,u):[];$n=x;ao=A;Hn.innerHTML="";1==w?(Fn.value=a,Gd(Fn),L("span",Hn,N(640)+" ( ! )"),se(Hn,y=>{$n=y;fo()},$n),L("span",Hn,N(639)+" ( || )","margin-left:12px"),se(Hn,y=>{ao=y;fo()},ao),R(Gn),co(a)):(Gn.value=a,Gd(Gn),R(Fn),eo(a))};var go,ho;window.untProps=function(a,b,c){go=N(a);ho=[b,c]};
function bo(a,b,c,d){for(let e=0;e<a.length;e+=2){let f=O("button",b,a[e]),h=a[e+1];f.onclick=()=>{Z.innerHTML="";b==Dn&&(En.innerHTML="");h();b!=Dn&&(d?Zn=e/2:Rn=e/2,fo());for(let k of b.children)k.style.cssText="";f.style.background=c;f.style.opacity=1};if(!e&&b==Dn)f.onclick()}}function io(a){let b=L("div",ae);b.id="edsel";let c=m("rules").parentNode.parentNode;R(c);m("content");O("button",b,112).onclick=()=>{Gd(c);J(b);a()}}var jo;
function ko(a){a=a?Wn:Vn;jo.innerHTML="";for(let b of a){let c=b;D[226](b);let d=L("div",jo,go+` <span style="color:var(--color1)">(${ho[0]+","+ho[1]})</span>`,"color:#dedede;line-height:19px;padding:4px 0px;font-size:13px;border-bottom:1px solid #ffffff1f");a=L("button",d,"\u00d7");a.className="closeIcon";a.onclick=()=>{D[228](c);J(d)};L("button",d,"\ud83d\udc41\ufe0f","margin:0px 10px;padding:1px;float:right;background:#ff00ff29;").onclick=()=>{D[229](c);io(()=>D[225](2))}}}
window.ruresize=function(){m("rules")&&(Hb(m("rules")),An=1)};function lo(a,b){a=mo(a,b?Yn?1:0:Xn?1:0,[625,619],c=>{b?Yn=c:Xn=c});a.style.marginLeft=0;a.style.fontSize="12px";return a}
function no(a,b){D[234](a);let c=M("div",Z,"display:flex;justify-content:flex-start;align-items:center;gap:30px");jo=L("div",c,"","padding:10px;height:141px;overflow:auto;width:250px;box-shadow:rgb(0 0 0 / 45%) 0px 0px 10px inset;margin-right:-19px");ko(a);O("button",c,624,"height:161px;width:93px;font-size:11px").onclick=()=>oo(a);b||(b=M("div",c),L("span",b,N(618)+": ","font-size:14px;color:#a99557"),lo(b,a))}window.updIDS=function(a,b,c,d){Vn=b?gc(a,b):[];Wn=d?gc(c,d):[]};
function oo(a){let b=L("div",ae);b.id="edsel";let c=m("rules").parentNode.parentNode;R(c);O("button",b,24,"background:#04ff0036").onclick=()=>D[225](1);O("button",b,535,"background:#ff000036").onclick=()=>D[225](0);O("button",b,112).onclick=()=>{Gd(c);D[225](2);J(b);ko(a)};D[227]()}function fo(){D[230](Mn,Rn,Zn,Sn,Tn,Xn,Yn,Un,$n,ao)}function po(a){let b=M("div",Z);b.className="centerrule";a&&mo(b,Xn?1:0,[625,619],c=>{Xn=c});O("span",b,643,"opacity:0.6")}
function ge(a){a=L("select",a,"","font-size:12px");let b=[625,626,58,59];for(var c=0;c<b.length;c++)O("option",a,b[c]).value=c;for(let d=0,e=D[90]();d<e;d++)if(D[196](d),!W.fb){c=N(W.name)+" ("+Rb[W.race]+")";let f=document.createElement("option");f.value=d+b.length;f.textContent=c;Nf(f,a,c)}return a}
function qo(a,b){let c=ge(Z);c.value=b?Yn:Xn;c.onclick=()=>{b?Yn=parseInt(c.value):Xn=parseInt(c.value);fo()};if(!a){let d=L("select",Z,"","margin-left:5px;font-size:18px;");L("option",d,">").value=0;L("option",d,"<").value=1;d.value=Tn;d.onclick=()=>{Tn=parseInt(d.value);fo()};let e=L("input",Z,"","padding:3px;margin-left:5px;width:57px;font-size:18px");e.type="number";e.min=0;e.value=Sn;e.onchange=()=>{Sn=parseInt(e.value);fo()}}L("div",Z,N(6)+":","margin:3px;margin-top:9px;font-size:8px");ro(0,
b)}function so(a,b,c){let d=se(a,()=>{e.style.visibility=d.checked?"":"hidden";e.value=d.checked?0:-2147483647;e.onchange()},-2147483647!=b),e=Sa(a,b,()=>c(S(e)),"number","transition:none;width:90px;margin-right:24px",2147483647,-2147483647);-2147483647==b&&(e.style.visibility="hidden")}function to(){L("span",Z,N(635)+": ");mo(Z,Tn,[">=","<=","="],a=>Tn=a)}
function uo(){let a=Zn<2**24,b=mo(Z,Zn-2**24,vo(),d=>Zn=2**24+d);se(Z,()=>{Zn<2**24?(R(c),Zn=2**24,b.value=0,Gd(b)):(R(b),Gd(c),Zn=0);c.value=Zn},a).style.marginBottom="-10px";let c=Sa(Z,Zn,()=>{Zn=S(c);fo()},"number","margin:10px;height:23px;width:90px");a?R(b):R(c)}function vo(){let a=[];for(let b=0;16>b;b++)a[b]=N(687)+"-"+(b+1);return a}function wo(){mo(Z,Yn,vo(),a=>Yn=a)}function xo(a,b){let c=b?Yn:Xn;ke(d=>{b?Yn=d:Xn=d;fo()},a||Z,1).value=c}
function ke(a,b,c){let d=L("select",b||Z);b=0;for(let f=D[28]();b<f;b++){var e=b?Od(Pd(D[111](b),20)):N(23);L("option",d,e).value=b}O("option",d,22).value=2147483647;c&&(O("option",d,642).value=2147483646);d.onclick=()=>a(S(d));return d}
function he(a){let b=M("div",a,"height:unset;min-height:61px");b.className="kcheck";let c=[];for(let f=0,h=D[28]();f<h;f++){var d=f?Od(Pd(D[111](f),20)):N(23);let k=L("div",b),q=se(k,()=>0,!0);c.put(q);L("div",k,d,"word-break:break-all")}var e=f=>{for(let h of c)if(f){if(!h.checked)h.onclick()}else if(h.checked)h.onclick()};a=M("div",a,"display:flex;justify-content:flex-end;margin-top:13px");O("button",a,622,"margin-right:10px;color:#9e8d57").onclick=()=>e(1);O("button",a,623,"color:#9e8d57").onclick=
()=>e(0);return c}function yo(a,b,c){let d=2147483647==c;(a.oa=c)&&!d||Pf(a,-28);d&&(a.style.visibility="hidden");a.onclick=()=>{a.oa=!a.oa;Pf(a,a.oa?0:-28);D[243](b,a.oa)}}
function ro(a,b){var c=L("div",Z);c.className="kcheck";let d=[],e=D[28]();var f=L("div",c),h=se(f,q=>{D[224](e,q,b)},D[231](e,b));d.put(h);O("div",f,642);for(let q=a||0,t=D[28]();q<t;q++)a=q?Od(Pd(D[111](q),20)):N(23),f=L("div",c),h=se(f,r=>{D[224](q,r,b)},D[231](q,b)),d.put(h),L("div",f,a,"word-break:break-all");var k=q=>{for(let t of d)if(q){if(!t.checked)t.onclick()}else if(t.checked)t.onclick()};c=M("div",Z,"display:flex;justify-content:flex-end;margin-top:13px");O("button",c,622,"margin-right:10px;color:#9e8d57").onclick=
()=>k(1);O("button",c,623,"color:#9e8d57").onclick=()=>k(0)}var zo;function ai(a,b,c,d){let e=M("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let f=c[a];if(!f)continue;let h=document.createElement("option");h.textContent=f;Nf(h,e,f);h.value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b}
function ie(a,b,c,d){let e=M("select",a,"font-size:12px;margin:10px");for(a=0;a<c.length;a++){let f=c[a];0<=f?O("option",e,f).value=a:L("option",e,f).value=a}e.onchange=()=>{d(parseInt(e.value))};e.value=b;return e}function mo(a,b,c,d){let e=M("select",a,"font-size:16px;margin:10px");for(a=0;a<c.length;a++){let f=c[a];0<=f?O("option",e,f).value=a:L("option",e,f).value=a}e.onchange=()=>{d(parseInt(e.value));fo()};e.value=b;return e}function Ao(){mo(Z,Yn,[646,645],a=>Yn=a)}
function Bo(a){zo=L("div",Z);zo.id="ruleprop";D[235](a)}function Co(a,b,c){L("span",Z,N(635)+": ");let d=M("select",Z,"font-size:21px;padding:0px;margin-bottom:12px;margin-left:7px");b=b?[">=","<=","="]:["=","+","\u2212","\u00d7","\u00f7"];for(let e=0;e<b.length;e++)L("option",d,b[e]).value=e;d.onchange=()=>{c?Yn=S(d):Tn=S(d);fo()};d.value=c?Yn:Tn;a||Bo(0)}
function Do(){O("button",Z,616,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;").onclick=()=>{D[232](1);io(()=>{Un=D[232](0);Z.innerHTML="";Do()})};let a=O("button",Z,617,"width:49%;font-size:26px;padding:0px;height:100%;box-shadow:0px 0px 6px inset #000;"+(Un?"background:#ff37ff1a":"opacity:0.5"));Un&&(a.onclick=()=>{D[233](1);io(()=>D[232](0))})}function Eo(a,b){En.innerHTML="";bo(a,En,"#00ff0026",b);En.children[b?Zn:Rn].onclick()}
var Fo=()=>Eo([616,no,620,qo,642,()=>po(1)]),Go=()=>Eo([616,()=>no(0,1),620,()=>qo(1,0,1),642,po]);function Nf(a,b,c,d){d&&(c="0"+c);a.dc=c;for(let e of b.children)if(e.dc>c){b.insertBefore(a,e);return}b.append(a)}
function Ho(a){let b=M("div",Z);b.className="tchgrid";a&&(a=lo(Z),a.style.display="",a.style.marginBottom="0px",b.style.cssText="height:136px;margin-right:20px");a=D[90]();let c=ic(D[242](a),a);for(let f=0;f<a;f++){var d=D[191](f,0,0,1);if(d){let h=c[f],k=document.createElement("div");var e=N(D[89](f));Nf(k,b,e,h);L("div",k,e);e=L("div",k);Pf(e,d);e.className="dataOrder";d=M("div",k,"display:grid;grid-gap:0px 10px;grid-template-columns:repeat(2,auto);align-items:center");se(d,q=>D[243](f,q),h)}}}
var Ln=[608,[612,Fo,614,Do],634,[612,Fo,482,function(){let a=L("div",Z,"","display:flex;justify-content:center;align-items:center;height:100%;gap:5px"),b=L("input",a,"","width:68px;font-size:23px");b.type="number";b.min=0;b.value=Un;b.onchange=()=>{Un=parseInt(b.value);fo()};L("span",a,"m")},631,()=>Eo([612,()=>no(1),620,()=>qo(1,1)],1)],652,[612,Fo,653,function(){mo(Z,Un,[658,659,660,661,662],a=>Un=a)},631,()=>Eo([620,()=>qo(1,1),612,()=>no(1)],1)],605,Fo,607,Fo,668,[62,function(){to();let a=M("div",
Z,"display:flex;align-items:center;gap:7px"),b=ic(D[242](4),4);for(let c=0;4>c;c++)bd(a,c),so(a,b[c],d=>D[243](c,d))},6,()=>ro(1)],594,()=>ro(1),593,()=>ro(1),679,function(){mo(Z,Tn,[">","<"],b=>Tn=b);let a=Sa(Z,Sn,()=>{Sn=S(a);fo()},"number","width:150px");L("span",Z,"ms")},680,()=>ro(1,0),685,[612,()=>Eo([620,()=>qo(1),616,no,642,()=>po(0)]),656,()=>Eo([620,()=>qo(1,1),616,()=>no(1,1),642,()=>po(0)],1)],683,[612,()=>Eo([616,no,620,qo,642,()=>po(1),6,()=>ro(1)]),687,function(){wo();mo(Z,Un,[">",
"<","="],a=>Un=a);uo()}],684,[612,Fo,630,()=>Co(0,1,1)],692,[6,()=>ro(1),616,()=>Ho(1)],871,[687,function(){let a=M("div",Z,"display:flex;align-items:center;gap:7px");ai(a,Un,Sf(1),c=>{Un=c;fo()});mo(a,Tn,[">=","<=","="],c=>Tn=c);let b=M("input",a,"width:70px");b.type="number";b.onchange=()=>{Xn=S(b);fo()};b.value=Xn},6,()=>ro(1)],122,[6,()=>ro(1)]],On=[602,[612,function(){var a=L("div",Z,"","display:flex;justify-content:center;flex-direction:column;gap:18px");D[196](Tn);let b=L("button",a,N(W.name),
"height: 48px; background: url(nehhon/iconunits.webp) no-repeat, #00000042; width: max-content; padding-left: 60px;padding-right:12px;outline:1px solid #ffffff0d");Pf(b,D[193](Tn));b.onclick=()=>{we(e=>{Tn=e;fo();D[196](e);b.innerHTML=N(W.name);Pf(b,D[193](e))})};let c=L("div",a,N(629)+":"),d=L("input",c,"","margin-top:10px;padding:3px;margin-left:5px;width:60px;");d.type="number";d.min=0;d.value=Sn;d.onchange=()=>{Sn=parseInt(d.value);fo()};a=L("div",a,N(6)+": ");xo(a)},630,()=>Bo(1),628,()=>Eo([614,
Do,620,()=>qo(1,1,1),612,()=>no(0,1),642,po])],592,[612,()=>Eo([620,()=>qo(1,0,1),612,()=>no(0,1),642,po]),627,function(){var a=L("div",Z);let b=L("select",a);a=[632,408,7,664,665,666,674,418,633,243,376,245,412,244,246,415,414,416,282,368,371,814,813,265,413,379,367,373,731,437,410];for(let c=0;c<a.length;c++){let d=document.createElement("option");d.value=c;d.textContent=N(a[c]);Nf(d,b,N(a[c]))}b.value=Tn;b.onclick=()=>{Tn=parseInt(b.value);fo()}},631,()=>Eo([614,Do,620,()=>qo(1,1,1),612,()=>no(1,
1),642,po],1)],598,[612,Go,630,()=>Eo([644,Co,470,Ao],1)],586,Go,580,Go,587,Go,582,[612,Go,6,()=>xo(0,1)],594,()=>ro(1,0),593,()=>ro(1,0),597,[65,function(){D[241](0,1);let a=Sa(Z,Vd,()=>{var b=a;let c=jb(kb);for(let d=0;d<b.value.length;d++)c[d]=b.value.charCodeAt(d);p(a.value.length);D[241](a.value.length)},"text","width:500px");a.placeholder=N(65)},6,()=>ro(1,0)],667,[629,function(){Co(1);let a=M("div",Z,"margin-top:15px;display:flex;align-items:center;gap:7px"),b=ic(D[242](4),4);for(let c=0;4>
c;c++)bd(a,c),so(a,b[c],d=>D[243](c,d))},6,()=>ro(1,0)],681,[612,()=>Eo([616,()=>no(0,1),620,()=>qo(1,0,1),642,po,6,()=>ro(1,0)]),687,function(){wo();mo(Z,Un,["=","+","\u2212","\u00d7","\u00f7"],a=>Un=a);uo()}],689,[6,()=>ro(1),616,Ho],694,[616,function(){let a=L("div",Z);a.className="dplr";let b=ic(D[242](7),7);for(let e=0;7>e;e++)se(a,f=>{let h=a.children[e+7];h.style.visibility=f?"":"hidden";f&&(Pf(h,-28),h.oa=0);D[243](e,f?0:2147483647)},2147483647!=b[e]);var c=["shenemies","shview","shcontrol"];
for(var d=0;d<c.length;d++){let e=L("div",a);e.className=c[d];yo(e,d,b[d])}for(c=0;4>c;c++)d=L("div",a),d.className="shres",bd(d,c),yo(d,c+3,b[c+3])},695,()=>ro(1,0),696,()=>ro(1,1)],697,[612,()=>Eo([616,()=>no(0,1),620,()=>qo(1,0,1),642,po]),631,()=>Eo([614,Do,620,()=>qo(1,1,1),612,()=>no(1,1),642,po],1)],870,[687,()=>{let a=M("div",Z,"display:flex;align-items:center;gap:7px");ai(a,Un,Sf(1),c=>{Un=c;fo()});mo(a,Tn,["=","+","\u2212","\u00d7","\u00f7"],c=>Tn=c);let b=M("input",a,"width:70px");b.type=
"number";b.onchange=()=>{Xn=S(b);fo()};b.value=Xn},6,()=>ro(1,0)]],Qn=[],Nn=[],Io=[];
window.shrule=function(a,b,c,d){let e=L("div",Z);var f=M("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");O("span",f,638,"color:#ffe594");let h=M("input",f,"width:40px");h.type="number";h.min=0;h.value=a;L("div",f,"0 =","color:#ffffff70");L("div",f,"&infin;","font-size:31px;margin-top:-1px;margin-left:-7px;color:#ffffff70");h.onchange=()=>D[236](parseInt(h.value),-1,-1);f=M("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;");O("span",f,648,
"color:#ffe594");let k=M("input",f,"width:80px");k.type="number";k.min=0;k.value=c;k.onchange=()=>D[236](-1,-1,parseInt(k.value));L("div",f,"ms","color:#ffffff70;margin-left:-6px");f=M("div",Z,"display:flex;align-items:center;gap:11px;height:52px;font-size:13px;opacity:0.4");O("span",f,647,"color:#ffe594");let q=M("input",f,"width:80px");q.type="number";q.min=0;q.value=b;q.onchange=()=>D[236](-1,parseInt(q.value),-1);L("div",f,"ms","color:#ffffff70;margin-left:-6px");L("span",e,N(610)+" ->"+(d?"":
" <span style='color:#989898'>"+N(641)+"<span>"));e.id="cond";Io[0]=L("div",e);Io[1]=L("div",e)};window.shrules=function(a,b,c){b?a=Od(Pd(a,b)):a=N(611)+"-"+c;Jo(0,c,a)};
window.shevents=function(a,b,c,d,e,f,h,k){b?a=Od(Pd(a,b)):a=N(1==e?578:577)+"-"+d;Jo(e,d,a,c);1==e&&(b=Io[h],h&&L("span",b,"||","color:var(--color1)"),L("span",b,(f&&"<span style='color:red;margin-right:1px'>!</span>"||"")+a,"color:#"+(f?"ff8585":"85ff85")),h||L("span",b,"&&","color:var(--color1)"),k&&(Io[0].lastChild?Io[0].removeChild(Io[0].lastChild):J(Io[1].children[0])))};window.shactions=function(){};var Pn;
function Jo(a,b,c,d,e){let f=L("div",yn[a]);f.O=b;let h=L("div",f,c);a&&O("span",f,1==a?Ln[2*d]:On[2*d]);f.onclick=q=>{if(!q||q.target!=k)if(Pn=a,Nn[a]!=f||!a){if(q=Nn[a])q.style.background="";Qn[a]=f.O;Nn[a]=f;f.style.background="#0028a247";Cn.value=h.innerHTML;if(0==a){zn.show();ub(Z);ub(En);ub(Dn);R(Gn);R(Fn);ub(Hn);for(q=1;3>q;q++){ub(yn[q]);An&&(m("rules").children[q+1].style.cssText="");let t=Nn[q];t&&(t.style.background="",Nn[q]=void 0)}An=0;D[218](f.O,0)}else q=Nn[1==a?2:1],Nn[1==a?2:1]=void 0,
q&&(q.style.background=""),D[222](f.O,a)}};let k=L("button",f,"\u00d7");k.className="closeIcon";k.onclick=()=>{let q=Pn;J(f);D[237](a,0,f.O);for(var t=0;3>t;t++){let r=yn[t];for(let u=0;u<r.children.length;u++)r.children[u].O=u}p(Qn[0],f.O);t=Qn[0]==f.O;if(Nn[q]==f||t||!yn[0].children.length)if(q&&Qn[q]==f.O)Nn[0].onclick();else if(yn[0].children[0])yn[0].children[0].onclick();else R(zn),ub(Z),ub(yn[1]),ub(yn[2]);else if(t=Nn[q].O,p(t,q),q)D[218](Nn[0].O,1),D[222](t,q,1);else D[218](t,1)};e&&(f.onclick(),
Cn.oninput())}function In(){let a=D[217]();Jo(0,a,N(611)+"-"+a,0,1)}function Jn(){if(yn[0].children.length){let a=D[219]();Jo(1,a,N(578)+"-"+a,0,1)}}function Kn(){if(yn[0].children.length){let a=D[219](1);Jo(2,a,N(577)+"-"+a,0,1)}}var Q=!1;
function qn(a){let b=Xc("",1);O("span",b,70,"margin-right:10px");let c=Sa(b,"",void 0,"number","",9999999,0);c.focus();O("button",b,675,"display:block;margin:auto;margin-top:20px").onclick=()=>{let d=D[251](S(c));1==d?(Hb(b),a()):2==d?(Hb(b),alert(N(690))):alert(N(688))}}var Ko=a=>{E=!1;z||(un(),D[109](545,ka,!!window.indexedDB,Math.floor(Math.random()*2**32),E));Q=!0;Qk(a)};function gn(a){D[250]()?qn(Ko):Ko(a)}
var Lo=[{h:1,id:0,V:[0,2]},{h:3,id:1,V:[0,2]},{h:-1,pa:1,id:2},{h:6,pa:1,id:4,V:[0,2]},{h:5,id:6,V:[0,2]}],oi;window.guname=(a,b)=>{oi=a?Od(gc(b,a)):""};function De(a){let b=jb(kb),c=a.length;20<c&&(c=20);for(let d=0;d<c;d++)b[d]=a.charCodeAt(d);p(a);D[268](c)}
var je=(a,b,c)=>{var d=c||zo;let e=[];b=D[201](b);d=M("div",d);for(let h=0;h<Lo.length;h++){let k=Lo[h];if(0==k.id){if(!a[k.id]&&1==b)continue}else if(k.V&&0>k.V.indexOf(b))continue;L("div",d,k.name&&N(k.name),`background:url(nehhon/icons2.webp) 0px ${-20*k.h}px;width:20px;height:20px`);var f=a[k.id];let q=L("div",d),t=L("span",q),r;se(q,u=>{r.value=u?1:2147483647;if(r.onchange)r.onchange();u?Gd(t):R(t)},2147483647!=f).style.cssText+="float:left;margin-right:5px;margin-top:-1px;";r=L("input",t);2147483647==
f&&R(t);r.type="number";r.value=f;e[k.id]=r;k.pa&&(L("span",t," / ","font-size:21px"),f=L("input",t),f.type="number",f.value=a[k.id+1],e[k.id+1]=f)}for(b=0;b<e.length;b++)e[b]&&(d=e[b],d.max=2147483647,d.min=-1);if(!c)for(c=0;c<a.length;c++)e[c]&&(e[c].onchange=()=>{for(var h=0;h<a.length;h++)e[h]&&(a[h]=parseInt(e[h].value));h=jb(kb);for(let k=0;k<a.length;k++)h[k]=a[k];D[123](2147483647)});return e};window.editProps2=je;
var Po=(a,b,c,d,e)=>{p(a,c);0>b&&(b=Mo(b));if(!a)return D[202](b);var f=[{h:1,id:0,V:[0,2]},{h:3,id:1,V:[0,2]},{h:-1,pa:1,id:2},{h:6,pa:1,id:4,V:[0,2]},{h:5,id:6,V:[0,2]}];let h;e?h=zo:(h=Xc(""),h.className="unitProps",d&&(h.className="unitProps viewonly"),h.parentNode.parentNode.style.position="fixed",h.style.minWidth="300px");let k=[],q;0<c||d||(L("span",h,N(516),"margin-right:15px;color:var(--color1)"),q=jn(h));if(!e){var t=L("button",h);t.className="closeIcon";t.onclick=function(){Hb(h);if(!d){for(var v=
0;v<a.length;v++)k[v]&&(a[v]=parseInt(k[v].value));if(c){p(a);v=jb(kb);for(let w=0;w<a.length;w++)v[w]=a[w];D[123](c);p(k)}else{if(q.checked)n[No]&&(n[No]=0,n.splice(No+1,7));else{if(!n[No]){for(v=0;7>v;v++)n.splice(No+1,0,0);n[No]=1}p("s",a);for(v=0;7>v;v++)n[No+1+v]=a[v]}Oo(0,n)}}}}b=D[201](b);if(Q&&!e){t=M("div",h,!d&&!e&&"margin-top:14px");O("div",t,747);t=M("div",t,"display:flex;gap:11px");let v;se(t,w=>{v.style.display=w?"unset":"none";w||(oi="",D[268](0))},oi);v=M("input",t,"width:137px");
oi||R(v);v.maxLength=20;v.onchange=()=>{De(v.value)};v.value=oi}let r=M("div",h,!d&&!e&&"margin-top:34px");for(t=0;t<f.length;t++){let v=f[t];p(v.id,a[v.id]);if(0==v.id){if(!a[v.id]&&1==b)continue}else if(v.V&&0>v.V.indexOf(b))continue;L("div",r,v.name&&N(v.name),`background:url(nehhon/icons2.webp) 0px ${-20*v.h}px;width:20px;height:20px`);var u=L("div",r);let w=L("input",u);w.type="number";w.value=a[v.id];k[v.id]=w;v.pa&&c&&(L("span",u," / ","font-size:21px"),u=L("input",u),u.type="number",u.value=
a[v.id+1],k[v.id+1]=u)}for(f=0;f<k.length;f++)k[f]&&(b=k[f],d&&(b.disabled=!0),b.max=2147483647,b.min=-1,b.oninput=Qh);if(c&&!e){L("span",r);b=L("select",r);for(let v=0,w=D[28]();v<w;v++)f=v?Od(Pd(D[111](v),20)):N(23),$c(D[132](v)),L("option",b,f).value=v;L("option",b,N(22)).value=2**31-1;b.value=a[7];k[7]=b}q&&(q.parentNode.style.display="inline",n[No]||(q.checked=!0,R(r)),q.onclick=function(){q.checked?R(r):r.style.display=""});if(e)for(e=0;e<a.length;e++)k[e]&&(k[e].onchange=()=>{for(var v=0;v<
a.length;v++)k[v]&&(a[v]=parseInt(k[v].value));p(a);v=jb(kb);for(let w=0;w<a.length;w++)v[w]=a[w];D[123](2147483647);p(k)})};window.editProps=Po;function P(a){m(a)&&(m(a).style.display="none")}function yd(a){m(a)&&(m(a).style.display="block")}function re(){let a=Xc("",1),b=D[254](),c=M("div",a,"display:flex;align-items:center;gap:8px");O("div",c,516);se(c,e=>{e?ub(d):(Qo(d),D[252](3));D[254](1,!e)},!b);let d=L("div",a);b&&(Qo(d),D[252](3))}
function Qo(a){let b=D[28]();Ro=M("div",a,`grid-template-columns:repeat(${b},auto)`);Ro.className="dpltbl wbak";for(a=0;a<b**2;a++)L("div",Ro);Ro.children[0].style.height="calc(100% - 12px)"}var So=[a=>{Ro=M("div",a,"margin-top:10px;gap:10px 14px;display:grid;grid-template-columns:auto auto");Ro.className="wbak";D[103](2)},a=>{Qo(a);D[103](1)}],Ro;function qe(){let a=Xc("",1);O("span",a,620,"margin-bottom:5px");let b=D[246]();ie(a,b,[673,672],()=>{b=b?0:1;J(Ro);So[b](a)});So[b](a)}
window.dpltbl0=function(a,b,c,d){b=Od(Pd(b,20));M("div",Ro,"padding-left:8px;border-left:2px solid "+$c(c)).textContent=b;let e=Sa(Ro,d,()=>{te(e);D[105](a,S(e))},"number","width:40px",1E3,0)};function To(a,b,c,d){let e=Ro.children;a.onmouseenter=()=>{e[b].style.background="#ffffff47";e[c*d].style.background="#ffffff47"};a.onmouseout=()=>{e[b].style.background="";e[c*d].style.background=""}}
window.dpltbl=function(a,b,c,d){b=Od(Pd(b,20));let e=D[28](),f=jb(kb),h=Ro.children;h[a].style.cssText=`align-self:end;writing-mode:vertical-rl;border-top:2px solid ${$c(c)};padding:7px 5px`;h[a*e].style.cssText=`justify-self:end;border-left:2px solid ${$c(c)};padding:5px 7px`;h[a].textContent=b;h[a*e].textContent=b;for(let k=0;k<e-1;k++){let q=k+1;if(3==d){if(q==a)continue;let t=se(h[a*e+q],()=>{D[245](t.checked,q,a,d)},f[q]);t.style.backgroundPositionX="0px";To(t,q,a,e)}else if(0==d){if(k>=a-1)break;
let t=0,r=0,u=se(h[a*e+1+k],()=>{r=1;p(a,k+1,u.checked);D[245](u.checked,a,k+1);if(t)t=0;else v.onclick();r=0},f[k+1]);To(u,k+1,a,e);let v=se(h[a+(1+k)*e],()=>{r||(t=1,u.onclick())},f[k+1]);v.style.opacity=.25;To(v,a,k+1,e)}}};
window.chglmap=function(a,b){z.useProgram(X);Ma?(z.uniform1f(z.getUniformLocation(X,"mapSize"),2**Math.ceil(Math.log2(a))),z.uniform1f(z.getUniformLocation(X,"mapSize2"),a)):z.uniform1f(z.getUniformLocation(X,"mapSize"),a);z.useProgram(V);z.uniform1f(z.getUniformLocation(V,"mapSize"),a);z.uniform1f(z.getUniformLocation(V,"zMax"),96*a);b||(D[130](a),le())};function $c(a){for(a=a.toString(16);6>a.length;)a="0"+a;return"#"+a}
window.setupEditorPlayerTable=function(a,b,c,d,e){c=Od(Pd(c,20));var f=$c(b);b=me;let h=M("input",b,"width:13px");h.type="color";h.value=f;h.onchange=()=>{D[104](a,parseInt(h.value.substr(1),16));Nd()};f=L("input",b);f.value=c;f.za=a;f.onchange=ln;for(let q=0;4>q;q++){let t=M("input",b,"width:60px");t.type="number";t.value=e[q];t.onchange=()=>{D[107](a,S(t),q)}}let k=se(b,()=>D[141](a,100*k.checked+1,0,1),d);L("button",b,"...","padding:3px 8px").onclick=()=>Uo(a);c=L("button",b);c.className="closeIcon";
c.onclick=()=>D[126](a)};function Vo(){var a=Wo.data,b=Xo.data,c=m("invrtimg").checked;p(c);var d=255*parseInt(m("rngcnvs").value)/100;for(let e=0;e<a.length;e+=4){let f=(a[e]+a[e+1]+a[e+2])/3;c&&f<d||!c&&f>=d?(b[e]=2,b[e+1]=29,b[e+2]=45):(b[e]=34,b[e+1]=55,b[e+2]=0);b[e+3]=255}m("prevcan").getContext("2d").putImageData(Xo,0,0)}var Wo,Xo;
function jn(a){var b=document.createElement("label");b.className="container";var c=document.createElement("input");c.type="checkbox";c.checked=0;var d=document.createElement("span");d.className="checkmark";b.appendChild(c);b.appendChild(d);a.appendChild(b);return c}function Yo(){this.H.innerHTML='<div style="background:url(nehhon/icons2.webp) no-repeat 0px -200px;width:20px;height:20px;display:inline-block;margin-bottom:-6px;"></div>x'+this.value/100}
function kl(){this.H.innerHTML=this.value+"%"}function Zo(){this.H.innerHTML=this.value}function $o(){this.H.innerHTML=this.value+"m"}function ap(){this.H.innerHTML=this.value+N(558)}function bp(){this.H.innerHTML=Oc(1E3*parseInt(this.value))}function cp(){this.H.innerHTML=this.value+"s"}
async function ue(){let a=new Image;a.src=window.URL.createObjectURL(this.files[0]);await a.decode();var b=D[47](),c=m("mmimg");c.innerHTML="";var d=M("canvas",c,"position: static;margin:28px;display:block;width:291px");d.id="prevcan";var e=L("input",c);e.type="range";e.id="rngcnvs";il(e);e.oninput=function(){this.H.innerHTML=this.value+"%";Vo()};e.H.innerHTML="50%";e.value=50;L("span",c,N(458),"margin-left:10px");c=jn(c);c.id="invrtimg";c.onchange=Vo;d.width=b;d.height=b;d=d.getContext("2d");d.imageSmoothingEnabled=
!0;d.fillStyle="#fff";d.fillRect(0,0,b,b);c=a.width;e=a.height;var f=b/(c>e?c:e);c=Math.floor(c*f);e=Math.floor(e*f);d.drawImage(a,(b-c)/2,(b-e)/2,c,e);Wo=d.getImageData(0,0,b,b);Xo=new ImageData(b,b);Vo();L("button",m("mmimg"),N(2),"margin-bottom:36px;margin-left:22px").onclick=dp;URL.revokeObjectURL(a.src)}function dp(){var a=D[186](),b=D[187](),c=D[47]();c=Ni(D[78](1),c*c);var d=Xo.data;for(let e=0;e<d.length;e+=4)c[e/4]=2==d[e]?b:a;p(c);D[124]();le.update=!0}
function Uo(a){let b=Xc("",1);b.id="mapPropsXtra";if(D[141](a)){var c=L("div",b);for(let e=0;2>e;e++)Sa(c,D[141](a,0,e),function(){te(this);this.value=D[141](a,S(this)+1,e)},"number","",100,e?0:1),O("span",c,[10,34][e])}O("button",b,542,"display:block;margin:auto;margin-bottom:20px").onclick=()=>{D[140](a,1);Hb(b);Uo(a)};O("button",b,12,"display:block;margin:auto").onclick=()=>D[140](a);c=M("div",b,"margin-top:20px");let d=Th();d.unshift({name:N(42),id:4},{name:N(11),id:38});for(let e of d)Sa(c,D[139](a,
e.id),function(){D[139](a,e.id,S(this)+1)},"number"),L("span",c,e.name)}var me;function bd(a,b){a=L("img",a);a.src="nehhon/"+["gold","wood","food","stone"][b]+".gif";return a}function ne(){ub(me);L("button",me,"+").onclick=()=>D[114](1);O("div",me,6,"justify-self:baseline");for(let a=0;4>a;a++)bd(me,a);O("div",me,20);L("div",me);L("div",me);D[103]()}window.editorPlayerTable=ne;
function ln(){var a=17;this.value.length<a&&(a=this.value.length);for(var b=jb(kb),c=0;17>c;c++)b[c]=0;for(c=0;c<a;c++)b[c]=this.value.charCodeAt(c);D[106](this.za);Q&&Nd()}function ep(a){Q&&(a.className="onlyrnd",a.dataset.nly="Only random maps")}var rn=[];
window.customMapTable=function(a,b,c,d,e,f,h){var k=m("custombody");k=L("tr",k);M("td",k,`background:rgb(${e},${f},${h})`).className="ucolor1";let q=L("td",k,Od(Pd(b,20)),d?"color:var(--color1)":"");q.className="username1";rn[a-1]=q;D[246]()||(L("td",k,c).className="team1");k.onclick=()=>{for(let t of rn)t.style.cssText="";q.style.color="var(--color1)";D[113](a)}};
function Cg(a,b,c,d,e){let f;c&&=N(c);if(d){f=document.createElement("div");let h=null;for(let k=0,q=a.children;k<q.length;k++)if(q[k].Nb>d){h=q[k];break}f.Nb=d;a.insertBefore(f,h)}else f=L("div",a);f.className=e?"dataOrder":"dataIcon";f.style.backgroundPositionY=b+"px";c&&(f.dataset.title=c);return f}window.stFST=function(a,b,c,d,e){W={race:a,D:b,name:c,priority:d,fb:e}};var W;
window.strrNFO=function(a,b,c,d,e,f,h,k,q,t){if(c=Rf[c])for(let r of c)r.innerHTML="",r.ac=a&&!t,r.className=a?"":"blocked",t&&(r.className="dis"),(k||h)&&(d||e)&&(h?e&&1<=f&&(r.innerHTML="..."):r.innerHTML=e?`<span><span>${e}x</span>\u221e</span>`:d,r.className=f?"crnt1":"crnt"),h&&b&&(r.className="invd"),r.Xa&&(r.Xa.x=b),q&&(r.dataset.x=b,d?r.dataset.loading=d:delete r.dataset.loading,b?r.parentNode.classList.remove("nobdgs"):r.parentNode.classList.add("nobdgs"))};
var fp=()=>{R(m("supertree").parentNode.parentNode);D[283](0)},Tf,Rf,Qf;
window.bldmn2=function(a,b,c){2<c&&(c=0);Qf=1;var d=Xc("",1);d.id="supertree";d.children[0].onclick=fp;Rf=[];Of=[];d=L("div",d);var e=ic(a,b);let f=0,h=[],k=[10,79,64];for(a={10:0,79:1,64:2};f<b;){let r=e[f++],u={id:r,D:e[f++],name:e[f++],race:e[f++],type:e[f++],Db:e[f++],order:e[f++],Cc:{}};u.Eb=e.slice(f+1,e[f]+f+1);f+=e[f]+1;u.Tc=e.slice(f+1,e[f]+f+1);f+=e[f]+1;u.Xb=e.slice(f+1,e[f]+f+1);f+=e[f]+1;h[r]=u}p(h);p(e);b=(r,u,v,w,A,x)=>{let y=L("button",u);Pf(y,48*v);y.onmouseenter=()=>{D[282](w,0,
r,D[112](),0,0,1);pd.innerHTML&&(pd.className="tree",pd.style.cssText="");document.body.append(pd);let B=y.getBoundingClientRect(),I=pd.getBoundingClientRect();pd.style.top=B.y+60+"px";pd.style.left=B.x-I.width/2+24+"px"};y.onmouseout=B=>{pd.innerHTML="";pd.className="";R(pd);m("content").append(pd);if(1!=B){for(let I of Of)I.classList.remove("mrkd"),I.classList.remove("mrkd1");Of.length=0}};y.onmousedown=B=>{if(y.ac&&(D[15](0,B.button,w,A),y.onmouseout(1),x)){let I=h[k[r]],H=Rf[I.order];for(let K of H)I.x?
(fp(),yh(B,1)):K.classList.contains("mrkd")||(x.parentNode.classList.add("mrkd"),K.classList.add("mrkd"),setTimeout(()=>{x.parentNode.classList.remove("mrkd");K.classList.remove("mrkd")},2E3))}};Rf[w]||(Rf[w]=[]);Rf[w].put(y);return y};let q=M("div",d,"display:flex;justify-content: center;gap:22px"),t=L("div",d);c=k[c];uk(k,c);k=[k[0],c,k[1]];for(c=0;3>c;c++){d=k[c];e=h[d];let r=a[d],u=L("button",L("span",q));Pf(u,48*e.Db);u.className="dataOrder";let v=L("div",t);u.parentNode.onclick=()=>{for(let w of t.children)R(w);
for(let w of q.children)w.style.opacity=".3";v.style.cssText="";u.parentNode.style.opacity="";Tf=r};e.Ya=v;for(let w of h)if(0<=w.Xb.indexOf(d)){e=document.createElement("div");e.className="menuord";Nf(e,v,-w.Eb.length);b(r,e,w.Db,w.order,d,u).Xa=w;w.Ya=L("div",e);w.Ya.className="menuord";for(let A of w.Eb)D[260](A),e=b(r,w.Ya,Kf.icon,A,w.id),2147483647!=Kf.Kb&&(e.Xa=h[Kf.Kb])}}q.children[1].onclick();D[283](1)};
window.bldmnu2=function(){if(m("supertree"))m("supertree").parentNode.parentNode.style.cssText="",D[283](1);else D[281]()};var gp;
function we(a,b){let c=Gb("",1);var d=L("table",c);if(b){O("thead",d,763);b=L("td",L("tbody",d));b.className="s3race";b.colSpan=4;var e=jb(gp);for(let k=0;k<e.length;k++){D[196](e[k]);if(!(k%3)){let q=[];var f=L("div",b);f.dataset.title=N(W.name);f.Lb=q;f.onclick=()=>{a(-1-k,q);Hb(c)}}var h=W.D;f.Lb.put(h);Cg(f,h,0,W.priority)}}e=L("thead",d);f=L("tbody",d);b=L("tbody",d);L("div",d,N(60),"text-transform:uppercase;padding:11px;padding-top:23px;color:#0f0");d=L("td",L("tbody",d),"","border:none");d.colSpan=
4;c.id="selObj";for(h=0;4>h;h++)L("td",f),L("td",b),L("td",e,Rb[h]);e=D[90]();for(let k=0;k<e;k++){D[196](k);let q=D[194](k,1);h=W.race;let t=f.children[h];q||(q=D[194](k,0,1),t=b.children[h]);q||(q=D[194](k,0,0,1),t=d);q&&(Cg(t,q,W.name,W.priority).onclick=()=>{a(k,q);Hb(c)})}}var hp;function ip(a,b,c){a=L("div",a);b=b?2==b?N(22):Zc(0,D[29](b)):N(23);a.dataset.selplayer=b;a.onclick=jp;a.fc=c}var kp;
function jp(){this.innerHTML="";let a=L("div",this);L("div",a,N(23)).Qa=0;L("div",a,N(22)).Qa=2;kp=a;document.addEventListener("mouseup",lp,{once:!0})}function lp(a){a=a.target;void 0!=a.Qa&&(p(a.parentNode.parentNode),a.parentNode.parentNode.fc(a.Qa),a.parentNode.parentNode.dataset.selplayer=a.innerHTML);J(kp)}var mp,np;function op(){let a=S(Dk[21]);np.innerHTML=N(510)+": "+Oc(1E3*(S(Dk[24])*(a-1)+a*S(Dk[8])*60))}
function pp(a,b){return`<span>=</span> ${a}\u00d7${b}\u00b2/256\u00b2 <span>=</span> <span style="font-size:12px;font-family:'nh18';color:var(--color1);">${Math.round(a*b**2/65536)||1}</span>`}function qp(){var a=parseInt(this.value);if(0>a||!a)this.value=a=0;9999<a&&(this.value=a=9999);n[this.ka]=a;if(this.Pa){a=n[0];let b=n[this.ka];this.Pa.innerHTML=n[this.ka+3]?pp(b,a):"";this.Pa.Mb=b}}function rp(a){n.push(1,1,a,10,0);Oo(0,n)}function sp(a){n.push(1,0,a,1,0);Oo(0,n)}
function Mo(a,b){b||=0;return jb(gp)[-(a+1)+b]}var No;
function Oo(a,b){gp=new fc(D[197](),48);jb(gp);hp.innerHTML="";mp.innerHTML="";for(var c=47;c<b.length;c+=5){let k=c;var d=b[k],e=b[k+1];let q=b[k+2],t=b[k+3],r=b[k+4],u=1==e;var f=L("tr",u?mp:hp);let v=L("td",f);var h=L("div",v,"",r&&"background-color:#ff00ff17 !important");h.className="sett2";if(r||!a)h.onclick=()=>{No=k+4;Po(r?b.slice(k+5,k+5+7):0,q,0,a)};let w;if(0<=q)D[196](q),w=Cg(v,W.D,W.name);else for(w=L("div",v),w.className="dataIcon3",D[196](Mo(q)),w.dataset.title=N(W.name),h=0;3>h;h++){let x=
L("div",w),y=Mo(q,h);D[196](y);x.style.backgroundPositionY=W.D+"px"}a||(w.onclick=()=>we((x,y)=>{var B=w,I=k+2;p(y);if(0>x){B.className="dataIcon3";Oi(B,"");for(let H=0;3>H;H++)L("div",B).style.backgroundPositionY=y[H]+"px"}else B.className="dataIcon",Oi(B,""),B.style.backgroundPositionY=y+"px";B.dataset.title=N(D[89](0>x?Mo(x):x));b[I]=x;p(x,B,b,I)},u));L("span",v,"\u00d7");let A=L("input",v);A.value=d;A.type="number";A.ka=k;A.oninput=qp;A.onchange=qp;if(u)e=Lg(L("td",f,"","text-align:left"),t),
e.ka=k+3,e.max=35,e.style.width="116px",e.H.style.width="36px",e.oninput=function(){this.H.innerHTML=this.value+"m"},e.oninput(),e.onchange=qp;else{let x=jn(L("td",f));x.checked=t;d=L("td",f);d.className="finalRes";A.Pa=d;A.onchange();x.onchange=()=>{b[k+3]=x.checked?1:0;A.onchange()};a?(e=e?2==e?N(22):void 0:N(23),L("td",f,e,"font-size:13px;text-align:center")):ip(L("td",f),e,y=>b[k+1]=y)}r&&(c+=7);a||(f=L("div",L("td",f)),f.className="closeIcon",f.onclick=()=>{b.splice(k,5+(r?7:0));Oo(0,b)})}a||
(c=L("div",L("td",L("tr",mp))),c.className="sum",c.onclick=()=>we(rp,1),c=L("div",L("td",L("tr",hp))),c.className="sum",c.onclick=()=>we(sp))}function tp(a){return`<td>${a||""}</td>`}function up(){for(let a of vp)if(a.id&&ra[a.id]!=n[a.id])return!0;return!1}
function wp(a){var b=vp,c=up();let d=L("div",a);for(let e of b){if(e.Da){0==d.children.length&&J(d);d=L("div",a);continue}if(!e.id){L("div",d,"","margin-top:20px");L("div",d);continue}b=xp(e.title,e.type,d);"input"==e.type&&(b.type="number");void 0!=e.min&&(b.min=e.min);e.max&&(b.max=e.max);e.step&&(b.step=e.step);e.oninput&&(b.oninput=e.oninput,b.oninput());e.h&&(L("img",b.parentNode,"","margin-right:3px",1).src="nehhon/"+e.h);e.options&&yp(e.options,b);e.ob&&(b.style.cssText=e.ob);e.ya&&L("span",
b.parentNode,e.ya,"margin-left:4px;margin-right:10px",1);e.id&&zp(e.id,b);let f=ra[e.id];if(29==e.id)f+="m";else if(35<=e.id&&38>=e.id)f+="s";else continue;L("div",b.parentNode,N(516)+" -> "+f)}return c}function Qh(){te(this)}function te(a){var b=parseInt(a.min),c=parseInt(a.value);c>parseInt(a.max)?a.value=a.max:c<b?a.value=a.min:c||(a.value=0)}
function be(){for(var a="",b=0,c=gb.length;b<c;b++){var d=gb[b];var e=b==D[97]()?"selected":"";a+=`<option value="${b}" ${e}>${d.name}</option>`}return a}function Hk(a,b,c){var d=C.l?D[70]():D[28]()-1;if(0>=d)return a;if(b){if(80>Math.PI*a/d)return a=Math.round(80*d/Math.PI),Ta(fg(N(25),a),"#d2bf61"),a}else if(b=13100*Math.PI*c**2/(5625*Math.PI),a**2/d<b)return a=Math.round(Math.sqrt(b*d)),Ek||Ta(fg(N(25),a),"#d2bf61"),a;return a}
window.updtrr=function(){jc(function(){D[122]();le.update=!0;D[121]();Jd()})};var xe=()=>"1"==g.menud&&"true"==g.theme&&!Q;function Bp(){var a=n;for(let b=0;b<Dk.length;b++){let c=Dk[b];c&&("checkbox"==c.type?c.checked=a[b]:c.value=a[b],"range"==c.type&&c.oninput&&c.oninput(),c.onchange||(c.onchange=Qh))}}
var Cp,Dp,vp=[{id:42,title:523,type:1},{id:17,title:395,type:1},{id:20,title:491,type:1},{id:40,title:508,type:1},{id:43,title:651,type:1},{id:44,title:869,type:1},{id:45,title:877,type:1},{Da:1},{id:29,title:494,type:2,oninput:$o,max:256,min:1,ob:"width:167px"},{Da:1},{id:39,title:504,type:1},{id:33,title:501,type:2,oninput:Yo,min:0,max:200,step:25},{id:32,title:500,oninput:Yo,type:2,min:0,max:200,step:25},{id:31,title:499,oninput:Yo,type:2,min:0,max:200,step:25},{id:34,title:71,oninput:function(){this.H.innerHTML=
"x"+this.value/100},type:2,min:100,max:500,step:100},{Da:1},{id:41,title:511,type:2,oninput:Zo,min:10,max:1E3,step:10},{Da:1},{title:502,id:35,h:"gold.gif",type:2,oninput:cp,min:1,max:30},{id:36,h:"wood.gif",type:2,oninput:cp,min:1,max:30},{id:37,h:"food1.webp",type:2,oninput:cp,min:1,max:30},{id:38,h:"stone.gif",type:2,oninput:cp,min:1,max:30},{},{id:30,title:495,type:"select",options:[89,496,497,498],ya:"\u25bc"},{id:25,h:"gold.gif",type:"input",max:5E4},{id:26,h:"wood.gif",type:"input",max:5E4},
{id:27,h:"food.gif",type:"input",max:5E4},{id:28,h:"stone.gif",type:"input",max:5E4}],Ep;function Fp(){var a=m("prstnpt").value,b=!Gp[a];Gp[a]=Ck();g.presets4=JSON.stringify(Gp);b&&Hp(a,n,Ep)}
function Hp(a,b,c,d){let e=L("span",c);L("button",e,(d?"<span style='color:#0ff;text-shadow:0px 0px 8px'>\u2714</span> ":"")+a,"color:var(--color1);margin-bottom:20px").onclick=()=>{n=b.slice();Cp.checked=0<n[8];Cp.onclick();Dp.checked=up();Dp.onchange(5);Bp();Oo(0,n);Dk[30].onchange();op()};d||(L("button",e,"\ud83d\udfa9","color:red;font-size:14px;line-height:14px;width:18px;background:#ff00002b;padding:0px;border-radius:0px").onclick=()=>{Gp[a]=void 0;g.presets4=JSON.stringify(Gp);J(e)})}var Gp;
function xp(a,b,c){L("div",c,a&&N(a)||"");a=L("div",c);return b?1===b?jn(a):2==b?Lg(a):L(b,a):a}function yp(a,b){for(let c=0;c<a.length;c++)L("option",b,N(a[c])).value=c}function se(a,b,c,d){let e=L("div",a,"","",d);e.className="check2";c&&(e.checked=c,e.style.backgroundPositionY="0");e.onclick=()=>{e.checked=!e.checked;e.style.backgroundPositionY=e.checked?"0":"";b(e.checked)};return e}var Dk;function zp(a,b){Dk[a]=b;b.ka=a}
function oe(a){(a=5===a)&&m("mapconfiguration")&&Hb(m("mapconfiguration"));if(m("mapconfiguration"))m("mapconfiguration").parentNode.parentNode.style.display="table";else{var b=Xc("");b.id="mapconfiguration";Dk=[];a&&(m("mapconfiguration").className="viewonly");var c=L("button",b);c.className="closeIcon";var d=L("div",b);d.id="mainconf";if(!Q){var e=L("div",d,"","");for(var f=0;4>f;f++){L("img",e).src="nehhon/"+["gold","wood","food","stone"][f]+".gif";var h=L("input",e);zp(1+f,h);h.min=-1E9;h.max=
1E9;h.step=100;h.type="number"}}if(Q){var k=L("div",d);ep(k)}f=L("div",d);e=xp(1,"input",f);e.step=32;e.min=96;e.max=2048;e.type="number";zp(0,e);e.onchange=function(){var H=S(this)||0;this.value=H=Q?H:Hk(H,Dk[16].checked,S(Dk[29]));let K=document.getElementsByClassName("finalRes");for(let U of K)U.innerHTML&&(U.innerHTML=pp(U.Mb,H));n[0]=H;te(this)};e=xp(26,"select",f);zp(6,e);for(h=0;h<gb.length;h++)L("option",e,gb[h].name).value=h;e=xp(27,"select",Q?k:f);zp(7,e);yp([28,29,30,31,32,33,525,524],
e);e=xp(35,"select",f);zp(12,e);yp([36,37,38,39],e);f=L("div",d);e=xp(398,"select",f);zp(19,e);yp([399,400,401],e);Q||(e=xp(11,"input",f),zp(9,e),e.type="number",e=xp(42,"input",f),zp(10,e),e.type="number",e.min=100,e.max=5E4);e=xp(396,2,f);e.oninput=ap;zp(18,e);e.style.width="150px";Q||(f=L("div",d));e=xp(394,1,Q?k:f);zp(16,e);e=xp(393,2,Q?k:f);zp(15,e);e.oninput=kl;e.style.width="150px";Q&&k.parentNode.appendChild(k);Q||(L("div",f,"","min-height:0px"),e=L("div",f,"","min-height:0px"),e.className=
"diffnfo",e.innerHTML='easy<span style="width:14px"></span>normal<span style="width:14px"></span>hard<span style="width:25px"></span>legend',e=xp(10,2,f),e.oninput=kl,zp(11,e),e.style.width="150px",e.min=15,e.max=150,e=xp(34,2,f),e.oninput=kl,zp(13,e),e.style.width="150px");O("button",b,737,"padding: 12px 15px;\n    width:max-content;\n    background: #fbd45c1c;\n    color:var(--color1);\n    box-shadow:0px 0px 20px #000;\n    border:1px solid rgb(243 205 90 / 8%);\n    margin-bottom: 18px;\n    font-size: 16px;\n    margin-top:-23px;\n    ").onclick=
()=>pe(a);d=L("div",b);d.id="br";let r=L("div",d);Cp=xp(484,1,r);Cp.checked=0<n[8];r.children[0].style.color="var(--color1)";let u=xp(487,"select",r);zp(5,u);yp([489,720,509],u);let v=xp(485,2,r);v.min=1;v.max=60;v.oninput=ap;zp(8,v);let w=xp(490,"input",r);w.step=10;w.min=1;w.max=8E4;w.type="number";zp(22,w);let A=xp(486,2,r);A.min=0;A.max=3600;A.step=30;A.oninput=bp;zp(14,A);let x=xp(488,2,r);x.min=1;x.max=25;x.oninput=Zo;zp(21,x);let y=xp(492,2,r);y.min=0;y.max=100;y.oninput=$o;zp(23,y);let B=
xp(493,"input",r);B.step=10;B.min=0;B.max=600;B.type="number";zp(24,B);L("span",B.parentNode,"s");B.style.width="50px";B.addEventListener("input",op);v.addEventListener("input",op);x.addEventListener("input",op);L("div",r);L("div",r);L("div",r);np=L("div",r,"","font-size:11px;color:#ffffff4d;line-height:0px;margin-top:11px;text-align:right");Cp.onclick=function(){this.checked?(x.value=3,A.value=600,w.value=55,v.value=3,y.value=4,u.value=1,B.value=15,x.oninput(),A.oninput(),v.oninput(),v.min=1,y.oninput(),
op()):(x.value=0,A.value=0,w.value=0,v.min=0,u.value=0,v.value=0,y.value=0,B.value=0);for(let H=2;H<r.children.length;H++){let K=r.children[H];this.checked?K.show():R(K)}};Cp.onclick();a&&(Cp.onclick=void 0,Cp.disabled=!0);d=L("div",b);d.id="advconf";L("span",d,N(503),"margin-right:9px");Dp=jn(d);let I=L("div",d);Dp.checked=wp(I);Dp.onchange=function(H){if(Dp.checked)I.style.cssText="";else if(R(I),5!=H){for(let U of vp)if(U.id){H=Dk[U.id];var K=ra[U.id];"checkbox"==H.type?H.checked=!!K:H.value=K;
if(Dk[U.id].oninput)Dk[U.id].oninput()}Dk[30].onchange()}};Dp.onchange(5);a&&(Dp.onchange=void 0,Dp.disabled=!0);d=L("div",b);d.id="rndtable";k=L("table",d);ep(k);e=L("table",d);ep(e);L("thead",e,`<td colspan=5>${N(481)}</td>`);L("thead",e,tp()+`<td colspan=2>${N(483)}</td>`+tp(N(6)));hp=L("tbody",e);L("thead",k,`<td colspan=3>${N(480)}</td>`);L("thead",k,tp()+tp(N(482)));mp=L("tbody",k);mp.id="stobjs";if(!a){e=L("div",b,"","margin-top:42px;margin-bottom:-17px;max-width: 1287px;");e.id="presets";
Gp=k=g.presets4?JSON.parse(g.presets4):{};Ep=b=L("span",e,`<span style="color:#907d44;font-size:13px;">${N(460)}:</span>`);for(var q in wa)Hp(q,wa[q],b,1);for(var t in k)Hp(t,k[t],b);q=L("span",e);let H=L("input",q,"","width:144px;font-size:12px;color:#ffd75d85");H.id="prstnpt";H.value="custom preset"+(Object.keys(k).length+1);t=L("button",q,N(8));t.onclick=Fp;t.Ac=b;L("button",q,N(879)).onclick=()=>{let K=new Blob([new Int32Array(n)],{type:"application/octet-binary"});Jf(K,H.value+".tzcnf")};L("button",
q,N(832)).onclick=()=>{nn(K=>{n=Array.from(new Int32Array(K.target.result));Hb(m("mapconfiguration"));oe()})}}Bp();Oo(a,n);Cp.checked&&op();a||(Dk[30].onchange=function(){for(let H=0;4>H;H++)Dk[25+H].parentNode.style.display=0<this.value?"unset":"none"},Dk[30].onchange());c.onclick=a?function(){Hb(m("mapconfiguration"))}:function(){if(C.l)Gk();else if(Q){Ck();Fk();Hb(m("mapconfiguration"));return}m("mapconfiguration").parentNode.parentNode.style.display="none"};if(a){for(c=0;c<Dk.length;c++)Dk[c]&&
(Dk[c].disabled=!0);c=d.getElementsByTagName("input");for(q=0;q<c.length;q++)c[q].disabled=!0}}}function Oi(a,b){a.innerHTML!=b&&(a.innerHTML=b)}function ub(a){a.innerHTML=""}function S(a){return parseInt(a.value)}function Ip(a,b,c){a=L("button",a);a.className="closeIcon";a.onclick=c?function(){R(this.parentNode.parentNode.parentNode)}:b?function(){Hb(this.parentNode);location.hash="";setTimeout(Zf,200)}:function(){Hb(this.parentNode)}}
function Pm(){var a=Xc("",2);a.id="Settings";if(1==g.sid){var b=L("div",a);let h=L("input",b);h.type="number";L("button",b,"ban").onclick=function(){p(parseInt(h.value),h.value);G(37,Ql(parseInt(h.value)));alert(1)};let k=L("input",b);k.type="number";L("button",b,"panic").onclick=function(){alert(3);G(47,Ll(parseInt(k.value)))};let q=L("input",b);q.type="number";L("button",b,"vrsn").onclick=function(){alert(4);var A=parseInt(q.value);let x=new Uint8Array(3);x[1]=A&255;x[2]=A>>8&255;G(46,x)};var c=
L("div",b);let t=L("input",c);t.type="number";t.placeholder="04";let r=M("input",c,"margin-left:5px");r.type="number";L("button",b,"HRD").onclick=function(){let A=new Uint8Array(6);A[1]=S(t);xb(A,2,S(r));p(A);alert(4);G(49,A)};L("button",b,"RE-HRD").onclick=function(){G(50)};L("button",b,"RE-BAN").onclick=function(){G(38);alert(2)};c=L("div",b);let u=L("input",c);u.placeholder="msg 1s";u.type="number";let v=L("input",c);v.placeholder="connections";v.type="number";let w=L("input",c);w.placeholder=
"bandwidth";w.type="number";L("button",b,"RATE").onclick=function(){alert(5);let A=new Uint8Array(13);xb(A,1,S(u)||2147483647);xb(A,5,S(v)||2147483647);xb(A,9,S(w)||2147483647);G(59,A)}}b=L("div",a);O("span",b,15);g.sid?(c=M("div",b,"text-align:left"),L("span",c,g.name,"color:#0f0"),O("span",c,0,"margin-left:5px;color:#f0f;font-size:10px !important")):(c=L("input",b),c.maxLength=17,c.value=String(l.name).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),c.onchange=Jp,c.sa="name",c.spellcheck=
!1);O("span",b,103);c=L("select",b);for(var d=0;3>d;d++)L("option",c,Rb[d]).value=d;c.value=g.civi||0;c.onchange=function(){g.civi=this.value};O("span",b,14);c=L("input",b);c.type="color";c.value=l.color;c.onchange=Jp;c.sa="color";c.style.backgroundColor=l.color;O("span",b,718);c=L("select",b);d="en English es Espa\u00f1ol it Italiano pt Portugu\u00eas pl Polski cz \u010ce\u0161tina de Deutsch ru \u0420\u0443\u0441\u0441\u043a\u0438\u0439 bg \u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438".split(" ");
for(let h=0;h<d.length;h+=2)L("option",c,d[h+1]).value=d[h];c.value=l.Ja;c.onchange=function(){g.language=this.value;location.href=""};O("span",b,539);b=L("div",b);var e=L("div",b,"","cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+21*g.CCID+"px");let f=M("div",b,"max-height:256px;overflow:auto;width:265px;margin-top:5px;display:flex;flex-wrap:wrap;gap:11px");e.onclick=function(){f.innerHTML="";for(let h=0;h<Ol.length;h++)M("div",f,"cursor:url(nehhon/hand.gif),default;width:21px;height:15px;background:url(nehhon/flags.webp) -"+
21*h+"px").onclick=()=>{g.CCID=h;e.style.backgroundPositionX=21*-h+"px";f.innerHTML="";G(36,Ll(h))}};e.onchange=function(){g.CCID=this.value};b=L("div",a);O("span",b,569);c=L("select",b);L("option",c,"WebGL 1").value=1;L("option",c,"WebGL 2").value=2;navigator.gpu&&(L("option",c,"WebGPU").value=3);c.value=E?3:Ma?1:2;c.onchange=function(){g.webgl=this.value;location.href=""};O("span",b,568);a=L("select",b);c=["No","SSAA 2x"];for(d=0;2>d;d++)L("option",a,c[d]).value=d+1;a.value=g.antialiasing2;a.onchange=
function(){g.antialiasing2=this.value};O("span",b,540);c=L("select",b);for(a=0;4>a;a++)O("option",c,570+a).value=a;c.value=g.fogRefresh;c.onchange=function(){g.fogRefresh=this.value};O("span",b,889);se(b,h=>{g.selectionCircle=h?1:0},1==g.selectionCircle);O("span",b,878);se(b,h=>{g.hlffps=h?1:0},1==g.hlffps);O("span",b,719);se(b,h=>{g.shadows=h},"true"==g.shadows);O("span",b,534);se(b,h=>{g.nodecals=h?0:1},1!=g.nodecals);O("span",b,459);se(b,h=>{g.theme=h},"true"==g.theme);O("span",b,43);se(b,h=>{g.fullscreen=
h},"true"==g.fullscreen);window.SharedArrayBuffer&&(O("span",b,567),se(b,h=>{g.multithreading=h},"true"==g.multithreading));O("span",b,541);a=L("div",b);c=L("input",a);c.type="range";c.max=100*nj();c.min=25;c.step=25;c.value=g.pixelDensity1||100*nj();il(c);c.oninput=function(){this.H.innerHTML=this.value+"%"};c.onchange=function(){g.pixelDensity1=this.value};c.oninput(1);c.style.width="96px";O("span",b,887);a=L("div",b);c=L("input",a);c.type="range";c.max=300;c.min=25;c.step=5;c.value=g.UIscale;il(c);
c.oninput=function(){this.H.innerHTML=this.value+"%"};c.onchange=function(){g.UIscale=this.value;Pk()};c.oninput(1);c.style.width="96px"}function Gb(a,b,c,d){let e=L("div",document.body);e.className="fwindow2";a=L("div",L("div",e),a,c);b&&Ip(a,2==b,d);return a}function Xc(a,b,c,d){let e=L("div",document.body);e.className="fwindow";a=L("div",L("div",e),a,c);b&&Ip(a,2==b,d);return a}
function Qm(){var a=Xc("",2);a.id="aboutd";var b=L("div",a);M("div",b,"background-repeat:no-repeat;height:124px;background-position:center;margin-bottom:16px").className="svgnehhon";L("p",b,"Graphics and sounds are property of Haemimont Games");b=L("a",b);b.href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=ABHGGGQ4TZFA2&source=url";b.target="_blank";M("img",b,"margin:19px 0px").src="nehhon/donate.gif";b=L("div",a);var c=[{i:"BTC",La:"3Nm6Mtj4rkeEKZRwnnZvFFkuwbt63NLymv"},{i:"ETH",
La:"0x4E89bAa9e83964634D4eB73E7325DF250f926517"},{i:"ZEN",La:"znhb95iBoiQtCdNCVgurHQgA75eYVqXuUMH"},{i:"XRP",La:"rKV8HEL3vLc6q9waTiJcewdRdSFyx67QFb",zb:"1009251507"}];for(var d of c){c=M("div",b,"text-align:left;margin:7px 0px");L("span",c,d.i,"width:42px;display:inline-block;color:var(--color1)");let e=M("input",c,"width:350px;cursor:text");e.disabled=!0;e.value=d.La;d.zb&&(L("span",c," memo: ","font-size:10px"),c=M("input",c,"width:80px;cursor:text"),c.disabled=!0,c.value=d.zb)}d=L("div",a);L("div",
d,"Contact:","margin-bottom:20px");b=L("a",d,"webmaster@nehhon.com");b.href="mailto:webmaster@nehhon.com";b.target="_blank";L("p",d);d=L("a",d,"@TzaredGame");d.href="https://twitter.com/TzaredGame";d.target="_blank";a=L("div",a);L("div",a,"Special thanks to","margin-bottom:20px");d=L("a",L("p",a),"CRAZYGAMES.COM");d.href="https://www.crazygames.com/c/io";d.target="_blank";M("img",a,"max-width:241px").src="nehhon/cloudflare.svg";M("img",a,"max-width:171px;display:block;margin:31px auto").src="nehhon/fini.png";
L("p",a,"&");d='<a href="https://www.youtube.com/MayorceteGamingTV" target="_blank">Mayorcete</a>;Penetrenko;Remi Sluz;David Grau;PuppedToy;Ismael Carvajal;Alvaro Lopez;Gaboal;Nanyo Nanev;Miguel Rexi;Daniel Matos;Mikel Iglesias;Cristian Vargas;Debra Stokes;Irene;Edgaras;Hekas;<a href="https://soundcloud.com/diemiurgo" target="_blank" rel="noopener noreferrer">Diemiurgo</a>;<a href="https://www.youtube.com/user/rainheart666787" target="_blank" rel="noopener noreferrer">Sharp Rain</a>;Johannes Feulner;Marco Adorni;Eric Brown;Tommaso Bruno;PRG;Julian Kazior;JotaVilla;Francesco Castelli;FT21;Manolo;Mikhail;Witold;Michael (Macca);Vanilla Ice;Marcinm;Kurnaq;Gator;Pikachu;Sebaastian;Luca;Edward;Juan;Ivan;Marcel;Olmo;WMLS;Daniel Petkov;Zach Brock;MiTrAnDiR;Mariusz;Jose Manuel;Maria;Atanas;\u0141ukasz;Cristian;Wochnik;German;Power Supersport;Xoordis;Lorenzo'.split(";");
a=M("div",a,"display:flex;flex-wrap:wrap;max-width:527px;gap:5px 11px;justify-content:center");for(let e of d)L("span",a,e,"padding: 2px 4px; border: solid #ffffff54; border-top: 0px; border-bottom: 0px; }")}function Jp(){var a=this.value;"color"==this.type?this.style.backgroundColor=a:"name"==this.sa&&(a=Cm(a));if(a||"name"!=this.sa)l[this.sa]=a,g[this.sa]=a,bl(D[53](ll()),17,g.name)}
if(ka){let a=L("button",m("index"));a.onclick=()=>{window.close()};a.style.cssText="z-index:1;position:fixed;top:-10px;right:-29px;font-size:45px;text-shadow: none;font-family: none;background: #7e0000;box-shadow: 0px 0px 20px #000;transform: rotate(45deg);   width: 87px;    height: 46px;";a.innerHTML="+"}m("rnd0").onclick=function(){location.hash="RandomMap"};m("sett").onclick=function(){location.hash="Settings"};let Kp=document.getElementsByTagName("head")[0],Lp=document.createElement("link");
Lp.rel="stylesheet";Lp.type="text/css";Lp.href=l.Ea+"b.css?v=545";Lp.media="all";Kp.appendChild(Lp);function Mp(){this.j="move attack die idle normal child shadow kirka meat food gold stone build tree milk trade spell milk1 wood jump dig cut mask water edge terrain plateau alpha decal".split(" ")}Mp.prototype.index=function(a){return this.j.indexOf(a)};g.lastVersion=545;var Ud=new Mp;ib();var Np={0:"euro",1:"arab",2:"asia"};function Op(a,b){const c=b.length,d=a.length;var e=0;a:for(;e<c;e++){for(var f=0;f<d;f++)if(b[e+f]!==a[f])continue a;return e}return!1}function ve(){p(this.files);var a=new FileReader;a.onload=function(){Pp(this.result)};a.readAsArrayBuffer(this.files[0])}
function Pp(a){let b=Qp(a);a={grass:0,summer:4,deset:2,snow:3}[b.tc];p(a);var c=jb(kb);let d=b.ra.length+1;for(var e=0;e<d;e++)c[e]=0;e=1;for(let f of b.ra){for(let h=0;h<d;h++)c[h+e*d]=f.Vb[h];e++}p(c.slice(0,d*d));D[211](b.ra.length,a,b.Ab);jc(function(){D[122]();le.update=!0;D[121]();Jd();var f=Ni(D[78](),b.Ab**2);for(var h=0;h<f.length;h++)f[h]=b.sc[h];p(f);ml(Rp);D[124](1);le.update=!0;f=1;for(var k of b.ra){h=jb(kb);for(let q=0;q<k.name.length;q++)h[q]=k.name.charCodeAt(q);D[213](f,k.color[0],
k.color[1],k.color[2],k.IA,k.race,k.resGold,k.resFood,k.resWood,k.resStone,k.name.length);f++}Nd();yf();for(let q of b.Ca)if(k=q.kingdom,10==k&&(k=0),9==k&&(k=2**31-1),f=Sp[q.type+256*q.race],51==f&&23==q.WW&&(f=46),51==f&&p(q),void 0!=f)D[212](f,k,q.x32,q.y32,q.d,q.attack,q.defence,q.health,q.maxHealth,q.level,q.mana,q.xx21);Rd(b.name,0);Rd(b.description,1);Rd(b.Rb,2);Hb(m("mapPropsWindow"))})}
function Tp(a){const b=a.length,c=new Uint16Array(a.length);for(var d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function Up(a,b){return Op(Tp(a),b)+a.length}function Vp(a,b){a+=String.fromCharCode(0);return Op(Tp(a),b)}function Wp(a,b,c){var d="";for(b+=a;a<b&&c[a];a++)d+=String.fromCharCode(c[a]);return d}
function Qp(a){a=new Uint8Array(a);var b=Op([50,109,122,116],a)+6,c=a[b]+256*a[b+1],d=a[b+2]+(a[b+3]<<8)+(a[b+4]<<16);p("mapx:",c,"units",d);p("header",a[Up(".header",a)],"description",a[Up(".description",a)],"kingdominfo",a[Up(".kingdominfo",a)],"diplomacy",a[Up(".diplomacy",a)],"forbidden.upgrades",a[Up(".forbidden.upgrades",a)],"tiles",a[Up(".tiles",a)]);p(a);var e=2*c;b={};b.Ab=c;b.Mc=c;b.kb=!1;c="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 xx22".split(" ");
var f="DIR2 WW0 WW utype xx56 xx2 xx562 type xx3 xxtra x32 y32 kingdom race id d health maxHealth attack defence xx8 level xx9 resistance xx11 mana xx12 xx13 xx14 xx15 xx16 xx17 xx18 xx19 xx20 xx21 resource".split(" "),h=e/2,k=20480+2*h*h,q={};h=0;for(var t=a.length;h<t;h++){var r=a[h];q[r]||(q[r]=[]);q[r].push(h)}q=[];var u={56:!0,58:!0,88:!0,72:!0};p(a.slice(k));h=k+1;for(t=a.length;h<t;h++)if(r=a[h],u[r]&&u[a[h+4]]){k={};r=72!==r?c:f;var v=h-8;let y=v;k.i2=v;for(var w=0,A=r.length;w<A;w++){var x=
r[w];"kingdom"==x||"race"==x||"xx21"==x||"xx22"==x?(k[x]=a[v],v++):(k[x]=a[v]+256*a[v+1],v+=2)}h+=v-y-8;q.push(k)}b.Ca=q;b.Ca.length>d&&(b.Ca.length=d);d=b.Ca;c=e/2;u=[];f=0;k=[];v=r=a[Up(".forbidden.upgrades",a)]+1;t=r*=512;for(h=a.length;t<h;t+=2){A=a[t];w=~~(t/512);for(q=8;q<c&&a[q+t]===(A+q/4)%256;q+=4);20<q&&(t=512*w,1==u.length&&(t=512*(w-(2-(w-v)%2))),q=a.slice(r,t),r-t&&(u[f++]=[r,t],k.push(q)),t+=512,2==u.length&&(t-=512),r=t)}u[f++]=[r,a.length];k={64:[u[0]],96:[u[0]],128:[u[0]],192:[u[1],
u[0],u[2],u[3]],256:[u[1],u[0],u[2],u[3]],384:[u[1],u[0],u[2],u[3],u[4],u[5],u[6]],512:[u[1],u[0],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9]]}[c];p(u);u=new Uint8Array(c*c);r=new Uint8Array(c*c);Rp=new Uint8Array(c*c);q=f=0;for(v=k.length;q<v;q++)if(h=k[q],f<c*c)for(t=h[0],h=h[1];t<h;t+=2)u[f]=a[t],r[f]=a[t+1],Rp[f]=r[f]%8,8<=r[f]&&d.push({race:0,type:7,d:~~(r[f]/8)-1,x32:f%c,y32:~~(f/c)}),f++;Xp(u,e);Xp(r,e);b.sc=u;d=(e="grass",Vp("grass",a))||(e="summer",Vp("summer",a))||(e="desert",Vp("desert",a))||
(e="snow",Vp("snow",a));c=Wp(512*(a[Up(".description",a)]-1),512,a);b.description=c;b.Rb=Wp(d-64,64,a);b.name=Wp(d-128,64,a);b.tc=e;for(e=Op([192,4],a)+50;!a[e];)e++;d="name tzar active resGold resStone resFood resWood x6 race x8 x9 x10 x11 x12 x13 x14 AI x16 x17 x18 x19 x20".split(" ");c=d.length;f=[];t=[[41,115,255],[231,0,0],[57,115,16],[231,0,231],[255,255,0],[0,181,181],[255,156,33],[90,90,90]];p("kingdoms:",e);b.vc={0:0,9:0,10:0};for(q=0;8>q;q++){u={color:t[q]};for(k=0;k<c;k++)if(r=d[k],"name"==
r||"tzar"==r){for(u[r]="";!a[e];)e++;for(h=e+32;a[e];)u[r]+=String.fromCharCode(a[e]),e++;e=h}else u[r]=a[e]+(a[e+1]<<8)+(a[e+2]<<16)+(a[e+3]<<24),"race"==r&&(u[r]=a[e],u.racestr=Np[a[e]-1]),e+=4;f.push(u);b.vc[q+1]=f.length;1<f.length&&(u.IA=1);u.resources=[u.resGold,u.resWood,u.resFood,u.resStone];u.race--}p(f);b.ra=f;e=b.ra;d=512*(a[Up(".diplomacy",a)]-1);c=e.length;for(f=0;f<c;f++)if(h=[0],e[f])for(e[f].Vb=h,t=1;9>t;t++)e[t-1]&&(q=a[d],q=60>q&&t-1!=f?1:0,h.push(q)),d+=4;else d+=32;p(b);return b}
function Xp(a,b){if(a&&a.length){b/=2;var c=~~(a.length/b);if(b){for(var d=document.createElement("canvas"),e=d.getContext("2d"),f=new ImageData(b,c),h=f.data,k=0,q=h.length;k<q;k+=4){var t=a[k/4];h[k]=t;h[k+1]=t;h[k+2]=t;h[k+3]=255}d.width=b;d.height=c;e.putImageData(f,0,0);document.body.appendChild(d)}}}
var Rp,Sp={7:7,15:78,16:77,19:37,20:39,21:38,22:131,23:73,24:75,25:76,27:59,28:58,30:132,31:40,32:130,36:60,38:42,39:55,40:32,41:44,42:56,43:57,61:45,62:13,63:20,64:35,72:43,110:27,133:36,136:74,257:10,258:61,259:0,260:4,261:3,262:6,263:1,264:19,67:51,267:8,270:2,273:5,274:9,300:12,301:14,302:15,303:23,304:30,305:25,306:28,307:18,308:34,309:33,310:41,311:11,312:17,314:26,315:29,316:16,321:24,322:31,513:79,514:90,515:80,516:81,517:83,519:82,522:85,529:89,530:87,541:91,545:86,547:84,556:63,557:102,
558:93,559:95,560:100,561:99,562:103,563:94,564:104,565:101,566:96,568:109,570:97,571:98,572:107,577:108,578:92,581:110,583:106,769:64,771:66,772:67,773:68,778:69,780:128,781:65,785:129,786:127,802:70,805:72,812:62,813:71,814:112,815:114,816:119,817:118,818:121,819:113,820:122,821:120,822:115,824:126,826:116,827:117,828:124,833:125,834:111,838:123,76:21,78:22};
